typedef unsigned char   undefined;

typedef unsigned char    byte;
typedef unsigned int    dword;
typedef long long    longlong;
typedef unsigned char    uchar;
typedef unsigned int    uint;
typedef unsigned long long    uint16;
typedef unsigned char    undefined1;
typedef unsigned short    undefined2;
typedef unsigned int    undefined4;
typedef unsigned short    ushort;
typedef unsigned short    word;



void do_initial_variable_setup(void)

{
  int iVar1;
  code *UNRECOVERED_JUMPTABLE;
  int iVar2;
  undefined4 *puVar3;
  
  iVar1 = DAT_800000c0;
  puVar3 = (undefined4 *)((int)&DAT_800000c0 + DAT_800000c0);
  iVar2 = DAT_800000c0 + -0x7fffff41;
  if (puVar3 == (undefined4 *)((int)&DAT_800000c0 + DAT_800000c4)) {
    prepare_for_main();
  }
  UNRECOVERED_JUMPTABLE = *(code **)(iVar1 + -0x7fffff34);
                    // WARNING: Could not recover jumptable at 0x800000b8. Too many branches
                    // WARNING: Treating indirect jump as call
  if (((uint)UNRECOVERED_JUMPTABLE & 1) != 0) {
    (*(code *)(iVar2 - (int)UNRECOVERED_JUMPTABLE))();
    return;
  }
                    // WARNING: Could not recover jumptable at 0x800000bc. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE)
            (*puVar3,*(undefined4 *)((int)&DAT_800000c4 + iVar1),
             *(undefined4 *)(unpack_initial_data + iVar1));
  return;
}



void unpack_initial_data(uchar *source,uchar *dest,uint count)

{
  byte bVar1;
  byte *pbVar2;
  byte *pbVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  
  pbVar3 = dest + count;
  do {
    uVar4 = (uint)*source;
    pbVar2 = source + 1;
    uVar5 = uVar4 & 7;
    if ((*source & 7) == 0) {
      uVar5 = (uint)*pbVar2;
      pbVar2 = source + 2;
    }
    uVar6 = (int)uVar4 >> 4;
    source = pbVar2;
    if (uVar6 == 0) {
      uVar6 = (uint)*pbVar2;
      source = pbVar2 + 1;
    }
    while (uVar5 = uVar5 - 1, uVar5 != 0) {
      *dest = *source;
      dest = dest + 1;
      source = source + 1;
    }
    if ((int)(uVar4 << 0x1c) < 0) {
      bVar1 = *source;
      source = source + 1;
      pbVar2 = dest + -(uint)bVar1;
      iVar7 = uVar6 + 1;
      do {
        bVar1 = *pbVar2;
        pbVar2 = pbVar2 + 1;
        *dest = bVar1;
        dest = dest + 1;
        iVar7 = iVar7 + -1;
      } while (-1 < iVar7);
    }
    else {
      uVar5 = uVar6;
      if (uVar6 != 0) {
        do {
          uVar5 = uVar5 - 1;
          dest[uVar5] = 0;
        } while (uVar5 != 0);
        dest = dest + uVar6;
      }
    }
  } while (dest < pbVar3);
  return;
}



void initial_data_copy(uchar *source,uchar *dest,uint count)

{
  uint uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  
  do {
    uVar1 = count;
    count = uVar1 - 0x10;
    if (0xf < uVar1) {
      uVar2 = *(undefined4 *)source;
      uVar3 = *(undefined4 *)((int)source + 4);
      uVar4 = *(undefined4 *)((int)source + 8);
      uVar5 = *(undefined4 *)((int)source + 0xc);
      source = (uchar *)((int)source + 0x10);
      *(undefined4 *)dest = uVar2;
      *(undefined4 *)((int)dest + 4) = uVar3;
      *(undefined4 *)((int)dest + 8) = uVar4;
      *(undefined4 *)((int)dest + 0xc) = uVar5;
      dest = (uchar *)((int)dest + 0x10);
    }
  } while (0xf < uVar1 && count != 0);
  if ((bool)((byte)(count >> 3) & 1)) {
    uVar2 = *(undefined4 *)source;
    uVar3 = *(undefined4 *)((int)source + 4);
    source = (uchar *)((int)source + 8);
    *(undefined4 *)dest = uVar2;
    *(undefined4 *)((int)dest + 4) = uVar3;
    dest = (uchar *)((int)dest + 8);
  }
  if ((int)(uVar1 * 0x20000000) < 0) {
    *(undefined4 *)dest = *(undefined4 *)source;
  }
  return;
}



void initial_data_clear(uchar *dest,uint count)

{
  uint uVar1;
  
  do {
    uVar1 = count;
    count = uVar1 - 0x10;
    if (0xf < uVar1) {
      *(undefined4 *)dest = 0;
      *(undefined4 *)((int)dest + 4) = 0;
      *(undefined4 *)((int)dest + 8) = 0;
      *(undefined4 *)((int)dest + 0xc) = 0;
      dest = (uchar *)((int)dest + 0x10);
    }
  } while (0xf < uVar1 && count != 0);
  if ((bool)((byte)(count >> 3) & 1)) {
    *(undefined4 *)dest = 0;
    *(undefined4 *)((int)dest + 4) = 0;
    dest = (uchar *)((int)dest + 8);
  }
  if ((int)(uVar1 * 0x20000000) < 0) {
    *(undefined4 *)dest = 0;
  }
  return;
}



void some_heap_init(void)

{
  do_data_prep_1();
  return;
}



void FUN_80000184(void)

{
  return;
}



void prepare_for_main(void)

{
  uint *puVar1;
  uint *puVar2;
  uint uVar3;
  uint **ppuVar4;
  int iVar5;
  int *piVar6;
  uint uVar7;
  uint *puVar8;
  
  get_some_data();
  some_heap_init();
  (*(code *)(DAT_800001b8 + -0x7ffffe60))();
  uVar3 = FUN_80000d24();
  FUN_80000184();
  endless_loop();
  ppuVar4 = (uint **)FUN_80000b34();
  puVar8 = *ppuVar4;
  uVar7 = uVar3 + 0xb & 0xfffffff8;
  if (uVar7 <= uVar3) {
    return;
  }
  do {
    puVar1 = puVar8;
    puVar2 = (uint *)puVar8[1];
    while (puVar2 != (uint *)0x0) {
      if (uVar7 <= *puVar2) {
        if (*puVar2 < uVar7 + 8) {
          puVar1[1] = puVar2[1];
        }
        else {
          piVar6 = (int *)((int)puVar2 + uVar7);
          piVar6[1] = puVar2[1];
          *piVar6 = *puVar2 - uVar7;
          puVar1[1] = (uint)piVar6;
          *puVar2 = uVar7;
        }
        return;
      }
      puVar1 = puVar2;
      puVar2 = (uint *)puVar2[1];
    }
    iVar5 = FUN_80000b48(puVar8,uVar7);
  } while (iVar5 != 0);
  return;
}



uint * FUN_800001bc(uint param_1)

{
  uint *puVar1;
  uint *puVar2;
  uint **ppuVar3;
  int iVar4;
  int *piVar5;
  uint uVar6;
  uint *puVar7;
  
  FUN_80000184();
  endless_loop();
  ppuVar3 = (uint **)FUN_80000b34();
  puVar7 = *ppuVar3;
  uVar6 = param_1 + 0xb & 0xfffffff8;
  if (uVar6 <= param_1) {
    return (uint *)0x0;
  }
  do {
    puVar1 = puVar7;
    puVar2 = (uint *)puVar7[1];
    while (puVar2 != (uint *)0x0) {
      if (uVar6 <= *puVar2) {
        if (*puVar2 < uVar6 + 8) {
          puVar1[1] = puVar2[1];
        }
        else {
          piVar5 = (int *)((int)puVar2 + uVar6);
          piVar5[1] = puVar2[1];
          *piVar5 = *puVar2 - uVar6;
          puVar1[1] = (uint)piVar5;
          *puVar2 = uVar6;
        }
        return puVar2 + 1;
      }
      puVar1 = puVar2;
      puVar2 = (uint *)puVar2[1];
    }
    iVar4 = FUN_80000b48(puVar7,uVar6);
  } while (iVar4 != 0);
  return (uint *)0x0;
}



uint * FUN_800001cc(uint param_1)

{
  uint *puVar1;
  uint *puVar2;
  uint **ppuVar3;
  int iVar4;
  int *piVar5;
  uint uVar6;
  uint *puVar7;
  
  ppuVar3 = (uint **)FUN_80000b34();
  puVar7 = *ppuVar3;
  uVar6 = param_1 + 0xb & 0xfffffff8;
  if (uVar6 <= param_1) {
    return (uint *)0x0;
  }
  do {
    puVar1 = puVar7;
    puVar2 = (uint *)puVar7[1];
    while (puVar2 != (uint *)0x0) {
      if (uVar6 <= *puVar2) {
        if (*puVar2 < uVar6 + 8) {
          puVar1[1] = puVar2[1];
        }
        else {
          piVar5 = (int *)((int)puVar2 + uVar6);
          piVar5[1] = puVar2[1];
          *piVar5 = *puVar2 - uVar6;
          puVar1[1] = (uint)piVar5;
          *puVar2 = uVar6;
        }
        return puVar2 + 1;
      }
      puVar1 = puVar2;
      puVar2 = (uint *)puVar2[1];
    }
    iVar4 = FUN_80000b48(puVar7,uVar6);
  } while (iVar4 != 0);
  return (uint *)0x0;
}



void FUN_8000022e(int param_1)

{
  int **ppiVar1;
  int *piVar2;
  int *piVar3;
  int *piVar4;
  
  piVar4 = (int *)(param_1 + -4);
  ppiVar1 = (int **)FUN_80000b34();
  if (param_1 != 0) {
    piVar2 = *ppiVar1;
    piVar3 = (int *)(*ppiVar1)[1];
    while ((piVar3 != (int *)0x0 && (piVar3 < piVar4))) {
      piVar2 = piVar3;
      piVar3 = (int *)piVar3[1];
    }
    if ((int *)(*piVar2 + (int)piVar2) == piVar4) {
      *piVar2 = *piVar2 + *piVar4;
      piVar4 = piVar2;
    }
    else {
      piVar2[1] = (int)piVar4;
    }
    if ((int *)(*piVar4 + (int)piVar4) != piVar3) {
      piVar4[1] = (int)piVar3;
      return;
    }
    piVar4[1] = piVar3[1];
    *piVar4 = *piVar4 + *piVar3;
  }
  return;
}



ulonglong FUN_8000027c(uint param_1,uint param_2,uint param_3,uint param_4)

{
  bool bVar1;
  longlong lVar2;
  byte bVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  bool bVar12;
  bool bVar13;
  bool bVar14;
  
  bVar12 = (int)param_4 < 0;
  bVar13 = param_4 == 0;
  uVar10 = param_4;
  if (bVar13) {
    uVar10 = param_3;
  }
  uVar11 = count_leading_zeroes(uVar10);
  uVar10 = uVar10 << (uVar11 + 1 & 0xff);
  if (!bVar13) {
    uVar11 = 0x3f - uVar11;
    bVar12 = (int)uVar11 < 0;
    bVar13 = uVar11 == 0;
  }
  if (bVar13) {
    uVar11 = 0x1f - uVar11;
    bVar12 = (int)uVar11 < 0;
  }
  if (bVar12) {
    return 0;
  }
  bVar12 = param_2 == 0;
  if (bVar12) {
    iVar5 = count_leading_zeroes(param_1);
  }
  else {
    iVar5 = count_leading_zeroes(param_2);
    iVar5 = 0x3f - iVar5;
    bVar12 = iVar5 == 0;
  }
  if (bVar12) {
    iVar5 = 0x1f - iVar5;
  }
  uVar6 = iVar5 - uVar11;
  bVar12 = (int)uVar6 < 0;
  if (!bVar12) {
    if (!bVar12) {
      bVar12 = (int)(4 - uVar6) < 0;
    }
    if (!bVar12) {
      uVar11 = 0;
      uVar10 = param_4 << (uVar6 & 0xff) | param_3 >> (0x20 - uVar6 & 0xff);
      param_3 = param_3 << (uVar6 & 0xff);
      while( true ) {
        bVar14 = param_3 <= param_1;
        bVar12 = !bVar14;
        bVar13 = CARRY4(param_2,~uVar10);
        bVar1 = param_2 + ~uVar10 + 1 <= param_2;
        uVar11 = uVar11 * 2 + (uint)(bVar12 && bVar13 || bVar14 && bVar1);
        if (bVar12 && bVar13 || bVar14 && bVar1) {
          param_2 = param_2 - (uVar10 + !bVar14);
        }
        if (bVar12 && bVar13 || bVar14 && bVar1) {
          param_1 = param_1 - param_3;
        }
        bVar12 = uVar6 == 0;
        uVar6 = uVar6 - 1;
        if (bVar12) break;
        bVar3 = (byte)uVar10;
        uVar10 = uVar10 >> 1;
        param_3 = (uint)(bVar3 & 1) << 0x1f | param_3 >> 1;
      }
      return (ulonglong)uVar11;
    }
    if ((int)(uVar11 - 0x20) < 5) {
      uVar10 = uVar10 | param_3 >> (uVar11 - 0x20 & 0xff);
    }
    uVar6 = *(uint *)(&DAT_8000052c + (uVar10 >> 0x1c) * 4);
    uVar10 = uVar11;
    if (0x1f < uVar11) {
      uVar10 = uVar11 - 0x20;
    }
    uVar7 = 0x20 - uVar10;
    if (0x1f < uVar11) {
      lVar2 = (ulonglong)param_4 * (ulonglong)uVar6 +
              ((ulonglong)param_3 * (ulonglong)uVar6 >> 0x20);
      uVar11 = (uint)lVar2;
      uVar6 = uVar6 + (int)((ulonglong)
                            -(((int)((ulonglong)lVar2 >> 0x20) << (uVar7 & 0xff) |
                              uVar11 >> (uVar10 & 0xff)) + (uint)(uVar11 << (uVar7 & 0xff) != 0)) *
                            (ulonglong)uVar6 >> 0x20);
      lVar2 = (ulonglong)param_4 * (ulonglong)uVar6 +
              ((ulonglong)param_3 * (ulonglong)uVar6 >> 0x20);
      uVar11 = (uint)lVar2;
      uVar4 = (uVar6 + (int)((ulonglong)
                             -(((int)((ulonglong)lVar2 >> 0x20) << (uVar7 & 0xff) |
                               uVar11 >> (uVar10 & 0xff)) + (uint)(uVar11 << (uVar7 & 0xff) != 0)) *
                             (ulonglong)uVar6 >> 0x20)) - 1;
      uVar11 = (uint)((ulonglong)param_2 * (ulonglong)uVar4 +
                      ((ulonglong)param_1 * (ulonglong)uVar4 >> 0x20) >> 0x20) >> (uVar10 & 0xff);
      uVar7 = (uint)((ulonglong)param_3 * (ulonglong)uVar11);
      uVar6 = param_1 - uVar7;
      param_2 = param_2 - (uVar11 * param_4 + (int)((ulonglong)param_3 * (ulonglong)uVar11 >> 0x20)
                          + (uint)(param_1 < uVar7));
      bVar12 = param_4 <= param_2;
      if (param_2 == param_4) {
        bVar12 = param_3 <= uVar6;
      }
      if (bVar12) {
        uVar10 = (uint)((ulonglong)param_2 * (ulonglong)uVar4 +
                        ((ulonglong)uVar6 * (ulonglong)uVar4 >> 0x20) >> 0x20) >> (uVar10 & 0xff);
        uVar7 = (uint)((ulonglong)param_3 * (ulonglong)uVar10);
        param_2 = param_2 - (uVar10 * param_4 +
                             (int)((ulonglong)param_3 * (ulonglong)uVar10 >> 0x20) +
                            (uint)(uVar6 < uVar7));
        bVar12 = param_4 <= param_2;
        if (param_2 == param_4) {
          bVar12 = param_3 <= uVar6 - uVar7;
        }
        if (bVar12) {
          return (ulonglong)(uVar11 + uVar10 + 1);
        }
        return (ulonglong)(uVar11 + uVar10);
      }
      return (ulonglong)uVar11;
    }
    uVar11 = (uint)((ulonglong)param_3 * (ulonglong)uVar6);
    uVar6 = uVar6 + (int)((ulonglong)
                          -(((int)((ulonglong)param_3 * (ulonglong)uVar6 >> 0x20) << (uVar7 & 0xff)
                            | uVar11 >> (uVar10 & 0xff)) + (uint)(uVar11 << (uVar7 & 0xff) != 0)) *
                          (ulonglong)uVar6 >> 0x20);
    uVar11 = (uint)((ulonglong)param_3 * (ulonglong)uVar6);
    uVar6 = uVar6 + (int)((ulonglong)
                          -(((int)((ulonglong)param_3 * (ulonglong)uVar6 >> 0x20) << (uVar7 & 0xff)
                            | uVar11 >> (uVar10 & 0xff)) + (uint)(uVar11 << (uVar7 & 0xff) != 0)) *
                          (ulonglong)uVar6 >> 0x20);
    if (param_2 != 0) {
      uVar11 = (uint)((ulonglong)param_3 * (ulonglong)uVar6);
      uVar6 = uVar6 + (int)((ulonglong)
                            -(((int)((ulonglong)param_3 * (ulonglong)uVar6 >> 0x20) <<
                               (uVar7 & 0xff) | uVar11 >> (uVar10 & 0xff)) +
                             (uint)(uVar11 << (uVar7 & 0xff) != 0)) * (ulonglong)uVar6 >> 0x20);
    }
    lVar2 = (ulonglong)param_2 * (ulonglong)uVar6 + ((ulonglong)param_1 * (ulonglong)uVar6 >> 0x20);
    uVar11 = (uint)((ulonglong)lVar2 >> 0x20);
    uVar4 = (uint)lVar2 >> (uVar10 & 0xff) | uVar11 << (uVar7 & 0xff);
    uVar8 = (uint)((ulonglong)param_3 * (ulonglong)uVar4);
    uVar11 = uVar11 >> (uVar10 & 0xff);
    uVar7 = param_1 - uVar8;
    param_2 = param_2 - (uVar11 * param_3 + (int)((ulonglong)param_3 * (ulonglong)uVar4 >> 0x20) +
                        (uint)(param_1 < uVar8));
    if (param_2 != 0 || param_3 <= uVar7) {
      lVar2 = (ulonglong)param_2 * (ulonglong)uVar6 + ((ulonglong)uVar7 * (ulonglong)uVar6 >> 0x20);
      uVar8 = (uint)((ulonglong)lVar2 >> 0x20);
      uVar9 = (uint)lVar2 >> (uVar10 & 0xff) | uVar8 << (0x20 - uVar10 & 0xff);
      uVar6 = uVar4 + uVar9;
      iVar5 = uVar11 + (uVar8 >> (uVar10 & 0xff)) + (uint)CARRY4(uVar4,uVar9);
      uVar7 = uVar7 - param_3 * uVar9;
      if (param_3 <= uVar7) {
        uVar7 = uVar7 - param_3;
        bVar12 = param_3 <= uVar7;
        if (bVar12) {
          uVar7 = uVar7 - param_3;
        }
        uVar10 = uVar6 + 1 + (uint)bVar12;
        return CONCAT44(iVar5 + (uint)(0xfffffffe < uVar6) +
                        (uint)(bVar12 && uVar6 + 2 <= uVar6 + 1) +
                        (uint)(param_3 <= uVar7 && uVar10 + 1 <= uVar10),uVar10 + (param_3 <= uVar7)
                       );
      }
      return CONCAT44(iVar5,uVar6);
    }
    return CONCAT44(uVar11,uVar4);
  }
  return 0;
}



longlong FUN_8000056c(uint param_1,int param_2,uint param_3)

{
  if ((int)(param_3 - 0x20) < 0) {
    return CONCAT44(param_2 << (param_3 & 0xff) | param_1 >> (0x20 - param_3 & 0xff),
                    param_1 << (param_3 & 0xff));
  }
  return (ulonglong)(param_1 << (param_3 - 0x20 & 0xff)) << 0x20;
}



ulonglong FUN_80000594(uint param_1,uint param_2,uint param_3)

{
  if ((int)(param_3 - 0x20) < 0) {
    return CONCAT44(param_2 >> (param_3 & 0xff),
                    param_1 >> (param_3 & 0xff) | param_2 << (0x20 - param_3 & 0xff));
  }
  return (ulonglong)(param_2 >> (param_3 - 0x20 & 0xff));
}



uint * FUN_800005bc(uint *param_1)

{
  char cVar1;
  uint uVar2;
  char *pcVar3;
  
  pcVar3 = (char *)((int)param_1 + 1);
  while (((uint)param_1 & 3) != 0) {
    cVar1 = *(char *)param_1;
    param_1 = (uint *)((int)param_1 + 1);
    if (cVar1 == '\0') {
      return (uint *)((int)param_1 - (int)pcVar3);
    }
  }
  do {
    uVar2 = *param_1;
    param_1 = param_1 + 1;
    uVar2 = uVar2 - DAT_800005fc & ~uVar2 & DAT_800005fc << 7;
  } while (uVar2 == 0);
  param_1 = (uint *)((int)param_1 - (int)pcVar3);
  if ((uVar2 & 0xff) != 0) {
    return (uint *)((int)param_1 + -3);
  }
  if ((uVar2 & 0xffff) == 0) {
    if ((uVar2 & 0xffffff) != 0) {
      return (uint *)((int)param_1 + -1);
    }
  }
  else {
    param_1 = (uint *)((int)param_1 + -2);
  }
  return param_1;
}



void copy_short(void *dest,void *source,int count)

{
  copy_byte((uchar *)dest,(uchar *)source,count << 1);
  return;
}



longlong memset(void *dest,uint data,int count)

{
  undefined2 *puVar1;
  uint uVar2;
  uint local_20;
  
  puVar1 = (undefined2 *)dest;
  local_20 = data;
  if (((uint)dest & 3) != 0) {
    if (count == 0) goto LAB_80000650;
    count = count - 1;
    *(short *)dest = (short)data;
    puVar1 = (undefined2 *)((int)dest + 2);
  }
  if (1 < (uint)count) {
    uVar2 = count & 0xfffffffe;
    local_20 = uVar2 * 2;
    func_0x800008bc(puVar1,local_20,data << 0x10 | data);
    count = count - uVar2;
    puVar1 = puVar1 + uVar2;
  }
LAB_80000650:
  if (count != 0) {
    *puVar1 = (short)data;
  }
  return CONCAT44(local_20,dest);
}



longlong memcpy(void *dest,void *source,int count)

{
  uint *puVar1;
  uint *puVar2;
  byte *pbVar3;
  uint *puVar4;
  byte bVar5;
  undefined2 uVar6;
  uint in_r3;
  uint uVar7;
  byte bVar8;
  uint in_r12;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  bool bVar12;
  bool bVar13;
  
  if (3 < (uint)count) {
    uVar9 = (uint)dest & 3;
    in_r12 = uVar9;
    if (uVar9 != 0) {
                    // WARNING: Load size is inaccurate
      bVar5 = *source;
      puVar1 = (uint *)((int)source + 1);
      if (uVar9 < 3) {
        puVar1 = (uint *)((int)source + 2);
        in_r12 = (uint)*(byte *)(uint *)((int)source + 1);
      }
      *(byte *)dest = bVar5;
      source = puVar1;
      if (uVar9 < 2) {
        source = (void *)((int)puVar1 + 1);
        bVar5 = *(byte *)puVar1;
      }
      puVar1 = (uint *)((int)dest + 1);
      if (uVar9 < 3) {
        puVar1 = (uint *)((int)dest + 2);
        *(byte *)(uint *)((int)dest + 1) = (byte)in_r12;
      }
      count = (count + uVar9) - 4;
      dest = puVar1;
      if (uVar9 < 2) {
        dest = (void *)((int)puVar1 + 1);
        *(byte *)puVar1 = bVar5;
      }
    }
    in_r3 = (uint)source & 3;
    if (in_r3 == 0) {
      while (uVar9 = count - 0x20, 0x1f < (uint)count) {
                    // WARNING: Load size is inaccurate
        uVar7 = *(uint *)((int)source + 4);
        uVar10 = *(uint *)((int)source + 8);
        uVar11 = *(uint *)((int)source + 0xc);
        *(uint *)dest = *source;
        *(uint *)((int)dest + 4) = uVar7;
        *(uint *)((int)dest + 8) = uVar10;
        *(uint *)((int)dest + 0xc) = uVar11;
        in_r3 = *(uint *)((int)source + 0x10);
        uVar7 = *(uint *)((int)source + 0x14);
        uVar10 = *(uint *)((int)source + 0x18);
        uVar11 = *(uint *)((int)source + 0x1c);
        source = (void *)((int)source + 0x20);
        *(uint *)((int)dest + 0x10) = in_r3;
        *(uint *)((int)dest + 0x14) = uVar7;
        *(uint *)((int)dest + 0x18) = uVar10;
        *(uint *)((int)dest + 0x1c) = uVar11;
        dest = (void *)((int)dest + 0x20);
        count = uVar9;
      }
                    // WARNING: Load size is inaccurate
      if ((bool)((byte)(uVar9 >> 4) & 1)) {
        in_r3 = *source;
        uVar7 = *(uint *)((int)source + 4);
        uVar10 = *(uint *)((int)source + 8);
        uVar11 = *(uint *)((int)source + 0xc);
        source = (void *)((int)source + 0x10);
        *(uint *)dest = in_r3;
        *(uint *)((int)dest + 4) = uVar7;
        *(uint *)((int)dest + 8) = uVar10;
        *(uint *)((int)dest + 0xc) = uVar11;
        dest = (void *)((int)dest + 0x10);
      }
                    // WARNING: Load size is inaccurate
      if (count << 0x1c < 0) {
        in_r3 = *source;
        uVar7 = *(uint *)((int)source + 4);
        source = (void *)((int)source + 8);
        *(uint *)dest = in_r3;
        *(uint *)((int)dest + 4) = uVar7;
        dest = (void *)((int)dest + 8);
      }
      puVar2 = (uint *)dest;
      puVar1 = (uint *)source;
                    // WARNING: Load size is inaccurate
      if ((bool)((byte)(uVar9 >> 2) & 1)) {
        puVar1 = (uint *)((int)source + 4);
        in_r3 = *source;
        puVar2 = (uint *)((int)dest + 4);
        *(uint *)dest = in_r3;
      }
      uVar6 = (undefined2)in_r3;
      if ((uVar9 & 3) != 0) {
        bVar13 = (bool)((byte)(uVar9 >> 1) & 1);
        uVar9 = count << 0x1f;
        bVar12 = (int)uVar9 < 0;
        puVar4 = puVar1;
        if (bVar13) {
          puVar4 = (uint *)((int)puVar1 + 2);
          uVar6 = *(undefined2 *)puVar1;
        }
        puVar1 = puVar4;
        if (bVar12) {
          puVar1 = (uint *)((int)puVar4 + 1);
          uVar9 = (uint)*(byte *)puVar4;
        }
        puVar4 = puVar2;
        if (bVar13) {
          puVar4 = (uint *)((int)puVar2 + 2);
          *(undefined2 *)puVar2 = uVar6;
        }
        puVar2 = puVar4;
        if (bVar12) {
          puVar2 = (uint *)((int)puVar4 + 1);
          *(byte *)puVar4 = (byte)uVar9;
        }
        return CONCAT44(puVar1,puVar2);
      }
      return CONCAT44(puVar1,puVar2);
    }
    bVar12 = 3 < (uint)count;
    count = count - 4;
    if (bVar12) {
      puVar2 = (uint *)((int)source - in_r3);
      in_r12 = *puVar2;
      puVar1 = (uint *)dest;
      if (in_r3 == 2) {
        do {
          puVar4 = puVar2;
          uVar9 = in_r12 >> 0x10;
          puVar2 = puVar4 + 1;
          in_r12 = *puVar2;
          bVar12 = 3 < (uint)count;
          count = count - 4;
          in_r3 = uVar9 | in_r12 << 0x10;
          dest = puVar1 + 1;
          *puVar1 = in_r3;
          puVar1 = (uint *)dest;
        } while (bVar12);
        source = (void *)((int)puVar4 + 6);
      }
      else {
        if (in_r3 < 3) {
          do {
            puVar4 = puVar2;
            uVar9 = in_r12 >> 8;
            puVar2 = puVar4 + 1;
            in_r12 = *puVar2;
            bVar12 = 3 < (uint)count;
            count = count - 4;
            in_r3 = uVar9 | in_r12 << 0x18;
            dest = puVar1 + 1;
            *puVar1 = in_r3;
            puVar1 = (uint *)dest;
          } while (bVar12);
          source = (void *)((int)puVar4 + 5);
        }
        else {
          do {
            puVar4 = puVar2;
            uVar9 = in_r12 >> 0x18;
            puVar2 = puVar4 + 1;
            in_r12 = *puVar2;
            bVar12 = 3 < (uint)count;
            count = count - 4;
            in_r3 = uVar9 | in_r12 << 8;
            dest = puVar1 + 1;
            *puVar1 = in_r3;
            puVar1 = (uint *)dest;
          } while (bVar12);
          source = (void *)((int)puVar4 + 7);
        }
      }
    }
  }
  bVar8 = (byte)in_r12;
  bVar5 = (byte)in_r3;
  bVar13 = (bool)((byte)((uint)count >> 1) & 1);
  uVar9 = count << 0x1f;
  bVar12 = (int)uVar9 < 0;
                    // WARNING: Load size is inaccurate
  if (bVar13) {
    pbVar3 = (byte *)((int)source + 1);
    bVar5 = *source;
    source = (void *)((int)source + 2);
    bVar8 = *pbVar3;
  }
  puVar1 = (uint *)source;
                    // WARNING: Load size is inaccurate
  if (bVar12) {
    puVar1 = (uint *)((int)source + 1);
    uVar9 = (uint)*source;
  }
  if (bVar13) {
    pbVar3 = (byte *)((int)dest + 1);
    *(byte *)dest = bVar5;
    dest = (void *)((int)dest + 2);
    *pbVar3 = bVar8;
  }
  puVar2 = (uint *)dest;
  if (bVar12) {
    puVar2 = (uint *)((int)dest + 1);
    *(byte *)dest = (byte)uVar9;
  }
  return CONCAT44(puVar1,puVar2);
}



undefined8 FUN_80000730(undefined4 *param_1,undefined4 *param_2,undefined4 *param_3)

{
  undefined4 *puVar1;
  int *piVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  undefined *puVar5;
  int *piVar6;
  uint *puVar7;
  uint *puVar8;
  uint uVar9;
  undefined uVar10;
  undefined2 uVar11;
  undefined4 *puVar12;
  int iVar13;
  undefined4 uVar14;
  int iVar15;
  undefined uVar16;
  uint in_r12;
  undefined4 uVar17;
  int iVar18;
  undefined4 uVar19;
  bool bVar20;
  bool bVar21;
  int *piVar22;
  
  puVar12 = (undefined4 *)((int)param_1 - (int)param_2);
  bVar20 = puVar12 == (undefined4 *)0x0;
  if (param_2 <= param_1) {
    bVar20 = param_3 == puVar12;
  }
  if ((param_2 <= param_1 && puVar12 <= param_3) && !bVar20) {
    piVar2 = (int *)((int)param_1 + (int)param_3);
    piVar6 = (int *)((int)param_2 + (int)param_3);
    if ((undefined4 *)0x3 < param_3) {
      bVar20 = ((uint)piVar2 & 3) == 0;
      do {
        if (!bVar20) {
          piVar6 = (int *)((int)piVar6 + -1);
          param_3 = (undefined4 *)((int)param_3 + -1);
          piVar2 = (int *)((int)piVar2 + -1);
          *(undefined *)piVar2 = *(undefined *)piVar6;
        }
        bVar20 = ((uint)piVar2 & 3) == 0;
      } while (!bVar20);
      puVar12 = (undefined4 *)((uint)piVar6 & 3);
      if (puVar12 == (undefined4 *)0x0) {
        while (puVar12 = param_3 + -4, (undefined4 *)0xf < param_3) {
          piVar22 = piVar6 + -1;
          iVar18 = piVar6[-2];
          iVar15 = piVar6[-3];
          piVar6 = piVar6 + -4;
          iVar13 = *piVar6;
          piVar2[-1] = *piVar22;
          piVar2[-2] = iVar18;
          piVar2[-3] = iVar15;
          piVar2 = piVar2 + -4;
          *piVar2 = iVar13;
          param_3 = puVar12;
        }
        iVar13 = (int)param_3 << 0x1d;
        bVar20 = iVar13 < 0;
        if ((bool)((byte)((uint)puVar12 >> 3) & 1)) {
          piVar22 = piVar6 + -1;
          piVar6 = piVar6 + -2;
          iVar13 = *piVar6;
          piVar2[-1] = *piVar22;
          piVar2 = piVar2 + -2;
          *piVar2 = iVar13;
        }
        if (bVar20) {
          piVar6 = piVar6 + -1;
          iVar13 = *piVar6;
          piVar2 = piVar2 + -1;
          *piVar2 = iVar13;
        }
        uVar11 = (undefined2)iVar13;
        if (((uint)puVar12 & 3) != 0) {
          bVar21 = (bool)((byte)((uint)puVar12 >> 1) & 1);
          uVar9 = (int)param_3 << 0x1f;
          bVar20 = (int)uVar9 < 0;
          if (bVar21) {
            piVar6 = (int *)((int)piVar6 + -2);
            uVar11 = *(undefined2 *)piVar6;
          }
          if (bVar20) {
            uVar9 = (uint)*(byte *)((int)piVar6 + -1);
          }
          if (bVar21) {
            piVar2 = (int *)((int)piVar2 + -2);
            *(undefined2 *)piVar2 = uVar11;
          }
          if (bVar20) {
            *(char *)((int)piVar2 + -1) = (char)uVar9;
          }
          return CONCAT44(piVar6,piVar2);
        }
        return CONCAT44(piVar6,piVar2);
      }
      bVar20 = (undefined4 *)0x3 < param_3;
      param_3 = param_3 + -1;
      if (bVar20) {
        puVar7 = (uint *)((int)piVar6 - (int)puVar12);
        in_r12 = *puVar7;
        if (puVar12 < (undefined4 *)0x2) {
          do {
            puVar8 = puVar7;
            uVar9 = in_r12 << 0x18;
            puVar7 = puVar8 + -1;
            in_r12 = *puVar7;
            bVar20 = (undefined4 *)0x3 < param_3;
            param_3 = param_3 + -1;
            puVar12 = (undefined4 *)(uVar9 | in_r12 >> 8);
            piVar2 = piVar2 + -1;
            *piVar2 = (int)puVar12;
          } while (bVar20);
          piVar6 = (int *)((int)puVar8 + -3);
        }
        else {
          if (puVar12 < (undefined4 *)0x3) {
            do {
              puVar8 = puVar7;
              uVar9 = in_r12 << 0x10;
              puVar7 = puVar8 + -1;
              in_r12 = *puVar7;
              bVar20 = (undefined4 *)0x3 < param_3;
              param_3 = param_3 + -1;
              puVar12 = (undefined4 *)(uVar9 | in_r12 >> 0x10);
              piVar2 = piVar2 + -1;
              *piVar2 = (int)puVar12;
            } while (bVar20);
            piVar6 = (int *)((int)puVar8 + -2);
          }
          else {
            do {
              puVar8 = puVar7;
              uVar9 = in_r12 << 8;
              puVar7 = puVar8 + -1;
              in_r12 = *puVar7;
              bVar20 = (undefined4 *)0x3 < param_3;
              param_3 = param_3 + -1;
              puVar12 = (undefined4 *)(uVar9 | in_r12 >> 0x18);
              piVar2 = piVar2 + -1;
              *piVar2 = (int)puVar12;
            } while (bVar20);
            piVar6 = (int *)((int)puVar8 + -1);
          }
        }
      }
    }
    uVar16 = (undefined)in_r12;
    uVar10 = SUB41(puVar12,0);
    bVar21 = (bool)((byte)((uint)param_3 >> 1) & 1);
    uVar9 = (int)param_3 << 0x1f;
    bVar20 = (int)uVar9 < 0;
    if (bVar21) {
      uVar10 = *(undefined *)((int)piVar6 + -1);
      piVar6 = (int *)((int)piVar6 + -2);
      uVar16 = *(undefined *)piVar6;
    }
    if (bVar20) {
      uVar9 = (uint)*(byte *)((int)piVar6 + -1);
    }
    if (bVar21) {
      *(undefined *)((int)piVar2 + -1) = uVar10;
      piVar2 = (int *)((int)piVar2 + -2);
      *(undefined *)piVar2 = uVar16;
    }
    if (bVar20) {
      *(char *)((int)piVar2 + -1) = (char)uVar9;
    }
    return CONCAT44(piVar6,piVar2);
  }
  if ((undefined4 *)0x3 < param_3) {
    uVar9 = (uint)param_1 & 3;
    in_r12 = uVar9;
    if (uVar9 != 0) {
      uVar10 = *(undefined *)param_2;
      puVar12 = (undefined4 *)((int)param_2 + 1);
      if (uVar9 < 3) {
        puVar12 = (undefined4 *)((int)param_2 + 2);
        in_r12 = (uint)*(byte *)(undefined4 *)((int)param_2 + 1);
      }
      *(undefined *)param_1 = uVar10;
      param_2 = puVar12;
      if (uVar9 < 2) {
        param_2 = (undefined4 *)((int)puVar12 + 1);
        uVar10 = *(undefined *)puVar12;
      }
      puVar12 = (undefined4 *)((int)param_1 + 1);
      if (uVar9 < 3) {
        puVar12 = (undefined4 *)((int)param_1 + 2);
        *(char *)(undefined4 *)((int)param_1 + 1) = (char)in_r12;
      }
      param_3 = (undefined4 *)((int)param_3 + (uVar9 - 4));
      param_1 = puVar12;
      if (uVar9 < 2) {
        param_1 = (undefined4 *)((int)puVar12 + 1);
        *(undefined *)puVar12 = uVar10;
      }
    }
    puVar12 = (undefined4 *)((uint)param_2 & 3);
    if (puVar12 == (undefined4 *)0x0) {
      while (puVar1 = param_3 + -8, (undefined4 *)0x1f < param_3) {
        uVar14 = param_2[1];
        uVar17 = param_2[2];
        uVar19 = param_2[3];
        *param_1 = *param_2;
        param_1[1] = uVar14;
        param_1[2] = uVar17;
        param_1[3] = uVar19;
        puVar12 = (undefined4 *)param_2[4];
        uVar14 = param_2[5];
        uVar17 = param_2[6];
        uVar19 = param_2[7];
        param_2 = param_2 + 8;
        param_1[4] = puVar12;
        param_1[5] = uVar14;
        param_1[6] = uVar17;
        param_1[7] = uVar19;
        param_1 = param_1 + 8;
        param_3 = puVar1;
      }
      if ((bool)((byte)((uint)puVar1 >> 4) & 1)) {
        puVar12 = (undefined4 *)*param_2;
        uVar14 = param_2[1];
        uVar17 = param_2[2];
        uVar19 = param_2[3];
        param_2 = param_2 + 4;
        *param_1 = puVar12;
        param_1[1] = uVar14;
        param_1[2] = uVar17;
        param_1[3] = uVar19;
        param_1 = param_1 + 4;
      }
      if ((int)param_3 << 0x1c < 0) {
        puVar12 = (undefined4 *)*param_2;
        uVar14 = param_2[1];
        param_2 = param_2 + 2;
        *param_1 = puVar12;
        param_1[1] = uVar14;
        param_1 = param_1 + 2;
      }
      puVar3 = param_1;
      puVar4 = param_2;
      if ((bool)((byte)((uint)puVar1 >> 2) & 1)) {
        puVar4 = param_2 + 1;
        puVar12 = (undefined4 *)*param_2;
        puVar3 = param_1 + 1;
        *param_1 = puVar12;
      }
      uVar11 = SUB42(puVar12,0);
      if (((uint)puVar1 & 3) != 0) {
        bVar21 = (bool)((byte)((uint)puVar1 >> 1) & 1);
        uVar9 = (int)param_3 << 0x1f;
        bVar20 = (int)uVar9 < 0;
        puVar12 = puVar4;
        if (bVar21) {
          puVar12 = (undefined4 *)((int)puVar4 + 2);
          uVar11 = *(undefined2 *)puVar4;
        }
        puVar1 = puVar12;
        if (bVar20) {
          puVar1 = (undefined4 *)((int)puVar12 + 1);
          uVar9 = (uint)*(byte *)puVar12;
        }
        puVar12 = puVar3;
        if (bVar21) {
          puVar12 = (undefined4 *)((int)puVar3 + 2);
          *(undefined2 *)puVar3 = uVar11;
        }
        puVar4 = puVar12;
        if (bVar20) {
          puVar4 = (undefined4 *)((int)puVar12 + 1);
          *(char *)puVar12 = (char)uVar9;
        }
        return CONCAT44(puVar1,puVar4);
      }
      return CONCAT44(puVar4,puVar3);
    }
    bVar20 = (undefined4 *)0x3 < param_3;
    param_3 = param_3 + -1;
    if (bVar20) {
      puVar7 = (uint *)((int)param_2 - (int)puVar12);
      in_r12 = *puVar7;
      puVar1 = param_1;
      if (puVar12 == (undefined4 *)0x2) {
        do {
          puVar8 = puVar7;
          uVar9 = in_r12 >> 0x10;
          puVar7 = puVar8 + 1;
          in_r12 = *puVar7;
          bVar20 = (undefined4 *)0x3 < param_3;
          param_3 = param_3 + -1;
          puVar12 = (undefined4 *)(uVar9 | in_r12 << 0x10);
          param_1 = puVar1 + 1;
          *puVar1 = puVar12;
          puVar1 = param_1;
        } while (bVar20);
        param_2 = (undefined4 *)((int)puVar8 + 6);
      }
      else {
        if (puVar12 < (undefined4 *)0x3) {
          do {
            puVar8 = puVar7;
            uVar9 = in_r12 >> 8;
            puVar7 = puVar8 + 1;
            in_r12 = *puVar7;
            bVar20 = (undefined4 *)0x3 < param_3;
            param_3 = param_3 + -1;
            puVar12 = (undefined4 *)(uVar9 | in_r12 << 0x18);
            param_1 = puVar1 + 1;
            *puVar1 = puVar12;
            puVar1 = param_1;
          } while (bVar20);
          param_2 = (undefined4 *)((int)puVar8 + 5);
        }
        else {
          do {
            puVar8 = puVar7;
            uVar9 = in_r12 >> 0x18;
            puVar7 = puVar8 + 1;
            in_r12 = *puVar7;
            bVar20 = (undefined4 *)0x3 < param_3;
            param_3 = param_3 + -1;
            puVar12 = (undefined4 *)(uVar9 | in_r12 << 8);
            param_1 = puVar1 + 1;
            *puVar1 = puVar12;
            puVar1 = param_1;
          } while (bVar20);
          param_2 = (undefined4 *)((int)puVar8 + 7);
        }
      }
    }
  }
  uVar16 = (undefined)in_r12;
  uVar10 = SUB41(puVar12,0);
  bVar21 = (bool)((byte)((uint)param_3 >> 1) & 1);
  uVar9 = (int)param_3 << 0x1f;
  bVar20 = (int)uVar9 < 0;
  if (bVar21) {
    puVar5 = (undefined *)((int)param_2 + 1);
    uVar10 = *(undefined *)param_2;
    param_2 = (undefined4 *)((int)param_2 + 2);
    uVar16 = *puVar5;
  }
  puVar12 = param_2;
  if (bVar20) {
    puVar12 = (undefined4 *)((int)param_2 + 1);
    uVar9 = (uint)*(byte *)param_2;
  }
  if (bVar21) {
    puVar5 = (undefined *)((int)param_1 + 1);
    *(undefined *)param_1 = uVar10;
    param_1 = (undefined4 *)((int)param_1 + 2);
    *puVar5 = uVar16;
  }
  puVar1 = param_1;
  if (bVar20) {
    puVar1 = (undefined4 *)((int)param_1 + 1);
    *(char *)param_1 = (char)uVar9;
  }
  return CONCAT44(puVar12,puVar1);
}



undefined8 FUN_80000804(undefined4 *param_1,undefined4 *param_2,uint param_3,undefined4 param_4)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  uint uVar4;
  undefined2 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  bool bVar9;
  bool bVar10;
  
  uVar4 = param_3 - 0x20;
  if (0x1f < param_3) {
    do {
      uVar6 = param_2[1];
      uVar7 = param_2[2];
      uVar8 = param_2[3];
      bVar9 = 0x1f < uVar4;
      uVar4 = uVar4 - 0x20;
      *param_1 = *param_2;
      param_1[1] = uVar6;
      param_1[2] = uVar7;
      param_1[3] = uVar8;
      param_4 = param_2[4];
      uVar6 = param_2[5];
      uVar7 = param_2[6];
      uVar8 = param_2[7];
      param_2 = param_2 + 8;
      param_1[4] = param_4;
      param_1[5] = uVar6;
      param_1[6] = uVar7;
      param_1[7] = uVar8;
      param_1 = param_1 + 8;
    } while (bVar9);
  }
  if ((bool)((byte)(uVar4 >> 4) & 1)) {
    param_4 = *param_2;
    uVar6 = param_2[1];
    uVar7 = param_2[2];
    uVar8 = param_2[3];
    param_2 = param_2 + 4;
    *param_1 = param_4;
    param_1[1] = uVar6;
    param_1[2] = uVar7;
    param_1[3] = uVar8;
    param_1 = param_1 + 4;
  }
  if ((int)(uVar4 << 0x1c) < 0) {
    param_4 = *param_2;
    uVar6 = param_2[1];
    param_2 = param_2 + 2;
    *param_1 = param_4;
    param_1[1] = uVar6;
    param_1 = param_1 + 2;
  }
  puVar1 = param_1;
  puVar3 = param_2;
  if ((bool)((byte)(uVar4 >> 2) & 1)) {
    puVar3 = param_2 + 1;
    param_4 = *param_2;
    puVar1 = param_1 + 1;
    *param_1 = param_4;
  }
  uVar5 = (undefined2)param_4;
  if ((uVar4 & 3) != 0) {
    bVar10 = (bool)((byte)(uVar4 >> 1) & 1);
    uVar4 = uVar4 << 0x1f;
    bVar9 = (int)uVar4 < 0;
    puVar2 = puVar3;
    if (bVar10) {
      puVar2 = (undefined4 *)((int)puVar3 + 2);
      uVar5 = *(undefined2 *)puVar3;
    }
    puVar3 = puVar2;
    if (bVar9) {
      puVar3 = (undefined4 *)((int)puVar2 + 1);
      uVar4 = (uint)*(byte *)puVar2;
    }
    puVar2 = puVar1;
    if (bVar10) {
      puVar2 = (undefined4 *)((int)puVar1 + 2);
      *(undefined2 *)puVar1 = uVar5;
    }
    puVar1 = puVar2;
    if (bVar9) {
      puVar1 = (undefined4 *)((int)puVar2 + 1);
      *(char *)puVar2 = (char)uVar4;
    }
    return CONCAT44(puVar3,puVar1);
  }
  return CONCAT44(puVar3,puVar1);
}



uint * FUN_80000868(uint *param_1,uint param_2,uint param_3)

{
  uint uVar1;
  undefined uVar2;
  uint *puVar3;
  undefined *puVar4;
  uint *puVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  bool bVar9;
  
  param_3 = param_3 & 0xff;
  uVar6 = param_3 | param_3 << 8;
  uVar7 = uVar6 | uVar6 << 0x10;
  uVar2 = (undefined)param_3;
  if (param_2 < 4) {
    if ((bool)((byte)(param_2 >> 1) & 1)) {
      puVar4 = (undefined *)((int)param_1 + 1);
      *(undefined *)param_1 = uVar2;
      param_1 = (uint *)((int)param_1 + 2);
      *puVar4 = uVar2;
    }
    puVar3 = param_1;
    if ((int)(param_2 << 0x1f) < 0) {
      puVar3 = (uint *)((int)param_1 + 1);
      *(undefined *)param_1 = uVar2;
    }
    return puVar3;
  }
  if (((uint)param_1 & 3) != 0) {
    iVar8 = 4 - ((uint)param_1 & 3);
    puVar3 = param_1;
    if (iVar8 != 2) {
      puVar3 = (uint *)((int)param_1 + 1);
      *(undefined *)param_1 = uVar2;
    }
    param_2 = param_2 - iVar8;
    param_1 = puVar3;
    if (1 < iVar8) {
      param_1 = (uint *)((int)puVar3 + 2);
      *(short *)puVar3 = (short)uVar6;
    }
  }
  bVar9 = 0x1f < param_2;
  param_2 = param_2 - 0x20;
  do {
    if (bVar9) {
      *param_1 = uVar7;
      param_1[1] = uVar7;
      param_1[2] = uVar7;
      param_1[3] = uVar7;
      param_1[4] = uVar7;
      param_1[5] = uVar7;
      param_1[6] = uVar7;
      param_1[7] = uVar7;
      param_1 = param_1 + 8;
      bVar9 = 0x1f < param_2;
      param_2 = param_2 - 0x20;
    }
  } while (bVar9);
  if ((bool)((byte)(param_2 >> 4) & 1)) {
    *param_1 = uVar7;
    param_1[1] = uVar7;
    param_1[2] = uVar7;
    param_1[3] = uVar7;
    param_1 = param_1 + 4;
  }
  if ((int)(param_2 << 0x1c) < 0) {
    *param_1 = uVar7;
    param_1[1] = uVar7;
    param_1 = param_1 + 2;
  }
  uVar1 = param_2 << 0x1e;
  puVar3 = param_1;
  if ((bool)((byte)((param_2 << 0x1c) >> 0x1e) & 1)) {
    puVar3 = param_1 + 1;
    *param_1 = uVar7;
  }
  if (uVar1 == 0) {
    return puVar3;
  }
  puVar5 = puVar3;
  if ((int)uVar1 < 0) {
    puVar5 = (uint *)((int)puVar3 + 2);
    *(short *)puVar3 = (short)uVar6;
  }
  puVar3 = puVar5;
  if ((uVar1 & 0x40000000) != 0) {
    puVar3 = (uint *)((int)puVar5 + 1);
    *(undefined *)puVar5 = uVar2;
  }
  return puVar3;
}



void memclear(uint address,uint count)

{
  uint uVar1;
  undefined4 *puVar2;
  undefined *puVar3;
  undefined4 *puVar4;
  uint uVar5;
  int iVar6;
  bool bVar7;
  
  if (count < 4) {
    if ((bool)((byte)(count >> 1) & 1)) {
      puVar3 = (undefined *)(address + 1);
      *(undefined *)address = 0;
      address = address + 2;
      *puVar3 = 0;
    }
    if ((int)(count << 0x1f) < 0) {
      *(undefined *)address = 0;
    }
    return;
  }
  if ((address & 3) != 0) {
    iVar6 = 4 - (address & 3);
    puVar2 = (undefined4 *)address;
    if (iVar6 != 2) {
      puVar2 = (undefined4 *)(address + 1);
      *(undefined *)address = 0;
    }
    count = count - iVar6;
    address = (uint)puVar2;
    if (1 < iVar6) {
      address = (int)puVar2 + 2;
      *(undefined2 *)puVar2 = 0;
    }
  }
  bVar7 = 0x1f < count;
  uVar5 = count - 0x20;
  do {
    if (bVar7) {
      *(undefined4 *)address = 0;
      *(undefined4 *)(address + 4) = 0;
      *(undefined4 *)(address + 8) = 0;
      *(undefined4 *)(address + 0xc) = 0;
      *(undefined4 *)(address + 0x10) = 0;
      *(undefined4 *)(address + 0x14) = 0;
      *(undefined4 *)(address + 0x18) = 0;
      *(undefined4 *)(address + 0x1c) = 0;
      address = address + 0x20;
      bVar7 = 0x1f < uVar5;
      uVar5 = uVar5 - 0x20;
    }
  } while (bVar7);
  if ((bool)((byte)(uVar5 >> 4) & 1)) {
    *(undefined4 *)address = 0;
    *(undefined4 *)(address + 4) = 0;
    *(undefined4 *)(address + 8) = 0;
    *(undefined4 *)(address + 0xc) = 0;
    address = address + 0x10;
  }
  if ((int)(uVar5 << 0x1c) < 0) {
    *(undefined4 *)address = 0;
    *(undefined4 *)(address + 4) = 0;
    address = address + 8;
  }
  uVar1 = uVar5 << 0x1e;
  puVar2 = (undefined4 *)address;
  if ((bool)((byte)((uVar5 << 0x1c) >> 0x1e) & 1)) {
    puVar2 = (undefined4 *)(address + 4);
    *(undefined4 *)address = 0;
  }
  if (uVar1 == 0) {
    return;
  }
  puVar4 = puVar2;
  if ((int)uVar1 < 0) {
    puVar4 = (undefined4 *)((int)puVar2 + 2);
    *(undefined2 *)puVar2 = 0;
  }
  if ((uVar1 & 0x40000000) != 0) {
    *(undefined *)puVar4 = 0;
  }
  return;
}



int divide_2(int devidend,int divisor)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  bool bVar5;
  bool bVar6;
  bool bVar7;
  bool bVar8;
  
  if (-1 < (devidend | divisor)) {
    if ((uint)devidend >> 1 < (uint)divisor) {
      if ((uint)devidend < (uint)divisor) {
        return 0;
      }
      return 1;
    }
    iVar2 = 0;
    uVar4 = divisor;
    if ((uint)divisor <= (uint)devidend >> 4) {
      if ((uint)divisor <= (uint)devidend >> 8) {
        if ((uint)devidend >> 0xc < (uint)divisor) goto LAB_80000998;
        if ((uint)devidend >> 0x10 < (uint)divisor) goto LAB_80000968;
        uVar4 = divisor << 8;
        iVar2 = -0x1000000;
        if (uVar4 <= (uint)devidend >> 0x10) {
          iVar2 = -0x10000;
          uVar4 = divisor << 0x10;
        }
        if ((uint)devidend >> 0xc < uVar4) goto LAB_80000998;
        bVar5 = uVar4 == 0;
        if (bVar5) {
          return 0;
        }
        do {
          if (bVar5) {
            uVar4 = uVar4 >> 8;
          }
LAB_80000968:
          bVar5 = uVar4 <= (uint)devidend >> 0xf;
          if (bVar5) {
            devidend = devidend + uVar4 * -0x8000;
          }
          bVar6 = uVar4 <= (uint)devidend >> 0xe;
          if (bVar6) {
            devidend = devidend + uVar4 * -0x4000;
          }
          bVar7 = uVar4 <= (uint)devidend >> 0xd;
          if (bVar7) {
            devidend = devidend + uVar4 * -0x2000;
          }
          bVar8 = uVar4 <= (uint)devidend >> 0xc;
          if (bVar8) {
            devidend = devidend + uVar4 * -0x1000;
          }
          iVar2 = (((iVar2 * 2 + (uint)bVar5) * 2 + (uint)bVar6) * 2 + (uint)bVar7) * 2 +
                  (uint)bVar8;
LAB_80000998:
          bVar5 = uVar4 <= (uint)devidend >> 0xb;
          if (bVar5) {
            devidend = devidend + uVar4 * -0x800;
          }
          bVar6 = uVar4 <= (uint)devidend >> 10;
          if (bVar6) {
            devidend = devidend + uVar4 * -0x400;
          }
          bVar7 = uVar4 <= (uint)devidend >> 9;
          if (bVar7) {
            devidend = devidend + uVar4 * -0x200;
          }
          uVar3 = ((iVar2 * 2 + (uint)bVar5) * 2 + (uint)bVar6) * 2 + (uint)bVar7;
          bVar6 = uVar4 <= (uint)devidend >> 8;
          if (bVar6) {
            devidend = devidend + uVar4 * -0x100;
          }
          bVar5 = !bVar6 && CARRY4(uVar3,uVar3) || bVar6 && uVar3 * 2 + 1 <= uVar3;
          iVar2 = uVar3 * 2 + (uint)bVar6;
        } while (bVar5);
      }
      bVar5 = uVar4 <= (uint)devidend >> 7;
      if (bVar5) {
        devidend = devidend + uVar4 * -0x80;
      }
      bVar6 = uVar4 <= (uint)devidend >> 6;
      if (bVar6) {
        devidend = devidend + uVar4 * -0x40;
      }
      bVar7 = uVar4 <= (uint)devidend >> 5;
      if (bVar7) {
        devidend = devidend + uVar4 * -0x20;
      }
      bVar8 = uVar4 <= (uint)devidend >> 4;
      if (bVar8) {
        devidend = devidend + uVar4 * -0x10;
      }
      iVar2 = (((iVar2 * 2 + (uint)bVar5) * 2 + (uint)bVar6) * 2 + (uint)bVar7) * 2 + (uint)bVar8;
    }
    bVar5 = uVar4 <= (uint)devidend >> 3;
    if (bVar5) {
      devidend = devidend + uVar4 * -8;
    }
    bVar6 = uVar4 <= (uint)devidend >> 2;
    if (bVar6) {
      devidend = devidend + uVar4 * -4;
    }
    bVar7 = uVar4 <= (uint)devidend >> 1;
    if (bVar7) {
      devidend = devidend + uVar4 * -2;
    }
    return (((iVar2 * 2 + (uint)bVar5) * 2 + (uint)bVar6) * 2 + (uint)bVar7) * 2 +
           (uint)(uVar4 <= (uint)devidend);
  }
  uVar4 = divisor & 0x80000000;
  if ((int)uVar4 < 0) {
    divisor = -divisor;
  }
  uVar3 = uVar4 ^ devidend >> 0x20;
  if (SUB41((uint)devidend >> 0x1f,0)) {
    devidend = -devidend;
  }
  uVar1 = divisor;
  if ((uint)devidend >> 4 < (uint)divisor) goto LAB_80000ad8;
  if ((uint)devidend >> 8 < (uint)divisor) goto LAB_80000aa8;
  uVar1 = divisor << 6;
  uVar4 = 0xfc000000;
  if ((uint)devidend >> 8 < uVar1) goto LAB_80000aa8;
  uVar1 = divisor << 0xc;
  uVar4 = 0xfff00000;
  if ((uint)devidend >> 8 < uVar1) goto LAB_80000aa8;
  uVar1 = divisor << 0x12;
  uVar4 = 0xffffc000;
  if (uVar1 <= (uint)devidend >> 8) {
    uVar1 = divisor << 0x18;
    uVar4 = 0xffffff00;
  }
  bVar5 = uVar1 == 0;
  if (bVar5) {
    return 0;
  }
  do {
    if (bVar5) {
      uVar1 = uVar1 >> 6;
    }
LAB_80000aa8:
    bVar5 = uVar1 <= (uint)devidend >> 7;
    if (bVar5) {
      devidend = devidend + uVar1 * -0x80;
    }
    bVar6 = uVar1 <= (uint)devidend >> 6;
    if (bVar6) {
      devidend = devidend + uVar1 * -0x40;
    }
    bVar7 = uVar1 <= (uint)devidend >> 5;
    if (bVar7) {
      devidend = devidend + uVar1 * -0x20;
    }
    bVar8 = uVar1 <= (uint)devidend >> 4;
    if (bVar8) {
      devidend = devidend + uVar1 * -0x10;
    }
    uVar4 = (((uVar4 * 2 + (uint)bVar5) * 2 + (uint)bVar6) * 2 + (uint)bVar7) * 2 + (uint)bVar8;
LAB_80000ad8:
    bVar5 = uVar1 <= (uint)devidend >> 3;
    if (bVar5) {
      devidend = devidend + uVar1 * -8;
    }
    uVar4 = uVar4 * 2 + (uint)bVar5;
    bVar6 = uVar1 <= (uint)devidend >> 2;
    if (bVar6) {
      devidend = devidend + uVar1 * -4;
    }
    bVar5 = !bVar6 && CARRY4(uVar4,uVar4) || bVar6 && uVar4 * 2 + 1 <= uVar4;
    uVar4 = uVar4 * 2 + (uint)bVar6;
  } while (bVar5);
  bVar5 = uVar1 <= (uint)devidend >> 1;
  if (bVar5) {
    devidend = devidend + uVar1 * -2;
  }
  iVar2 = (uVar4 * 2 + (uint)bVar5) * 2 + (uint)(uVar1 <= (uint)devidend);
  if ((int)uVar3 >> 0x1f < 0) {
    iVar2 = -iVar2;
  }
  return iVar2;
}



undefined4 FUN_80000b34(void)

{
  return DAT_80000b3c;
}



int FUN_80000b48(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  undefined4 local_10;
  
  local_10 = param_4;
  iVar1 = FUN_80000cec(0,&local_10,param_2);
  if (iVar1 != 0) {
    FUN_80000c94(param_1,local_10,iVar1);
    iVar1 = 1;
  }
  return iVar1;
}



void FUN_80000b68(void)

{
  FUN_80000cc8(1);
  return;
}



void do_data_prep_1(void)

{
  int iVar1;
  int *piVar2;
  uint uVar3;
  uint in_r3;
  uint uVar4;
  int iVar5;
  int iVar6;
  undefined8 uVar7;
  uint local_18;
  
  local_18 = in_r3;
  uVar7 = FUN_80000cd4();
  uVar3 = (uint)((ulonglong)uVar7 >> 0x20);
  if (uVar3 < (uint)uVar7 + 0x10) {
    iVar1 = FUN_80000cec(0,&local_18,0x10);
    if (iVar1 == 0) {
      FUN_80000cc8();
    }
    uVar4 = (uint)uVar7;
    if (local_18 != uVar3) {
      uVar4 = local_18;
    }
    uVar7 = CONCAT44(local_18 + iVar1,uVar4);
  }
  iVar1 = (int)((ulonglong)uVar7 >> 0x20);
  iVar5 = (int)uVar7;
  piVar2 = (int *)FUN_80000b34();
  *piVar2 = iVar5;
  iVar6 = iVar5 + 0x10;
  FUN_80000bcc(iVar5);
  if (iVar1 != iVar6) {
    FUN_80000c94(*piVar2,iVar6,iVar1 - iVar6);
  }
  return;
}



void FUN_80000bcc(undefined4 *param_1)

{
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = param_1;
  return;
}



void thunk_FUN_80000bee(undefined4 param_1)

{
  undefined4 *puVar1;
  
  puVar1 = (undefined4 *)FUN_80000c88();
  *puVar1 = param_1;
  return;
}



void FUN_80000bee(undefined4 param_1)

{
  undefined4 *puVar1;
  
  puVar1 = (undefined4 *)FUN_80000c88();
  *puVar1 = param_1;
  return;
}



void copy_byte(uchar *dest,uchar *source,int count)

{
  memcpy(dest,source,count);
  return;
}



undefined8 FUN_80000c08(byte **param_1,byte **param_2,byte **param_3)

{
  byte **ppbVar1;
  byte **ppbVar2;
  int *piVar3;
  byte **ppbVar4;
  int *piVar5;
  uint uVar6;
  undefined2 uVar7;
  byte **ppbVar8;
  int iVar9;
  byte *pbVar10;
  int iVar11;
  byte *pbVar12;
  int iVar13;
  byte *pbVar14;
  bool bVar15;
  bool bVar16;
  int *piVar17;
  
  ppbVar8 = (byte **)((int)param_1 - (int)param_2);
  bVar15 = ppbVar8 == (byte **)0x0;
  if (param_2 <= param_1) {
    bVar15 = param_3 == ppbVar8;
  }
  if ((param_2 > param_1 || param_3 < ppbVar8) || bVar15) {
    ppbVar4 = param_3 + -8;
    if ((byte **)0x1f < param_3) {
      do {
        pbVar10 = param_2[1];
        pbVar12 = param_2[2];
        pbVar14 = param_2[3];
        bVar15 = (byte **)0x1f < ppbVar4;
        ppbVar4 = ppbVar4 + -8;
        *param_1 = *param_2;
        param_1[1] = pbVar10;
        param_1[2] = pbVar12;
        param_1[3] = pbVar14;
        ppbVar8 = (byte **)param_2[4];
        pbVar10 = param_2[5];
        pbVar12 = param_2[6];
        pbVar14 = param_2[7];
        param_2 = param_2 + 8;
        param_1[4] = (byte *)ppbVar8;
        param_1[5] = pbVar10;
        param_1[6] = pbVar12;
        param_1[7] = pbVar14;
        param_1 = param_1 + 8;
      } while (bVar15);
    }
    if ((bool)((byte)((uint)ppbVar4 >> 4) & 1)) {
      ppbVar8 = (byte **)*param_2;
      pbVar10 = param_2[1];
      pbVar12 = param_2[2];
      pbVar14 = param_2[3];
      param_2 = param_2 + 4;
      *param_1 = (byte *)ppbVar8;
      param_1[1] = pbVar10;
      param_1[2] = pbVar12;
      param_1[3] = pbVar14;
      param_1 = param_1 + 4;
    }
    if ((int)ppbVar4 << 0x1c < 0) {
      ppbVar8 = (byte **)*param_2;
      pbVar10 = param_2[1];
      param_2 = param_2 + 2;
      *param_1 = (byte *)ppbVar8;
      param_1[1] = pbVar10;
      param_1 = param_1 + 2;
    }
    ppbVar1 = param_1;
    ppbVar2 = param_2;
    if ((bool)((byte)((uint)ppbVar4 >> 2) & 1)) {
      ppbVar2 = param_2 + 1;
      ppbVar8 = (byte **)*param_2;
      ppbVar1 = param_1 + 1;
      *param_1 = (byte *)ppbVar8;
    }
    uVar7 = SUB42(ppbVar8,0);
    if (((uint)ppbVar4 & 3) == 0) {
      return CONCAT44(ppbVar2,ppbVar1);
    }
    bVar16 = (bool)((byte)((uint)ppbVar4 >> 1) & 1);
    uVar6 = (int)ppbVar4 << 0x1f;
    bVar15 = (int)uVar6 < 0;
    ppbVar8 = ppbVar2;
    if (bVar16) {
      ppbVar8 = (byte **)((int)ppbVar2 + 2);
      uVar7 = *(undefined2 *)ppbVar2;
    }
    ppbVar4 = ppbVar8;
    if (bVar15) {
      ppbVar4 = (byte **)((int)ppbVar8 + 1);
      uVar6 = (uint)*(byte *)ppbVar8;
    }
    ppbVar8 = ppbVar1;
    if (bVar16) {
      ppbVar8 = (byte **)((int)ppbVar1 + 2);
      *(undefined2 *)ppbVar1 = uVar7;
    }
    ppbVar2 = ppbVar8;
    if (bVar15) {
      ppbVar2 = (byte **)((int)ppbVar8 + 1);
      *(char *)ppbVar8 = (char)uVar6;
    }
    return CONCAT44(ppbVar4,ppbVar2);
  }
  piVar3 = (int *)((int)param_1 + (int)param_3);
  bVar15 = ((uint)piVar3 & 3) == 0;
  piVar5 = (int *)((int)param_2 + (int)param_3);
  do {
    if (!bVar15) {
      param_3 = (byte **)((int)param_3 + -1);
      piVar5 = (int *)((int)piVar5 + -1);
      piVar3 = (int *)((int)piVar3 + -1);
      *(undefined *)piVar3 = *(undefined *)piVar5;
    }
    bVar15 = ((uint)piVar3 & 3) == 0;
  } while (!bVar15);
  while (ppbVar8 = param_3 + -4, (byte **)0xf < param_3) {
    piVar17 = piVar5 + -1;
    iVar13 = piVar5[-2];
    iVar11 = piVar5[-3];
    piVar5 = piVar5 + -4;
    iVar9 = *piVar5;
    piVar3[-1] = *piVar17;
    piVar3[-2] = iVar13;
    piVar3[-3] = iVar11;
    piVar3 = piVar3 + -4;
    *piVar3 = iVar9;
    param_3 = ppbVar8;
  }
  iVar9 = (int)param_3 << 0x1d;
  bVar15 = iVar9 < 0;
  if ((bool)((byte)((uint)ppbVar8 >> 3) & 1)) {
    piVar17 = piVar5 + -1;
    piVar5 = piVar5 + -2;
    iVar9 = *piVar5;
    piVar3[-1] = *piVar17;
    piVar3 = piVar3 + -2;
    *piVar3 = iVar9;
  }
  if (bVar15) {
    piVar5 = piVar5 + -1;
    iVar9 = *piVar5;
    piVar3 = piVar3 + -1;
    *piVar3 = iVar9;
  }
  uVar7 = (undefined2)iVar9;
  if (((uint)ppbVar8 & 3) == 0) {
    return CONCAT44(piVar5,piVar3);
  }
  bVar16 = (bool)((byte)((uint)ppbVar8 >> 1) & 1);
  uVar6 = (int)param_3 << 0x1f;
  bVar15 = (int)uVar6 < 0;
  if (bVar16) {
    piVar5 = (int *)((int)piVar5 + -2);
    uVar7 = *(undefined2 *)piVar5;
  }
  if (bVar15) {
    uVar6 = (uint)*(byte *)((int)piVar5 + -1);
  }
  if (bVar16) {
    piVar3 = (int *)((int)piVar3 + -2);
    *(undefined2 *)piVar3 = uVar7;
  }
  if (bVar15) {
    *(char *)((int)piVar3 + -1) = (char)uVar6;
  }
  return CONCAT44(piVar5,piVar3);
}



undefined4 FUN_80000c88(void)

{
  return DAT_80000c90;
}



void FUN_80000c94(int *param_1,int *param_2,int param_3)

{
  int *piVar1;
  int *piVar2;
  
  piVar2 = (int *)param_1[1];
  while ((piVar1 = piVar2, piVar1 != (int *)0x0 && (piVar1 < param_2))) {
    piVar2 = (int *)piVar1[1];
    param_1 = piVar1;
  }
  piVar2 = param_2;
  if ((int *)(*param_1 + (int)param_1) != param_2) {
    piVar2 = (int *)(((int)param_2 + 3U & 0xfffffff8) + 4);
    param_3 = param_3 - (int)((int)piVar2 - (int)param_2);
  }
  *piVar2 = param_3;
  FUN_8000022e(piVar2 + 1);
  return;
}



void FUN_80000cc8(void)

{
  FUN_80000d40();
  FUN_80000d34();
  return;
}



void FUN_80000cd4(int param_1)

{
  uint *puVar1;
  
  puVar1 = DAT_80000d20;
  *DAT_80000d20 = (uint)(undefined *)(param_1 + 0x1000U);
  if ((undefined *)(param_1 + 0x1000U) <= register0x00000054) {
    return;
  }
  *puVar1 = (uint)register0x00000054;
  return;
}



int FUN_80000cec(int param_1,uint *param_2,int param_3)

{
  uint *puVar1;
  undefined *puVar2;
  undefined *puVar3;
  uint uVar4;
  undefined auStack4112 [4096];
  
  puVar1 = DAT_80000d20;
  uVar4 = *DAT_80000d20;
  puVar3 = (undefined *)(uVar4 + param_3);
  if (puVar3 <= auStack4112) {
    puVar2 = puVar3 + 0x1000;
    if (puVar3 + (int)(auStack4112 + -(int)puVar3) / 2 < puVar3 + 0x1000) {
      puVar2 = puVar3 + (int)(auStack4112 + -(int)puVar3) / 2;
    }
    *param_2 = uVar4;
    param_1 = ((uint)(puVar2 + 7) & 0xfffffff8) - uVar4;
    *puVar1 = (uint)(puVar2 + 7) & 0xfffffff8;
  }
  return param_1;
}



void FUN_80000d24(undefined4 param_1)

{
  FUN_800001bc(param_1);
  return;
}



void FUN_80000d34(int param_1)

{
  if (param_1 != 0) {
    endless_loop();
  }
  return;
}



undefined4 FUN_80000d40(int param_1)

{
  char *pcVar1;
  
  if (param_1 == 1) {
    pcVar1 = s___Heap_memory_corrupted_80000d78;
  }
  else {
    pcVar1 = (char *)0x0;
  }
  FUN_80000d90(s_SIGRTMEM__Out_of_heap_memory_80000d58,pcVar1);
  return 1;
}



void FUN_80000d90(char *param_1,char *param_2)

{
  while ((just_return(), param_1 != (char *)0x0 && (*param_1 != '\0'))) {
    param_1 = param_1 + 1;
  }
  while ((param_2 != (char *)0x0 && (*param_2 != '\0'))) {
    param_2 = param_2 + 1;
    just_return();
  }
  just_return();
  return;
}



//                      Function
// returns
// quotient:  r0
// remainder: r1

int divide(int dividend,int divisor)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  bool bVar4;
  bool bVar5;
  bool bVar6;
  bool bVar7;
  
  iVar3 = 0;
  uVar1 = divisor;
  if ((uint)divisor <= (uint)dividend >> 2) {
    if ((uint)divisor <= (uint)dividend >> 5) {
      if ((uint)divisor <= (uint)dividend >> 8) {
        if ((uint)dividend >> 0xc < (uint)divisor) goto LAB_80000998;
        if ((uint)dividend >> 0x10 < (uint)divisor) goto LAB_80000968;
        uVar1 = divisor << 8;
        iVar3 = -0x1000000;
        if (uVar1 <= (uint)dividend >> 0x10) {
          iVar3 = -0x10000;
          uVar1 = divisor << 0x10;
        }
        if ((uint)dividend >> 0xc < uVar1) goto LAB_80000998;
        bVar4 = uVar1 == 0;
        if (bVar4) {
          return 0;
        }
        do {
          if (bVar4) {
            uVar1 = uVar1 >> 8;
          }
LAB_80000968:
          bVar4 = uVar1 <= (uint)dividend >> 0xf;
          if (bVar4) {
            dividend = dividend + uVar1 * -0x8000;
          }
          bVar5 = uVar1 <= (uint)dividend >> 0xe;
          if (bVar5) {
            dividend = dividend + uVar1 * -0x4000;
          }
          bVar6 = uVar1 <= (uint)dividend >> 0xd;
          if (bVar6) {
            dividend = dividend + uVar1 * -0x2000;
          }
          bVar7 = uVar1 <= (uint)dividend >> 0xc;
          if (bVar7) {
            dividend = dividend + uVar1 * -0x1000;
          }
          iVar3 = (((iVar3 * 2 + (uint)bVar4) * 2 + (uint)bVar5) * 2 + (uint)bVar6) * 2 +
                  (uint)bVar7;
LAB_80000998:
          bVar4 = uVar1 <= (uint)dividend >> 0xb;
          if (bVar4) {
            dividend = dividend + uVar1 * -0x800;
          }
          bVar5 = uVar1 <= (uint)dividend >> 10;
          if (bVar5) {
            dividend = dividend + uVar1 * -0x400;
          }
          bVar6 = uVar1 <= (uint)dividend >> 9;
          if (bVar6) {
            dividend = dividend + uVar1 * -0x200;
          }
          uVar2 = ((iVar3 * 2 + (uint)bVar4) * 2 + (uint)bVar5) * 2 + (uint)bVar6;
          bVar5 = uVar1 <= (uint)dividend >> 8;
          if (bVar5) {
            dividend = dividend + uVar1 * -0x100;
          }
          bVar4 = !bVar5 && CARRY4(uVar2,uVar2) || bVar5 && uVar2 * 2 + 1 <= uVar2;
          iVar3 = uVar2 * 2 + (uint)bVar5;
        } while (bVar4);
      }
      bVar4 = uVar1 <= (uint)dividend >> 7;
      if (bVar4) {
        dividend = dividend + uVar1 * -0x80;
      }
      bVar5 = uVar1 <= (uint)dividend >> 6;
      if (bVar5) {
        dividend = dividend + uVar1 * -0x40;
      }
      bVar6 = uVar1 <= (uint)dividend >> 5;
      if (bVar6) {
        dividend = dividend + uVar1 * -0x20;
      }
      iVar3 = ((iVar3 * 2 + (uint)bVar4) * 2 + (uint)bVar5) * 2 + (uint)bVar6;
    }
    bVar4 = uVar1 <= (uint)dividend >> 4;
    if (bVar4) {
      dividend = dividend + uVar1 * -0x10;
    }
    bVar5 = uVar1 <= (uint)dividend >> 3;
    if (bVar5) {
      dividend = dividend + uVar1 * -8;
    }
    bVar6 = uVar1 <= (uint)dividend >> 2;
    if (bVar6) {
      dividend = dividend + uVar1 * -4;
    }
    iVar3 = ((iVar3 * 2 + (uint)bVar4) * 2 + (uint)bVar5) * 2 + (uint)bVar6;
  }
  bVar4 = uVar1 <= (uint)dividend >> 1;
  if (bVar4) {
    dividend = dividend + uVar1 * -2;
  }
  return (iVar3 * 2 + (uint)bVar4) * 2 + (uint)(uVar1 <= (uint)dividend);
}



void handle_interrupt(void)

{
  int iVar1;
  undefined4 in_r0;
  undefined4 in_r1;
  undefined4 in_r2;
  undefined4 in_r3;
  undefined4 unaff_r4;
  undefined4 unaff_r5;
  undefined4 unaff_r6;
  undefined4 unaff_r7;
  undefined4 unaff_r8;
  undefined4 unaff_r9;
  undefined4 unaff_r10;
  undefined4 unaff_r11;
  undefined4 in_r12;
  int iVar2;
  undefined4 in_lr;
  undefined *puVar3;
  undefined4 *puVar4;
  
  iVar1 = interrupt_stack_base;
  iVar2 = interrupt_stack_base + -0x48;
  puVar3 = (undefined *)(interrupt_stack_base + -0x48);
  puVar4 = (undefined4 *)(interrupt_stack_base + -0x48);
  *(undefined4 *)(interrupt_stack_base + -0x48) = in_r0;
  *(undefined4 *)(iVar1 + -0x44) = in_r1;
  *(undefined4 *)(iVar1 + -0x40) = in_r2;
  *(undefined4 *)(iVar1 + -0x3c) = in_r3;
  *(undefined4 *)(iVar1 + -0x38) = unaff_r4;
  *(undefined4 *)(iVar1 + -0x34) = unaff_r5;
  *(undefined4 *)(iVar1 + -0x30) = unaff_r6;
  *(undefined4 *)(iVar1 + -0x2c) = unaff_r7;
  *(undefined4 *)(iVar1 + -0x28) = unaff_r8;
  *(undefined4 *)(iVar1 + -0x24) = unaff_r9;
  *(undefined4 *)(iVar1 + -0x20) = unaff_r10;
  *(undefined4 *)(iVar1 + -0x1c) = unaff_r11;
  *(undefined4 *)(iVar1 + -0x18) = in_r12;
  *(undefined4 *)(iVar1 + -0x10) = in_lr;
  *(int *)(iVar1 + -0x14) = iVar2;
  *(undefined4 *)(iVar1 + -0xc) = in_lr;
  *(undefined4 *)(iVar1 + -8) = 0;
  *(undefined4 *)(iVar1 + -4) = in_r0;
  irq_handler(*puVar3);
                    // WARNING: Could not recover jumptable at 0x80000e8c. Too many branches
                    // WARNING: Treating indirect jump as call
  (*(code *)(*(int *)(*(int *)(iVar1 + -0x14) + 0x3c) + -4))
            (*puVar4,*(undefined4 *)(iVar1 + -0x44),*(undefined4 *)(iVar1 + -0x40),
             *(undefined4 *)(iVar1 + -0x3c));
  return;
}



uint check_ad9288(void)

{
  bool bVar1;
  bool bVar2;
  bool bVar3;
  bool bVar4;
  ushort uVar5;
  int iVar6;
  ushort *puVar7;
  ushort *puVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  ushort offset;
  uint uVar13;
  bool bVar14;
  bool bVar15;
  
  bVar1 = false;
  bVar2 = false;
  uVar11 = 0;
  bVar3 = false;
  bVar4 = false;
  FUN_80026728();
  *(undefined *)(DAT_80001198 + 10) = 0x18;
  set_fpga_trigger_timebase();
  fpga_write_channel1_offset(400);
  FUN_80009694(400);
  delay_2(100);
  write_fpga_cmd_0x0E(0x96);
  puVar8 = DAT_8000119c;
  offset = 400;
  do {
    FUN_80025b24();
    do {
      iVar6 = FUN_80025b0c();
    } while (iVar6 == 0);
    fpga_write_channel1_offset(offset);
    FUN_80009694(offset);
    delay(1000);
    FUN_80026698(0x14);
    uVar5 = FUN_800011a4(1);
    puVar8[uVar11] = uVar5;
    FUN_80026698(0x14);
    uVar5 = FUN_800011a4(2);
    puVar8[uVar11 + 1000] = uVar5;
    FUN_80026698(0x14);
    uVar5 = FUN_800011a4(3);
    puVar8[uVar11 + 2000] = uVar5;
    FUN_80026698(0x14);
    uVar5 = FUN_800011a4(4);
    offset = offset + 1;
    iVar6 = uVar11 + 3000;
    uVar11 = uVar11 + 1 & 0xfffeffff;
    puVar8[iVar6] = uVar5;
  } while (offset < 0x3fd);
  uVar10 = 0;
  uVar13 = 0;
  uVar11 = 1000;
  iVar6 = 600;
  puVar7 = puVar8;
  do {
    uVar9 = (uint)puVar7[1];
    uVar12 = (uint)*puVar7;
    bVar15 = uVar9 <= uVar12;
    bVar14 = uVar12 == uVar9;
    if (!bVar15) {
      uVar11 = uVar11 - 1;
      uVar10 = uVar10 + (uVar9 - uVar12) + 1;
    }
    if (bVar15 && !bVar14) {
      bVar15 = puVar7[2] <= uVar9;
      bVar14 = uVar9 == puVar7[2];
    }
    if (bVar15 && !bVar14) {
      uVar13 = uVar13 + 1;
    }
    if (uVar9 < uVar12) {
      uVar11 = uVar11 + 1;
    }
    iVar6 = iVar6 + -1;
    puVar7 = puVar7 + 1;
  } while (iVar6 != 0);
  if ((uVar10 < 0x50 && uVar13 < 0x23) && (DAT_800011a0 < uVar11)) {
    bVar3 = true;
  }
  uVar13 = 0;
  uVar10 = 0;
  uVar11 = 1000;
  puVar7 = puVar8 + 0x3e9;
  iVar6 = 600;
  do {
    uVar9 = (uint)*puVar7;
    uVar12 = (uint)puVar7[-1];
    bVar15 = uVar9 <= uVar12;
    bVar14 = uVar12 == uVar9;
    if (!bVar15) {
      uVar11 = uVar11 - 1;
      uVar13 = uVar13 + (uVar9 - uVar12) + 1;
    }
    if (bVar15 && !bVar14) {
      bVar15 = puVar7[1] <= uVar9;
      bVar14 = uVar9 == puVar7[1];
    }
    if (bVar15 && !bVar14) {
      uVar10 = uVar10 + 1;
    }
    if (uVar9 < uVar12) {
      uVar11 = uVar11 + 1;
    }
    iVar6 = iVar6 + -1;
    puVar7 = puVar7 + 1;
  } while (iVar6 != 0);
  if ((uVar13 < 0x50 && uVar10 < 0x23) && (DAT_800011a0 < uVar11)) {
    bVar4 = true;
  }
  uVar13 = 0;
  uVar10 = 0;
  uVar11 = 1000;
  puVar7 = puVar8 + 0x7d1;
  iVar6 = 600;
  do {
    uVar9 = (uint)*puVar7;
    uVar12 = (uint)puVar7[-1];
    bVar15 = uVar9 <= uVar12;
    bVar14 = uVar12 == uVar9;
    if (!bVar15) {
      uVar11 = uVar11 - 1;
      uVar13 = uVar13 + (uVar9 - uVar12) + 1;
    }
    if (bVar15 && !bVar14) {
      bVar15 = puVar7[1] <= uVar9;
      bVar14 = uVar9 == puVar7[1];
    }
    if (bVar15 && !bVar14) {
      uVar10 = uVar10 + 1;
    }
    if (uVar9 < uVar12) {
      uVar11 = uVar11 + 1;
    }
    iVar6 = iVar6 + -1;
    puVar7 = puVar7 + 1;
  } while (iVar6 != 0);
  if ((uVar13 < 0x50 && uVar10 < 0x23) && (DAT_800011a0 < uVar11)) {
    bVar1 = true;
  }
  uVar13 = 0;
  uVar10 = 0;
  uVar11 = 1000;
  puVar8 = puVar8 + 0xbb9;
  iVar6 = 600;
  do {
    uVar9 = (uint)*puVar8;
    uVar12 = (uint)puVar8[-1];
    bVar15 = uVar9 <= uVar12;
    bVar14 = uVar12 == uVar9;
    if (!bVar15) {
      uVar11 = uVar11 - 1;
      uVar13 = uVar13 + (uVar9 - uVar12) + 1;
    }
    if (bVar15 && !bVar14) {
      bVar15 = puVar8[1] <= uVar9;
      bVar14 = uVar9 == puVar8[1];
    }
    if (bVar15 && !bVar14) {
      uVar10 = uVar10 + 1;
    }
    if (uVar9 < uVar12) {
      uVar11 = uVar11 + 1;
    }
    iVar6 = iVar6 + -1;
    puVar8 = puVar8 + 1;
  } while (iVar6 != 0);
  if ((uVar13 < 0x50 && uVar10 < 0x23) && (DAT_800011a0 < uVar11)) {
    bVar2 = true;
  }
  bVar14 = bVar3;
  if (bVar3) {
    bVar14 = bVar4;
  }
  if (!bVar3 || !bVar14) {
    if (bVar1 && bVar2) {
      uVar11 = 2;
    }
    else {
      uVar11 = 0;
    }
    return uVar11;
  }
  if (bVar1 && bVar2) {
    uVar11 = 3;
  }
  else {
    uVar11 = 1;
  }
  return uVar11;
}



uint FUN_800011a4(int param_1)

{
  ushort uVar1;
  uint *ptr;
  ushort *puVar2;
  int iVar3;
  int iVar4;
  ushort *unaff_r4;
  uint uVar5;
  
  if (param_1 == 1) {
    param_1 = 0x20;
    unaff_r4 = DAT_800012a0;
  }
  else {
    if (param_1 == 2) {
      param_1 = 0x21;
      unaff_r4 = DAT_800012a4;
    }
    else {
      if (param_1 == 3) {
        param_1 = 0x22;
        unaff_r4 = DAT_800012a8;
      }
      else {
        if (param_1 == 4) {
          param_1 = 0x23;
          unaff_r4 = DAT_800012ac;
        }
      }
    }
  }
  fpga_write_cmd((uchar)param_1);
  fpga_bus_dir_in();
  ptr = DAT_800012b0;
  set_gpio_pin_low(DAT_800012b0,9);
  set_gpio_pin_low(ptr,10);
  uVar5 = 0;
  do {
    set_gpio_pin_low(ptr,8);
    set_gpio_pin_high(ptr,8);
    puVar2 = unaff_r4 + uVar5;
    uVar5 = uVar5 + 1 & 0xfffeffff;
    *puVar2 = (ushort)ptr[4] & 0xff;
  } while (uVar5 < 100);
  uVar5 = (uint)*unaff_r4;
  uVar1 = unaff_r4[1];
  iVar3 = 0;
  iVar4 = 0x31;
  puVar2 = unaff_r4;
  do {
    uVar5 = uVar5 + uVar1;
    uVar1 = puVar2[3];
    iVar4 = iVar4 + -1;
    iVar3 = iVar3 + (uint)puVar2[2];
    puVar2 = puVar2 + 2;
  } while (iVar4 != 0);
  return (uint)((int)((ulonglong)(uVar5 + iVar3 + (uint)unaff_r4[99]) * (ulonglong)DAT_800012b4 >>
                     0x20) << 0x13) >> 0x18;
}



void FUN_800012b8(void)

{
  uint *ptr;
  
  fpga_write_cmd('(');
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = ptr[4] & 0xffffff00 | 1;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void enable_keyadc(void)

{
  uint *puVar1;
  
  puVar1 = KEYADC_CTRL;
  *KEYADC_CTRL = *KEYADC_CTRL & 0xffffcfff;
  *puVar1 = *puVar1;
  *puVar1 = *puVar1 & 0xffffffcf;
  *puVar1 = *puVar1 | 0x10;
  *puVar1 = *puVar1 | 1;
  return;
}



void set_trigger_level_dividers(void)

{
  undefined2 *puVar1;
  
  puVar1 = DAT_80001348;
  *DAT_80001348 = 0xad;
  puVar1[1] = 0xaf;
  puVar1[2] = 0xb4;
  puVar1[3] = 0xb4;
  puVar1[4] = 0xb8;
  puVar1[5] = 0xb8;
  puVar1[6] = 0xb8;
  return;
}



int FUN_8000134c(int param_1)

{
  if (param_1 < 1) {
    param_1 = -param_1;
  }
  return param_1;
}



ulonglong FUN_80001358(undefined *param_1,uint param_2)

{
  char cVar1;
  ushort uVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  int *piVar5;
  undefined4 *puVar6;
  undefined *puVar7;
  undefined4 *puVar8;
  undefined4 *puVar9;
  undefined4 *puVar10;
  int *piVar11;
  undefined *puVar12;
  undefined2 *puVar13;
  undefined4 *puVar14;
  uint uVar15;
  undefined uVar16;
  undefined2 uVar17;
  int iVar18;
  undefined4 uVar19;
  int iVar20;
  undefined uVar21;
  undefined *puVar22;
  undefined4 uVar23;
  int iVar24;
  undefined *puVar25;
  undefined4 uVar26;
  bool bVar27;
  bool bVar28;
  int *piVar29;
  
  iVar20 = DAT_800019bc;
  puVar25 = PTR_DAT_800019b8;
  iVar18 = DAT_800019b4;
  puVar22 = DAT_800019b0;
  DAT_800019b0[0x3a] = *param_1;
  *puVar22 = param_1[2];
  puVar22[3] = param_1[4];
  puVar22[4] = param_1[6];
  puVar22[1] = param_1[8];
  puVar22[2] = param_1[10];
  puVar22[0xc] = param_1[0xc];
  puVar22[0xf] = param_1[0xe];
  puVar22[0x10] = param_1[0x10];
  puVar22[0xd] = param_1[0x12];
  puVar22[0xe] = param_1[0x14];
  puVar22[10] = param_1[0x16];
  puVar22[0x16] = param_1[0x18];
  puVar22[0x21] = param_1[0x1a];
  puVar22[0x22] = param_1[0x1c];
  puVar22[0x23] = param_1[0x1e];
  puVar22[0x38] = param_1[0x20];
  puVar22[0x42] = param_1[0x22];
  puVar22[0x18] = param_1[0x24];
  puVar22[0x17] = param_1[0x26];
  *(undefined2 *)(puVar22 + 0x1a) = *(undefined2 *)(param_1 + 0x28);
  *(undefined2 *)(puVar22 + 0x1c) = *(undefined2 *)(param_1 + 0x2a);
  *(undefined2 *)PTR_DAT_800019c0 = *(undefined2 *)(param_1 + 0x2c);
  *(undefined2 *)PTR_DAT_800019c4 = *(undefined2 *)(param_1 + 0x2e);
  *(undefined2 *)PTR_DAT_800019c8 = *(undefined2 *)(param_1 + 0x30);
  *(undefined2 *)PTR_DAT_800019cc = *(undefined2 *)(param_1 + 0x32);
  puVar22[0xb] = param_1[0x34];
  puVar22[0x43] = param_1[0x36];
  *(undefined2 *)(puVar22 + 0x24) = *(undefined2 *)(param_1 + 0x50);
  *(undefined2 *)(puVar22 + 0x26) = *(undefined2 *)(param_1 + 0x52);
  *(undefined2 *)(puVar22 + 6) = *(undefined2 *)(param_1 + 0x54);
  *(undefined2 *)(puVar22 + 0x12) = *(undefined2 *)(param_1 + 0x56);
  *(undefined *)(iVar18 + 2) = param_1[0x78];
  *(undefined *)(iVar18 + 3) = param_1[0x7a];
  *(undefined *)(iVar18 + 4) = param_1[0x7c];
  *(undefined *)(iVar18 + 7) = param_1[0x7e];
  cVar1 = *puVar25;
  if (cVar1 == '\0') {
    *(undefined *)(iVar20 + 0x100) = param_1[0xa0];
    *(undefined *)(iVar20 + 0x112) = param_1[0xa2];
    *(undefined *)(iVar20 + 0x122) = param_1[0xa4];
    *(undefined *)(iVar20 + 0x132) = param_1[0xa6];
    *(undefined *)(iVar20 + 0x142) = param_1[0xa8];
    *(undefined *)(iVar20 + 0x152) = param_1[0xaa];
    *(undefined *)(iVar20 + 0x162) = param_1[0xac];
    *(undefined *)(iVar20 + 0x172) = param_1[0xae];
    *(undefined *)(iVar20 + 0x182) = param_1[0xb0];
    *(undefined *)(iVar20 + 0x192) = param_1[0xb2];
    *(undefined *)(iVar20 + 0x1a2) = param_1[0xb4];
    *(undefined *)(iVar20 + 0x1b2) = param_1[0xb6];
    *(undefined *)(iVar20 + 0x1c2) = param_1[0xb8];
    *(undefined *)(iVar20 + 0x1d2) = param_1[0xba];
    *(undefined *)(iVar20 + 0x1e2) = param_1[0xbc];
    *(undefined *)(iVar20 + 0x1f2) = param_1[0xbe];
    *(undefined *)(iVar20 + 0x202) = param_1[0xc0];
    *(undefined *)(iVar20 + 0x212) = param_1[0xc2];
    *(undefined *)(iVar20 + 0x232) = param_1[0xc4];
    *(undefined *)(iVar20 + 0x242) = param_1[0xc6];
    *(undefined *)(iVar20 + 0x252) = param_1[200];
    *(undefined *)(iVar20 + 0x262) = param_1[0xca];
    *(undefined *)(iVar20 + 0x272) = param_1[0xcc];
    *(undefined *)(iVar20 + 0x282) = param_1[0xce];
  }
  uVar2 = *(ushort *)(param_1 + 0xd0);
  *(uint *)(iVar20 + 0x104) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x104) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0xd2));
  uVar2 = *(ushort *)(param_1 + 0xd4);
  *(uint *)(iVar20 + 0x114) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x114) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0xd6));
  uVar2 = *(ushort *)(param_1 + 0xd8);
  *(uint *)(iVar20 + 0x124) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x124) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0xda));
  *(uint *)(iVar20 + 0x134) = (uint)*(ushort *)(param_1 + 0xdc) << 0x10;
  *(uint *)(iVar20 + 0x134) = *(uint *)(iVar20 + 0x134) | (uint)*(ushort *)(param_1 + 0xde);
  uVar2 = *(ushort *)(param_1 + 0xe0);
  *(uint *)(iVar20 + 0x144) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x144) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0xe2));
  uVar2 = *(ushort *)(param_1 + 0xe4);
  *(uint *)(iVar20 + 0x154) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x154) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0xe6));
  uVar2 = *(ushort *)(param_1 + 0xe8);
  *(uint *)(iVar20 + 0x164) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x164) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0xea));
  uVar2 = *(ushort *)(param_1 + 0xec);
  *(uint *)(iVar20 + 0x174) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x174) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0xee));
  uVar2 = *(ushort *)(param_1 + 0xf0);
  *(uint *)(iVar20 + 0x184) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x184) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0xf2));
  uVar2 = *(ushort *)(param_1 + 0xf4);
  *(uint *)(iVar20 + 0x194) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x194) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0xf6));
  uVar2 = *(ushort *)(param_1 + 0xf8);
  *(uint *)(iVar20 + 0x1a4) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x1a4) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0xfa));
  uVar2 = *(ushort *)(param_1 + 0xfc);
  *(uint *)(iVar20 + 0x1b4) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x1b4) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0xfe));
  uVar2 = *(ushort *)(param_1 + 0x100);
  *(uint *)(iVar20 + 0x1c4) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x1c4) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0x102));
  uVar2 = *(ushort *)(param_1 + 0x104);
  *(uint *)(iVar20 + 0x1d4) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x1d4) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0x106));
  uVar2 = *(ushort *)(param_1 + 0x108);
  *(uint *)(iVar20 + 0x1e4) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x1e4) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0x10a));
  uVar2 = *(ushort *)(param_1 + 0x10c);
  *(uint *)(iVar20 + 500) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 500) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0x10e));
  uVar2 = *(ushort *)(param_1 + 0x110);
  *(uint *)(iVar20 + 0x204) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x204) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0x112));
  uVar2 = *(ushort *)(param_1 + 0x114);
  *(uint *)(iVar20 + 0x214) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x214) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0x116));
  uVar2 = *(ushort *)(param_1 + 0x118);
  *(uint *)(iVar20 + 0x234) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x234) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0x11a));
  uVar2 = *(ushort *)(param_1 + 0x11c);
  *(uint *)(iVar20 + 0x244) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x244) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0x11e));
  uVar2 = *(ushort *)(param_1 + 0x120);
  *(uint *)(iVar20 + 0x254) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x254) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0x122));
  uVar2 = *(ushort *)(param_1 + 0x124);
  *(uint *)(iVar20 + 0x264) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x264) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0x126));
  uVar2 = *(ushort *)(param_1 + 0x128);
  *(uint *)(iVar20 + 0x274) = (uint)uVar2 << 0x10;
  *(uint *)(iVar20 + 0x274) = CONCAT22(uVar2,*(undefined2 *)(param_1 + 0x12a));
  uVar2 = *(ushort *)(param_1 + 300);
  *(uint *)(iVar20 + 0x284) = (uint)uVar2 << 0x10;
  puVar25 = (undefined *)CONCAT22(uVar2,*(undefined2 *)(param_1 + 0x12e));
  *(undefined **)(iVar20 + 0x284) = puVar25;
  if (cVar1 == '\0') {
    puVar12 = param_1 + 0x12e;
    puVar25 = &PrefetchAbort;
    puVar7 = (undefined *)(iVar20 + -1);
    do {
      puVar7[1] = puVar12[2];
      puVar12 = puVar12 + 4;
      puVar25 = (undefined *)((uint)(puVar25 + -1) & 0xffff);
      puVar7 = puVar7 + 2;
      *puVar7 = *puVar12;
    } while (puVar25 != (undefined *)0x0);
    param_2 = 0x18;
  }
  puVar22[0x39] = param_1[400];
  puVar22[0x38] = param_1[0x192];
  *(undefined2 *)PTR_DAT_800019d0 = *(undefined2 *)(param_1 + 0x194);
  *(undefined2 *)PTR_DAT_800019d4 = *(undefined2 *)(param_1 + 0x196);
  translate_parameter(0x15,param_2);
  iVar20 = DAT_800019dc;
  iVar18 = DAT_800019d8;
  puVar14 = (undefined4 *)(DAT_800019dc >> 1);
  if ((DAT_800019d8 - (int)param_1 < 0x1f5) || (1999 < DAT_800019d8 - (int)param_1)) {
    FUN_80000730(DAT_800019d8,param_1 + 1000,DAT_800019dc);
  }
  else {
    puVar8 = (undefined4 *)0x0;
    do {
      iVar24 = (int)puVar8 * 2;
      puVar13 = (undefined2 *)(iVar18 + (int)puVar8 * 2);
      puVar25 = (undefined *)((int)puVar8 + 2);
      *puVar13 = *(undefined2 *)(param_1 + iVar24 + 1000);
      puVar8 = (undefined4 *)((uint)puVar25 & 0xfffeffff);
      puVar13[1] = *(undefined2 *)(param_1 + iVar24 + 0x3ea);
    } while (puVar8 < puVar14);
  }
  puVar4 = DAT_800019e4;
  iVar18 = DAT_800019e0;
  puVar9 = (undefined4 *)(DAT_800019e0 - (int)param_1);
  bVar28 = SBORROW4((int)puVar9,2000);
  puVar8 = puVar9 + -500;
  bVar27 = puVar9 == (undefined4 *)0x7d0;
  if (2000 < (int)puVar9) {
    bVar28 = SBORROW4((int)DAT_800019e4,(int)puVar9);
    puVar8 = (undefined4 *)((int)DAT_800019e4 - (int)puVar9);
    bVar27 = DAT_800019e4 == puVar9;
  }
  if (!bVar27 && (int)puVar8 < 0 == bVar28) {
    puVar9 = (undefined4 *)0x0;
  }
  if (bVar27 || (int)puVar8 < 0 != bVar28) {
    FUN_80000730(DAT_800019e0,param_1 + 4000,iVar20);
  }
  else {
    do {
      iVar20 = (int)puVar9 * 2;
      puVar13 = (undefined2 *)(iVar18 + (int)puVar9 * 2);
      puVar25 = (undefined *)((int)puVar9 + 2);
      *puVar13 = *(undefined2 *)(param_1 + iVar20 + 4000);
      puVar9 = (undefined4 *)((uint)puVar25 & 0xfffeffff);
      puVar13[1] = *(undefined2 *)(param_1 + iVar20 + 0xfa2);
    } while (puVar9 < puVar14);
  }
  puVar3 = DAT_800019f0;
  puVar9 = DAT_800019ec;
  iVar18 = DAT_800019e8;
  puVar10 = (undefined4 *)(DAT_800019e8 - (int)param_1);
  bVar27 = SBORROW4((int)puVar10,(int)puVar4);
  puVar8 = (undefined4 *)((int)puVar10 - (int)puVar4);
  if ((int)puVar4 < (int)puVar10) {
    bVar27 = SBORROW4((int)DAT_800019ec,(int)puVar10);
    puVar8 = (undefined4 *)((int)DAT_800019ec - (int)puVar10);
    puVar4 = DAT_800019ec;
  }
  bVar28 = puVar10 != puVar4;
  if (bVar28 && (int)puVar8 < 0 == bVar27) {
    puVar10 = (undefined4 *)0x0;
  }
  if (bVar28 && (int)puVar8 < 0 == bVar27) {
    do {
      iVar20 = (int)puVar10 * 2;
      puVar13 = (undefined2 *)(iVar18 + (int)puVar10 * 2);
      puVar25 = (undefined *)((int)puVar10 + 2);
      *puVar13 = *(undefined2 *)(param_1 + iVar20 + 7000);
      puVar10 = (undefined4 *)((uint)puVar25 & 0xfffeffff);
      puVar13[1] = *(undefined2 *)(param_1 + iVar20 + 0x1b5a);
    } while (puVar10 < puVar3);
  }
  else {
    FUN_80000730(DAT_800019e8,param_1 + 7000);
  }
  puVar4 = DAT_800019f4;
  puVar10 = (undefined4 *)((int)DAT_800019f4 - (int)param_1);
  bVar27 = SBORROW4((int)puVar10,(int)puVar9);
  puVar8 = (undefined4 *)((int)puVar10 - (int)puVar9);
  if ((int)puVar9 < (int)puVar10) {
    bVar27 = SBORROW4((int)DAT_800019f8,(int)puVar10);
    puVar8 = (undefined4 *)((int)DAT_800019f8 - (int)puVar10);
    puVar9 = DAT_800019f8;
  }
  bVar28 = puVar10 != puVar9;
  if (bVar28 && (int)puVar8 < 0 == bVar27) {
    puVar10 = (undefined4 *)0x0;
  }
  if (bVar28 && (int)puVar8 < 0 == bVar27) {
    do {
      iVar18 = (int)puVar10 * 2;
      puVar14 = (undefined4 *)((int)puVar4 + (int)puVar10 * 2);
      puVar22 = (undefined *)((int)puVar10 + 2);
      *(undefined2 *)puVar14 = *(undefined2 *)(param_1 + iVar18 + 0x2134);
      puVar10 = (undefined4 *)((uint)puVar22 & 0xfffeffff);
      *(undefined2 *)((int)puVar14 + 2) = *(undefined2 *)(param_1 + iVar18 + 0x2136);
    } while (puVar10 < puVar3);
    return CONCAT44(puVar4,puVar22) & 0xfffffffffffeffff;
  }
  puVar9 = (undefined4 *)(param_1 + 0x2134);
  puVar8 = (undefined4 *)((int)DAT_800019f4 - (int)puVar9);
  bVar27 = puVar8 == (undefined4 *)0x0;
  if (puVar9 <= DAT_800019f4) {
    bVar27 = puVar14 == puVar8;
  }
  if ((puVar9 <= DAT_800019f4 && puVar8 <= puVar14) && !bVar27) {
    piVar5 = (int *)((int)DAT_800019f4 + (int)puVar14);
    piVar11 = (int *)((int)puVar9 + (int)puVar14);
    if ((undefined4 *)0x3 < puVar14) {
      bVar27 = ((uint)piVar5 & 3) == 0;
      do {
        if (!bVar27) {
          piVar11 = (int *)((int)piVar11 + -1);
          puVar14 = (undefined4 *)((int)puVar14 - 1);
          piVar5 = (int *)((int)piVar5 + -1);
          *(undefined *)piVar5 = *(undefined *)piVar11;
        }
        bVar27 = ((uint)piVar5 & 3) == 0;
      } while (!bVar27);
      puVar8 = (undefined4 *)((uint)piVar11 & 3);
      if (puVar8 == (undefined4 *)0x0) {
        while (puVar8 = puVar14 + -4, (undefined4 *)0xf < puVar14) {
          piVar29 = piVar11 + -1;
          iVar24 = piVar11[-2];
          iVar20 = piVar11[-3];
          piVar11 = piVar11 + -4;
          iVar18 = *piVar11;
          piVar5[-1] = *piVar29;
          piVar5[-2] = iVar24;
          piVar5[-3] = iVar20;
          piVar5 = piVar5 + -4;
          *piVar5 = iVar18;
          puVar14 = puVar8;
        }
        iVar18 = (int)puVar14 << 0x1d;
        bVar27 = iVar18 < 0;
        if ((bool)((byte)((uint)puVar8 >> 3) & 1)) {
          piVar29 = piVar11 + -1;
          piVar11 = piVar11 + -2;
          iVar18 = *piVar11;
          piVar5[-1] = *piVar29;
          piVar5 = piVar5 + -2;
          *piVar5 = iVar18;
        }
        if (bVar27) {
          piVar11 = piVar11 + -1;
          iVar18 = *piVar11;
          piVar5 = piVar5 + -1;
          *piVar5 = iVar18;
        }
        uVar17 = (undefined2)iVar18;
        if (((uint)puVar8 & 3) != 0) {
          bVar28 = (bool)((byte)((uint)puVar8 >> 1) & 1);
          uVar15 = (int)puVar14 << 0x1f;
          bVar27 = (int)uVar15 < 0;
          if (bVar28) {
            piVar11 = (int *)((int)piVar11 + -2);
            uVar17 = *(undefined2 *)piVar11;
          }
          if (bVar27) {
            uVar15 = (uint)*(byte *)((int)piVar11 + -1);
          }
          if (bVar28) {
            piVar5 = (int *)((int)piVar5 + -2);
            *(undefined2 *)piVar5 = uVar17;
          }
          if (bVar27) {
            *(char *)((int)piVar5 + -1) = (char)uVar15;
          }
          return CONCAT44(piVar11,piVar5);
        }
        return CONCAT44(piVar11,piVar5);
      }
      bVar27 = (undefined4 *)0x3 < puVar14;
      puVar14 = puVar14 + -1;
      if (bVar27) {
        piVar11 = (int *)((int)piVar11 - (int)puVar8);
        puVar25 = (undefined *)*piVar11;
        if (puVar8 < (undefined4 *)0x2) {
          do {
            piVar29 = piVar11;
            uVar15 = (int)puVar25 << 0x18;
            piVar11 = piVar29 + -1;
            puVar25 = (undefined *)*piVar11;
            bVar27 = (undefined4 *)0x3 < puVar14;
            puVar14 = puVar14 + -1;
            puVar8 = (undefined4 *)(uVar15 | (uint)puVar25 >> 8);
            piVar5 = piVar5 + -1;
            *piVar5 = (int)puVar8;
          } while (bVar27);
          piVar11 = (int *)((int)piVar29 + -3);
        }
        else {
          if (puVar8 < (undefined4 *)0x3) {
            do {
              piVar29 = piVar11;
              uVar15 = (int)puVar25 << 0x10;
              piVar11 = piVar29 + -1;
              puVar25 = (undefined *)*piVar11;
              bVar27 = (undefined4 *)0x3 < puVar14;
              puVar14 = puVar14 + -1;
              puVar8 = (undefined4 *)(uVar15 | (uint)puVar25 >> 0x10);
              piVar5 = piVar5 + -1;
              *piVar5 = (int)puVar8;
            } while (bVar27);
            piVar11 = (int *)((int)piVar29 + -2);
          }
          else {
            do {
              piVar29 = piVar11;
              uVar15 = (int)puVar25 << 8;
              piVar11 = piVar29 + -1;
              puVar25 = (undefined *)*piVar11;
              bVar27 = (undefined4 *)0x3 < puVar14;
              puVar14 = puVar14 + -1;
              puVar8 = (undefined4 *)(uVar15 | (uint)puVar25 >> 0x18);
              piVar5 = piVar5 + -1;
              *piVar5 = (int)puVar8;
            } while (bVar27);
            piVar11 = (int *)((int)piVar29 + -1);
          }
        }
      }
    }
    uVar21 = SUB41(puVar25,0);
    uVar16 = SUB41(puVar8,0);
    bVar28 = (bool)((byte)((uint)puVar14 >> 1) & 1);
    uVar15 = (int)puVar14 << 0x1f;
    bVar27 = (int)uVar15 < 0;
    if (bVar28) {
      uVar16 = *(undefined *)((int)piVar11 + -1);
      piVar11 = (int *)((int)piVar11 + -2);
      uVar21 = *(undefined *)piVar11;
    }
    if (bVar27) {
      uVar15 = (uint)*(byte *)((int)piVar11 + -1);
    }
    if (bVar28) {
      *(undefined *)((int)piVar5 + -1) = uVar16;
      piVar5 = (int *)((int)piVar5 + -2);
      *(undefined *)piVar5 = uVar21;
    }
    if (bVar27) {
      *(char *)((int)piVar5 + -1) = (char)uVar15;
    }
    return CONCAT44(piVar11,piVar5);
  }
  if ((undefined4 *)0x3 < puVar14) {
    puVar22 = (undefined *)((uint)DAT_800019f4 & 3);
    puVar25 = puVar22;
    if (puVar22 != (undefined *)0x0) {
      uVar16 = *(undefined *)puVar9;
      puVar8 = (undefined4 *)(param_1 + 0x2135);
      if (puVar22 < (undefined *)0x3) {
        puVar8 = (undefined4 *)(param_1 + 0x2136);
        puVar25 = (undefined *)(uint)(byte)param_1[0x2135];
      }
      puVar3 = (undefined4 *)((int)DAT_800019f4 + 1);
      *(undefined *)DAT_800019f4 = uVar16;
      puVar9 = puVar8;
      if (puVar22 < (undefined *)0x2) {
        puVar9 = (undefined4 *)((int)puVar8 + 1);
        uVar16 = *(undefined *)puVar8;
      }
      puVar8 = puVar3;
      if (puVar22 < (undefined *)0x3) {
        puVar8 = (undefined4 *)((int)puVar4 + 2);
        *(char *)puVar3 = (char)puVar25;
      }
      puVar14 = (undefined4 *)((int)puVar14 + (int)puVar22 + -4);
      puVar4 = puVar8;
      if (puVar22 < (undefined *)0x2) {
        puVar4 = (undefined4 *)((int)puVar8 + 1);
        *(undefined *)puVar8 = uVar16;
      }
    }
    puVar8 = (undefined4 *)((uint)puVar9 & 3);
    if (puVar8 == (undefined4 *)0x0) {
      while (puVar3 = puVar14 + -8, (undefined4 *)0x1f < puVar14) {
        uVar19 = puVar9[1];
        uVar23 = puVar9[2];
        uVar26 = puVar9[3];
        *puVar4 = *puVar9;
        puVar4[1] = uVar19;
        puVar4[2] = uVar23;
        puVar4[3] = uVar26;
        puVar8 = (undefined4 *)puVar9[4];
        uVar19 = puVar9[5];
        uVar23 = puVar9[6];
        uVar26 = puVar9[7];
        puVar9 = puVar9 + 8;
        puVar4[4] = puVar8;
        puVar4[5] = uVar19;
        puVar4[6] = uVar23;
        puVar4[7] = uVar26;
        puVar4 = puVar4 + 8;
        puVar14 = puVar3;
      }
      if ((bool)((byte)((uint)puVar3 >> 4) & 1)) {
        puVar8 = (undefined4 *)*puVar9;
        uVar19 = puVar9[1];
        uVar23 = puVar9[2];
        uVar26 = puVar9[3];
        puVar9 = puVar9 + 4;
        *puVar4 = puVar8;
        puVar4[1] = uVar19;
        puVar4[2] = uVar23;
        puVar4[3] = uVar26;
        puVar4 = puVar4 + 4;
      }
      if ((int)puVar14 << 0x1c < 0) {
        puVar8 = (undefined4 *)*puVar9;
        uVar19 = puVar9[1];
        puVar9 = puVar9 + 2;
        *puVar4 = puVar8;
        puVar4[1] = uVar19;
        puVar4 = puVar4 + 2;
      }
      puVar6 = puVar4;
      puVar10 = puVar9;
      if ((bool)((byte)((uint)puVar3 >> 2) & 1)) {
        puVar10 = puVar9 + 1;
        puVar8 = (undefined4 *)*puVar9;
        puVar6 = puVar4 + 1;
        *puVar4 = puVar8;
      }
      uVar17 = SUB42(puVar8,0);
      if (((uint)puVar3 & 3) != 0) {
        bVar28 = (bool)((byte)((uint)puVar3 >> 1) & 1);
        uVar15 = (int)puVar14 << 0x1f;
        bVar27 = (int)uVar15 < 0;
        puVar14 = puVar10;
        if (bVar28) {
          puVar14 = (undefined4 *)((int)puVar10 + 2);
          uVar17 = *(undefined2 *)puVar10;
        }
        puVar8 = puVar14;
        if (bVar27) {
          puVar8 = (undefined4 *)((int)puVar14 + 1);
          uVar15 = (uint)*(byte *)puVar14;
        }
        puVar14 = puVar6;
        if (bVar28) {
          puVar14 = (undefined4 *)((int)puVar6 + 2);
          *(undefined2 *)puVar6 = uVar17;
        }
        puVar4 = puVar14;
        if (bVar27) {
          puVar4 = (undefined4 *)((int)puVar14 + 1);
          *(char *)puVar14 = (char)uVar15;
        }
        return CONCAT44(puVar8,puVar4);
      }
      return CONCAT44(puVar10,puVar6);
    }
    bVar27 = (undefined4 *)0x3 < puVar14;
    puVar14 = puVar14 + -1;
    if (bVar27) {
      puVar9 = (undefined4 *)((int)puVar9 - (int)puVar8);
      puVar25 = (undefined *)*puVar9;
      puVar3 = puVar4;
      if (puVar8 == (undefined4 *)0x2) {
        do {
          puVar10 = puVar9;
          uVar15 = (uint)puVar25 >> 0x10;
          puVar9 = puVar10 + 1;
          puVar25 = (undefined *)*puVar9;
          bVar27 = (undefined4 *)0x3 < puVar14;
          puVar14 = puVar14 + -1;
          puVar8 = (undefined4 *)(uVar15 | (int)puVar25 << 0x10);
          puVar4 = puVar3 + 1;
          *puVar3 = puVar8;
          puVar3 = puVar4;
        } while (bVar27);
        puVar9 = (undefined4 *)((int)puVar10 + 6);
      }
      else {
        if (puVar8 < (undefined4 *)0x3) {
          do {
            puVar10 = puVar9;
            uVar15 = (uint)puVar25 >> 8;
            puVar9 = puVar10 + 1;
            puVar25 = (undefined *)*puVar9;
            bVar27 = (undefined4 *)0x3 < puVar14;
            puVar14 = puVar14 + -1;
            puVar8 = (undefined4 *)(uVar15 | (int)puVar25 << 0x18);
            puVar4 = puVar3 + 1;
            *puVar3 = puVar8;
            puVar3 = puVar4;
          } while (bVar27);
          puVar9 = (undefined4 *)((int)puVar10 + 5);
        }
        else {
          do {
            puVar10 = puVar9;
            uVar15 = (uint)puVar25 >> 0x18;
            puVar9 = puVar10 + 1;
            puVar25 = (undefined *)*puVar9;
            bVar27 = (undefined4 *)0x3 < puVar14;
            puVar14 = puVar14 + -1;
            puVar8 = (undefined4 *)(uVar15 | (int)puVar25 << 8);
            puVar4 = puVar3 + 1;
            *puVar3 = puVar8;
            puVar3 = puVar4;
          } while (bVar27);
          puVar9 = (undefined4 *)((int)puVar10 + 7);
        }
      }
    }
  }
  uVar21 = SUB41(puVar25,0);
  uVar16 = SUB41(puVar8,0);
  bVar28 = (bool)((byte)((uint)puVar14 >> 1) & 1);
  uVar15 = (int)puVar14 << 0x1f;
  bVar27 = (int)uVar15 < 0;
  if (bVar28) {
    puVar22 = (undefined *)((int)puVar9 + 1);
    uVar16 = *(undefined *)puVar9;
    puVar9 = (undefined4 *)((int)puVar9 + 2);
    uVar21 = *puVar22;
  }
  puVar14 = puVar9;
  if (bVar27) {
    puVar14 = (undefined4 *)((int)puVar9 + 1);
    uVar15 = (uint)*(byte *)puVar9;
  }
  if (bVar28) {
    puVar22 = (undefined *)((int)puVar4 + 1);
    *(undefined *)puVar4 = uVar16;
    puVar4 = (undefined4 *)((int)puVar4 + 2);
    *puVar22 = uVar21;
  }
  puVar8 = puVar4;
  if (bVar27) {
    puVar8 = (undefined4 *)((int)puVar4 + 1);
    *(char *)puVar4 = (char)uVar15;
  }
  return CONCAT44(puVar14,puVar8);
}



ulonglong FUN_800019fc(ushort *param_1)

{
  undefined4 *puVar1;
  byte *pbVar2;
  uint uVar3;
  ushort uVar4;
  int *piVar5;
  undefined4 *puVar6;
  undefined4 *puVar7;
  uint uVar8;
  undefined4 *puVar9;
  undefined *puVar10;
  int *piVar11;
  ushort **ppuVar12;
  ushort **ppuVar13;
  undefined4 *puVar14;
  byte *pbVar15;
  undefined4 *puVar16;
  uint uVar17;
  undefined uVar18;
  undefined2 uVar19;
  undefined4 *puVar20;
  int iVar21;
  ushort *puVar22;
  undefined4 uVar23;
  int iVar24;
  short sVar25;
  undefined uVar26;
  ushort *puVar27;
  ushort *puVar28;
  undefined4 uVar29;
  int iVar30;
  undefined4 uVar31;
  bool bVar32;
  bool bVar33;
  int *piVar34;
  
  pbVar2 = DAT_80002010;
  if (DAT_80002010[0x1e] != 0) {
    DAT_80002010[0x18] = 1;
    pbVar2[0x17] = 1;
  }
  *param_1 = (ushort)pbVar2[0x3a];
  param_1[1] = (ushort)*pbVar2;
  param_1[2] = (ushort)pbVar2[3];
  param_1[3] = (ushort)pbVar2[4];
  param_1[4] = (ushort)pbVar2[1];
  param_1[5] = (ushort)pbVar2[2];
  param_1[6] = (ushort)pbVar2[0xc];
  param_1[7] = (ushort)pbVar2[0xf];
  param_1[8] = (ushort)pbVar2[0x10];
  param_1[9] = (ushort)pbVar2[0xd];
  param_1[10] = (ushort)pbVar2[0xe];
  param_1[0xb] = (ushort)pbVar2[10];
  param_1[0xc] = (ushort)pbVar2[0x16];
  param_1[0xd] = (ushort)pbVar2[0x21];
  param_1[0xe] = (ushort)pbVar2[0x22];
  param_1[0xf] = (ushort)pbVar2[0x23];
  param_1[0x10] = (ushort)pbVar2[0x38];
  param_1[0x11] = (ushort)pbVar2[0x42];
  param_1[0x12] = (ushort)pbVar2[0x18];
  param_1[0x13] = (ushort)pbVar2[0x17];
  param_1[0x14] = *(ushort *)(pbVar2 + 0x1a);
  puVar10 = PTR_DAT_80002024;
  iVar21 = DAT_8000201c;
  if (pbVar2[10] < 9) {
    uVar4 = *(short *)PTR_DAT_80002014 - 1;
  }
  else {
    uVar4 = *(ushort *)(pbVar2 + 0x1c);
  }
  param_1[0x15] = uVar4;
  iVar24 = DAT_80002020;
  puVar28 = param_1 + 0x97;
  param_1[0x16] = *(ushort *)PTR_DAT_80002018;
  pbVar15 = (byte *)(iVar24 + -1);
  sVar25 = 0xc;
  param_1[0x17] = *(ushort *)puVar10;
  param_1[0x18] = *(ushort *)PTR_DAT_80002028;
  param_1[0x19] = *(ushort *)PTR_DAT_8000202c;
  param_1[0x1a] = (ushort)pbVar2[0xb];
  param_1[0x1b] = (ushort)pbVar2[0x43];
  param_1[0x28] = *(ushort *)(pbVar2 + 0x24);
  param_1[0x29] = *(ushort *)(pbVar2 + 0x26);
  param_1[0x2a] = *(ushort *)(pbVar2 + 6);
  param_1[0x2b] = *(ushort *)(pbVar2 + 0x12);
  param_1[0x3c] = (ushort)*(byte *)(iVar21 + 2);
  param_1[0x3d] = (ushort)*(byte *)(iVar21 + 3);
  param_1[0x3e] = (ushort)*(byte *)(iVar21 + 4);
  param_1[0x3f] = (ushort)*(byte *)(iVar21 + 7);
  param_1[0x50] = (ushort)*(byte *)(iVar24 + 0x100);
  param_1[0x51] = (ushort)*(byte *)(iVar24 + 0x112);
  param_1[0x52] = (ushort)*(byte *)(iVar24 + 0x122);
  param_1[0x53] = (ushort)*(byte *)(iVar24 + 0x132);
  param_1[0x54] = (ushort)*(byte *)(iVar24 + 0x142);
  param_1[0x55] = (ushort)*(byte *)(iVar24 + 0x152);
  param_1[0x56] = (ushort)*(byte *)(iVar24 + 0x162);
  param_1[0x57] = (ushort)*(byte *)(iVar24 + 0x172);
  param_1[0x58] = (ushort)*(byte *)(iVar24 + 0x182);
  param_1[0x59] = (ushort)*(byte *)(iVar24 + 0x192);
  param_1[0x5a] = (ushort)*(byte *)(iVar24 + 0x1a2);
  param_1[0x5b] = (ushort)*(byte *)(iVar24 + 0x1b2);
  param_1[0x5c] = (ushort)*(byte *)(iVar24 + 0x1c2);
  param_1[0x5d] = (ushort)*(byte *)(iVar24 + 0x1d2);
  param_1[0x5e] = (ushort)*(byte *)(iVar24 + 0x1e2);
  param_1[0x5f] = (ushort)*(byte *)(iVar24 + 0x1f2);
  param_1[0x60] = (ushort)*(byte *)(iVar24 + 0x202);
  param_1[0x61] = (ushort)*(byte *)(iVar24 + 0x212);
  param_1[0x62] = (ushort)*(byte *)(iVar24 + 0x232);
  param_1[99] = (ushort)*(byte *)(iVar24 + 0x242);
  param_1[100] = (ushort)*(byte *)(iVar24 + 0x252);
  param_1[0x65] = (ushort)*(byte *)(iVar24 + 0x262);
  param_1[0x66] = (ushort)*(byte *)(iVar24 + 0x272);
  param_1[0x67] = (ushort)*(byte *)(iVar24 + 0x282);
  param_1[0x68] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x104) >> 0x10);
  param_1[0x69] = (ushort)*(undefined4 *)(iVar24 + 0x104);
  param_1[0x6a] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x114) >> 0x10);
  param_1[0x6b] = (ushort)*(undefined4 *)(iVar24 + 0x114);
  param_1[0x6c] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x124) >> 0x10);
  param_1[0x6d] = (ushort)*(undefined4 *)(iVar24 + 0x124);
  param_1[0x6e] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x134) >> 0x10);
  param_1[0x6f] = (ushort)*(undefined4 *)(iVar24 + 0x134);
  param_1[0x70] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x144) >> 0x10);
  param_1[0x71] = (ushort)*(undefined4 *)(iVar24 + 0x144);
  param_1[0x72] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x154) >> 0x10);
  param_1[0x73] = (ushort)*(undefined4 *)(iVar24 + 0x154);
  param_1[0x74] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x164) >> 0x10);
  param_1[0x75] = (ushort)*(undefined4 *)(iVar24 + 0x164);
  param_1[0x76] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x174) >> 0x10);
  param_1[0x77] = (ushort)*(undefined4 *)(iVar24 + 0x174);
  param_1[0x78] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x184) >> 0x10);
  param_1[0x79] = (ushort)*(undefined4 *)(iVar24 + 0x184);
  param_1[0x7a] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x194) >> 0x10);
  param_1[0x7b] = (ushort)*(undefined4 *)(iVar24 + 0x194);
  param_1[0x7c] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x1a4) >> 0x10);
  param_1[0x7d] = (ushort)*(undefined4 *)(iVar24 + 0x1a4);
  param_1[0x7e] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x1b4) >> 0x10);
  param_1[0x7f] = (ushort)*(undefined4 *)(iVar24 + 0x1b4);
  param_1[0x80] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x1c4) >> 0x10);
  param_1[0x81] = (ushort)*(undefined4 *)(iVar24 + 0x1c4);
  param_1[0x82] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x1d4) >> 0x10);
  param_1[0x83] = (ushort)*(undefined4 *)(iVar24 + 0x1d4);
  param_1[0x84] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x1e4) >> 0x10);
  param_1[0x85] = (ushort)*(undefined4 *)(iVar24 + 0x1e4);
  param_1[0x86] = (ushort)((uint)*(undefined4 *)(iVar24 + 500) >> 0x10);
  param_1[0x87] = (ushort)*(undefined4 *)(iVar24 + 500);
  param_1[0x88] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x204) >> 0x10);
  param_1[0x89] = (ushort)*(undefined4 *)(iVar24 + 0x204);
  param_1[0x8a] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x214) >> 0x10);
  param_1[0x8b] = (ushort)*(undefined4 *)(iVar24 + 0x214);
  param_1[0x8c] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x234) >> 0x10);
  param_1[0x8d] = (ushort)*(undefined4 *)(iVar24 + 0x234);
  param_1[0x8e] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x244) >> 0x10);
  param_1[0x8f] = (ushort)*(undefined4 *)(iVar24 + 0x244);
  param_1[0x90] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x254) >> 0x10);
  param_1[0x91] = (ushort)*(undefined4 *)(iVar24 + 0x254);
  param_1[0x92] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x264) >> 0x10);
  param_1[0x93] = (ushort)*(undefined4 *)(iVar24 + 0x264);
  param_1[0x94] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x274) >> 0x10);
  param_1[0x95] = (ushort)*(undefined4 *)(iVar24 + 0x274);
  param_1[0x96] = (ushort)((uint)*(undefined4 *)(iVar24 + 0x284) >> 0x10);
  param_1[0x97] = (ushort)*(undefined4 *)(iVar24 + 0x284);
  do {
    sVar25 = sVar25 + -1;
    puVar28[1] = (ushort)pbVar15[1];
    pbVar15 = pbVar15 + 2;
    puVar28 = puVar28 + 2;
    *puVar28 = (ushort)*pbVar15;
  } while (sVar25 != 0);
  param_1[200] = (ushort)pbVar2[0x39];
  param_1[0xc9] = (ushort)pbVar2[0x38];
  param_1[0xca] = *(ushort *)PTR_DAT_80002030;
  param_1[0xcb] = *(ushort *)PTR_DAT_80002034;
  translate_parameter(0x15,0x18);
  iVar24 = DAT_8000203c;
  iVar21 = DAT_80002038;
  puVar7 = (undefined4 *)((int)param_1 + (500 - DAT_80002038));
  bVar32 = puVar7 == (undefined4 *)0x0;
  puVar16 = (undefined4 *)(DAT_8000203c >> 1);
  puVar20 = puVar7;
  if (0 < (int)puVar7) {
    puVar20 = (undefined4 *)((int)puVar16 - (int)puVar7);
    bVar32 = puVar16 == puVar7;
  }
  bVar33 = 0 < (int)puVar7 && SBORROW4((int)puVar16,(int)puVar7);
  if (!bVar32 && (int)puVar20 < 0 == bVar33) {
    puVar7 = (undefined4 *)0x0;
  }
  if (bVar32 || (int)puVar20 < 0 != bVar33) {
    FUN_80000730(param_1 + 500,DAT_80002038,DAT_8000203c);
  }
  else {
    do {
      puVar27 = (ushort *)(iVar21 + (int)puVar7 * 2);
      puVar22 = param_1 + (int)puVar7;
      puVar22[500] = *puVar27;
      puVar28 = (ushort *)((int)puVar7 + 2);
      puVar7 = (undefined4 *)((uint)puVar28 & 0xfffeffff);
      puVar22[0x1f5] = puVar27[1];
    } while (puVar7 < puVar16);
  }
  iVar21 = DAT_80002040;
  puVar7 = (undefined4 *)((int)param_1 + (2000 - DAT_80002040));
  bVar32 = puVar7 == (undefined4 *)0x0;
  puVar20 = puVar7;
  if (0 < (int)puVar7) {
    puVar20 = (undefined4 *)((int)puVar16 - (int)puVar7);
    bVar32 = puVar16 == puVar7;
  }
  bVar33 = 0 < (int)puVar7 && SBORROW4((int)puVar16,(int)puVar7);
  if (!bVar32 && (int)puVar20 < 0 == bVar33) {
    puVar7 = (undefined4 *)0x0;
  }
  if (bVar32 || (int)puVar20 < 0 != bVar33) {
    FUN_80000730(param_1 + 2000,DAT_80002040,iVar24);
  }
  else {
    do {
      puVar22 = (ushort *)(iVar21 + (int)puVar7 * 2);
      puVar27 = param_1 + (int)puVar7;
      puVar27[2000] = *puVar22;
      puVar28 = (ushort *)((int)puVar7 + 2);
      puVar7 = (undefined4 *)((uint)puVar28 & 0xfffeffff);
      puVar27[0x7d1] = puVar22[1];
    } while (puVar7 < puVar16);
  }
  uVar3 = DAT_80002048;
  iVar21 = DAT_80002044;
  uVar8 = (int)param_1 + (0xdac - DAT_80002044);
  bVar32 = uVar8 == 0;
  uVar17 = uVar8;
  if (0 < (int)uVar8) {
    uVar17 = DAT_80002048 - uVar8;
    bVar32 = DAT_80002048 == uVar8;
  }
  bVar33 = 0 < (int)uVar8 && SBORROW4(DAT_80002048,uVar8);
  if (!bVar32 && (int)uVar17 < 0 == bVar33) {
    uVar8 = 0;
  }
  if (bVar32 || (int)uVar17 < 0 != bVar33) {
    FUN_80000730(param_1 + 0xdac,DAT_80002044,puVar16);
  }
  else {
    do {
      puVar22 = (ushort *)(iVar21 + uVar8 * 2);
      puVar27 = param_1 + uVar8;
      puVar27[0xdac] = *puVar22;
      puVar28 = (ushort *)(uVar8 + 2);
      uVar8 = (uint)puVar28 & 0xfffeffff;
      puVar27[0xdad] = puVar22[1];
    } while (uVar8 < uVar3);
  }
  puVar20 = DAT_8000204c;
  uVar8 = (int)param_1 + (0x109a - (int)DAT_8000204c);
  bVar32 = uVar8 == 0;
  uVar17 = uVar8;
  if (0 < (int)uVar8) {
    uVar17 = uVar3 - uVar8;
    bVar32 = uVar3 == uVar8;
  }
  bVar33 = 0 < (int)uVar8 && SBORROW4(uVar3,uVar8);
  if (!bVar32 && (int)uVar17 < 0 == bVar33) {
    uVar8 = 0;
  }
  if (!bVar32 && (int)uVar17 < 0 == bVar33) {
    do {
      puVar16 = (undefined4 *)((int)puVar20 + uVar8 * 2);
      puVar28 = param_1 + uVar8;
      puVar28[0x109a] = *(ushort *)puVar16;
      uVar17 = uVar8 + 2;
      uVar8 = uVar17 & 0xfffeffff;
      puVar28[0x109b] = *(ushort *)((int)puVar16 + 2);
    } while (uVar8 < uVar3);
    return CONCAT44(puVar20,uVar17) & 0xfffffffffffeffff;
  }
  puVar7 = (undefined4 *)(param_1 + 0x109a);
  puVar20 = (undefined4 *)((int)puVar7 - (int)DAT_8000204c);
  bVar32 = puVar20 == (undefined4 *)0x0;
  if (DAT_8000204c <= puVar7) {
    bVar32 = puVar16 == puVar20;
  }
  if ((DAT_8000204c > puVar7 || puVar16 < puVar20) || bVar32) {
    puVar9 = DAT_8000204c;
    if ((undefined4 *)0x3 < puVar16) {
      puVar27 = (ushort *)((uint)puVar7 & 3);
      puVar28 = puVar27;
      if (puVar27 != (ushort *)0x0) {
        uVar18 = *(undefined *)DAT_8000204c;
        puVar20 = (undefined4 *)((int)DAT_8000204c + 1);
        if (puVar27 < (ushort *)0x3) {
          puVar20 = (undefined4 *)((int)DAT_8000204c + 2);
          puVar28 = (ushort *)(uint)*(byte *)(undefined4 *)((int)DAT_8000204c + 1);
        }
        *(undefined *)puVar7 = uVar18;
        puVar9 = puVar20;
        if (puVar27 < (ushort *)0x2) {
          puVar9 = (undefined4 *)((int)puVar20 + 1);
          uVar18 = *(undefined *)puVar20;
        }
        puVar20 = (undefined4 *)((int)param_1 + 0x2135);
        if (puVar27 < (ushort *)0x3) {
          puVar20 = (undefined4 *)(param_1 + 0x109b);
          *(char *)(undefined4 *)((int)param_1 + 0x2135) = (char)puVar28;
        }
        puVar16 = (undefined4 *)((int)puVar16 + (int)puVar27 + -4);
        puVar7 = puVar20;
        if (puVar27 < (ushort *)0x2) {
          puVar7 = (undefined4 *)((int)puVar20 + 1);
          *(undefined *)puVar20 = uVar18;
        }
      }
      puVar20 = (undefined4 *)((uint)puVar9 & 3);
      if (puVar20 == (undefined4 *)0x0) {
        while (puVar1 = puVar16 + -8, (undefined4 *)0x1f < puVar16) {
          uVar23 = puVar9[1];
          uVar29 = puVar9[2];
          uVar31 = puVar9[3];
          *puVar7 = *puVar9;
          puVar7[1] = uVar23;
          puVar7[2] = uVar29;
          puVar7[3] = uVar31;
          puVar20 = (undefined4 *)puVar9[4];
          uVar23 = puVar9[5];
          uVar29 = puVar9[6];
          uVar31 = puVar9[7];
          puVar9 = puVar9 + 8;
          puVar7[4] = puVar20;
          puVar7[5] = uVar23;
          puVar7[6] = uVar29;
          puVar7[7] = uVar31;
          puVar7 = puVar7 + 8;
          puVar16 = puVar1;
        }
        if ((bool)((byte)((uint)puVar1 >> 4) & 1)) {
          puVar20 = (undefined4 *)*puVar9;
          uVar23 = puVar9[1];
          uVar29 = puVar9[2];
          uVar31 = puVar9[3];
          puVar9 = puVar9 + 4;
          *puVar7 = puVar20;
          puVar7[1] = uVar23;
          puVar7[2] = uVar29;
          puVar7[3] = uVar31;
          puVar7 = puVar7 + 4;
        }
        if ((int)puVar16 << 0x1c < 0) {
          puVar20 = (undefined4 *)*puVar9;
          uVar23 = puVar9[1];
          puVar9 = puVar9 + 2;
          *puVar7 = puVar20;
          puVar7[1] = uVar23;
          puVar7 = puVar7 + 2;
        }
        puVar6 = puVar7;
        puVar14 = puVar9;
        if ((bool)((byte)((uint)puVar1 >> 2) & 1)) {
          puVar14 = puVar9 + 1;
          puVar20 = (undefined4 *)*puVar9;
          puVar6 = puVar7 + 1;
          *puVar7 = puVar20;
        }
        uVar19 = SUB42(puVar20,0);
        if (((uint)puVar1 & 3) == 0) {
          return CONCAT44(puVar14,puVar6);
        }
        bVar33 = (bool)((byte)((uint)puVar1 >> 1) & 1);
        uVar17 = (int)puVar16 << 0x1f;
        bVar32 = (int)uVar17 < 0;
        puVar16 = puVar14;
        if (bVar33) {
          puVar16 = (undefined4 *)((int)puVar14 + 2);
          uVar19 = *(undefined2 *)puVar14;
        }
        puVar20 = puVar16;
        if (bVar32) {
          puVar20 = (undefined4 *)((int)puVar16 + 1);
          uVar17 = (uint)*(byte *)puVar16;
        }
        puVar16 = puVar6;
        if (bVar33) {
          puVar16 = (undefined4 *)((int)puVar6 + 2);
          *(undefined2 *)puVar6 = uVar19;
        }
        puVar7 = puVar16;
        if (bVar32) {
          puVar7 = (undefined4 *)((int)puVar16 + 1);
          *(char *)puVar16 = (char)uVar17;
        }
        return CONCAT44(puVar20,puVar7);
      }
      bVar32 = (undefined4 *)0x3 < puVar16;
      puVar16 = puVar16 + -1;
      if (bVar32) {
        ppuVar12 = (ushort **)((int)puVar9 - (int)puVar20);
        puVar28 = *ppuVar12;
        puVar9 = puVar7;
        if (puVar20 == (undefined4 *)0x2) {
          do {
            ppuVar13 = ppuVar12;
            uVar17 = (uint)puVar28 >> 0x10;
            ppuVar12 = ppuVar13 + 1;
            puVar28 = *ppuVar12;
            bVar32 = (undefined4 *)0x3 < puVar16;
            puVar16 = puVar16 + -1;
            puVar20 = (undefined4 *)(uVar17 | (int)puVar28 << 0x10);
            puVar7 = puVar9 + 1;
            *puVar9 = puVar20;
            puVar9 = puVar7;
          } while (bVar32);
          puVar9 = (undefined4 *)((int)ppuVar13 + 6);
        }
        else {
          if (puVar20 < (undefined4 *)0x3) {
            do {
              ppuVar13 = ppuVar12;
              uVar17 = (uint)puVar28 >> 8;
              ppuVar12 = ppuVar13 + 1;
              puVar28 = *ppuVar12;
              bVar32 = (undefined4 *)0x3 < puVar16;
              puVar16 = puVar16 + -1;
              puVar20 = (undefined4 *)(uVar17 | (int)puVar28 << 0x18);
              puVar7 = puVar9 + 1;
              *puVar9 = puVar20;
              puVar9 = puVar7;
            } while (bVar32);
            puVar9 = (undefined4 *)((int)ppuVar13 + 5);
          }
          else {
            do {
              ppuVar13 = ppuVar12;
              uVar17 = (uint)puVar28 >> 0x18;
              ppuVar12 = ppuVar13 + 1;
              puVar28 = *ppuVar12;
              bVar32 = (undefined4 *)0x3 < puVar16;
              puVar16 = puVar16 + -1;
              puVar20 = (undefined4 *)(uVar17 | (int)puVar28 << 8);
              puVar7 = puVar9 + 1;
              *puVar9 = puVar20;
              puVar9 = puVar7;
            } while (bVar32);
            puVar9 = (undefined4 *)((int)ppuVar13 + 7);
          }
        }
      }
    }
    uVar26 = SUB41(puVar28,0);
    uVar18 = SUB41(puVar20,0);
    bVar33 = (bool)((byte)((uint)puVar16 >> 1) & 1);
    uVar17 = (int)puVar16 << 0x1f;
    bVar32 = (int)uVar17 < 0;
    if (bVar33) {
      puVar10 = (undefined *)((int)puVar9 + 1);
      uVar18 = *(undefined *)puVar9;
      puVar9 = (undefined4 *)((int)puVar9 + 2);
      uVar26 = *puVar10;
    }
    puVar16 = puVar9;
    if (bVar32) {
      puVar16 = (undefined4 *)((int)puVar9 + 1);
      uVar17 = (uint)*(byte *)puVar9;
    }
    if (bVar33) {
      puVar10 = (undefined *)((int)puVar7 + 1);
      *(undefined *)puVar7 = uVar18;
      puVar7 = (undefined4 *)((int)puVar7 + 2);
      *puVar10 = uVar26;
    }
    puVar20 = puVar7;
    if (bVar32) {
      puVar20 = (undefined4 *)((int)puVar7 + 1);
      *(char *)puVar7 = (char)uVar17;
    }
    return CONCAT44(puVar16,puVar20);
  }
  piVar5 = (int *)((int)puVar7 + (int)puVar16);
  piVar11 = (int *)((int)DAT_8000204c + (int)puVar16);
  if ((undefined4 *)0x3 < puVar16) {
    bVar32 = ((uint)piVar5 & 3) == 0;
    do {
      if (!bVar32) {
        piVar11 = (int *)((int)piVar11 + -1);
        puVar16 = (undefined4 *)((int)puVar16 - 1);
        piVar5 = (int *)((int)piVar5 + -1);
        *(undefined *)piVar5 = *(undefined *)piVar11;
      }
      bVar32 = ((uint)piVar5 & 3) == 0;
    } while (!bVar32);
    puVar20 = (undefined4 *)((uint)piVar11 & 3);
    if (puVar20 == (undefined4 *)0x0) {
      while (puVar20 = puVar16 + -4, (undefined4 *)0xf < puVar16) {
        piVar34 = piVar11 + -1;
        iVar30 = piVar11[-2];
        iVar24 = piVar11[-3];
        piVar11 = piVar11 + -4;
        iVar21 = *piVar11;
        piVar5[-1] = *piVar34;
        piVar5[-2] = iVar30;
        piVar5[-3] = iVar24;
        piVar5 = piVar5 + -4;
        *piVar5 = iVar21;
        puVar16 = puVar20;
      }
      iVar21 = (int)puVar16 << 0x1d;
      bVar32 = iVar21 < 0;
      if ((bool)((byte)((uint)puVar20 >> 3) & 1)) {
        piVar34 = piVar11 + -1;
        piVar11 = piVar11 + -2;
        iVar21 = *piVar11;
        piVar5[-1] = *piVar34;
        piVar5 = piVar5 + -2;
        *piVar5 = iVar21;
      }
      if (bVar32) {
        piVar11 = piVar11 + -1;
        iVar21 = *piVar11;
        piVar5 = piVar5 + -1;
        *piVar5 = iVar21;
      }
      uVar19 = (undefined2)iVar21;
      if (((uint)puVar20 & 3) == 0) {
        return CONCAT44(piVar11,piVar5);
      }
      bVar33 = (bool)((byte)((uint)puVar20 >> 1) & 1);
      uVar17 = (int)puVar16 << 0x1f;
      bVar32 = (int)uVar17 < 0;
      if (bVar33) {
        piVar11 = (int *)((int)piVar11 + -2);
        uVar19 = *(undefined2 *)piVar11;
      }
      if (bVar32) {
        uVar17 = (uint)*(byte *)((int)piVar11 + -1);
      }
      if (bVar33) {
        piVar5 = (int *)((int)piVar5 + -2);
        *(undefined2 *)piVar5 = uVar19;
      }
      if (bVar32) {
        *(char *)((int)piVar5 + -1) = (char)uVar17;
      }
      return CONCAT44(piVar11,piVar5);
    }
    bVar32 = (undefined4 *)0x3 < puVar16;
    puVar16 = puVar16 + -1;
    if (bVar32) {
      ppuVar12 = (ushort **)((int)piVar11 - (int)puVar20);
      puVar28 = *ppuVar12;
      if (puVar20 < (undefined4 *)0x2) {
        do {
          ppuVar13 = ppuVar12;
          uVar17 = (int)puVar28 << 0x18;
          ppuVar12 = ppuVar13 + -1;
          puVar28 = *ppuVar12;
          bVar32 = (undefined4 *)0x3 < puVar16;
          puVar16 = puVar16 + -1;
          puVar20 = (undefined4 *)(uVar17 | (uint)puVar28 >> 8);
          piVar5 = piVar5 + -1;
          *piVar5 = (int)puVar20;
        } while (bVar32);
        piVar11 = (int *)((int)ppuVar13 + -3);
      }
      else {
        if (puVar20 < (undefined4 *)0x3) {
          do {
            ppuVar13 = ppuVar12;
            uVar17 = (int)puVar28 << 0x10;
            ppuVar12 = ppuVar13 + -1;
            puVar28 = *ppuVar12;
            bVar32 = (undefined4 *)0x3 < puVar16;
            puVar16 = puVar16 + -1;
            puVar20 = (undefined4 *)(uVar17 | (uint)puVar28 >> 0x10);
            piVar5 = piVar5 + -1;
            *piVar5 = (int)puVar20;
          } while (bVar32);
          piVar11 = (int *)((int)ppuVar13 + -2);
        }
        else {
          do {
            ppuVar13 = ppuVar12;
            uVar17 = (int)puVar28 << 8;
            ppuVar12 = ppuVar13 + -1;
            puVar28 = *ppuVar12;
            bVar32 = (undefined4 *)0x3 < puVar16;
            puVar16 = puVar16 + -1;
            puVar20 = (undefined4 *)(uVar17 | (uint)puVar28 >> 0x18);
            piVar5 = piVar5 + -1;
            *piVar5 = (int)puVar20;
          } while (bVar32);
          piVar11 = (int *)((int)ppuVar13 + -1);
        }
      }
    }
  }
  uVar26 = SUB41(puVar28,0);
  uVar18 = SUB41(puVar20,0);
  bVar33 = (bool)((byte)((uint)puVar16 >> 1) & 1);
  uVar17 = (int)puVar16 << 0x1f;
  bVar32 = (int)uVar17 < 0;
  if (bVar33) {
    uVar18 = *(undefined *)((int)piVar11 + -1);
    piVar11 = (int *)((int)piVar11 + -2);
    uVar26 = *(undefined *)piVar11;
  }
  if (bVar32) {
    uVar17 = (uint)*(byte *)((int)piVar11 + -1);
  }
  if (bVar33) {
    *(undefined *)((int)piVar5 + -1) = uVar18;
    piVar5 = (int *)((int)piVar5 + -2);
    *(undefined *)piVar5 = uVar26;
  }
  if (bVar32) {
    *(char *)((int)piVar5 + -1) = (char)uVar17;
  }
  return CONCAT44(piVar11,piVar5);
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Could not reconcile some variable overlaps
// WARNING: Restarted to delay deadcode elimination for space: stack
// WARNING: Unknown calling convention yet parameter storage is locked

void perform_auto_set(void)

{
  char *pcVar1;
  char cVar2;
  bool bVar3;
  int iVar4;
  uint uVar5;
  uchar uVar6;
  char cVar7;
  undefined2 uVar8;
  short sVar9;
  ushort uVar10;
  int iVar11;
  int iVar12;
  uint uVar13;
  char *pcVar14;
  uint uVar15;
  char *pcVar16;
  uint uVar17;
  uint uVar18;
  uint uVar19;
  ushort *puVar20;
  bool bVar21;
  bool bVar22;
  bool bVar23;
  bool bVar24;
  uint local_50;
  uint local_4c;
  uint local_48;
  uint local_40;
  uint local_34;
  uint local_30;
  
  pcVar16 = DAT_80002758;
  DAT_80002758[0x3a] = '\0';
  *(undefined2 *)(pcVar16 + 6) = 200;
  *(undefined2 *)(pcVar16 + 0x12) = 200;
  *(undefined2 *)(pcVar16 + 0x24) = 0x16a;
  *(undefined2 *)PTR_DAT_8000275c = 0;
  *(undefined2 *)PTR_DAT_80002760 = 400;
  *(undefined2 *)PTR_DAT_80002764 = 0;
  *(undefined2 *)PTR_DAT_80002768 = 400;
  pcVar16[0x21] = '\0';
  bVar23 = false;
  bVar3 = false;
  local_30 = 6;
  local_34 = 6;
  set_fpga_channel1_offset();
  set_fpga_channel2_offset();
  set_fpga_trigger_mode();
  display_trigger_settings(0);
  set_fpga_channel_trigger_channel();
  display_run_stop_text(0);
  pcVar16[10] = '\x10';
  set_fpga_trigger_timebase();
  FUN_800012b8();
  iVar4 = DAT_8000276c;
  uVar19 = 0;
  do {
    cVar7 = (char)uVar19;
    pcVar16[3] = cVar7;
    pcVar16[0xf] = cVar7;
    fpga_write_cmd('3');
    if (pcVar16[3] == '\x06') {
      uVar6 = '\x05';
    }
    else {
      uVar6 = pcVar16[3];
    }
    fpga_write_data(uVar6);
    fpga_write_cmd('6');
    if (pcVar16[0xf] == '\x06') {
      uVar6 = '\x05';
    }
    else {
      uVar6 = pcVar16[0xf];
    }
    fpga_write_data(uVar6);
    set_fpga_channel1_offset();
    set_fpga_channel2_offset();
    delay_2(0x3c);
    iVar12 = DAT_80002770;
    uVar18 = 0;
    do {
      iVar11 = (uVar18 * 0x14 & 0xffe0ffff) - 1;
      do {
        bVar24 = SCARRY4(iVar11,1);
        bVar21 = iVar11 + 1 < 0;
        bVar22 = iVar11 != -1;
        if (bVar22 && bVar21 == bVar24) {
          iVar11 = iVar11 + -1;
        }
      } while (bVar22 && bVar21 == bVar24);
      uVar8 = FUN_8001b058(1);
      *(undefined2 *)(iVar12 + uVar18 * 2) = uVar8;
      uVar8 = FUN_8001b260(1);
      iVar11 = uVar18 * 2;
      uVar18 = uVar18 + 1 & 0xfffeffff;
      *(undefined2 *)(iVar4 + iVar11) = uVar8;
      uVar5 = DAT_80002774;
    } while (uVar18 < 1000);
    uVar18 = 0;
    if ((*pcVar16 != '\0') && (!bVar23)) {
      FUN_800060a8();
      FUN_800061a4();
      FUN_80003dc0();
      FUN_80006170();
      iVar12 = 0x3d4;
      puVar20 = DAT_80002778;
      uVar13 = uVar5;
      do {
        uVar17 = (uint)*puVar20;
        puVar20 = puVar20 + 1;
        if (uVar18 < uVar17) {
          uVar18 = uVar17;
        }
        if (uVar17 < uVar13) {
          uVar13 = uVar17;
        }
        iVar12 = iVar12 + -1;
      } while (iVar12 != 0);
      local_4c = uVar18 - uVar13 & 0xffff;
      local_48 = uVar18 + uVar13 >> 1;
      if (pcVar16[0xc] == '\0') {
        uVar17 = 0x6e;
      }
      else {
        uVar17 = 0x46;
      }
      if (uVar18 < 0x12d) {
        if (uVar13 < 100) {
          cVar2 = pcVar16[0xc];
        }
        else {
          if (local_4c <= uVar17) goto LAB_80002288;
          cVar2 = pcVar16[0xc];
        }
      }
      else {
        cVar2 = pcVar16[0xc];
      }
      bVar23 = true;
      local_30 = uVar19 & 0xff;
      local_30._0_1_ = cVar7;
      if (cVar2 == '\0') break;
    }
LAB_80002288:
    uVar18 = 0;
    if ((pcVar16[0xc] != '\0') && (!bVar3)) {
      FUN_80008e04();
      FUN_80008f00();
      FUN_80006be0();
      FUN_80008ecc();
      iVar12 = 0x3d4;
      puVar20 = DAT_8000277c;
      uVar13 = uVar5;
      do {
        uVar17 = (uint)*puVar20;
        puVar20 = puVar20 + 1;
        if (uVar18 < uVar17) {
          uVar18 = uVar17;
        }
        if (uVar17 < uVar13) {
          uVar13 = uVar17;
        }
        iVar12 = iVar12 + -1;
      } while (iVar12 != 0);
      local_40 = uVar18 - uVar13 & 0xffff;
      local_50 = uVar18 + uVar13 >> 1;
      if (*pcVar16 == '\0') {
        uVar17 = 0x6e;
      }
      else {
        uVar17 = 0x46;
      }
      if (uVar18 < 0x12d) {
        if (uVar13 < 100) {
          cVar2 = *pcVar16;
        }
        else {
          if (local_40 <= uVar17) goto LAB_80002374;
          cVar2 = *pcVar16;
        }
      }
      else {
        cVar2 = *pcVar16;
      }
      bVar3 = true;
      local_34 = uVar19 & 0xff;
      local_34._0_1_ = cVar7;
      if (cVar2 == '\0') break;
    }
LAB_80002374:
    if ((bVar23 && bVar3) || (uVar19 = uVar19 + 1 & 0xfffeffff, 6 < uVar19)) break;
  } while( true );
  uVar19 = DAT_80002780;
  cVar7 = *pcVar16;
  bVar21 = cVar7 != '\0';
  if (bVar21) {
    cVar7 = pcVar16[0xc];
  }
  if (bVar21 && cVar7 != '\0') {
    uVar13 = 100;
    uVar18 = 300;
  }
  else {
    uVar13 = 200;
    uVar18 = uVar13;
  }
  if (*pcVar16 == '\0') {
    uVar18 = 0;
    local_4c = 0;
  }
  uVar8 = (undefined2)DAT_80002780;
  if (*pcVar16 != '\0') {
    if (local_48 < uVar18) {
      *(short *)(pcVar16 + 6) = ((short)uVar18 - (short)local_48) + *(short *)(pcVar16 + 6);
      if (uVar19 < *(ushort *)(pcVar16 + 6)) {
        *(undefined2 *)(pcVar16 + 6) = uVar8;
      }
    }
    else {
      pcVar1 = (char *)(local_48 - uVar18 & 0xffff);
      pcVar14 = pcVar1;
      if ((char *)(uint)*(ushort *)(pcVar16 + 6) < pcVar1) {
        pcVar14 = pcVar16;
      }
      sVar9 = (short)pcVar14;
      if ((char *)(uint)*(ushort *)(pcVar16 + 6) < pcVar1) {
        sVar9 = *(short *)(pcVar16 + 6);
      }
      *(short *)(pcVar16 + 6) = *(short *)(pcVar16 + 6) - sVar9;
    }
  }
  uVar18 = (uint)(byte)pcVar16[0xc];
  if ((byte)pcVar16[0xc] != 0) {
    uVar18 = local_40;
    if (local_50 < uVar13) {
      *(short *)(pcVar16 + 0x12) = ((short)uVar13 - (short)local_50) + *(short *)(pcVar16 + 0x12);
      if (uVar19 < *(ushort *)(pcVar16 + 0x12)) {
        *(undefined2 *)(pcVar16 + 0x12) = uVar8;
      }
    }
    else {
      pcVar1 = (char *)(local_50 - uVar13 & 0xffff);
      pcVar14 = pcVar1;
      if ((char *)(uint)*(ushort *)(pcVar16 + 0x12) < pcVar1) {
        pcVar14 = pcVar16;
      }
      sVar9 = (short)pcVar14;
      if ((char *)(uint)*(ushort *)(pcVar16 + 0x12) < pcVar1) {
        sVar9 = *(short *)(pcVar16 + 0x12);
      }
      *(short *)(pcVar16 + 0x12) = *(short *)(pcVar16 + 0x12) - sVar9;
    }
  }
  local_40 = uVar18;
  if (*pcVar16 == '\0') {
    pcVar16[3] = '\0';
    fpga_write_cmd('3');
    cVar7 = pcVar16[3];
  }
  else {
    pcVar16[3] = (char)local_30;
    fpga_write_cmd('3');
    cVar7 = pcVar16[3];
  }
  if (cVar7 == '\x06') {
    uVar6 = '\x05';
  }
  else {
    uVar6 = pcVar16[3];
  }
  fpga_write_data(uVar6);
  set_fpga_channel1_offset();
  if (pcVar16[0xc] == '\0') {
    pcVar16[0xf] = '\0';
    fpga_write_cmd('6');
    cVar7 = pcVar16[0xf];
  }
  else {
    pcVar16[0xf] = (char)local_34;
    fpga_write_cmd('6');
    cVar7 = pcVar16[0xf];
  }
  if (cVar7 == '\x06') {
    uVar6 = '\x05';
  }
  else {
    uVar6 = pcVar16[0xf];
  }
  fpga_write_data(uVar6);
  set_fpga_channel2_offset();
  delay_2(0x32);
  if (pcVar16[0x23] == '\0') {
    uVar8 = 300;
  }
  else {
    uVar8 = 100;
  }
  *(undefined2 *)(pcVar16 + 0x26) = uVar8;
  if (*pcVar16 != pcVar16[0xc]) {
    *(undefined2 *)(pcVar16 + 0x26) = 200;
  }
  set_fpga_trigger_level();
  bVar21 = 0x18 < local_4c;
  if (!bVar21) {
    local_4c = local_40;
  }
  if (bVar21 || 0x18 < local_4c) {
    display_ch1_settings(0);
    display_ch2_settings(0);
    uVar10 = 0x1d;
    pcVar16[0x48] = '\x01';
    iVar4 = DAT_80002784;
    do {
      pcVar16[10] = (char)uVar10;
      set_fpga_trigger_timebase();
      FUN_80025468();
      if (pcVar16[0x23] == '\0') {
        FUN_800049a0();
        iVar12 = DAT_8000278c;
      }
      else {
        FUN_80007714();
        iVar12 = DAT_80002788;
      }
      uVar13 = 0;
      puVar20 = (ushort *)(iVar12 + 0x14);
      uVar18 = 0;
      uVar19 = uVar5;
      iVar11 = iVar4;
      do {
        uVar17 = (uint)*puVar20;
        puVar20 = puVar20 + 1;
        if (uVar18 < uVar17) {
          uVar18 = uVar17;
        }
        if (uVar17 < uVar19) {
          uVar19 = uVar17;
        }
        iVar11 = iVar11 + -1;
      } while (iVar11 != 0);
      uVar15 = 10;
      uVar17 = uVar18 - uVar19 & 0xffff;
      *(short *)(pcVar16 + 0x26) = (short)(uVar18 + uVar19 >> 1);
      do {
        iVar11 = iVar12 + uVar15 * 2;
        if (((*(ushort *)(iVar11 + -2) < *(ushort *)(pcVar16 + 0x26)) &&
            (*(ushort *)(pcVar16 + 0x26) < *(ushort *)(iVar11 + 2))) ||
           ((*(ushort *)(pcVar16 + 0x26) < *(ushort *)(iVar11 + -2) &&
            (*(ushort *)(iVar11 + 2) < *(ushort *)(pcVar16 + 0x26))))) {
          uVar13 = uVar13 + 1 & 0xfffeffff;
          uVar15 = uVar15 + 10 & 0xfffeffff;
        }
        uVar15 = uVar15 + 1 & 0xfffeffff;
      } while (uVar15 < 0x2e4);
      bVar23 = uVar13 == 7;
      if (6 < uVar13) {
        bVar23 = uVar17 == 0x28;
      }
    } while (((6 >= uVar13 || uVar17 < 0x28) || bVar23) && (uVar10 = uVar10 - 1, 8 < uVar10));
    pcVar16[0x48] = '\0';
    set_fpga_trigger_level();
    set_fpga_trigger_timebase();
  }
  else {
    pcVar16[0x48] = '\0';
    pcVar16[10] = '\x13';
    if (!bVar23) {
      pcVar16[3] = '\0';
      fpga_write_cmd('3');
      if (pcVar16[3] == '\x06') {
        uVar6 = '\x05';
      }
      else {
        uVar6 = pcVar16[3];
      }
      fpga_write_data(uVar6);
    }
    if (!bVar3) {
      pcVar16[0xf] = '\0';
      fpga_write_cmd('6');
      if (pcVar16[0xf] == '\x06') {
        uVar6 = '\x05';
      }
      else {
        uVar6 = pcVar16[0xf];
      }
      fpga_write_data(uVar6);
    }
    set_fpga_channel1_offset();
    set_fpga_channel2_offset();
    set_fpga_trigger_level();
    set_fpga_trigger_timebase();
  }
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(0x18b,5,0x1e8,0x2c);
  set_display_fg_color(0xffffff);
  select_font(PTR_FONT_0_800124d0);
  switch(*(undefined *)(DAT_800124d4 + 10)) {
  case 0:
    pcVar16 = s_50S_div_800124dc;
    break;
  case 1:
    pcVar16 = s_20S_div_800124e4;
    break;
  case 2:
    pcVar16 = s_10S_div_800124ec;
    break;
  case 3:
    pcVar16 = s_5S_div_800124f4;
    break;
  case 4:
    pcVar16 = s_2S_div_800124fc;
    break;
  case 5:
    pcVar16 = s_1S_div_80012504;
    break;
  case 6:
    pcVar16 = s_500mS_div_8001250c;
    break;
  case 7:
    pcVar16 = s_200mS_div_80012518;
    break;
  case 8:
    pcVar16 = s_100mS_div_80012524;
    break;
  case 9:
    pcVar16 = s_50mS_div_80012530;
    break;
  case 10:
    pcVar16 = s_20mS_div_8001253c;
    break;
  case 0xb:
    pcVar16 = s_10mS_div_80012548;
    break;
  case 0xc:
    pcVar16 = s_5mS_div_80012554;
    break;
  case 0xd:
    pcVar16 = s_2mS_div_8001255c;
    break;
  case 0xe:
    pcVar16 = s_1mS_div_80012564;
    break;
  case 0xf:
    pcVar16 = s_500uS_div_8001256c;
    break;
  case 0x10:
    pcVar16 = s_200uS_div_80012578;
    break;
  case 0x11:
    pcVar16 = s_100uS_div_80012584;
    break;
  case 0x12:
    pcVar16 = s_50uS_div_80012590;
    break;
  case 0x13:
    pcVar16 = s_20uS_div_8001259c;
    break;
  case 0x14:
    pcVar16 = s_10uS_div_800125a8;
    break;
  case 0x15:
    pcVar16 = s_5uS_div_800125b4;
    break;
  case 0x16:
    pcVar16 = s_2uS_div_800125bc;
    break;
  case 0x17:
    pcVar16 = s_1uS_div_800125c4;
    break;
  case 0x18:
    pcVar16 = s_500nS_div_800125cc;
    break;
  case 0x19:
    pcVar16 = s_250nS_div_80012640;
    break;
  case 0x1a:
    pcVar16 = s_100nS_div_8001264c;
    break;
  case 0x1b:
    pcVar16 = s_50nS_div_80012658;
    break;
  case 0x1c:
    pcVar16 = s_25nS_div_80012664;
    break;
  case 0x1d:
    pcVar16 = s_10nS_div_80012670;
    break;
  default:
    goto switchD_800122c0_caseD_1e;
  }
  display_text(pcVar16,(ushort)DAT_800124d8,0x10);
switchD_800122c0_caseD_1e:
  iVar12 = Start_Of_Screen_Mem;
  iVar4 = Screen_Frame_Buffer;
  uVar19 = 5;
  do {
    iVar11 = uVar19 * 800 + 0x17c;
    copy_short((void *)(iVar12 + iVar11 * 2),(void *)(iVar4 + iVar11 * 2),0x5f);
    uVar19 = uVar19 + 1;
  } while (uVar19 < 0x2a);
  return;
}



//                      FUNCTION
// called on channel disable to switch to the other channel

void set_fpga_channel_trigger_channel(void)

{
  byte bVar1;
  char *pcVar2;
  uint *ptr;
  
  pcVar2 = DAT_8000280c;
  if ((*DAT_8000280c == '\0') || (DAT_8000280c[0xc] != '\0')) {
    if (DAT_8000280c[0xc] == '\0') {
      return;
    }
    if (*DAT_8000280c != '\0') {
      return;
    }
    DAT_8000280c[0x23] = '\x01';
    display_trigger_settings(0);
    fpga_write_cmd('\x15');
    bVar1 = pcVar2[0x23];
  }
  else {
    DAT_8000280c[0x23] = '\0';
    display_trigger_settings(0);
    fpga_write_cmd('\x15');
    bVar1 = pcVar2[0x23];
  }
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = (uint)bVar1 | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void FUN_80002810(undefined4 param_1)

{
  undefined *puVar1;
  int *piVar2;
  undefined4 uVar3;
  uint uVar4;
  int iVar5;
  undefined auStack584 [552];
  
  puVar1 = DAT_80002adc;
  *DAT_80002adc = 0x42;
  puVar1[1] = 0x4d;
  puVar1[2] = 0xf8;
  puVar1[3] = 0x5f;
  puVar1[4] = 0xc;
  puVar1[5] = 0;
  puVar1[6] = 0;
  puVar1[7] = 0;
  puVar1[8] = 0;
  uVar4 = DAT_80002ae0;
  puVar1[9] = 0;
  uVar4 = translate_parameter(0xf,uVar4);
  if (uVar4 == 0) {
    uVar4 = DAT_80002ae4;
  }
  puVar1[0xd] = (char)(uVar4 >> 0x18);
  puVar1[0xc] = (char)(uVar4 >> 0x10);
  puVar1[0xb] = (char)(uVar4 >> 8);
  puVar1[10] = (char)uVar4;
  puVar1[0xe] = 0x28;
  puVar1[0xf] = 0;
  puVar1[0x10] = 0;
  puVar1[0x11] = 0;
  puVar1[0x12] = 0x20;
  puVar1[0x13] = 3;
  puVar1[0x14] = 0;
  puVar1[0x15] = 0;
  puVar1[0x16] = 0xe0;
  puVar1[0x17] = 1;
  puVar1[0x18] = 0;
  puVar1[0x19] = 0;
  puVar1[0x1a] = 1;
  puVar1[0x1b] = 0;
  puVar1[0x1c] = 0x10;
  puVar1[0x1d] = 0;
  puVar1[0x1e] = 3;
  puVar1[0x1f] = 0;
  puVar1[0x20] = 0;
  puVar1[0x21] = 0;
  puVar1[0x22] = 0;
  puVar1[0x23] = 0xb8;
  puVar1[0x24] = 0xb;
  puVar1[0x25] = 0;
  puVar1[0x26] = 0;
  puVar1[0x27] = 0;
  puVar1[0x28] = 0;
  puVar1[0x29] = 0;
  puVar1[0x2a] = 0;
  puVar1[0x2b] = 0;
  puVar1[0x2c] = 0;
  puVar1[0x2d] = 0;
  puVar1[0x2e] = 0;
  puVar1[0x2f] = 0;
  puVar1[0x30] = 0;
  puVar1[0x31] = 0;
  puVar1[0x32] = 0;
  puVar1[0x33] = 0;
  puVar1[0x34] = 0;
  puVar1[0x35] = 0;
  puVar1[0x36] = 0;
  puVar1[0x37] = 0xf8;
  puVar1[0x38] = 0;
  puVar1[0x39] = 0;
  puVar1[0x3a] = 0xe0;
  puVar1[0x3b] = 7;
  puVar1[0x3c] = 0;
  puVar1[0x3d] = 0;
  puVar1[0x3e] = 0x1f;
  puVar1[0x3f] = 0;
  puVar1[0x40] = 0;
  puVar1[0x41] = 0;
  puVar1[0x42] = 0;
  puVar1[0x43] = 0;
  puVar1[0x44] = 0;
  puVar1[0x45] = 0;
  FUN_800019fc(DAT_80002ae8);
  memcpy(puVar1 + 0x46,DAT_80002ae8,DAT_80002aec);
  set_screen_to_global_pointer();
  piVar2 = Global_Frame_Buffer_Pointer;
  iVar5 = DAT_80002af0;
  uVar4 = 0;
  do {
    memcpy(puVar1 + uVar4 * 0x640 + 20000,(void *)(*piVar2 + (iVar5 - uVar4) * 0x640),0x640);
    uVar4 = uVar4 + 1 & 0xfffeffff;
  } while (uVar4 < 0x1e0);
  iVar5 = FUN_800337c4(auStack584,param_1,7);
  if (iVar5 != 0) {
    FUN_8003347c(auStack584);
    iVar5 = FUN_800337c4(auStack584,param_1,7);
    if (iVar5 != 0) {
      FUN_8003347c(auStack584);
      FUN_800337c4(auStack584,param_1,7);
    }
  }
  FUN_800334ac(auStack584,0);
  uVar3 = DAT_80002af8;
  iVar5 = FUN_80034074(auStack584,DAT_80002adc,DAT_80002af8,0);
  if (iVar5 != 0) {
    FUN_800334ac(auStack584,0);
    iVar5 = FUN_80034074(auStack584,DAT_80002adc,uVar3,0);
    if (iVar5 != 0) {
      FUN_800334ac(auStack584,0);
      FUN_80034074(auStack584,DAT_80002adc,uVar3,0);
    }
  }
  FUN_8003347c(auStack584);
  return;
}



void save_screen_under_calib_start_text(void)

{
  uint uVar1;
  uint uVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  undefined2 *puVar11;
  uint uVar12;
  int iVar13;
  undefined2 *puVar14;
  
  iVar6 = Screen_Frame_Buffer_2;
  iVar5 = Start_Of_Screen_Mem;
  uVar10 = *(ushort *)(PTR_DAT_80002b38 + 6) + 0xec & 0xfffeffff;
  uVar9 = *(ushort *)(PTR_DAT_80002b38 + 4) + 0x1bb & 0xfffeffff;
  uVar8 = *(ushort *)(PTR_DAT_80002b38 + 6) + 0xaf & 0xfffeffff;
  uVar7 = *(ushort *)(PTR_DAT_80002b38 + 4) + 0xf4 & 0xfffeffff;
  if (uVar8 < uVar10) {
    uVar12 = uVar9 - uVar7;
    uVar1 = uVar12 * 0x8000 >> 0x10;
    do {
      if (uVar7 < uVar9) {
        iVar13 = uVar7 + uVar8 * 800;
        puVar11 = (undefined2 *)(iVar5 + iVar13 * 2);
        puVar14 = (undefined2 *)(iVar6 + iVar13 * 2);
        uVar2 = uVar1;
        puVar3 = puVar14 + -1;
        puVar4 = puVar11 + -1;
        if ((uVar12 & 1) != 0) {
          *puVar14 = *puVar11;
          puVar3 = puVar14;
          puVar4 = puVar11;
        }
        while (uVar2 != 0) {
          puVar3[1] = puVar4[1];
          puVar3[2] = puVar4[2];
          uVar2 = uVar2 - 1 & 0xffff;
          puVar3 = puVar3 + 2;
          puVar4 = puVar4 + 2;
        }
      }
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < uVar10);
    return;
  }
  return;
}



void restore_screen_under_calibration_texts(void)

{
  uint uVar1;
  uint uVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  undefined2 *puVar11;
  uint uVar12;
  int iVar13;
  undefined2 *puVar14;
  
  iVar6 = Start_Of_Screen_Mem;
  iVar5 = Screen_Frame_Buffer_2;
  uVar10 = *(ushort *)(PTR_DAT_80002b78 + 6) + 0xec & 0xfffeffff;
  uVar9 = *(ushort *)(PTR_DAT_80002b78 + 4) + 0x1bb & 0xfffeffff;
  uVar8 = *(ushort *)(PTR_DAT_80002b78 + 6) + 0xaf & 0xfffeffff;
  uVar7 = *(ushort *)(PTR_DAT_80002b78 + 4) + 0xf4 & 0xfffeffff;
  if (uVar8 < uVar10) {
    uVar12 = uVar9 - uVar7;
    uVar1 = uVar12 * 0x8000 >> 0x10;
    do {
      if (uVar7 < uVar9) {
        iVar13 = uVar7 + uVar8 * 800;
        puVar11 = (undefined2 *)(iVar5 + iVar13 * 2);
        puVar14 = (undefined2 *)(iVar6 + iVar13 * 2);
        uVar2 = uVar1;
        puVar3 = puVar14 + -1;
        puVar4 = puVar11 + -1;
        if ((uVar12 & 1) != 0) {
          *puVar14 = *puVar11;
          puVar3 = puVar14;
          puVar4 = puVar11;
        }
        while (uVar2 != 0) {
          puVar3[1] = puVar4[1];
          puVar3[2] = puVar4[2];
          uVar2 = uVar2 - 1 & 0xffff;
          puVar3 = puVar3 + 2;
          puVar4 = puVar4 + 2;
        }
      }
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < uVar10);
    return;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x8003744c)
// WARNING: Removing unreachable block (ram,0x80037454)
// WARNING: Removing unreachable block (ram,0x8003745c)
// WARNING: Removing unreachable block (ram,0x80037448)
// WARNING: Removing unreachable block (ram,0x80037470)
// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 setup_power_mon_int(void)

{
  undefined4 *port;
  
  enable_keyadc();
  port = DAT_80002c00;
  gpio_config_pin(DAT_80002c00,0xc,0);
  gpio_config_pin(port,0xb,0);
  gpio_config_pin(port,0xb,6);
  FUN_800176b4(1,0xb);
  FUN_800176f0(1,0xb);
  setup_interrupt(1,0x27,(uint)PTR_LAB_80002c04,3);
  return 0;
}



undefined8 FUN_80002c08(int param_1,undefined4 param_2)

{
  if (param_1 == 0) {
    return 0x200000001;
  }
  if (param_1 != 1) {
    if (param_1 != 2) {
      return CONCAT44(param_2,param_1);
    }
    FUN_800266c0(1,2);
  }
  return 0x200000002;
}



undefined4 FUN_80003060(void)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  short sVar7;
  bool bVar8;
  bool bVar9;
  bool bVar10;
  bool bVar11;
  
  FUN_80026728();
  *(undefined *)(DAT_80003164 + 10) = 0x1d;
  set_fpga_trigger_timebase();
  FUN_80025b24();
  do {
    iVar1 = FUN_80025b0c();
  } while (iVar1 == 0);
  FUN_80026698(100);
  FUN_8001af9c();
  FUN_80026698(100);
  FUN_8001b0f4();
  FUN_80026698(100);
  FUN_8001b1a4();
  FUN_80026698(100);
  FUN_8001b2fc();
  uVar2 = FUN_8001b3c0(DAT_80003168);
  uVar3 = FUN_8001b3c0(DAT_8000316c);
  uVar4 = FUN_8001b3c0(DAT_80003170);
  uVar5 = FUN_8001b3c0(DAT_80003174);
  iVar1 = DAT_80003178;
  if (uVar2 < uVar3) {
    sVar7 = (short)uVar3 - (short)uVar2;
    *(undefined2 *)(DAT_80003178 + 0x1c) = 0;
  }
  else {
    sVar7 = (short)uVar2 - (short)uVar3;
    *(undefined2 *)(DAT_80003178 + 0x1c) = 1;
  }
  *(short *)(iVar1 + 0x1e) = sVar7;
  if (uVar4 < uVar5) {
    *(undefined2 *)(iVar1 + 0x20) = 0;
    *(short *)(iVar1 + 0x22) = (short)uVar5 - (short)uVar4;
  }
  else {
    *(undefined2 *)(iVar1 + 0x20) = 1;
    *(short *)(iVar1 + 0x22) = (short)uVar4 - (short)uVar5;
  }
  uVar6 = uVar3 + 0x19;
  bVar10 = uVar6 <= uVar2;
  bVar8 = uVar2 == uVar6;
  if (!bVar10 || bVar8) {
    uVar6 = uVar2 + 0x19;
  }
  if (!bVar10 || bVar8) {
    bVar10 = uVar6 <= uVar3;
    bVar8 = uVar3 == uVar6;
  }
  uVar2 = uVar5 + 0x19;
  bVar11 = uVar2 <= uVar4;
  bVar9 = uVar4 == uVar2;
  if (!bVar11 || bVar9) {
    uVar2 = uVar4 + 0x19;
  }
  if (!bVar11 || bVar9) {
    bVar11 = uVar2 <= uVar5;
    bVar9 = uVar5 == uVar2;
  }
  if ((!bVar11 || bVar9) && (!bVar10 || bVar8)) {
    return 1;
  }
  return 0;
}



bool FUN_8000317c(void)

{
  longlong lVar1;
  bool bVar2;
  bool bVar3;
  ushort *puVar4;
  uchar uVar5;
  byte bVar6;
  ushort uVar7;
  int iVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  uint local_64;
  uint local_58;
  uint local_44;
  uint local_40;
  uint local_3c;
  uint local_38;
  uint local_34;
  uint local_30;
  
  bVar2 = false;
  bVar3 = false;
  FUN_80026728();
  uVar13 = 200;
  fpga_write_cmd('2');
  fpga_write_data('\0');
  fpga_write_data(-0x38);
  fpga_write_cmd('5');
  fpga_write_data('\0');
  fpga_write_data(-0x38);
  delay_2(0x32);
  do {
    fpga_write_cmd('2');
    uVar5 = (uchar)(uVar13 >> 8);
    fpga_write_data(uVar5);
    fpga_write_data((uchar)uVar13);
    fpga_write_cmd('5');
    fpga_write_data(uVar5);
    fpga_write_data((uchar)uVar13);
    delay_2(0x32);
    FUN_80025b24();
    do {
      iVar8 = FUN_80025b0c();
    } while (iVar8 == 0);
    FUN_80026698(100);
    FUN_8001af9c();
    FUN_800060a8();
    FUN_800061a4();
    FUN_80006170();
    uVar9 = FUN_8001b3c0(DAT_80003c18);
    if ((!bVar2) && (uVar9 < 0x17d)) {
      bVar2 = true;
      local_58 = uVar13;
      local_38 = uVar9;
    }
    FUN_80026698(100);
    FUN_8001b1a4();
    FUN_80008e04();
    FUN_80008f00();
    FUN_80008ecc();
    uVar9 = FUN_8001b3c0(DAT_80003c1c);
    if ((!bVar3) && (uVar9 < 0x17d)) {
      bVar3 = true;
      local_64 = uVar13;
      local_3c = uVar9;
    }
  } while ((!bVar2 || !bVar3) && (uVar13 = uVar13 + 0x32 & 0xfffeffff, uVar13 < DAT_80003c20));
  bVar2 = false;
  bVar3 = false;
  uVar13 = DAT_80003c20;
  do {
    fpga_write_cmd('2');
    uVar5 = (uchar)(uVar13 >> 8);
    fpga_write_data(uVar5);
    fpga_write_data((uchar)uVar13);
    fpga_write_cmd('5');
    fpga_write_data(uVar5);
    fpga_write_data((uchar)uVar13);
    delay_2(0x32);
    FUN_80025b24();
    do {
      iVar8 = FUN_80025b0c();
    } while (iVar8 == 0);
    FUN_80026698(100);
    FUN_8001af9c();
    FUN_800060a8();
    FUN_800061a4();
    FUN_80006170();
    uVar9 = FUN_8001b3c0(DAT_80003c18);
    if ((!bVar2) && (0x13 < uVar9)) {
      bVar2 = true;
      local_40 = uVar9;
      local_30 = uVar13;
    }
    FUN_80026698(100);
    FUN_8001b1a4();
    FUN_80008e04();
    FUN_80008f00();
    FUN_80008ecc();
    uVar9 = FUN_8001b3c0(DAT_80003c1c);
    if ((!bVar3) && (0x13 < uVar9)) {
      bVar3 = true;
      local_44 = uVar9;
      local_34 = uVar13;
    }
  } while ((!bVar2 || !bVar3) && (uVar13 = uVar13 - 0x32 & 0xffff, 200 < uVar13));
  uVar13 = translate_parameter(0x12,local_58 | local_30 << 0x10);
  uVar13 = divide(uVar13,local_38 - local_40);
  puVar4 = DAT_80003c28;
  uVar9 = DAT_80003c24;
  lVar1 = (longlong)(int)DAT_80003c24 * (longlong)(int)((uVar13 & 0xffff) * local_40);
  DAT_80003c28[1] = (short)local_30 + ((short)(int)(lVar1 >> 0x25) - (short)(lVar1 >> 0x3f));
  *puVar4 = (ushort)uVar13;
  uVar13 = translate_parameter(0x12,local_64 | local_34 << 0x10);
  uVar13 = divide(uVar13,local_3c - local_44);
  iVar8 = DAT_80003c2c;
  lVar1 = (longlong)(int)uVar9 * (longlong)(int)((uVar13 & 0xffff) * local_44);
  puVar4[8] = ((short)(int)(lVar1 >> 0x25) - (short)(lVar1 >> 0x3f)) + (short)local_34;
  puVar4[7] = (ushort)uVar13;
  *(undefined2 *)(iVar8 + 6) = 200;
  set_fpga_channel1_offset();
  *(undefined2 *)(iVar8 + 0x12) = 200;
  set_fpga_channel2_offset();
  uVar13 = translate_parameter(0xb,0);
  uVar13 = uVar13 & 0xffff;
  uVar14 = 1;
  do {
    *(char *)(iVar8 + 3) = (char)uVar14;
    fpga_write_cmd('3');
    if (*(char *)(iVar8 + 3) == '\x06') {
      uVar5 = '\x05';
    }
    else {
      uVar5 = *(uchar *)(iVar8 + 3);
    }
    fpga_write_data(uVar5);
    *(char *)(iVar8 + 0xf) = (char)uVar14;
    fpga_write_cmd('6');
    if (*(char *)(iVar8 + 0xf) == '\x06') {
      uVar5 = '\x05';
    }
    else {
      uVar5 = *(uchar *)(iVar8 + 0xf);
    }
    fpga_write_data(uVar5);
    delay_2(100);
    FUN_80025b24();
    do {
      iVar10 = FUN_80025b0c();
    } while (iVar10 == 0);
    FUN_80026698(100);
    FUN_8001af9c();
    FUN_800060a8();
    FUN_800061a4();
    FUN_80006170();
    uVar11 = FUN_8001b3c0(DAT_80003c18);
    if (uVar14 == 1) {
      uVar12 = translate_parameter(0xb,1);
      uVar11 = uVar11 + 1 & 0xfffeffff;
      if (uVar11 < 200) {
        uVar7 = *puVar4;
        iVar10 = (int)((ulonglong)((longlong)(int)uVar9 * (longlong)(int)(*puVar4 * uVar11)) >> 0x20
                      );
        iVar10 = divide_2(uVar13 * ((iVar10 >> 5) - (iVar10 >> 0x1f)),uVar12 & 0xffff);
        uVar7 = puVar4[1] -
                ((short)(uint)((ulonglong)((uint)uVar7 * 200) * (ulonglong)uVar9 >> 0x25) -
                (short)iVar10);
      }
      else {
        lVar1 = (longlong)(int)uVar9 * (longlong)(int)(*puVar4 * uVar11);
        iVar10 = divide_2((uVar12 & 0xffff) *
                          (uint)((ulonglong)((uint)*puVar4 * 200) * (ulonglong)uVar9 >> 0x25),uVar13
                         );
        uVar7 = (((short)(int)(lVar1 >> 0x25) - (short)(lVar1 >> 0x3f)) - (short)iVar10) + puVar4[1]
        ;
      }
      puVar4[2] = uVar7;
    }
    else {
      if (uVar14 == 2) {
        uVar12 = translate_parameter(0xb,2);
        if (uVar11 < 200) {
          uVar7 = *puVar4;
          iVar10 = (int)((ulonglong)((longlong)(int)uVar9 * (longlong)(int)(uVar11 * *puVar4)) >>
                        0x20);
          iVar10 = divide_2(uVar13 * ((iVar10 >> 5) - (iVar10 >> 0x1f)),uVar12 & 0xffff);
          uVar7 = puVar4[1] -
                  ((short)(uint)((ulonglong)((uint)uVar7 * 200) * (ulonglong)uVar9 >> 0x25) -
                  (short)iVar10);
        }
        else {
          lVar1 = (longlong)(int)uVar9 * (longlong)(int)(uVar11 * *puVar4);
          iVar10 = divide_2((uVar12 & 0xffff) *
                            (uint)((ulonglong)((uint)*puVar4 * 200) * (ulonglong)uVar9 >> 0x25),
                            uVar13);
          uVar7 = (((short)(int)(lVar1 >> 0x25) - (short)(lVar1 >> 0x3f)) - (short)iVar10) +
                  puVar4[1];
        }
        puVar4[3] = uVar7;
      }
      else {
        if (uVar14 == 3) {
          uVar12 = translate_parameter(0xb,3);
          if (uVar11 < 200) {
            uVar7 = *puVar4;
            iVar10 = (int)((ulonglong)((longlong)(int)uVar9 * (longlong)(int)(uVar11 * *puVar4)) >>
                          0x20);
            iVar10 = divide_2(uVar13 * ((iVar10 >> 5) - (iVar10 >> 0x1f)),uVar12 & 0xffff);
            uVar7 = puVar4[1] -
                    ((short)(uint)((ulonglong)((uint)uVar7 * 200) * (ulonglong)uVar9 >> 0x25) -
                    (short)iVar10);
          }
          else {
            lVar1 = (longlong)(int)uVar9 * (longlong)(int)(uVar11 * *puVar4);
            iVar10 = divide_2((uVar12 & 0xffff) *
                              (uint)((ulonglong)((uint)*puVar4 * 200) * (ulonglong)uVar9 >> 0x25),
                              uVar13);
            uVar7 = (((short)(int)(lVar1 >> 0x25) - (short)(lVar1 >> 0x3f)) - (short)iVar10) +
                    puVar4[1];
          }
          puVar4[4] = uVar7;
        }
        else {
          if (uVar14 == 4) {
            uVar12 = translate_parameter(0xb,4);
            if (uVar11 < 200) {
              uVar7 = *puVar4;
              iVar10 = (int)((ulonglong)((longlong)(int)uVar9 * (longlong)(int)(uVar11 * *puVar4))
                            >> 0x20);
              iVar10 = divide_2(uVar13 * ((iVar10 >> 5) - (iVar10 >> 0x1f)),uVar12 & 0xffff);
              uVar7 = puVar4[1] -
                      ((short)(uint)((ulonglong)((uint)uVar7 * 200) * (ulonglong)uVar9 >> 0x25) -
                      (short)iVar10);
            }
            else {
              lVar1 = (longlong)(int)uVar9 * (longlong)(int)(uVar11 * *puVar4);
              iVar10 = divide_2((uVar12 & 0xffff) *
                                (uint)((ulonglong)((uint)*puVar4 * 200) * (ulonglong)uVar9 >> 0x25),
                                uVar13);
              uVar7 = (((short)(int)(lVar1 >> 0x25) - (short)(lVar1 >> 0x3f)) - (short)iVar10) +
                      puVar4[1];
            }
            puVar4[5] = uVar7;
          }
          else {
            if (uVar14 == 5) {
              uVar12 = translate_parameter(0xb,5);
              if (uVar11 < 200) {
                uVar7 = *puVar4;
                iVar10 = (int)((ulonglong)((longlong)(int)uVar9 * (longlong)(int)(uVar11 * *puVar4))
                              >> 0x20);
                iVar10 = divide_2(uVar13 * ((iVar10 >> 5) - (iVar10 >> 0x1f)),uVar12 & 0xffff);
                uVar7 = puVar4[1] -
                        ((short)(uint)((ulonglong)((uint)uVar7 * 200) * (ulonglong)uVar9 >> 0x25) -
                        (short)iVar10);
              }
              else {
                lVar1 = (longlong)(int)uVar9 * (longlong)(int)(uVar11 * *puVar4);
                iVar10 = divide_2((uVar12 & 0xffff) *
                                  (uint)((ulonglong)((uint)*puVar4 * 200) * (ulonglong)uVar9 >> 0x25
                                        ),uVar13);
                uVar7 = (((short)(int)(lVar1 >> 0x25) - (short)(lVar1 >> 0x3f)) - (short)iVar10) +
                        puVar4[1];
              }
              puVar4[6] = uVar7;
            }
          }
        }
      }
    }
    FUN_80026698(100);
    FUN_8001b1a4();
    FUN_80008e04();
    FUN_80008f00();
    FUN_80008ecc();
    uVar11 = FUN_8001b3c0(DAT_80003c1c);
    if (uVar14 == 1) {
      uVar12 = translate_parameter(0xb,1);
      uVar11 = uVar11 + 1 & 0xfffeffff;
      if (uVar11 < 200) {
        uVar7 = puVar4[7];
        iVar10 = (int)((ulonglong)((longlong)(int)uVar9 * (longlong)(int)(puVar4[7] * uVar11)) >>
                      0x20);
        iVar10 = divide_2(uVar13 * ((iVar10 >> 5) - (iVar10 >> 0x1f)),uVar12 & 0xffff);
        uVar7 = puVar4[8] -
                ((short)(uint)((ulonglong)((uint)uVar7 * 200) * (ulonglong)uVar9 >> 0x25) -
                (short)iVar10);
      }
      else {
        lVar1 = (longlong)(int)uVar9 * (longlong)(int)(puVar4[7] * uVar11);
        iVar10 = divide_2((uVar12 & 0xffff) *
                          (uint)((ulonglong)((uint)puVar4[7] * 200) * (ulonglong)uVar9 >> 0x25),
                          uVar13);
        uVar7 = (((short)(int)(lVar1 >> 0x25) - (short)(lVar1 >> 0x3f)) - (short)iVar10) + puVar4[8]
        ;
      }
      puVar4[9] = uVar7;
    }
    else {
      if (uVar14 == 2) {
        uVar12 = translate_parameter(0xb,2);
        if (uVar11 < 200) {
          uVar7 = puVar4[7];
          iVar10 = (int)((ulonglong)((longlong)(int)uVar9 * (longlong)(int)(uVar11 * puVar4[7])) >>
                        0x20);
          iVar10 = divide_2(uVar13 * ((iVar10 >> 5) - (iVar10 >> 0x1f)),uVar12 & 0xffff);
          uVar7 = puVar4[8] -
                  ((short)(uint)((ulonglong)((uint)uVar7 * 200) * (ulonglong)uVar9 >> 0x25) -
                  (short)iVar10);
        }
        else {
          lVar1 = (longlong)(int)uVar9 * (longlong)(int)(uVar11 * puVar4[7]);
          iVar10 = divide_2((uVar12 & 0xffff) *
                            (uint)((ulonglong)((uint)puVar4[7] * 200) * (ulonglong)uVar9 >> 0x25),
                            uVar13);
          uVar7 = (((short)(int)(lVar1 >> 0x25) - (short)(lVar1 >> 0x3f)) - (short)iVar10) +
                  puVar4[8];
        }
        puVar4[10] = uVar7;
      }
      else {
        if (uVar14 == 3) {
          uVar12 = translate_parameter(0xb,3);
          if (uVar11 < 200) {
            uVar7 = puVar4[7];
            iVar10 = (int)((ulonglong)((longlong)(int)uVar9 * (longlong)(int)(uVar11 * puVar4[7]))
                          >> 0x20);
            iVar10 = divide_2(uVar13 * ((iVar10 >> 5) - (iVar10 >> 0x1f)),uVar12 & 0xffff);
            uVar7 = puVar4[8] -
                    ((short)(uint)((ulonglong)((uint)uVar7 * 200) * (ulonglong)uVar9 >> 0x25) -
                    (short)iVar10);
          }
          else {
            lVar1 = (longlong)(int)uVar9 * (longlong)(int)(uVar11 * puVar4[7]);
            iVar10 = divide_2((uVar12 & 0xffff) *
                              (uint)((ulonglong)((uint)puVar4[7] * 200) * (ulonglong)uVar9 >> 0x25),
                              uVar13);
            uVar7 = (((short)(int)(lVar1 >> 0x25) - (short)(lVar1 >> 0x3f)) - (short)iVar10) +
                    puVar4[8];
          }
          puVar4[0xb] = uVar7;
        }
        else {
          if (uVar14 == 4) {
            uVar12 = translate_parameter(0xb,4);
            if (uVar11 < 200) {
              uVar7 = puVar4[7];
              iVar10 = (int)((ulonglong)((longlong)(int)uVar9 * (longlong)(int)(uVar11 * puVar4[7]))
                            >> 0x20);
              iVar10 = divide_2(uVar13 * ((iVar10 >> 5) - (iVar10 >> 0x1f)),uVar12 & 0xffff);
              uVar7 = puVar4[8] -
                      ((short)(uint)((ulonglong)((uint)uVar7 * 200) * (ulonglong)uVar9 >> 0x25) -
                      (short)iVar10);
            }
            else {
              lVar1 = (longlong)(int)uVar9 * (longlong)(int)(uVar11 * puVar4[7]);
              iVar10 = divide_2((uVar12 & 0xffff) *
                                (uint)((ulonglong)((uint)puVar4[7] * 200) * (ulonglong)uVar9 >> 0x25
                                      ),uVar13);
              uVar7 = (((short)(int)(lVar1 >> 0x25) - (short)(lVar1 >> 0x3f)) - (short)iVar10) +
                      puVar4[8];
            }
            puVar4[0xc] = uVar7;
          }
          else {
            if (uVar14 == 5) {
              uVar12 = translate_parameter(0xb,5);
              if (uVar11 < 200) {
                uVar7 = puVar4[7];
                iVar10 = (int)((ulonglong)
                               ((longlong)(int)uVar9 * (longlong)(int)(uVar11 * puVar4[7])) >> 0x20)
                ;
                iVar10 = divide_2(uVar13 * ((iVar10 >> 5) - (iVar10 >> 0x1f)),uVar12 & 0xffff);
                uVar7 = puVar4[8] -
                        ((short)(uint)((ulonglong)((uint)uVar7 * 200) * (ulonglong)uVar9 >> 0x25) -
                        (short)iVar10);
              }
              else {
                lVar1 = (longlong)(int)uVar9 * (longlong)(int)(uVar11 * puVar4[7]);
                iVar10 = divide_2((uVar12 & 0xffff) *
                                  (uint)((ulonglong)((uint)puVar4[7] * 200) * (ulonglong)uVar9 >>
                                        0x25),uVar13);
                uVar7 = (((short)(int)(lVar1 >> 0x25) - (short)(lVar1 >> 0x3f)) - (short)iVar10) +
                        puVar4[8];
              }
              puVar4[0xd] = uVar7;
            }
          }
        }
      }
    }
    uVar14 = uVar14 + 1 & 0xfffeffff;
  } while (uVar14 < 6);
  uVar9 = 0;
  uVar13 = 0;
  FUN_80026728();
  iVar8 = DAT_80003db4;
  bVar6 = 0;
  do {
    *(undefined *)(iVar8 + 3) = 0;
    *(undefined *)(iVar8 + 0xf) = 0;
    while( true ) {
      *(undefined2 *)(iVar8 + 6) = 200;
      *(undefined2 *)(iVar8 + 0x12) = 200;
      fpga_write_cmd('3');
      if (*(char *)(iVar8 + 3) == '\x06') {
        uVar5 = '\x05';
      }
      else {
        uVar5 = *(uchar *)(iVar8 + 3);
      }
      fpga_write_data(uVar5);
      fpga_write_cmd('6');
      if (*(char *)(iVar8 + 0xf) == '\x06') {
        uVar5 = '\x05';
      }
      else {
        uVar5 = *(uchar *)(iVar8 + 0xf);
      }
      fpga_write_data(uVar5);
      set_fpga_channel1_offset();
      set_fpga_channel2_offset();
      delay_2(100);
      FUN_80025b24();
      do {
        iVar10 = FUN_80025b0c();
      } while (iVar10 == 0);
      FUN_80026698(100);
      FUN_8001af9c();
      FUN_800060a8();
      FUN_800061a4();
      FUN_80006170();
      iVar10 = FUN_8001b3c0(DAT_80003db8);
      if (iVar10 - 0xc1U < 0xf) {
        if (bVar6 == 0) {
          uVar9 = uVar9 | 1;
        }
        else {
          if (bVar6 == 1) {
            uVar9 = uVar9 | 2;
          }
          else {
            if (bVar6 == 2) {
              uVar9 = uVar9 | 4;
            }
          }
        }
      }
      FUN_80026698(100);
      FUN_8001b1a4();
      FUN_80008e04();
      FUN_80008f00();
      FUN_80008ecc();
      iVar10 = FUN_8001b3c0(DAT_80003dbc);
      if (iVar10 - 0xc1U < 0xf) {
        if (bVar6 == 0) {
          uVar13 = uVar13 | 1;
        }
        else {
          if (bVar6 == 1) {
            uVar13 = uVar13 | 2;
          }
          else {
            if (bVar6 == 2) {
              uVar13 = uVar13 | 4;
            }
          }
        }
      }
      bVar6 = bVar6 + 1;
      if (2 < bVar6) {
        return uVar9 == 7 && uVar13 == 7;
      }
      if (bVar6 == 0) break;
      if (bVar6 == 1) {
        *(undefined *)(iVar8 + 3) = 3;
        *(undefined *)(iVar8 + 0xf) = 3;
      }
      else {
        if (bVar6 == 2) {
          *(undefined *)(iVar8 + 3) = 4;
          *(undefined *)(iVar8 + 0xf) = 4;
        }
      }
    }
  } while( true );
}



void FUN_80003dc0(void)

{
  int iVar1;
  ushort *puVar2;
  ushort *puVar3;
  uint uVar4;
  uint uVar5;
  ushort *unaff_r4;
  ushort *puVar6;
  
  puVar6 = DAT_80003ec4;
  iVar1 = DAT_80003eb4;
  if (*(byte *)(DAT_80003eb4 + 10) < 0x19) {
    if (*(byte *)(DAT_80003eb4 + 10) < 9) {
      uVar4 = DAT_80003ec0;
      if (*(char *)(DAT_80003eb4 + 3) != '\x06') {
        return;
      }
    }
    else {
      uVar4 = DAT_80003ebc;
      if (*(char *)(DAT_80003eb4 + 3) != '\x06') {
        return;
      }
    }
  }
  else {
    uVar4 = DAT_80003eb8;
    if (*(char *)(DAT_80003eb4 + 3) != '\x06') {
      return;
    }
  }
  puVar2 = DAT_80003ec4 + -1;
  if ((uVar4 & 1) != 0) {
    *DAT_80003ec4 = *DAT_80003ec4 << 1;
    puVar2 = puVar6;
  }
  uVar5 = uVar4 >> 1;
  while (uVar5 != 0) {
    puVar3 = puVar2 + 2;
    uVar5 = uVar5 - 1;
    puVar2[1] = puVar2[1] << 1;
    *puVar3 = (ushort)((*puVar3 & 0x7fff7fff) << 1);
    puVar2 = puVar3;
  }
  if (uVar4 == 0) {
    puVar6 = unaff_r4;
  }
  uVar5 = 0;
  if (uVar4 == 0) {
    return;
  }
  do {
    puVar2 = puVar6 + uVar5;
    if (*puVar2 < *(ushort *)(iVar1 + 6)) {
      *puVar2 = 0;
    }
    else {
      *puVar2 = *puVar2 - *(short *)(iVar1 + 6);
    }
    uVar5 = uVar5 + 1 & 0xfffeffff;
  } while (uVar5 < uVar4);
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffd8 : 0x800040cc
// WARNING: Restarted to delay deadcode elimination for space: stack

longlong FUN_80003ec8(undefined4 param_1,uint param_2)

{
  undefined *puVar1;
  void *pvVar2;
  void *pvVar3;
  int iVar4;
  undefined2 uVar5;
  ushort uVar6;
  uint *puVar7;
  uint *puVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  uint *puVar12;
  uint *puVar13;
  byte *pbVar14;
  uint uVar15;
  uint uVar16;
  byte bVar17;
  uint uVar18;
  int iVar19;
  byte bVar20;
  uint in_r12;
  uint uVar21;
  uint uVar22;
  code *UNRECOVERED_JUMPTABLE_00;
  bool bVar23;
  bool bVar24;
  longlong lVar25;
  
  uVar16 = DAT_800040ec;
  puVar1 = PTR_initialization_data_800040e8;
  uVar18 = DAT_800040e4;
  if (*(int *)(DAT_800040e0 + 0x144) == 0) {
    return (ulonglong)param_2 << 0x20;
  }
  if (*(byte *)(DAT_800040e4 + 10) < 0xb) {
                    // WARNING: Could not recover jumptable at 0x80003ef4. Too many branches
                    // WARNING: Treating indirect jump as call
    lVar25 = (*UNRECOVERED_JUMPTABLE_00)();
    return lVar25;
  }
  if (*(char *)(DAT_800040e4 + 0x21) == '\x01') {
                    // WARNING: Could not recover jumptable at 0x80003f08. Too many branches
                    // WARNING: Treating indirect jump as call
    lVar25 = (*UNRECOVERED_JUMPTABLE_00)();
    return lVar25;
  }
  if (*(short *)(DAT_800040e4 + 6) != *(short *)(PTR_initialization_data_800040e8 + 4)) {
    memcpy(DAT_800040f4,DAT_800040f0,DAT_800040ec);
    memcpy(DAT_800040f8,DAT_800040f0,uVar16);
  }
  pvVar2 = DAT_800040f4;
  *(undefined2 *)(puVar1 + 4) = *(undefined2 *)(uVar18 + 6);
  uVar9 = FUN_800294c4(DAT_800040f0,pvVar2);
  uVar10 = FUN_800294c4(DAT_800040f0,DAT_800040f8);
  uVar10 = uVar10 & 0xffff;
  if (*(char *)(uVar18 + 3) == '\x06') {
    iVar19 = 0x1e;
  }
  else {
    iVar19 = 0xf;
  }
  bVar24 = (uVar9 & 0xffff) < DAT_800040fc;
  bVar23 = uVar10 < DAT_800040fc;
  if (bVar24 && bVar23) {
    uVar10 = 0;
  }
  uVar5 = (undefined2)uVar10;
  if (!bVar24 || !bVar23) {
    uVar6 = *(ushort *)puVar1;
    bVar23 = uVar6 == 0;
    if (bVar23) {
      uVar6 = (ushort)*(byte *)(uVar18 + 0x21);
    }
    if (!bVar23 || uVar6 != 0) {
      memcpy(DAT_800040f4,DAT_800040f0,uVar16);
      memcpy(DAT_800040f8,DAT_800040f0,uVar16);
      goto LAB_80003fcc;
    }
    memcpy(DAT_800040f0,DAT_800040f4,uVar16);
    uVar5 = 1;
  }
  *(undefined2 *)puVar1 = uVar5;
LAB_80003fcc:
  set_screen_to_global_pointer();
  iVar4 = DAT_80004108;
  puVar8 = DAT_80004104;
  uVar9 = DAT_80004100;
  pvVar3 = DAT_800040f8;
  pvVar2 = DAT_800040f4;
  puVar13 = DAT_800040f0;
  uVar10 = 0;
  do {
    uVar6 = *(ushort *)((int)puVar13 + uVar10 * 2);
    uVar11 = (uint)uVar6;
    uVar15 = (uint)*(ushort *)((int)pvVar2 + uVar10 * 2);
    uVar21 = uVar11 + iVar19;
    bVar24 = uVar15 <= uVar21;
    bVar23 = uVar21 == uVar15;
    if (bVar24 && !bVar23) {
      uVar18 = uVar15 + iVar19;
    }
    if (bVar24 && !bVar23) {
      bVar24 = uVar11 <= uVar18;
      bVar23 = uVar18 == uVar11;
    }
    if (!bVar24 || bVar23) {
LAB_80004094:
      *(ushort *)((int)puVar8 + uVar10 * 2) = uVar6;
    }
    else {
      uVar18 = (uint)*(ushort *)((int)pvVar3 + uVar10 * 2);
      bVar24 = uVar18 <= uVar21;
      bVar23 = uVar21 == uVar18;
      if (bVar24 && !bVar23) {
        uVar21 = uVar18 + iVar19;
      }
      if (bVar24 && !bVar23) {
        bVar24 = uVar11 <= uVar21;
        bVar23 = uVar21 == uVar11;
      }
      if (!bVar24 || bVar23) goto LAB_80004094;
      uVar21 = 0;
      if ((uVar11 == 0) || (uVar22 = uVar9, uVar21 = uVar11, uVar11 < uVar9)) {
        uVar22 = uVar11;
      }
      if (uVar21 < uVar15) {
        uVar21 = uVar15;
      }
      if (uVar15 < uVar22) {
        uVar22 = uVar15;
      }
      if (uVar21 < uVar18) {
        uVar21 = uVar18;
      }
      if (uVar18 < uVar22) {
        uVar22 = uVar18;
      }
      *(short *)((int)puVar8 + uVar10 * 2) = (short)(uVar21 + uVar22 >> 1);
    }
    uVar10 = uVar10 + 1;
    if (iVar4 <= (int)uVar10) {
      memcpy(DAT_800040f8,DAT_800040f4,uVar16);
      memcpy(DAT_800040f4,DAT_800040f0,uVar16);
      puVar8 = DAT_800040f0;
      puVar13 = DAT_80004104;
      if (3 < uVar16) {
        uVar18 = (uint)DAT_800040f0 & 3;
        in_r12 = uVar18;
        if (uVar18 != 0) {
          bVar17 = *(byte *)DAT_80004104;
          puVar12 = (uint *)((int)DAT_80004104 + 1);
          if (uVar18 < 3) {
            puVar12 = (uint *)((int)DAT_80004104 + 2);
            in_r12 = (uint)*(byte *)(uint *)((int)DAT_80004104 + 1);
          }
          puVar7 = (uint *)((int)DAT_800040f0 + 1);
          *(byte *)DAT_800040f0 = bVar17;
          puVar13 = puVar12;
          if (uVar18 < 2) {
            puVar13 = (uint *)((int)puVar12 + 1);
            bVar17 = *(byte *)puVar12;
          }
          puVar12 = puVar7;
          if (uVar18 < 3) {
            puVar12 = (uint *)((int)puVar8 + 2);
            *(byte *)puVar7 = (byte)in_r12;
          }
          uVar16 = (uVar16 + uVar18) - 4;
          puVar8 = puVar12;
          if (uVar18 < 2) {
            puVar8 = (uint *)((int)puVar12 + 1);
            *(byte *)puVar12 = bVar17;
          }
        }
        uVar10 = (uint)puVar13 & 3;
        if (uVar10 == 0) {
          while (uVar18 = uVar16 - 0x20, 0x1f < uVar16) {
            uVar16 = puVar13[1];
            uVar10 = puVar13[2];
            uVar9 = puVar13[3];
            *puVar8 = *puVar13;
            puVar8[1] = uVar16;
            puVar8[2] = uVar10;
            puVar8[3] = uVar9;
            uVar10 = puVar13[4];
            uVar16 = puVar13[5];
            uVar9 = puVar13[6];
            uVar11 = puVar13[7];
            puVar13 = puVar13 + 8;
            puVar8[4] = uVar10;
            puVar8[5] = uVar16;
            puVar8[6] = uVar9;
            puVar8[7] = uVar11;
            puVar8 = puVar8 + 8;
            uVar16 = uVar18;
          }
          if ((bool)((byte)(uVar18 >> 4) & 1)) {
            uVar10 = *puVar13;
            uVar9 = puVar13[1];
            uVar11 = puVar13[2];
            uVar15 = puVar13[3];
            puVar13 = puVar13 + 4;
            *puVar8 = uVar10;
            puVar8[1] = uVar9;
            puVar8[2] = uVar11;
            puVar8[3] = uVar15;
            puVar8 = puVar8 + 4;
          }
          if ((int)(uVar16 << 0x1c) < 0) {
            uVar10 = *puVar13;
            uVar9 = puVar13[1];
            puVar13 = puVar13 + 2;
            *puVar8 = uVar10;
            puVar8[1] = uVar9;
            puVar8 = puVar8 + 2;
          }
          puVar7 = puVar8;
          puVar12 = puVar13;
          if ((bool)((byte)(uVar18 >> 2) & 1)) {
            puVar12 = puVar13 + 1;
            uVar10 = *puVar13;
            puVar7 = puVar8 + 1;
            *puVar8 = uVar10;
          }
          uVar5 = (undefined2)uVar10;
          if ((uVar18 & 3) == 0) {
            return CONCAT44(puVar12,puVar7);
          }
          bVar24 = (bool)((byte)(uVar18 >> 1) & 1);
          uVar16 = uVar16 << 0x1f;
          bVar23 = (int)uVar16 < 0;
          puVar13 = puVar12;
          if (bVar24) {
            puVar13 = (uint *)((int)puVar12 + 2);
            uVar5 = *(undefined2 *)puVar12;
          }
          puVar8 = puVar13;
          if (bVar23) {
            puVar8 = (uint *)((int)puVar13 + 1);
            uVar16 = (uint)*(byte *)puVar13;
          }
          puVar13 = puVar7;
          if (bVar24) {
            puVar13 = (uint *)((int)puVar7 + 2);
            *(undefined2 *)puVar7 = uVar5;
          }
          puVar12 = puVar13;
          if (bVar23) {
            puVar12 = (uint *)((int)puVar13 + 1);
            *(byte *)puVar13 = (byte)uVar16;
          }
          return CONCAT44(puVar8,puVar12);
        }
        bVar23 = 3 < uVar16;
        uVar16 = uVar16 - 4;
        if (bVar23) {
          puVar13 = (uint *)((int)puVar13 - uVar10);
          in_r12 = *puVar13;
          puVar12 = puVar8;
          if (uVar10 == 2) {
            do {
              puVar7 = puVar13;
              uVar10 = in_r12 >> 0x10;
              puVar13 = puVar7 + 1;
              in_r12 = *puVar13;
              bVar23 = 3 < uVar16;
              uVar16 = uVar16 - 4;
              uVar10 = uVar10 | in_r12 << 0x10;
              puVar8 = puVar12 + 1;
              *puVar12 = uVar10;
              puVar12 = puVar8;
            } while (bVar23);
            puVar13 = (uint *)((int)puVar7 + 6);
          }
          else {
            if (uVar10 < 3) {
              do {
                puVar7 = puVar13;
                uVar10 = in_r12 >> 8;
                puVar13 = puVar7 + 1;
                in_r12 = *puVar13;
                bVar23 = 3 < uVar16;
                uVar16 = uVar16 - 4;
                uVar10 = uVar10 | in_r12 << 0x18;
                puVar8 = puVar12 + 1;
                *puVar12 = uVar10;
                puVar12 = puVar8;
              } while (bVar23);
              puVar13 = (uint *)((int)puVar7 + 5);
            }
            else {
              do {
                puVar7 = puVar13;
                uVar10 = in_r12 >> 0x18;
                puVar13 = puVar7 + 1;
                in_r12 = *puVar13;
                bVar23 = 3 < uVar16;
                uVar16 = uVar16 - 4;
                uVar10 = uVar10 | in_r12 << 8;
                puVar8 = puVar12 + 1;
                *puVar12 = uVar10;
                puVar12 = puVar8;
              } while (bVar23);
              puVar13 = (uint *)((int)puVar7 + 7);
            }
          }
        }
      }
      bVar20 = (byte)in_r12;
      bVar17 = (byte)uVar10;
      bVar24 = (bool)((byte)(uVar16 >> 1) & 1);
      uVar16 = uVar16 << 0x1f;
      bVar23 = (int)uVar16 < 0;
      if (bVar24) {
        pbVar14 = (byte *)((int)puVar13 + 1);
        bVar17 = *(byte *)puVar13;
        puVar13 = (uint *)((int)puVar13 + 2);
        bVar20 = *pbVar14;
      }
      puVar12 = puVar13;
      if (bVar23) {
        puVar12 = (uint *)((int)puVar13 + 1);
        uVar16 = (uint)*(byte *)puVar13;
      }
      if (bVar24) {
        pbVar14 = (byte *)((int)puVar8 + 1);
        *(byte *)puVar8 = bVar17;
        puVar8 = (uint *)((int)puVar8 + 2);
        *pbVar14 = bVar20;
      }
      puVar13 = puVar8;
      if (bVar23) {
        puVar13 = (uint *)((int)puVar8 + 1);
        *(byte *)puVar8 = (byte)uVar16;
      }
      return CONCAT44(puVar12,puVar13);
    }
  } while( true );
}



void FUN_8000410c(void)

{
  short sVar1;
  undefined *puVar2;
  int iVar3;
  uint uVar4;
  short *psVar5;
  ushort *puVar6;
  short *psVar7;
  uint uVar8;
  int iVar9;
  uint uVar10;
  
  uVar10 = 0;
  iVar9 = 10;
  uVar8 = 0;
  memcpy(DAT_800043a8,DAT_800043a4,DAT_800043a0);
  switch(*(undefined2 *)(PTR_DAT_800043ac + 0x1a)) {
  case 1:
    scope_pre_process_250ns_data(DAT_800043a8,0,DAT_800043a0);
    break;
  case 2:
    FUN_80013eac(DAT_800043a8,0,4000);
    break;
  case 3:
    scope_pre_process_100ns_data(DAT_800043a8,0,DAT_800043b0);
    break;
  case 4:
    scope_pre_process_50ns_data(DAT_800043a8,0,DAT_800043b4);
    break;
  case 5:
    FUN_80023648(DAT_800043a8,DAT_800043b8);
    break;
  case 6:
    FUN_80023710(DAT_800043a8,DAT_800043b8);
    break;
  case 7:
    FUN_80023804(DAT_800043a8,DAT_800043b8);
    break;
  case 8:
    FUN_80023574(DAT_800043a8,DAT_800043b8);
    break;
  case 9:
    FUN_8001408c(DAT_800043a8,0,DAT_800043bc);
    break;
  case 10:
    FUN_80023734(DAT_800043a8,DAT_800043b8);
  }
  iVar3 = DAT_800043d0;
  switch(*(undefined2 *)(PTR_DAT_800043ac + 0x1a)) {
  case 1:
    uVar8 = DAT_800043c0;
    break;
  case 2:
    uVar8 = DAT_800043c4;
    break;
  case 3:
    uVar8 = DAT_800043a0;
    break;
  case 4:
    uVar8 = DAT_800043c8;
    break;
  case 5:
    iVar9 = 0x14;
    break;
  case 6:
    iVar9 = 0x19;
    break;
  case 7:
    iVar9 = 0x32;
    break;
  case 8:
    iVar9 = 100;
    break;
  case 9:
    uVar8 = DAT_800043cc;
    break;
  case 10:
    iVar9 = 0x28;
  }
  if (((*(byte *)(DAT_800043d0 + 10) < 0xb) ||
      (uVar4 = divide(DAT_800043b0,iVar9), uVar4 < *(ushort *)(iVar3 + 0x24))) ||
     (uVar10 = uVar4 - *(ushort *)(iVar3 + 0x24) & 0xffff, uVar10 < uVar10 + 0x2ee)) {
    sVar1 = (short)DAT_800043dc + 0x4a;
    psVar7 = (short *)((int)DAT_800043a8 +
                      (*(ushort *)PTR_DAT_800043d4 + uVar10 + uVar8) * 2 + -0x3a9a);
    uVar10 = DAT_800043dc;
    psVar5 = DAT_800043d8;
    do {
      psVar5[1] = sVar1 - psVar7[1];
      psVar7 = psVar7 + 2;
      uVar10 = uVar10 - 1 & 0xffff;
      psVar5 = psVar5 + 2;
      *psVar5 = sVar1 - *psVar7;
    } while (uVar10 != 0);
  }
  puVar6 = DAT_800043e0;
  uVar10 = DAT_800043c0;
  puVar2 = PTR_DAT_800043ac;
  if (*(char *)(iVar3 + 0x3a) != '\0') {
    FUN_8000448c();
    puVar6 = DAT_800043e0;
    uVar10 = DAT_800043c0;
    puVar2 = PTR_DAT_800043ac;
  }
  do {
    iVar9 = (int)((((uint)*puVar6 - (uint)*(ushort *)(puVar2 + 0x12)) + 400) * 0x10000) >> 0x10;
    if (iVar9 < 0x2f) {
      iVar9 = 0x2f;
    }
    else {
      if (0x1c0 < iVar9) {
        iVar9 = 0x1c0;
      }
    }
    uVar10 = uVar10 - 1;
    *puVar6 = (ushort)iVar9;
    puVar6 = puVar6 + 1;
  } while (uVar10 != 0);
  return;
}



void FUN_800043e4(void)

{
  undefined2 *puVar1;
  ushort *puVar2;
  uint uVar3;
  
  set_display_fg_color(0);
  display_fill_rect(3,0x2f,(ushort)DAT_80004480,0x80);
  FUN_80004868();
  set_display_fg_color(DAT_80004484);
  puVar1 = DAT_80004488;
  uVar3 = 0;
  *DAT_80004488 = DAT_80004488[1];
  do {
    puVar2 = puVar1 + uVar3;
    if (0x50 < *puVar2) {
      *puVar2 = 0x50;
    }
    display_draw_vert_line((short)uVar3 + 3,0x7f - *puVar2,0x7f);
    uVar3 = uVar3 + 1 & 0xfffeffff;
  } while (uVar3 < 0x2d3);
  return;
}



void FUN_8000448c(void)

{
  short sVar1;
  ushort uVar2;
  ulonglong uVar3;
  ushort *puVar4;
  ushort *puVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  int iVar9;
  
  iVar9 = DAT_80004608;
  sVar1 = *(short *)(PTR_DAT_80004604 + 0x1c);
  if (sVar1 == 0) {
    if (*(char *)(DAT_80004608 + 3) != '\0') {
      FUN_800047d8();
    }
    if (*(byte *)(iVar9 + 3) < 2) {
      return;
    }
LAB_8000450c:
    uVar7 = DAT_800047cc;
    if (DAT_800047c4 < *(ushort *)(DAT_800047c0 + 6)) {
      uVar8 = 0;
    }
    else {
      uVar8 = ((DAT_800047c4 - *(ushort *)(DAT_800047c0 + 6)) +
              (uint)*(ushort *)(PTR_DAT_800047c8 + 0x12)) - 400 & 0xffff;
    }
    uVar3 = (ulonglong)DAT_800047cc;
    puVar4 = DAT_800047d0;
    iVar9 = DAT_800047d4;
    do {
      uVar6 = (uint)((ulonglong)((uint)*puVar4 * 0x19) * (ulonglong)uVar7 >> 0x23) & 0xffe0ffff;
      uVar2 = (ushort)uVar6;
      *puVar4 = uVar2;
      if (uVar6 < uVar8) {
        *puVar4 = 0;
      }
      else {
        *puVar4 = uVar2 - (short)(uint)((uVar8 * 0xf) * uVar3 >> 0x23);
      }
      iVar9 = iVar9 + -1;
      puVar4 = puVar4 + 1;
    } while (iVar9 != 0);
    return;
  }
  if (sVar1 == 1) {
    if (*(char *)(DAT_80004608 + 3) == '\0') {
      FUN_800065d4();
    }
    if (1 < *(byte *)(iVar9 + 3)) {
      FUN_80004728();
    }
    if (*(byte *)(iVar9 + 3) < 3) {
      return;
    }
  }
  else {
    if (sVar1 == 2) {
      if (*(char *)(DAT_80004608 + 3) == '\0') {
        FUN_800065d4();
      }
      if (*(byte *)(iVar9 + 3) < 2) {
        FUN_80006518();
      }
      if (2 < *(byte *)(iVar9 + 3)) {
        FUN_800047d8();
      }
      if (*(byte *)(iVar9 + 3) < 4) {
        return;
      }
      goto LAB_8000450c;
    }
    if (sVar1 == 3) {
      if (*(byte *)(DAT_80004608 + 3) < 2) {
        FUN_80006518();
      }
      if (*(byte *)(iVar9 + 3) < 3) {
        FUN_800065d4();
      }
      if (3 < *(byte *)(iVar9 + 3)) {
        FUN_80004728();
      }
      if (*(byte *)(iVar9 + 3) < 5) {
        return;
      }
    }
    else {
      if (sVar1 == 4) {
        if (*(byte *)(DAT_80004608 + 3) < 3) {
          FUN_800065d4();
        }
        if (*(byte *)(iVar9 + 3) < 4) {
          FUN_80006518();
        }
        if (4 < *(byte *)(iVar9 + 3)) {
          FUN_800047d8();
        }
        if (*(byte *)(iVar9 + 3) < 6) {
          return;
        }
      }
      else {
        if (sVar1 != 5) {
          if (sVar1 != 6) {
            return;
          }
          if (*(byte *)(DAT_80004608 + 3) < 5) {
            FUN_800065d4();
          }
          if (5 < *(byte *)(iVar9 + 3)) {
            return;
          }
          iVar9 = DAT_80006650;
          if (DAT_80006644 < *(ushort *)(DAT_80006640 + 6)) {
            uVar7 = 0;
            puVar4 = DAT_8000664c;
          }
          else {
            uVar7 = ((DAT_80006644 - *(ushort *)(DAT_80006640 + 6)) +
                    (uint)*(ushort *)(PTR_DAT_80006648 + 0x12)) - 400 & 0xffff;
            puVar4 = DAT_8000664c;
          }
          do {
            puVar5 = puVar4 + 2;
            iVar9 = iVar9 + -1;
            puVar4[1] = (puVar4[1] >> 1) + (short)(uVar7 >> 1);
            *puVar5 = (*puVar5 >> 1) + (short)(uVar7 >> 1);
            puVar4 = puVar5;
          } while (iVar9 != 0);
          return;
        }
        if (*(byte *)(DAT_80004608 + 3) < 4) {
          FUN_80006518();
        }
        if (*(byte *)(iVar9 + 3) < 5) {
          FUN_800065d4();
        }
        if (*(byte *)(iVar9 + 3) < 6) {
          return;
        }
      }
    }
  }
  puVar4 = DAT_80004860;
  iVar9 = DAT_80004864;
  if (DAT_80004858 < *(ushort *)(DAT_80004854 + 6)) {
    uVar7 = 0;
  }
  else {
    uVar7 = ((DAT_80004858 - *(ushort *)(DAT_80004854 + 6)) +
            (uint)*(ushort *)(PTR_DAT_8000485c + 0x12)) - 400 & 0xffff;
  }
  do {
    uVar8 = (*puVar4 & 0x7fff7fff) * 2;
    uVar2 = (ushort)uVar8;
    *puVar4 = uVar2;
    if (uVar8 < uVar7) {
      *puVar4 = 0;
    }
    else {
      *puVar4 = uVar2 - (short)uVar7;
    }
    iVar9 = iVar9 + -1;
    puVar4 = puVar4 + 1;
  } while (iVar9 != 0);
  return;
}



void scope_pre_process_ch1_25ns_data(void)

{
  undefined2 uVar1;
  int iVar2;
  int iVar3;
  uint *puVar4;
  uint *puVar5;
  uint *puVar6;
  uint *puVar7;
  uint **ppuVar8;
  uint **ppuVar9;
  byte *pbVar10;
  undefined2 *puVar11;
  uint uVar12;
  uint uVar13;
  byte bVar14;
  uint uVar15;
  int iVar16;
  short *psVar17;
  byte bVar18;
  undefined2 uVar19;
  uint *puVar20;
  uint *puVar21;
  uint uVar22;
  uint uVar23;
  uint uVar24;
  bool bVar25;
  bool bVar26;
  
  puVar7 = DAT_8000470c;
  puVar21 = DAT_80004708;
  iVar16 = 0x2e8;
  *(undefined2 *)((int)DAT_8000470c + 2) = *(undefined2 *)DAT_80004708;
  uVar19 = *(undefined2 *)((int)puVar21 + 2);
  puVar11 = (undefined2 *)((int)puVar7 + 2);
  do {
    uVar1 = *(undefined2 *)(puVar21 + 1);
    puVar11[2] = uVar19;
    uVar19 = *(undefined2 *)((int)puVar21 + 6);
    iVar16 = iVar16 + -1;
    puVar11 = puVar11 + 4;
    *puVar11 = uVar1;
    iVar3 = DAT_8000471c;
    iVar2 = DAT_80004718;
    puVar21 = puVar21 + 1;
  } while (iVar16 != 0);
  *(undefined2 *)(DAT_80004714 + 2) = *DAT_80004710;
  uVar15 = DAT_80004720;
  uVar12 = 0;
  if (*(short *)(iVar2 + 0x1c) == 0) {
    do {
      uVar13 = (uint)*(ushort *)(iVar3 + uVar12 * 2);
      if (*(ushort *)(iVar2 + 0x1e) < uVar13) {
        puVar21 = (uint *)(uVar13 - *(ushort *)(iVar2 + 0x1e));
        *(short *)(puVar7 + uVar12) = (short)puVar21;
      }
      else {
        puVar21 = puVar7 + uVar12;
        *(undefined2 *)puVar21 = 0;
      }
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < uVar15);
  }
  else {
    do {
      psVar17 = (short *)(iVar3 + uVar12 * 2);
      puVar21 = puVar7 + uVar12;
      uVar12 = uVar12 + 2 & 0xfffeffff;
      *(short *)puVar21 = *psVar17 + *(short *)(iVar2 + 0x1e);
      *(short *)(puVar21 + 1) = psVar17[1] + *(short *)(iVar2 + 0x1e);
    } while (uVar12 < uVar15);
  }
  uVar12 = DAT_80004724;
  puVar5 = DAT_80004708;
  puVar7 = DAT_8000470c;
  if (3 < DAT_80004724) {
    puVar20 = (uint *)((uint)DAT_80004708 & 3);
    uVar13 = DAT_80004724;
    puVar21 = puVar20;
    if (puVar20 != (uint *)0x0) {
      bVar14 = *(byte *)DAT_8000470c;
      puVar6 = (uint *)((int)DAT_8000470c + 1);
      if (puVar20 < (uint *)0x3) {
        puVar6 = (uint *)((int)DAT_8000470c + 2);
        puVar21 = (uint *)(uint)*(byte *)(uint *)((int)DAT_8000470c + 1);
      }
      puVar4 = (uint *)((int)DAT_80004708 + 1);
      *(byte *)DAT_80004708 = bVar14;
      puVar7 = puVar6;
      if (puVar20 < (uint *)0x2) {
        puVar7 = (uint *)((int)puVar6 + 1);
        bVar14 = *(byte *)puVar6;
      }
      puVar6 = puVar4;
      if (puVar20 < (uint *)0x3) {
        puVar6 = (uint *)((int)puVar5 + 2);
        *(byte *)puVar4 = (byte)puVar21;
      }
      uVar13 = (int)puVar20 + (uVar12 - 4);
      puVar5 = puVar6;
      if (puVar20 < (uint *)0x2) {
        puVar5 = (uint *)((int)puVar6 + 1);
        *(byte *)puVar6 = bVar14;
      }
    }
    uVar15 = (uint)puVar7 & 3;
    if (uVar15 == 0) {
      while (uVar12 = uVar13 - 0x20, 0x1f < uVar13) {
        uVar15 = puVar7[1];
        uVar13 = puVar7[2];
        uVar22 = puVar7[3];
        *puVar5 = *puVar7;
        puVar5[1] = uVar15;
        puVar5[2] = uVar13;
        puVar5[3] = uVar22;
        uVar15 = puVar7[4];
        uVar13 = puVar7[5];
        uVar22 = puVar7[6];
        uVar23 = puVar7[7];
        puVar7 = puVar7 + 8;
        puVar5[4] = uVar15;
        puVar5[5] = uVar13;
        puVar5[6] = uVar22;
        puVar5[7] = uVar23;
        puVar5 = puVar5 + 8;
        uVar13 = uVar12;
      }
      if ((bool)((byte)(uVar12 >> 4) & 1)) {
        uVar15 = *puVar7;
        uVar22 = puVar7[1];
        uVar23 = puVar7[2];
        uVar24 = puVar7[3];
        puVar7 = puVar7 + 4;
        *puVar5 = uVar15;
        puVar5[1] = uVar22;
        puVar5[2] = uVar23;
        puVar5[3] = uVar24;
        puVar5 = puVar5 + 4;
      }
      if ((int)(uVar13 << 0x1c) < 0) {
        uVar15 = *puVar7;
        uVar22 = puVar7[1];
        puVar7 = puVar7 + 2;
        *puVar5 = uVar15;
        puVar5[1] = uVar22;
        puVar5 = puVar5 + 2;
      }
      puVar20 = puVar5;
      puVar21 = puVar7;
      if ((bool)((byte)(uVar12 >> 2) & 1)) {
        puVar21 = puVar7 + 1;
        uVar15 = *puVar7;
        puVar20 = puVar5 + 1;
        *puVar5 = uVar15;
      }
      uVar19 = (undefined2)uVar15;
      if ((uVar12 & 3) != 0) {
        bVar26 = (bool)((byte)(uVar12 >> 1) & 1);
        uVar13 = uVar13 << 0x1f;
        bVar25 = (int)uVar13 < 0;
        puVar7 = puVar21;
        if (bVar26) {
          puVar7 = (uint *)((int)puVar21 + 2);
          uVar19 = *(undefined2 *)puVar21;
        }
        if (bVar25) {
          uVar13 = (uint)*(byte *)puVar7;
        }
        puVar21 = puVar20;
        if (bVar26) {
          puVar21 = (uint *)((int)puVar20 + 2);
          *(undefined2 *)puVar20 = uVar19;
        }
        if (bVar25) {
          *(byte *)puVar21 = (byte)uVar13;
        }
        return;
      }
      return;
    }
    uVar12 = uVar13 - 4;
    if (3 < uVar13) {
      ppuVar8 = (uint **)((int)puVar7 - uVar15);
      puVar21 = *ppuVar8;
      puVar7 = puVar5;
      if (uVar15 == 2) {
        do {
          ppuVar9 = ppuVar8;
          uVar15 = (uint)puVar21 >> 0x10;
          ppuVar8 = ppuVar9 + 1;
          puVar21 = *ppuVar8;
          bVar25 = 3 < uVar12;
          uVar12 = uVar12 - 4;
          uVar15 = uVar15 | (int)puVar21 << 0x10;
          puVar5 = puVar7 + 1;
          *puVar7 = uVar15;
          puVar7 = puVar5;
        } while (bVar25);
        puVar7 = (uint *)((int)ppuVar9 + 6);
      }
      else {
        if (uVar15 < 3) {
          do {
            ppuVar9 = ppuVar8;
            uVar15 = (uint)puVar21 >> 8;
            ppuVar8 = ppuVar9 + 1;
            puVar21 = *ppuVar8;
            bVar25 = 3 < uVar12;
            uVar12 = uVar12 - 4;
            uVar15 = uVar15 | (int)puVar21 << 0x18;
            puVar5 = puVar7 + 1;
            *puVar7 = uVar15;
            puVar7 = puVar5;
          } while (bVar25);
          puVar7 = (uint *)((int)ppuVar9 + 5);
        }
        else {
          do {
            ppuVar9 = ppuVar8;
            uVar15 = (uint)puVar21 >> 0x18;
            ppuVar8 = ppuVar9 + 1;
            puVar21 = *ppuVar8;
            bVar25 = 3 < uVar12;
            uVar12 = uVar12 - 4;
            uVar15 = uVar15 | (int)puVar21 << 8;
            puVar5 = puVar7 + 1;
            *puVar7 = uVar15;
            puVar7 = puVar5;
          } while (bVar25);
          puVar7 = (uint *)((int)ppuVar9 + 7);
        }
      }
    }
  }
  bVar18 = (byte)puVar21;
  bVar14 = (byte)uVar15;
  bVar26 = (bool)((byte)(uVar12 >> 1) & 1);
  uVar12 = uVar12 << 0x1f;
  bVar25 = (int)uVar12 < 0;
  if (bVar26) {
    pbVar10 = (byte *)((int)puVar7 + 1);
    bVar14 = *(byte *)puVar7;
    puVar7 = (uint *)((int)puVar7 + 2);
    bVar18 = *pbVar10;
  }
  if (bVar25) {
    uVar12 = (uint)*(byte *)puVar7;
  }
  if (bVar26) {
    pbVar10 = (byte *)((int)puVar5 + 1);
    *(byte *)puVar5 = bVar14;
    puVar5 = (uint *)((int)puVar5 + 2);
    *pbVar10 = bVar18;
  }
  if (bVar25) {
    *(byte *)puVar5 = (byte)uVar12;
  }
  return;
}



void FUN_80004728(void)

{
  ushort uVar1;
  ulonglong uVar2;
  uint uVar3;
  ushort *puVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  
  uVar3 = DAT_800047cc;
  if (DAT_800047c4 < *(ushort *)(DAT_800047c0 + 6)) {
    uVar6 = 0;
  }
  else {
    uVar6 = ((DAT_800047c4 - *(ushort *)(DAT_800047c0 + 6)) +
            (uint)*(ushort *)(PTR_DAT_800047c8 + 0x12)) - 400 & 0xffff;
  }
  uVar2 = (ulonglong)DAT_800047cc;
  puVar4 = DAT_800047d0;
  iVar7 = DAT_800047d4;
  do {
    uVar5 = (uint)((ulonglong)((uint)*puVar4 * 0x19) * (ulonglong)uVar3 >> 0x23) & 0xffe0ffff;
    uVar1 = (ushort)uVar5;
    *puVar4 = uVar1;
    if (uVar5 < uVar6) {
      *puVar4 = 0;
    }
    else {
      *puVar4 = uVar1 - (short)(uint)((uVar6 * 0xf) * uVar2 >> 0x23);
    }
    iVar7 = iVar7 + -1;
    puVar4 = puVar4 + 1;
  } while (iVar7 != 0);
  return;
}



void FUN_800047d8(void)

{
  ushort uVar1;
  ushort *puVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  
  puVar2 = DAT_80004860;
  iVar5 = DAT_80004864;
  if (DAT_80004858 < *(ushort *)(DAT_80004854 + 6)) {
    uVar3 = 0;
  }
  else {
    uVar3 = ((DAT_80004858 - *(ushort *)(DAT_80004854 + 6)) +
            (uint)*(ushort *)(PTR_DAT_8000485c + 0x12)) - 400 & 0xffff;
  }
  do {
    uVar4 = (*puVar2 & 0x7fff7fff) * 2;
    uVar1 = (ushort)uVar4;
    *puVar2 = uVar1;
    if (uVar4 < uVar3) {
      *puVar2 = 0;
    }
    else {
      *puVar2 = uVar1 - (short)uVar3;
    }
    iVar5 = iVar5 + -1;
    puVar2 = puVar2 + 1;
  } while (iVar5 != 0);
  return;
}



void FUN_80004868(void)

{
  undefined2 uVar1;
  undefined2 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  int iVar5;
  undefined4 *puVar6;
  undefined4 *puVar7;
  undefined2 *puVar8;
  int iVar9;
  
  puVar6 = DAT_80004984;
  puVar8 = DAT_80004980;
  uVar3 = FUN_8003a3a0(*DAT_80004980);
  uVar4 = DAT_80004988;
  uVar3 = FUN_8003a0c4(uVar3,DAT_80004988);
  *puVar6 = uVar3;
  puVar6[1] = 0;
  uVar1 = puVar8[1];
  puVar7 = puVar6 + 1;
  iVar9 = DAT_8000498c;
  do {
    uVar2 = puVar8[2];
    uVar3 = FUN_8003a3a0(uVar1);
    uVar3 = FUN_8003a0c4(uVar3,uVar4);
    puVar6[2] = uVar3;
    puVar7[2] = 0;
    uVar1 = puVar8[3];
    uVar3 = FUN_8003a3a0(uVar2);
    uVar3 = FUN_8003a0c4(uVar3,uVar4);
    puVar6 = puVar6 + 4;
    *puVar6 = uVar3;
    iVar9 = iVar9 + -1;
    puVar7 = puVar7 + 4;
    *puVar7 = 0;
    puVar8 = puVar8 + 2;
  } while (iVar9 != 0);
  uVar3 = FUN_8003a3a0(*DAT_80004990);
  uVar4 = FUN_8003a0c4(uVar3,uVar4);
  puVar6 = DAT_80004994;
  *DAT_80004994 = uVar4;
  puVar6[1] = 0;
  FUN_800164e4(DAT_80004984);
  puVar7 = (undefined4 *)(DAT_80004998 + 0x5f0);
  puVar6 = (undefined4 *)(DAT_80004998 + 0x5f2);
  puVar8 = DAT_80004998;
  iVar9 = DAT_8000499c;
  do {
    uVar4 = FUN_8003a44c(*puVar6,*puVar6);
    uVar3 = FUN_8003a44c(*puVar7,*puVar7);
    FUN_80039fd8(uVar3,uVar4);
    FUN_80039f74();
    FUN_80036618();
    iVar5 = FUN_800396bc();
    if (iVar5 < 0) {
      iVar5 = 0;
    }
    else {
      if (400 < iVar5) {
        iVar5 = 400;
      }
    }
    iVar9 = iVar9 + -1;
    puVar6 = puVar6 + 2;
    puVar7 = puVar7 + 2;
    *puVar8 = (short)iVar5;
    puVar8 = puVar8 + 1;
  } while (iVar9 != 0);
  return;
}



void FUN_800049a0(void)

{
  int dividend;
  int iVar1;
  int iVar2;
  ushort *puVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  
  if (*(byte *)(DAT_80004a40 + 10) < 0xb) {
    iVar2 = 100;
    iVar1 = 600;
  }
  else {
    iVar2 = 200;
    iVar1 = 0x4b0;
  }
  puVar3 = (ushort *)(DAT_80004a48 + iVar2 * 2);
  uVar6 = 0;
  dividend = 0;
  uVar4 = iVar1 - iVar2 & 0xffff;
  uVar7 = DAT_80004a44;
  do {
    uVar5 = (uint)*puVar3;
    if (uVar6 < uVar5) {
      uVar6 = uVar5;
    }
    if (uVar5 < uVar7) {
      uVar7 = uVar5;
    }
    uVar4 = uVar4 - 1 & 0xffff;
    dividend = dividend + uVar5;
    puVar3 = puVar3 + 1;
  } while (uVar4 != 0);
  iVar1 = divide(dividend,iVar1 - iVar2);
  iVar2 = DAT_80004a4c;
  *(short *)(DAT_80004a4c + 0xe4) = (short)uVar6;
  *(short *)(iVar2 + 0xe6) = (short)uVar7;
  *(short *)(iVar2 + 0xea) = (short)(uVar6 + uVar7 >> 1);
  *(short *)(iVar2 + 0xe8) = (short)uVar6 - (short)uVar7;
  *(short *)(iVar2 + 0xec) = (short)iVar1;
  return;
}



void FUN_80004a50(void)

{
  int iVar1;
  undefined *puVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  ushort uVar6;
  ushort *puVar7;
  uint uVar8;
  uint uVar9;
  uint in_r12;
  undefined8 uVar10;
  uint local_48;
  uint local_44;
  ushort local_40;
  uint local_3c;
  uint local_2c;
  int local_28;
  
  iVar1 = DAT_80005048;
  local_3c = 0;
  local_44 = 0;
  local_2c = 0;
  if (*(byte *)(DAT_80005048 + 10) < 0xb) {
    uVar9 = 2;
    local_40 = 0x2e4;
  }
  else {
    uVar9 = 10;
    local_40 = 0x5d2;
  }
  uVar3 = (uint)*(ushort *)(DAT_80005050 + 0xea);
  local_48 = 10;
  if (10 < local_40) {
    do {
      puVar7 = (ushort *)(DAT_8000504c + local_48 * 2);
      uVar8 = (uint)puVar7[-1];
      if (uVar8 < uVar3) {
        in_r12 = (uint)*puVar7;
      }
      if ((uVar8 < uVar3 && uVar3 < in_r12) || ((uVar8 < uVar3 && (uVar3 <= *puVar7)))) {
        if (local_3c == 0) {
          local_3c = local_48;
        }
        local_2c = local_2c + 1;
        local_44 = local_48;
      }
      local_48 = local_48 + 1;
    } while (local_48 < local_40);
  }
  local_28 = 0;
  uVar8 = local_3c;
  while (uVar8 < local_44) {
    if (uVar3 < *(ushort *)(DAT_8000504c + uVar8 * 2)) {
      local_28 = local_28 + 1;
    }
    uVar8 = uVar8 + 1;
  }
  iVar4 = divide(local_28 * 1000,local_44 - local_3c);
  uVar3 = (uint)(byte)*PTR_DAT_80005054;
  *(int *)(DAT_80005058 + uVar3 * 4) = iVar4;
  if (local_2c < 2) {
    local_2c = 2;
  }
  iVar4 = DAT_8000505c;
  if (*(byte *)(iVar1 + 10) < 0x1b) {
    iVar4 = 100;
  }
  uVar8 = divide((local_44 - local_3c) * iVar4,local_2c - 1);
  switch(*(undefined *)(iVar1 + 10)) {
  case 9:
    *(uint *)(DAT_80005064 + uVar3 * 4) = DAT_80005070 * uVar8;
    break;
  case 10:
    *(uint *)(DAT_80005064 + uVar3 * 4) = uVar8 * 4000;
    break;
  case 0xb:
    *(uint *)(DAT_80005064 + uVar3 * 4) = uVar8 * 2000;
    break;
  case 0xc:
    *(uint *)(DAT_80005064 + uVar3 * 4) = uVar8 * 1000;
    break;
  case 0xd:
    *(uint *)(DAT_80005064 + uVar3 * 4) = uVar8 * 400;
    break;
  case 0xe:
    *(uint *)(DAT_80005064 + uVar3 * 4) = uVar8 * 200;
    break;
  case 0xf:
    *(uint *)(DAT_80005064 + uVar3 * 4) = uVar8 * 100;
    break;
  case 0x10:
    *(uint *)(DAT_80005064 + uVar3 * 4) = uVar8 * 0x28;
    break;
  case 0x11:
    *(uint *)(DAT_80005064 + uVar3 * 4) = uVar8 * 0x14;
    break;
  case 0x12:
    *(uint *)(DAT_80005064 + uVar3 * 4) = uVar8 * 10;
    break;
  case 0x13:
    *(uint *)(DAT_80005064 + uVar3 * 4) = uVar8 << 2;
    break;
  case 0x14:
    *(uint *)(DAT_80005064 + uVar3 * 4) = uVar8 << 1;
    break;
  case 0x15:
    *(uint *)(DAT_80005064 + uVar3 * 4) = uVar8;
    break;
  case 0x16:
    *(uint *)(DAT_80005064 + uVar3 * 4) =
         (uint)((ulonglong)(uVar8 * 10) * (ulonglong)DAT_80005068 >> 0x23);
    break;
  case 0x17:
    *(uint *)(DAT_80005064 + uVar3 * 4) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_8000506c >> 0x22)
    ;
    break;
  case 0x18:
    *(uint *)(DAT_80005064 + uVar3 * 4) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_8000506c >> 0x23)
    ;
    break;
  case 0x19:
    *(uint *)(DAT_80005064 + uVar3 * 4) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_8000506c >> 0x24)
    ;
    break;
  case 0x1a:
    *(uint *)(DAT_80005064 + uVar3 * 4) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_80005068 >> 0x24)
    ;
    break;
  case 0x1b:
    *(uint *)(DAT_80005064 + uVar3 * 4) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_80005068 >> 0x25)
    ;
    break;
  case 0x1c:
    *(uint *)(DAT_80005064 + uVar3 * 4) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_80005068 >> 0x26)
    ;
    break;
  case 0x1d:
    *(uint *)(DAT_80005064 + uVar3 * 4) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_80005060 >> 0x25)
    ;
  }
  puVar2 = PTR_DAT_80005054;
  uVar3 = uVar3 + 1 & 0xff;
  *PTR_DAT_80005054 = (char)uVar3;
  if (uVar9 <= uVar3) {
    if (uVar9 != 0) {
      uVar3 = DAT_80005064;
    }
    *puVar2 = 0;
    uVar8 = 0;
    local_48 = 0;
    if (uVar9 != 0) {
      do {
        if (uVar8 < *(uint *)(uVar3 + local_48 * 4)) {
          uVar8 = *(uint *)(uVar3 + local_48 * 4);
        }
        local_48 = local_48 + 1;
      } while (local_48 < uVar9);
    }
    uVar3 = translate_parameter(0xe,~(uVar8 >> 0x10 | uVar8 << 0x10));
    iVar4 = DAT_80005050;
    *(uint *)(DAT_80005050 + 0x164) = uVar3;
    uVar3 = (uint)*(byte *)(iVar1 + 10);
    if (uVar3 < 0x1b) {
      *(uint *)(iVar4 + 0x174) = uVar8;
    }
    else {
      *(uint *)(iVar4 + 0x174) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_80005060 >> 0x26);
      uVar10 = FUN_800397d0();
      FUN_80039890((int)uVar10,(int)((ulonglong)uVar10 >> 0x20),DAT_80005074,DAT_80005078);
      uVar10 = FUN_8003972c();
      uVar3 = (uint)((ulonglong)uVar10 >> 0x20);
      *(int *)(iVar4 + 0x164) = (int)uVar10;
    }
    uVar8 = DAT_8000507c;
    if (uVar9 != 0) {
      uVar3 = DAT_80005058;
    }
    uVar5 = 0;
    local_48 = 0;
    if (uVar9 != 0) {
      do {
        if (uVar5 < *(uint *)(uVar3 + local_48 * 4)) {
          uVar5 = *(uint *)(uVar3 + local_48 * 4);
        }
        local_48 = local_48 + 1;
      } while (local_48 < uVar9);
    }
    uVar9 = (uint)((ulonglong)uVar5 * (ulonglong)DAT_8000506c >> 0x23);
    *(uint *)(iVar4 + 0x1a4) = uVar9;
    *(uint *)(iVar4 + 0x1b4) = 100 - uVar9;
    uVar9 = *(uint *)(iVar4 + 0x174);
    if (uVar9 < uVar8) {
      uVar5 = (uint)((ulonglong)(uVar9 * uVar5) * (ulonglong)DAT_80005060 >> 0x26);
    }
    else {
      uVar5 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_80005060 >> 0x26) * uVar5;
    }
    *(uint *)(iVar4 + 0x184) = uVar5;
    *(uint *)(iVar4 + 0x194) = uVar9 - uVar5;
  }
  iVar4 = DAT_80005050;
  if (*(ushort *)(DAT_80005050 + 0xe8) < 0x14) {
    local_3c = 10;
    local_44 = 0x2e4;
    *(undefined4 *)(DAT_80005050 + 0x164) = 0;
    *(undefined4 *)(iVar4 + 0x174) = 0;
    *(undefined4 *)(iVar4 + 0x184) = 0;
    *(undefined4 *)(iVar4 + 0x194) = 0;
    *(undefined4 *)(iVar4 + 0x1a4) = 0;
    *(undefined4 *)(iVar4 + 0x1b4) = 0;
  }
  *(short *)(iVar4 + 0xf8) = (short)local_3c;
  *(short *)(iVar4 + 0xfa) = (short)local_44;
  if (*(char *)(iVar1 + 3) == '\x06') {
    uVar6 = 0xf;
  }
  else {
    uVar6 = 7;
  }
  if (*(ushort *)(iVar4 + 0xe8) < uVar6) {
    *(undefined4 *)(iVar4 + 0x164) = 0;
  }
  return;
}



void FUN_80005080(void)

{
  undefined2 uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  
  iVar4 = DAT_80005194;
  iVar3 = DAT_80005190;
  iVar2 = DAT_8000518c;
  uVar6 = DAT_80005188;
  uVar7 = 0;
  uVar1 = (undefined2)DAT_80005188;
  *(undefined2 *)(DAT_8000518c + 0x2e) = uVar1;
  *(undefined2 *)(iVar2 + 0x32) = uVar1;
  uVar5 = DAT_80005198;
  uVar6 = uVar6 | (int)uVar6 >> 6;
  if (*(char *)(iVar2 + 0x22) != '\0') {
    do {
      iVar8 = iVar3 + uVar6 * 2;
      if ((*(ushort *)(iVar4 + 0xea) < *(ushort *)(iVar8 + -2)) &&
         (*(ushort *)(iVar8 + 2) < *(ushort *)(iVar4 + 0xea))) {
        uVar7 = uVar7 + 1 & 0xfffeffff;
        if (uVar7 == 1) {
          *(short *)(iVar2 + 0x2e) = (short)uVar6;
          uVar6 = uVar6 + 10 & 0xfffeffff;
        }
        else {
          if (uVar7 == 2) goto LAB_80005118;
        }
      }
      uVar6 = uVar6 + 1 & 0xfffeffff;
      if (uVar5 <= uVar6) {
        return;
      }
    } while( true );
  }
  do {
    iVar8 = iVar3 + uVar6 * 2;
    if ((*(ushort *)(iVar8 + -2) < *(ushort *)(iVar4 + 0xea)) &&
       (*(ushort *)(iVar4 + 0xea) < *(ushort *)(iVar8 + 2))) {
      uVar7 = uVar7 + 1 & 0xfffeffff;
      if (uVar7 == 1) {
        *(short *)(iVar2 + 0x2e) = (short)uVar6;
        uVar6 = uVar6 + 0x14 & 0xfffeffff;
      }
      else {
        if (uVar7 == 2) {
LAB_80005118:
          *(short *)(iVar2 + 0x32) = (short)uVar6;
          return;
        }
      }
    }
    uVar6 = uVar6 + 1 & 0xfffeffff;
    if (uVar5 <= uVar6) {
      return;
    }
  } while( true );
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x80005784

void FUN_8000519c(void)

{
  char cVar1;
  ushort uVar2;
  ushort uVar3;
  int *piVar4;
  int *piVar5;
  int iVar6;
  int iVar7;
  undefined *puVar8;
  ushort uVar9;
  uint uVar10;
  uint uVar11;
  int iVar12;
  int iVar13;
  undefined4 uVar14;
  uint uVar15;
  int iVar16;
  uint uVar17;
  int iVar18;
  uint uVar19;
  int iVar20;
  int unaff_r4;
  uint divisor;
  uint uVar21;
  int iVar22;
  bool bVar23;
  undefined8 uVar24;
  undefined8 uVar25;
  
  iVar7 = DAT_80005804;
  iVar13 = DAT_80005800;
  iVar6 = DAT_800057fc;
  uVar10 = (uint)*(ushort *)(DAT_80005804 + 0xf8);
  uVar19 = (uint)*(ushort *)(DAT_80005804 + 0xfa);
  uVar9 = *(ushort *)(DAT_80005804 + 0xe4);
  uVar17 = 0;
  if (*(byte *)(DAT_800057fc + 10) < 0xb) {
    divisor = 2;
  }
  else {
    divisor = 10;
  }
  uVar15 = 0;
  uVar2 = *(ushort *)(DAT_80005804 + 0xe6);
  uVar3 = *(ushort *)(DAT_80005804 + 0xe8);
  uVar11 = uVar10;
  if (uVar10 < uVar19) {
    do {
      uVar21 = (uint)*(ushort *)(DAT_80005800 + uVar11 * 2);
      uVar11 = uVar11 + 1 & 0xfffeffff;
      if (uVar21 < *(ushort *)(DAT_800057fc + 6)) {
        uVar15 = uVar15 + (*(ushort *)(DAT_800057fc + 6) - uVar21);
      }
      else {
        uVar17 = uVar17 + (uVar21 - *(ushort *)(DAT_800057fc + 6));
      }
    } while (uVar11 < uVar19);
    if (uVar15 <= uVar17) goto LAB_80005238;
    iVar12 = uVar15 - uVar17;
    *(undefined *)(DAT_80005804 + 0x123) = 1;
  }
  else {
LAB_80005238:
    iVar12 = uVar17 - uVar15;
    *(undefined *)(DAT_80005804 + 0x123) = 0;
  }
  uVar17 = divide(iVar12,uVar19 - uVar10);
  if (uVar3 < 0x28) {
    *(undefined2 *)(iVar7 + 0xf8) = 0x32;
    *(undefined2 *)(iVar7 + 0xfa) = 0x3b6;
  }
  iVar12 = 0;
  uVar10 = (uint)*(ushort *)(iVar7 + 0xf8);
  while (uVar10 < *(ushort *)(iVar7 + 0xfa)) {
    uVar19 = (uint)*(ushort *)(iVar13 + uVar10 * 2);
    uVar10 = uVar10 + 1 & 0xfffeffff;
    if (uVar19 < *(ushort *)(iVar6 + 6)) {
      iVar16 = *(ushort *)(iVar6 + 6) - uVar19;
    }
    else {
      iVar16 = uVar19 - *(ushort *)(iVar6 + 6);
    }
    iVar12 = iVar12 + iVar16 * iVar16;
  }
  iVar13 = divide(iVar12,(uint)*(ushort *)(iVar7 + 0xfa) - (uint)*(ushort *)(iVar7 + 0xf8));
  piVar5 = DAT_8000580c;
  puVar8 = PTR_DAT_80005808;
  uVar10 = (uint)(byte)PTR_DAT_80005808[1];
  DAT_8000580c[uVar10] = (uint)uVar9;
  piVar5[uVar10 + 0x1e] = (uint)uVar2;
  piVar5[uVar10 + 0x3c] = iVar13;
  uVar19 = uVar10 + 1 & 0xff;
  piVar5[uVar10 + 0x5a] = uVar17 & 0xffff;
  puVar8[1] = (char)uVar19;
  if (uVar19 < divisor) goto LAB_80005758;
  iVar16 = divisor - 1;
  iVar12 = 0;
  puVar8[1] = 0;
  iVar13 = iVar16 >> 1;
  if (0 < iVar16) {
    iVar12 = *piVar5;
    iVar22 = piVar5[1];
    iVar20 = 0;
    piVar4 = piVar5;
    iVar18 = iVar13;
    while (iVar18 != 0) {
      iVar12 = iVar12 + iVar22;
      iVar22 = piVar4[3];
      iVar18 = iVar18 + -1;
      iVar20 = iVar20 + piVar4[2];
      piVar4 = piVar4 + 2;
    }
    iVar12 = iVar12 + iVar20;
  }
  if (-1 < iVar16) {
    iVar12 = iVar12 + piVar5[iVar16];
  }
  uVar17 = divide(iVar12,divisor);
  uVar17 = uVar17 & 0xffff;
  iVar12 = 0;
  if (0 < iVar16) {
    iVar12 = *(int *)(DAT_80005810 + 4);
    iVar22 = *(int *)(DAT_80005810 + 8);
    iVar20 = 0;
    piVar5 = (int *)(DAT_80005810 + 4);
    iVar18 = iVar13;
    while (iVar18 != 0) {
      iVar12 = iVar12 + iVar22;
      iVar22 = piVar5[3];
      iVar18 = iVar18 + -1;
      iVar20 = iVar20 + piVar5[2];
      piVar5 = piVar5 + 2;
    }
    iVar12 = iVar12 + iVar20;
  }
  if (-1 < (int)(divisor - 1)) {
    iVar12 = iVar12 + *(int *)(DAT_80005814 + (divisor - 1) * 4);
  }
  uVar10 = divide(iVar12,divisor);
  cVar1 = *(char *)(iVar6 + 0x23);
  uVar10 = uVar10 & 0xffff;
  bVar23 = cVar1 == '\0';
  if (bVar23) {
    cVar1 = *(char *)(iVar6 + 0x21);
  }
  if ((bVar23 && cVar1 == '\0') && (*(char *)(DAT_80005818 + 4) != '\0')) {
    *(short *)(iVar6 + 0x26) = (short)(uVar17 + uVar10 >> 1);
    set_fpga_trigger_level();
  }
  iVar12 = 0;
  if (0 < iVar16) {
    iVar12 = *(int *)(DAT_8000581c + 4);
    iVar22 = *(int *)(DAT_8000581c + 8);
    iVar20 = 0;
    piVar5 = (int *)(DAT_8000581c + 4);
    iVar18 = iVar13;
    while (iVar18 != 0) {
      iVar12 = iVar12 + iVar22;
      iVar22 = piVar5[3];
      iVar18 = iVar18 + -1;
      iVar20 = iVar20 + piVar5[2];
      piVar5 = piVar5 + 2;
    }
    iVar12 = iVar12 + iVar20;
  }
  if (-1 < (int)(divisor - 1)) {
    iVar12 = iVar12 + *(int *)(DAT_80005820 + (divisor - 1) * 4);
  }
  uVar19 = divide(iVar12,divisor);
  iVar12 = 0;
  if (0 < iVar16) {
    iVar12 = *(int *)(DAT_80005824 + 4);
    iVar16 = *(int *)(DAT_80005824 + 8);
    iVar22 = 0;
    piVar5 = (int *)(DAT_80005824 + 4);
    while (iVar13 != 0) {
      iVar12 = iVar12 + iVar16;
      iVar16 = piVar5[3];
      iVar13 = iVar13 + -1;
      iVar22 = iVar22 + piVar5[2];
      piVar5 = piVar5 + 2;
    }
    iVar12 = iVar12 + iVar22;
  }
  if (-1 < (int)(divisor - 1)) {
    iVar12 = iVar12 + *(int *)(DAT_80005828 + (divisor - 1) * 4);
  }
  iVar12 = divide(iVar12,divisor);
  iVar13 = DAT_80005834;
  switch(*(undefined *)(iVar6 + 3)) {
  case 0:
    unaff_r4 = DAT_8000582c;
    break;
  case 1:
    unaff_r4 = DAT_80005830;
    break;
  case 2:
    unaff_r4 = 1000;
    break;
  case 3:
    unaff_r4 = 500;
    break;
  case 4:
    unaff_r4 = 200;
    break;
  case 5:
    unaff_r4 = 100;
    break;
  case 6:
    unaff_r4 = 0x32;
  }
  if (uVar17 < *(ushort *)(iVar6 + 6)) {
    *(undefined *)(iVar7 + 0x101) = 1;
    iVar16 = (int)((ulonglong)
                   ((longlong)iVar13 * (longlong)(int)(unaff_r4 * (*(ushort *)(iVar6 + 6) - uVar17))
                   ) >> 0x20);
    *(int *)(iVar7 + 0x104) = (iVar16 >> 4) - (iVar16 >> 0x1f);
  }
  else {
    *(undefined *)(iVar7 + 0x101) = 0;
    iVar16 = (int)((ulonglong)
                   ((longlong)iVar13 * (longlong)(int)(unaff_r4 * (uVar17 - *(ushort *)(iVar6 + 6)))
                   ) >> 0x20);
    *(int *)(iVar7 + 0x104) = (iVar16 >> 4) - (iVar16 >> 0x1f);
  }
  if (uVar10 < *(ushort *)(iVar6 + 6)) {
    *(undefined *)(iVar7 + 0x113) = 1;
    iVar16 = (int)((ulonglong)
                   ((longlong)iVar13 * (longlong)(int)(unaff_r4 * (*(ushort *)(iVar6 + 6) - uVar10))
                   ) >> 0x20);
    *(int *)(iVar7 + 0x114) = (iVar16 >> 4) - (iVar16 >> 0x1f);
  }
  else {
    *(undefined *)(iVar7 + 0x113) = 0;
    iVar16 = (int)((ulonglong)
                   ((longlong)iVar13 * (longlong)(int)(unaff_r4 * (uVar10 - *(ushort *)(iVar6 + 6)))
                   ) >> 0x20);
    *(int *)(iVar7 + 0x114) = (iVar16 >> 4) - (iVar16 >> 0x1f);
  }
  uVar24 = FUN_800397d0(unaff_r4);
  FUN_800397d0(iVar12);
  uVar25 = FUN_80036618();
  uVar24 = FUN_80039890((int)uVar25,(int)((ulonglong)uVar25 >> 0x20),(int)uVar24,
                        (int)((ulonglong)uVar24 >> 0x20));
  FUN_800393ec((int)uVar24,(int)((ulonglong)uVar24 >> 0x20),0,DAT_80005838);
  uVar14 = FUN_8003972c();
  *(undefined4 *)(iVar7 + 0x134) = uVar14;
  iVar13 = (int)((ulonglong)((longlong)iVar13 * (longlong)(int)(unaff_r4 * (uVar19 & 0xffff))) >>
                0x20);
  iVar13 = (iVar13 >> 4) - (iVar13 >> 0x1f);
  *(int *)(iVar7 + 0x124) = iVar13;
  cVar1 = *(char *)(iVar7 + 0x101);
  if (cVar1 == *(char *)(iVar7 + 0x113)) {
    if (cVar1 != '\0') {
      iVar12 = *(int *)(iVar7 + 0x114);
      iVar16 = *(int *)(iVar7 + 0x104);
    }
    else {
      iVar12 = *(int *)(iVar7 + 0x104);
      iVar16 = *(int *)(iVar7 + 0x114);
    }
    iVar12 = iVar12 - iVar16;
    if (cVar1 == '\0') goto LAB_80005680;
    *(int *)(iVar7 + 0x144) = iVar12;
  }
  else {
    iVar12 = *(int *)(iVar7 + 0x104) + *(int *)(iVar7 + 0x114);
LAB_80005680:
    *(int *)(iVar7 + 0x144) = iVar12;
  }
  uVar17 = *(uint *)(iVar7 + 0x104);
  uVar10 = *(uint *)(iVar7 + 0x114);
  if (uVar17 < uVar10) {
    *(uint *)(iVar7 + 0x154) = uVar10;
  }
  else {
    *(uint *)(iVar7 + 0x154) = uVar17;
  }
  if (*(char *)(iVar6 + 2) == '\x01') {
    *(uint *)(iVar7 + 0x104) = uVar17 * 10;
    *(uint *)(iVar7 + 0x114) = uVar10 * 10;
    *(int *)(iVar7 + 0x124) = iVar13 * 10;
    *(int *)(iVar7 + 0x134) = *(int *)(iVar7 + 0x134) * 10;
    *(int *)(iVar7 + 0x144) = *(int *)(iVar7 + 0x144) * 10;
    iVar13 = *(int *)(iVar7 + 0x154) * 10;
  }
  else {
    if (*(char *)(iVar6 + 2) != '\x02') goto LAB_80005758;
    *(uint *)(iVar7 + 0x104) = uVar17 * 100;
    *(uint *)(iVar7 + 0x114) = uVar10 * 100;
    *(int *)(iVar7 + 0x124) = iVar13 * 100;
    *(int *)(iVar7 + 0x134) = *(int *)(iVar7 + 0x134) * 100;
    *(int *)(iVar7 + 0x144) = *(int *)(iVar7 + 0x144) * 100;
    iVar13 = *(int *)(iVar7 + 0x154) * 100;
  }
  *(int *)(iVar7 + 0x154) = iVar13;
LAB_80005758:
  if (*(char *)(iVar6 + 3) == '\x06') {
    uVar9 = 0xf;
  }
  else {
    uVar9 = 7;
  }
  if (*(ushort *)(iVar7 + 0xe8) < uVar9) {
    *(undefined4 *)(iVar7 + 0x144) = 0;
  }
  if (0x13 < *(ushort *)(iVar7 + 0xe8)) {
    return;
  }
  *(undefined4 *)(iVar7 + 0x164) = 0;
  *(undefined4 *)(iVar7 + 0x174) = 0;
  *(undefined4 *)(iVar7 + 0x184) = 0;
  *(undefined4 *)(iVar7 + 0x194) = 0;
  *(undefined4 *)(iVar7 + 0x1a4) = 0;
  *(undefined4 *)(iVar7 + 0x1b4) = 0;
  *(undefined4 *)(iVar7 + 0x144) = 0;
  if (*(ushort *)(iVar6 + 6) + 5 <= (uint)*(ushort *)(iVar7 + 0xea)) {
    return;
  }
  if (*(ushort *)(iVar7 + 0xea) + 5 <= (uint)*(ushort *)(iVar6 + 6)) {
    return;
  }
  *(undefined4 *)(iVar7 + 0x134) = 0;
  *(undefined4 *)(iVar7 + 0x104) = 0;
  *(undefined4 *)(iVar7 + 0x114) = 0;
  *(undefined4 *)(iVar7 + 0x124) = 0;
  *(undefined4 *)(iVar7 + 0x154) = 0;
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x8000585c
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_8000583c(void)

{
  short sVar1;
  ushort uVar2;
  bool bVar3;
  undefined *puVar4;
  void *pvVar5;
  uint uVar6;
  undefined2 uVar7;
  void *pvVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  int iVar12;
  uint unaff_r5;
  code *UNRECOVERED_JUMPTABLE_00;
  bool bVar13;
  bool bVar14;
  
  puVar4 = PTR_DAT_80006024;
  iVar12 = DAT_80006020;
  bVar3 = false;
  if (*(ushort *)(DAT_8000601c + 0xe8) < 0xf) {
                    // WARNING: Could not recover jumptable at 0x8000585c. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)();
    return;
  }
  if (*(char *)(DAT_80006020 + 10) == '\x1b') {
    unaff_r5 = 10;
  }
  if (*(char *)(DAT_80006020 + 10) == '\x1c') {
    unaff_r5 = 0xf;
  }
  sVar1 = *(short *)(PTR_DAT_80006024 + 0x20);
  if (0x1c < *(byte *)(DAT_80006020 + 10)) {
    unaff_r5 = 0x1e;
  }
  pvVar8 = DAT_80006030;
  if ((((sVar1 != 0) && (pvVar8 = DAT_80006034, sVar1 != 1)) && (pvVar8 = DAT_80006038, sVar1 != 2))
     && (pvVar8 = DAT_8000603c, sVar1 != 3)) {
    if (sVar1 == 4) {
      pvVar8 = (void *)((int)DAT_8000602c + 32000);
    }
    else {
      pvVar8 = DAT_80006040;
      if (((((sVar1 != 5) && (pvVar8 = DAT_80006044, sVar1 != 6)) &&
           ((pvVar8 = DAT_80006048, sVar1 != 7 &&
            ((pvVar8 = DAT_8000604c, sVar1 != 8 && (pvVar8 = DAT_80006050, sVar1 != 9)))))) &&
          ((pvVar8 = DAT_80006054, sVar1 != 10 &&
           ((((pvVar8 = DAT_80006058, sVar1 != 0xb && (pvVar8 = DAT_8000605c, sVar1 != 0xc)) &&
             (pvVar8 = DAT_80006060, sVar1 != 0xd)) &&
            ((pvVar8 = DAT_80006064, sVar1 != 0xe && (pvVar8 = DAT_80006068, sVar1 != 0xf)))))))) &&
         (((pvVar8 = DAT_8000606c, sVar1 != 0x10 &&
           ((pvVar8 = DAT_80006070, sVar1 != 0x11 && (pvVar8 = DAT_80006074, sVar1 != 0x12)))) &&
          (pvVar8 = DAT_80006078, sVar1 != 0x13)))) {
        if (sVar1 == 0x14) {
          pvVar8 = (void *)((int)DAT_8000602c + 64000);
        }
        else {
          pvVar8 = DAT_8000607c;
          if ((((sVar1 != 0x15) && (pvVar8 = DAT_80006080, sVar1 != 0x16)) &&
              (pvVar8 = DAT_80006084, sVar1 != 0x17)) &&
             ((((pvVar8 = DAT_80006088, sVar1 != 0x18 && (pvVar8 = DAT_8000608c, sVar1 != 0x19)) &&
               ((pvVar8 = DAT_80006090, sVar1 != 0x1a &&
                ((pvVar8 = DAT_80006094, sVar1 != 0x1b && (pvVar8 = DAT_80006098, sVar1 != 0x1c)))))
               ) && (pvVar8 = DAT_8000609c, sVar1 != 0x1d)))) goto LAB_80005a78;
        }
      }
    }
  }
  memcpy(pvVar8,DAT_8000602c,DAT_80006028);
LAB_80005a78:
  uVar6 = DAT_800060a0;
  uVar9 = *(ushort *)(PTR_DAT_80006024 + 0x20) + 1 & 0xfffeffff;
  uVar7 = (undefined2)uVar9;
  if (*(char *)(iVar12 + 0x23) == '\x01') {
    uVar9 = (uint)*(ushort *)(iVar12 + 0x2e);
    bVar14 = DAT_800060a0 <= uVar9;
    bVar13 = uVar9 == DAT_800060a0;
    if (bVar14 && !bVar13) {
      uVar9 = (uint)*(ushort *)(iVar12 + 0x32);
    }
    if (bVar14 && !bVar13) {
      bVar14 = DAT_800060a0 <= uVar9;
      bVar13 = uVar9 == DAT_800060a0;
    }
    if (bVar14 && !bVar13) {
      uVar11 = (uint)*(ushort *)(puVar4 + 10);
      uVar2 = *(ushort *)(PTR_DAT_80006024 + 0xe);
      uVar9 = (uint)uVar2;
      if (((((int)(uVar11 - 10) < (int)(uint)*(ushort *)(iVar12 + 0x2e)) &&
           ((uint)*(ushort *)(iVar12 + 0x2e) < uVar11 + 10)) ||
          (((int)(uVar11 - 10) < (int)(uint)*(ushort *)(iVar12 + 0x32) &&
           ((uint)*(ushort *)(iVar12 + 0x32) < uVar11 + 10)))) ||
         ((iVar10 = uVar11 - ((uint)*(ushort *)(iVar12 + 0x32) - (uint)*(ushort *)(iVar12 + 0x2e) &
                             0xffff), iVar10 + -10 < (int)(uint)*(ushort *)(iVar12 + 0x2e) &&
          ((int)(uint)*(ushort *)(iVar12 + 0x2e) < iVar10 + 10)))) {
        if (uVar9 < unaff_r5) {
          *(ushort *)(puVar4 + 0xe) = uVar2 + 1;
        }
        bVar3 = uVar9 >= unaff_r5;
        *(undefined2 *)(puVar4 + 0x20) = uVar7;
      }
      else {
        *(undefined2 *)(puVar4 + 10) = *(undefined2 *)(iVar12 + 0x2e);
        if (uVar9 != 0) {
          *(ushort *)(puVar4 + 0xe) = uVar2 - 1;
        }
      }
    }
    if (unaff_r5 <= *(ushort *)(puVar4 + 0x20)) {
      *(undefined2 *)(puVar4 + 0x20) = 0;
    }
    if (!bVar3) {
                    // WARNING: Could not recover jumptable at 0x80005bbc. Too many branches
                    // WARNING: Treating indirect jump as call
      (*UNRECOVERED_JUMPTABLE_00)();
      return;
    }
  }
  else {
    *(undefined2 *)(puVar4 + 0x20) = uVar7;
    if (unaff_r5 <= uVar9) {
      *(undefined2 *)(puVar4 + 0x20) = 0;
    }
  }
  pvVar8 = DAT_80006040;
  if (*(char *)(DAT_80006020 + 10) == '\x1b') {
    iVar12 = 0;
    do {
      uVar9 = divide((uint)*(ushort *)((int)DAT_80006030 + iVar12 * 2) +
                     (uint)*(ushort *)((int)pvVar8 + iVar12 * 2 + 6000) +
                     (uint)*(ushort *)((int)pvVar8 + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)pvVar8 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2 + 6000) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2 + 4000) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)DAT_80006048 + iVar12 * 2) +
                     (uint)*(ushort *)((int)pvVar8 + iVar12 * 2 + 8000),unaff_r5);
      uVar9 = uVar9 & 0xffff;
      uVar7 = (undefined2)uVar9;
      if (uVar9 < 0x2f) {
        uVar7 = 0x2f;
      }
      else {
        if (0x1c0 < uVar9) {
          uVar7 = 0x1c0;
        }
      }
      iVar10 = iVar12 * 2;
      iVar12 = iVar12 + 1;
      *(undefined2 *)((int)DAT_8000602c + iVar10) = uVar7;
    } while (iVar12 < (int)uVar6);
  }
  if (*(char *)(DAT_80006020 + 10) == '\x1c') {
    iVar12 = 0;
    do {
      uVar9 = divide((uint)*(ushort *)((int)DAT_80006064 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2 + 6000) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2 + 4000) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2 + 8000) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2 + 10000) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2 + 12000) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2 + 14000) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2 + 16000) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2 + 18000) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2 + 20000) +
                     (uint)*(ushort *)((int)DAT_8000605c + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006060 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006030 + iVar12 * 2),unaff_r5);
      uVar9 = uVar9 & 0xffff;
      uVar7 = (undefined2)uVar9;
      if (uVar9 < 0x2f) {
        uVar7 = 0x2f;
      }
      else {
        if (0x1c0 < uVar9) {
          uVar7 = 0x1c0;
        }
      }
      iVar10 = iVar12 * 2;
      iVar12 = iVar12 + 1;
      *(undefined2 *)((int)DAT_8000602c + iVar10) = uVar7;
    } while (iVar12 < (int)uVar6);
  }
  pvVar5 = DAT_80006050;
  pvVar8 = DAT_80006038;
  if (*(char *)(DAT_80006020 + 10) != '\x1d') {
                    // WARNING: Could not recover jumptable at 0x80005df0. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)();
    return;
  }
  iVar12 = 0;
  do {
    uVar9 = divide_2((uint)*(ushort *)((int)DAT_8000606c + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006060 + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)DAT_80006040 + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)DAT_80006034 + iVar12 * 2) +
                     (uint)*(ushort *)((int)pvVar8 + iVar12 * 2) +
                     (uint)*(ushort *)((int)pvVar8 + iVar12 * 2 + 4000) +
                     (uint)*(ushort *)((int)pvVar8 + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)DAT_80006040 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006048 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006048 + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)pvVar5 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006054 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006058 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006058 + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)DAT_80006060 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006068 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006070 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006074 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006078 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006030 + iVar12 * 2) +
                     (uint)*(ushort *)(DAT_800060a4 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_8000607c + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006080 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006084 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006088 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_8000608c + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006090 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006094 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80006098 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_8000609c + iVar12 * 2),unaff_r5);
    uVar9 = uVar9 & 0xffff;
    uVar7 = (undefined2)uVar9;
    if (uVar9 < 0x2f) {
      uVar7 = 0x2f;
    }
    else {
      if (0x1c0 < uVar9) {
        uVar7 = 0x1c0;
      }
    }
    iVar10 = iVar12 * 2;
    iVar12 = iVar12 + 1;
    *(undefined2 *)((int)DAT_8000602c + iVar10) = uVar7;
  } while (iVar12 < (int)uVar6);
                    // WARNING: Could not recover jumptable at 0x80006018. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE_00)();
  return;
}



void FUN_800060a8(void)

{
  uint uVar1;
  ushort uVar2;
  uint uVar3;
  ushort uVar4;
  uint uVar5;
  ushort *puVar6;
  ushort *puVar7;
  int unaff_r4;
  int iVar8;
  int iVar9;
  code **ppcVar10;
  undefined auStack4 [4];
  
  ppcVar10 = (code **)&stack0xffffffe8;
  iVar8 = DAT_80006154;
  if ((*(byte *)(DAT_80006150 + 10) < 0x19) &&
     (iVar8 = DAT_80006158, *(byte *)(DAT_80006150 + 10) < 9)) {
    iVar8 = DAT_8000615c;
  }
  uVar5 = translate_parameter(0xb,(uint)*(byte *)(DAT_80006150 + 3));
  uVar3 = DAT_80006168;
  iVar9 = iVar8;
  if (iVar8 == 0) {
    ppcVar10 = (code **)auStack4;
    iVar9 = unaff_r4;
  }
  puVar6 = DAT_80006164;
  puVar7 = DAT_80006160;
                    // WARNING: Could not recover jumptable at 0x800060f0. Too many branches
                    // WARNING: Treating indirect jump as call
  if (iVar8 == 0) {
    (**ppcVar10)();
    return;
  }
  do {
    uVar1 = (uVar5 & 0xffff) * (uint)*puVar7 & 0xffff;
    uVar2 = (ushort)(DAT_8000616c * uVar1 + DAT_8000616c >> 0x10);
    uVar4 = uVar2 >> 6;
    if (0x32 < (int)(uVar1 + (uint)((ulonglong)uVar1 * (ulonglong)uVar3 >> 0x25) * -100)) {
      uVar4 = (uVar2 >> 6) + 1;
    }
    iVar9 = iVar9 + -1;
    *puVar6 = uVar4;
    puVar6 = puVar6 + 1;
    puVar7 = puVar7 + 1;
  } while (iVar9 != 0);
                    // WARNING: Could not recover jumptable at 0x8000614c. Too many branches
                    // WARNING: Treating indirect jump as call
  (*ppcVar10[5])();
  return;
}



void FUN_80006170(void)

{
  uint uVar1;
  ushort *puVar2;
  int iVar3;
  
  uVar1 = DAT_8000619c;
  puVar2 = DAT_80006198;
  iVar3 = DAT_800061a0;
  do {
    if (uVar1 < *puVar2) {
      *puVar2 = (ushort)uVar1;
    }
    iVar3 = iVar3 + -1;
    puVar2 = puVar2 + 1;
  } while (iVar3 != 0);
  return;
}



void FUN_800061a4(void)

{
  undefined2 uVar1;
  undefined2 uVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  undefined2 *puVar5;
  undefined2 *puVar6;
  int iVar7;
  uint uVar8;
  
  puVar4 = DAT_8000624c;
  puVar3 = DAT_80006248;
  uVar8 = DAT_8000623c;
  if ((*(byte *)(DAT_80006238 + 10) < 0x19) &&
     (uVar8 = DAT_80006240, *(byte *)(DAT_80006238 + 10) < 9)) {
    uVar8 = DAT_80006244;
  }
  puVar5 = DAT_80006248 + -1;
  puVar6 = DAT_8000624c + -1;
  if ((uVar8 & 1) == 0) {
    *DAT_8000624c = *DAT_80006248;
    puVar5 = puVar3;
    puVar6 = puVar4;
  }
  uVar1 = puVar5[1];
  iVar7 = (int)(uVar8 - 1) >> 1;
  while (iVar7 != 0) {
    uVar2 = puVar5[2];
    puVar6[1] = uVar1;
    uVar1 = puVar5[3];
    iVar7 = iVar7 + -1;
    puVar6 = puVar6 + 2;
    *puVar6 = uVar2;
    puVar5 = puVar5 + 2;
  }
  iVar7 = uVar8 - 1;
  if (-1 < iVar7) {
    puVar4[iVar7] = puVar3[iVar7];
    return;
  }
  return;
}



void FUN_80006250(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  undefined2 *puVar5;
  int iVar6;
  
  uVar3 = DAT_800062b8;
  iVar2 = DAT_800062b4;
  iVar1 = DAT_800062b0;
  uVar4 = 0;
  do {
    puVar5 = (undefined2 *)(iVar2 + uVar4 * 2);
    *puVar5 = *(undefined2 *)(iVar2 + (*(ushort *)(iVar1 + 0x2c) + uVar4) * 2 + -0x5dc);
    iVar6 = *(ushort *)(iVar1 + 0x2c) + uVar4;
    uVar4 = uVar4 + 2 & 0xfffeffff;
    puVar5[1] = *(undefined2 *)(iVar2 + iVar6 * 2 + -0x5da);
  } while (uVar4 < uVar3);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void scope_process_ch1_25ns_data(void)

{
  ushort uVar1;
  longlong lVar2;
  longlong lVar3;
  undefined2 uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  ushort *puVar8;
  int iVar9;
  uint16 *puVar10;
  ushort *puVar11;
  undefined2 *puVar12;
  ushort uVar13;
  short *psVar14;
  int iVar15;
  ushort uVar16;
  short sVar17;
  uint uVar18;
  uint uVar19;
  undefined4 uVar20;
  uint16 *puVar21;
  int iVar22;
  uint16 *puVar23;
  undefined2 *puVar24;
  undefined8 uVar25;
  undefined8 uVar26;
  undefined8 uVar27;
  undefined8 uVar28;
  undefined8 uVar29;
  undefined8 uVar30;
  
  uVar19 = DAT_80006504;
  iVar22 = DAT_80006500;
  uVar7 = 0;
  puVar8 = (ushort *)((int)DAT_800064f0 + 200);
  uVar20 = 0;
  iVar9 = DAT_800064f8;
  uVar18 = DAT_800064f4;
  do {
    uVar5 = (uint)*puVar8;
    puVar8 = puVar8 + 1;
    if (uVar7 < uVar5) {
      uVar7 = uVar5;
    }
    if (uVar5 < uVar18) {
      uVar18 = uVar5;
    }
    iVar9 = iVar9 + -1;
  } while (iVar9 != 0);
  puVar21 = (uint16 *)(uVar7 + uVar18 >> 1);
  uVar5 = 0;
  puVar8 = (ushort *)((int)DAT_800064f0 + 0x14);
  iVar9 = DAT_800064fc;
  puVar23 = DAT_800064f0;
  do {
    puVar10 = (uint16 *)(uint)*puVar8;
    if (puVar10 < puVar21) {
      puVar23 = (uint16 *)(uint)puVar8[1];
    }
    if ((puVar10 < puVar21 && puVar21 < puVar23) ||
       ((puVar10 < puVar21 && (puVar21 <= (uint16 *)(uint)puVar8[1])))) {
      uVar5 = uVar5 + 1 & 0xfffeffff;
    }
    iVar9 = iVar9 + -1;
    puVar8 = puVar8 + 1;
  } while (iVar9 != 0);
  if (0x140 < uVar5) {
    uVar6 = get_timer_ticks();
    puVar21 = DAT_800064f0;
    if (*(char *)(iVar22 + 10) == '\x1c') {
      uVar20 = 0x14;
    }
    if (*(char *)(iVar22 + 10) == '\x1d') {
      uVar20 = 0x32;
    }
    iVar9 = 0;
    uVar25 = FUN_800397d0(uVar6 + (uint)((ulonglong)uVar6 * (ulonglong)DAT_80006508 >> 0x21) * -3,
                          *(char *)(iVar22 + 10),DAT_80006508,
                          (int)((ulonglong)uVar6 * (ulonglong)DAT_80006508));
    uVar26 = FUN_800397d0(uVar18);
    uVar27 = FUN_800397d0((uVar7 - uVar18 & 0xffff) >> 1);
    uVar28 = FUN_800397d0(uVar5);
    uVar29 = FUN_800397d0(uVar20);
    uVar29 = FUN_800393ec(DAT_8000650c,DAT_80006510,(int)uVar29,(int)((ulonglong)uVar29 >> 0x20));
    do {
      uVar30 = FUN_8003979c(iVar9);
      uVar30 = FUN_80039890((int)uVar30,(int)((ulonglong)uVar30 >> 0x20),(int)uVar29,
                            (int)((ulonglong)uVar29 >> 0x20));
      FUN_80039890((int)uVar30,(int)((ulonglong)uVar30 >> 0x20),(int)uVar28,
                   (int)((ulonglong)uVar28 >> 0x20));
      uVar30 = FUN_80036000();
      uVar30 = FUN_8003926c((int)uVar30,(int)((ulonglong)uVar30 >> 0x20),0,DAT_80006514);
      uVar30 = FUN_80039890((int)uVar30,(int)((ulonglong)uVar30 >> 0x20),(int)uVar27,
                            (int)((ulonglong)uVar27 >> 0x20));
      uVar30 = FUN_8003926c((int)uVar30,(int)((ulonglong)uVar30 >> 0x20),(int)uVar26,
                            (int)((ulonglong)uVar26 >> 0x20));
      FUN_8003926c((int)uVar30,(int)((ulonglong)uVar30 >> 0x20),(int)uVar25,
                   (int)((ulonglong)uVar25 >> 0x20));
      uVar4 = FUN_8003972c();
      *(undefined2 *)puVar21 = uVar4;
      uVar19 = uVar19 - 1 & 0xffff;
      iVar9 = iVar9 + 1;
      puVar21 = (uint16 *)((int)puVar21 + 2);
    } while (uVar19 != 0);
    return;
  }
  if (*(char *)(DAT_80006500 + 10) == '\x1c') {
    scope_pre_process_50ns_data(DAT_800064f0,0,DAT_80006504);
  }
  puVar21 = DAT_800064f0;
  if (*(char *)(iVar22 + 10) == '\x1d') {
    puVar8 = (ushort *)(uVar19 * DAT_80013e70 + 0xa3d7 >> 0x14);
    if (puVar8 != (ushort *)0x0) {
      puVar11 = DAT_80013e74;
      puVar23 = (uint16 *)((int)DAT_800064f0 + -2);
      if (((uint)puVar8 & 1) != 0) {
        puVar11 = DAT_80013e74 + 0x19;
        *puVar11 = *(ushort *)DAT_800064f0;
        puVar23 = puVar21;
      }
      uVar7 = (uint)((int)puVar8 << 0xf) >> 0x10;
      while (uVar7 != 0) {
        puVar11[0x19] = *(ushort *)((int)puVar23 + 2);
        puVar23 = (uint16 *)((int)puVar23 + 4);
        uVar7 = uVar7 - 1 & 0xffff;
        puVar11 = puVar11 + 0x32;
        *puVar11 = *(ushort *)puVar23;
      }
    }
    iVar22 = DAT_80013e78;
    uVar7 = 0;
    if (0 < (int)((int)puVar8 - 1U)) {
      do {
        puVar11 = (ushort *)(DAT_80013e7c + uVar7 * 0x32);
        uVar1 = *puVar11;
        uVar13 = puVar11[0x19];
        sVar17 = 0xc;
        if (uVar1 < uVar13) {
          uVar16 = uVar13 - uVar1;
        }
        else {
          uVar16 = uVar1 - uVar13;
        }
        iVar9 = 0;
        uVar18 = (uint)uVar16;
        if (uVar1 < uVar13) {
          do {
            lVar2 = (longlong)iVar22 * (longlong)(int)(uVar18 * (iVar9 + 2));
            lVar3 = (longlong)iVar22 * (longlong)(int)(uVar18 * (iVar9 + 1));
            sVar17 = sVar17 + -1;
            puVar11[1] = ((short)(int)(lVar3 >> 0x23) - (short)(lVar3 >> 0x3f)) + uVar1;
            iVar9 = iVar9 + 2;
            puVar11 = puVar11 + 2;
            *puVar11 = ((short)(int)(lVar2 >> 0x23) - (short)(lVar2 >> 0x3f)) + uVar1;
          } while (sVar17 != 0);
        }
        else {
          do {
            lVar2 = (longlong)iVar22 * (longlong)(int)(uVar18 * (iVar9 + 2));
            lVar3 = (longlong)iVar22 * (longlong)(int)(uVar18 * (iVar9 + 1));
            sVar17 = sVar17 + -1;
            puVar11[1] = uVar1 - ((short)(int)(lVar3 >> 0x23) - (short)(lVar3 >> 0x3f));
            iVar9 = iVar9 + 2;
            puVar11 = puVar11 + 2;
            *puVar11 = uVar1 - ((short)(int)(lVar2 >> 0x23) - (short)(lVar2 >> 0x3f));
          } while (sVar17 != 0);
        }
        uVar7 = uVar7 + 1 & 0xfffeffff;
      } while ((int)uVar7 < (int)((int)puVar8 - 1U));
    }
    uVar7 = (int)puVar8 - 1;
    if (0 < (int)uVar7) {
      puVar12 = DAT_80013e84;
      puVar24 = DAT_80013e80;
      if ((uVar7 & 1) != 0) {
        puVar24 = DAT_80013e80 + 0x19;
        puVar12 = DAT_80013e84 + 0x19;
        *puVar12 = *puVar24;
      }
      uVar7 = uVar7 * 0x8000 >> 0x10;
      while (uVar7 != 0) {
        puVar12[0x19] = puVar24[0x19];
        puVar24 = puVar24 + 0x32;
        uVar7 = uVar7 - 1 & 0xffff;
        puVar12 = puVar12 + 0x32;
        *puVar12 = *puVar24;
      }
    }
    uVar7 = 0;
    puVar11 = puVar8 + -1;
    if (0 < (int)puVar11) {
      do {
        iVar9 = DAT_80013e88 + uVar7 * 0x32;
        uVar1 = *(ushort *)(iVar9 + 0x18);
        uVar13 = *(ushort *)(iVar9 + 0x4a);
        if (uVar1 < uVar13) {
          psVar14 = (short *)(iVar9 + 0x18);
          iVar9 = 0;
          sVar17 = 0xc;
          do {
            lVar2 = (longlong)iVar22 * (longlong)(int)((uint)(ushort)(uVar13 - uVar1) * (iVar9 + 1))
            ;
            lVar3 = (longlong)iVar22 * (longlong)(int)((uint)(ushort)(uVar13 - uVar1) * (iVar9 + 2))
            ;
            sVar17 = sVar17 + -1;
            psVar14[1] = ((short)(int)(lVar2 >> 0x23) - (short)(lVar2 >> 0x3f)) + uVar1;
            iVar9 = iVar9 + 2;
            psVar14 = psVar14 + 2;
            *psVar14 = ((short)(int)(lVar3 >> 0x23) - (short)(lVar3 >> 0x3f)) + uVar1;
          } while (sVar17 != 0);
        }
        else {
          psVar14 = (short *)(iVar9 + 0x18);
          iVar9 = 0;
          sVar17 = 0xc;
          do {
            lVar2 = (longlong)iVar22 * (longlong)(int)((uint)(ushort)(uVar1 - uVar13) * (iVar9 + 1))
            ;
            lVar3 = (longlong)iVar22 * (longlong)(int)((uint)(ushort)(uVar1 - uVar13) * (iVar9 + 2))
            ;
            sVar17 = sVar17 + -1;
            psVar14[1] = uVar1 - ((short)(int)(lVar2 >> 0x23) - (short)(lVar2 >> 0x3f));
            iVar9 = iVar9 + 2;
            psVar14 = psVar14 + 2;
            *psVar14 = uVar1 - ((short)(int)(lVar3 >> 0x23) - (short)(lVar3 >> 0x3f));
          } while (sVar17 != 0);
        }
        puVar8 = (ushort *)(uVar7 + 1);
        uVar7 = (uint)puVar8 & 0xfffeffff;
      } while ((int)uVar7 < (int)puVar11);
    }
    uVar7 = uVar19 >> 1;
    if (uVar19 != 0) {
      uVar18 = uVar7;
      puVar11 = DAT_80013e90;
      puVar8 = DAT_80013e8c;
      puVar23 = (uint16 *)((int)puVar21 + -2);
      if ((uVar19 & 1) != 0) {
        puVar8 = DAT_80013e8c + 1;
        puVar11 = DAT_80013e90 + 1;
        *(short *)puVar21 = (short)((uint)*puVar8 + (uint)*puVar11 >> 1);
        puVar23 = puVar21;
      }
      while (uVar18 != 0) {
        *(short *)((int)puVar23 + 2) = (short)((uint)puVar8[1] + (uint)puVar11[1] >> 1);
        *(short *)(uint16 *)((int)puVar23 + 4) = (short)((uint)puVar11[2] + (uint)puVar8[2] >> 1);
        uVar18 = uVar18 - 1;
        puVar11 = puVar11 + 2;
        puVar8 = puVar8 + 2;
        puVar23 = (uint16 *)((int)puVar23 + 4);
      }
    }
    uVar5 = uVar19 * DAT_80013e94;
    uVar18 = uVar5 >> 0x13;
    uVar6 = uVar18 - 1;
    if (0 < (int)uVar6) {
      puVar11 = (ushort *)((int)puVar21 + -0xc);
      puVar8 = DAT_80013e98;
      if ((uVar6 & 1) != 0) {
        puVar11 = (ushort *)((int)puVar21 + 0xc);
        puVar8 = DAT_80013e98 + 0xc;
        *puVar8 = *puVar11;
      }
      uVar6 = uVar6 * 0x8000 >> 0x10;
      while (uVar6 != 0) {
        puVar8[0xc] = puVar11[0xc];
        puVar11 = puVar11 + 0x18;
        uVar6 = uVar6 - 1 & 0xffff;
        puVar8 = puVar8 + 0x18;
        *puVar8 = *puVar11;
      }
    }
    iVar22 = uVar18 - 2;
    if (0 < iVar22) {
      puVar8 = DAT_80013e9c;
    }
    uVar18 = 0;
    if (0 < iVar22) {
      do {
        iVar9 = DAT_80013e88 + uVar18 * 0x18;
        uVar1 = *(ushort *)(iVar9 + 0xc);
        uVar13 = *(ushort *)(iVar9 + 0x24);
        if (uVar1 < uVar13) {
          uVar6 = (uint)(ushort)(uVar13 - uVar1);
          iVar15 = 1;
          sVar17 = 5;
          psVar14 = (short *)(iVar9 + 0xe);
          *psVar14 = ((short)(int)((longlong)(int)puVar8 * (longlong)(int)uVar6 >> 0x21) -
                     (short)((longlong)(int)puVar8 * (longlong)(int)uVar6 >> 0x3f)) + uVar1;
          do {
            lVar2 = (longlong)(int)puVar8 * (longlong)(int)(uVar6 * (iVar15 + 1));
            lVar3 = (longlong)(int)puVar8 * (longlong)(int)(uVar6 * (iVar15 + 2));
            sVar17 = sVar17 + -1;
            psVar14[1] = ((short)(int)(lVar2 >> 0x21) - (short)(lVar2 >> 0x3f)) + uVar1;
            iVar15 = iVar15 + 2;
            psVar14 = psVar14 + 2;
            *psVar14 = ((short)(int)(lVar3 >> 0x21) - (short)(lVar3 >> 0x3f)) + uVar1;
          } while (sVar17 != 0);
        }
        else {
          uVar6 = (uint)(ushort)(uVar1 - uVar13);
          iVar15 = 1;
          sVar17 = 5;
          psVar14 = (short *)(iVar9 + 0xe);
          *psVar14 = uVar1 - ((short)(int)((longlong)(int)puVar8 * (longlong)(int)uVar6 >> 0x21) -
                             (short)((longlong)(int)puVar8 * (longlong)(int)uVar6 >> 0x3f));
          do {
            lVar2 = (longlong)(int)puVar8 * (longlong)(int)(uVar6 * (iVar15 + 1));
            lVar3 = (longlong)(int)puVar8 * (longlong)(int)(uVar6 * (iVar15 + 2));
            sVar17 = sVar17 + -1;
            psVar14[1] = uVar1 - ((short)(int)(lVar2 >> 0x21) - (short)(lVar2 >> 0x3f));
            iVar15 = iVar15 + 2;
            psVar14 = psVar14 + 2;
            *psVar14 = uVar1 - ((short)(int)(lVar3 >> 0x21) - (short)(lVar3 >> 0x3f));
          } while (sVar17 != 0);
        }
        uVar18 = uVar18 + 1 & 0xfffeffff;
      } while ((int)uVar18 < iVar22);
    }
    if (uVar19 != 0) {
      uVar18 = uVar7;
      puVar23 = (uint16 *)((int)puVar21 + -2);
      puVar8 = DAT_80013e90;
      if ((uVar19 & 1) != 0) {
        puVar8 = DAT_80013e90 + 1;
        *(short *)puVar21 = (short)((uint)*(ushort *)puVar21 + (uint)*puVar8 >> 1);
        puVar23 = puVar21;
      }
      while (uVar18 != 0) {
        puVar10 = (uint16 *)((int)puVar23 + 4);
        *(ushort *)((int)puVar23 + 2) =
             (ushort)((uint)*(ushort *)((int)puVar23 + 2) + (uint)puVar8[1] >> 1);
        *(ushort *)puVar10 = (ushort)((uint)puVar8[2] + (uint)*(ushort *)puVar10 >> 1);
        uVar18 = uVar18 - 1;
        puVar23 = puVar10;
        puVar8 = puVar8 + 2;
      }
    }
    uVar5 = uVar5 >> 0x12;
    uVar18 = uVar5 - 1;
    if (0 < (int)uVar18) {
      puVar11 = (ushort *)((int)puVar21 + -6);
      puVar8 = DAT_80013ea0;
      if ((uVar18 & 1) != 0) {
        puVar11 = (ushort *)((int)puVar21 + 6);
        puVar8 = DAT_80013ea0 + 6;
        *puVar8 = *puVar11;
      }
      uVar18 = uVar18 * 0x8000 >> 0x10;
      while (uVar18 != 0) {
        puVar8[6] = puVar11[6];
        puVar11 = puVar11 + 0xc;
        uVar18 = uVar18 - 1 & 0xffff;
        puVar8 = puVar8 + 0xc;
        *puVar8 = *puVar11;
      }
    }
    uVar18 = DAT_80013ea8;
    uVar5 = uVar5 - 2;
    if (0 < (int)uVar5) {
      uVar5 = uVar5 & 0xffff;
      puVar8 = DAT_80013ea4;
      do {
        uVar1 = *puVar8;
        uVar13 = puVar8[6];
        if (uVar1 < uVar13) {
          uVar13 = uVar13 - uVar1;
          uVar6 = (uint)uVar13;
          puVar8[1] = uVar1 + (ushort)(uVar6 * DAT_80013e94 >> 0x12);
          puVar8[2] = uVar1 + (short)(uint)((ulonglong)uVar13 * 2 * (ulonglong)uVar18 >> 0x22);
          puVar8[3] = uVar1 + (short)(uint)((ulonglong)(uVar6 * 3) * (ulonglong)uVar18 >> 0x22);
          puVar8[4] = uVar1 + (short)(uint)((ulonglong)uVar13 * 4 * (ulonglong)uVar18 >> 0x22);
          puVar8[5] = uVar1 + (short)(uint)((ulonglong)(uVar6 * 5) * (ulonglong)uVar18 >> 0x22);
        }
        else {
          uVar13 = uVar1 - uVar13;
          uVar6 = (uint)uVar13;
          puVar8[1] = uVar1 - (ushort)(uVar6 * DAT_80013e94 >> 0x12);
          puVar8[2] = uVar1 - (short)(uint)((ulonglong)uVar13 * 2 * (ulonglong)uVar18 >> 0x22);
          puVar8[3] = uVar1 - (short)(uint)((ulonglong)(uVar6 * 3) * (ulonglong)uVar18 >> 0x22);
          puVar8[4] = uVar1 - (short)(uint)((ulonglong)uVar13 * 4 * (ulonglong)uVar18 >> 0x22);
          puVar8[5] = uVar1 - (short)(uint)((ulonglong)(uVar6 * 5) * (ulonglong)uVar18 >> 0x22);
        }
        uVar5 = uVar5 - 1 & 0xffff;
        puVar8 = puVar8 + 6;
      } while (uVar5 != 0);
    }
    if (uVar19 != 0) {
      puVar23 = (uint16 *)((int)puVar21 + -2);
      puVar8 = DAT_80013e90;
      if ((uVar19 & 1) != 0) {
        puVar8 = DAT_80013e90 + 1;
        *(short *)puVar21 = (short)((uint)*(ushort *)puVar21 + (uint)*puVar8 >> 1);
        puVar23 = puVar21;
      }
      if (uVar7 != 0) {
        do {
          puVar11 = (ushort *)((int)puVar23 + 2);
          uVar7 = uVar7 - 1;
          puVar23 = (uint16 *)((int)puVar23 + 4);
          *puVar11 = (ushort)((uint)*puVar11 + (uint)puVar8[1] >> 1);
          puVar8 = puVar8 + 2;
          *(ushort *)puVar23 = (ushort)((uint)*(ushort *)puVar23 + (uint)*puVar8 >> 1);
        } while (uVar7 != 0);
        return;
      }
      return;
    }
    return;
  }
  return;
}



void FUN_80006518(void)

{
  ulonglong uVar1;
  short sVar2;
  uint uVar3;
  ushort *puVar4;
  ushort *puVar5;
  uint uVar6;
  int iVar7;
  
  uVar3 = DAT_800065c8;
  if (DAT_800065c0 < *(ushort *)(DAT_800065bc + 6)) {
    uVar6 = 0;
  }
  else {
    uVar6 = ((DAT_800065c0 - *(ushort *)(DAT_800065bc + 6)) +
            (uint)*(ushort *)(PTR_DAT_800065c4 + 0x12)) - 400 & 0xffff;
  }
  uVar1 = (ulonglong)DAT_800065c8;
  puVar4 = DAT_800065cc;
  iVar7 = DAT_800065d0;
  do {
    puVar5 = puVar4 + 2;
    iVar7 = iVar7 + -1;
    sVar2 = (short)(uint)((uVar6 * 10) * uVar1 >> 0x23);
    puVar4[1] = ((short)(uint)((ulonglong)((uint)puVar4[1] * 10) * (ulonglong)uVar3 >> 0x23) +
                (short)uVar6) - sVar2;
    *puVar5 = ((short)uVar6 +
              (short)(uint)((ulonglong)((uint)*puVar5 * 10) * (ulonglong)uVar3 >> 0x23)) - sVar2;
    puVar4 = puVar5;
  } while (iVar7 != 0);
  return;
}



void FUN_800065d4(void)

{
  ushort *puVar1;
  ushort *puVar2;
  uint uVar3;
  int iVar4;
  
  iVar4 = DAT_80006650;
  if (DAT_80006644 < *(ushort *)(DAT_80006640 + 6)) {
    uVar3 = 0;
    puVar1 = DAT_8000664c;
  }
  else {
    uVar3 = ((DAT_80006644 - *(ushort *)(DAT_80006640 + 6)) +
            (uint)*(ushort *)(PTR_DAT_80006648 + 0x12)) - 400 & 0xffff;
    puVar1 = DAT_8000664c;
  }
  do {
    puVar2 = puVar1 + 2;
    iVar4 = iVar4 + -1;
    puVar1[1] = (puVar1[1] >> 1) + (short)(uVar3 >> 1);
    *puVar2 = (*puVar2 >> 1) + (short)(uVar3 >> 1);
    puVar1 = puVar2;
  } while (iVar4 != 0);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_80006654(void)

{
  uint uVar1;
  uint uVar2;
  ushort *puVar3;
  uint uVar4;
  uint uVar5;
  ushort *unaff_r4;
  ushort *puVar6;
  int unaff_r5;
  int iVar7;
  ushort uVar8;
  uint uVar9;
  
  puVar6 = DAT_800067a0;
  uVar8 = *(ushort *)(DAT_80006798 + 0xec);
  uVar1 = (uint)uVar8;
  uVar5 = 0;
  if (*(char *)(DAT_8000679c + 3) == '\x06') {
    uVar2 = 0x23;
  }
  else {
    uVar2 = 0x14;
  }
  uVar4 = DAT_800067a4;
  if (*(byte *)(DAT_8000679c + 10) < 0x19) {
    uVar4 = DAT_800067a8;
  }
  if (uVar2 <= *(ushort *)(DAT_80006798 + 0xe8)) {
    return;
  }
  if ((uVar1 + uVar2 < (uint)*(ushort *)(DAT_8000679c + 6)) ||
     (*(ushort *)(DAT_8000679c + 6) + uVar2 < uVar1)) {
    if (uVar2 >> 1 < (uint)*(ushort *)(DAT_80006798 + 0xe8)) {
      return;
    }
    if (uVar4 == 0) {
      return;
    }
    puVar3 = DAT_800067a0 + -1;
    if ((uVar4 & 1) != 0) {
      *DAT_800067a0 = uVar8;
      puVar3 = puVar6;
    }
    uVar4 = uVar4 >> 1;
    if (uVar4 == 0) {
      return;
    }
    do {
      puVar3[1] = uVar8;
      uVar4 = uVar4 - 1;
      puVar3 = puVar3 + 2;
      *puVar3 = uVar8;
    } while (uVar4 != 0);
    return;
  }
  iVar7 = DAT_8000679c;
  if (uVar4 == 0) {
    puVar6 = unaff_r4;
    iVar7 = unaff_r5;
  }
  uVar2 = 0;
  if (uVar4 == 0) {
    return;
  }
  do {
    uVar9 = (uint)puVar6[uVar2];
    if (uVar1 <= uVar9 && uVar9 != uVar1) {
      if (uVar5 < 0x15) {
LAB_80006738:
        uVar8 = *(ushort *)(iVar7 + 6);
      }
      else {
        uVar5 = 0;
        uVar8 = *(short *)(iVar7 + 6) + 1;
      }
    }
    else {
      if (uVar1 <= uVar9) {
        uVar8 = *(ushort *)(iVar7 + 6);
        uVar5 = uVar5 + 1 & 0xfffeffff;
      }
      else {
        if ((uVar5 < 0x15) || (uVar5 = 0, *(short *)(iVar7 + 6) == 0)) goto LAB_80006738;
        uVar8 = *(short *)(iVar7 + 6) - 1;
      }
    }
    puVar6[uVar2] = uVar8;
    uVar2 = uVar2 + 1 & 0xfffeffff;
    if (uVar4 <= uVar2) {
      return;
    }
  } while( true );
}



// WARNING: Unknown calling convention yet parameter storage is locked

void display_channel1_long_timebase_trace(void)

{
  undefined2 *puVar1;
  undefined *puVar2;
  int iVar3;
  uint uVar4;
  uint ystart;
  uint uVar5;
  uint yend;
  bool bVar6;
  bool bVar7;
  
  set_display_fg_color(DAT_80006890);
  puVar2 = PTR_DAT_80006894;
  uVar4 = (uint)*(ushort *)PTR_DAT_80006894;
  if (uVar4 == 0) {
    puVar1 = (undefined2 *)(PTR_DAT_80006894 + 0x16);
    *(undefined2 *)(PTR_DAT_80006894 + 2) = *puVar1;
    *(undefined2 *)(puVar2 + 6) = *puVar1;
  }
  yend = (uint)*(ushort *)(puVar2 + 0x16);
  ystart = (uint)*(ushort *)(puVar2 + 2);
  uVar5 = yend + 0xf;
  bVar7 = ystart <= uVar5;
  bVar6 = uVar5 == ystart;
  if (bVar7 && !bVar6) {
    uVar5 = ystart + 0xf;
  }
  if (bVar7 && !bVar6) {
    bVar7 = yend <= uVar5;
    bVar6 = uVar5 == yend;
  }
  if (!bVar7 || bVar6) {
    uVar5 = ystart + 0x14;
    bVar7 = uVar5 <= yend;
    bVar6 = yend == uVar5;
    if (!bVar7 || bVar6) {
      uVar5 = yend + 0x14;
    }
    if (!bVar7 || bVar6) {
      bVar7 = uVar5 <= ystart;
      bVar6 = ystart == uVar5;
    }
    if (bVar7 && !bVar6) {
      display_draw_line(uVar4 + 3,ystart,uVar4 + 3,yend);
      display_draw_line(*(ushort *)puVar2 + 3,*(ushort *)(puVar2 + 2) + 1,*(ushort *)puVar2 + 3,
                        *(ushort *)(puVar2 + 0x16) + 1);
      goto LAB_80006828;
    }
  }
  else {
    yend = yend + ystart >> 1;
    *(short *)(puVar2 + 0x16) = (short)yend;
  }
  display_draw_line(uVar4 + 3,ystart,uVar4 + 4,yend);
  display_draw_line(*(ushort *)puVar2 + 3,*(ushort *)(puVar2 + 2) + 1,*(ushort *)puVar2 + 4,
                    *(ushort *)(puVar2 + 0x16) + 1);
LAB_80006828:
  iVar3 = DAT_80006898;
  *(undefined2 *)(puVar2 + 6) = *(undefined2 *)(puVar2 + 2);
  *(undefined2 *)(puVar2 + 2) = *(undefined2 *)(puVar2 + 0x16);
  *(undefined2 *)(iVar3 + (uint)*(ushort *)puVar2 * 2) = *(undefined2 *)(puVar2 + 0x16);
  return;
}



void set_fpga_channel1_voltperdiv(void)

{
  uint *ptr;
  uint uVar1;
  
  fpga_write_cmd('3');
  ptr = PE_CFG0;
  if (*(char *)(DAT_800068d0 + 3) == '\x06') {
    uVar1 = 5;
  }
  else {
    uVar1 = (uint)*(byte *)(DAT_800068d0 + 3);
  }
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = uVar1 | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void set_fpga_channel1_coupling(void)

{
  char cVar1;
  uint *ptr;
  
  fpga_write_cmd('4');
  ptr = PE_CFG0;
  cVar1 = *(char *)(DAT_80006908 + 1);
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = (uint)(cVar1 == '\0') | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void set_fpga_channel1_enable(void)

{
  char cVar1;
  uint *ptr;
  
  cVar1 = *DAT_80006944;
  if (cVar1 == '\0') {
    fpga_write_cmd('\x02');
  }
  else {
    fpga_write_cmd('\x02');
  }
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = (uint)(cVar1 != '\0') | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void fpga_write_channel1_offset(ushort offset)

{
  uint *ptr;
  
  fpga_write_cmd('2');
  fpga_write_data((uchar)(offset >> 8));
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = offset & 0xff | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void set_fpga_channel1_offset(void)

{
  uint *ptr;
  int iVar1;
  uint in_r1;
  uint unaff_r4;
  
  switch(*(undefined *)(DAT_80006a84 + 3)) {
  case 0:
    unaff_r4 = (uint)DAT_80006a88[1];
    break;
  case 1:
    unaff_r4 = (uint)DAT_80006a88[2];
    break;
  case 2:
    unaff_r4 = (uint)DAT_80006a88[3];
    break;
  case 3:
    unaff_r4 = (uint)DAT_80006a88[4];
    break;
  case 4:
    unaff_r4 = (uint)DAT_80006a88[5];
    break;
  case 5:
  case 6:
    unaff_r4 = (uint)DAT_80006a88[6];
  }
  switch(*(undefined *)(DAT_80006a84 + 3)) {
  case 0:
    in_r1 = (uint)*DAT_80006a8c;
    break;
  case 1:
    in_r1 = (uint)DAT_80006a8c[1];
    break;
  case 2:
    in_r1 = (uint)DAT_80006a8c[2];
    break;
  case 3:
    in_r1 = (uint)DAT_80006a8c[3];
    break;
  case 4:
    in_r1 = (uint)DAT_80006a8c[4];
    break;
  case 5:
    in_r1 = (uint)DAT_80006a8c[5];
    break;
  case 6:
    in_r1 = (uint)DAT_80006a8c[6];
  }
  iVar1 = (int)((ulonglong)
                ((longlong)DAT_80006a90 *
                (longlong)(int)((uint)*(ushort *)(DAT_80006a84 + 6) * (uint)*DAT_80006a88)) >> 0x20)
  ;
  iVar1 = divide_2((uint)*DAT_80006a8c * ((iVar1 >> 5) - (iVar1 >> 0x1f)),in_r1);
  fpga_write_cmd('2');
  fpga_write_data((uchar)(unaff_r4 - iVar1 >> 8));
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = unaff_r4 - iVar1 & 0xff | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



ulonglong FUN_80006a94(undefined4 *param_1)

{
  undefined4 *puVar1;
  int *piVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  undefined *puVar5;
  int *piVar6;
  uint uVar7;
  undefined4 *puVar8;
  undefined4 *puVar9;
  uint uVar10;
  undefined uVar11;
  undefined2 uVar12;
  int iVar13;
  uint uVar14;
  undefined4 uVar15;
  int iVar16;
  undefined4 *puVar17;
  undefined4 *unaff_r9;
  undefined uVar18;
  undefined4 uVar19;
  int iVar20;
  undefined4 *puVar21;
  undefined4 uVar22;
  bool bVar23;
  bool bVar24;
  int *piVar25;
  
  uVar10 = DAT_80006bd0;
  iVar13 = DAT_80006bcc;
  uVar14 = DAT_80006bd0 | 1;
  *(undefined *)(DAT_80006bcc + 9) = 0;
  puVar4 = DAT_80006bd4;
  uVar7 = uVar10;
  if (*(char *)(iVar13 + 0x22) == '\0') {
    do {
      puVar21 = (undefined4 *)((int)DAT_80006bd4 + uVar14 * 2);
      puVar17 = (undefined4 *)(uint)*(ushort *)((int)puVar21 + -2);
      if (puVar17 < param_1) {
        unaff_r9 = (undefined4 *)(uint)*(ushort *)((int)puVar21 + 2);
      }
      if ((puVar17 < param_1 && param_1 < unaff_r9) ||
         ((puVar17 < param_1 &&
          (puVar21 = (undefined4 *)(uint)*(ushort *)((int)puVar21 + 2), param_1 <= puVar21))))
      goto LAB_80006b38;
      uVar14 = uVar14 + 1 & 0xfffeffff;
    } while (uVar14 < uVar10 + 1000);
  }
  else {
    do {
      puVar21 = (undefined4 *)((int)DAT_80006bd4 + uVar14 * 2);
      puVar17 = (undefined4 *)(uint)*(ushort *)((int)puVar21 + -2);
      bVar24 = param_1 <= puVar17;
      bVar23 = puVar17 == param_1;
      if (bVar24 && !bVar23) {
        unaff_r9 = (undefined4 *)(uint)*(ushort *)((int)puVar21 + 2);
      }
      if (bVar24 && !bVar23) {
        bVar24 = unaff_r9 <= param_1;
        bVar23 = param_1 == unaff_r9;
      }
      if ((bVar24 && !bVar23) ||
         ((param_1 < puVar17 &&
          (puVar21 = (undefined4 *)(uint)*(ushort *)((int)puVar21 + 2), puVar21 <= param_1))))
      goto LAB_80006b38;
      uVar14 = uVar14 + 1 & 0xfffeffff;
    } while (uVar14 < uVar10 + 1000);
  }
LAB_80006b54:
  *(short *)(iVar13 + 0x2a) = (short)uVar7;
  puVar1 = DAT_80006bd4;
  puVar3 = (undefined4 *)(uVar10 - uVar7);
  bVar23 = puVar3 == (undefined4 *)0x0;
  puVar9 = puVar3;
  if (0 < (int)puVar3) {
    puVar9 = (undefined4 *)((int)DAT_80006bd8 - (int)puVar3);
    bVar23 = DAT_80006bd8 == puVar3;
    puVar17 = DAT_80006bd8;
  }
  bVar24 = 0 < (int)puVar3 && SBORROW4((int)puVar17,(int)puVar3);
  if (!bVar23 && (int)puVar9 < 0 == bVar24) {
    puVar3 = (undefined4 *)0x0;
  }
  if (!bVar23 && (int)puVar9 < 0 == bVar24) {
    do {
      puVar9 = (undefined4 *)((int)puVar4 + (uVar7 + (int)puVar3) * 2);
      uVar10 = (int)puVar3 + 2;
      puVar21 = (undefined4 *)((int)puVar4 + (int)puVar3 * 2);
      puVar3 = (undefined4 *)(uVar10 & 0xfffeffff);
      *(undefined2 *)puVar21 = *(undefined2 *)(puVar9 + -0x177);
      *(undefined2 *)((int)puVar21 + 2) = *(undefined2 *)((int)puVar9 + -0x5da);
    } while (puVar3 < puVar17);
    return CONCAT44(uVar7,uVar10) & 0xfffffffffffeffff;
  }
  puVar4 = (undefined4 *)((int)puVar4 + uVar7 * 2);
  puVar9 = puVar4 + -0x177;
  puVar17 = (undefined4 *)((int)DAT_80006bd4 - (int)puVar9);
  bVar23 = puVar17 == (undefined4 *)0x0;
  if (puVar9 <= DAT_80006bd4) {
    bVar23 = DAT_80006bdc == puVar17;
  }
  if ((puVar9 > DAT_80006bd4 || DAT_80006bdc < puVar17) || bVar23) {
    puVar3 = DAT_80006bdc;
    if ((undefined4 *)0x3 < DAT_80006bdc) {
      puVar17 = (undefined4 *)((uint)DAT_80006bd4 & 3);
      puVar8 = DAT_80006bdc;
      puVar21 = puVar17;
      if (puVar17 != (undefined4 *)0x0) {
        uVar11 = *(undefined *)puVar9;
        iVar13 = (int)DAT_80006bdc + (int)puVar17;
        puVar3 = (undefined4 *)((int)puVar4 + -0x5db);
        if (puVar17 < (undefined4 *)0x3) {
          puVar3 = (undefined4 *)((int)puVar4 + -0x5da);
          puVar21 = (undefined4 *)(uint)*(byte *)(undefined4 *)((int)puVar4 + -0x5db);
        }
        puVar4 = (undefined4 *)((int)DAT_80006bd4 + 1);
        *(undefined *)DAT_80006bd4 = uVar11;
        puVar9 = puVar3;
        if (puVar17 < (undefined4 *)0x2) {
          puVar9 = (undefined4 *)((int)puVar3 + 1);
          uVar11 = *(undefined *)puVar3;
        }
        puVar17 = puVar4;
        if (puVar17 < (undefined4 *)0x3) {
          puVar17 = (undefined4 *)((int)puVar1 + 2);
          *(char *)puVar4 = (char)puVar21;
        }
        puVar8 = (undefined4 *)(iVar13 + -4);
        puVar1 = puVar17;
        if (puVar17 < (undefined4 *)0x2) {
          puVar1 = (undefined4 *)((int)puVar17 + 1);
          *(undefined *)puVar17 = uVar11;
        }
      }
      puVar17 = (undefined4 *)((uint)puVar9 & 3);
      if (puVar17 == (undefined4 *)0x0) {
        while (puVar4 = puVar8 + -8, (undefined4 *)0x1f < puVar8) {
          uVar15 = puVar9[1];
          uVar19 = puVar9[2];
          uVar22 = puVar9[3];
          *puVar1 = *puVar9;
          puVar1[1] = uVar15;
          puVar1[2] = uVar19;
          puVar1[3] = uVar22;
          puVar17 = (undefined4 *)puVar9[4];
          uVar15 = puVar9[5];
          uVar19 = puVar9[6];
          uVar22 = puVar9[7];
          puVar9 = puVar9 + 8;
          puVar1[4] = puVar17;
          puVar1[5] = uVar15;
          puVar1[6] = uVar19;
          puVar1[7] = uVar22;
          puVar1 = puVar1 + 8;
          puVar8 = puVar4;
        }
        if ((bool)((byte)((uint)puVar4 >> 4) & 1)) {
          puVar17 = (undefined4 *)*puVar9;
          uVar15 = puVar9[1];
          uVar19 = puVar9[2];
          uVar22 = puVar9[3];
          puVar9 = puVar9 + 4;
          *puVar1 = puVar17;
          puVar1[1] = uVar15;
          puVar1[2] = uVar19;
          puVar1[3] = uVar22;
          puVar1 = puVar1 + 4;
        }
        if ((int)puVar8 << 0x1c < 0) {
          puVar17 = (undefined4 *)*puVar9;
          uVar15 = puVar9[1];
          puVar9 = puVar9 + 2;
          *puVar1 = puVar17;
          puVar1[1] = uVar15;
          puVar1 = puVar1 + 2;
        }
        puVar3 = puVar1;
        puVar21 = puVar9;
        if ((bool)((byte)((uint)puVar4 >> 2) & 1)) {
          puVar21 = puVar9 + 1;
          puVar17 = (undefined4 *)*puVar9;
          puVar3 = puVar1 + 1;
          *puVar1 = puVar17;
        }
        uVar12 = SUB42(puVar17,0);
        if (((uint)puVar4 & 3) != 0) {
          bVar24 = (bool)((byte)((uint)puVar4 >> 1) & 1);
          uVar10 = (int)puVar8 << 0x1f;
          bVar23 = (int)uVar10 < 0;
          puVar4 = puVar21;
          if (bVar24) {
            puVar4 = (undefined4 *)((int)puVar21 + 2);
            uVar12 = *(undefined2 *)puVar21;
          }
          puVar17 = puVar4;
          if (bVar23) {
            puVar17 = (undefined4 *)((int)puVar4 + 1);
            uVar10 = (uint)*(byte *)puVar4;
          }
          puVar4 = puVar3;
          if (bVar24) {
            puVar4 = (undefined4 *)((int)puVar3 + 2);
            *(undefined2 *)puVar3 = uVar12;
          }
          puVar21 = puVar4;
          if (bVar23) {
            puVar21 = (undefined4 *)((int)puVar4 + 1);
            *(char *)puVar4 = (char)uVar10;
          }
          return CONCAT44(puVar17,puVar21);
        }
        return CONCAT44(puVar21,puVar3);
      }
      puVar3 = puVar8 + -1;
      if ((undefined4 *)0x3 < puVar8) {
        puVar9 = (undefined4 *)((int)puVar9 - (int)puVar17);
        puVar21 = (undefined4 *)*puVar9;
        puVar4 = puVar1;
        if (puVar17 == (undefined4 *)0x2) {
          do {
            puVar8 = puVar9;
            uVar10 = (uint)puVar21 >> 0x10;
            puVar9 = puVar8 + 1;
            puVar21 = (undefined4 *)*puVar9;
            bVar23 = (undefined4 *)0x3 < puVar3;
            puVar3 = puVar3 + -1;
            puVar17 = (undefined4 *)(uVar10 | (int)puVar21 << 0x10);
            puVar1 = puVar4 + 1;
            *puVar4 = puVar17;
            puVar4 = puVar1;
          } while (bVar23);
          puVar9 = (undefined4 *)((int)puVar8 + 6);
        }
        else {
          if (puVar17 < (undefined4 *)0x3) {
            do {
              puVar8 = puVar9;
              uVar10 = (uint)puVar21 >> 8;
              puVar9 = puVar8 + 1;
              puVar21 = (undefined4 *)*puVar9;
              bVar23 = (undefined4 *)0x3 < puVar3;
              puVar3 = puVar3 + -1;
              puVar17 = (undefined4 *)(uVar10 | (int)puVar21 << 0x18);
              puVar1 = puVar4 + 1;
              *puVar4 = puVar17;
              puVar4 = puVar1;
            } while (bVar23);
            puVar9 = (undefined4 *)((int)puVar8 + 5);
          }
          else {
            do {
              puVar8 = puVar9;
              uVar10 = (uint)puVar21 >> 0x18;
              puVar9 = puVar8 + 1;
              puVar21 = (undefined4 *)*puVar9;
              bVar23 = (undefined4 *)0x3 < puVar3;
              puVar3 = puVar3 + -1;
              puVar17 = (undefined4 *)(uVar10 | (int)puVar21 << 8);
              puVar1 = puVar4 + 1;
              *puVar4 = puVar17;
              puVar4 = puVar1;
            } while (bVar23);
            puVar9 = (undefined4 *)((int)puVar8 + 7);
          }
        }
      }
    }
    uVar18 = SUB41(puVar21,0);
    uVar11 = SUB41(puVar17,0);
    bVar24 = (bool)((byte)((uint)puVar3 >> 1) & 1);
    uVar10 = (int)puVar3 << 0x1f;
    bVar23 = (int)uVar10 < 0;
    if (bVar24) {
      puVar5 = (undefined *)((int)puVar9 + 1);
      uVar11 = *(undefined *)puVar9;
      puVar9 = (undefined4 *)((int)puVar9 + 2);
      uVar18 = *puVar5;
    }
    puVar4 = puVar9;
    if (bVar23) {
      puVar4 = (undefined4 *)((int)puVar9 + 1);
      uVar10 = (uint)*(byte *)puVar9;
    }
    if (bVar24) {
      puVar5 = (undefined *)((int)puVar1 + 1);
      *(undefined *)puVar1 = uVar11;
      puVar1 = (undefined4 *)((int)puVar1 + 2);
      *puVar5 = uVar18;
    }
    puVar17 = puVar1;
    if (bVar23) {
      puVar17 = (undefined4 *)((int)puVar1 + 1);
      *(char *)puVar1 = (char)uVar10;
    }
    return CONCAT44(puVar4,puVar17);
  }
  piVar2 = (int *)((int)DAT_80006bd4 + (int)DAT_80006bdc);
  piVar6 = (int *)((int)puVar9 + (int)DAT_80006bdc);
  puVar4 = DAT_80006bdc;
  if ((undefined4 *)0x3 < DAT_80006bdc) {
    bVar23 = ((uint)piVar2 & 3) == 0;
    puVar9 = DAT_80006bdc;
    do {
      if (!bVar23) {
        piVar6 = (int *)((int)piVar6 + -1);
        puVar9 = (undefined4 *)((int)puVar9 + -1);
        piVar2 = (int *)((int)piVar2 + -1);
        *(undefined *)piVar2 = *(undefined *)piVar6;
      }
      bVar23 = ((uint)piVar2 & 3) == 0;
    } while (!bVar23);
    puVar17 = (undefined4 *)((uint)piVar6 & 3);
    if (puVar17 == (undefined4 *)0x0) {
      while (puVar4 = puVar9 + -4, (undefined4 *)0xf < puVar9) {
        piVar25 = piVar6 + -1;
        iVar20 = piVar6[-2];
        iVar16 = piVar6[-3];
        piVar6 = piVar6 + -4;
        iVar13 = *piVar6;
        piVar2[-1] = *piVar25;
        piVar2[-2] = iVar20;
        piVar2[-3] = iVar16;
        piVar2 = piVar2 + -4;
        *piVar2 = iVar13;
        puVar9 = puVar4;
      }
      iVar13 = (int)puVar9 << 0x1d;
      bVar23 = iVar13 < 0;
      if ((bool)((byte)((uint)puVar4 >> 3) & 1)) {
        piVar25 = piVar6 + -1;
        piVar6 = piVar6 + -2;
        iVar13 = *piVar6;
        piVar2[-1] = *piVar25;
        piVar2 = piVar2 + -2;
        *piVar2 = iVar13;
      }
      if (bVar23) {
        piVar6 = piVar6 + -1;
        iVar13 = *piVar6;
        piVar2 = piVar2 + -1;
        *piVar2 = iVar13;
      }
      uVar12 = (undefined2)iVar13;
      if (((uint)puVar4 & 3) != 0) {
        bVar24 = (bool)((byte)((uint)puVar4 >> 1) & 1);
        uVar10 = (int)puVar9 << 0x1f;
        bVar23 = (int)uVar10 < 0;
        if (bVar24) {
          piVar6 = (int *)((int)piVar6 + -2);
          uVar12 = *(undefined2 *)piVar6;
        }
        if (bVar23) {
          uVar10 = (uint)*(byte *)((int)piVar6 + -1);
        }
        if (bVar24) {
          piVar2 = (int *)((int)piVar2 + -2);
          *(undefined2 *)piVar2 = uVar12;
        }
        if (bVar23) {
          *(char *)((int)piVar2 + -1) = (char)uVar10;
        }
        return CONCAT44(piVar6,piVar2);
      }
      return CONCAT44(piVar6,piVar2);
    }
    puVar4 = puVar9 + -1;
    if ((undefined4 *)0x3 < puVar9) {
      piVar6 = (int *)((int)piVar6 - (int)puVar17);
      puVar21 = (undefined4 *)*piVar6;
      if (puVar17 < (undefined4 *)0x2) {
        do {
          piVar25 = piVar6;
          uVar10 = (int)puVar21 << 0x18;
          piVar6 = piVar25 + -1;
          puVar21 = (undefined4 *)*piVar6;
          bVar23 = (undefined4 *)0x3 < puVar4;
          puVar4 = puVar4 + -1;
          puVar17 = (undefined4 *)(uVar10 | (uint)puVar21 >> 8);
          piVar2 = piVar2 + -1;
          *piVar2 = (int)puVar17;
        } while (bVar23);
        piVar6 = (int *)((int)piVar25 + -3);
      }
      else {
        if (puVar17 < (undefined4 *)0x3) {
          do {
            piVar25 = piVar6;
            uVar10 = (int)puVar21 << 0x10;
            piVar6 = piVar25 + -1;
            puVar21 = (undefined4 *)*piVar6;
            bVar23 = (undefined4 *)0x3 < puVar4;
            puVar4 = puVar4 + -1;
            puVar17 = (undefined4 *)(uVar10 | (uint)puVar21 >> 0x10);
            piVar2 = piVar2 + -1;
            *piVar2 = (int)puVar17;
          } while (bVar23);
          piVar6 = (int *)((int)piVar25 + -2);
        }
        else {
          do {
            piVar25 = piVar6;
            uVar10 = (int)puVar21 << 8;
            piVar6 = piVar25 + -1;
            puVar21 = (undefined4 *)*piVar6;
            bVar23 = (undefined4 *)0x3 < puVar4;
            puVar4 = puVar4 + -1;
            puVar17 = (undefined4 *)(uVar10 | (uint)puVar21 >> 0x18);
            piVar2 = piVar2 + -1;
            *piVar2 = (int)puVar17;
          } while (bVar23);
          piVar6 = (int *)((int)piVar25 + -1);
        }
      }
    }
  }
  uVar18 = SUB41(puVar21,0);
  uVar11 = SUB41(puVar17,0);
  bVar24 = (bool)((byte)((uint)puVar4 >> 1) & 1);
  uVar10 = (int)puVar4 << 0x1f;
  bVar23 = (int)uVar10 < 0;
  if (bVar24) {
    uVar11 = *(undefined *)((int)piVar6 + -1);
    piVar6 = (int *)((int)piVar6 + -2);
    uVar18 = *(undefined *)piVar6;
  }
  if (bVar23) {
    uVar10 = (uint)*(byte *)((int)piVar6 + -1);
  }
  if (bVar24) {
    *(undefined *)((int)piVar2 + -1) = uVar11;
    piVar2 = (int *)((int)piVar2 + -2);
    *(undefined *)piVar2 = uVar18;
  }
  if (bVar23) {
    *(char *)((int)piVar2 + -1) = (char)uVar10;
  }
  return CONCAT44(piVar6,piVar2);
LAB_80006b38:
  *(undefined *)(iVar13 + 9) = 1;
  uVar7 = uVar14;
  goto LAB_80006b54;
}



void FUN_80006be0(void)

{
  int iVar1;
  ushort *puVar2;
  ushort *puVar3;
  uint uVar4;
  uint uVar5;
  ushort *unaff_r4;
  ushort *puVar6;
  
  puVar6 = DAT_80006ce4;
  iVar1 = DAT_80006cd4;
  if (*(byte *)(DAT_80006cd4 + 10) < 0x19) {
    if (*(byte *)(DAT_80006cd4 + 10) < 9) {
      uVar4 = DAT_80006ce0;
      if (*(char *)(DAT_80006cd4 + 0xf) != '\x06') {
        return;
      }
    }
    else {
      uVar4 = DAT_80006cdc;
      if (*(char *)(DAT_80006cd4 + 0xf) != '\x06') {
        return;
      }
    }
  }
  else {
    uVar4 = DAT_80006cd8;
    if (*(char *)(DAT_80006cd4 + 0xf) != '\x06') {
      return;
    }
  }
  puVar2 = DAT_80006ce4 + -1;
  if ((uVar4 & 1) != 0) {
    *DAT_80006ce4 = *DAT_80006ce4 << 1;
    puVar2 = puVar6;
  }
  uVar5 = uVar4 >> 1;
  while (uVar5 != 0) {
    puVar3 = puVar2 + 2;
    uVar5 = uVar5 - 1;
    puVar2[1] = puVar2[1] << 1;
    *puVar3 = (ushort)((*puVar3 & 0x7fff7fff) << 1);
    puVar2 = puVar3;
  }
  if (uVar4 == 0) {
    puVar6 = unaff_r4;
  }
  uVar5 = 0;
  if (uVar4 == 0) {
    return;
  }
  do {
    puVar2 = puVar6 + uVar5;
    if (*puVar2 < *(ushort *)(iVar1 + 0x12)) {
      *puVar2 = 0;
    }
    else {
      *puVar2 = *puVar2 - *(short *)(iVar1 + 0x12);
    }
    uVar5 = uVar5 + 1 & 0xfffeffff;
  } while (uVar5 < uVar4);
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffd8 : 0x80006ee8
// WARNING: Restarted to delay deadcode elimination for space: stack

longlong FUN_80006ce8(undefined4 param_1,uint param_2)

{
  undefined *puVar1;
  void *pvVar2;
  void *pvVar3;
  int iVar4;
  undefined2 uVar5;
  ushort uVar6;
  uint *puVar7;
  uint *puVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  uint *puVar12;
  uint *puVar13;
  byte *pbVar14;
  uint uVar15;
  uint uVar16;
  byte bVar17;
  uint uVar18;
  int iVar19;
  byte bVar20;
  uint in_r12;
  uint uVar21;
  uint uVar22;
  code *UNRECOVERED_JUMPTABLE_00;
  bool bVar23;
  bool bVar24;
  longlong lVar25;
  
  uVar16 = DAT_80006f08;
  puVar1 = PTR_initialization_data_80006f04;
  uVar18 = DAT_80006f00;
  if (*(int *)(DAT_80006efc + 0x204) == 0) {
    return (ulonglong)param_2 << 0x20;
  }
  if (*(byte *)(DAT_80006f00 + 10) < 0xb) {
                    // WARNING: Could not recover jumptable at 0x80006d14. Too many branches
                    // WARNING: Treating indirect jump as call
    lVar25 = (*UNRECOVERED_JUMPTABLE_00)();
    return lVar25;
  }
  if (*(char *)(DAT_80006f00 + 0x21) == '\x01') {
                    // WARNING: Could not recover jumptable at 0x80006d28. Too many branches
                    // WARNING: Treating indirect jump as call
    lVar25 = (*UNRECOVERED_JUMPTABLE_00)();
    return lVar25;
  }
  if (*(short *)(DAT_80006f00 + 0x12) != *(short *)(PTR_initialization_data_80006f04 + 6)) {
    memcpy(DAT_80006f10,DAT_80006f0c,DAT_80006f08);
    memcpy(DAT_80006f14,DAT_80006f0c,uVar16);
  }
  pvVar2 = DAT_80006f10;
  *(undefined2 *)(puVar1 + 6) = *(undefined2 *)(uVar18 + 0x12);
  uVar9 = FUN_800294c4(DAT_80006f0c,pvVar2);
  uVar10 = FUN_800294c4(DAT_80006f0c,DAT_80006f14);
  uVar10 = uVar10 & 0xffff;
  if (*(char *)(uVar18 + 0xf) == '\x06') {
    iVar19 = 0x1e;
  }
  else {
    iVar19 = 0xf;
  }
  bVar24 = (uVar9 & 0xffff) < DAT_80006f18;
  bVar23 = uVar10 < DAT_80006f18;
  if (bVar24 && bVar23) {
    uVar10 = 0;
  }
  uVar5 = (undefined2)uVar10;
  if (!bVar24 || !bVar23) {
    uVar6 = *(ushort *)(puVar1 + 2);
    bVar23 = uVar6 == 0;
    if (bVar23) {
      uVar6 = (ushort)*(byte *)(uVar18 + 0x21);
    }
    if (!bVar23 || uVar6 != 0) {
      memcpy(DAT_80006f10,DAT_80006f0c,uVar16);
      memcpy(DAT_80006f14,DAT_80006f0c,uVar16);
      goto LAB_80006dec;
    }
    memcpy(DAT_80006f0c,DAT_80006f10,uVar16);
    uVar5 = 1;
  }
  *(undefined2 *)(puVar1 + 2) = uVar5;
LAB_80006dec:
  iVar4 = DAT_80006f24;
  puVar8 = DAT_80006f20;
  uVar9 = DAT_80006f1c;
  pvVar3 = DAT_80006f14;
  pvVar2 = DAT_80006f10;
  puVar13 = DAT_80006f0c;
  uVar10 = 0;
  do {
    uVar6 = *(ushort *)((int)puVar13 + uVar10 * 2);
    uVar11 = (uint)uVar6;
    uVar15 = (uint)*(ushort *)((int)pvVar2 + uVar10 * 2);
    uVar21 = uVar11 + iVar19;
    bVar24 = uVar15 <= uVar21;
    bVar23 = uVar21 == uVar15;
    if (bVar24 && !bVar23) {
      uVar18 = uVar15 + iVar19;
    }
    if (bVar24 && !bVar23) {
      bVar24 = uVar11 <= uVar18;
      bVar23 = uVar18 == uVar11;
    }
    if (!bVar24 || bVar23) {
LAB_80006eb0:
      *(ushort *)((int)puVar8 + uVar10 * 2) = uVar6;
    }
    else {
      uVar18 = (uint)*(ushort *)((int)pvVar3 + uVar10 * 2);
      bVar24 = uVar18 <= uVar21;
      bVar23 = uVar21 == uVar18;
      if (bVar24 && !bVar23) {
        uVar21 = uVar18 + iVar19;
      }
      if (bVar24 && !bVar23) {
        bVar24 = uVar11 <= uVar21;
        bVar23 = uVar21 == uVar11;
      }
      if (!bVar24 || bVar23) goto LAB_80006eb0;
      uVar21 = 0;
      if ((uVar11 == 0) || (uVar22 = uVar9, uVar21 = uVar11, uVar11 < uVar9)) {
        uVar22 = uVar11;
      }
      if (uVar21 < uVar15) {
        uVar21 = uVar15;
      }
      if (uVar15 < uVar22) {
        uVar22 = uVar15;
      }
      if (uVar21 < uVar18) {
        uVar21 = uVar18;
      }
      if (uVar18 < uVar22) {
        uVar22 = uVar18;
      }
      *(short *)((int)puVar8 + uVar10 * 2) = (short)(uVar21 + uVar22 >> 1);
    }
    uVar10 = uVar10 + 1;
    if (iVar4 <= (int)uVar10) {
      memcpy(DAT_80006f14,DAT_80006f10,uVar16);
      memcpy(DAT_80006f10,DAT_80006f0c,uVar16);
      puVar8 = DAT_80006f0c;
      puVar13 = DAT_80006f20;
      if (3 < uVar16) {
        uVar18 = (uint)DAT_80006f0c & 3;
        in_r12 = uVar18;
        if (uVar18 != 0) {
          bVar17 = *(byte *)DAT_80006f20;
          puVar12 = (uint *)((int)DAT_80006f20 + 1);
          if (uVar18 < 3) {
            puVar12 = (uint *)((int)DAT_80006f20 + 2);
            in_r12 = (uint)*(byte *)(uint *)((int)DAT_80006f20 + 1);
          }
          puVar7 = (uint *)((int)DAT_80006f0c + 1);
          *(byte *)DAT_80006f0c = bVar17;
          puVar13 = puVar12;
          if (uVar18 < 2) {
            puVar13 = (uint *)((int)puVar12 + 1);
            bVar17 = *(byte *)puVar12;
          }
          puVar12 = puVar7;
          if (uVar18 < 3) {
            puVar12 = (uint *)((int)puVar8 + 2);
            *(byte *)puVar7 = (byte)in_r12;
          }
          uVar16 = (uVar16 + uVar18) - 4;
          puVar8 = puVar12;
          if (uVar18 < 2) {
            puVar8 = (uint *)((int)puVar12 + 1);
            *(byte *)puVar12 = bVar17;
          }
        }
        uVar10 = (uint)puVar13 & 3;
        if (uVar10 == 0) {
          while (uVar18 = uVar16 - 0x20, 0x1f < uVar16) {
            uVar16 = puVar13[1];
            uVar10 = puVar13[2];
            uVar9 = puVar13[3];
            *puVar8 = *puVar13;
            puVar8[1] = uVar16;
            puVar8[2] = uVar10;
            puVar8[3] = uVar9;
            uVar10 = puVar13[4];
            uVar16 = puVar13[5];
            uVar9 = puVar13[6];
            uVar11 = puVar13[7];
            puVar13 = puVar13 + 8;
            puVar8[4] = uVar10;
            puVar8[5] = uVar16;
            puVar8[6] = uVar9;
            puVar8[7] = uVar11;
            puVar8 = puVar8 + 8;
            uVar16 = uVar18;
          }
          if ((bool)((byte)(uVar18 >> 4) & 1)) {
            uVar10 = *puVar13;
            uVar9 = puVar13[1];
            uVar11 = puVar13[2];
            uVar15 = puVar13[3];
            puVar13 = puVar13 + 4;
            *puVar8 = uVar10;
            puVar8[1] = uVar9;
            puVar8[2] = uVar11;
            puVar8[3] = uVar15;
            puVar8 = puVar8 + 4;
          }
          if ((int)(uVar16 << 0x1c) < 0) {
            uVar10 = *puVar13;
            uVar9 = puVar13[1];
            puVar13 = puVar13 + 2;
            *puVar8 = uVar10;
            puVar8[1] = uVar9;
            puVar8 = puVar8 + 2;
          }
          puVar7 = puVar8;
          puVar12 = puVar13;
          if ((bool)((byte)(uVar18 >> 2) & 1)) {
            puVar12 = puVar13 + 1;
            uVar10 = *puVar13;
            puVar7 = puVar8 + 1;
            *puVar8 = uVar10;
          }
          uVar5 = (undefined2)uVar10;
          if ((uVar18 & 3) == 0) {
            return CONCAT44(puVar12,puVar7);
          }
          bVar24 = (bool)((byte)(uVar18 >> 1) & 1);
          uVar16 = uVar16 << 0x1f;
          bVar23 = (int)uVar16 < 0;
          puVar13 = puVar12;
          if (bVar24) {
            puVar13 = (uint *)((int)puVar12 + 2);
            uVar5 = *(undefined2 *)puVar12;
          }
          puVar8 = puVar13;
          if (bVar23) {
            puVar8 = (uint *)((int)puVar13 + 1);
            uVar16 = (uint)*(byte *)puVar13;
          }
          puVar13 = puVar7;
          if (bVar24) {
            puVar13 = (uint *)((int)puVar7 + 2);
            *(undefined2 *)puVar7 = uVar5;
          }
          puVar12 = puVar13;
          if (bVar23) {
            puVar12 = (uint *)((int)puVar13 + 1);
            *(byte *)puVar13 = (byte)uVar16;
          }
          return CONCAT44(puVar8,puVar12);
        }
        bVar23 = 3 < uVar16;
        uVar16 = uVar16 - 4;
        if (bVar23) {
          puVar13 = (uint *)((int)puVar13 - uVar10);
          in_r12 = *puVar13;
          puVar12 = puVar8;
          if (uVar10 == 2) {
            do {
              puVar7 = puVar13;
              uVar10 = in_r12 >> 0x10;
              puVar13 = puVar7 + 1;
              in_r12 = *puVar13;
              bVar23 = 3 < uVar16;
              uVar16 = uVar16 - 4;
              uVar10 = uVar10 | in_r12 << 0x10;
              puVar8 = puVar12 + 1;
              *puVar12 = uVar10;
              puVar12 = puVar8;
            } while (bVar23);
            puVar13 = (uint *)((int)puVar7 + 6);
          }
          else {
            if (uVar10 < 3) {
              do {
                puVar7 = puVar13;
                uVar10 = in_r12 >> 8;
                puVar13 = puVar7 + 1;
                in_r12 = *puVar13;
                bVar23 = 3 < uVar16;
                uVar16 = uVar16 - 4;
                uVar10 = uVar10 | in_r12 << 0x18;
                puVar8 = puVar12 + 1;
                *puVar12 = uVar10;
                puVar12 = puVar8;
              } while (bVar23);
              puVar13 = (uint *)((int)puVar7 + 5);
            }
            else {
              do {
                puVar7 = puVar13;
                uVar10 = in_r12 >> 0x18;
                puVar13 = puVar7 + 1;
                in_r12 = *puVar13;
                bVar23 = 3 < uVar16;
                uVar16 = uVar16 - 4;
                uVar10 = uVar10 | in_r12 << 8;
                puVar8 = puVar12 + 1;
                *puVar12 = uVar10;
                puVar12 = puVar8;
              } while (bVar23);
              puVar13 = (uint *)((int)puVar7 + 7);
            }
          }
        }
      }
      bVar20 = (byte)in_r12;
      bVar17 = (byte)uVar10;
      bVar24 = (bool)((byte)(uVar16 >> 1) & 1);
      uVar16 = uVar16 << 0x1f;
      bVar23 = (int)uVar16 < 0;
      if (bVar24) {
        pbVar14 = (byte *)((int)puVar13 + 1);
        bVar17 = *(byte *)puVar13;
        puVar13 = (uint *)((int)puVar13 + 2);
        bVar20 = *pbVar14;
      }
      puVar12 = puVar13;
      if (bVar23) {
        puVar12 = (uint *)((int)puVar13 + 1);
        uVar16 = (uint)*(byte *)puVar13;
      }
      if (bVar24) {
        pbVar14 = (byte *)((int)puVar8 + 1);
        *(byte *)puVar8 = bVar17;
        puVar8 = (uint *)((int)puVar8 + 2);
        *pbVar14 = bVar20;
      }
      puVar13 = puVar8;
      if (bVar23) {
        puVar13 = (uint *)((int)puVar8 + 1);
        *(byte *)puVar8 = (byte)uVar16;
      }
      return CONCAT44(puVar12,puVar13);
    }
  } while( true );
}



void FUN_80006f28(void)

{
  short sVar1;
  undefined *puVar2;
  int iVar3;
  uint uVar4;
  short *psVar5;
  ushort *puVar6;
  short *psVar7;
  uint uVar8;
  int iVar9;
  uint uVar10;
  
  uVar10 = 0;
  iVar9 = 10;
  uVar8 = 0;
  memcpy(DAT_800071c4,DAT_800071c0,DAT_800071bc);
  switch(*(undefined2 *)(PTR_DAT_800071c8 + 0x1a)) {
  case 1:
    scope_pre_process_250ns_data(DAT_800071c4,0,DAT_800071bc);
    break;
  case 2:
    FUN_80013eac(DAT_800071c4,0,4000);
    break;
  case 3:
    scope_pre_process_100ns_data(DAT_800071c4,0,DAT_800071cc);
    break;
  case 4:
    scope_pre_process_50ns_data(DAT_800071c4,0,DAT_800071d0);
    break;
  case 5:
    FUN_80023648(DAT_800071c4,DAT_800071d4);
    break;
  case 6:
    FUN_80023710(DAT_800071c4,DAT_800071d4);
    break;
  case 7:
    FUN_80023804(DAT_800071c4,DAT_800071d4);
    break;
  case 8:
    FUN_80023574(DAT_800071c4,DAT_800071d4);
    break;
  case 9:
    FUN_8001408c(DAT_800071c4,0,DAT_800071d8);
    break;
  case 10:
    FUN_80023734(DAT_800071c4,DAT_800071d4);
  }
  iVar3 = DAT_800071ec;
  switch(*(undefined2 *)(PTR_DAT_800071c8 + 0x1a)) {
  case 1:
    uVar8 = DAT_800071dc;
    break;
  case 2:
    uVar8 = DAT_800071e0;
    break;
  case 3:
    uVar8 = DAT_800071bc;
    break;
  case 4:
    uVar8 = DAT_800071e4;
    break;
  case 5:
    iVar9 = 0x14;
    break;
  case 6:
    iVar9 = 0x19;
    break;
  case 7:
    iVar9 = 0x32;
    break;
  case 8:
    iVar9 = 100;
    break;
  case 9:
    uVar8 = DAT_800071e8;
    break;
  case 10:
    iVar9 = 0x28;
  }
  if (((*(byte *)(DAT_800071ec + 10) < 0xb) ||
      (uVar4 = divide(DAT_800071cc,iVar9), uVar4 < *(ushort *)(iVar3 + 0x24))) ||
     (uVar10 = uVar4 - *(ushort *)(iVar3 + 0x24) & 0xffff, uVar10 < uVar10 + 0x2ee)) {
    sVar1 = (short)DAT_800071f8 + 0x4a;
    psVar7 = (short *)((int)DAT_800071c4 +
                      (*(ushort *)PTR_DAT_800071f0 + uVar10 + uVar8) * 2 + -0x3a9a);
    uVar10 = DAT_800071f8;
    psVar5 = DAT_800071f4;
    do {
      psVar5[1] = sVar1 - psVar7[1];
      psVar7 = psVar7 + 2;
      uVar10 = uVar10 - 1 & 0xffff;
      psVar5 = psVar5 + 2;
      *psVar5 = sVar1 - *psVar7;
    } while (uVar10 != 0);
  }
  puVar6 = DAT_800071fc;
  uVar10 = DAT_800071dc;
  puVar2 = PTR_DAT_800071c8;
  if (*(char *)(iVar3 + 0x3a) != '\0') {
    FUN_80007200();
    puVar6 = DAT_800071fc;
    uVar10 = DAT_800071dc;
    puVar2 = PTR_DAT_800071c8;
  }
  do {
    iVar9 = (int)((((uint)*puVar6 - (uint)*(ushort *)(puVar2 + 0x14)) + 400) * 0x10000) >> 0x10;
    if (iVar9 < 0x2f) {
      iVar9 = 0x2f;
    }
    else {
      if (0x1c0 < iVar9) {
        iVar9 = 0x1c0;
      }
    }
    uVar10 = uVar10 - 1;
    *puVar6 = (ushort)iVar9;
    puVar6 = puVar6 + 1;
  } while (uVar10 != 0);
  return;
}



void FUN_80007200(void)

{
  short sVar1;
  ushort uVar2;
  ulonglong uVar3;
  ushort *puVar4;
  ushort *puVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  int iVar9;
  
  iVar9 = DAT_8000737c;
  sVar1 = *(short *)(PTR_DAT_80007378 + 0x1e);
  if (sVar1 == 0) {
    if (*(char *)(DAT_8000737c + 0xf) != '\0') {
      FUN_8000754c();
    }
    if (*(byte *)(iVar9 + 0xf) < 2) {
      return;
    }
LAB_80007280:
    uVar7 = DAT_80007540;
    if (DAT_80007538 < *(ushort *)(DAT_80007534 + 0x12)) {
      uVar8 = 0;
    }
    else {
      uVar8 = ((DAT_80007538 - *(ushort *)(DAT_80007534 + 0x12)) +
              (uint)*(ushort *)(PTR_DAT_8000753c + 0x14)) - 400 & 0xffff;
    }
    uVar3 = (ulonglong)DAT_80007540;
    puVar4 = DAT_80007544;
    iVar9 = DAT_80007548;
    do {
      uVar6 = (uint)((ulonglong)((uint)*puVar4 * 0x19) * (ulonglong)uVar7 >> 0x23) & 0xffe0ffff;
      uVar2 = (ushort)uVar6;
      *puVar4 = uVar2;
      if (uVar6 < uVar8) {
        *puVar4 = 0;
      }
      else {
        *puVar4 = uVar2 - (short)(uint)((uVar8 * 0xf) * uVar3 >> 0x23);
      }
      iVar9 = iVar9 + -1;
      puVar4 = puVar4 + 1;
    } while (iVar9 != 0);
    return;
  }
  if (sVar1 == 1) {
    if (*(char *)(DAT_8000737c + 0xf) == '\0') {
      FUN_8000932c();
    }
    if (1 < *(byte *)(iVar9 + 0xf)) {
      FUN_8000749c();
    }
    if (*(byte *)(iVar9 + 0xf) < 3) {
      return;
    }
  }
  else {
    if (sVar1 == 2) {
      if (*(char *)(DAT_8000737c + 0xf) == '\0') {
        FUN_8000932c();
      }
      if (*(byte *)(iVar9 + 0xf) < 2) {
        FUN_80009270();
      }
      if (2 < *(byte *)(iVar9 + 0xf)) {
        FUN_8000754c();
      }
      if (*(byte *)(iVar9 + 0xf) < 4) {
        return;
      }
      goto LAB_80007280;
    }
    if (sVar1 == 3) {
      if (*(byte *)(DAT_8000737c + 0xf) < 2) {
        FUN_80009270();
      }
      if (*(byte *)(iVar9 + 0xf) < 3) {
        FUN_8000932c();
      }
      if (3 < *(byte *)(iVar9 + 0xf)) {
        FUN_8000749c();
      }
      if (*(byte *)(iVar9 + 0xf) < 5) {
        return;
      }
    }
    else {
      if (sVar1 == 4) {
        if (*(byte *)(DAT_8000737c + 0xf) < 3) {
          FUN_8000932c();
        }
        if (*(byte *)(iVar9 + 0xf) < 4) {
          FUN_80009270();
        }
        if (4 < *(byte *)(iVar9 + 0xf)) {
          FUN_8000754c();
        }
        if (*(byte *)(iVar9 + 0xf) < 6) {
          return;
        }
      }
      else {
        if (sVar1 != 5) {
          if (sVar1 != 6) {
            return;
          }
          if (*(byte *)(DAT_8000737c + 0xf) < 5) {
            FUN_8000932c();
          }
          if (5 < *(byte *)(iVar9 + 0xf)) {
            return;
          }
          iVar9 = DAT_800093a8;
          if (DAT_8000939c < *(ushort *)(DAT_80009398 + 0x12)) {
            uVar7 = 0;
            puVar4 = DAT_800093a4;
          }
          else {
            uVar7 = ((DAT_8000939c - *(ushort *)(DAT_80009398 + 0x12)) +
                    (uint)*(ushort *)(PTR_DAT_800093a0 + 0x14)) - 400 & 0xffff;
            puVar4 = DAT_800093a4;
          }
          do {
            puVar5 = puVar4 + 2;
            iVar9 = iVar9 + -1;
            puVar4[1] = (puVar4[1] >> 1) + (short)(uVar7 >> 1);
            *puVar5 = (*puVar5 >> 1) + (short)(uVar7 >> 1);
            puVar4 = puVar5;
          } while (iVar9 != 0);
          return;
        }
        if (*(byte *)(DAT_8000737c + 0xf) < 4) {
          FUN_80009270();
        }
        if (*(byte *)(iVar9 + 0xf) < 5) {
          FUN_8000932c();
        }
        if (*(byte *)(iVar9 + 0xf) < 6) {
          return;
        }
      }
    }
  }
  puVar4 = DAT_800075d4;
  iVar9 = DAT_800075d8;
  if (DAT_800075cc < *(ushort *)(DAT_800075c8 + 0x12)) {
    uVar7 = 0;
  }
  else {
    uVar7 = ((DAT_800075cc - *(ushort *)(DAT_800075c8 + 0x12)) +
            (uint)*(ushort *)(PTR_DAT_800075d0 + 0x14)) - 400 & 0xffff;
  }
  do {
    uVar8 = (*puVar4 & 0x7fff7fff) * 2;
    uVar2 = (ushort)uVar8;
    *puVar4 = uVar2;
    if (uVar8 < uVar7) {
      *puVar4 = 0;
    }
    else {
      *puVar4 = uVar2 - (short)uVar7;
    }
    iVar9 = iVar9 + -1;
    puVar4 = puVar4 + 1;
  } while (iVar9 != 0);
  return;
}



void scope_pre_process_ch2_25ns_data(void)

{
  undefined2 uVar1;
  int iVar2;
  int iVar3;
  uint *puVar4;
  uint *puVar5;
  uint *puVar6;
  uint *puVar7;
  uint **ppuVar8;
  uint **ppuVar9;
  byte *pbVar10;
  undefined2 *puVar11;
  uint uVar12;
  uint uVar13;
  byte bVar14;
  uint uVar15;
  int iVar16;
  short *psVar17;
  byte bVar18;
  undefined2 uVar19;
  uint *puVar20;
  uint *puVar21;
  uint uVar22;
  uint uVar23;
  uint uVar24;
  bool bVar25;
  bool bVar26;
  
  puVar7 = DAT_80007480;
  puVar21 = DAT_8000747c;
  iVar16 = 0x2e8;
  *(undefined2 *)((int)DAT_80007480 + 2) = *(undefined2 *)DAT_8000747c;
  uVar19 = *(undefined2 *)((int)puVar21 + 2);
  puVar11 = (undefined2 *)((int)puVar7 + 2);
  do {
    uVar1 = *(undefined2 *)(puVar21 + 1);
    puVar11[2] = uVar19;
    uVar19 = *(undefined2 *)((int)puVar21 + 6);
    iVar16 = iVar16 + -1;
    puVar11 = puVar11 + 4;
    *puVar11 = uVar1;
    iVar3 = DAT_80007490;
    iVar2 = DAT_8000748c;
    puVar21 = puVar21 + 1;
  } while (iVar16 != 0);
  *(undefined2 *)(DAT_80007488 + 2) = *DAT_80007484;
  uVar15 = DAT_80007494;
  uVar12 = 0;
  if (*(short *)(iVar2 + 0x20) == 0) {
    do {
      uVar13 = (uint)*(ushort *)(iVar3 + uVar12 * 2);
      if (*(ushort *)(iVar2 + 0x22) < uVar13) {
        puVar21 = (uint *)(uVar13 - *(ushort *)(iVar2 + 0x22));
        *(short *)(puVar7 + uVar12) = (short)puVar21;
      }
      else {
        puVar21 = puVar7 + uVar12;
        *(undefined2 *)puVar21 = 0;
      }
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < uVar15);
  }
  else {
    do {
      psVar17 = (short *)(iVar3 + uVar12 * 2);
      puVar21 = puVar7 + uVar12;
      uVar12 = uVar12 + 2 & 0xfffeffff;
      *(short *)puVar21 = *psVar17 + *(short *)(iVar2 + 0x22);
      *(short *)(puVar21 + 1) = psVar17[1] + *(short *)(iVar2 + 0x22);
    } while (uVar12 < uVar15);
  }
  uVar12 = DAT_80007498;
  puVar5 = DAT_8000747c;
  puVar7 = DAT_80007480;
  if (3 < DAT_80007498) {
    puVar20 = (uint *)((uint)DAT_8000747c & 3);
    uVar13 = DAT_80007498;
    puVar21 = puVar20;
    if (puVar20 != (uint *)0x0) {
      bVar14 = *(byte *)DAT_80007480;
      puVar6 = (uint *)((int)DAT_80007480 + 1);
      if (puVar20 < (uint *)0x3) {
        puVar6 = (uint *)((int)DAT_80007480 + 2);
        puVar21 = (uint *)(uint)*(byte *)(uint *)((int)DAT_80007480 + 1);
      }
      puVar4 = (uint *)((int)DAT_8000747c + 1);
      *(byte *)DAT_8000747c = bVar14;
      puVar7 = puVar6;
      if (puVar20 < (uint *)0x2) {
        puVar7 = (uint *)((int)puVar6 + 1);
        bVar14 = *(byte *)puVar6;
      }
      puVar6 = puVar4;
      if (puVar20 < (uint *)0x3) {
        puVar6 = (uint *)((int)puVar5 + 2);
        *(byte *)puVar4 = (byte)puVar21;
      }
      uVar13 = (int)puVar20 + (uVar12 - 4);
      puVar5 = puVar6;
      if (puVar20 < (uint *)0x2) {
        puVar5 = (uint *)((int)puVar6 + 1);
        *(byte *)puVar6 = bVar14;
      }
    }
    uVar15 = (uint)puVar7 & 3;
    if (uVar15 == 0) {
      while (uVar12 = uVar13 - 0x20, 0x1f < uVar13) {
        uVar15 = puVar7[1];
        uVar13 = puVar7[2];
        uVar22 = puVar7[3];
        *puVar5 = *puVar7;
        puVar5[1] = uVar15;
        puVar5[2] = uVar13;
        puVar5[3] = uVar22;
        uVar15 = puVar7[4];
        uVar13 = puVar7[5];
        uVar22 = puVar7[6];
        uVar23 = puVar7[7];
        puVar7 = puVar7 + 8;
        puVar5[4] = uVar15;
        puVar5[5] = uVar13;
        puVar5[6] = uVar22;
        puVar5[7] = uVar23;
        puVar5 = puVar5 + 8;
        uVar13 = uVar12;
      }
      if ((bool)((byte)(uVar12 >> 4) & 1)) {
        uVar15 = *puVar7;
        uVar22 = puVar7[1];
        uVar23 = puVar7[2];
        uVar24 = puVar7[3];
        puVar7 = puVar7 + 4;
        *puVar5 = uVar15;
        puVar5[1] = uVar22;
        puVar5[2] = uVar23;
        puVar5[3] = uVar24;
        puVar5 = puVar5 + 4;
      }
      if ((int)(uVar13 << 0x1c) < 0) {
        uVar15 = *puVar7;
        uVar22 = puVar7[1];
        puVar7 = puVar7 + 2;
        *puVar5 = uVar15;
        puVar5[1] = uVar22;
        puVar5 = puVar5 + 2;
      }
      puVar20 = puVar5;
      puVar21 = puVar7;
      if ((bool)((byte)(uVar12 >> 2) & 1)) {
        puVar21 = puVar7 + 1;
        uVar15 = *puVar7;
        puVar20 = puVar5 + 1;
        *puVar5 = uVar15;
      }
      uVar19 = (undefined2)uVar15;
      if ((uVar12 & 3) != 0) {
        bVar26 = (bool)((byte)(uVar12 >> 1) & 1);
        uVar13 = uVar13 << 0x1f;
        bVar25 = (int)uVar13 < 0;
        puVar7 = puVar21;
        if (bVar26) {
          puVar7 = (uint *)((int)puVar21 + 2);
          uVar19 = *(undefined2 *)puVar21;
        }
        if (bVar25) {
          uVar13 = (uint)*(byte *)puVar7;
        }
        puVar21 = puVar20;
        if (bVar26) {
          puVar21 = (uint *)((int)puVar20 + 2);
          *(undefined2 *)puVar20 = uVar19;
        }
        if (bVar25) {
          *(byte *)puVar21 = (byte)uVar13;
        }
        return;
      }
      return;
    }
    uVar12 = uVar13 - 4;
    if (3 < uVar13) {
      ppuVar8 = (uint **)((int)puVar7 - uVar15);
      puVar21 = *ppuVar8;
      puVar7 = puVar5;
      if (uVar15 == 2) {
        do {
          ppuVar9 = ppuVar8;
          uVar15 = (uint)puVar21 >> 0x10;
          ppuVar8 = ppuVar9 + 1;
          puVar21 = *ppuVar8;
          bVar25 = 3 < uVar12;
          uVar12 = uVar12 - 4;
          uVar15 = uVar15 | (int)puVar21 << 0x10;
          puVar5 = puVar7 + 1;
          *puVar7 = uVar15;
          puVar7 = puVar5;
        } while (bVar25);
        puVar7 = (uint *)((int)ppuVar9 + 6);
      }
      else {
        if (uVar15 < 3) {
          do {
            ppuVar9 = ppuVar8;
            uVar15 = (uint)puVar21 >> 8;
            ppuVar8 = ppuVar9 + 1;
            puVar21 = *ppuVar8;
            bVar25 = 3 < uVar12;
            uVar12 = uVar12 - 4;
            uVar15 = uVar15 | (int)puVar21 << 0x18;
            puVar5 = puVar7 + 1;
            *puVar7 = uVar15;
            puVar7 = puVar5;
          } while (bVar25);
          puVar7 = (uint *)((int)ppuVar9 + 5);
        }
        else {
          do {
            ppuVar9 = ppuVar8;
            uVar15 = (uint)puVar21 >> 0x18;
            ppuVar8 = ppuVar9 + 1;
            puVar21 = *ppuVar8;
            bVar25 = 3 < uVar12;
            uVar12 = uVar12 - 4;
            uVar15 = uVar15 | (int)puVar21 << 8;
            puVar5 = puVar7 + 1;
            *puVar7 = uVar15;
            puVar7 = puVar5;
          } while (bVar25);
          puVar7 = (uint *)((int)ppuVar9 + 7);
        }
      }
    }
  }
  bVar18 = (byte)puVar21;
  bVar14 = (byte)uVar15;
  bVar26 = (bool)((byte)(uVar12 >> 1) & 1);
  uVar12 = uVar12 << 0x1f;
  bVar25 = (int)uVar12 < 0;
  if (bVar26) {
    pbVar10 = (byte *)((int)puVar7 + 1);
    bVar14 = *(byte *)puVar7;
    puVar7 = (uint *)((int)puVar7 + 2);
    bVar18 = *pbVar10;
  }
  if (bVar25) {
    uVar12 = (uint)*(byte *)puVar7;
  }
  if (bVar26) {
    pbVar10 = (byte *)((int)puVar5 + 1);
    *(byte *)puVar5 = bVar14;
    puVar5 = (uint *)((int)puVar5 + 2);
    *pbVar10 = bVar18;
  }
  if (bVar25) {
    *(byte *)puVar5 = (byte)uVar12;
  }
  return;
}



void FUN_8000749c(void)

{
  ushort uVar1;
  ulonglong uVar2;
  uint uVar3;
  ushort *puVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  
  uVar3 = DAT_80007540;
  if (DAT_80007538 < *(ushort *)(DAT_80007534 + 0x12)) {
    uVar6 = 0;
  }
  else {
    uVar6 = ((DAT_80007538 - *(ushort *)(DAT_80007534 + 0x12)) +
            (uint)*(ushort *)(PTR_DAT_8000753c + 0x14)) - 400 & 0xffff;
  }
  uVar2 = (ulonglong)DAT_80007540;
  puVar4 = DAT_80007544;
  iVar7 = DAT_80007548;
  do {
    uVar5 = (uint)((ulonglong)((uint)*puVar4 * 0x19) * (ulonglong)uVar3 >> 0x23) & 0xffe0ffff;
    uVar1 = (ushort)uVar5;
    *puVar4 = uVar1;
    if (uVar5 < uVar6) {
      *puVar4 = 0;
    }
    else {
      *puVar4 = uVar1 - (short)(uint)((uVar6 * 0xf) * uVar2 >> 0x23);
    }
    iVar7 = iVar7 + -1;
    puVar4 = puVar4 + 1;
  } while (iVar7 != 0);
  return;
}



void FUN_8000754c(void)

{
  ushort uVar1;
  ushort *puVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  
  puVar2 = DAT_800075d4;
  iVar5 = DAT_800075d8;
  if (DAT_800075cc < *(ushort *)(DAT_800075c8 + 0x12)) {
    uVar3 = 0;
  }
  else {
    uVar3 = ((DAT_800075cc - *(ushort *)(DAT_800075c8 + 0x12)) +
            (uint)*(ushort *)(PTR_DAT_800075d0 + 0x14)) - 400 & 0xffff;
  }
  do {
    uVar4 = (*puVar2 & 0x7fff7fff) * 2;
    uVar1 = (ushort)uVar4;
    *puVar2 = uVar1;
    if (uVar4 < uVar3) {
      *puVar2 = 0;
    }
    else {
      *puVar2 = uVar1 - (short)uVar3;
    }
    iVar5 = iVar5 + -1;
    puVar2 = puVar2 + 1;
  } while (iVar5 != 0);
  return;
}



void FUN_800075dc(void)

{
  undefined2 uVar1;
  undefined2 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  int iVar5;
  undefined4 *puVar6;
  undefined4 *puVar7;
  undefined2 *puVar8;
  int iVar9;
  
  puVar6 = DAT_800076f8;
  puVar8 = DAT_800076f4;
  uVar3 = FUN_8003a3a0(*DAT_800076f4);
  uVar4 = DAT_800076fc;
  uVar3 = FUN_8003a0c4(uVar3,DAT_800076fc);
  *puVar6 = uVar3;
  puVar6[1] = 0;
  uVar1 = puVar8[1];
  puVar7 = puVar6 + 1;
  iVar9 = DAT_80007700;
  do {
    uVar2 = puVar8[2];
    uVar3 = FUN_8003a3a0(uVar1);
    uVar3 = FUN_8003a0c4(uVar3,uVar4);
    puVar6[2] = uVar3;
    puVar7[2] = 0;
    uVar1 = puVar8[3];
    uVar3 = FUN_8003a3a0(uVar2);
    uVar3 = FUN_8003a0c4(uVar3,uVar4);
    puVar6 = puVar6 + 4;
    *puVar6 = uVar3;
    iVar9 = iVar9 + -1;
    puVar7 = puVar7 + 4;
    *puVar7 = 0;
    puVar8 = puVar8 + 2;
  } while (iVar9 != 0);
  uVar3 = FUN_8003a3a0(*DAT_80007704);
  uVar4 = FUN_8003a0c4(uVar3,uVar4);
  puVar6 = DAT_80007708;
  *DAT_80007708 = uVar4;
  puVar6[1] = 0;
  FUN_800164e4(DAT_800076f8);
  puVar7 = (undefined4 *)(DAT_8000770c + 0x2f8);
  puVar6 = (undefined4 *)(DAT_8000770c + 0x2fa);
  puVar8 = DAT_8000770c;
  iVar9 = DAT_80007710;
  do {
    uVar4 = FUN_8003a44c(*puVar6,*puVar6);
    uVar3 = FUN_8003a44c(*puVar7,*puVar7);
    FUN_80039fd8(uVar3,uVar4);
    FUN_80039f74();
    FUN_80036618();
    iVar5 = FUN_800396bc();
    if (iVar5 < 0) {
      iVar5 = 0;
    }
    else {
      if (400 < iVar5) {
        iVar5 = 400;
      }
    }
    iVar9 = iVar9 + -1;
    puVar6 = puVar6 + 2;
    puVar7 = puVar7 + 2;
    *puVar8 = (short)iVar5;
    puVar8 = puVar8 + 1;
  } while (iVar9 != 0);
  return;
}



void FUN_80007714(void)

{
  int dividend;
  int iVar1;
  int iVar2;
  ushort *puVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  
  if (*(byte *)(DAT_800077b4 + 10) < 0xb) {
    iVar2 = 100;
    iVar1 = 600;
  }
  else {
    iVar2 = 200;
    iVar1 = 0x4b0;
  }
  puVar3 = (ushort *)(DAT_800077bc + iVar2 * 2);
  uVar6 = 0;
  dividend = 0;
  uVar4 = iVar1 - iVar2 & 0xffff;
  uVar7 = DAT_800077b8;
  do {
    uVar5 = (uint)*puVar3;
    if (uVar6 < uVar5) {
      uVar6 = uVar5;
    }
    if (uVar5 < uVar7) {
      uVar7 = uVar5;
    }
    uVar4 = uVar4 - 1 & 0xffff;
    dividend = dividend + uVar5;
    puVar3 = puVar3 + 1;
  } while (uVar4 != 0);
  iVar1 = divide(dividend,iVar1 - iVar2);
  iVar2 = DAT_800077c0;
  *(short *)(DAT_800077c0 + 0xee) = (short)uVar6;
  *(short *)(iVar2 + 0xf0) = (short)uVar7;
  *(short *)(iVar2 + 0xf4) = (short)(uVar6 + uVar7 >> 1);
  *(short *)(iVar2 + 0xf2) = (short)uVar6 - (short)uVar7;
  *(short *)(iVar2 + 0xf6) = (short)iVar1;
  return;
}



void FUN_800077c4(void)

{
  int iVar1;
  undefined *puVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  ushort uVar6;
  ushort *puVar7;
  uint uVar8;
  uint uVar9;
  uint in_r12;
  undefined8 uVar10;
  uint local_48;
  uint local_44;
  ushort local_40;
  uint local_3c;
  uint local_2c;
  int local_28;
  
  iVar1 = DAT_80007dbc;
  local_3c = 0;
  local_44 = 0;
  local_2c = 0;
  if (*(byte *)(DAT_80007dbc + 10) < 0xb) {
    uVar9 = 2;
    local_40 = 0x2e4;
  }
  else {
    uVar9 = 10;
    local_40 = 0x5d2;
  }
  uVar3 = (uint)*(ushort *)(DAT_80007dc4 + 0xf4);
  local_48 = 10;
  if (10 < local_40) {
    do {
      puVar7 = (ushort *)(DAT_80007dc0 + local_48 * 2);
      uVar8 = (uint)puVar7[-1];
      if (uVar8 < uVar3) {
        in_r12 = (uint)*puVar7;
      }
      if ((uVar8 < uVar3 && uVar3 < in_r12) || ((uVar8 < uVar3 && (uVar3 <= *puVar7)))) {
        if (local_3c == 0) {
          local_3c = local_48;
        }
        local_2c = local_2c + 1;
        local_44 = local_48;
      }
      local_48 = local_48 + 1;
    } while (local_48 < local_40);
  }
  local_28 = 0;
  uVar8 = local_3c;
  while (uVar8 < local_44) {
    if (uVar3 < *(ushort *)(DAT_80007dc0 + uVar8 * 2)) {
      local_28 = local_28 + 1;
    }
    uVar8 = uVar8 + 1;
  }
  iVar4 = divide(local_28 * 1000,local_44 - local_3c);
  uVar3 = (uint)(byte)PTR_DAT_80007dc8[2];
  *(int *)(DAT_80007dcc + uVar3 * 4) = iVar4;
  if (local_2c < 2) {
    local_2c = 2;
  }
  iVar4 = DAT_80007dd0;
  if (*(byte *)(iVar1 + 10) < 0x1b) {
    iVar4 = 100;
  }
  uVar8 = divide((local_44 - local_3c) * iVar4,local_2c - 1);
  switch(*(undefined *)(iVar1 + 10)) {
  case 9:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = DAT_80007de4 * uVar8;
    break;
  case 10:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = uVar8 * 4000;
    break;
  case 0xb:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = uVar8 * 2000;
    break;
  case 0xc:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = uVar8 * 1000;
    break;
  case 0xd:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = uVar8 * 400;
    break;
  case 0xe:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = uVar8 * 200;
    break;
  case 0xf:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = uVar8 * 100;
    break;
  case 0x10:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = uVar8 * 0x28;
    break;
  case 0x11:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = uVar8 * 0x14;
    break;
  case 0x12:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = uVar8 * 10;
    break;
  case 0x13:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = uVar8 << 2;
    break;
  case 0x14:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = uVar8 << 1;
    break;
  case 0x15:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = uVar8;
    break;
  case 0x16:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) =
         (uint)((ulonglong)(uVar8 * 10) * (ulonglong)DAT_80007ddc >> 0x23);
    break;
  case 0x17:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_80007de0 >> 0x22)
    ;
    break;
  case 0x18:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_80007de0 >> 0x23)
    ;
    break;
  case 0x19:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_80007de0 >> 0x24)
    ;
    break;
  case 0x1a:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_80007ddc >> 0x24)
    ;
    break;
  case 0x1b:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_80007ddc >> 0x25)
    ;
    break;
  case 0x1c:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_80007ddc >> 0x26)
    ;
    break;
  case 0x1d:
    *(uint *)(DAT_80007dd8 + uVar3 * 4) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_80007dd4 >> 0x25)
    ;
  }
  puVar2 = PTR_DAT_80007dc8;
  uVar3 = uVar3 + 1 & 0xff;
  PTR_DAT_80007dc8[2] = (char)uVar3;
  if (uVar9 <= uVar3) {
    if (uVar9 != 0) {
      uVar3 = DAT_80007dd8;
    }
    puVar2[2] = 0;
    uVar8 = 0;
    local_48 = 0;
    if (uVar9 != 0) {
      do {
        if (uVar8 < *(uint *)(uVar3 + local_48 * 4)) {
          uVar8 = *(uint *)(uVar3 + local_48 * 4);
        }
        local_48 = local_48 + 1;
      } while (local_48 < uVar9);
    }
    uVar3 = translate_parameter(0xe,~(uVar8 >> 0x10 | uVar8 << 0x10));
    iVar4 = DAT_80007dc4;
    *(uint *)(DAT_80007dc4 + 0x234) = uVar3;
    uVar3 = (uint)*(byte *)(iVar1 + 10);
    if (uVar3 < 0x1b) {
      *(uint *)(iVar4 + 0x244) = uVar8;
    }
    else {
      *(uint *)(iVar4 + 0x244) = (uint)((ulonglong)uVar8 * (ulonglong)DAT_80007dd4 >> 0x26);
      uVar10 = FUN_800397d0();
      FUN_80039890((int)uVar10,(int)((ulonglong)uVar10 >> 0x20),DAT_80007de8,DAT_80007dec);
      uVar10 = FUN_8003972c();
      uVar3 = (uint)((ulonglong)uVar10 >> 0x20);
      *(int *)(iVar4 + 0x234) = (int)uVar10;
    }
    uVar8 = DAT_80007df0;
    if (uVar9 != 0) {
      uVar3 = DAT_80007dcc;
    }
    uVar5 = 0;
    local_48 = 0;
    if (uVar9 != 0) {
      do {
        if (uVar5 < *(uint *)(uVar3 + local_48 * 4)) {
          uVar5 = *(uint *)(uVar3 + local_48 * 4);
        }
        local_48 = local_48 + 1;
      } while (local_48 < uVar9);
    }
    uVar9 = (uint)((ulonglong)uVar5 * (ulonglong)DAT_80007de0 >> 0x23);
    *(uint *)(iVar4 + 0x274) = uVar9;
    *(uint *)(iVar4 + 0x284) = 100 - uVar9;
    uVar9 = *(uint *)(iVar4 + 0x244);
    if (uVar9 < uVar8) {
      uVar5 = (uint)((ulonglong)(uVar9 * uVar5) * (ulonglong)DAT_80007dd4 >> 0x26);
    }
    else {
      uVar5 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_80007dd4 >> 0x26) * uVar5;
    }
    *(uint *)(iVar4 + 0x254) = uVar5;
    *(uint *)(iVar4 + 0x264) = uVar9 - uVar5;
  }
  iVar4 = DAT_80007dc4;
  if (*(ushort *)(DAT_80007dc4 + 0xf2) < 0x14) {
    local_3c = 10;
    local_44 = 0x2e4;
    *(undefined4 *)(DAT_80007dc4 + 0x234) = 0;
    *(undefined4 *)(iVar4 + 0x244) = 0;
    *(undefined4 *)(iVar4 + 0x254) = 0;
    *(undefined4 *)(iVar4 + 0x264) = 0;
    *(undefined4 *)(iVar4 + 0x274) = 0;
    *(undefined4 *)(iVar4 + 0x284) = 0;
  }
  *(short *)(iVar4 + 0xfc) = (short)local_3c;
  *(short *)(iVar4 + 0xfe) = (short)local_44;
  if (*(char *)(iVar1 + 0xf) == '\x06') {
    uVar6 = 0xf;
  }
  else {
    uVar6 = 7;
  }
  if (*(ushort *)(iVar4 + 0xf2) < uVar6) {
    *(undefined4 *)(iVar4 + 0x234) = 0;
  }
  return;
}



void FUN_80007df4(void)

{
  undefined2 uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  
  iVar4 = DAT_80007f08;
  iVar3 = DAT_80007f04;
  iVar2 = DAT_80007f00;
  uVar6 = DAT_80007efc;
  uVar7 = 0;
  uVar1 = (undefined2)DAT_80007efc;
  *(undefined2 *)(DAT_80007f00 + 0x30) = uVar1;
  *(undefined2 *)(iVar2 + 0x34) = uVar1;
  uVar5 = DAT_80007f0c;
  uVar6 = uVar6 | (int)uVar6 >> 6;
  if (*(char *)(iVar2 + 0x22) != '\0') {
    do {
      iVar8 = iVar3 + uVar6 * 2;
      if ((*(ushort *)(iVar4 + 0xf4) < *(ushort *)(iVar8 + -2)) &&
         (*(ushort *)(iVar8 + 2) < *(ushort *)(iVar4 + 0xf4))) {
        uVar7 = uVar7 + 1 & 0xfffeffff;
        if (uVar7 == 1) {
          *(short *)(iVar2 + 0x30) = (short)uVar6;
          uVar6 = uVar6 + 10 & 0xfffeffff;
        }
        else {
          if (uVar7 == 2) goto LAB_80007e8c;
        }
      }
      uVar6 = uVar6 + 1 & 0xfffeffff;
      if (uVar5 <= uVar6) {
        return;
      }
    } while( true );
  }
  do {
    iVar8 = iVar3 + uVar6 * 2;
    if ((*(ushort *)(iVar8 + -2) < *(ushort *)(iVar4 + 0xf4)) &&
       (*(ushort *)(iVar4 + 0xf4) < *(ushort *)(iVar8 + 2))) {
      uVar7 = uVar7 + 1 & 0xfffeffff;
      if (uVar7 == 1) {
        *(short *)(iVar2 + 0x30) = (short)uVar6;
        uVar6 = uVar6 + 10 & 0xfffeffff;
      }
      else {
        if (uVar7 == 2) {
LAB_80007e8c:
          *(short *)(iVar2 + 0x34) = (short)uVar6;
          return;
        }
      }
    }
    uVar6 = uVar6 + 1 & 0xfffeffff;
    if (uVar5 <= uVar6) {
      return;
    }
  } while( true );
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x800085b4
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_80008594(void)

{
  short sVar1;
  ushort uVar2;
  bool bVar3;
  undefined *puVar4;
  void *pvVar5;
  uint uVar6;
  undefined2 uVar7;
  void *pvVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  int iVar12;
  uint unaff_r5;
  code *UNRECOVERED_JUMPTABLE_00;
  bool bVar13;
  bool bVar14;
  
  puVar4 = PTR_DAT_80008d7c;
  iVar12 = DAT_80008d78;
  bVar3 = false;
  if (*(ushort *)(DAT_80008d74 + 0xf2) < 0xf) {
                    // WARNING: Could not recover jumptable at 0x800085b4. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)();
    return;
  }
  if (*(char *)(DAT_80008d78 + 10) == '\x1b') {
    unaff_r5 = 10;
  }
  if (*(char *)(DAT_80008d78 + 10) == '\x1c') {
    unaff_r5 = 0xf;
  }
  sVar1 = *(short *)(PTR_DAT_80008d7c + 0x22);
  if (0x1c < *(byte *)(DAT_80008d78 + 10)) {
    unaff_r5 = 0x1e;
  }
  pvVar8 = DAT_80008d88;
  if (((((((sVar1 != 0) && (pvVar8 = DAT_80008d8c, sVar1 != 1)) &&
         (pvVar8 = DAT_80008d90, sVar1 != 2)) &&
        ((pvVar8 = DAT_80008d94, sVar1 != 3 && (pvVar8 = DAT_80008d98, sVar1 != 4)))) &&
       (pvVar8 = DAT_80008d9c, sVar1 != 5)) &&
      (((pvVar8 = DAT_80008da0, sVar1 != 6 && (pvVar8 = DAT_80008da4, sVar1 != 7)) &&
       ((pvVar8 = DAT_80008da8, sVar1 != 8 &&
        (((pvVar8 = DAT_80008dac, sVar1 != 9 && (pvVar8 = DAT_80008db0, sVar1 != 10)) &&
         (pvVar8 = DAT_80008db4, sVar1 != 0xb)))))))) &&
     (((pvVar8 = DAT_80008db8, sVar1 != 0xc && (pvVar8 = DAT_80008dbc, sVar1 != 0xd)) &&
      ((pvVar8 = DAT_80008dc0, sVar1 != 0xe &&
       ((((pvVar8 = DAT_80008dc4, sVar1 != 0xf && (pvVar8 = DAT_80008dc8, sVar1 != 0x10)) &&
         ((pvVar8 = DAT_80008dcc, sVar1 != 0x11 &&
          (((pvVar8 = DAT_80008dd0, sVar1 != 0x12 && (pvVar8 = DAT_80008dd4, sVar1 != 0x13)) &&
           (pvVar8 = DAT_80008dd8, sVar1 != 0x14)))))) &&
        ((pvVar8 = DAT_80008ddc, sVar1 != 0x15 && (pvVar8 = DAT_80008de0, sVar1 != 0x16)))))))))) {
    if (sVar1 == 0x17) {
      pvVar8 = (void *)((int)DAT_80008d84 + 0x1f400);
    }
    else {
      pvVar8 = DAT_80008de4;
      if (((sVar1 != 0x18) && (pvVar8 = DAT_80008de8, sVar1 != 0x19)) &&
         ((pvVar8 = DAT_80008dec, sVar1 != 0x1a &&
          (((pvVar8 = DAT_80008df0, sVar1 != 0x1b && (pvVar8 = DAT_80008df4, sVar1 != 0x1c)) &&
           (pvVar8 = DAT_80008df8, sVar1 != 0x1d)))))) goto LAB_800087d0;
    }
  }
  memcpy(pvVar8,DAT_80008d84,DAT_80008d80);
LAB_800087d0:
  uVar6 = DAT_80008dfc;
  uVar9 = *(ushort *)(PTR_DAT_80008d7c + 0x22) + 1 & 0xfffeffff;
  uVar7 = (undefined2)uVar9;
  if (*(char *)(iVar12 + 0x23) == '\0') {
    uVar9 = (uint)*(ushort *)(iVar12 + 0x30);
    bVar14 = DAT_80008dfc <= uVar9;
    bVar13 = uVar9 == DAT_80008dfc;
    if (bVar14 && !bVar13) {
      uVar9 = (uint)*(ushort *)(iVar12 + 0x34);
    }
    if (bVar14 && !bVar13) {
      bVar14 = DAT_80008dfc <= uVar9;
      bVar13 = uVar9 == DAT_80008dfc;
    }
    if (bVar14 && !bVar13) {
      uVar11 = (uint)*(ushort *)(puVar4 + 0xc);
      uVar2 = *(ushort *)(PTR_DAT_80008d7c + 0x10);
      uVar9 = (uint)uVar2;
      if ((((int)(uVar11 - 10) < (int)(uint)*(ushort *)(iVar12 + 0x30)) &&
          ((uint)*(ushort *)(iVar12 + 0x30) < uVar11 + 10)) ||
         ((((int)(uVar11 - 10) < (int)(uint)*(ushort *)(iVar12 + 0x34) &&
           ((uint)*(ushort *)(iVar12 + 0x34) < uVar11 + 10)) ||
          ((iVar10 = uVar11 - ((uint)*(ushort *)(iVar12 + 0x32) - (uint)*(ushort *)(iVar12 + 0x2e) &
                              0xffff), iVar10 + -10 < (int)(uint)*(ushort *)(iVar12 + 0x30) &&
           ((int)(uint)*(ushort *)(iVar12 + 0x30) < iVar10 + 10)))))) {
        if (uVar9 < unaff_r5) {
          *(ushort *)(puVar4 + 0x10) = uVar2 + 1;
        }
        bVar3 = uVar9 >= unaff_r5;
        *(undefined2 *)(puVar4 + 0x22) = uVar7;
      }
      else {
        *(undefined2 *)(puVar4 + 0xc) = *(undefined2 *)(iVar12 + 0x34);
        if (uVar9 != 0) {
          *(ushort *)(puVar4 + 0x10) = uVar2 - 1;
        }
      }
    }
    if (unaff_r5 <= *(ushort *)(puVar4 + 0x22)) {
      *(undefined2 *)(puVar4 + 0x22) = 0;
    }
    if (!bVar3) {
                    // WARNING: Could not recover jumptable at 0x80008914. Too many branches
                    // WARNING: Treating indirect jump as call
      (*UNRECOVERED_JUMPTABLE_00)();
      return;
    }
  }
  else {
    *(undefined2 *)(puVar4 + 0x22) = uVar7;
    if (unaff_r5 <= uVar9) {
      *(undefined2 *)(puVar4 + 0x22) = 0;
    }
  }
  pvVar8 = DAT_80008d9c;
  if (*(char *)(DAT_80008d78 + 10) == '\x1b') {
    iVar12 = 0;
    do {
      uVar9 = divide((uint)*(ushort *)((int)DAT_80008d88 + iVar12 * 2) +
                     (uint)*(ushort *)((int)pvVar8 + iVar12 * 2 + 6000) +
                     (uint)*(ushort *)((int)pvVar8 + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)pvVar8 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2 + 6000) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2 + 4000) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)DAT_80008da4 + iVar12 * 2) +
                     (uint)*(ushort *)((int)pvVar8 + iVar12 * 2 + 8000),unaff_r5);
      uVar9 = uVar9 & 0xffff;
      uVar7 = (undefined2)uVar9;
      if (uVar9 < 0x2f) {
        uVar7 = 0x2f;
      }
      else {
        if (0x1c0 < uVar9) {
          uVar7 = 0x1c0;
        }
      }
      iVar10 = iVar12 * 2;
      iVar12 = iVar12 + 1;
      *(undefined2 *)((int)DAT_80008d84 + iVar10) = uVar7;
    } while (iVar12 < (int)uVar6);
  }
  if (*(char *)(DAT_80008d78 + 10) == '\x1c') {
    iVar12 = 0;
    do {
      uVar9 = divide((uint)*(ushort *)((int)DAT_80008dc0 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2 + 6000) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2 + 4000) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2 + 8000) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2 + 10000) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2 + 12000) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2 + 14000) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2 + 16000) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2 + 18000) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2 + 20000) +
                     (uint)*(ushort *)((int)DAT_80008db8 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008dbc + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008d88 + iVar12 * 2),unaff_r5);
      uVar9 = uVar9 & 0xffff;
      uVar7 = (undefined2)uVar9;
      if (uVar9 < 0x2f) {
        uVar7 = 0x2f;
      }
      else {
        if (0x1c0 < uVar9) {
          uVar7 = 0x1c0;
        }
      }
      iVar10 = iVar12 * 2;
      iVar12 = iVar12 + 1;
      *(undefined2 *)((int)DAT_80008d84 + iVar10) = uVar7;
    } while (iVar12 < (int)uVar6);
  }
  pvVar5 = DAT_80008dac;
  pvVar8 = DAT_80008d90;
  if (*(byte *)(DAT_80008d78 + 10) < 0x1d) {
                    // WARNING: Could not recover jumptable at 0x80008b48. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)();
    return;
  }
  iVar12 = 0;
  do {
    uVar9 = divide_2((uint)*(ushort *)((int)DAT_80008dc8 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008dbc + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)DAT_80008d9c + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)DAT_80008d8c + iVar12 * 2) +
                     (uint)*(ushort *)((int)pvVar8 + iVar12 * 2) +
                     (uint)*(ushort *)((int)pvVar8 + iVar12 * 2 + 4000) +
                     (uint)*(ushort *)((int)pvVar8 + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)DAT_80008d9c + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008da4 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008da4 + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)pvVar5 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008db0 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008db4 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008db4 + iVar12 * 2 + 2000) +
                     (uint)*(ushort *)((int)DAT_80008dbc + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008dc4 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008dcc + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008dd0 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008dd4 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008d88 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008dd8 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008ddc + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008de0 + iVar12 * 2) +
                     (uint)*(ushort *)(DAT_80008e00 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008de4 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008de8 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008dec + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008df0 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008df4 + iVar12 * 2) +
                     (uint)*(ushort *)((int)DAT_80008df8 + iVar12 * 2),unaff_r5);
    uVar9 = uVar9 & 0xffff;
    uVar7 = (undefined2)uVar9;
    if (uVar9 < 0x2f) {
      uVar7 = 0x2f;
    }
    else {
      if (0x1c0 < uVar9) {
        uVar7 = 0x1c0;
      }
    }
    iVar10 = iVar12 * 2;
    iVar12 = iVar12 + 1;
    *(undefined2 *)((int)DAT_80008d84 + iVar10) = uVar7;
  } while (iVar12 < (int)uVar6);
                    // WARNING: Could not recover jumptable at 0x80008d70. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE_00)();
  return;
}



void FUN_80008e04(void)

{
  uint uVar1;
  ushort uVar2;
  uint uVar3;
  ushort uVar4;
  uint uVar5;
  ushort *puVar6;
  ushort *puVar7;
  int unaff_r4;
  int iVar8;
  int iVar9;
  code **ppcVar10;
  undefined auStack4 [4];
  
  ppcVar10 = (code **)&stack0xffffffe8;
  iVar8 = DAT_80008eb0;
  if ((*(byte *)(DAT_80008eac + 10) < 0x19) &&
     (iVar8 = DAT_80008eb4, *(byte *)(DAT_80008eac + 10) < 9)) {
    iVar8 = DAT_80008eb8;
  }
  uVar5 = translate_parameter(0xb,(uint)*(byte *)(DAT_80008eac + 0xf));
  uVar3 = DAT_80008ec4;
  iVar9 = iVar8;
  if (iVar8 == 0) {
    ppcVar10 = (code **)auStack4;
    iVar9 = unaff_r4;
  }
  puVar6 = DAT_80008ec0;
  puVar7 = DAT_80008ebc;
                    // WARNING: Could not recover jumptable at 0x80008e4c. Too many branches
                    // WARNING: Treating indirect jump as call
  if (iVar8 == 0) {
    (**ppcVar10)();
    return;
  }
  do {
    uVar1 = (uVar5 & 0xffff) * (uint)*puVar7 & 0xffff;
    uVar2 = (ushort)(DAT_80008ec8 * uVar1 + DAT_80008ec8 >> 0x10);
    uVar4 = uVar2 >> 6;
    if (0x32 < (int)(uVar1 + (uint)((ulonglong)uVar1 * (ulonglong)uVar3 >> 0x25) * -100)) {
      uVar4 = (uVar2 >> 6) + 1;
    }
    iVar9 = iVar9 + -1;
    *puVar6 = uVar4;
    puVar6 = puVar6 + 1;
    puVar7 = puVar7 + 1;
  } while (iVar9 != 0);
                    // WARNING: Could not recover jumptable at 0x80008ea8. Too many branches
                    // WARNING: Treating indirect jump as call
  (*ppcVar10[5])();
  return;
}



void FUN_80008ecc(void)

{
  uint uVar1;
  ushort *puVar2;
  int iVar3;
  
  uVar1 = DAT_80008ef8;
  puVar2 = DAT_80008ef4;
  iVar3 = DAT_80008efc;
  do {
    if (uVar1 < *puVar2) {
      *puVar2 = (ushort)uVar1;
    }
    iVar3 = iVar3 + -1;
    puVar2 = puVar2 + 1;
  } while (iVar3 != 0);
  return;
}



void FUN_80008f00(void)

{
  undefined2 uVar1;
  undefined2 uVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  undefined2 *puVar5;
  undefined2 *puVar6;
  int iVar7;
  uint uVar8;
  
  puVar4 = DAT_80008fa8;
  puVar3 = DAT_80008fa4;
  uVar8 = DAT_80008f98;
  if ((*(byte *)(DAT_80008f94 + 10) < 0x19) &&
     (uVar8 = DAT_80008f9c, *(byte *)(DAT_80008f94 + 10) < 9)) {
    uVar8 = DAT_80008fa0;
  }
  puVar5 = DAT_80008fa4 + -1;
  puVar6 = DAT_80008fa8 + -1;
  if ((uVar8 & 1) == 0) {
    *DAT_80008fa8 = *DAT_80008fa4;
    puVar5 = puVar3;
    puVar6 = puVar4;
  }
  uVar1 = puVar5[1];
  iVar7 = (int)(uVar8 - 1) >> 1;
  while (iVar7 != 0) {
    uVar2 = puVar5[2];
    puVar6[1] = uVar1;
    uVar1 = puVar5[3];
    iVar7 = iVar7 + -1;
    puVar6 = puVar6 + 2;
    *puVar6 = uVar2;
    puVar5 = puVar5 + 2;
  }
  iVar7 = uVar8 - 1;
  if (-1 < iVar7) {
    puVar4[iVar7] = puVar3[iVar7];
    return;
  }
  return;
}



void FUN_80008fac(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  undefined2 *puVar5;
  int iVar6;
  
  uVar3 = DAT_80009014;
  iVar2 = DAT_80009010;
  iVar1 = DAT_8000900c;
  uVar4 = 0;
  do {
    puVar5 = (undefined2 *)(iVar2 + uVar4 * 2);
    *puVar5 = *(undefined2 *)(iVar2 + (*(ushort *)(iVar1 + 0x2a) + uVar4) * 2 + -0x5dc);
    iVar6 = *(ushort *)(iVar1 + 0x2a) + uVar4;
    uVar4 = uVar4 + 2 & 0xfffeffff;
    puVar5[1] = *(undefined2 *)(iVar2 + iVar6 * 2 + -0x5da);
  } while (uVar4 < uVar3);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void scope_process_ch2_25ns_data(void)

{
  ushort uVar1;
  longlong lVar2;
  longlong lVar3;
  undefined2 uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  ushort *puVar8;
  int iVar9;
  uint16 *puVar10;
  ushort *puVar11;
  undefined2 *puVar12;
  ushort uVar13;
  short *psVar14;
  int iVar15;
  ushort uVar16;
  short sVar17;
  uint uVar18;
  uint uVar19;
  undefined4 uVar20;
  uint16 *puVar21;
  int iVar22;
  uint16 *puVar23;
  undefined2 *puVar24;
  undefined8 uVar25;
  undefined8 uVar26;
  undefined8 uVar27;
  undefined8 uVar28;
  undefined8 uVar29;
  undefined8 uVar30;
  
  uVar19 = DAT_8000925c;
  iVar22 = DAT_80009258;
  uVar7 = 0;
  puVar8 = (ushort *)((int)DAT_8000924c + 200);
  uVar20 = 0;
  iVar9 = 0xaf0;
  uVar18 = DAT_80009250;
  do {
    uVar5 = (uint)*puVar8;
    puVar8 = puVar8 + 1;
    if (uVar7 < uVar5) {
      uVar7 = uVar5;
    }
    if (uVar5 < uVar18) {
      uVar18 = uVar5;
    }
    iVar9 = iVar9 + -1;
  } while (iVar9 != 0);
  puVar21 = (uint16 *)(uVar7 + uVar18 >> 1);
  uVar5 = 0;
  puVar8 = (ushort *)((int)DAT_8000924c + 0x14);
  iVar9 = DAT_80009254;
  puVar23 = DAT_8000924c;
  do {
    puVar10 = (uint16 *)(uint)*puVar8;
    if (puVar10 < puVar21) {
      puVar23 = (uint16 *)(uint)puVar8[1];
    }
    if ((puVar10 < puVar21 && puVar21 < puVar23) ||
       ((puVar10 < puVar21 && (puVar21 <= (uint16 *)(uint)puVar8[1])))) {
      uVar5 = uVar5 + 1 & 0xfffeffff;
    }
    iVar9 = iVar9 + -1;
    puVar8 = puVar8 + 1;
  } while (iVar9 != 0);
  if (0x140 < uVar5) {
    uVar6 = get_timer_ticks();
    puVar21 = DAT_8000924c;
    if (*(char *)(iVar22 + 10) == '\x1c') {
      uVar20 = 0x14;
    }
    if (*(char *)(iVar22 + 10) == '\x1d') {
      uVar20 = 0x32;
    }
    iVar9 = 0;
    uVar25 = FUN_800397d0(uVar6 + (uint)((ulonglong)uVar6 * (ulonglong)DAT_80009260 >> 0x21) * -3,
                          *(char *)(iVar22 + 10),DAT_80009260,
                          (int)((ulonglong)uVar6 * (ulonglong)DAT_80009260));
    uVar26 = FUN_800397d0(uVar18);
    uVar27 = FUN_800397d0((uVar7 - uVar18 & 0xffff) >> 1);
    uVar28 = FUN_800397d0(uVar5);
    uVar29 = FUN_800397d0(uVar20);
    uVar29 = FUN_800393ec(DAT_80009264,DAT_80009268,(int)uVar29,(int)((ulonglong)uVar29 >> 0x20));
    do {
      uVar30 = FUN_8003979c(iVar9);
      uVar30 = FUN_80039890((int)uVar30,(int)((ulonglong)uVar30 >> 0x20),(int)uVar29,
                            (int)((ulonglong)uVar29 >> 0x20));
      FUN_80039890((int)uVar30,(int)((ulonglong)uVar30 >> 0x20),(int)uVar28,
                   (int)((ulonglong)uVar28 >> 0x20));
      uVar30 = FUN_80036000();
      uVar30 = FUN_8003926c((int)uVar30,(int)((ulonglong)uVar30 >> 0x20),0,DAT_8000926c);
      uVar30 = FUN_80039890((int)uVar30,(int)((ulonglong)uVar30 >> 0x20),(int)uVar27,
                            (int)((ulonglong)uVar27 >> 0x20));
      uVar30 = FUN_8003926c((int)uVar30,(int)((ulonglong)uVar30 >> 0x20),(int)uVar26,
                            (int)((ulonglong)uVar26 >> 0x20));
      FUN_8003926c((int)uVar30,(int)((ulonglong)uVar30 >> 0x20),(int)uVar25,
                   (int)((ulonglong)uVar25 >> 0x20));
      uVar4 = FUN_8003972c();
      *(undefined2 *)puVar21 = uVar4;
      uVar19 = uVar19 - 1 & 0xffff;
      iVar9 = iVar9 + 1;
      puVar21 = (uint16 *)((int)puVar21 + 2);
    } while (uVar19 != 0);
    return;
  }
  if (*(char *)(DAT_80009258 + 10) == '\x1c') {
    scope_pre_process_50ns_data(DAT_8000924c,0,DAT_8000925c);
  }
  puVar21 = DAT_8000924c;
  if (*(char *)(iVar22 + 10) == '\x1d') {
    puVar8 = (ushort *)(uVar19 * DAT_80013e70 + 0xa3d7 >> 0x14);
    if (puVar8 != (ushort *)0x0) {
      puVar11 = DAT_80013e74;
      puVar23 = (uint16 *)((int)DAT_8000924c + -2);
      if (((uint)puVar8 & 1) != 0) {
        puVar11 = DAT_80013e74 + 0x19;
        *puVar11 = *(ushort *)DAT_8000924c;
        puVar23 = puVar21;
      }
      uVar7 = (uint)((int)puVar8 << 0xf) >> 0x10;
      while (uVar7 != 0) {
        puVar11[0x19] = *(ushort *)((int)puVar23 + 2);
        puVar23 = (uint16 *)((int)puVar23 + 4);
        uVar7 = uVar7 - 1 & 0xffff;
        puVar11 = puVar11 + 0x32;
        *puVar11 = *(ushort *)puVar23;
      }
    }
    iVar22 = DAT_80013e78;
    uVar7 = 0;
    if (0 < (int)((int)puVar8 - 1U)) {
      do {
        puVar11 = (ushort *)(DAT_80013e7c + uVar7 * 0x32);
        uVar1 = *puVar11;
        uVar13 = puVar11[0x19];
        sVar17 = 0xc;
        if (uVar1 < uVar13) {
          uVar16 = uVar13 - uVar1;
        }
        else {
          uVar16 = uVar1 - uVar13;
        }
        iVar9 = 0;
        uVar18 = (uint)uVar16;
        if (uVar1 < uVar13) {
          do {
            lVar2 = (longlong)iVar22 * (longlong)(int)(uVar18 * (iVar9 + 2));
            lVar3 = (longlong)iVar22 * (longlong)(int)(uVar18 * (iVar9 + 1));
            sVar17 = sVar17 + -1;
            puVar11[1] = ((short)(int)(lVar3 >> 0x23) - (short)(lVar3 >> 0x3f)) + uVar1;
            iVar9 = iVar9 + 2;
            puVar11 = puVar11 + 2;
            *puVar11 = ((short)(int)(lVar2 >> 0x23) - (short)(lVar2 >> 0x3f)) + uVar1;
          } while (sVar17 != 0);
        }
        else {
          do {
            lVar2 = (longlong)iVar22 * (longlong)(int)(uVar18 * (iVar9 + 2));
            lVar3 = (longlong)iVar22 * (longlong)(int)(uVar18 * (iVar9 + 1));
            sVar17 = sVar17 + -1;
            puVar11[1] = uVar1 - ((short)(int)(lVar3 >> 0x23) - (short)(lVar3 >> 0x3f));
            iVar9 = iVar9 + 2;
            puVar11 = puVar11 + 2;
            *puVar11 = uVar1 - ((short)(int)(lVar2 >> 0x23) - (short)(lVar2 >> 0x3f));
          } while (sVar17 != 0);
        }
        uVar7 = uVar7 + 1 & 0xfffeffff;
      } while ((int)uVar7 < (int)((int)puVar8 - 1U));
    }
    uVar7 = (int)puVar8 - 1;
    if (0 < (int)uVar7) {
      puVar12 = DAT_80013e84;
      puVar24 = DAT_80013e80;
      if ((uVar7 & 1) != 0) {
        puVar24 = DAT_80013e80 + 0x19;
        puVar12 = DAT_80013e84 + 0x19;
        *puVar12 = *puVar24;
      }
      uVar7 = uVar7 * 0x8000 >> 0x10;
      while (uVar7 != 0) {
        puVar12[0x19] = puVar24[0x19];
        puVar24 = puVar24 + 0x32;
        uVar7 = uVar7 - 1 & 0xffff;
        puVar12 = puVar12 + 0x32;
        *puVar12 = *puVar24;
      }
    }
    uVar7 = 0;
    puVar11 = puVar8 + -1;
    if (0 < (int)puVar11) {
      do {
        iVar9 = DAT_80013e88 + uVar7 * 0x32;
        uVar1 = *(ushort *)(iVar9 + 0x18);
        uVar13 = *(ushort *)(iVar9 + 0x4a);
        if (uVar1 < uVar13) {
          psVar14 = (short *)(iVar9 + 0x18);
          iVar9 = 0;
          sVar17 = 0xc;
          do {
            lVar2 = (longlong)iVar22 * (longlong)(int)((uint)(ushort)(uVar13 - uVar1) * (iVar9 + 1))
            ;
            lVar3 = (longlong)iVar22 * (longlong)(int)((uint)(ushort)(uVar13 - uVar1) * (iVar9 + 2))
            ;
            sVar17 = sVar17 + -1;
            psVar14[1] = ((short)(int)(lVar2 >> 0x23) - (short)(lVar2 >> 0x3f)) + uVar1;
            iVar9 = iVar9 + 2;
            psVar14 = psVar14 + 2;
            *psVar14 = ((short)(int)(lVar3 >> 0x23) - (short)(lVar3 >> 0x3f)) + uVar1;
          } while (sVar17 != 0);
        }
        else {
          psVar14 = (short *)(iVar9 + 0x18);
          iVar9 = 0;
          sVar17 = 0xc;
          do {
            lVar2 = (longlong)iVar22 * (longlong)(int)((uint)(ushort)(uVar1 - uVar13) * (iVar9 + 1))
            ;
            lVar3 = (longlong)iVar22 * (longlong)(int)((uint)(ushort)(uVar1 - uVar13) * (iVar9 + 2))
            ;
            sVar17 = sVar17 + -1;
            psVar14[1] = uVar1 - ((short)(int)(lVar2 >> 0x23) - (short)(lVar2 >> 0x3f));
            iVar9 = iVar9 + 2;
            psVar14 = psVar14 + 2;
            *psVar14 = uVar1 - ((short)(int)(lVar3 >> 0x23) - (short)(lVar3 >> 0x3f));
          } while (sVar17 != 0);
        }
        puVar8 = (ushort *)(uVar7 + 1);
        uVar7 = (uint)puVar8 & 0xfffeffff;
      } while ((int)uVar7 < (int)puVar11);
    }
    uVar7 = uVar19 >> 1;
    if (uVar19 != 0) {
      uVar18 = uVar7;
      puVar11 = DAT_80013e90;
      puVar8 = DAT_80013e8c;
      puVar23 = (uint16 *)((int)puVar21 + -2);
      if ((uVar19 & 1) != 0) {
        puVar8 = DAT_80013e8c + 1;
        puVar11 = DAT_80013e90 + 1;
        *(short *)puVar21 = (short)((uint)*puVar8 + (uint)*puVar11 >> 1);
        puVar23 = puVar21;
      }
      while (uVar18 != 0) {
        *(short *)((int)puVar23 + 2) = (short)((uint)puVar8[1] + (uint)puVar11[1] >> 1);
        *(short *)(uint16 *)((int)puVar23 + 4) = (short)((uint)puVar11[2] + (uint)puVar8[2] >> 1);
        uVar18 = uVar18 - 1;
        puVar11 = puVar11 + 2;
        puVar8 = puVar8 + 2;
        puVar23 = (uint16 *)((int)puVar23 + 4);
      }
    }
    uVar5 = uVar19 * DAT_80013e94;
    uVar18 = uVar5 >> 0x13;
    uVar6 = uVar18 - 1;
    if (0 < (int)uVar6) {
      puVar11 = (ushort *)((int)puVar21 + -0xc);
      puVar8 = DAT_80013e98;
      if ((uVar6 & 1) != 0) {
        puVar11 = (ushort *)((int)puVar21 + 0xc);
        puVar8 = DAT_80013e98 + 0xc;
        *puVar8 = *puVar11;
      }
      uVar6 = uVar6 * 0x8000 >> 0x10;
      while (uVar6 != 0) {
        puVar8[0xc] = puVar11[0xc];
        puVar11 = puVar11 + 0x18;
        uVar6 = uVar6 - 1 & 0xffff;
        puVar8 = puVar8 + 0x18;
        *puVar8 = *puVar11;
      }
    }
    iVar22 = uVar18 - 2;
    if (0 < iVar22) {
      puVar8 = DAT_80013e9c;
    }
    uVar18 = 0;
    if (0 < iVar22) {
      do {
        iVar9 = DAT_80013e88 + uVar18 * 0x18;
        uVar1 = *(ushort *)(iVar9 + 0xc);
        uVar13 = *(ushort *)(iVar9 + 0x24);
        if (uVar1 < uVar13) {
          uVar6 = (uint)(ushort)(uVar13 - uVar1);
          iVar15 = 1;
          sVar17 = 5;
          psVar14 = (short *)(iVar9 + 0xe);
          *psVar14 = ((short)(int)((longlong)(int)puVar8 * (longlong)(int)uVar6 >> 0x21) -
                     (short)((longlong)(int)puVar8 * (longlong)(int)uVar6 >> 0x3f)) + uVar1;
          do {
            lVar2 = (longlong)(int)puVar8 * (longlong)(int)(uVar6 * (iVar15 + 1));
            lVar3 = (longlong)(int)puVar8 * (longlong)(int)(uVar6 * (iVar15 + 2));
            sVar17 = sVar17 + -1;
            psVar14[1] = ((short)(int)(lVar2 >> 0x21) - (short)(lVar2 >> 0x3f)) + uVar1;
            iVar15 = iVar15 + 2;
            psVar14 = psVar14 + 2;
            *psVar14 = ((short)(int)(lVar3 >> 0x21) - (short)(lVar3 >> 0x3f)) + uVar1;
          } while (sVar17 != 0);
        }
        else {
          uVar6 = (uint)(ushort)(uVar1 - uVar13);
          iVar15 = 1;
          sVar17 = 5;
          psVar14 = (short *)(iVar9 + 0xe);
          *psVar14 = uVar1 - ((short)(int)((longlong)(int)puVar8 * (longlong)(int)uVar6 >> 0x21) -
                             (short)((longlong)(int)puVar8 * (longlong)(int)uVar6 >> 0x3f));
          do {
            lVar2 = (longlong)(int)puVar8 * (longlong)(int)(uVar6 * (iVar15 + 1));
            lVar3 = (longlong)(int)puVar8 * (longlong)(int)(uVar6 * (iVar15 + 2));
            sVar17 = sVar17 + -1;
            psVar14[1] = uVar1 - ((short)(int)(lVar2 >> 0x21) - (short)(lVar2 >> 0x3f));
            iVar15 = iVar15 + 2;
            psVar14 = psVar14 + 2;
            *psVar14 = uVar1 - ((short)(int)(lVar3 >> 0x21) - (short)(lVar3 >> 0x3f));
          } while (sVar17 != 0);
        }
        uVar18 = uVar18 + 1 & 0xfffeffff;
      } while ((int)uVar18 < iVar22);
    }
    if (uVar19 != 0) {
      uVar18 = uVar7;
      puVar23 = (uint16 *)((int)puVar21 + -2);
      puVar8 = DAT_80013e90;
      if ((uVar19 & 1) != 0) {
        puVar8 = DAT_80013e90 + 1;
        *(short *)puVar21 = (short)((uint)*(ushort *)puVar21 + (uint)*puVar8 >> 1);
        puVar23 = puVar21;
      }
      while (uVar18 != 0) {
        puVar10 = (uint16 *)((int)puVar23 + 4);
        *(ushort *)((int)puVar23 + 2) =
             (ushort)((uint)*(ushort *)((int)puVar23 + 2) + (uint)puVar8[1] >> 1);
        *(ushort *)puVar10 = (ushort)((uint)puVar8[2] + (uint)*(ushort *)puVar10 >> 1);
        uVar18 = uVar18 - 1;
        puVar23 = puVar10;
        puVar8 = puVar8 + 2;
      }
    }
    uVar5 = uVar5 >> 0x12;
    uVar18 = uVar5 - 1;
    if (0 < (int)uVar18) {
      puVar11 = (ushort *)((int)puVar21 + -6);
      puVar8 = DAT_80013ea0;
      if ((uVar18 & 1) != 0) {
        puVar11 = (ushort *)((int)puVar21 + 6);
        puVar8 = DAT_80013ea0 + 6;
        *puVar8 = *puVar11;
      }
      uVar18 = uVar18 * 0x8000 >> 0x10;
      while (uVar18 != 0) {
        puVar8[6] = puVar11[6];
        puVar11 = puVar11 + 0xc;
        uVar18 = uVar18 - 1 & 0xffff;
        puVar8 = puVar8 + 0xc;
        *puVar8 = *puVar11;
      }
    }
    uVar18 = DAT_80013ea8;
    uVar5 = uVar5 - 2;
    if (0 < (int)uVar5) {
      uVar5 = uVar5 & 0xffff;
      puVar8 = DAT_80013ea4;
      do {
        uVar1 = *puVar8;
        uVar13 = puVar8[6];
        if (uVar1 < uVar13) {
          uVar13 = uVar13 - uVar1;
          uVar6 = (uint)uVar13;
          puVar8[1] = uVar1 + (ushort)(uVar6 * DAT_80013e94 >> 0x12);
          puVar8[2] = uVar1 + (short)(uint)((ulonglong)uVar13 * 2 * (ulonglong)uVar18 >> 0x22);
          puVar8[3] = uVar1 + (short)(uint)((ulonglong)(uVar6 * 3) * (ulonglong)uVar18 >> 0x22);
          puVar8[4] = uVar1 + (short)(uint)((ulonglong)uVar13 * 4 * (ulonglong)uVar18 >> 0x22);
          puVar8[5] = uVar1 + (short)(uint)((ulonglong)(uVar6 * 5) * (ulonglong)uVar18 >> 0x22);
        }
        else {
          uVar13 = uVar1 - uVar13;
          uVar6 = (uint)uVar13;
          puVar8[1] = uVar1 - (ushort)(uVar6 * DAT_80013e94 >> 0x12);
          puVar8[2] = uVar1 - (short)(uint)((ulonglong)uVar13 * 2 * (ulonglong)uVar18 >> 0x22);
          puVar8[3] = uVar1 - (short)(uint)((ulonglong)(uVar6 * 3) * (ulonglong)uVar18 >> 0x22);
          puVar8[4] = uVar1 - (short)(uint)((ulonglong)uVar13 * 4 * (ulonglong)uVar18 >> 0x22);
          puVar8[5] = uVar1 - (short)(uint)((ulonglong)(uVar6 * 5) * (ulonglong)uVar18 >> 0x22);
        }
        uVar5 = uVar5 - 1 & 0xffff;
        puVar8 = puVar8 + 6;
      } while (uVar5 != 0);
    }
    if (uVar19 != 0) {
      puVar23 = (uint16 *)((int)puVar21 + -2);
      puVar8 = DAT_80013e90;
      if ((uVar19 & 1) != 0) {
        puVar8 = DAT_80013e90 + 1;
        *(short *)puVar21 = (short)((uint)*(ushort *)puVar21 + (uint)*puVar8 >> 1);
        puVar23 = puVar21;
      }
      if (uVar7 != 0) {
        do {
          puVar11 = (ushort *)((int)puVar23 + 2);
          uVar7 = uVar7 - 1;
          puVar23 = (uint16 *)((int)puVar23 + 4);
          *puVar11 = (ushort)((uint)*puVar11 + (uint)puVar8[1] >> 1);
          puVar8 = puVar8 + 2;
          *(ushort *)puVar23 = (ushort)((uint)*(ushort *)puVar23 + (uint)*puVar8 >> 1);
        } while (uVar7 != 0);
        return;
      }
      return;
    }
    return;
  }
  return;
}



void FUN_80009270(void)

{
  ulonglong uVar1;
  short sVar2;
  uint uVar3;
  ushort *puVar4;
  ushort *puVar5;
  uint uVar6;
  int iVar7;
  
  uVar3 = DAT_80009320;
  if (DAT_80009318 < *(ushort *)(DAT_80009314 + 0x12)) {
    uVar6 = 0;
  }
  else {
    uVar6 = ((DAT_80009318 - *(ushort *)(DAT_80009314 + 0x12)) +
            (uint)*(ushort *)(PTR_DAT_8000931c + 0x14)) - 400 & 0xffff;
  }
  uVar1 = (ulonglong)DAT_80009320;
  puVar4 = DAT_80009324;
  iVar7 = DAT_80009328;
  do {
    puVar5 = puVar4 + 2;
    iVar7 = iVar7 + -1;
    sVar2 = (short)(uint)((uVar6 * 10) * uVar1 >> 0x23);
    puVar4[1] = ((short)(uint)((ulonglong)((uint)puVar4[1] * 10) * (ulonglong)uVar3 >> 0x23) +
                (short)uVar6) - sVar2;
    *puVar5 = ((short)uVar6 +
              (short)(uint)((ulonglong)((uint)*puVar5 * 10) * (ulonglong)uVar3 >> 0x23)) - sVar2;
    puVar4 = puVar5;
  } while (iVar7 != 0);
  return;
}



void FUN_8000932c(void)

{
  ushort *puVar1;
  ushort *puVar2;
  uint uVar3;
  int iVar4;
  
  iVar4 = DAT_800093a8;
  if (DAT_8000939c < *(ushort *)(DAT_80009398 + 0x12)) {
    uVar3 = 0;
    puVar1 = DAT_800093a4;
  }
  else {
    uVar3 = ((DAT_8000939c - *(ushort *)(DAT_80009398 + 0x12)) +
            (uint)*(ushort *)(PTR_DAT_800093a0 + 0x14)) - 400 & 0xffff;
    puVar1 = DAT_800093a4;
  }
  do {
    puVar2 = puVar1 + 2;
    iVar4 = iVar4 + -1;
    puVar1[1] = (puVar1[1] >> 1) + (short)(uVar3 >> 1);
    *puVar2 = (*puVar2 >> 1) + (short)(uVar3 >> 1);
    puVar1 = puVar2;
  } while (iVar4 != 0);
  return;
}



void FUN_800093ac(void)

{
  int iVar1;
  ushort *puVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  ushort *puVar6;
  ushort uVar7;
  uint uVar8;
  uint in_r12;
  
  puVar2 = DAT_800094ec;
  iVar1 = DAT_800094e8;
  uVar7 = *(ushort *)(DAT_800094e4 + 0xf6);
  uVar3 = (uint)uVar7;
  if (*(char *)(DAT_800094e8 + 0xf) == '\x06') {
    uVar4 = 0x23;
  }
  else {
    uVar4 = 0x14;
  }
  uVar5 = DAT_800094f0;
  if (*(byte *)(DAT_800094e8 + 10) < 0x19) {
    uVar5 = DAT_800094f4;
  }
  if (uVar4 <= *(ushort *)(DAT_800094e4 + 0xf2)) {
    return;
  }
  if ((uVar3 + uVar4 < (uint)*(ushort *)(DAT_800094e8 + 0x12)) ||
     (*(ushort *)(DAT_800094e8 + 0x12) + uVar4 < uVar3)) {
    if (uVar4 >> 1 < (uint)*(ushort *)(DAT_800094e4 + 0xf2)) {
      return;
    }
    if (uVar5 == 0) {
      return;
    }
    puVar6 = DAT_800094ec + -1;
    if ((uVar5 & 1) != 0) {
      *DAT_800094ec = uVar7;
      puVar6 = puVar2;
    }
    uVar5 = uVar5 >> 1;
    if (uVar5 == 0) {
      return;
    }
    do {
      puVar6[1] = uVar7;
      uVar5 = uVar5 - 1;
      puVar6 = puVar6 + 2;
      *puVar6 = uVar7;
    } while (uVar5 != 0);
    return;
  }
  uVar4 = 0;
  if (uVar5 == 0) {
    return;
  }
  do {
    puVar6 = puVar2 + uVar4;
    uVar8 = (uint)*puVar6;
    if (uVar3 <= uVar8 && uVar8 != uVar3) {
      if (in_r12 < 0x15) {
LAB_80009484:
        uVar7 = *(ushort *)(iVar1 + 0x12);
      }
      else {
        in_r12 = 0;
        uVar7 = *(short *)(iVar1 + 0x12) + 1;
      }
    }
    else {
      if (uVar3 <= uVar8) {
        uVar7 = *(ushort *)(iVar1 + 0x12);
        in_r12 = in_r12 + 1 & 0xfffeffff;
      }
      else {
        if ((in_r12 < 0x15) || (in_r12 = 0, *(short *)(iVar1 + 0x12) == 0)) goto LAB_80009484;
        uVar7 = *(short *)(iVar1 + 0x12) - 1;
      }
    }
    *puVar6 = uVar7;
    uVar4 = uVar4 + 1 & 0xfffeffff;
    if (uVar5 <= uVar4) {
      return;
    }
  } while( true );
}



void display_channel2_long_timebase_trace(void)

{
  undefined2 *puVar1;
  undefined *puVar2;
  int iVar3;
  uint uVar4;
  uint ystart;
  uint uVar5;
  uint yend;
  bool bVar6;
  bool bVar7;
  
  set_display_fg_color(DAT_800095dc);
  puVar2 = PTR_DAT_800095e0;
  uVar4 = (uint)*(ushort *)PTR_DAT_800095e0;
  if (uVar4 == 0) {
    puVar1 = (undefined2 *)(PTR_DAT_800095e0 + 0x18);
    *(undefined2 *)(PTR_DAT_800095e0 + 4) = *puVar1;
    *(undefined2 *)(puVar2 + 8) = *puVar1;
  }
  yend = (uint)*(ushort *)(puVar2 + 0x18);
  ystart = (uint)*(ushort *)(puVar2 + 4);
  uVar5 = yend + 0xf;
  bVar7 = ystart <= uVar5;
  bVar6 = uVar5 == ystart;
  if (bVar7 && !bVar6) {
    uVar5 = ystart + 0xf;
  }
  if (bVar7 && !bVar6) {
    bVar7 = yend <= uVar5;
    bVar6 = uVar5 == yend;
  }
  if (!bVar7 || bVar6) {
    uVar5 = ystart + 0x14;
    bVar7 = uVar5 <= yend;
    bVar6 = yend == uVar5;
    if (!bVar7 || bVar6) {
      uVar5 = yend + 0x14;
    }
    if (!bVar7 || bVar6) {
      bVar7 = uVar5 <= ystart;
      bVar6 = ystart == uVar5;
    }
    if (bVar7 && !bVar6) {
      display_draw_line(uVar4 + 3,ystart,uVar4 + 3,yend);
      display_draw_line(*(ushort *)puVar2 + 3,*(ushort *)(puVar2 + 4) + 1,*(ushort *)puVar2 + 3,
                        *(ushort *)(puVar2 + 0x18) + 1);
      goto LAB_80009574;
    }
  }
  else {
    yend = yend + ystart >> 1;
    *(short *)(puVar2 + 0x18) = (short)yend;
  }
  display_draw_line(uVar4 + 3,ystart,uVar4 + 4,yend);
  display_draw_line(*(ushort *)puVar2 + 3,*(ushort *)(puVar2 + 4) + 1,*(ushort *)puVar2 + 4,
                    *(ushort *)(puVar2 + 0x18) + 1);
LAB_80009574:
  iVar3 = DAT_800095e4;
  *(undefined2 *)(puVar2 + 8) = *(undefined2 *)(puVar2 + 4);
  *(undefined2 *)(puVar2 + 4) = *(undefined2 *)(puVar2 + 0x18);
  *(undefined2 *)(iVar3 + (uint)*(ushort *)puVar2 * 2) = *(undefined2 *)(puVar2 + 0x18);
  return;
}



void set_fpga_channel2_voltperdiv(void)

{
  uint *ptr;
  uint uVar1;
  
  fpga_write_cmd('6');
  ptr = PE_CFG0;
  if (*(char *)(DAT_8000961c + 0xf) == '\x06') {
    uVar1 = 5;
  }
  else {
    uVar1 = (uint)*(byte *)(DAT_8000961c + 0xf);
  }
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = uVar1 | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void set_fpga_channel2_coupling(void)

{
  char cVar1;
  uint *ptr;
  
  fpga_write_cmd('7');
  ptr = PE_CFG0;
  cVar1 = *(char *)(DAT_80009654 + 0xd);
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = (uint)(cVar1 == '\0') | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void set_fpga_channel2_enable(void)

{
  uint *ptr;
  bool bVar1;
  
  bVar1 = *(char *)(DAT_80009690 + 0xc) == '\0';
  if (bVar1) {
    fpga_write_cmd('\x03');
  }
  else {
    fpga_write_cmd('\x03');
  }
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = (uint)!bVar1 | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void FUN_80009694(uint param_1)

{
  uint *ptr;
  
  fpga_write_cmd('5');
  fpga_write_data((uchar)(param_1 >> 8));
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = param_1 & 0xff | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void set_fpga_channel2_offset(void)

{
  uint *ptr;
  int iVar1;
  uint in_r1;
  uint unaff_r4;
  
  switch(*(undefined *)(DAT_800097d0 + 0xf)) {
  case 0:
    unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x10);
    break;
  case 1:
    unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x12);
    break;
  case 2:
    unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x14);
    break;
  case 3:
    unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x16);
    break;
  case 4:
    unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x18);
    break;
  case 5:
  case 6:
    unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x1a);
  }
  switch(*(undefined *)(DAT_800097d0 + 0xf)) {
  case 0:
    in_r1 = (uint)*DAT_800097d8;
    break;
  case 1:
    in_r1 = (uint)DAT_800097d8[1];
    break;
  case 2:
    in_r1 = (uint)DAT_800097d8[2];
    break;
  case 3:
    in_r1 = (uint)DAT_800097d8[3];
    break;
  case 4:
    in_r1 = (uint)DAT_800097d8[4];
    break;
  case 5:
    in_r1 = (uint)DAT_800097d8[5];
    break;
  case 6:
    in_r1 = (uint)DAT_800097d8[6];
  }
  iVar1 = (int)((ulonglong)
                ((longlong)DAT_800097dc *
                (longlong)
                (int)((uint)*(ushort *)(DAT_800097d0 + 0x12) * (uint)*(ushort *)(DAT_800097d4 + 0xe)
                     )) >> 0x20);
  iVar1 = divide_2((uint)*DAT_800097d8 * ((iVar1 >> 5) - (iVar1 >> 0x1f)),in_r1);
  fpga_write_cmd('5');
  fpga_write_data((uchar)(unaff_r4 - iVar1 >> 8));
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = unaff_r4 - iVar1 & 0xff | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



ulonglong FUN_800097e0(undefined4 *param_1)

{
  undefined4 *puVar1;
  int *piVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  undefined4 *puVar5;
  undefined *puVar6;
  int *piVar7;
  uint *puVar8;
  uint *puVar9;
  uint uVar10;
  undefined4 *puVar11;
  undefined4 *puVar12;
  uint uVar13;
  uint uVar14;
  undefined uVar15;
  undefined2 uVar16;
  int iVar17;
  undefined4 uVar18;
  int iVar19;
  undefined4 *puVar20;
  undefined uVar21;
  undefined4 uVar22;
  int iVar23;
  uint uVar24;
  undefined4 uVar25;
  bool bVar26;
  bool bVar27;
  int *piVar28;
  
  uVar13 = DAT_800098f4;
  iVar17 = DAT_800098f0;
  uVar14 = DAT_800098f4 | (int)DAT_800098f4 >> 6;
  *(undefined *)(DAT_800098f0 + 0x15) = 0;
  puVar5 = DAT_800098f8;
  uVar24 = uVar13 + 1000;
  uVar10 = uVar13;
  if (*(char *)(iVar17 + 0x22) == '\0') {
    do {
      puVar20 = (undefined4 *)((int)DAT_800098f8 + uVar14 * 2);
      bVar26 = (undefined4 *)(uint)*(ushort *)((int)puVar20 + -2) < param_1;
      if (bVar26) {
        puVar20 = (undefined4 *)(uint)*(ushort *)((int)puVar20 + 2);
      }
      if (bVar26 && param_1 < puVar20) goto LAB_8000985c;
      uVar14 = uVar14 + 1 & 0xfffeffff;
    } while (uVar14 < uVar24);
  }
  else {
    do {
      puVar20 = (undefined4 *)((int)DAT_800098f8 + uVar14 * 2);
      bVar27 = param_1 <= (undefined4 *)(uint)*(ushort *)((int)puVar20 + -2);
      bVar26 = (undefined4 *)(uint)*(ushort *)((int)puVar20 + -2) == param_1;
      if (bVar27 && !bVar26) {
        puVar20 = (undefined4 *)(uint)*(ushort *)((int)puVar20 + 2);
      }
      if (bVar27 && !bVar26) {
        bVar27 = puVar20 <= param_1;
        bVar26 = param_1 == puVar20;
      }
      if (bVar27 && !bVar26) goto LAB_8000985c;
      uVar14 = uVar14 + 1 & 0xfffeffff;
    } while (uVar14 < uVar24);
  }
LAB_80009878:
  *(short *)(iVar17 + 0x2c) = (short)uVar10;
  puVar11 = DAT_80009900;
  puVar1 = DAT_800098f8;
  puVar4 = (undefined4 *)(uVar13 - uVar10);
  bVar26 = puVar4 == (undefined4 *)0x0;
  puVar12 = puVar4;
  if (0 < (int)puVar4) {
    puVar12 = (undefined4 *)((int)DAT_800098fc - (int)puVar4);
    bVar26 = DAT_800098fc == puVar4;
    puVar20 = DAT_800098fc;
  }
  bVar27 = 0 < (int)puVar4 && SBORROW4((int)puVar20,(int)puVar4);
  if (!bVar26 && (int)puVar12 < 0 == bVar27) {
    puVar4 = (undefined4 *)0x0;
  }
  if (!bVar26 && (int)puVar12 < 0 == bVar27) {
    do {
      uVar13 = (int)puVar4 + 2;
      puVar12 = (undefined4 *)((int)puVar5 + (uVar10 + (int)puVar4) * 2);
      puVar1 = (undefined4 *)((int)puVar5 + (int)puVar4 * 2);
      puVar4 = (undefined4 *)(uVar13 & 0xfffeffff);
      *(undefined2 *)puVar1 = *(undefined2 *)(puVar12 + -0x177);
      *(undefined2 *)((int)puVar1 + 2) = *(undefined2 *)((int)puVar12 + -0x5da);
    } while (puVar4 < puVar20);
    return CONCAT44(uVar10,uVar13) & 0xfffffffffffeffff;
  }
  puVar5 = (undefined4 *)((int)puVar5 + uVar10 * 2);
  puVar12 = puVar5 + -0x177;
  puVar20 = (undefined4 *)((int)DAT_800098f8 - (int)puVar12);
  bVar26 = puVar20 == (undefined4 *)0x0;
  if (puVar12 <= DAT_800098f8) {
    bVar26 = DAT_80009900 == puVar20;
  }
  if ((puVar12 > DAT_800098f8 || DAT_80009900 < puVar20) || bVar26) {
    puVar4 = DAT_80009900;
    if ((undefined4 *)0x3 < DAT_80009900) {
      uVar13 = (uint)DAT_800098f8 & 3;
      uVar24 = uVar13;
      if (uVar13 != 0) {
        uVar15 = *(undefined *)puVar12;
        puVar20 = (undefined4 *)((int)puVar5 + -0x5db);
        if (uVar13 < 3) {
          puVar20 = (undefined4 *)((int)puVar5 + -0x5da);
          uVar24 = (uint)*(byte *)(undefined4 *)((int)puVar5 + -0x5db);
        }
        puVar5 = (undefined4 *)((int)DAT_800098f8 + 1);
        *(undefined *)DAT_800098f8 = uVar15;
        puVar12 = puVar20;
        if (uVar13 < 2) {
          puVar12 = (undefined4 *)((int)puVar20 + 1);
          uVar15 = *(undefined *)puVar20;
        }
        puVar20 = puVar5;
        if (uVar13 < 3) {
          puVar20 = (undefined4 *)((int)puVar1 + 2);
          *(char *)puVar5 = (char)uVar24;
        }
        puVar11 = (undefined4 *)((int)puVar11 + (uVar13 - 4));
        puVar1 = puVar20;
        if (uVar13 < 2) {
          puVar1 = (undefined4 *)((int)puVar20 + 1);
          *(undefined *)puVar20 = uVar15;
        }
      }
      puVar20 = (undefined4 *)((uint)puVar12 & 3);
      if (puVar20 == (undefined4 *)0x0) {
        while (puVar5 = puVar11 + -8, (undefined4 *)0x1f < puVar11) {
          uVar18 = puVar12[1];
          uVar22 = puVar12[2];
          uVar25 = puVar12[3];
          *puVar1 = *puVar12;
          puVar1[1] = uVar18;
          puVar1[2] = uVar22;
          puVar1[3] = uVar25;
          puVar20 = (undefined4 *)puVar12[4];
          uVar18 = puVar12[5];
          uVar22 = puVar12[6];
          uVar25 = puVar12[7];
          puVar12 = puVar12 + 8;
          puVar1[4] = puVar20;
          puVar1[5] = uVar18;
          puVar1[6] = uVar22;
          puVar1[7] = uVar25;
          puVar1 = puVar1 + 8;
          puVar11 = puVar5;
        }
        if ((bool)((byte)((uint)puVar5 >> 4) & 1)) {
          puVar20 = (undefined4 *)*puVar12;
          uVar18 = puVar12[1];
          uVar22 = puVar12[2];
          uVar25 = puVar12[3];
          puVar12 = puVar12 + 4;
          *puVar1 = puVar20;
          puVar1[1] = uVar18;
          puVar1[2] = uVar22;
          puVar1[3] = uVar25;
          puVar1 = puVar1 + 4;
        }
        if ((int)puVar11 << 0x1c < 0) {
          puVar20 = (undefined4 *)*puVar12;
          uVar18 = puVar12[1];
          puVar12 = puVar12 + 2;
          *puVar1 = puVar20;
          puVar1[1] = uVar18;
          puVar1 = puVar1 + 2;
        }
        puVar3 = puVar1;
        puVar4 = puVar12;
        if ((bool)((byte)((uint)puVar5 >> 2) & 1)) {
          puVar4 = puVar12 + 1;
          puVar20 = (undefined4 *)*puVar12;
          puVar3 = puVar1 + 1;
          *puVar1 = puVar20;
        }
        uVar16 = SUB42(puVar20,0);
        if (((uint)puVar5 & 3) != 0) {
          bVar27 = (bool)((byte)((uint)puVar5 >> 1) & 1);
          uVar13 = (int)puVar11 << 0x1f;
          bVar26 = (int)uVar13 < 0;
          puVar5 = puVar4;
          if (bVar27) {
            puVar5 = (undefined4 *)((int)puVar4 + 2);
            uVar16 = *(undefined2 *)puVar4;
          }
          puVar20 = puVar5;
          if (bVar26) {
            puVar20 = (undefined4 *)((int)puVar5 + 1);
            uVar13 = (uint)*(byte *)puVar5;
          }
          puVar5 = puVar3;
          if (bVar27) {
            puVar5 = (undefined4 *)((int)puVar3 + 2);
            *(undefined2 *)puVar3 = uVar16;
          }
          puVar12 = puVar5;
          if (bVar26) {
            puVar12 = (undefined4 *)((int)puVar5 + 1);
            *(char *)puVar5 = (char)uVar13;
          }
          return CONCAT44(puVar20,puVar12);
        }
        return CONCAT44(puVar4,puVar3);
      }
      puVar4 = puVar11 + -1;
      if ((undefined4 *)0x3 < puVar11) {
        puVar8 = (uint *)((int)puVar12 - (int)puVar20);
        uVar24 = *puVar8;
        puVar5 = puVar1;
        if (puVar20 == (undefined4 *)0x2) {
          do {
            puVar9 = puVar8;
            uVar13 = uVar24 >> 0x10;
            puVar8 = puVar9 + 1;
            uVar24 = *puVar8;
            bVar26 = (undefined4 *)0x3 < puVar4;
            puVar4 = puVar4 + -1;
            puVar20 = (undefined4 *)(uVar13 | uVar24 << 0x10);
            puVar1 = puVar5 + 1;
            *puVar5 = puVar20;
            puVar5 = puVar1;
          } while (bVar26);
          puVar12 = (undefined4 *)((int)puVar9 + 6);
        }
        else {
          if (puVar20 < (undefined4 *)0x3) {
            do {
              puVar9 = puVar8;
              uVar13 = uVar24 >> 8;
              puVar8 = puVar9 + 1;
              uVar24 = *puVar8;
              bVar26 = (undefined4 *)0x3 < puVar4;
              puVar4 = puVar4 + -1;
              puVar20 = (undefined4 *)(uVar13 | uVar24 << 0x18);
              puVar1 = puVar5 + 1;
              *puVar5 = puVar20;
              puVar5 = puVar1;
            } while (bVar26);
            puVar12 = (undefined4 *)((int)puVar9 + 5);
          }
          else {
            do {
              puVar9 = puVar8;
              uVar13 = uVar24 >> 0x18;
              puVar8 = puVar9 + 1;
              uVar24 = *puVar8;
              bVar26 = (undefined4 *)0x3 < puVar4;
              puVar4 = puVar4 + -1;
              puVar20 = (undefined4 *)(uVar13 | uVar24 << 8);
              puVar1 = puVar5 + 1;
              *puVar5 = puVar20;
              puVar5 = puVar1;
            } while (bVar26);
            puVar12 = (undefined4 *)((int)puVar9 + 7);
          }
        }
      }
    }
    uVar21 = (undefined)uVar24;
    uVar15 = SUB41(puVar20,0);
    bVar27 = (bool)((byte)((uint)puVar4 >> 1) & 1);
    uVar13 = (int)puVar4 << 0x1f;
    bVar26 = (int)uVar13 < 0;
    if (bVar27) {
      puVar6 = (undefined *)((int)puVar12 + 1);
      uVar15 = *(undefined *)puVar12;
      puVar12 = (undefined4 *)((int)puVar12 + 2);
      uVar21 = *puVar6;
    }
    puVar5 = puVar12;
    if (bVar26) {
      puVar5 = (undefined4 *)((int)puVar12 + 1);
      uVar13 = (uint)*(byte *)puVar12;
    }
    if (bVar27) {
      puVar6 = (undefined *)((int)puVar1 + 1);
      *(undefined *)puVar1 = uVar15;
      puVar1 = (undefined4 *)((int)puVar1 + 2);
      *puVar6 = uVar21;
    }
    puVar20 = puVar1;
    if (bVar26) {
      puVar20 = (undefined4 *)((int)puVar1 + 1);
      *(char *)puVar1 = (char)uVar13;
    }
    return CONCAT44(puVar5,puVar20);
  }
  piVar2 = (int *)((int)DAT_800098f8 + (int)DAT_80009900);
  piVar7 = (int *)((int)puVar12 + (int)DAT_80009900);
  puVar5 = DAT_80009900;
  if ((undefined4 *)0x3 < DAT_80009900) {
    bVar26 = ((uint)piVar2 & 3) == 0;
    puVar12 = DAT_80009900;
    do {
      if (!bVar26) {
        piVar7 = (int *)((int)piVar7 + -1);
        puVar12 = (undefined4 *)((int)puVar12 + -1);
        piVar2 = (int *)((int)piVar2 + -1);
        *(undefined *)piVar2 = *(undefined *)piVar7;
      }
      bVar26 = ((uint)piVar2 & 3) == 0;
    } while (!bVar26);
    puVar20 = (undefined4 *)((uint)piVar7 & 3);
    if (puVar20 == (undefined4 *)0x0) {
      while (puVar5 = puVar12 + -4, (undefined4 *)0xf < puVar12) {
        piVar28 = piVar7 + -1;
        iVar23 = piVar7[-2];
        iVar19 = piVar7[-3];
        piVar7 = piVar7 + -4;
        iVar17 = *piVar7;
        piVar2[-1] = *piVar28;
        piVar2[-2] = iVar23;
        piVar2[-3] = iVar19;
        piVar2 = piVar2 + -4;
        *piVar2 = iVar17;
        puVar12 = puVar5;
      }
      iVar17 = (int)puVar12 << 0x1d;
      bVar26 = iVar17 < 0;
      if ((bool)((byte)((uint)puVar5 >> 3) & 1)) {
        piVar28 = piVar7 + -1;
        piVar7 = piVar7 + -2;
        iVar17 = *piVar7;
        piVar2[-1] = *piVar28;
        piVar2 = piVar2 + -2;
        *piVar2 = iVar17;
      }
      if (bVar26) {
        piVar7 = piVar7 + -1;
        iVar17 = *piVar7;
        piVar2 = piVar2 + -1;
        *piVar2 = iVar17;
      }
      uVar16 = (undefined2)iVar17;
      if (((uint)puVar5 & 3) != 0) {
        bVar27 = (bool)((byte)((uint)puVar5 >> 1) & 1);
        uVar13 = (int)puVar12 << 0x1f;
        bVar26 = (int)uVar13 < 0;
        if (bVar27) {
          piVar7 = (int *)((int)piVar7 + -2);
          uVar16 = *(undefined2 *)piVar7;
        }
        if (bVar26) {
          uVar13 = (uint)*(byte *)((int)piVar7 + -1);
        }
        if (bVar27) {
          piVar2 = (int *)((int)piVar2 + -2);
          *(undefined2 *)piVar2 = uVar16;
        }
        if (bVar26) {
          *(char *)((int)piVar2 + -1) = (char)uVar13;
        }
        return CONCAT44(piVar7,piVar2);
      }
      return CONCAT44(piVar7,piVar2);
    }
    puVar5 = puVar12 + -1;
    if ((undefined4 *)0x3 < puVar12) {
      puVar8 = (uint *)((int)piVar7 - (int)puVar20);
      uVar24 = *puVar8;
      if (puVar20 < (undefined4 *)0x2) {
        do {
          puVar9 = puVar8;
          uVar13 = uVar24 << 0x18;
          puVar8 = puVar9 + -1;
          uVar24 = *puVar8;
          bVar26 = (undefined4 *)0x3 < puVar5;
          puVar5 = puVar5 + -1;
          puVar20 = (undefined4 *)(uVar13 | uVar24 >> 8);
          piVar2 = piVar2 + -1;
          *piVar2 = (int)puVar20;
        } while (bVar26);
        piVar7 = (int *)((int)puVar9 + -3);
      }
      else {
        if (puVar20 < (undefined4 *)0x3) {
          do {
            puVar9 = puVar8;
            uVar13 = uVar24 << 0x10;
            puVar8 = puVar9 + -1;
            uVar24 = *puVar8;
            bVar26 = (undefined4 *)0x3 < puVar5;
            puVar5 = puVar5 + -1;
            puVar20 = (undefined4 *)(uVar13 | uVar24 >> 0x10);
            piVar2 = piVar2 + -1;
            *piVar2 = (int)puVar20;
          } while (bVar26);
          piVar7 = (int *)((int)puVar9 + -2);
        }
        else {
          do {
            puVar9 = puVar8;
            uVar13 = uVar24 << 8;
            puVar8 = puVar9 + -1;
            uVar24 = *puVar8;
            bVar26 = (undefined4 *)0x3 < puVar5;
            puVar5 = puVar5 + -1;
            puVar20 = (undefined4 *)(uVar13 | uVar24 >> 0x18);
            piVar2 = piVar2 + -1;
            *piVar2 = (int)puVar20;
          } while (bVar26);
          piVar7 = (int *)((int)puVar9 + -1);
        }
      }
    }
  }
  uVar21 = (undefined)uVar24;
  uVar15 = SUB41(puVar20,0);
  bVar27 = (bool)((byte)((uint)puVar5 >> 1) & 1);
  uVar13 = (int)puVar5 << 0x1f;
  bVar26 = (int)uVar13 < 0;
  if (bVar27) {
    uVar15 = *(undefined *)((int)piVar7 + -1);
    piVar7 = (int *)((int)piVar7 + -2);
    uVar21 = *(undefined *)piVar7;
  }
  if (bVar26) {
    uVar13 = (uint)*(byte *)((int)piVar7 + -1);
  }
  if (bVar27) {
    *(undefined *)((int)piVar2 + -1) = uVar15;
    piVar2 = (int *)((int)piVar2 + -2);
    *(undefined *)piVar2 = uVar21;
  }
  if (bVar26) {
    *(char *)((int)piVar2 + -1) = (char)uVar13;
  }
  return CONCAT44(piVar7,piVar2);
LAB_8000985c:
  *(undefined *)(iVar17 + 0x15) = 1;
  uVar10 = uVar14;
  goto LAB_80009878;
}



// WARNING: Could not reconcile some variable overlaps

void FUN_80009904(uint param_1,undefined4 param_2,uint param_3,uint param_4)

{
  ushort uVar1;
  int *piVar2;
  short sVar3;
  uint uVar4;
  int iVar5;
  uint local_18;
  uint local_14;
  
  piVar2 = DAT_800099e0;
  iVar5 = *DAT_800099e0;
  *(short *)(iVar5 + 0x22) = *(short *)(iVar5 + 0x22) + *(short *)(iVar5 + 0x4c);
  *(short *)(iVar5 + 0x24) = *(short *)(iVar5 + 0x24) + *(short *)(iVar5 + 0x50);
  local_18 = param_3;
  local_14 = param_4;
  uVar4 = get_char_width(param_1);
  uVar1 = *(ushort *)(*piVar2 + 0x22);
  local_18 = local_18 & 0xffff0000 | (uint)uVar1;
  sVar3 = FUN_80019f28(param_1);
  local_14 = local_14 & 0xffff0000 | (uint)(ushort)((sVar3 + (short)uVar4 + uVar1) - 1);
  sVar3 = FUN_8001923c();
  local_14 = local_14 & 0xffff | (uint)(ushort)((sVar3 + *(ushort *)(*piVar2 + 0x24)) - 1) << 0x10;
  local_18 = local_18 & 0xffff | (uint)*(ushort *)(*piVar2 + 0x24) << 0x10;
  iVar5 = FUN_8002ac10(&local_18);
  while (iVar5 != 0) {
    FUN_80016bb0(param_1);
    iVar5 = FUN_8002ab40();
  }
  if (param_1 != 10) {
    *(short *)(*piVar2 + 0x22) = (short)local_14 + 1;
  }
  iVar5 = *piVar2;
  *(short *)(iVar5 + 0x22) = *(short *)(iVar5 + 0x22) - *(short *)(iVar5 + 0x4c);
  *(short *)(iVar5 + 0x24) = *(short *)(iVar5 + 0x24) - *(short *)(iVar5 + 0x50);
  return;
}



void tp_i2c_clock_ack(void)

{
  bool bVar1;
  uint *ptr;
  undefined4 uVar2;
  uint uVar3;
  uint uStack24;
  
  ptr = DAT_80009a68;
  gpio_config_pin(DAT_80009a68,2,1);
  gpio_config_pin(ptr,3,1);
  set_gpio_pin_low(ptr,2);
  delay(10);
  set_gpio_pin_low(ptr,3);
  delay(10);
  set_gpio_pin_high(ptr,3);
  delay(10);
  set_gpio_pin_low(ptr,3);
  uVar2 = FUN_8003a370(10);
  FUN_8003a44c(uVar2,DAT_8000bcb4);
  uVar3 = FUN_8003a31c();
  uStack24 = 0;
  while (uStack24 < uVar3) {
    bVar1 = false;
    while (!bVar1) {
      bVar1 = true;
    }
    uStack24 = uStack24 + 1;
  }
  return;
}



void tp_send_i2c_start(void)

{
  bool bVar1;
  uint *ptr;
  undefined4 uVar2;
  uint uVar3;
  uint uStack24;
  
  ptr = DAT_80009af0;
  gpio_config_pin(DAT_80009af0,3,1);
  gpio_config_pin(ptr,2,1);
  set_gpio_pin_high(ptr,2);
  delay(10);
  set_gpio_pin_high(ptr,3);
  delay(10);
  set_gpio_pin_low(ptr,2);
  delay(10);
  set_gpio_pin_low(ptr,3);
  uVar2 = FUN_8003a370(10);
  FUN_8003a44c(uVar2,DAT_8000bcb4);
  uVar3 = FUN_8003a31c();
  uStack24 = 0;
  while (uStack24 < uVar3) {
    bVar1 = false;
    while (!bVar1) {
      bVar1 = true;
    }
    uStack24 = uStack24 + 1;
  }
  return;
}



void display_draw_grid(void)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  ushort uVar4;
  ushort *puVar5;
  int iVar6;
  int iVar7;
  ushort xend;
  uint uVar8;
  int iVar9;
  
  uVar8 = DAT_80009e48 * (uint)*(byte *)(DAT_80009e44 + 3) * 0xff + DAT_80009e48 >> 0x16;
  uVar8 = uVar8 << 0x10 | uVar8 << 8 | uVar8;
  uVar4 = convert_color(uVar8);
  set_display_fg_color(uVar8);
  iVar1 = DAT_80009e4c;
  xend = (ushort)DAT_80009e4c;
  display_draw_horz_line(0xf9,2,xend);
  display_draw_vert_line(0x16c,0x2e,0x1c1);
  iVar9 = 0x16c;
  do {
    display_draw_vert_line((ushort)iVar9,0xf7,0xfb);
    iVar9 = (iVar9 + 5) * 0x10000 >> 0x10;
  } while (iVar9 < iVar1);
  iVar9 = 0x16c;
  do {
    display_draw_vert_line((ushort)iVar9,0xf7,0xfb);
    iVar9 = (iVar9 + -5) * 0x10000 >> 0x10;
  } while (2 < iVar9);
  iVar9 = 0xf9;
  do {
    display_draw_horz_line((ushort)iVar9,0x16a,0x16e);
    iVar9 = (iVar9 + 5) * 0x10000 >> 0x10;
  } while (iVar9 < 0x1c1);
  iVar9 = 0xf9;
  do {
    display_draw_horz_line((ushort)iVar9,0x16a,0x16e);
    piVar2 = Global_Frame_Buffer_Pointer;
    iVar9 = (iVar9 + -5) * 0x10000 >> 0x10;
  } while (0x2e < iVar9);
  iVar9 = 0xf9;
  do {
    iVar6 = 0x24;
    puVar5 = (ushort *)(*piVar2 + iVar9 * 0x640 + 0x2d8);
    *puVar5 = uVar4;
    do {
      puVar5[5] = uVar4;
      iVar6 = iVar6 + -1;
      puVar5 = puVar5 + 10;
      *puVar5 = uVar4;
    } while (iVar6 != 0);
    iVar6 = 0x24;
    puVar5 = (ushort *)(*piVar2 + iVar9 * 0x640 + 0x2d8);
    *puVar5 = uVar4;
    do {
      puVar5[-5] = uVar4;
      iVar6 = iVar6 + -1;
      puVar5 = puVar5 + -10;
      *puVar5 = uVar4;
    } while (iVar6 != 0);
    iVar9 = (iVar9 + 0x32) * 0x10000 >> 0x10;
  } while (iVar9 < 0x1df);
  iVar9 = 0xf9;
  do {
    iVar6 = 0x24;
    puVar5 = (ushort *)(*piVar2 + iVar9 * 0x640 + 0x2d8);
    *puVar5 = uVar4;
    do {
      puVar5[5] = uVar4;
      iVar6 = iVar6 + -1;
      puVar5 = puVar5 + 10;
      *puVar5 = uVar4;
    } while (iVar6 != 0);
    iVar6 = 0x24;
    puVar5 = (ushort *)(*piVar2 + iVar9 * 0x640 + 0x2d8);
    *puVar5 = uVar4;
    do {
      puVar5[-5] = uVar4;
      iVar6 = iVar6 + -1;
      puVar5 = puVar5 + -10;
      *puVar5 = uVar4;
      iVar7 = DAT_80009e54;
    } while (iVar6 != 0);
    iVar9 = (iVar9 + -0x32) * 0x10000 >> 0x10;
  } while (0x32 < iVar9);
  iVar9 = 0;
  do {
    iVar6 = 4;
    puVar5 = (ushort *)(*piVar2 + iVar9 * 8000 + iVar7);
    do {
      puVar5[0x32] = uVar4;
      iVar6 = iVar6 + -1;
      puVar5 = puVar5 + 100;
      *puVar5 = uVar4;
    } while (iVar6 != 0);
    iVar9 = (iVar9 + 1) * 0x10000 >> 0x10;
  } while (iVar9 < 0x28);
  iVar9 = 0;
  do {
    iVar6 = 4;
    puVar5 = (ushort *)(*piVar2 + iVar9 * -8000 + iVar7);
    do {
      puVar5[0x32] = uVar4;
      iVar6 = iVar6 + -1;
      puVar5 = puVar5 + 100;
      *puVar5 = uVar4;
      iVar3 = DAT_80009e58;
    } while (iVar6 != 0);
    iVar9 = (iVar9 + 1) * 0x10000 >> 0x10;
  } while (iVar9 < 0x29);
  iVar9 = 0;
  do {
    iVar6 = 4;
    puVar5 = (ushort *)(*piVar2 + iVar9 * 8000 + iVar3);
    do {
      puVar5[-0x32] = uVar4;
      iVar6 = iVar6 + -1;
      puVar5 = puVar5 + -100;
      *puVar5 = uVar4;
    } while (iVar6 != 0);
    iVar9 = (iVar9 + 1) * 0x10000 >> 0x10;
  } while (iVar9 < 0x28);
  iVar9 = 0;
  do {
    iVar6 = 4;
    puVar5 = (ushort *)(*piVar2 + iVar9 * -8000 + iVar3);
    do {
      puVar5[-0x32] = uVar4;
      iVar6 = iVar6 + -1;
      puVar5 = puVar5 + -100;
      *puVar5 = uVar4;
    } while (iVar6 != 0);
    iVar9 = (iVar9 + 1) * 0x10000 >> 0x10;
  } while (iVar9 < 0x29);
  display_draw_horz_line(0x2e,2,xend);
  display_draw_horz_line(0x1c1,2,xend);
  display_draw_vert_line(2,0x2e,0x1c1);
  save_context();
  iVar7 = *(int *)(*DAT_80018f68 + 0x4c);
  iVar9 = *(int *)(*DAT_80018f68 + 0x50);
  iVar6 = FUN_8002ac10(&stack0xffffffe8);
  while (iVar6 != 0) {
    FUN_8001cc4c(iVar1 + iVar7,iVar9 + 0x2e,iVar9 + 0x1c1);
    iVar6 = FUN_8002ab40();
  }
  restore_context();
  return;
}



void save_screen_under_grid_brightness_slider(void)

{
  uint uVar1;
  uint uVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  undefined2 *puVar11;
  uint uVar12;
  int iVar13;
  undefined2 *puVar14;
  
  iVar6 = Screen_Frame_Buffer_2;
  iVar5 = Start_Of_Screen_Mem;
  uVar10 = *(ushort *)(PTR_DAT_80009e98 + 6) + 0x76 & 0xfffeffff;
  uVar9 = *(ushort *)(PTR_DAT_80009e98 + 4) + 0x247 & 0xfffeffff;
  uVar8 = *(ushort *)(PTR_DAT_80009e98 + 6) + 0x3b & 0xfffeffff;
  uVar7 = *(ushort *)(PTR_DAT_80009e98 + 4) + 0xf4 & 0xfffeffff;
  if (uVar8 < uVar10) {
    uVar12 = uVar9 - uVar7;
    uVar1 = uVar12 * 0x8000 >> 0x10;
    do {
      if (uVar7 < uVar9) {
        iVar13 = uVar7 + uVar8 * 800;
        puVar11 = (undefined2 *)(iVar5 + iVar13 * 2);
        puVar14 = (undefined2 *)(iVar6 + iVar13 * 2);
        uVar2 = uVar1;
        puVar3 = puVar14 + -1;
        puVar4 = puVar11 + -1;
        if ((uVar12 & 1) != 0) {
          *puVar14 = *puVar11;
          puVar3 = puVar14;
          puVar4 = puVar11;
        }
        while (uVar2 != 0) {
          puVar3[1] = puVar4[1];
          puVar3[2] = puVar4[2];
          uVar2 = uVar2 - 1 & 0xffff;
          puVar3 = puVar3 + 2;
          puVar4 = puVar4 + 2;
        }
      }
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < uVar10);
    return;
  }
  return;
}



void restore_screen_under_grid_brightness_slider(void)

{
  uint uVar1;
  uint uVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  undefined2 *puVar11;
  uint uVar12;
  int iVar13;
  undefined2 *puVar14;
  
  iVar6 = Start_Of_Screen_Mem;
  iVar5 = Screen_Frame_Buffer_2;
  uVar10 = *(ushort *)(PTR_DAT_80009ed8 + 6) + 0x76 & 0xfffeffff;
  uVar9 = *(ushort *)(PTR_DAT_80009ed8 + 4) + 0x247 & 0xfffeffff;
  uVar8 = *(ushort *)(PTR_DAT_80009ed8 + 6) + 0x3b & 0xfffeffff;
  uVar7 = *(ushort *)(PTR_DAT_80009ed8 + 4) + 0xf4 & 0xfffeffff;
  if (uVar8 < uVar10) {
    uVar12 = uVar9 - uVar7;
    uVar1 = uVar12 * 0x8000 >> 0x10;
    do {
      if (uVar7 < uVar9) {
        iVar13 = uVar7 + uVar8 * 800;
        puVar11 = (undefined2 *)(iVar5 + iVar13 * 2);
        puVar14 = (undefined2 *)(iVar6 + iVar13 * 2);
        uVar2 = uVar1;
        puVar3 = puVar14 + -1;
        puVar4 = puVar11 + -1;
        if ((uVar12 & 1) != 0) {
          *puVar14 = *puVar11;
          puVar3 = puVar14;
          puVar4 = puVar11;
        }
        while (uVar2 != 0) {
          puVar3[1] = puVar4[1];
          puVar3[2] = puVar4[2];
          uVar2 = uVar2 - 1 & 0xffff;
          puVar3 = puVar3 + 2;
          puVar4 = puVar4 + 2;
        }
      }
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < uVar10);
    return;
  }
  return;
}



int FUN_80009edc(undefined4 param_1,undefined2 *param_2)

{
  undefined *puVar1;
  undefined4 uVar2;
  int iVar3;
  
  uVar2 = DAT_80009ff8;
  puVar1 = DAT_80009ff4;
  *param_2 = 6;
  *(undefined4 *)(param_2 + 2) = 5;
  *(undefined4 *)(param_2 + 4) = uVar2;
  iVar3 = FUN_80036d3c(param_1);
  uVar2 = DAT_80009ffc;
  if (iVar3 != 0) {
    return iVar3;
  }
  if ((CONCAT11(*puVar1,puVar1[1]) != 0) && (CONCAT11(puVar1[0x1c],puVar1[0x1d]) == 0)) {
    *param_2 = 6;
    *(undefined4 *)(param_2 + 2) = 5;
    *(undefined4 *)(param_2 + 4) = uVar2;
    iVar3 = FUN_80036d3c(param_1);
    if (iVar3 != 0) {
      return iVar3;
    }
    if (CONCAT11(*puVar1,puVar1[1]) != 0) {
      if (CONCAT11(puVar1[0x1c],puVar1[0x1d]) == 0) {
        FUN_800376f8(s_switch_into_high_speed_mode_____8000a000);
      }
      return 0;
    }
  }
  return 1;
}



void FUN_8000a024(void)

{
  byte bVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  undefined auStack688 [12];
  int local_2a4;
  int local_84;
  int local_80;
  uint local_7c;
  uint local_78;
  uint local_74;
  uint local_70;
  uint local_6c;
  uint local_58;
  uint local_48;
  uint local_40;
  uint local_38;
  uint local_34;
  uint local_30;
  uint local_2c;
  
  uVar4 = 0;
  uVar11 = 0;
  uVar10 = 0;
  uVar9 = 0;
  uVar8 = 0;
  uVar7 = 0;
  uVar6 = 0;
  uVar5 = 0;
  local_40 = 0;
  iVar2 = FUN_800337c4(auStack688,s_UTX_1013_bin_8000a40c,1);
  if (iVar2 != 0) {
    FUN_8003347c(auStack688);
    iVar2 = FUN_800337c4(auStack688,s_FSI_1013_bin_8000a41c,1);
    if (iVar2 != 0) {
      FUN_8003347c(auStack688);
      iVar2 = FUN_800337c4(auStack688,s_DAN_1013_bin_8000a42c,1);
      if (iVar2 != 0) {
        FUN_8003347c(auStack688);
        iVar2 = FUN_800337c4(auStack688,s_YPK_1013_bin_8000a43c,1);
        if (iVar2 != 0) {
          FUN_8003347c(auStack688);
          return;
        }
      }
    }
  }
  local_80 = FUN_800001cc(0x200000);
  local_84 = local_2a4;
  FUN_80033b18(auStack688,local_80,local_2a4,0);
  FUN_8003347c(auStack688);
  iVar2 = local_80 + local_84;
  local_2c = (uint)*(byte *)(iVar2 + -0x21) |
             (uint)*(byte *)(iVar2 + -0x22) << 8 |
             (uint)*(byte *)(iVar2 + -0x23) << 0x10 | (uint)*(byte *)(iVar2 + -0x24) << 0x18;
  local_30 = (uint)*(byte *)(iVar2 + -0x1d) |
             (uint)*(byte *)(iVar2 + -0x1f) << 0x10 | (uint)*(byte *)(iVar2 + -0x20) << 0x18 |
             (uint)*(byte *)(iVar2 + -0x1e) << 8;
  local_34 = (uint)*(byte *)(iVar2 + -0x19) |
             (uint)*(byte *)(iVar2 + -0x1b) << 0x10 | (uint)*(byte *)(iVar2 + -0x1c) << 0x18 |
             (uint)*(byte *)(iVar2 + -0x1a) << 8;
  local_78 = (uint)*(byte *)(iVar2 + -0x15) |
             (uint)*(byte *)(iVar2 + -0x17) << 0x10 | (uint)*(byte *)(iVar2 + -0x18) << 0x18 |
             (uint)*(byte *)(iVar2 + -0x16) << 8;
  local_48 = (uint)*(byte *)(iVar2 + -0x11) |
             (uint)*(byte *)(iVar2 + -0x13) << 0x10 | (uint)*(byte *)(iVar2 + -0x14) << 0x18 |
             (uint)*(byte *)(iVar2 + -0x12) << 8;
  local_38 = (uint)*(byte *)(iVar2 + -0xd) |
             (uint)*(byte *)(iVar2 + -0xe) << 8 |
             (uint)*(byte *)(iVar2 + -0xf) << 0x10 | (uint)*(byte *)(iVar2 + -0x10) << 0x18;
  local_70 = (uint)*(byte *)(iVar2 + -3);
  local_58 = (uint)*(byte *)(iVar2 + -9) |
             (uint)*(byte *)(iVar2 + -0xb) << 0x10 | (uint)*(byte *)(iVar2 + -0xc) << 0x18 |
             (uint)*(byte *)(iVar2 + -10) << 8;
  local_6c = (uint)*(byte *)(iVar2 + -4);
  local_74 = (uint)*(byte *)(iVar2 + -2);
  local_7c = (uint)*(byte *)(iVar2 + -1);
  if (local_84 != 0x24) {
    uVar3 = 0;
    do {
      bVar1 = *(byte *)(local_80 + uVar3);
      uVar4 = uVar4 + bVar1;
      if ((bVar1 & 0x80) != 0) {
        local_40 = local_40 + uVar3;
      }
      if ((bVar1 & 0x40) != 0) {
        uVar11 = uVar11 + uVar3;
      }
      if ((bVar1 & 0x20) != 0) {
        uVar10 = uVar10 + uVar3;
      }
      if ((bVar1 & 0x10) != 0) {
        uVar9 = uVar9 + uVar3;
      }
      if ((bVar1 & 8) != 0) {
        uVar8 = uVar8 + uVar3;
      }
      if ((bVar1 & 4) != 0) {
        uVar7 = uVar7 + uVar3;
      }
      if ((bVar1 & 2) != 0) {
        uVar6 = uVar6 + uVar3;
      }
      if ((bVar1 & 1) != 0) {
        uVar5 = uVar5 + uVar3;
      }
      uVar3 = uVar3 + 1;
    } while (uVar3 < local_84 - 0x24U);
  }
  if (uVar4 == local_2c) {
    uVar4 = local_40;
    if (local_40 == local_30) {
      uVar4 = local_34;
    }
    if (local_40 == local_30 && uVar11 == uVar4) {
      uVar4 = local_78;
      if (uVar10 == local_78) {
        uVar4 = local_48;
      }
      if (uVar10 == local_78 && uVar9 == uVar4) {
        uVar4 = local_38;
        if (uVar8 == local_38) {
          uVar4 = local_58;
        }
        if ((uVar8 == local_38 && uVar7 == uVar4) &&
           (uVar6 == ((uint)*(byte *)(iVar2 + -7) << 0x10 | (uint)*(byte *)(iVar2 + -8) << 0x18 |
                      (uint)*(byte *)(iVar2 + -6) << 8 | (uint)*(byte *)(iVar2 + -5)) &&
            uVar5 == (local_74 << 8 | local_70 << 0x10 | local_6c << 0x18 | local_7c))) {
          memclear((uint)DAT_8000a548,1000);
          write_to_flash(0x27000,DAT_8000a548,1000);
          sys_init_watchdog();
          return;
        }
      }
    }
  }
  *(undefined *)(DAT_8000a524 + 2) = 100;
  fpga_write_cmd('8');
  fpga_write_data(-0x16);
  fpga_write_data((uchar)DAT_8000a528);
  set_display_fg_color(0xff0000);
  set_font_paint_mode(0);
  select_font(PTR_FONT_7_8000a52c);
  display_text(s_System_file_damaged_____8000a530,0x32,0x32);
  setup_usb_int();
  do {
                    // WARNING: Do nothing block with infinite loop
  } while( true );
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack
// WARNING: Unknown calling convention yet parameter storage is locked

void monitor_battery(void)

{
  int iVar1;
  undefined *puVar2;
  byte bVar3;
  uint uVar4;
  byte *pbVar5;
  int iVar6;
  ushort xend;
  int iVar7;
  byte bVar8;
  bool bVar9;
  
  iVar1 = DAT_8000a6a8;
  bVar8 = 0xff;
  if (0xd < *(byte *)(DAT_8000a6a8 + 10)) {
    iVar7 = 0x1e;
    goto LAB_8000a5bc;
  }
  if (*(byte *)(DAT_8000a6a8 + 10) < 0xc) {
    if (*(byte *)(DAT_8000a6a8 + 10) < 9) {
      if (6 < *(byte *)(DAT_8000a6a8 + 10)) {
        iVar7 = 100;
        goto LAB_8000a5bc;
      }
      if (3 < *(byte *)(DAT_8000a6a8 + 10)) {
        iVar7 = 0x32;
        goto LAB_8000a5bc;
      }
      if (1 < *(byte *)(DAT_8000a6a8 + 10)) goto LAB_8000a5b0;
    }
    iVar7 = 3;
  }
  else {
LAB_8000a5b0:
    iVar7 = 10;
  }
LAB_8000a5bc:
  uVar4 = check_port_pin(DAT_8000a6ac,0xc);
  puVar2 = PTR_DAT_8000a6b0;
  if (uVar4 == 0) {
    if (*(char *)(iVar1 + 0x39) == '\0') {
      *PTR_DAT_8000a6b0 = 0;
    }
    *(undefined *)(iVar1 + 0x39) = 1;
  }
  else {
    *(undefined *)(iVar1 + 0x39) = 0;
  }
  bVar3 = read_keyadc_data();
  uVar4 = (uint)bVar3 +
          (uint)((ulonglong)
                 (uint)((int)(short)(ushort)*(byte *)(DAT_8000a6b4 + 2) *
                       (int)(short)((ushort)bVar3 * 10)) * (ulonglong)DAT_8000a6b8 >> 0x28);
  if (*(char *)(iVar1 + 0x39) != '\0') {
    uVar4 = uVar4 - 7;
  }
  if (uVar4 < 0x19) {
    uVar4 = 0x19;
  }
  pbVar5 = (byte *)divide((uVar4 - 0x19) * 0x14,0x15);
  bVar3 = *puVar2;
  DAT_8000a6bc[bVar3] = (byte)pbVar5;
  if ((int)(uint)bVar3 < iVar7 + -1) {
    *puVar2 = bVar3 + 1;
    return;
  }
  bVar9 = iVar7 != 0;
  if (bVar9) {
    pbVar5 = DAT_8000a6bc;
  }
  *puVar2 = 0;
  while (bVar9) {
    bVar3 = *pbVar5;
    pbVar5 = pbVar5 + 1;
    if (bVar3 < bVar8) {
      bVar8 = bVar3;
    }
    iVar7 = iVar7 + -1;
    bVar9 = iVar7 != 0;
  }
  *(byte *)(iVar1 + 0x38) = bVar8;
  set_frame_to_global_pointer();
  set_display_fg_color(0xffffff);
  display_fill_rect(0x2c0,5,0x2d5,0x11);
  display_fill_rect(0x2be,9,0x2c1,0xd);
  iVar1 = DAT_8000bde4;
  if (*(byte *)(DAT_8000bde4 + 0x38) < 4) {
    uVar4 = 0xff0000;
  }
  else {
    uVar4 = 0xbb00;
  }
  set_display_fg_color(uVar4);
  if (0x14 < *(byte *)(iVar1 + 0x38)) {
    *(undefined *)(iVar1 + 0x38) = 0x14;
  }
  if (*(char *)(iVar1 + 0x38) != '\0') {
    display_fill_rect(0x2d5 - *(byte *)(iVar1 + 0x38),6,0x2d4,0x10);
  }
  if (*(char *)(iVar1 + 0x39) != '\0') {
    set_display_fg_color(DAT_8000bde8);
    xend = (ushort)DAT_8000bdec;
    display_draw_horz_line(10,0x2c4,xend);
    display_draw_horz_line(0xb,0x2c4,xend);
    display_draw_horz_line(0xc,0x2c4,xend);
    display_draw_vert_line(xend | 1,8,0xe);
    display_draw_vert_line(0x2d0,9,0xd);
    display_draw_vert_line(xend + 3,10,0xc);
    display_draw_vert_line(xend + 4,0xb,0xb);
  }
  iVar7 = Start_Of_Screen_Mem;
  iVar1 = Screen_Frame_Buffer;
  uVar4 = 5;
  do {
    iVar6 = uVar4 * 800 + 0x2be;
    copy_short((void *)(iVar7 + iVar6 * 2),(void *)(iVar1 + iVar6 * 2),0x18);
    uVar4 = uVar4 + 1;
  } while (uVar4 < 0x24);
  return;
}



// WARNING: Removing unreachable block (ram,0x8000dc84)
// WARNING: Removing unreachable block (ram,0x8000dca8)
// WARNING: Removing unreachable block (ram,0x8000dcc8)
// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8000dc78)
// WARNING: Removing unreachable block (ram,0x8000dc7c)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void restore_screen_channel1(void)

{
  int iVar1;
  int iVar2;
  char *pcVar3;
  char *pcVar4;
  int iVar5;
  uint uVar6;
  
  copy_rect_to_screen2(0xa1,6,(ushort)DAT_8000a6e4 + 0x30,(ushort)DAT_8000a6e4);
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(0xa1,4,0x104,0x2d);
  pcVar4 = DAT_8000dcf0;
  uVar6 = DAT_8000dcf4;
  if (*DAT_8000dcf0 == '\0') {
    uVar6 = DAT_8000dcf8;
  }
  set_display_fg_color(uVar6);
  display_fill_rect(0xa1,5,0xbf,0x28);
  set_display_fg_color(0);
  set_font_paint_mode(2);
  select_font(PTR_FONT_2_8000dcfc);
  display_text(&DAT_8000dd00,0xa6,0x10);
  set_display_fg_color(0xffffff);
  if (pcVar4[1] == '\0') {
    pcVar3 = (char *)0x8000dd04;
  }
  else {
    pcVar3 = (char *)0x8000dd08;
  }
  display_text(pcVar3,199,8);
  set_display_fg_color(0xffffff);
  if (pcVar4[2] == '\0') {
    display_text(&DAT_8000dd0c,0xe0,8);
  }
  else {
    if (pcVar4[2] == '\x01') {
      pcVar3 = &DAT_8000dd10;
    }
    else {
      if (pcVar4[2] != '\x02') goto LAB_8000dac0;
      pcVar3 = &DAT_8000dd14;
    }
    display_text(pcVar3,0xde,8);
  }
LAB_8000dac0:
  if (pcVar4[2] != '\0') {
    if (pcVar4[2] == '\x01') {
      switch(pcVar4[3]) {
      case '\0':
switchD_8000db84_caseD_0:
        pcVar4 = &DAT_8000dda4;
        break;
      case '\x01':
        pcVar4 = &DAT_8000dd60;
        break;
      case '\x02':
switchD_8000db84_caseD_2:
        pcVar4 = &DAT_8000dd68;
        break;
      case '\x03':
switchD_8000db84_caseD_3:
        pcVar4 = s_5V_div_8000dd1c;
        break;
      case '\x04':
        pcVar4 = &DAT_8000dd70;
        break;
      case '\x05':
        goto switchD_8000daf0_caseD_2;
      case '\x06':
        goto switchD_8000daf0_caseD_3;
      default:
        goto switchD_8000daf0_caseD_7;
      }
    }
    else {
      if (pcVar4[2] != '\x02') goto switchD_8000daf0_caseD_7;
      switch(pcVar4[3]) {
      case '\0':
        pcVar4 = &DAT_8000dd80;
        break;
      case '\x01':
        pcVar4 = &DAT_8000dd8c;
        break;
      case '\x02':
        pcVar4 = &DAT_8000dd98;
        break;
      case '\x03':
        goto switchD_8000db84_caseD_0;
      case '\x04':
        pcVar4 = &DAT_8000ddac;
        break;
      case '\x05':
        goto switchD_8000db84_caseD_2;
      case '\x06':
        goto switchD_8000db84_caseD_3;
      default:
        goto switchD_8000daf0_caseD_7;
      }
    }
    goto LAB_8000db34;
  }
  switch(pcVar4[3]) {
  case '\0':
    display_text(s_5V_div_8000dd1c,199,0x18);
    goto switchD_8000daf0_caseD_7;
  case '\x01':
    pcVar4 = s_2_5V_div_8000dd24;
    break;
  case '\x02':
switchD_8000daf0_caseD_2:
    pcVar4 = &DAT_8000dd78;
    break;
  case '\x03':
switchD_8000daf0_caseD_3:
    pcVar4 = &DAT_8000dd30;
    break;
  case '\x04':
    pcVar4 = &DAT_8000dd3c;
    break;
  case '\x05':
    pcVar4 = &DAT_8000dd48;
    break;
  case '\x06':
    pcVar4 = &DAT_8000dd54;
    break;
  default:
    goto switchD_8000daf0_caseD_7;
  }
LAB_8000db34:
  display_text(pcVar4,199,0x18);
switchD_8000daf0_caseD_7:
  iVar2 = Start_Of_Screen_Mem;
  iVar1 = Screen_Frame_Buffer;
  uVar6 = 4;
  do {
    iVar5 = uVar6 * 800 + 0xa1;
    copy_short((void *)(iVar2 + iVar5 * 2),(void *)(iVar1 + iVar5 * 2),100);
    uVar6 = uVar6 + 1;
  } while (uVar6 < 0x2d);
  return;
}



// WARNING: Removing unreachable block (ram,0x8000e084)
// WARNING: Removing unreachable block (ram,0x8000e0ac)
// WARNING: Removing unreachable block (ram,0x8000e0d4)
// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8000e078)
// WARNING: Removing unreachable block (ram,0x8000e07c)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_8000a6e8(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  char *pcVar4;
  int iVar5;
  ushort xpos;
  uint uVar6;
  
  copy_rect_to_screen2(0x120,0x2e,(ushort)DAT_8000a70c + 0xad,(ushort)DAT_8000a70c);
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  iVar1 = DAT_8000e100;
  display_fill_rect(0x120,4,(ushort)DAT_8000e100,0x2d);
  iVar2 = DAT_8000e104;
  uVar6 = DAT_8000e108;
  if (*(char *)(DAT_8000e104 + 0xc) == '\0') {
    uVar6 = DAT_8000e10c;
  }
  set_display_fg_color(uVar6);
  display_fill_rect(0x120,5,(ushort)DAT_8000e110,0x28);
  set_display_fg_color(0);
  set_font_paint_mode(2);
  select_font(PTR_FONT_2_8000e114);
  display_text(&DAT_8000e11c,(ushort)DAT_8000e118,0x10);
  set_display_fg_color(0xffffff);
  if (*(char *)(iVar2 + 0xd) == '\0') {
    pcVar4 = (char *)0x8000e124;
  }
  else {
    pcVar4 = (char *)0x8000e128;
  }
  xpos = (ushort)DAT_8000e120;
  display_text(pcVar4,xpos,8);
  set_display_fg_color(0xffffff);
  if (*(char *)(iVar2 + 0xe) == '\0') {
    display_text(&DAT_8000e140,(ushort)DAT_8000e13c,8);
  }
  else {
    if (*(char *)(iVar2 + 0xe) == '\x01') {
      pcVar4 = (char *)0x8000e130;
    }
    else {
      if (*(char *)(iVar2 + 0xe) != '\x02') goto LAB_8000dec0;
      pcVar4 = (char *)0x8000e134;
    }
    display_text(pcVar4,(ushort)DAT_8000e12c,8);
  }
LAB_8000dec0:
  if (*(char *)(iVar2 + 0xe) != '\0') {
    if (*(char *)(iVar2 + 0xe) == '\x01') {
      switch(*(undefined *)(iVar2 + 0xf)) {
      case 0:
switchD_8000df84_caseD_0:
        pcVar4 = &DAT_8000e1cc;
        break;
      case 1:
        pcVar4 = &DAT_8000e188;
        break;
      case 2:
switchD_8000df84_caseD_2:
        pcVar4 = &DAT_8000e190;
        break;
      case 3:
switchD_8000df84_caseD_3:
        pcVar4 = s_5V_div_8000e144;
        break;
      case 4:
        pcVar4 = &DAT_8000e198;
        break;
      case 5:
        goto switchD_8000def0_caseD_2;
      case 6:
        goto switchD_8000def0_caseD_3;
      default:
        goto switchD_8000def0_caseD_7;
      }
    }
    else {
      if (*(char *)(iVar2 + 0xe) != '\x02') goto switchD_8000def0_caseD_7;
      switch(*(undefined *)(iVar2 + 0xf)) {
      case 0:
        pcVar4 = &DAT_8000e1a8;
        break;
      case 1:
        pcVar4 = &DAT_8000e1b4;
        break;
      case 2:
        pcVar4 = &DAT_8000e1c0;
        break;
      case 3:
        goto switchD_8000df84_caseD_0;
      case 4:
        pcVar4 = &DAT_8000e1d4;
        break;
      case 5:
        goto switchD_8000df84_caseD_2;
      case 6:
        goto switchD_8000df84_caseD_3;
      default:
        goto switchD_8000def0_caseD_7;
      }
    }
    goto LAB_8000df34;
  }
  switch(*(undefined *)(iVar2 + 0xf)) {
  case 0:
    display_text(s_5V_div_8000e144,xpos,0x18);
    goto switchD_8000def0_caseD_7;
  case 1:
    pcVar4 = s_2_5V_div_8000e14c;
    break;
  case 2:
switchD_8000def0_caseD_2:
    pcVar4 = &DAT_8000e1a0;
    break;
  case 3:
switchD_8000def0_caseD_3:
    pcVar4 = &DAT_8000e158;
    break;
  case 4:
    pcVar4 = &DAT_8000e164;
    break;
  case 5:
    pcVar4 = &DAT_8000e170;
    break;
  case 6:
    pcVar4 = &DAT_8000e17c;
    break;
  default:
    goto switchD_8000def0_caseD_7;
  }
LAB_8000df34:
  display_text(pcVar4,xpos,0x18);
switchD_8000def0_caseD_7:
  iVar3 = Start_Of_Screen_Mem;
  iVar2 = Screen_Frame_Buffer;
  uVar6 = 4;
  do {
    iVar5 = uVar6 * 800 + 0x120;
    copy_short((void *)(iVar3 + iVar5 * 2),(void *)(iVar2 + iVar5 * 2),iVar1 + -0x11f);
    uVar6 = uVar6 + 1;
  } while (uVar6 < 0x2d);
  return;
}



void FUN_8000a710(void)

{
  uint uVar1;
  uint uVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  uint uVar9;
  undefined2 *puVar10;
  uint uVar11;
  int iVar12;
  undefined2 *puVar13;
  
  iVar7 = Start_Of_Screen_Mem;
  iVar6 = Screen_Frame_Buffer_2;
  uVar5 = DAT_8000a724;
  uVar9 = DAT_8000a724 + 0xfb;
  uVar8 = DAT_8000a724 - 0xd8;
  if (uVar8 < DAT_8000a724) {
    uVar11 = DAT_8000a724 + 0x15;
    uVar1 = uVar11 * 0x8000 >> 0x10;
    do {
      if (0xe6 < uVar9) {
        iVar12 = uVar8 * 800 + 0xe6;
        puVar10 = (undefined2 *)(iVar6 + iVar12 * 2);
        puVar13 = (undefined2 *)(iVar7 + iVar12 * 2);
        uVar2 = uVar1;
        puVar3 = puVar13 + -1;
        puVar4 = puVar10 + -1;
        if ((uVar11 & 1) != 0) {
          *puVar13 = *puVar10;
          puVar3 = puVar13;
          puVar4 = puVar10;
        }
        while (uVar2 != 0) {
          puVar3[1] = puVar4[1];
          puVar3[2] = puVar4[2];
          uVar2 = uVar2 - 1 & 0xffff;
          puVar3 = puVar3 + 2;
          puVar4 = puVar4 + 2;
        }
      }
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < uVar5);
    return;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x8001285c)
// WARNING: Removing unreachable block (ram,0x80012878)
// WARNING: Removing unreachable block (ram,0x80012898)
// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x80012850)
// WARNING: Removing unreachable block (ram,0x80012854)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_8000a728(void)

{
  int iVar1;
  int iVar2;
  ushort uVar3;
  char *pcVar4;
  int iVar5;
  uint uVar6;
  int count;
  
  copy_rect_to_screen2((ushort)DAT_8000a74c - 0xc0,5,(ushort)DAT_8000a74c,0xe8);
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(0x23a,2,700,0x2c);
  set_font_paint_mode(2);
  select_font(PTR_FONT_4_800128dc);
  set_display_fg_color(0xff00);
  display_fill_rect(0x23a,5,600,0x28);
  set_display_fg_color(0);
  display_text(&DAT_800128e0,0x246,0xf);
  set_display_fg_color(0xffffff);
  select_font(PTR_FONT_2_800128e4);
  iVar1 = DAT_800128e8;
  if (*(char *)(DAT_800128e8 + 0x21) == '\0') {
    display_text(&DAT_800128fc,0x25e,7);
  }
  else {
    if (*(char *)(DAT_800128e8 + 0x21) == '\x01') {
      pcVar4 = s_Single_800128ec;
    }
    else {
      if (*(char *)(DAT_800128e8 + 0x21) != '\x02') goto LAB_80012754;
      pcVar4 = s_Normal_800128f4;
    }
    display_text(pcVar4,0x25e,7);
  }
LAB_80012754:
  uVar3 = (ushort)DAT_80012904;
  if (*(char *)(iVar1 + 0x23) == '\0') {
    set_display_fg_color(DAT_80012908);
    display_fill_rect(uVar3 - 0x1c,0x19,uVar3,0x28);
    set_display_fg_color(0);
    pcVar4 = &DAT_8001290c;
  }
  else {
    if (*(char *)(iVar1 + 0x23) != '\x01') goto LAB_800127e4;
    set_display_fg_color(DAT_80012910);
    display_fill_rect(uVar3 - 0x1c,0x19,uVar3,0x28);
    set_display_fg_color(0);
    pcVar4 = &DAT_80012914;
  }
  display_text(pcVar4,uVar3 - 0x18,0x1a);
LAB_800127e4:
  set_display_fg_color(0xffffff);
  display_draw_vert_line(0x282,0x1b,0x26);
  display_draw_horz_line(0x26,0x27f,0x282);
  display_draw_horz_line(0x1b,0x282,0x285);
  if (*(char *)(iVar1 + 0x22) == '\0') {
    display_draw_horz_line(0x20,0x281,0x283);
    uVar3 = 0x21;
  }
  else {
    display_draw_horz_line(0x21,0x281,0x283);
    uVar3 = 0x20;
  }
  display_draw_horz_line(uVar3,0x280,0x284);
  iVar2 = Start_Of_Screen_Mem;
  iVar1 = Screen_Frame_Buffer;
  count = DAT_8001291c + -0x239;
  uVar6 = 5;
  do {
    iVar5 = uVar6 * 800 + 0x23a;
    copy_short((void *)(iVar2 + iVar5 * 2),(void *)(iVar1 + iVar5 * 2),count);
    uVar6 = uVar6 + 1;
  } while (uVar6 < 0x29);
  return;
}



void FUN_8000A750(void)

{
  undefined *puVar1;
  undefined *puVar2;
  
  puVar1 = DAT_8000a7ec;
  if (DAT_8000a7ec[10] == '\x01') {
    DAT_8000a7ec[10] = 0;
    restore_screen_under_calibration_texts();
  }
  if (puVar1[8] == '\x01') {
    puVar1[8] = 0;
    display_sys_menu_disp_brightness(0);
    FUN_8001c6c0();
  }
  if (puVar1[9] == '\x01') {
    puVar1[9] = 0;
    display_sys_menu_grid_brightness(0);
    restore_screen_under_grid_brightness_slider();
  }
  if (puVar1[7] == '\x01') {
    FUN_800268ec();
  }
  FUN_80016b8c();
  puVar1[8] = 0;
  puVar1[9] = 0;
  puVar1[10] = 0;
  puVar1[6] = 0;
  puVar1[0xb] = 0;
  *puVar1 = 0;
  puVar1[7] = 0;
  puVar1[0xc] = 0;
  puVar2 = DAT_8000a7f0;
  *(undefined2 *)(puVar1 + 2) = 0;
  *(undefined2 *)(puVar1 + 4) = 0;
  *puVar2 = 0;
  puVar2[1] = 0;
  return;
}



void scope_get_short_timebase_data(void)

{
  ushort uVar1;
  char *pcVar2;
  ushort *puVar3;
  uint *puVar4;
  uchar data;
  short sVar5;
  ushort uVar6;
  uint *puVar7;
  uint uVar8;
  uint uVar9;
  ushort *puVar10;
  uint *puVar11;
  ushort *puVar12;
  ushort *puVar13;
  uint *puVar14;
  int iVar15;
  uint uVar16;
  uint *unaff_r4;
  uint *puVar17;
  uint *puVar18;
  uint *puVar19;
  uint uVar20;
  uint16 *puVar21;
  bool bVar22;
  bool bVar23;
  uint local_30;
  uchar data_00;
  
  local_30 = 0;
  puVar7 = (uint *)fpga_prepare_for_transfer();
  puVar4 = DAT_8000b270;
  puVar11 = DAT_8000b268;
  sVar5 = (short)puVar7;
  if ((byte)DAT_8000b264[10] < 0x19) {
    if ((byte)DAT_8000b264[10] < 0xb) {
      sVar5 = 10;
    }
    else {
      if (puVar7 < DAT_8000b268) {
        sVar5 = sVar5 + 0xd11;
      }
      else {
        sVar5 = sVar5 + -0x2ee;
      }
    }
  }
  else {
    switch(DAT_8000b264[10]) {
    case '\x19':
      unaff_r4 = DAT_8000b26c;
      break;
    case '\x1a':
      unaff_r4 = (uint *)0xaa;
      break;
    case '\x1b':
      unaff_r4 = (uint *)0x55;
      break;
    case '\x1c':
      unaff_r4 = (uint *)0x2f;
      break;
    case '\x1d':
      unaff_r4 = (uint *)&NotUsed;
    }
    if (puVar7 < unaff_r4) {
      sVar5 = 0xfff - ((short)unaff_r4 - sVar5);
    }
    else {
      sVar5 = sVar5 - (short)unaff_r4;
    }
  }
  puVar7 = DAT_8000b270 + 0xfa;
  data = (uchar)((ushort)sVar5 >> 8);
  data_00 = (uchar)sVar5;
  if (*DAT_8000b264 != '\0') {
    fpga_write_cmd('\x1f');
    fpga_write_data(data);
    fpga_write_data(data_00);
    puVar18 = puVar4;
    if ((byte)DAT_8000b264[10] < 0xb) {
      puVar18 = puVar11;
    }
    uVar8 = translate_parameter(0xc,(uint)(byte)DAT_8000b264[0x23]);
    fpga_write_cmd((uchar)uVar8);
    fpga_bus_dir_in();
    puVar14 = DAT_8000b274;
    set_gpio_pin_low(DAT_8000b274,9);
    set_gpio_pin_low(puVar14,10);
    puVar19 = (uint *)0x0;
    if (puVar18 != (uint *)0x0) {
      do {
        set_gpio_pin_low(puVar14,8);
        set_gpio_pin_high(puVar14,8);
        iVar15 = (int)puVar19 * 2;
        puVar19 = (uint *)((uint)((int)puVar19 + 1) & 0xfffeffff);
        *(ushort *)((int)DAT_8000b278 + iVar15) = (ushort)puVar14[4] & 0xff;
      } while (puVar19 < puVar18);
    }
    pcVar2 = DAT_8000b264;
    *(ushort *)DAT_8000b278 = *(ushort *)((int)DAT_8000b278 + 2);
    if (pcVar2[0x23] == '\0') {
      local_30 = scope_process_trigger();
    }
    if (pcVar2[10] == '\x19') {
      scope_pre_process_250ns_data(DAT_8000b278,0,(uint)puVar7);
    }
    if (pcVar2[10] == '\x1a') {
      scope_pre_process_100ns_data(DAT_8000b278,0,(uint)puVar7);
    }
    if (pcVar2[10] == '\x1b') {
      scope_pre_process_50ns_data(DAT_8000b278,0,(uint)puVar7);
    }
    if ((DAT_8000b264[10] == '\x1c') || (DAT_8000b264[10] == '\x1d')) {
      fpga_write_cmd('\x1f');
      fpga_write_data(data);
      fpga_write_data(data_00);
      puVar18 = puVar4;
      if ((byte)DAT_8000b264[10] < 0xb) {
        puVar18 = puVar11;
      }
      fpga_write_cmd('!');
      fpga_bus_dir_in();
      set_gpio_pin_low(puVar14,9);
      set_gpio_pin_low(puVar14,10);
      puVar19 = puVar14;
      if (puVar18 != (uint *)0x0) {
        puVar19 = DAT_8000b27c;
      }
      puVar17 = (uint *)0x0;
      if (puVar18 != (uint *)0x0) {
        do {
          set_gpio_pin_low(puVar14,8);
          set_gpio_pin_high(puVar14,8);
          iVar15 = (int)puVar17 * 2;
          puVar17 = (uint *)((uint)((int)puVar17 + 1) & 0xfffeffff);
          *(ushort *)(DAT_8000b280 + iVar15) = (ushort)*puVar19 & 0xff;
        } while (puVar17 < puVar18);
      }
      scope_pre_process_ch1_25ns_data();
      scope_process_ch1_25ns_data();
    }
    puVar18 = puVar7;
    if (((byte)DAT_8000b264[10] < 0x19) && (puVar18 = puVar4, (byte)DAT_8000b264[10] < 9)) {
      puVar18 = puVar11;
    }
    uVar9 = translate_parameter(0xb,(uint)(byte)DAT_8000b264[3]);
    uVar8 = DAT_8000b288;
    pcVar2 = DAT_8000b264;
    puVar21 = DAT_8000b278;
    puVar12 = DAT_8000b284;
    puVar10 = DAT_8000b284;
    puVar3 = DAT_8000b290;
    while (DAT_8000b264 = pcVar2, DAT_8000b284 = puVar10, DAT_8000b290 = puVar3,
          puVar18 != (uint *)0x0) {
      uVar16 = (uVar9 & 0xffff) * (uint)*(ushort *)puVar21 & 0xffff;
      uVar1 = (ushort)(DAT_8000b28c * uVar16 + DAT_8000b28c >> 0x10);
      uVar6 = uVar1 >> 6;
      if (0x32 < (int)(uVar16 + (uint)((ulonglong)uVar16 * (ulonglong)uVar8 >> 0x25) * -100)) {
        uVar6 = (uVar1 >> 6) + 1;
      }
      puVar18 = (uint *)((int)puVar18 + -1);
      *puVar12 = uVar6;
      pcVar2 = DAT_8000b264;
      puVar21 = (uint16 *)((int)puVar21 + 2);
      puVar12 = puVar12 + 1;
      puVar10 = DAT_8000b284;
      puVar3 = DAT_8000b290;
    }
    puVar18 = puVar7;
    if (((byte)pcVar2[10] < 0x19) && (puVar18 = puVar4, (byte)pcVar2[10] < 9)) {
      puVar18 = puVar11;
    }
    puVar12 = puVar10 + -1;
    puVar13 = puVar3 + -1;
    if (((uint)puVar18 & 1) == 0) {
      *puVar3 = *puVar10;
      puVar12 = puVar10;
      puVar13 = puVar3;
    }
    uVar6 = puVar12[1];
    iVar15 = (int)puVar18 + -1 >> 1;
    while (iVar15 != 0) {
      uVar1 = puVar12[2];
      puVar13[1] = uVar6;
      uVar6 = puVar12[3];
      iVar15 = iVar15 + -1;
      puVar13 = puVar13 + 2;
      *puVar13 = uVar1;
      puVar12 = puVar12 + 2;
    }
    iVar15 = (int)puVar18 + -1;
    if (-1 < iVar15) {
      puVar3[iVar15] = puVar10[iVar15];
    }
    puVar18 = puVar7;
    if (((byte)pcVar2[10] < 0x19) && (puVar18 = puVar4, (byte)pcVar2[10] < 9)) {
      puVar18 = puVar11;
    }
    puVar12 = DAT_8000b290;
    puVar14 = puVar7;
    uVar8 = DAT_8000b294;
    if ((pcVar2[3] == '\x06') && (puVar18 != (uint *)0x0)) {
      puVar12 = puVar3 + -1;
      if (((uint)puVar18 & 1) != 0) {
        *puVar3 = *puVar3 << 1;
        puVar12 = puVar3;
      }
      uVar8 = (uint)puVar18 >> 1;
      while (uVar8 != 0) {
        puVar10 = puVar12 + 2;
        uVar8 = uVar8 - 1;
        puVar12[1] = puVar12[1] << 1;
        *puVar10 = *puVar10 << 1;
        puVar12 = puVar10;
      }
      puVar19 = (uint *)0x0;
      puVar12 = DAT_8000b290;
      uVar8 = DAT_8000b294;
      if (puVar18 != (uint *)0x0) {
        do {
          puVar12 = puVar3 + (int)puVar19;
          if (*puVar12 < *(ushort *)(pcVar2 + 6)) {
            *puVar12 = 0;
          }
          else {
            *puVar12 = *puVar12 - *(short *)(pcVar2 + 6);
          }
          puVar19 = (uint *)((uint)((int)puVar19 + 1) & 0xfffeffff);
          puVar12 = DAT_8000b290;
          uVar8 = DAT_8000b294;
        } while (puVar19 < puVar18);
      }
    }
    do {
      if (uVar8 < *puVar12) {
        *puVar12 = (ushort)uVar8;
      }
      puVar14 = (uint *)((int)puVar14 + -1);
      puVar12 = puVar12 + 1;
    } while (puVar14 != (uint *)0x0);
    puVar12 = DAT_8000b290;
    iVar15 = DAT_8000b298;
    if ((byte)pcVar2[10] < 0x19) {
      do {
        uVar8 = (uint)*puVar12;
        uVar16 = (uint)puVar12[1];
        uVar9 = (uint)puVar12[2];
        uVar20 = uVar8 + 6;
        bVar23 = uVar20 <= uVar16;
        bVar22 = uVar16 == uVar20;
        if (bVar23 && !bVar22) {
          uVar20 = uVar9 + 6;
        }
        if (bVar23 && !bVar22) {
          bVar23 = uVar20 <= uVar16;
          bVar22 = uVar16 == uVar20;
        }
        if (bVar23 && !bVar22) {
          puVar12[1] = (ushort)(uVar8 + uVar9 >> 1);
        }
        if (uVar16 + 6 < uVar8 && uVar16 + 6 < uVar9) {
          puVar12[1] = (ushort)(uVar8 + uVar9 >> 1);
        }
        iVar15 = iVar15 + -1;
        puVar12 = puVar12 + 1;
      } while (iVar15 != 0);
    }
    FUN_800049a0();
    FUN_80006654();
    if (pcVar2[0x48] == '\0') {
      FUN_80003ec8();
    }
  }
  if (DAT_8000b264[0xc] != '\0') {
    fpga_write_cmd('\x1f');
    fpga_write_data(data);
    fpga_write_data(data_00);
    puVar18 = puVar4;
    if ((byte)DAT_8000b264[10] < 0xb) {
      puVar18 = puVar11;
    }
    uVar8 = translate_parameter(0xd,(uint)(byte)DAT_8000b264[0x23]);
    fpga_write_cmd((uchar)uVar8);
    fpga_bus_dir_in();
    puVar19 = DAT_8000b274;
    set_gpio_pin_low(DAT_8000b274,9);
    set_gpio_pin_low(puVar19,10);
    puVar21 = DAT_8000b29c;
    puVar14 = (uint *)0x0;
    if (puVar18 != (uint *)0x0) {
      do {
        set_gpio_pin_low(puVar19,8);
        set_gpio_pin_high(puVar19,8);
        iVar15 = (int)puVar14 * 2;
        puVar14 = (uint *)((uint)((int)puVar14 + 1) & 0xfffeffff);
        *(ushort *)((int)puVar21 + iVar15) = (ushort)*DAT_8000b27c & 0xff;
      } while (puVar14 < puVar18);
    }
    pcVar2 = DAT_8000b264;
    *(ushort *)puVar21 = *(ushort *)((int)puVar21 + 2);
    if (pcVar2[0x23] == '\x01') {
      local_30 = scope_process_trigger();
    }
    if (pcVar2[10] == '\x19') {
      scope_pre_process_250ns_data(DAT_8000b29c,0,(uint)puVar7);
    }
    if (pcVar2[10] == '\x1a') {
      scope_pre_process_100ns_data(DAT_8000b29c,0,(uint)puVar7);
    }
    if (pcVar2[10] == '\x1b') {
      scope_pre_process_50ns_data(DAT_8000b29c,0,(uint)puVar7);
    }
    if ((DAT_8000b264[10] == '\x1c') || (DAT_8000b264[10] == '\x1d')) {
      fpga_write_cmd('\x1f');
      fpga_write_data(data);
      fpga_write_data(data_00);
      puVar18 = puVar4;
      if ((byte)DAT_8000b264[10] < 0xb) {
        puVar18 = puVar11;
      }
      fpga_write_cmd('#');
      fpga_bus_dir_in();
      set_gpio_pin_low(puVar19,9);
      set_gpio_pin_low(puVar19,10);
      if (puVar18 != (uint *)0x0) {
        puVar21 = DAT_8000b2a0;
        puVar14 = DAT_8000b27c;
      }
      puVar17 = (uint *)0x0;
      if (puVar18 != (uint *)0x0) {
        do {
          set_gpio_pin_low(puVar19,8);
          set_gpio_pin_high(puVar19,8);
          iVar15 = (int)puVar17 * 2;
          puVar17 = (uint *)((uint)((int)puVar17 + 1) & 0xfffeffff);
          *(ushort *)((int)puVar21 + iVar15) = (ushort)*puVar14 & 0xff;
        } while (puVar17 < puVar18);
      }
      scope_pre_process_ch2_25ns_data();
      scope_process_ch2_25ns_data();
    }
    pcVar2 = DAT_8000b264;
    puVar18 = puVar7;
    if (((byte)DAT_8000b264[10] < 0x19) && (puVar18 = puVar4, (byte)DAT_8000b264[10] < 9)) {
      puVar18 = puVar11;
    }
    uVar9 = translate_parameter(0xb,(uint)(byte)DAT_8000b264[0xf]);
    uVar8 = DAT_8000b288;
    puVar21 = DAT_8000b29c;
    puVar12 = DAT_8000b2a4;
    puVar10 = DAT_8000b2a4;
    puVar3 = DAT_8000b2a8;
    while (DAT_8000b2a4 = puVar10, DAT_8000b2a8 = puVar3, puVar18 != (uint *)0x0) {
      uVar16 = (uVar9 & 0xffff) * (uint)*(ushort *)puVar21 & 0xffff;
      uVar1 = (ushort)(DAT_8000b28c * uVar16 + DAT_8000b28c >> 0x10);
      uVar6 = uVar1 >> 6;
      if (0x32 < (int)(uVar16 + (uint)((ulonglong)uVar16 * (ulonglong)uVar8 >> 0x25) * -100)) {
        uVar6 = (uVar1 >> 6) + 1;
      }
      puVar18 = (uint *)((int)puVar18 + -1);
      *puVar12 = uVar6;
      puVar21 = (uint16 *)((int)puVar21 + 2);
      puVar12 = puVar12 + 1;
      puVar10 = DAT_8000b2a4;
      puVar3 = DAT_8000b2a8;
    }
    puVar18 = puVar7;
    if (((byte)pcVar2[10] < 0x19) && (puVar18 = puVar4, (byte)pcVar2[10] < 9)) {
      puVar18 = puVar11;
    }
    puVar12 = puVar10 + -1;
    puVar13 = puVar3 + -1;
    if (((uint)puVar18 & 1) == 0) {
      *puVar3 = *puVar10;
      puVar12 = puVar10;
      puVar13 = puVar3;
    }
    uVar6 = puVar12[1];
    iVar15 = (int)puVar18 + -1 >> 1;
    while (iVar15 != 0) {
      uVar1 = puVar12[2];
      puVar13[1] = uVar6;
      uVar6 = puVar12[3];
      iVar15 = iVar15 + -1;
      puVar13 = puVar13 + 2;
      *puVar13 = uVar1;
      puVar12 = puVar12 + 2;
    }
    iVar15 = (int)puVar18 + -1;
    if (-1 < iVar15) {
      puVar3[iVar15] = puVar10[iVar15];
    }
    puVar18 = puVar7;
    if (((byte)pcVar2[10] < 0x19) && (puVar18 = puVar11, 8 < (byte)pcVar2[10])) {
      puVar18 = puVar4;
    }
    puVar12 = DAT_8000b2a8;
    uVar8 = DAT_8000b294;
    if ((pcVar2[0xf] == '\x06') && (puVar18 != (uint *)0x0)) {
      puVar12 = puVar3 + -1;
      if (((uint)puVar18 & 1) != 0) {
        *puVar3 = *puVar3 << 1;
        puVar12 = puVar3;
      }
      uVar8 = (uint)puVar18 >> 1;
      while (uVar8 != 0) {
        puVar10 = puVar12 + 2;
        uVar8 = uVar8 - 1;
        puVar12[1] = puVar12[1] << 1;
        *puVar10 = *puVar10 << 1;
        puVar12 = puVar10;
      }
      puVar11 = (uint *)0x0;
      puVar12 = DAT_8000b2a8;
      uVar8 = DAT_8000b294;
      if (puVar18 != (uint *)0x0) {
        do {
          puVar12 = puVar3 + (int)puVar11;
          if (*puVar12 < *(ushort *)(pcVar2 + 0x12)) {
            *puVar12 = 0;
          }
          else {
            *puVar12 = *puVar12 - *(short *)(pcVar2 + 0x12);
          }
          puVar11 = (uint *)((uint)((int)puVar11 + 1) & 0xfffeffff);
          puVar12 = DAT_8000b2a8;
          uVar8 = DAT_8000b294;
        } while (puVar11 < puVar18);
      }
    }
    do {
      if (uVar8 < *puVar12) {
        *puVar12 = (ushort)uVar8;
      }
      puVar7 = (uint *)((int)puVar7 + -1);
      puVar12 = puVar12 + 1;
    } while (puVar7 != (uint *)0x0);
    puVar12 = DAT_8000b2a8;
    iVar15 = DAT_8000b298;
    if ((byte)pcVar2[10] < 0x19) {
      do {
        uVar9 = (uint)*puVar12;
        uVar8 = (uint)puVar12[1];
        uVar16 = (uint)puVar12[2];
        uVar20 = uVar9 + 6;
        bVar23 = uVar20 <= uVar8;
        bVar22 = uVar8 == uVar20;
        if (bVar23 && !bVar22) {
          uVar20 = uVar16 + 6;
        }
        if (bVar23 && !bVar22) {
          bVar23 = uVar20 <= uVar8;
          bVar22 = uVar8 == uVar20;
        }
        if (bVar23 && !bVar22) {
          puVar12[1] = (ushort)(uVar9 + uVar16 >> 1);
        }
        if (uVar8 + 6 < uVar9 && uVar8 + 6 < uVar16) {
          puVar12[1] = (ushort)(uVar9 + uVar16 >> 1);
        }
        iVar15 = iVar15 + -1;
        puVar12 = puVar12 + 1;
      } while (iVar15 != 0);
    }
    FUN_80007714();
    FUN_800093ac();
    if (pcVar2[0x48] == '\0') {
      FUN_80006ce8();
    }
  }
  pcVar2 = DAT_8000b264;
  if (0x18 < (byte)DAT_8000b264[10]) {
    if (DAT_8000b264[0x23] == '\0') {
      if (*DAT_8000b264 != '\0') {
        FUN_80006a94(*(undefined2 *)(DAT_8000b264 + 0x26));
        FUN_80005080();
      }
      if (pcVar2[0xc] != '\0') {
        FUN_80008fac();
        FUN_80007df4();
      }
    }
    else {
      if (DAT_8000b264[0xc] != '\0') {
        FUN_800097e0(*(undefined2 *)(DAT_8000b264 + 0x26));
        FUN_80007df4();
      }
      if (*pcVar2 != '\0') {
        FUN_80006250();
        FUN_80005080();
      }
    }
  }
  if (local_30 == 0) {
    pcVar2[0x1e] = '\0';
    pcVar2[0x18] = '\x01';
    pcVar2[0x17] = '\x01';
  }
  else {
    pcVar2[0x1e] = '\x01';
    pcVar2[0x18] = '\0';
    pcVar2[0x17] = '\0';
  }
  return;
}



void FUN_8000b2ac(void)

{
  ushort uVar1;
  longlong lVar2;
  char cVar3;
  int iVar4;
  int iVar5;
  char cVar6;
  uint uVar7;
  int iVar8;
  uint uVar9;
  undefined uVar10;
  uint uVar11;
  int iVar12;
  
  iVar5 = DAT_8000b4c0;
  iVar4 = DAT_8000b4bc;
  cVar6 = *PTR_DAT_8000b4b8;
  uVar9 = 0;
  do {
    uVar1 = *(ushort *)(iVar5 + uVar9 * 2 + 0x1e);
    uVar7 = (uint)uVar1;
    if (uVar7 == 0) break;
    cVar3 = (char)uVar1;
    if (uVar7 < 10) {
      iVar8 = uVar9 * 0xf + iVar5;
      *(undefined *)(iVar8 + 0x7ee) = 0x2f;
      *(char *)(iVar8 + 0x7ef) = cVar3 + '0';
      *(undefined *)(iVar8 + 0x7f0) = 0x2e;
      if (cVar6 == '\0') {
        *(undefined *)(iVar8 + 0x7f1) = 0x62;
        uVar10 = 0x70;
        *(undefined *)(iVar8 + 0x7f2) = 0x6d;
      }
      else {
        *(undefined *)(iVar8 + 0x7f1) = 0x77;
        uVar10 = 0x76;
        *(undefined *)(iVar8 + 0x7f2) = 0x61;
      }
      *(undefined *)(iVar8 + 0x7f3) = uVar10;
      *(undefined *)(iVar8 + 0x7f4) = 0;
    }
    else {
      if (uVar7 < 100) {
        uVar11 = uVar7 * DAT_8000b4c4;
        iVar8 = uVar9 * 0xf + iVar5;
        *(undefined *)(iVar8 + 0x7ee) = 0x2f;
        *(char *)(iVar8 + 0x7ef) = (char)(uVar11 >> 0x13) + '0';
        *(char *)(iVar8 + 0x7f0) =
             cVar3 + (char)(uint)((ulonglong)uVar7 * (ulonglong)DAT_8000b4c8 >> 0x23) * -10 + '0';
        *(undefined *)(iVar8 + 0x7f1) = 0x2e;
        if (cVar6 == '\0') {
          *(undefined *)(iVar8 + 0x7f2) = 0x62;
          uVar10 = 0x70;
          *(undefined *)(iVar8 + 0x7f3) = 0x6d;
        }
        else {
          *(undefined *)(iVar8 + 0x7f2) = 0x77;
          uVar10 = 0x76;
          *(undefined *)(iVar8 + 0x7f3) = 0x61;
        }
        *(undefined *)(iVar8 + 0x7f4) = uVar10;
        *(undefined *)(iVar8 + 0x7f5) = 0;
      }
      else {
        if (uVar7 < 1000) {
          iVar12 = uVar7 * DAT_8000b4cc;
          iVar8 = uVar9 * 0xf + iVar5;
          *(undefined *)(iVar8 + 0x7ee) = 0x2f;
          *(char *)(iVar8 + 0x7ef) = (char)(iVar12 + 0xa3d7U >> 0x16) + '0';
          lVar2 = (longlong)iVar4 *
                  (longlong)
                  (int)(uVar7 + (uint)((ulonglong)uVar7 * (ulonglong)DAT_8000b4d0 >> 0x25) * -100);
          *(char *)(iVar8 + 0x7f0) = ((char)(int)(lVar2 >> 0x22) - (char)(lVar2 >> 0x3f)) + '0';
          *(char *)(iVar8 + 0x7f1) =
               cVar3 + (char)(uint)((ulonglong)uVar7 * (ulonglong)DAT_8000b4c8 >> 0x23) * -10 + '0';
          *(undefined *)(iVar8 + 0x7f2) = 0x2e;
          if (cVar6 == '\0') {
            *(undefined *)(iVar8 + 0x7f3) = 0x62;
            uVar10 = 0x70;
            *(undefined *)(iVar8 + 0x7f4) = 0x6d;
          }
          else {
            *(undefined *)(iVar8 + 0x7f3) = 0x77;
            uVar10 = 0x76;
            *(undefined *)(iVar8 + 0x7f4) = 0x61;
          }
          *(undefined *)(iVar8 + 0x7f5) = uVar10;
          *(undefined *)(iVar8 + 0x7f6) = 0;
        }
      }
    }
    uVar9 = uVar9 + 1 & 0xfffeffff;
  } while (uVar9 < 1000);
  uVar7 = uVar9 & 0xff;
  *(char *)(iVar5 + 0xc) = (char)uVar7;
  if ((uVar9 & 0xf) == 0) {
    cVar6 = (char)(uVar7 >> 4);
  }
  else {
    cVar6 = (char)(uVar7 >> 4) + '\x01';
  }
  *(char *)(iVar5 + 0xb) = cVar6;
  return;
}



void calculate_trigger_level(void)

{
  char cVar1;
  ushort uVar2;
  int iVar3;
  undefined uVar4;
  uint uVar5;
  uint in_r1;
  int iVar6;
  
  iVar3 = DAT_8000b5c4;
  if (*(char *)(DAT_8000b5c4 + 0x23) == '\0') {
    cVar1 = *(char *)(DAT_8000b5c4 + 3);
    uVar2 = *(ushort *)(DAT_8000b5c4 + 6);
  }
  else {
    cVar1 = *(char *)(DAT_8000b5c4 + 0xf);
    uVar2 = *(ushort *)(DAT_8000b5c4 + 0x12);
  }
  uVar5 = (uint)uVar2;
  switch(cVar1) {
  case '\0':
    in_r1 = (uint)*DAT_8000b5c8;
    break;
  case '\x01':
    in_r1 = (uint)DAT_8000b5c8[1];
    break;
  case '\x02':
    in_r1 = (uint)DAT_8000b5c8[2];
    break;
  case '\x03':
    in_r1 = (uint)DAT_8000b5c8[3];
    break;
  case '\x04':
    in_r1 = (uint)DAT_8000b5c8[4];
    break;
  case '\x05':
    in_r1 = (uint)DAT_8000b5c8[5];
    break;
  case '\x06':
    in_r1 = (uint)DAT_8000b5c8[6];
LAB_8000b578:
    if (*(ushort *)(DAT_8000b5c4 + 0x26) < uVar5) {
      iVar6 = divide_2((uVar5 - (int)(uVar5 - *(ushort *)(DAT_8000b5c4 + 0x26)) / 2) * 100,in_r1);
      *(char *)(iVar3 + 0x28) = (char)iVar6;
      return;
    }
    iVar6 = divide_2((uVar5 + (int)(*(ushort *)(DAT_8000b5c4 + 0x26) - uVar5) / 2) * 100,in_r1);
    uVar4 = (undefined)iVar6;
    goto LAB_8000b570;
  default:
    if (cVar1 == '\x06') goto LAB_8000b578;
  }
  iVar6 = divide((uint)*(ushort *)(DAT_8000b5c4 + 0x26) * 100,in_r1);
  uVar4 = (undefined)iVar6;
LAB_8000b570:
  *(undefined *)(iVar3 + 0x28) = uVar4;
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_draw_trace_pointers(void)

{
  short sVar1;
  char *pcVar2;
  undefined4 uVar3;
  uint uVar4;
  undefined4 unaff_r4;
  undefined4 unaff_r5;
  uint uVar5;
  undefined4 unaff_r6;
  uint uVar6;
  undefined4 unaff_r7;
  uint uVar7;
  undefined4 unaff_r8;
  uint uVar8;
  undefined4 unaff_r9;
  undefined4 unaff_r10;
  undefined4 in_lr;
  
  pcVar2 = DAT_8000b8d8;
  uVar4 = DAT_8000b8dc - 7;
  uVar8 = DAT_8000b8dc - (uint)*(ushort *)(DAT_8000b8d8 + 6) & 0xffff;
  uVar6 = DAT_8000b8dc - (uint)*(ushort *)(DAT_8000b8d8 + 0x12) & 0xffff;
  uVar5 = DAT_8000b8dc - (uint)*(ushort *)(DAT_8000b8d8 + 0x26) & 0xffff;
  uVar7 = *(ushort *)(DAT_8000b8d8 + 0x24) + 2 & 0xfffeffff;
  if (uVar8 < 0x35) {
    uVar8 = 0x35;
  }
  else {
    if (uVar4 < uVar8) {
      uVar8 = uVar4;
    }
  }
  if (uVar6 < 0x35) {
    uVar6 = 0x35;
  }
  else {
    if (uVar4 < uVar6) {
      uVar6 = uVar4;
    }
  }
  if (uVar5 < 0x35) {
    uVar5 = 0x35;
  }
  else {
    if (uVar4 < uVar5) {
      uVar5 = uVar4;
    }
  }
  if (uVar7 < 10) {
    uVar7 = 10;
  }
  else {
    if (DAT_8000b8e0 < uVar7) {
      uVar7 = DAT_8000b8e0;
    }
  }
  if (*DAT_8000b8d8 != '\0') {
    set_display_fg_color(DAT_8000b8e4);
    uVar4 = uVar8;
    do {
      sVar1 = (short)uVar8;
      display_draw_horz_line((ushort)uVar4,2,0x15 - (sVar1 - (ushort)uVar4));
      uVar4 = uVar4 - 1 & 0xffff;
    } while ((int)(uVar8 - 8) < (int)uVar4);
    uVar4 = uVar8 + 8;
    while (uVar8 < uVar4) {
      display_draw_horz_line((ushort)uVar8,2,0x15 - ((ushort)uVar8 - sVar1));
      uVar8 = uVar8 + 1 & 0xfffeffff;
    }
    set_display_fg_color(0);
    select_font(PTR_FONT_0_8000b8e8);
    display_character('1',(uint16)CONCAT412(unaff_r7,CONCAT48(unaff_r6,CONCAT44(unaff_r5,unaff_r4)))
                      ,(uint16)CONCAT412(in_lr,CONCAT48(unaff_r10,CONCAT44(unaff_r9,unaff_r8))));
  }
  if (pcVar2[0xc] != '\0') {
    set_display_fg_color(DAT_8000b8ec);
    uVar8 = uVar6;
    do {
      sVar1 = (short)uVar6;
      display_draw_horz_line((ushort)uVar8,2,0x15 - (sVar1 - (ushort)uVar8));
      uVar8 = uVar8 - 1 & 0xffff;
    } while ((int)(uVar6 - 8) < (int)uVar8);
    uVar8 = uVar6 + 8;
    while (uVar6 < uVar8) {
      display_draw_horz_line((ushort)uVar6,2,0x15 - ((ushort)uVar6 - sVar1));
      uVar6 = uVar6 + 1 & 0xfffeffff;
    }
    set_display_fg_color(0);
    select_font(PTR_FONT_0_8000b8e8);
    display_character('2',(uint16)CONCAT412(unaff_r7,CONCAT48(unaff_r6,CONCAT44(unaff_r5,unaff_r4)))
                      ,(uint16)CONCAT412(in_lr,CONCAT48(unaff_r10,CONCAT44(unaff_r9,unaff_r8))));
  }
  if (10 < (byte)pcVar2[10]) {
    set_display_fg_color(0xff00);
    uVar3 = DAT_8000b8f0;
    uVar8 = uVar5;
    do {
      sVar1 = (short)uVar5;
      display_draw_horz_line((ushort)uVar8,(sVar1 - (ushort)uVar8) + 0x2c3,(ushort)uVar3);
      uVar8 = uVar8 - 1 & 0xffff;
    } while ((int)(uVar5 - 8) < (int)uVar8);
    uVar8 = uVar5 + 8;
    while (uVar5 < uVar8) {
      display_draw_horz_line((ushort)uVar5,((ushort)uVar5 - sVar1) + 0x2c3,(ushort)uVar3);
      uVar5 = uVar5 + 1 & 0xfffeffff;
    }
    set_display_fg_color(0);
    select_font(PTR_FONT_3_8000b8f4);
    display_character('T',(uint16)CONCAT412(unaff_r7,CONCAT48(unaff_r6,CONCAT44(unaff_r5,unaff_r4)))
                      ,(uint16)CONCAT412(in_lr,CONCAT48(unaff_r10,CONCAT44(unaff_r9,unaff_r8))));
    set_display_fg_color(0xff00);
    uVar8 = uVar7;
    do {
      sVar1 = (short)uVar7;
      display_draw_vert_line((ushort)uVar8,0x30,0x3f - (sVar1 - (ushort)uVar8));
      uVar8 = uVar8 - 1 & 0xffff;
    } while ((int)(uVar7 - 7) < (int)uVar8);
    uVar8 = uVar7 + 7;
    if (uVar8 <= uVar7) {
      return;
    }
    do {
      display_draw_vert_line((ushort)uVar7,0x30,0x3f - ((ushort)uVar7 - sVar1));
      uVar7 = uVar7 + 1 & 0xfffeffff;
    } while (uVar7 < uVar8);
    return;
  }
  return;
}



void debe_enable(uint addr)

{
  uint *puVar1;
  int iVar2;
  
  puVar1 = BUS_CLK_GATING_REG1;
  iVar2 = *(int *)(addr + 8);
  *BUS_CLK_GATING_REG1 = *BUS_CLK_GATING_REG1 | 0x1000;
  puVar1[0x98] = puVar1[0x98] | 0x1000;
  delay_2(1);
  puVar1 = (uint *)(iVar2 + 0x800);
  *(uint *)(iVar2 + 0x800) = *(uint *)(iVar2 + 0x800) | 1;
  *(uint *)(iVar2 + 0x808) = *(int *)(addr + 0x1c) - 1U | (*(ushort *)(addr + 0x20) - 1) * 0x10000;
  *(uint *)(iVar2 + 0x810) = *(int *)(addr + 0x1c) - 1U | (*(ushort *)(addr + 0x20) - 1) * 0x10000;
  *(int *)(iVar2 + 0x840) = *(int *)(addr + 0x1c) << 4;
  *(int *)(iVar2 + 0x850) = *(int *)(addr + 0x38) << 3;
  *(uint *)(iVar2 + 0x860) = *(uint *)(addr + 0x38) >> 0x1d;
  *(undefined4 *)(iVar2 + 0x8a0) = 0x500;
  *puVar1 = *puVar1 | 0x100;
  *(uint *)(iVar2 + 0x870) = *(uint *)(iVar2 + 0x870) | 1;
  *puVar1 = *puVar1 | 2;
  return;
}



void FUN_8000b9c4(uint param_1)

{
  byte bVar1;
  byte bVar2;
  int iVar3;
  undefined *puVar4;
  int iVar5;
  uint uVar6;
  ushort *puVar7;
  byte *pbVar8;
  int iVar9;
  
  puVar7 = DAT_8000baf0;
  puVar4 = DAT_8000baec;
  iVar3 = DAT_8000bae4;
  uVar6 = 0;
  do {
    if (CONCAT11(*(undefined *)(DAT_8000bae4 + uVar6),*(undefined *)(DAT_8000bae4 + uVar6 + 1)) ==
        param_1) {
      iVar5 = DAT_8000bae4 + uVar6;
      iVar9 = 0x57;
      pbVar8 = (byte *)(DAT_8000bae4 + uVar6 + 0x14);
      *(ushort *)(DAT_8000baec + 6) = (ushort)*(byte *)(iVar5 + 2);
      *(ushort *)(puVar4 + 0x12) = (ushort)*(byte *)(iVar5 + 3);
      *(ushort *)(puVar4 + 0x26) = (ushort)*(byte *)(iVar5 + 4);
      *(ushort *)(puVar4 + 0x24) = (ushort)*(byte *)(iVar5 + 5);
      *puVar4 = *(undefined *)(iVar5 + 6);
      puVar4[0xc] = *(undefined *)(iVar5 + 7);
      *(ushort *)(puVar4 + 0x1a) = (ushort)*(byte *)(iVar5 + 8);
      *(ushort *)(puVar4 + 0x1c) = (ushort)*(byte *)(iVar5 + 9);
      *(undefined *)(DAT_8000baf4 + 7) = *(undefined *)(iVar5 + 10);
      *puVar7 = (ushort)*pbVar8;
      bVar1 = pbVar8[1];
      do {
        bVar2 = pbVar8[2];
        iVar9 = iVar9 + -1;
        puVar7[1] = (ushort)bVar1;
        bVar1 = pbVar8[3];
        puVar7 = puVar7 + 2;
        *puVar7 = (ushort)bVar2;
        pbVar8 = pbVar8 + 2;
      } while (iVar9 != 0);
      pbVar8 = (byte *)(iVar3 + uVar6 + 200);
      *DAT_8000baf8 = (ushort)*(byte *)(iVar3 + uVar6 + 0xc3);
      puVar7 = DAT_8000bafc;
      iVar5 = 0x57;
      *DAT_8000bafc = (ushort)*pbVar8;
      bVar1 = pbVar8[1];
      do {
        bVar2 = pbVar8[2];
        iVar5 = iVar5 + -1;
        puVar7[1] = (ushort)bVar1;
        bVar1 = pbVar8[3];
        puVar7 = puVar7 + 2;
        *puVar7 = (ushort)bVar2;
        pbVar8 = pbVar8 + 2;
      } while (iVar5 != 0);
      *DAT_8000bb00 = (ushort)*(byte *)(iVar3 + uVar6 + 0x177);
      return;
    }
    uVar6 = uVar6 + 400;
  } while (uVar6 < DAT_8000bae8);
  return;
}



void FUN_8000bb04(uint param_1)

{
  uint uVar1;
  int iVar2;
  undefined2 *puVar3;
  uint uVar4;
  undefined2 *puVar5;
  
  uVar4 = 0;
  uVar1 = 0;
  do {
    if (*(ushort *)(DAT_8000bbec + uVar1 * 2 + 0x1e) == param_1) {
      uVar4 = uVar1;
      if (DAT_8000bbf0 <= uVar1) goto LAB_8000bb94;
      break;
    }
    uVar1 = uVar1 + 1 & 0xfffeffff;
  } while (uVar1 < 1000);
  iVar2 = DAT_8000bbec + uVar4 * 2;
  uVar4 = DAT_8000bbf0 - uVar4;
  puVar5 = (undefined2 *)(iVar2 + 0x1e);
  puVar3 = (undefined2 *)(iVar2 + 0x1c);
  if ((uVar4 & 1) != 0) {
    puVar5 = (undefined2 *)(iVar2 + 0x20);
    puVar3 = (undefined2 *)(iVar2 + 0x1e);
    *puVar3 = *puVar5;
  }
  uVar4 = uVar4 * 0x8000 >> 0x10;
  while (uVar4 != 0) {
    puVar3[1] = puVar5[1];
    puVar5 = puVar5 + 2;
    uVar4 = uVar4 - 1 & 0xffff;
    puVar3 = puVar3 + 2;
    *puVar3 = *puVar5;
  }
LAB_8000bb94:
  uVar4 = DAT_8000bbfc;
  iVar2 = DAT_8000bbf8;
  *(undefined2 *)(DAT_8000bbf4 + 0xec) = 0;
  uVar1 = 0;
  do {
    if (CONCAT11(*(undefined *)(iVar2 + uVar1),*(undefined *)(iVar2 + uVar1 + 1)) == param_1) {
      *(undefined *)(iVar2 + uVar1) = 0;
      *(undefined *)(iVar2 + uVar1 + 1) = 0;
      return;
    }
    uVar1 = uVar1 + 400;
  } while (uVar1 < uVar4);
  return;
}



void delay_2(uint loops)

{
  uint uVar1;
  uint uVar2;
  uint extraout_r1;
  
  uVar1 = get_timer_ticks();
  do {
    uVar2 = get_timer_ticks();
  } while (uVar2 - uVar1 < extraout_r1);
  return;
}



void delay(uint time)

{
  bool bVar1;
  undefined4 uVar2;
  uint uVar3;
  uint local_18;
  
  uVar2 = FUN_8003a370(time);
  FUN_8003a44c(uVar2,DAT_8000bcb4);
  uVar3 = FUN_8003a31c();
  local_18 = 0;
  while (local_18 < uVar3) {
    bVar1 = false;
    while (!bVar1) {
      bVar1 = true;
    }
    local_18 = local_18 + 1;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack
// WARNING: Unknown calling convention yet parameter storage is locked

void display_battery_status(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  ushort xend;
  
  set_frame_to_global_pointer();
  set_display_fg_color(0xffffff);
  display_fill_rect(0x2c0,5,0x2d5,0x11);
  display_fill_rect(0x2be,9,0x2c1,0xd);
  iVar1 = DAT_8000bde4;
  if (*(byte *)(DAT_8000bde4 + 0x38) < 4) {
    uVar3 = 0xff0000;
  }
  else {
    uVar3 = 0xbb00;
  }
  set_display_fg_color(uVar3);
  if (0x14 < *(byte *)(iVar1 + 0x38)) {
    *(undefined *)(iVar1 + 0x38) = 0x14;
  }
  if (*(char *)(iVar1 + 0x38) != '\0') {
    display_fill_rect(0x2d5 - *(byte *)(iVar1 + 0x38),6,0x2d4,0x10);
  }
  if (*(char *)(iVar1 + 0x39) != '\0') {
    set_display_fg_color(DAT_8000bde8);
    xend = (ushort)DAT_8000bdec;
    display_draw_horz_line(10,0x2c4,xend);
    display_draw_horz_line(0xb,0x2c4,xend);
    display_draw_horz_line(0xc,0x2c4,xend);
    display_draw_vert_line(xend | 1,8,0xe);
    display_draw_vert_line(0x2d0,9,0xd);
    display_draw_vert_line(xend + 3,10,0xc);
    display_draw_vert_line(xend + 4,0xb,0xb);
  }
  iVar2 = Start_Of_Screen_Mem;
  iVar1 = Screen_Frame_Buffer;
  uVar3 = 5;
  do {
    iVar4 = uVar3 * 800 + 0x2be;
    copy_short((void *)(iVar2 + iVar4 * 2),(void *)(iVar1 + iVar4 * 2),0x18);
    uVar3 = uVar3 + 1;
  } while (uVar3 < 0x24);
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_right_menu(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  ushort xend;
  ushort yend;
  uint uVar4;
  int iVar5;
  int iVar6;
  
  iVar1 = DAT_8000bf1c;
  iVar5 = DAT_8000bf20 + 0x140;
  iVar6 = DAT_8000bf20 + 0xf8;
  xend = (ushort)iVar5;
  yend = (ushort)DAT_8000bf20;
  if (*(char *)(DAT_8000bf1c + 0x42) == '\0') {
    set_frame_to_global_pointer();
    set_display_fg_color(0);
    display_fill_rect((ushort)iVar6,0,xend,yend);
    empty_func_6();
    display_ctrl_button(0);
    if (*(char *)(iVar1 + 0x43) == '\0') {
      display_run_stop_button(0);
      display_auto_set_button(0);
      display_save_wave_button(0);
    }
    else {
      display_page_up_button(0);
      display_page_down_button(0);
      display_delete_wave_button(0);
    }
    display_t_cursor_button(0);
    display_v_cursor_button(0);
    display_measures_button(0);
    display_save_pic_button(0);
  }
  else {
    set_frame_to_global_pointer();
    set_display_fg_color(0);
    display_fill_rect((ushort)iVar6,0,xend,yend);
    empty_func_6();
    display_ctrl_button(0);
    display_ch1_sensitivity_control(0,0);
    display_ch2_sensitivity_control(0,0);
    if (*(char *)(iVar1 + 0x43) == '\0') {
      display_50_trigger_button(0);
    }
    else {
      display_show_grid_button(0);
    }
  }
  iVar2 = Start_Of_Screen_Mem;
  iVar1 = Screen_Frame_Buffer;
  uVar4 = 0;
  do {
    iVar3 = iVar6 + uVar4 * 800;
    copy_short((void *)(iVar2 + iVar3 * 2),(void *)(iVar1 + iVar3 * 2),(iVar5 - iVar6) + 1);
    uVar4 = uVar4 + 1;
  } while (uVar4 < 0x1e0);
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_auto_set_button(int mode)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  ushort *puVar6;
  int iVar7;
  uint uVar8;
  undefined2 *puVar9;
  int iVar10;
  ushort *puVar11;
  uint uVar12;
  
  puVar1 = PTR_DAT_8000c0bc;
  uVar8 = *(uint *)(PTR_DAT_8000c0bc + 4);
  *(ushort *)PTR_DAT_8000c0bc =
       (ushort)(((uVar8 << 0x10) >> 0x1a) << 5) | (ushort)((uVar8 >> 0x13) << 0xb) |
       (ushort)((uVar8 << 0x18) >> 0x1b);
  uVar8 = *(uint *)(puVar1 + 8);
  *(ushort *)(puVar1 + 2) =
       (ushort)((uVar8 << 0x18) >> 0x1b) |
       (ushort)((uVar8 >> 0x13) << 0xb) | (ushort)(((uVar8 << 0x10) >> 0x1a) << 5);
  set_frame_to_global_pointer();
  uVar8 = DAT_8000c0cc;
  iVar4 = DAT_8000c0c8;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_TEXT_BITMAP_AUTO_SET_8000c0c0;
  if (mode == 0) {
    uVar12 = 0;
    do {
      iVar10 = 0x3c;
      puVar6 = (ushort *)(*piVar3 + uVar12 * 0x640 + iVar4);
      puVar11 = (ushort *)(puVar2 + uVar12 * 0x78);
      do {
        uVar5 = *puVar11;
        if (uVar5 == uVar8) {
          uVar5 = *(ushort *)puVar1;
        }
        iVar10 = iVar10 + -1;
        *puVar6 = uVar5;
        puVar6 = puVar6 + 1;
        puVar11 = puVar11 + 1;
      } while (iVar10 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x37);
    set_display_fg_color(DAT_8000c0d0);
    display_draw_rounded_rect(0x2e3,0x7d,0x316,0xaf,2);
  }
  else {
    set_display_fg_color(*(uint *)(puVar1 + 8));
    display_fill_rounded_rect(0x2e3,0x7d,0x316,0xaf,2);
    uVar12 = 0;
    do {
      iVar10 = 0x3c;
      puVar9 = (undefined2 *)(*piVar3 + uVar12 * 0x640 + iVar4);
      puVar6 = (ushort *)(puVar2 + uVar12 * 0x78);
      do {
        if (*puVar6 == uVar8) {
          *puVar9 = 0;
        }
        iVar10 = iVar10 + -1;
        puVar9 = puVar9 + 1;
        puVar6 = puVar6 + 1;
      } while (iVar10 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x37);
  }
  iVar10 = Start_Of_Screen_Mem;
  iVar4 = Screen_Frame_Buffer;
  uVar8 = 0x7b;
  do {
    iVar7 = uVar8 * 800 + 0x2df;
    copy_short((void *)(iVar10 + iVar7 * 2),(void *)(iVar4 + iVar7 * 2),0x40);
    uVar8 = uVar8 + 1;
  } while (uVar8 < 0xb2);
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_ch1_sensitivity_control(int type,int mode)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  uint uVar6;
  short *psVar7;
  int iVar8;
  short *psVar9;
  short sVar10;
  ushort *puVar11;
  ushort *puVar12;
  int count;
  int iVar13;
  uint uVar14;
  
  puVar1 = PTR_DAT_8000c2a0;
  uVar6 = *(uint *)(PTR_DAT_8000c2a0 + 4);
  *(ushort *)PTR_DAT_8000c2a0 =
       (ushort)(((uVar6 << 0x10) >> 0x1a) << 5) | (ushort)((uVar6 >> 0x13) << 0xb) |
       (ushort)((uVar6 << 0x18) >> 0x1b);
  uVar6 = *(uint *)(puVar1 + 8);
  *(ushort *)(puVar1 + 2) =
       (ushort)((uVar6 >> 0x13) << 0xb) | (ushort)(((uVar6 << 0x10) >> 0x1a) << 5) |
       (ushort)((uVar6 << 0x18) >> 0x1b);
  set_frame_to_global_pointer();
  iVar4 = DAT_8000c2b0;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_TEXT_BITMAP_VOLT_DIV_8000c2a8;
  uVar6 = DAT_8000c2a4;
  uVar14 = 0;
  do {
    iVar13 = 0x3c;
    puVar11 = (ushort *)((*piVar3 + uVar14 * 0x640) - iVar4);
    puVar12 = (ushort *)(puVar2 + uVar14 * 0x78);
    do {
      uVar5 = *puVar12;
      if (uVar5 == uVar6) {
        uVar5 = *(ushort *)puVar1;
      }
      iVar13 = iVar13 + -1;
      *puVar11 = uVar5;
      puVar11 = puVar11 + 1;
      puVar12 = puVar12 + 1;
    } while (iVar13 != 0);
    uVar14 = uVar14 + 1 & 0xfffeffff;
  } while (uVar14 < 0xb0);
  set_display_fg_color(0);
  set_font_paint_mode(2);
  select_font(PTR_FONT_2_8000c2b4);
  display_text(&DAT_8000c2bc,(ushort)DAT_8000c2b8,0x90);
  if (type == 0) {
    if (mode != 0) {
      uVar6 = 0xf;
      do {
        iVar13 = 0x3c;
        psVar7 = (short *)((*piVar3 + uVar6 * 0x640) - iVar4);
        psVar9 = (short *)(puVar2 + uVar6 * 0x78);
        do {
          sVar10 = *psVar9;
          if (sVar10 == 0) {
            sVar10 = *(short *)(puVar1 + 2);
          }
          iVar13 = iVar13 + -1;
          *psVar7 = sVar10;
          psVar7 = psVar7 + 1;
          psVar9 = psVar9 + 1;
        } while (iVar13 != 0);
        uVar6 = uVar6 + 1 & 0xfffeffff;
      } while (uVar6 < 0x4c);
    }
  }
  else {
    if (mode != 0) {
      uVar6 = 100;
      do {
        iVar13 = 0x3c;
        psVar7 = (short *)(puVar2 + uVar6 * 0x78);
        psVar9 = (short *)((*piVar3 + uVar6 * 0x640) - iVar4);
        do {
          sVar10 = *psVar7;
          if (sVar10 == 0) {
            sVar10 = *(short *)(puVar1 + 2);
          }
          iVar13 = iVar13 + -1;
          *psVar9 = sVar10;
          psVar7 = psVar7 + 1;
          psVar9 = psVar9 + 1;
        } while (iVar13 != 0);
        uVar6 = uVar6 + 1 & 0xfffeffff;
      } while (uVar6 < 0xa1);
    }
  }
  iVar13 = Start_Of_Screen_Mem;
  iVar4 = Screen_Frame_Buffer;
  count = DAT_8000c2c0 + -0x2de;
  uVar6 = 0x3f;
  do {
    iVar8 = uVar6 * 800 + 0x2df;
    copy_short((void *)(iVar13 + iVar8 * 2),(void *)(iVar4 + iVar8 * 2),count);
    uVar6 = uVar6 + 1;
  } while (uVar6 < 0xef);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_ch2_sensitivity_control(int type,int mode)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  uint uVar6;
  short *psVar7;
  int iVar8;
  short *psVar9;
  short sVar10;
  ushort *puVar11;
  ushort *puVar12;
  int count;
  int iVar13;
  uint uVar14;
  
  puVar1 = PTR_DAT_8000c490;
  uVar6 = *(uint *)(PTR_DAT_8000c490 + 4);
  *(ushort *)PTR_DAT_8000c490 =
       (ushort)(((uVar6 << 0x10) >> 0x1a) << 5) | (ushort)((uVar6 >> 0x13) << 0xb) |
       (ushort)((uVar6 << 0x18) >> 0x1b);
  uVar6 = *(uint *)(puVar1 + 8);
  *(ushort *)(puVar1 + 2) =
       (ushort)((uVar6 >> 0x13) << 0xb) | (ushort)(((uVar6 << 0x10) >> 0x1a) << 5) |
       (ushort)((uVar6 << 0x18) >> 0x1b);
  set_frame_to_global_pointer();
  iVar4 = DAT_8000c4a0;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_TEXT_BITMAP_VOLT_DIV_8000c498;
  uVar6 = DAT_8000c494;
  uVar14 = 0;
  do {
    iVar13 = 0x3c;
    puVar11 = (ushort *)(*piVar3 + uVar14 * 0x640 + iVar4);
    puVar12 = (ushort *)(puVar2 + uVar14 * 0x78);
    do {
      uVar5 = *puVar12;
      if (uVar5 == uVar6) {
        uVar5 = *(ushort *)puVar1;
      }
      iVar13 = iVar13 + -1;
      *puVar11 = uVar5;
      puVar11 = puVar11 + 1;
      puVar12 = puVar12 + 1;
    } while (iVar13 != 0);
    uVar14 = uVar14 + 1 & 0xfffeffff;
  } while (uVar14 < 0xb0);
  set_display_fg_color(0);
  set_font_paint_mode(2);
  select_font(PTR_FONT_2_8000c4a4);
  display_text(&DAT_8000c4ac,(ushort)DAT_8000c4a8,0x144);
  if (type == 0) {
    if (mode != 0) {
      uVar6 = 0xf;
      do {
        iVar13 = 0x3c;
        psVar7 = (short *)(*piVar3 + uVar6 * 0x640 + iVar4);
        psVar9 = (short *)(puVar2 + uVar6 * 0x78);
        do {
          sVar10 = *psVar9;
          if (sVar10 == 0) {
            sVar10 = *(short *)(puVar1 + 2);
          }
          iVar13 = iVar13 + -1;
          *psVar7 = sVar10;
          psVar7 = psVar7 + 1;
          psVar9 = psVar9 + 1;
        } while (iVar13 != 0);
        uVar6 = uVar6 + 1 & 0xfffeffff;
      } while (uVar6 < 0x4c);
    }
  }
  else {
    if (mode != 0) {
      uVar6 = 100;
      do {
        iVar13 = 0x3c;
        psVar7 = (short *)(puVar2 + uVar6 * 0x78);
        psVar9 = (short *)(*piVar3 + uVar6 * 0x640 + iVar4);
        do {
          sVar10 = *psVar7;
          if (sVar10 == 0) {
            sVar10 = *(short *)(puVar1 + 2);
          }
          iVar13 = iVar13 + -1;
          *psVar9 = sVar10;
          psVar7 = psVar7 + 1;
          psVar9 = psVar9 + 1;
        } while (iVar13 != 0);
        uVar6 = uVar6 + 1 & 0xfffeffff;
      } while (uVar6 < 0xa1);
    }
  }
  iVar13 = Start_Of_Screen_Mem;
  iVar4 = Screen_Frame_Buffer;
  uVar6 = DAT_8000c4b0;
  uVar14 = 0xf3;
  count = DAT_8000c4b4 + -0x2de;
  if (DAT_8000c4b0 < 0xf4) {
    return;
  }
  do {
    iVar8 = uVar14 * 800 + 0x2df;
    copy_short((void *)(iVar13 + iVar8 * 2),(void *)(iVar4 + iVar8 * 2),count);
    uVar14 = uVar14 + 1;
  } while (uVar14 < uVar6);
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_ctrl_button(int mode)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  ushort *puVar7;
  int iVar8;
  undefined2 *puVar9;
  int iVar10;
  
  set_frame_to_global_pointer();
  puVar1 = PTR_DAT_8000c678;
  uVar5 = *(uint *)(PTR_DAT_8000c678 + 4);
  *(ushort *)PTR_DAT_8000c678 =
       (ushort)(((uVar5 << 0x10) >> 0x1a) << 5) | (ushort)((uVar5 >> 0x13) << 0xb) |
       (ushort)((uVar5 << 0x18) >> 0x1b);
  uVar5 = DAT_8000c684;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_TEXT_BITMAP_CTRL_8000c67c;
  uVar6 = *(uint *)(puVar1 + 8);
  *(ushort *)(puVar1 + 2) =
       (ushort)((uVar6 >> 0x13) << 0xb) | (ushort)(((uVar6 << 0x10) >> 0x1a) << 5) |
       (ushort)((uVar6 << 0x18) >> 0x1b);
  if (mode == 0) {
    set_display_fg_color(DAT_8000c688);
    display_fill_rounded_rect(0x2e3,5,0x316,0x37,2);
    set_display_fg_color(DAT_8000c68c);
    display_draw_rounded_rect(0x2e3,5,0x316,0x37,2);
    uVar6 = 0;
    do {
      iVar10 = 0x3c;
      puVar9 = (undefined2 *)(*piVar3 + uVar6 * 0x640 + 0x187e);
      puVar7 = (ushort *)(puVar2 + uVar6 * 0x78);
      do {
        if (*puVar7 == uVar5) {
          *puVar9 = *(undefined2 *)puVar1;
        }
        iVar10 = iVar10 + -1;
        puVar9 = puVar9 + 1;
        puVar7 = puVar7 + 1;
      } while (iVar10 != 0);
      uVar6 = uVar6 + 1 & 0xfffeffff;
    } while (uVar6 < 0x37);
  }
  else {
    set_display_fg_color(uVar6);
    display_fill_rounded_rect(0x2e3,5,0x316,0x37,2);
    uVar6 = 0;
    do {
      iVar10 = 0x3c;
      puVar9 = (undefined2 *)(*piVar3 + uVar6 * 0x640 + 0x187e);
      puVar7 = (ushort *)(puVar2 + uVar6 * 0x78);
      do {
        if (*puVar7 == uVar5) {
          *puVar9 = 0;
        }
        iVar10 = iVar10 + -1;
        puVar9 = puVar9 + 1;
        puVar7 = puVar7 + 1;
      } while (iVar10 != 0);
      uVar6 = uVar6 + 1 & 0xfffeffff;
    } while (uVar6 < 0x37);
  }
  iVar4 = Start_Of_Screen_Mem;
  iVar10 = Screen_Frame_Buffer;
  uVar5 = 3;
  do {
    iVar8 = uVar5 * 800 + 0x2df;
    copy_short((void *)(iVar4 + iVar8 * 2),(void *)(iVar10 + iVar8 * 2),0x40);
    uVar5 = uVar5 + 1;
  } while (uVar5 < 0x3a);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_save_pic_button(int mode)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  ushort *puVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  undefined2 *puVar11;
  ushort *puVar12;
  ushort yend;
  uint uVar13;
  int iVar14;
  
  puVar1 = PTR_DAT_8000c828;
  uVar10 = *(uint *)(PTR_DAT_8000c828 + 4);
  uVar13 = 0xf800;
  *(ushort *)PTR_DAT_8000c828 =
       (ushort)((uVar10 << 0x18) >> 0x1b) |
       (ushort)(((uVar10 << 0x10) >> 0x1a) << 5) | (ushort)((uVar10 >> 0x13) << 0xb);
  uVar10 = *(uint *)(puVar1 + 8);
  *(ushort *)(puVar1 + 2) =
       (ushort)((uVar10 >> 0x13) << 0xb) | (ushort)(((uVar10 << 0x10) >> 0x1a) << 5) |
       (ushort)((uVar10 << 0x18) >> 0x1b);
  set_frame_to_global_pointer();
  uVar10 = DAT_8000c83c;
  iVar4 = DAT_8000c838;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_TEXT_BITMAP_SAVE_PIC_8000c830;
  if (mode == 0) {
    uVar13 = 0;
  }
  yend = (ushort)DAT_8000c82c;
  if (mode == 0) {
    do {
      iVar14 = 0x3c;
      puVar6 = (ushort *)(*piVar3 + uVar13 * 0x640 + iVar4);
      puVar12 = (ushort *)(puVar2 + uVar13 * 0x78);
      do {
        uVar5 = *puVar12;
        if (uVar5 == uVar10) {
          uVar5 = *(ushort *)puVar1;
        }
        iVar14 = iVar14 + -1;
        *puVar6 = uVar5;
        puVar6 = puVar6 + 1;
        puVar12 = puVar12 + 1;
      } while (iVar14 != 0);
      uVar13 = uVar13 + 1 & 0xfffeffff;
    } while (uVar13 < 0x37);
    set_display_fg_color(DAT_8000c848);
    display_draw_rounded_rect((ushort)DAT_8000c844,(ushort)DAT_8000c840,0x316,yend,2);
  }
  else {
    set_display_fg_color(*(uint *)(puVar1 + 8));
    display_fill_rounded_rect((ushort)DAT_8000c844,(ushort)DAT_8000c840,0x316,yend,2);
    uVar13 = 0;
    do {
      iVar14 = 0x3c;
      puVar11 = (undefined2 *)(*piVar3 + uVar13 * 0x640 + iVar4);
      puVar6 = (ushort *)(puVar2 + uVar13 * 0x78);
      do {
        if (*puVar6 == uVar10) {
          *puVar11 = 0;
        }
        iVar14 = iVar14 + -1;
        puVar11 = puVar11 + 1;
        puVar6 = puVar6 + 1;
      } while (iVar14 != 0);
      uVar13 = uVar13 + 1 & 0xfffeffff;
    } while (uVar13 < 0x37);
  }
  iVar14 = Start_Of_Screen_Mem;
  iVar4 = Screen_Frame_Buffer;
  uVar10 = DAT_8000c84c;
  uVar13 = DAT_8000c84c - 0x37;
  iVar7 = DAT_8000c84c + 0x13d;
  iVar8 = DAT_8000c84c - iVar7;
  if (DAT_8000c84c <= uVar13) {
    return;
  }
  do {
    iVar9 = iVar7 + uVar13 * 800;
    copy_short((void *)(iVar14 + iVar9 * 2),(void *)(iVar4 + iVar9 * 2),iVar8 + 0x17d);
    uVar13 = uVar13 + 1;
  } while (uVar13 < uVar10);
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_t_cursor_button(int mode)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  ushort *puVar6;
  int iVar7;
  uint uVar8;
  undefined2 *puVar9;
  int iVar10;
  ushort *puVar11;
  uint uVar12;
  
  puVar1 = PTR_DAT_8000c9e8;
  uVar8 = *(uint *)(PTR_DAT_8000c9e8 + 4);
  *(ushort *)PTR_DAT_8000c9e8 =
       (ushort)(((uVar8 << 0x10) >> 0x1a) << 5) | (ushort)((uVar8 >> 0x13) << 0xb) |
       (ushort)((uVar8 << 0x18) >> 0x1b);
  uVar8 = *(uint *)(puVar1 + 8);
  *(ushort *)(puVar1 + 2) =
       (ushort)((uVar8 << 0x18) >> 0x1b) |
       (ushort)((uVar8 >> 0x13) << 0xb) | (ushort)(((uVar8 << 0x10) >> 0x1a) << 5);
  set_frame_to_global_pointer();
  uVar8 = DAT_8000c9f8;
  iVar4 = DAT_8000c9f4;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_TEXT_BITMAP_T_CURSOR_8000c9ec;
  if (mode == 0) {
    uVar12 = 0;
    do {
      iVar10 = 0x3c;
      puVar6 = (ushort *)(*piVar3 + uVar12 * 0x640 + iVar4);
      puVar11 = (ushort *)(puVar2 + uVar12 * 0x78);
      do {
        uVar5 = *puVar11;
        if (uVar5 == uVar8) {
          uVar5 = *(ushort *)puVar1;
        }
        iVar10 = iVar10 + -1;
        *puVar6 = uVar5;
        puVar6 = puVar6 + 1;
        puVar11 = puVar11 + 1;
      } while (iVar10 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x37);
    set_display_fg_color(DAT_8000c9fc);
    display_draw_rounded_rect(0x2e3,0xb9,0x316,0xeb,2);
  }
  else {
    set_display_fg_color(*(uint *)(puVar1 + 8));
    display_fill_rounded_rect(0x2e3,0xb9,0x316,0xeb,2);
    uVar12 = 0;
    do {
      iVar10 = 0x3c;
      puVar9 = (undefined2 *)(*piVar3 + uVar12 * 0x640 + iVar4);
      puVar6 = (ushort *)(puVar2 + uVar12 * 0x78);
      do {
        if (*puVar6 == uVar8) {
          *puVar9 = 0;
        }
        iVar10 = iVar10 + -1;
        puVar9 = puVar9 + 1;
        puVar6 = puVar6 + 1;
      } while (iVar10 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x37);
  }
  iVar10 = Start_Of_Screen_Mem;
  iVar4 = Screen_Frame_Buffer;
  uVar8 = 0xb7;
  do {
    iVar7 = uVar8 * 800 + 0x2df;
    copy_short((void *)(iVar10 + iVar7 * 2),(void *)(iVar4 + iVar7 * 2),0x40);
    uVar8 = uVar8 + 1;
  } while (uVar8 < 0xee);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_measures_button(int mode)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  ushort *puVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  undefined2 *puVar11;
  ushort *puVar12;
  ushort yend;
  uint uVar13;
  int iVar14;
  
  puVar1 = PTR_DAT_8000cb98;
  uVar10 = *(uint *)(PTR_DAT_8000cb98 + 4);
  uVar13 = 0xf800;
  *(ushort *)PTR_DAT_8000cb98 =
       (ushort)((uVar10 << 0x18) >> 0x1b) |
       (ushort)(((uVar10 << 0x10) >> 0x1a) << 5) | (ushort)((uVar10 >> 0x13) << 0xb);
  uVar10 = *(uint *)(puVar1 + 8);
  *(ushort *)(puVar1 + 2) =
       (ushort)((uVar10 >> 0x13) << 0xb) | (ushort)(((uVar10 << 0x10) >> 0x1a) << 5) |
       (ushort)((uVar10 << 0x18) >> 0x1b);
  set_frame_to_global_pointer();
  uVar10 = DAT_8000cbac;
  iVar4 = DAT_8000cba8;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_TEXT_BITMAP_MEASURES_8000cba0;
  if (mode == 0) {
    uVar13 = 0;
  }
  yend = (ushort)DAT_8000cb9c;
  if (mode == 0) {
    do {
      iVar14 = 0x3c;
      puVar6 = (ushort *)(*piVar3 + uVar13 * 0x640 + iVar4);
      puVar12 = (ushort *)(puVar2 + uVar13 * 0x78);
      do {
        uVar5 = *puVar12;
        if (uVar5 == uVar10) {
          uVar5 = *(ushort *)puVar1;
        }
        iVar14 = iVar14 + -1;
        *puVar6 = uVar5;
        puVar6 = puVar6 + 1;
        puVar12 = puVar12 + 1;
      } while (iVar14 != 0);
      uVar13 = uVar13 + 1 & 0xfffeffff;
    } while (uVar13 < 0x37);
    set_display_fg_color(DAT_8000cbb8);
    display_draw_rounded_rect((ushort)DAT_8000cbb4,(ushort)DAT_8000cbb0,0x316,yend,2);
  }
  else {
    set_display_fg_color(*(uint *)(puVar1 + 8));
    display_fill_rounded_rect((ushort)DAT_8000cbb4,(ushort)DAT_8000cbb0,0x316,yend,2);
    uVar13 = 0;
    do {
      iVar14 = 0x3c;
      puVar11 = (undefined2 *)(*piVar3 + uVar13 * 0x640 + iVar4);
      puVar6 = (ushort *)(puVar2 + uVar13 * 0x78);
      do {
        if (*puVar6 == uVar10) {
          *puVar11 = 0;
        }
        iVar14 = iVar14 + -1;
        puVar11 = puVar11 + 1;
        puVar6 = puVar6 + 1;
      } while (iVar14 != 0);
      uVar13 = uVar13 + 1 & 0xfffeffff;
    } while (uVar13 < 0x37);
  }
  iVar14 = Start_Of_Screen_Mem;
  iVar4 = Screen_Frame_Buffer;
  uVar10 = DAT_8000cbbc;
  uVar13 = DAT_8000cbbc - 0x37;
  iVar7 = DAT_8000cbbc + 0x179;
  iVar8 = DAT_8000cbbc - iVar7;
  if (DAT_8000cbbc <= uVar13) {
    return;
  }
  do {
    iVar9 = iVar7 + uVar13 * 800;
    copy_short((void *)(iVar14 + iVar9 * 2),(void *)(iVar4 + iVar9 * 2),iVar8 + 0x1b9);
    uVar13 = uVar13 + 1;
  } while (uVar13 < uVar10);
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_run_stop_button(int mode)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  ushort *puVar6;
  int iVar7;
  uint uVar8;
  undefined2 *puVar9;
  int iVar10;
  ushort *puVar11;
  uint uVar12;
  uint uVar13;
  
  puVar1 = PTR_DAT_8000cd58;
  uVar8 = *(uint *)(PTR_DAT_8000cd58 + 4);
  *(ushort *)PTR_DAT_8000cd58 =
       (ushort)(((uVar8 << 0x10) >> 0x1a) << 5) | (ushort)((uVar8 >> 0x13) << 0xb) |
       (ushort)((uVar8 << 0x18) >> 0x1b);
  uVar8 = *(uint *)(puVar1 + 8);
  *(ushort *)(puVar1 + 2) =
       (ushort)((uVar8 << 0x18) >> 0x1b) |
       (ushort)((uVar8 >> 0x13) << 0xb) | (ushort)(((uVar8 << 0x10) >> 0x1a) << 5);
  set_frame_to_global_pointer();
  uVar8 = DAT_8000cd64;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_TEXT_BITMAP_RUN_STOP_8000cd5c;
  uVar13 = DAT_8000cd64 >> 0x10 | 0x2e3;
  if (mode == 0) {
    uVar12 = 0;
    do {
      iVar10 = 0x3c;
      puVar6 = (ushort *)((*piVar3 + uVar12 * 0x640) - uVar8);
      puVar11 = (ushort *)(puVar2 + uVar12 * 0x78);
      do {
        uVar5 = *puVar11;
        if (uVar5 == uVar13) {
          uVar5 = *(ushort *)puVar1;
        }
        iVar10 = iVar10 + -1;
        *puVar6 = uVar5;
        puVar6 = puVar6 + 1;
        puVar11 = puVar11 + 1;
      } while (iVar10 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x37);
    set_display_fg_color(DAT_8000cd68);
    display_draw_rounded_rect(0x2e3,0x41,0x316,0x73,2);
  }
  else {
    set_display_fg_color(*(uint *)(puVar1 + 8));
    display_fill_rounded_rect(0x2e3,0x41,0x316,0x73,2);
    uVar12 = 0;
    do {
      iVar10 = 0x3c;
      puVar9 = (undefined2 *)((*piVar3 + uVar12 * 0x640) - uVar8);
      puVar6 = (ushort *)(puVar2 + uVar12 * 0x78);
      do {
        if (*puVar6 == uVar13) {
          *puVar9 = 0;
        }
        iVar10 = iVar10 + -1;
        puVar9 = puVar9 + 1;
        puVar6 = puVar6 + 1;
      } while (iVar10 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x37);
  }
  iVar4 = Start_Of_Screen_Mem;
  iVar10 = Screen_Frame_Buffer;
  uVar8 = 0x3f;
  do {
    iVar7 = uVar8 * 800 + 0x2df;
    copy_short((void *)(iVar4 + iVar7 * 2),(void *)(iVar10 + iVar7 * 2),0x40);
    uVar8 = uVar8 + 1;
  } while (uVar8 < 0x76);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_save_wave_button(int mode)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  ushort *puVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  undefined2 *puVar11;
  ushort *puVar12;
  ushort yend;
  uint uVar13;
  int iVar14;
  
  puVar1 = PTR_DAT_8000cf04;
  uVar10 = *(uint *)(PTR_DAT_8000cf04 + 4);
  uVar13 = 0xf800;
  *(ushort *)PTR_DAT_8000cf04 =
       (ushort)((uVar10 << 0x18) >> 0x1b) |
       (ushort)(((uVar10 << 0x10) >> 0x1a) << 5) | (ushort)((uVar10 >> 0x13) << 0xb);
  uVar10 = *(uint *)(puVar1 + 8);
  *(ushort *)(puVar1 + 2) =
       (ushort)((uVar10 >> 0x13) << 0xb) | (ushort)(((uVar10 << 0x10) >> 0x1a) << 5) |
       (ushort)((uVar10 << 0x18) >> 0x1b);
  set_frame_to_global_pointer();
  uVar10 = DAT_8000cf18;
  iVar4 = DAT_8000cf14;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_TEXT_BITMAP_SAVE_WAVE_8000cf0c;
  if (mode == 0) {
    uVar13 = 0;
  }
  yend = (ushort)DAT_8000cf08;
  if (mode == 0) {
    do {
      iVar14 = 0x3c;
      puVar6 = (ushort *)(*piVar3 + uVar13 * 0x640 + iVar4);
      puVar12 = (ushort *)(puVar2 + uVar13 * 0x78);
      do {
        uVar5 = *puVar12;
        if (uVar5 == uVar10) {
          uVar5 = *(ushort *)puVar1;
        }
        iVar14 = iVar14 + -1;
        *puVar6 = uVar5;
        puVar6 = puVar6 + 1;
        puVar12 = puVar12 + 1;
      } while (iVar14 != 0);
      uVar13 = uVar13 + 1 & 0xfffeffff;
    } while (uVar13 < 0x37);
    set_display_fg_color(DAT_8000cf24);
    display_draw_rounded_rect((ushort)DAT_8000cf20,(ushort)DAT_8000cf1c,0x316,yend,2);
  }
  else {
    set_display_fg_color(*(uint *)(puVar1 + 8));
    display_fill_rounded_rect((ushort)DAT_8000cf20,(ushort)DAT_8000cf1c,0x316,yend,2);
    uVar13 = 0;
    do {
      iVar14 = 0x3c;
      puVar11 = (undefined2 *)(*piVar3 + uVar13 * 0x640 + iVar4);
      puVar6 = (ushort *)(puVar2 + uVar13 * 0x78);
      do {
        if (*puVar6 == uVar10) {
          *puVar11 = 0;
        }
        iVar14 = iVar14 + -1;
        puVar11 = puVar11 + 1;
        puVar6 = puVar6 + 1;
      } while (iVar14 != 0);
      uVar13 = uVar13 + 1 & 0xfffeffff;
    } while (uVar13 < 0x37);
  }
  iVar14 = Start_Of_Screen_Mem;
  iVar4 = Screen_Frame_Buffer;
  uVar10 = DAT_8000cf28;
  uVar13 = DAT_8000cf28 - 0x37;
  iVar7 = DAT_8000cf28 + 0x101;
  iVar8 = DAT_8000cf28 - iVar7;
  if (DAT_8000cf28 <= uVar13) {
    return;
  }
  do {
    iVar9 = iVar7 + uVar13 * 800;
    copy_short((void *)(iVar14 + iVar9 * 2),(void *)(iVar4 + iVar9 * 2),iVar8 + 0x141);
    uVar13 = uVar13 + 1;
  } while (uVar13 < uVar10);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_50_trigger_button(int mode)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  ushort *puVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  undefined2 *puVar11;
  ushort *puVar12;
  ushort yend;
  uint uVar13;
  int iVar14;
  
  puVar1 = PTR_DAT_8000d0c4;
  uVar10 = *(uint *)(PTR_DAT_8000d0c4 + 4);
  uVar13 = 0xf800;
  *(ushort *)PTR_DAT_8000d0c4 =
       (ushort)((uVar10 << 0x18) >> 0x1b) |
       (ushort)(((uVar10 << 0x10) >> 0x1a) << 5) | (ushort)((uVar10 >> 0x13) << 0xb);
  uVar10 = *(uint *)(puVar1 + 8);
  *(ushort *)(puVar1 + 2) =
       (ushort)((uVar10 >> 0x13) << 0xb) | (ushort)(((uVar10 << 0x10) >> 0x1a) << 5) |
       (ushort)((uVar10 << 0x18) >> 0x1b);
  set_frame_to_global_pointer();
  uVar10 = DAT_8000d0d8;
  iVar4 = DAT_8000d0d4;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_TEXT_BITMAP_50__TRIG_8000d0cc;
  if (mode == 0) {
    uVar13 = 0;
  }
  yend = (ushort)DAT_8000d0c8;
  if (mode == 0) {
    do {
      iVar14 = 0x3c;
      puVar6 = (ushort *)(*piVar3 + uVar13 * 0x640 + iVar4);
      puVar12 = (ushort *)(puVar2 + uVar13 * 0x78);
      do {
        uVar5 = *puVar12;
        if (uVar5 == uVar10) {
          uVar5 = *(ushort *)puVar1;
        }
        iVar14 = iVar14 + -1;
        *puVar6 = uVar5;
        puVar6 = puVar6 + 1;
        puVar12 = puVar12 + 1;
      } while (iVar14 != 0);
      uVar13 = uVar13 + 1 & 0xfffeffff;
    } while (uVar13 < 0x37);
    set_display_fg_color(DAT_8000d0e4);
    display_draw_rounded_rect((ushort)DAT_8000d0e0,(ushort)DAT_8000d0dc,0x316,yend,2);
  }
  else {
    set_display_fg_color(*(uint *)(puVar1 + 8));
    display_fill_rounded_rect((ushort)DAT_8000d0e0,(ushort)DAT_8000d0dc,0x316,yend,2);
    uVar13 = 0;
    do {
      iVar14 = 0x3c;
      puVar11 = (undefined2 *)(*piVar3 + uVar13 * 0x640 + iVar4);
      puVar6 = (ushort *)(puVar2 + uVar13 * 0x78);
      do {
        if (*puVar6 == uVar10) {
          *puVar11 = *(undefined2 *)(puVar1 + 2);
        }
        iVar14 = iVar14 + -1;
        puVar11 = puVar11 + 1;
        puVar6 = puVar6 + 1;
      } while (iVar14 != 0);
      uVar13 = uVar13 + 1 & 0xfffeffff;
    } while (uVar13 < 0x37);
  }
  iVar14 = Start_Of_Screen_Mem;
  iVar4 = Screen_Frame_Buffer;
  uVar10 = DAT_8000d0e8;
  uVar13 = DAT_8000d0e8 - 0x37;
  iVar7 = DAT_8000d0e8 + 0x101;
  iVar8 = DAT_8000d0e8 - iVar7;
  if (DAT_8000d0e8 <= uVar13) {
    return;
  }
  do {
    iVar9 = iVar7 + uVar13 * 800;
    copy_short((void *)(iVar14 + iVar9 * 2),(void *)(iVar4 + iVar9 * 2),iVar8 + 0x141);
    uVar13 = uVar13 + 1;
  } while (uVar13 < uVar10);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_v_cursor_button(int mode)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  ushort *puVar6;
  int iVar7;
  uint uVar8;
  undefined2 *puVar9;
  ushort *puVar10;
  ushort yend;
  uint uVar11;
  int iVar12;
  int count;
  
  puVar1 = PTR_DAT_8000d284;
  uVar8 = *(uint *)(PTR_DAT_8000d284 + 4);
  uVar11 = 0xf800;
  *(ushort *)PTR_DAT_8000d284 =
       (ushort)(((uVar8 << 0x10) >> 0x1a) << 5) | (ushort)((uVar8 >> 0x13) << 0xb) |
       (ushort)((uVar8 << 0x18) >> 0x1b);
  uVar8 = *(uint *)(puVar1 + 8);
  *(ushort *)(puVar1 + 2) =
       (ushort)((uVar8 << 0x18) >> 0x1b) |
       (ushort)((uVar8 >> 0x13) << 0xb) | (ushort)(((uVar8 << 0x10) >> 0x1a) << 5);
  set_frame_to_global_pointer();
  uVar8 = DAT_8000d298;
  iVar4 = DAT_8000d294;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_TEXT_BITMAP_V_CURSOR_8000d28c;
  if (mode == 0) {
    uVar11 = 0;
  }
  yend = (ushort)DAT_8000d288;
  if (mode == 0) {
    do {
      iVar12 = 0x3c;
      puVar6 = (ushort *)(*piVar3 + uVar11 * 0x640 + iVar4);
      puVar10 = (ushort *)(puVar2 + uVar11 * 0x78);
      do {
        uVar5 = *puVar10;
        if (uVar5 == uVar8) {
          uVar5 = *(ushort *)puVar1;
        }
        iVar12 = iVar12 + -1;
        *puVar6 = uVar5;
        puVar6 = puVar6 + 1;
        puVar10 = puVar10 + 1;
      } while (iVar12 != 0);
      uVar11 = uVar11 + 1 & 0xfffeffff;
    } while (uVar11 < 0x37);
    set_display_fg_color(DAT_8000d2a0);
    display_draw_rounded_rect((ushort)DAT_8000d29c,0xf5,0x316,yend,2);
  }
  else {
    set_display_fg_color(*(uint *)(puVar1 + 8));
    display_fill_rounded_rect((ushort)DAT_8000d29c,0xf5,0x316,yend,2);
    uVar11 = 0;
    do {
      iVar12 = 0x3c;
      puVar9 = (undefined2 *)(*piVar3 + uVar11 * 0x640 + iVar4);
      puVar6 = (ushort *)(puVar2 + uVar11 * 0x78);
      do {
        if (*puVar6 == uVar8) {
          *puVar9 = 0;
        }
        iVar12 = iVar12 + -1;
        puVar9 = puVar9 + 1;
        puVar6 = puVar6 + 1;
      } while (iVar12 != 0);
      uVar11 = uVar11 + 1 & 0xfffeffff;
    } while (uVar11 < 0x37);
  }
  iVar12 = Start_Of_Screen_Mem;
  iVar4 = Screen_Frame_Buffer;
  uVar8 = DAT_8000d2a4;
  uVar11 = 0xf3;
  count = DAT_8000d2a4 - 0xea;
  if (DAT_8000d2a4 < 0xf4) {
    return;
  }
  do {
    iVar7 = uVar11 * 800 + 0x2df;
    copy_short((void *)(iVar12 + iVar7 * 2),(void *)(iVar4 + iVar7 * 2),count);
    uVar11 = uVar11 + 1;
  } while (uVar11 < uVar8);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_delete_wave_button(int mode)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  ushort *puVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  undefined2 *puVar11;
  ushort *puVar12;
  ushort yend;
  uint uVar13;
  int iVar14;
  
  puVar1 = PTR_DAT_8000d450;
  uVar10 = *(uint *)(PTR_DAT_8000d450 + 4);
  uVar13 = 0xf800;
  *(ushort *)PTR_DAT_8000d450 =
       (ushort)(((uVar10 << 0x10) >> 0x1a) << 5) | (ushort)((uVar10 >> 0x13) << 0xb) |
       (ushort)((uVar10 << 0x18) >> 0x1b);
  uVar10 = *(uint *)(puVar1 + 8);
  *(ushort *)(puVar1 + 2) =
       (ushort)((uVar10 << 0x18) >> 0x1b) |
       (ushort)((uVar10 >> 0x13) << 0xb) | (ushort)(((uVar10 << 0x10) >> 0x1a) << 5);
  set_frame_to_global_pointer();
  uVar10 = DAT_8000d464;
  iVar4 = DAT_8000d460;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_TEXT_BITMAP_DELETE_WAVE_8000d458;
  if (mode == 0) {
    uVar13 = 0;
  }
  yend = (ushort)DAT_8000d454;
  if (mode == 0) {
    do {
      iVar14 = 0x3c;
      puVar6 = (ushort *)(*piVar3 + uVar13 * 0x640 + iVar4);
      puVar12 = (ushort *)(puVar2 + uVar13 * 0xf0);
      do {
        uVar5 = *puVar12;
        if (uVar5 == uVar10) {
          uVar5 = *(ushort *)puVar1;
        }
        iVar14 = iVar14 + -1;
        *puVar6 = uVar5;
        puVar6 = puVar6 + 1;
        puVar12 = puVar12 + 2;
      } while (iVar14 != 0);
      uVar13 = uVar13 + 1 & 0xfffeffff;
    } while (uVar13 < 0x37);
    set_display_fg_color(DAT_8000d470);
    display_draw_rounded_rect((ushort)DAT_8000d46c,(ushort)DAT_8000d468,0x316,yend,2);
  }
  else {
    set_display_fg_color(*(uint *)(puVar1 + 8));
    display_fill_rounded_rect((ushort)DAT_8000d46c,(ushort)DAT_8000d468,0x316,yend,2);
    uVar13 = 0;
    do {
      iVar14 = 0x3c;
      puVar11 = (undefined2 *)(*piVar3 + uVar13 * 0x640 + iVar4);
      puVar6 = (ushort *)(puVar2 + uVar13 * 0xf0);
      do {
        if (*puVar6 == uVar10) {
          *puVar11 = *(undefined2 *)(puVar1 + 2);
        }
        iVar14 = iVar14 + -1;
        puVar11 = puVar11 + 1;
        puVar6 = puVar6 + 2;
      } while (iVar14 != 0);
      uVar13 = uVar13 + 1 & 0xfffeffff;
    } while (uVar13 < 0x37);
  }
  iVar14 = Start_Of_Screen_Mem;
  iVar4 = Screen_Frame_Buffer;
  uVar10 = DAT_8000d474;
  uVar13 = DAT_8000d474 - 0x37;
  iVar7 = DAT_8000d474 + 0x101;
  iVar8 = DAT_8000d474 - iVar7;
  if (DAT_8000d474 <= uVar13) {
    return;
  }
  do {
    iVar9 = iVar7 + uVar13 * 800;
    copy_short((void *)(iVar14 + iVar9 * 2),(void *)(iVar4 + iVar9 * 2),iVar8 + 0x141);
    uVar13 = uVar13 + 1;
  } while (uVar13 < uVar10);
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_page_up_button(int mode)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  ushort *puVar6;
  int iVar7;
  uint uVar8;
  undefined2 *puVar9;
  ushort *puVar10;
  uint uVar11;
  int iVar12;
  uint uVar13;
  
  puVar1 = PTR_DAT_8000d61c;
  uVar8 = *(uint *)(PTR_DAT_8000d61c + 4);
  *(ushort *)PTR_DAT_8000d61c =
       (ushort)(((uVar8 << 0x10) >> 0x1a) << 5) | (ushort)((uVar8 >> 0x13) << 0xb) |
       (ushort)((uVar8 << 0x18) >> 0x1b);
  uVar8 = *(uint *)(puVar1 + 8);
  *(ushort *)(puVar1 + 2) =
       (ushort)((uVar8 >> 0x13) << 0xb) | (ushort)(((uVar8 << 0x10) >> 0x1a) << 5) |
       (ushort)((uVar8 << 0x18) >> 0x1b);
  set_frame_to_global_pointer();
  uVar8 = DAT_8000d628;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_TEXT_BITMAP_PAGE_UP_8000d620;
  uVar13 = DAT_8000d628 >> 0x10 | 0x2e3;
  if (mode == 0) {
    uVar11 = 0;
    do {
      iVar12 = 0x3c;
      puVar6 = (ushort *)((*piVar3 + uVar11 * 0x640) - uVar8);
      puVar10 = (ushort *)(puVar2 + uVar11 * 0xf0);
      do {
        uVar5 = *puVar10;
        if (uVar5 == uVar13) {
          uVar5 = *(ushort *)puVar1;
        }
        iVar12 = iVar12 + -1;
        *puVar6 = uVar5;
        puVar6 = puVar6 + 1;
        puVar10 = puVar10 + 2;
      } while (iVar12 != 0);
      uVar11 = uVar11 + 1 & 0xfffeffff;
    } while (uVar11 < 0x37);
    set_display_fg_color(DAT_8000d62c);
    display_draw_rounded_rect(0x2e3,0x41,0x316,0x73,2);
  }
  else {
    set_display_fg_color(*(uint *)(puVar1 + 8));
    display_fill_rounded_rect(0x2e3,0x41,0x316,0x73,2);
    uVar11 = 0;
    do {
      iVar12 = 0x3c;
      puVar9 = (undefined2 *)((*piVar3 + uVar11 * 0x640) - uVar8);
      puVar6 = (ushort *)(puVar2 + uVar11 * 0xf0);
      do {
        if (*puVar6 == uVar13) {
          *puVar9 = *(undefined2 *)(puVar1 + 2);
        }
        iVar12 = iVar12 + -1;
        puVar9 = puVar9 + 1;
        puVar6 = puVar6 + 2;
      } while (iVar12 != 0);
      uVar11 = uVar11 + 1 & 0xfffeffff;
    } while (uVar11 < 0x37);
  }
  iVar4 = Start_Of_Screen_Mem;
  iVar12 = Screen_Frame_Buffer;
  uVar8 = 0x3f;
  do {
    iVar7 = uVar8 * 800 + 0x2df;
    copy_short((void *)(iVar4 + iVar7 * 2),(void *)(iVar12 + iVar7 * 2),0x40);
    uVar8 = uVar8 + 1;
  } while (uVar8 < 0x76);
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_page_down_button(int mode)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  ushort *puVar6;
  int iVar7;
  uint uVar8;
  undefined2 *puVar9;
  ushort *puVar10;
  uint uVar11;
  int iVar12;
  
  puVar1 = PTR_DAT_8000d7d4;
  uVar8 = *(uint *)(PTR_DAT_8000d7d4 + 4);
  *(ushort *)PTR_DAT_8000d7d4 =
       (ushort)(((uVar8 << 0x10) >> 0x1a) << 5) | (ushort)((uVar8 >> 0x13) << 0xb) |
       (ushort)((uVar8 << 0x18) >> 0x1b);
  uVar8 = *(uint *)(puVar1 + 8);
  *(ushort *)(puVar1 + 2) =
       (ushort)((uVar8 >> 0x13) << 0xb) | (ushort)(((uVar8 << 0x10) >> 0x1a) << 5) |
       (ushort)((uVar8 << 0x18) >> 0x1b);
  set_frame_to_global_pointer();
  uVar8 = DAT_8000d7e4;
  iVar4 = DAT_8000d7e0;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_TEXT_BITMAP_PAGE_DOWN_8000d7d8;
  if (mode == 0) {
    uVar11 = 0;
    do {
      iVar12 = 0x3c;
      puVar6 = (ushort *)(*piVar3 + uVar11 * 0x640 + iVar4);
      puVar10 = (ushort *)(puVar2 + uVar11 * 0xf0);
      do {
        uVar5 = *puVar10;
        if (uVar5 == uVar8) {
          uVar5 = *(ushort *)puVar1;
        }
        iVar12 = iVar12 + -1;
        *puVar6 = uVar5;
        puVar6 = puVar6 + 1;
        puVar10 = puVar10 + 2;
      } while (iVar12 != 0);
      uVar11 = uVar11 + 1 & 0xfffeffff;
    } while (uVar11 < 0x37);
    set_display_fg_color(DAT_8000d7e8);
    display_draw_rounded_rect(0x2e3,0x7d,0x316,0xaf,2);
  }
  else {
    set_display_fg_color(*(uint *)(puVar1 + 8));
    display_fill_rounded_rect(0x2e3,0x7d,0x316,0xaf,2);
    uVar11 = 0;
    do {
      iVar12 = 0x3c;
      puVar9 = (undefined2 *)(*piVar3 + uVar11 * 0x640 + iVar4);
      puVar6 = (ushort *)(puVar2 + uVar11 * 0xf0);
      do {
        if (*puVar6 == uVar8) {
          *puVar9 = *(undefined2 *)(puVar1 + 2);
        }
        iVar12 = iVar12 + -1;
        puVar9 = puVar9 + 1;
        puVar6 = puVar6 + 2;
      } while (iVar12 != 0);
      uVar11 = uVar11 + 1 & 0xfffeffff;
    } while (uVar11 < 0x37);
  }
  iVar12 = Start_Of_Screen_Mem;
  iVar4 = Screen_Frame_Buffer;
  uVar8 = 0x7b;
  do {
    iVar7 = uVar8 * 800 + 0x2df;
    copy_short((void *)(iVar12 + iVar7 * 2),(void *)(iVar4 + iVar7 * 2),0x40);
    uVar8 = uVar8 + 1;
  } while (uVar8 < 0xb2);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_show_grid_button(int mode)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  ushort *puVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  undefined2 *puVar11;
  ushort *puVar12;
  ushort yend;
  uint uVar13;
  int iVar14;
  
  puVar1 = PTR_DAT_8000d994;
  uVar10 = *(uint *)(PTR_DAT_8000d994 + 4);
  uVar13 = 0xf800;
  *(ushort *)PTR_DAT_8000d994 =
       (ushort)(((uVar10 << 0x10) >> 0x1a) << 5) | (ushort)((uVar10 >> 0x13) << 0xb) |
       (ushort)((uVar10 << 0x18) >> 0x1b);
  uVar10 = *(uint *)(puVar1 + 8);
  *(ushort *)(puVar1 + 2) =
       (ushort)((uVar10 << 0x18) >> 0x1b) |
       (ushort)((uVar10 >> 0x13) << 0xb) | (ushort)(((uVar10 << 0x10) >> 0x1a) << 5);
  set_frame_to_global_pointer();
  uVar10 = DAT_8000d9a8;
  iVar4 = DAT_8000d9a4;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_TEXT_BITMAP_SHOW_GRID_8000d99c;
  if (mode == 0) {
    uVar13 = 0;
  }
  yend = (ushort)DAT_8000d998;
  if (mode == 0) {
    do {
      iVar14 = 0x3c;
      puVar6 = (ushort *)(*piVar3 + uVar13 * 0x640 + iVar4);
      puVar12 = (ushort *)(puVar2 + uVar13 * 0xf0);
      do {
        uVar5 = *puVar12;
        if (uVar5 == uVar10) {
          uVar5 = *(ushort *)puVar1;
        }
        iVar14 = iVar14 + -1;
        *puVar6 = uVar5;
        puVar6 = puVar6 + 1;
        puVar12 = puVar12 + 2;
      } while (iVar14 != 0);
      uVar13 = uVar13 + 1 & 0xfffeffff;
    } while (uVar13 < 0x37);
    set_display_fg_color(DAT_8000d9b4);
    display_draw_rounded_rect((ushort)DAT_8000d9b0,(ushort)DAT_8000d9ac,0x316,yend,2);
  }
  else {
    set_display_fg_color(*(uint *)(puVar1 + 8));
    display_fill_rounded_rect((ushort)DAT_8000d9b0,(ushort)DAT_8000d9ac,0x316,yend,2);
    uVar13 = 0;
    do {
      iVar14 = 0x3c;
      puVar11 = (undefined2 *)(*piVar3 + uVar13 * 0x640 + iVar4);
      puVar6 = (ushort *)(puVar2 + uVar13 * 0xf0);
      do {
        if (*puVar6 == uVar10) {
          *puVar11 = *(undefined2 *)(puVar1 + 2);
        }
        iVar14 = iVar14 + -1;
        puVar11 = puVar11 + 1;
        puVar6 = puVar6 + 2;
      } while (iVar14 != 0);
      uVar13 = uVar13 + 1 & 0xfffeffff;
    } while (uVar13 < 0x37);
  }
  iVar14 = Start_Of_Screen_Mem;
  iVar4 = Screen_Frame_Buffer;
  uVar10 = DAT_8000d9b8;
  uVar13 = DAT_8000d9b8 - 0x37;
  iVar7 = DAT_8000d9b8 + 0x101;
  iVar8 = DAT_8000d9b8 - iVar7;
  if (DAT_8000d9b8 <= uVar13) {
    return;
  }
  do {
    iVar9 = iVar7 + uVar13 * 800;
    copy_short((void *)(iVar14 + iVar9 * 2),(void *)(iVar4 + iVar9 * 2),iVar8 + 0x141);
    uVar13 = uVar13 + 1;
  } while (uVar13 < uVar10);
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_ch1_settings(int mode)

{
  int *piVar1;
  int iVar2;
  char *pcVar3;
  char *pcVar4;
  ushort *puVar5;
  ushort *puVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(0xa1,4,0x104,0x2d);
  pcVar4 = DAT_8000dcf0;
  uVar9 = DAT_8000dcf4;
  if (*DAT_8000dcf0 == '\0') {
    uVar9 = DAT_8000dcf8;
  }
  set_display_fg_color(uVar9);
  display_fill_rect(0xa1,5,0xbf,0x28);
  set_display_fg_color(0);
  set_font_paint_mode(2);
  select_font(PTR_FONT_2_8000dcfc);
  display_text(&DAT_8000dd00,0xa6,0x10);
  set_display_fg_color(0xffffff);
  if (pcVar4[1] == '\0') {
    pcVar3 = (char *)0x8000dd04;
  }
  else {
    pcVar3 = (char *)0x8000dd08;
  }
  display_text(pcVar3,199,8);
  set_display_fg_color(0xffffff);
  if (pcVar4[2] == '\0') {
    display_text(&DAT_8000dd0c,0xe0,8);
  }
  else {
    if (pcVar4[2] == '\x01') {
      pcVar3 = &DAT_8000dd10;
    }
    else {
      if (pcVar4[2] != '\x02') goto LAB_8000dac0;
      pcVar3 = &DAT_8000dd14;
    }
    display_text(pcVar3,0xde,8);
  }
LAB_8000dac0:
  if (pcVar4[2] != '\0') {
    if (pcVar4[2] == '\x01') {
      switch(pcVar4[3]) {
      case '\0':
switchD_8000db84_caseD_0:
        pcVar4 = &DAT_8000dda4;
        break;
      case '\x01':
        pcVar4 = &DAT_8000dd60;
        break;
      case '\x02':
switchD_8000db84_caseD_2:
        pcVar4 = &DAT_8000dd68;
        break;
      case '\x03':
switchD_8000db84_caseD_3:
        pcVar4 = s_5V_div_8000dd1c;
        break;
      case '\x04':
        pcVar4 = &DAT_8000dd70;
        break;
      case '\x05':
        goto switchD_8000daf0_caseD_2;
      case '\x06':
        goto switchD_8000daf0_caseD_3;
      default:
        goto switchD_8000daf0_caseD_7;
      }
    }
    else {
      if (pcVar4[2] != '\x02') goto switchD_8000daf0_caseD_7;
      switch(pcVar4[3]) {
      case '\0':
        pcVar4 = &DAT_8000dd80;
        break;
      case '\x01':
        pcVar4 = &DAT_8000dd8c;
        break;
      case '\x02':
        pcVar4 = &DAT_8000dd98;
        break;
      case '\x03':
        goto switchD_8000db84_caseD_0;
      case '\x04':
        pcVar4 = &DAT_8000ddac;
        break;
      case '\x05':
        goto switchD_8000db84_caseD_2;
      case '\x06':
        goto switchD_8000db84_caseD_3;
      default:
        goto switchD_8000daf0_caseD_7;
      }
    }
    goto LAB_8000db34;
  }
  switch(pcVar4[3]) {
  case '\0':
    display_text(s_5V_div_8000dd1c,199,0x18);
    goto switchD_8000daf0_caseD_7;
  case '\x01':
    pcVar4 = s_2_5V_div_8000dd24;
    break;
  case '\x02':
switchD_8000daf0_caseD_2:
    pcVar4 = &DAT_8000dd78;
    break;
  case '\x03':
switchD_8000daf0_caseD_3:
    pcVar4 = &DAT_8000dd30;
    break;
  case '\x04':
    pcVar4 = &DAT_8000dd3c;
    break;
  case '\x05':
    pcVar4 = &DAT_8000dd48;
    break;
  case '\x06':
    pcVar4 = &DAT_8000dd54;
    break;
  default:
    goto switchD_8000daf0_caseD_7;
  }
LAB_8000db34:
  display_text(pcVar4,199,0x18);
switchD_8000daf0_caseD_7:
  piVar1 = Global_Frame_Buffer_Pointer;
  if (mode != 0) {
    uVar9 = 5;
    do {
      puVar5 = (ushort *)(*piVar1 + uVar9 * 0x640 + 0x142);
      iVar8 = 0x31;
      *puVar5 = ~*puVar5;
      do {
        puVar6 = puVar5 + 2;
        iVar8 = iVar8 + -1;
        puVar5[1] = ~puVar5[1];
        *puVar6 = ~*puVar6;
        puVar5 = puVar6;
      } while (iVar8 != 0);
      uVar9 = uVar9 + 1 & 0xfffeffff;
    } while (uVar9 < 0x29);
  }
  iVar2 = Start_Of_Screen_Mem;
  iVar8 = Screen_Frame_Buffer;
  uVar9 = 4;
  do {
    iVar7 = uVar9 * 800 + 0xa1;
    copy_short((void *)(iVar2 + iVar7 * 2),(void *)(iVar8 + iVar7 * 2),100);
    uVar9 = uVar9 + 1;
  } while (uVar9 < 0x2d);
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_ch2_settings(int mode)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  int iVar4;
  char *pcVar5;
  ushort *puVar6;
  ushort *puVar7;
  int iVar8;
  ushort xpos;
  short sVar9;
  uint uVar10;
  
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  iVar1 = DAT_8000e100;
  display_fill_rect(0x120,4,(ushort)DAT_8000e100,0x2d);
  iVar2 = DAT_8000e104;
  uVar10 = DAT_8000e108;
  if (*(char *)(DAT_8000e104 + 0xc) == '\0') {
    uVar10 = DAT_8000e10c;
  }
  set_display_fg_color(uVar10);
  display_fill_rect(0x120,5,(ushort)DAT_8000e110,0x28);
  set_display_fg_color(0);
  set_font_paint_mode(2);
  select_font(PTR_FONT_2_8000e114);
  display_text(&DAT_8000e11c,(ushort)DAT_8000e118,0x10);
  set_display_fg_color(0xffffff);
  if (*(char *)(iVar2 + 0xd) == '\0') {
    pcVar5 = (char *)0x8000e124;
  }
  else {
    pcVar5 = (char *)0x8000e128;
  }
  xpos = (ushort)DAT_8000e120;
  display_text(pcVar5,xpos,8);
  set_display_fg_color(0xffffff);
  if (*(char *)(iVar2 + 0xe) == '\0') {
    display_text(&DAT_8000e140,(ushort)DAT_8000e13c,8);
  }
  else {
    if (*(char *)(iVar2 + 0xe) == '\x01') {
      pcVar5 = (char *)0x8000e130;
    }
    else {
      if (*(char *)(iVar2 + 0xe) != '\x02') goto LAB_8000dec0;
      pcVar5 = (char *)0x8000e134;
    }
    display_text(pcVar5,(ushort)DAT_8000e12c,8);
  }
LAB_8000dec0:
  if (*(char *)(iVar2 + 0xe) != '\0') {
    if (*(char *)(iVar2 + 0xe) == '\x01') {
      switch(*(undefined *)(iVar2 + 0xf)) {
      case 0:
switchD_8000df84_caseD_0:
        pcVar5 = &DAT_8000e1cc;
        break;
      case 1:
        pcVar5 = &DAT_8000e188;
        break;
      case 2:
switchD_8000df84_caseD_2:
        pcVar5 = &DAT_8000e190;
        break;
      case 3:
switchD_8000df84_caseD_3:
        pcVar5 = s_5V_div_8000e144;
        break;
      case 4:
        pcVar5 = &DAT_8000e198;
        break;
      case 5:
        goto switchD_8000def0_caseD_2;
      case 6:
        goto switchD_8000def0_caseD_3;
      default:
        goto switchD_8000def0_caseD_7;
      }
    }
    else {
      if (*(char *)(iVar2 + 0xe) != '\x02') goto switchD_8000def0_caseD_7;
      switch(*(undefined *)(iVar2 + 0xf)) {
      case 0:
        pcVar5 = &DAT_8000e1a8;
        break;
      case 1:
        pcVar5 = &DAT_8000e1b4;
        break;
      case 2:
        pcVar5 = &DAT_8000e1c0;
        break;
      case 3:
        goto switchD_8000df84_caseD_0;
      case 4:
        pcVar5 = &DAT_8000e1d4;
        break;
      case 5:
        goto switchD_8000df84_caseD_2;
      case 6:
        goto switchD_8000df84_caseD_3;
      default:
        goto switchD_8000def0_caseD_7;
      }
    }
    goto LAB_8000df34;
  }
  switch(*(undefined *)(iVar2 + 0xf)) {
  case 0:
    display_text(s_5V_div_8000e144,xpos,0x18);
    goto switchD_8000def0_caseD_7;
  case 1:
    pcVar5 = s_2_5V_div_8000e14c;
    break;
  case 2:
switchD_8000def0_caseD_2:
    pcVar5 = &DAT_8000e1a0;
    break;
  case 3:
switchD_8000def0_caseD_3:
    pcVar5 = &DAT_8000e158;
    break;
  case 4:
    pcVar5 = &DAT_8000e164;
    break;
  case 5:
    pcVar5 = &DAT_8000e170;
    break;
  case 6:
    pcVar5 = &DAT_8000e17c;
    break;
  default:
    goto switchD_8000def0_caseD_7;
  }
LAB_8000df34:
  display_text(pcVar5,xpos,0x18);
switchD_8000def0_caseD_7:
  piVar3 = Global_Frame_Buffer_Pointer;
  if (mode != 0) {
    uVar10 = 5;
    do {
      puVar6 = (ushort *)(*piVar3 + uVar10 * 0x640 + 0x240);
      sVar9 = 0x31;
      *puVar6 = ~*puVar6;
      do {
        puVar7 = puVar6 + 2;
        sVar9 = sVar9 + -1;
        puVar6[1] = ~puVar6[1];
        *puVar7 = ~*puVar7;
        puVar6 = puVar7;
      } while (sVar9 != 0);
      uVar10 = uVar10 + 1 & 0xfffeffff;
    } while (uVar10 < 0x29);
  }
  iVar4 = Start_Of_Screen_Mem;
  iVar2 = Screen_Frame_Buffer;
  uVar10 = 4;
  do {
    iVar8 = uVar10 * 800 + 0x120;
    copy_short((void *)(iVar4 + iVar8 * 2),(void *)(iVar2 + iVar8 * 2),iVar1 + -0x11f);
    uVar10 = uVar10 + 1;
  } while (uVar10 < 0x2d);
  return;
}



void empty_func_6(void)

{
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack
// WARNING: Unknown calling convention yet parameter storage is locked

void display_highlight_main_menu_item(void)

{
  char cVar1;
  undefined *puVar2;
  int *piVar3;
  ushort uVar4;
  ushort uVar5;
  ushort uVar6;
  short sVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  int iVar11;
  ushort *puVar12;
  uint uVar13;
  int iVar14;
  uint uVar15;
  ushort *puVar16;
  undefined2 *puVar17;
  int iVar18;
  
  uVar4 = convert_color(DAT_8000e6d8);
  uVar5 = convert_color(DAT_8000e6dc);
  uVar13 = (uint)uVar5;
  uVar5 = convert_color(0);
  uVar6 = convert_color(0xffffff);
  cVar1 = *DAT_8000e6e0;
  set_frame_to_global_pointer();
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_DAT_8000e6e8;
  uVar10 = DAT_8000e6e4;
  uVar15 = 0;
  do {
    iVar18 = 0x95;
    puVar12 = (ushort *)(PTR_BITMAP_MAIN_MENU_8000e6f0 + uVar15 * 0x12a);
    puVar17 = (undefined2 *)
              (*piVar3 + ((uint)*(ushort *)puVar2 + (*(ushort *)(puVar2 + 2) + uVar15) * 800) * 2);
    do {
      uVar8 = (uint)*puVar12;
      uVar9 = uVar13;
      if (((uVar8 != 0) && (uVar9 = (uint)uVar5, uVar8 != 0xf800)) &&
         (uVar9 = uVar8, uVar8 == uVar10)) {
        uVar9 = (uint)uVar6;
      }
      iVar18 = iVar18 + -1;
      *puVar17 = (short)uVar9;
      puVar12 = puVar12 + 1;
      puVar17 = puVar17 + 1;
    } while (iVar18 != 0);
    uVar15 = uVar15 + 1 & 0xfffeffff;
  } while (uVar15 < 0xeb);
  if (cVar1 == '\x01') {
    uVar10 = 0xe;
    do {
      puVar12 = (ushort *)
                (*piVar3 +
                ((*(ushort *)(puVar2 + 2) + uVar10) * 800 + 9 + (uint)*(ushort *)puVar2) * 2);
      sVar7 = 0x83;
      do {
        sVar7 = sVar7 + -1;
        if (*puVar12 == uVar13) {
          *puVar12 = uVar4;
        }
        else {
          *puVar12 = ~*puVar12;
        }
        puVar12 = puVar12 + 1;
      } while (sVar7 != 0);
      uVar10 = uVar10 + 1 & 0xfffeffff;
    } while (uVar10 < 0x2e);
  }
  else {
    if (cVar1 == '\x02') {
      iVar18 = *piVar3;
      uVar10 = 0x47;
      do {
        puVar12 = (ushort *)
                  (iVar18 + ((uint)*(ushort *)puVar2 + (*(ushort *)(puVar2 + 2) + uVar10) * 800 + 9)
                            * 2);
        if (uVar9 == uVar13) {
          *puVar12 = uVar4;
        }
        else {
          *puVar12 = ~*puVar12;
        }
        iVar14 = 1;
        sVar7 = 0x41;
        do {
          puVar12 = (ushort *)
                    (iVar18 + ((uint)*(ushort *)puVar2 + (*(ushort *)(puVar2 + 2) + uVar10) * 800 +
                              iVar14 + 9) * 2);
          if (uVar9 == uVar13) {
            *puVar12 = uVar4;
          }
          else {
            *puVar12 = ~*puVar12;
          }
          iVar11 = iVar18 + ((uint)*(ushort *)puVar2 + (*(ushort *)(puVar2 + 2) + uVar10) * 800 +
                            iVar14 + 9) * 2;
          if (uVar9 == uVar13) {
            *(ushort *)(iVar11 + 2) = uVar4;
          }
          else {
            *(ushort *)(iVar11 + 2) = ~*(ushort *)(iVar11 + 2);
          }
          sVar7 = sVar7 + -1;
          iVar14 = iVar14 + 2;
        } while (sVar7 != 0);
        uVar10 = uVar10 + 1 & 0xfffeffff;
      } while (uVar10 < 0x69);
    }
    else {
      if (cVar1 == '\x03') {
        iVar18 = *piVar3;
        uVar10 = 0x82;
        do {
          puVar12 = (ushort *)
                    (iVar18 + ((uint)*(ushort *)puVar2 + (*(ushort *)(puVar2 + 2) + uVar10) * 800 +
                              9) * 2);
          if (uVar9 == uVar13) {
            *puVar12 = uVar4;
          }
          else {
            *puVar12 = ~*puVar12;
          }
          iVar14 = 1;
          sVar7 = 0x41;
          do {
            puVar12 = (ushort *)
                      (iVar18 + ((uint)*(ushort *)puVar2 + (*(ushort *)(puVar2 + 2) + uVar10) * 800
                                + iVar14 + 9) * 2);
            if (uVar9 == uVar13) {
              *puVar12 = uVar4;
            }
            else {
              *puVar12 = ~*puVar12;
            }
            iVar11 = iVar18 + ((uint)*(ushort *)puVar2 + (*(ushort *)(puVar2 + 2) + uVar10) * 800 +
                              iVar14 + 9) * 2;
            if (uVar9 == uVar13) {
              *(ushort *)(iVar11 + 2) = uVar4;
            }
            else {
              *(ushort *)(iVar11 + 2) = ~*(ushort *)(iVar11 + 2);
            }
            sVar7 = sVar7 + -1;
            iVar14 = iVar14 + 2;
          } while (sVar7 != 0);
          uVar10 = uVar10 + 1 & 0xfffeffff;
        } while (uVar10 < 0xa4);
      }
      else {
        if (cVar1 == '\x04') {
          uVar10 = 0xbe;
          do {
            if (uVar9 == uVar13) {
              puVar12 = (ushort *)
                        (*piVar3 +
                        ((uint)*(ushort *)puVar2 + (*(ushort *)(puVar2 + 2) + uVar10) * 800 + 9) * 2
                        );
              *puVar12 = uVar4;
              sVar7 = 0x41;
              do {
                sVar7 = sVar7 + -1;
                puVar12[1] = uVar4;
                puVar12 = puVar12 + 2;
                *puVar12 = uVar4;
              } while (sVar7 != 0);
            }
            else {
              puVar12 = (ushort *)
                        (*piVar3 +
                        ((uint)*(ushort *)puVar2 + (*(ushort *)(puVar2 + 2) + uVar10) * 800 + 9) * 2
                        );
              *puVar12 = ~*puVar12;
              sVar7 = 0x41;
              do {
                puVar16 = puVar12 + 2;
                sVar7 = sVar7 + -1;
                puVar12[1] = ~puVar12[1];
                *puVar16 = ~*puVar16;
                puVar12 = puVar16;
              } while (sVar7 != 0);
            }
            uVar10 = uVar10 + 1 & 0xfffeffff;
          } while (uVar10 < 0xde);
        }
      }
    }
  }
  set_display_fg_color(DAT_8000e6f4);
  display_draw_rect(*(ushort *)puVar2,*(ushort *)(puVar2 + 2),*(ushort *)puVar2 + 0x94,
                    *(ushort *)(puVar2 + 2) + 0xea);
  iVar14 = Start_Of_Screen_Mem;
  iVar18 = Screen_Frame_Buffer;
  uVar13 = (uint)*(ushort *)(puVar2 + 2);
  uVar10 = (uint)*(ushort *)puVar2;
  uVar15 = uVar13 + 0xeb & 0xfffeffff;
  if (uVar13 < uVar15) {
    do {
      iVar11 = uVar10 + uVar13 * 800;
      copy_short((void *)(iVar14 + iVar11 * 2),(void *)(iVar18 + iVar11 * 2),
                 ((uVar10 + 0x94 & 0xfffeffff) - uVar10) + 1);
      uVar13 = uVar13 + 1;
    } while (uVar13 < uVar15);
    return;
  }
  return;
}



void display_slide_down_main_menu(void)

{
  ushort uVar1;
  undefined *puVar2;
  undefined *puVar3;
  int *piVar4;
  ushort uVar5;
  ushort uVar6;
  uint uVar7;
  uint uVar8;
  ushort *puVar9;
  int iVar10;
  ushort *puVar11;
  ushort uVar12;
  
  uVar5 = convert_color(DAT_8000e7e4);
  uVar6 = convert_color(0);
  puVar2 = PTR_DAT_8000e7e8;
  *(undefined2 *)PTR_DAT_8000e7e8 = 2;
  *(undefined2 *)(puVar2 + 2) = 0x2e;
  *(undefined2 *)(puVar2 + 4) = 0x97;
  *(undefined2 *)(puVar2 + 6) = 0x2e;
  set_screen_to_global_pointer();
  piVar4 = Global_Frame_Buffer_Pointer;
  puVar3 = PTR_BITMAP_MAIN_MENU_8000e7ec;
  uVar7 = 0xeb;
  uVar8 = uVar7;
  do {
    while (uVar7 < 0xeb) {
      iVar10 = 0x95;
      puVar9 = (ushort *)(puVar3 + uVar7 * 0x12a);
      puVar11 = (ushort *)
                (*piVar4 +
                ((uint)*(ushort *)puVar2 + ((uint)*(ushort *)(puVar2 + 2) + (uVar7 - uVar8)) * 800)
                * 2);
      do {
        uVar1 = *puVar9;
        uVar12 = uVar5;
        if ((uVar1 != 0) && (uVar12 = uVar1, uVar1 == 0xf800)) {
          uVar12 = uVar6;
        }
        iVar10 = iVar10 + -1;
        *puVar11 = uVar12;
        puVar9 = puVar9 + 1;
        puVar11 = puVar11 + 1;
      } while (iVar10 != 0);
      uVar7 = uVar7 + 1 & 0xfffeffff;
    }
    uVar7 = (uVar8 - (uVar8 * DAT_8000e7f4 >> 0x14)) - 1 & 0xffff;
    uVar8 = uVar7;
  } while (uVar7 != 0);
  *Global_Frame_Buffer_Pointer = Screen_Frame_Buffer;
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_menu_button(int mode)

{
  int iVar1;
  ushort uVar2;
  ushort uVar3;
  undefined *puVar4;
  int *piVar5;
  ushort *puVar6;
  ushort *puVar7;
  int iVar8;
  uint uVar9;
  
  piVar5 = Global_Frame_Buffer_Pointer;
  puVar4 = PTR_TEXT_BITMAP_MENU_8000e8e8;
  if (mode == 0) {
    uVar9 = 0;
    do {
      memcpy((void *)(*piVar5 + uVar9 * 0x640),puVar4 + uVar9 * 0xa0,0xa0);
      uVar9 = uVar9 + 1 & 0xfffeffff;
    } while (uVar9 < 0x2a);
  }
  else {
    uVar9 = 0;
    do {
      puVar6 = (ushort *)(puVar4 + uVar9 * 0xa0);
      puVar7 = (ushort *)(*piVar5 + uVar9 * 0x640);
      *puVar7 = ~*puVar6;
      uVar2 = puVar6[1];
      iVar8 = 0x27;
      do {
        iVar8 = iVar8 + -1;
        uVar3 = puVar6[2];
        puVar7[1] = ~uVar2;
        uVar2 = puVar6[3];
        puVar7 = puVar7 + 2;
        *puVar7 = ~uVar3;
        puVar6 = puVar6 + 2;
      } while (iVar8 != 0);
      iVar8 = uVar9 * 0x50;
      iVar1 = uVar9 * 800;
      uVar9 = uVar9 + 1 & 0xfffeffff;
      *(ushort *)(*piVar5 + (iVar1 + 0x4f) * 2) = ~*(ushort *)(puVar4 + (iVar8 + 0x4f) * 2);
    } while (uVar9 < 0x2a);
  }
  iVar1 = Start_Of_Screen_Mem;
  iVar8 = Screen_Frame_Buffer;
  uVar9 = 0;
  do {
    copy_short((void *)(iVar1 + uVar9 * 0x640),(void *)(iVar8 + uVar9 * 0x640),0x51);
    uVar9 = uVar9 + 1;
  } while (uVar9 < 0x2a);
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void setup_main_screen(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  ushort xend;
  uint uVar4;
  
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  iVar1 = DAT_8000ea10;
  xend = (ushort)DAT_8000ea10;
  display_fill_rect(0,0,xend,0x2e);
  display_fill_rect(0,0x1de,xend,0x1e0);
  display_fill_rect(0,0,1,xend - 0x140);
  display_fill_rect(0x2d7,0,xend,0x1e0);
  display_right_menu();
  iVar2 = DAT_8000ea14;
  display_run_stop_text((uint)*(byte *)(DAT_8000ea14 + 0x3a));
  empty_func_6();
  display_move_speed(0);
  if (*(char *)(iVar2 + 0x43) == '\0') {
    display_menu_button(0);
  }
  else {
    display_return_arrow_symbol(0);
  }
  display_ch1_settings(0);
  display_ch2_settings(0);
  display_time_div_setting();
  display_trigger_settings(0);
  display_battery_status();
  copy_rect_to_screen(0,0,xend,0x2e);
  copy_rect_to_screen(0x2d7,0,xend,0x1e0);
  copy_rect_to_screen(0,0,1,0x1e0);
  iVar3 = Start_Of_Screen_Mem;
  iVar2 = Screen_Frame_Buffer;
  uVar4 = 0x1de;
  do {
    copy_short((void *)(iVar3 + uVar4 * 0x640),(void *)(iVar2 + uVar4 * 0x640),iVar1 + 1);
    uVar4 = uVar4 + 1;
  } while (uVar4 < 0x1e0);
  return;
}



void slide_measures_menu_on_screen(void)

{
  uint uVar1;
  uint uVar2;
  undefined *puVar3;
  int *piVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  undefined2 *puVar8;
  int iVar9;
  ushort *puVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  uint uVar15;
  
  uVar2 = DAT_8000eaf8;
  uVar1 = DAT_8000eaf4;
  set_screen_to_global_pointer();
  iVar7 = DAT_8000eb0c;
  uVar6 = DAT_8000eb08;
  uVar5 = DAT_8000eb04;
  piVar4 = Global_Frame_Buffer_Pointer;
  puVar3 = PTR_BITMAP_MEASURES_MENU_8000eafc;
  uVar15 = 0;
  do {
    uVar11 = 0;
    do {
      if (uVar15 != 0) {
        puVar8 = (undefined2 *)(*piVar4 + (uVar11 * 800 - uVar15) * 2 + 0x67174);
        puVar10 = (ushort *)(puVar3 + uVar11 * DAT_8000eb08 * 2);
        uVar12 = uVar15;
        do {
          uVar13 = (uint)*puVar10;
          uVar14 = uVar1;
          if (uVar13 != 0) {
            if (uVar13 == 0xf800) {
              uVar14 = 0;
            }
            else {
              uVar14 = uVar13;
              if (uVar13 == uVar5) {
                uVar14 = uVar2;
              }
            }
          }
          uVar12 = uVar12 - 1;
          *puVar8 = (short)uVar14;
          puVar8 = puVar8 + 1;
          puVar10 = puVar10 + 1;
        } while (uVar12 != 0);
      }
      uVar11 = uVar11 + 1 & 0xfffeffff;
    } while (uVar11 < 0xd6);
    iVar9 = (int)((ulonglong)((longlong)iVar7 * (longlong)(int)(uVar6 - uVar15)) >> 0x20);
    uVar15 = (((iVar9 >> 2) - (iVar9 >> 0x1f)) + uVar15 & 0xffff) + 1 & 0xfffeffff;
  } while (uVar15 < uVar6);
  return;
}



void display_draw_time_cursors(void)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  
  uVar1 = DAT_8000eb78;
  set_frame_to_global_pointer();
  set_display_fg_color(uVar1);
  uVar1 = DAT_8000eb80;
  iVar2 = DAT_8000eb7c;
  uVar3 = 0x30;
  do {
    display_draw_vert_line(*(ushort *)(iVar2 + 0x94),(ushort)uVar3,(ushort)uVar3 + 3);
    uVar3 = uVar3 + 6 & 0xfffeffff;
  } while (uVar3 < uVar1);
  uVar3 = 0x30;
  do {
    display_draw_vert_line(*(ushort *)(iVar2 + 0x96),(ushort)uVar3,(ushort)uVar3 + 3);
    uVar3 = uVar3 + 6 & 0xfffeffff;
  } while (uVar3 < uVar1);
  return;
}



void display_draw_volt_cursors(void)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  
  uVar1 = DAT_8000ebec;
  set_frame_to_global_pointer();
  set_display_fg_color(uVar1);
  uVar1 = DAT_8000ebf4;
  iVar2 = DAT_8000ebf0;
  uVar3 = 5;
  do {
    display_draw_horz_line(*(ushort *)(iVar2 + 0x9c),(ushort)uVar3,(ushort)uVar3 + 3);
    uVar3 = uVar3 + 6 & 0xfffeffff;
  } while (uVar3 < uVar1);
  uVar3 = 5;
  do {
    display_draw_horz_line(*(ushort *)(iVar2 + 0x9e),(ushort)uVar3,(ushort)uVar3 + 3);
    uVar3 = uVar3 + 6 & 0xfffeffff;
  } while (uVar3 < uVar1);
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x800103fc
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_8000ebf8(void)

{
  short sVar1;
  longlong lVar2;
  char cVar3;
  char cVar4;
  char *pcVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  uint uVar12;
  uint unaff_r4;
  int iVar13;
  int iVar14;
  uint unaff_r5;
  ushort ypos;
  int unaff_r10;
  char local_84;
  undefined local_83;
  undefined local_82;
  undefined local_81;
  char local_80;
  char local_7f;
  char local_7e;
  char local_7d;
  undefined local_7c;
  undefined local_7b;
  undefined local_7a;
  undefined local_79;
  char local_74;
  undefined local_73;
  undefined local_72;
  undefined local_71;
  undefined local_70;
  char local_6f;
  char local_6e;
  char local_6d;
  char local_6c;
  undefined local_6b;
  undefined local_6a;
  undefined local_69;
  char local_60;
  undefined local_5f;
  undefined local_5e;
  undefined local_5d;
  undefined local_5c;
  char local_5b;
  char local_5a;
  char local_59;
  char local_58;
  undefined local_57;
  undefined local_56;
  undefined local_55;
  char local_50;
  undefined local_4f;
  undefined local_4e;
  undefined local_4d;
  char local_4c;
  char local_4b;
  char local_4a;
  char local_49;
  undefined local_48;
  undefined local_47;
  undefined local_46;
  int local_34;
  undefined4 local_30;
  undefined4 local_2c;
  
  ypos = (ushort)unaff_r10;
  set_frame_to_global_pointer();
  uVar12 = DAT_8000fb30;
  uVar7 = DAT_8000fb2c;
  uVar8 = DAT_8000fb10;
  pcVar5 = DAT_8000faf4;
  uVar6 = (uint)*(ushort *)(DAT_8000faf0 + 0x9e) - (uint)*(ushort *)(DAT_8000faf0 + 0x9c);
  uVar9 = (uint)*(ushort *)(DAT_8000faf0 + 0x96) - (uint)*(ushort *)(DAT_8000faf0 + 0x94);
  switch(DAT_8000faf4[10]) {
  case '\t':
    uVar11 = DAT_8000faf8;
    break;
  case '\n':
    uVar11 = DAT_8000fafc;
    break;
  case '\v':
    uVar11 = DAT_8000fb00;
    break;
  case '\f':
    uVar11 = DAT_8000fb04;
    break;
  case '\r':
    uVar11 = DAT_8000fb08;
    break;
  case '\x0e':
    uVar11 = DAT_8000fb0c;
    break;
  case '\x0f':
    uVar11 = DAT_8000fb10;
    break;
  case '\x10':
    uVar11 = 4000;
    break;
  case '\x11':
    uVar11 = 2000;
    break;
  case '\x12':
    uVar11 = 1000;
    break;
  case '\x13':
    uVar11 = 400;
    break;
  case '\x14':
    uVar11 = 200;
    break;
  case '\x15':
    uVar11 = 100;
    break;
  case '\x16':
    uVar9 = uVar9 * 0x28;
    goto switchD_8000ec34_caseD_1b;
  case '\x17':
    uVar9 = uVar9 * 0x14;
    goto switchD_8000ec34_caseD_1b;
  case '\x18':
    uVar9 = uVar9 * 10;
    goto switchD_8000ec34_caseD_1b;
  case '\x19':
    uVar9 = uVar9 * 5;
    goto switchD_8000ec34_caseD_1b;
  case '\x1a':
    uVar9 = uVar9 * 2;
  default:
    goto switchD_8000ec34_caseD_1b;
  case '\x1c':
    uVar11 = 500;
    break;
  case '\x1d':
    uVar9 = uVar9 * 200;
    goto switchD_8000ec34_caseD_1b;
  }
  uVar9 = uVar11 * uVar9;
switchD_8000ec34_caseD_1b:
  switch(DAT_8000faf4[3]) {
  case '\0':
    iVar10 = 100;
    goto LAB_8000ed7c;
  case '\x01':
    iVar10 = 0x32;
LAB_8000ed7c:
    unaff_r5 = uVar6 * iVar10;
    break;
  case '\x02':
    unaff_r5 = uVar6 * 0x14;
    break;
  case '\x03':
    unaff_r5 = uVar6 * 10;
    break;
  case '\x04':
    unaff_r5 = uVar6 * 4;
    break;
  case '\x05':
    unaff_r5 = uVar6 * 2;
    break;
  case '\x06':
    unaff_r5 = uVar6;
  }
  switch(DAT_8000faf4[0xf]) {
  case '\0':
    iVar10 = 100;
    goto LAB_8000ede8;
  case '\x01':
    iVar10 = 0x32;
LAB_8000ede8:
    unaff_r4 = uVar6 * iVar10;
    break;
  case '\x02':
    unaff_r4 = uVar6 * 0x14;
    break;
  case '\x03':
    unaff_r4 = uVar6 * 10;
    break;
  case '\x04':
    unaff_r4 = uVar6 * 4;
    break;
  case '\x05':
    unaff_r4 = uVar6 * 2;
    break;
  case '\x06':
    unaff_r4 = uVar6;
  }
  if (DAT_8000faf4[2] == '\x01') {
    unaff_r5 = unaff_r5 * 10;
  }
  else {
    if (DAT_8000faf4[2] == '\x02') {
      unaff_r5 = unaff_r5 * 100;
    }
  }
  if (DAT_8000faf4[0xe] == '\x01') {
    unaff_r4 = unaff_r4 * 10;
  }
  else {
    if (DAT_8000faf4[0xe] == '\x02') {
      unaff_r4 = unaff_r4 * 100;
    }
  }
  local_84 = 'F';
  local_74 = 'V';
  local_73 = 0x31;
  local_72 = 0x20;
  local_71 = 0x3d;
  local_83 = 0x20;
  local_60 = 'V';
  local_50 = 'T';
  local_82 = 0x3d;
  local_5f = 0x32;
  local_4f = 0x20;
  local_81 = 0x20;
  local_4e = 0x3d;
  local_70 = 0x20;
  local_5e = 0x20;
  local_4d = 0x20;
  local_5d = 0x3d;
  local_5c = 0x20;
  sVar1 = (short)DAT_8000fb1c;
  if (unaff_r5 < DAT_8000faf8) {
    if (unaff_r5 < DAT_8000fb04) {
      if (unaff_r5 < DAT_8000fb10) {
        if (unaff_r5 < 1000) {
          cVar3 = (char)unaff_r5;
          if (unaff_r5 < 100) {
            if (unaff_r5 < 10) {
              local_6c = '\0';
              local_6f = cVar3 + (char)(uint)((ulonglong)unaff_r5 * (ulonglong)DAT_8000fb30 >> 0x23)
                                 * -10 + '0';
              local_6e = 'm';
              local_6d = 'V';
            }
            else {
              local_6c = 'V';
              local_6b = 0;
              cVar4 = (char)(uint)((ulonglong)unaff_r5 * (ulonglong)DAT_8000fb30 >> 0x23);
              local_6f = cVar4 + '0';
              local_6e = cVar3 + cVar4 * -10 + '0';
              local_6d = 'm';
            }
          }
          else {
            uVar6 = (uint)((ulonglong)unaff_r5 * (ulonglong)DAT_8000fb2c >> 0x25);
            local_6f = (char)uVar6 + '0';
            local_6e = (char)(uint)((ulonglong)(unaff_r5 + uVar6 * -100) * (ulonglong)DAT_8000fb30
                                   >> 0x23) + '0';
            local_6d = cVar3 + (char)(uint)((ulonglong)unaff_r5 * (ulonglong)DAT_8000fb30 >> 0x23) *
                               -10 + '0';
            local_6c = 'm';
            local_6b = 0x56;
            local_6a = 0;
          }
        }
        else {
          uVar6 = (uint)((ulonglong)unaff_r5 * (ulonglong)DAT_8000fb28 >> 0x26);
          local_6f = (char)uVar6 + '0';
          local_6e = '.';
          uVar11 = unaff_r5 + uVar6 * -1000;
          uVar6 = (uint)((ulonglong)uVar11 * (ulonglong)DAT_8000fb2c >> 0x25);
          local_6d = (char)uVar6 + '0';
          local_6c = (char)(uint)((ulonglong)(uVar11 + uVar6 * -100) * (ulonglong)DAT_8000fb30 >>
                                 0x23) + '0';
          local_6b = 0x56;
          local_6a = 0;
        }
      }
      else {
        uVar6 = (uint)((ulonglong)unaff_r5 * (ulonglong)DAT_8000fb24 >> 0x2d);
        local_6f = (char)uVar6 + '0';
        uVar11 = unaff_r5 + uVar6 * -10000;
        uVar6 = (uint)((ulonglong)uVar11 * (ulonglong)DAT_8000fb28 >> 0x26);
        local_6e = (char)uVar6 + '0';
        local_6d = '.';
        local_6c = (char)(uint)((ulonglong)(uVar11 + uVar6 * -1000) * (ulonglong)DAT_8000fb2c >>
                               0x25) + '0';
        local_6b = 0x56;
        local_6a = 0;
      }
    }
    else {
      local_6f = (char)((ulonglong)DAT_8000fb18 * (ulonglong)unaff_r5 + (ulonglong)DAT_8000fb18 >>
                       0x30) + '0';
      local_6e = (char)(uint)((ulonglong)
                              (unaff_r5 +
                              DAT_8000fb20 *
                              (uint)((ulonglong)DAT_8000fb18 * (ulonglong)unaff_r5 +
                                     (ulonglong)DAT_8000fb18 >> 0x30) * 0x20) *
                              (ulonglong)DAT_8000fb24 >> 0x2d) + '0';
      local_6c = 'V';
      uVar6 = unaff_r5 +
              (uint)((ulonglong)DAT_8000fb18 * (ulonglong)unaff_r5 + (ulonglong)DAT_8000fb18 >> 0x30
                    ) * DAT_8000fb20 * 0x20;
      local_6b = 0;
      local_6d = (char)(uint)((ulonglong)
                              (uVar6 + (uint)((ulonglong)uVar6 * (ulonglong)DAT_8000fb24 >> 0x2d) *
                                       -10000) * (ulonglong)DAT_8000fb28 >> 0x26) + '0';
    }
  }
  else {
    local_6f = (char)(uint)((ulonglong)unaff_r5 * (ulonglong)DAT_8000fb14 >> 0x32) + '0';
    local_6e = '.';
    uVar6 = unaff_r5 +
            (int)(short)(ushort)((ulonglong)unaff_r5 * (ulonglong)DAT_8000fb14 >> 0x32) * (int)sVar1
            * 0x40;
    local_6d = (char)((ulonglong)DAT_8000fb18 * (ulonglong)uVar6 + (ulonglong)DAT_8000fb18 >> 0x30)
               + '0';
    local_6c = (char)(uint)((ulonglong)
                            (uVar6 + (uint)((ulonglong)DAT_8000fb18 * (ulonglong)uVar6 +
                                            (ulonglong)DAT_8000fb18 >> 0x30) * DAT_8000fb20 * 0x20)
                            * (ulonglong)DAT_8000fb24 >> 0x2d) + '0';
    local_6b = 0x4b;
    local_6a = 0x56;
    local_69 = 0;
  }
  if (unaff_r4 < DAT_8000faf8) {
    if (unaff_r4 < DAT_8000fb04) {
      if (unaff_r4 < DAT_8000fb10) {
        if (unaff_r4 < 1000) {
          cVar3 = (char)unaff_r4;
          if (unaff_r4 < 100) {
            if (unaff_r4 < 10) {
              local_58 = '\0';
              local_5b = cVar3 + (char)(uint)((ulonglong)unaff_r4 * (ulonglong)DAT_8000fb30 >> 0x23)
                                 * -10 + '0';
              local_5a = 'm';
              local_59 = 'V';
            }
            else {
              local_58 = 'V';
              local_57 = 0;
              cVar4 = (char)(uint)((ulonglong)unaff_r4 * (ulonglong)DAT_8000fb30 >> 0x23);
              local_5b = cVar4 + '0';
              local_5a = cVar3 + cVar4 * -10 + '0';
              local_59 = 'm';
            }
          }
          else {
            uVar6 = (uint)((ulonglong)unaff_r4 * (ulonglong)DAT_8000fb2c >> 0x25);
            local_5b = (char)uVar6 + '0';
            local_5a = (char)(uint)((ulonglong)(unaff_r4 + uVar6 * -100) * (ulonglong)DAT_8000fb30
                                   >> 0x23) + '0';
            local_59 = cVar3 + (char)(uint)((ulonglong)unaff_r4 * (ulonglong)DAT_8000fb30 >> 0x23) *
                               -10 + '0';
            local_58 = 'm';
            local_57 = 0x56;
            local_56 = 0;
          }
        }
        else {
          uVar6 = (uint)((ulonglong)unaff_r4 * (ulonglong)DAT_8000fb28 >> 0x26);
          local_5b = (char)uVar6 + '0';
          local_5a = '.';
          uVar11 = unaff_r4 + uVar6 * -1000;
          uVar6 = (uint)((ulonglong)uVar11 * (ulonglong)DAT_8000fb2c >> 0x25);
          local_59 = (char)uVar6 + '0';
          local_58 = (char)(uint)((ulonglong)(uVar11 + uVar6 * -100) * (ulonglong)DAT_8000fb30 >>
                                 0x23) + '0';
          local_57 = 0x56;
          local_56 = 0;
        }
      }
      else {
        uVar6 = (uint)((ulonglong)unaff_r4 * (ulonglong)DAT_8000fb24 >> 0x2d);
        local_5b = (char)uVar6 + '0';
        uVar11 = unaff_r4 + uVar6 * -10000;
        uVar6 = (uint)((ulonglong)uVar11 * (ulonglong)DAT_8000fb28 >> 0x26);
        local_5a = (char)uVar6 + '0';
        local_59 = '.';
        local_58 = (char)(uint)((ulonglong)(uVar11 + uVar6 * -1000) * (ulonglong)DAT_8000fb2c >>
                               0x25) + '0';
        local_57 = 0x56;
        local_56 = 0;
      }
    }
    else {
      local_5b = (char)((ulonglong)DAT_8000fb18 * (ulonglong)unaff_r4 + (ulonglong)DAT_8000fb18 >>
                       0x30) + '0';
      local_5a = (char)(uint)((ulonglong)
                              (unaff_r4 +
                              DAT_8000fb20 *
                              (uint)((ulonglong)DAT_8000fb18 * (ulonglong)unaff_r4 +
                                     (ulonglong)DAT_8000fb18 >> 0x30) * 0x20) *
                              (ulonglong)DAT_8000fb24 >> 0x2d) + '0';
      local_58 = 'V';
      uVar6 = unaff_r4 +
              (uint)((ulonglong)DAT_8000fb18 * (ulonglong)unaff_r4 + (ulonglong)DAT_8000fb18 >> 0x30
                    ) * DAT_8000fb20 * 0x20;
      local_57 = 0;
      local_59 = (char)(uint)((ulonglong)
                              (uVar6 + (uint)((ulonglong)uVar6 * (ulonglong)DAT_8000fb24 >> 0x2d) *
                                       -10000) * (ulonglong)DAT_8000fb28 >> 0x26) + '0';
    }
  }
  else {
    local_5b = (char)(uint)((ulonglong)unaff_r4 * (ulonglong)DAT_8000fb14 >> 0x32) + '0';
    local_5a = '.';
    uVar6 = unaff_r4 +
            (int)(short)(ushort)((ulonglong)unaff_r4 * (ulonglong)DAT_8000fb14 >> 0x32) * (int)sVar1
            * 0x40;
    local_59 = (char)((ulonglong)DAT_8000fb18 * (ulonglong)uVar6 + (ulonglong)DAT_8000fb18 >> 0x30)
               + '0';
    local_58 = (char)(uint)((ulonglong)
                            (uVar6 + DAT_8000fb20 *
                                     (uint)((ulonglong)DAT_8000fb18 * (ulonglong)uVar6 +
                                            (ulonglong)DAT_8000fb18 >> 0x30) * 0x20) *
                            (ulonglong)DAT_8000fb24 >> 0x2d) + '0';
    local_57 = 0x4b;
    local_56 = 0x56;
    local_55 = 0;
  }
  cVar3 = (char)uVar9;
  if ((byte)DAT_8000faf4[10] < 0x1c) {
    if (DAT_8000fb34 <= uVar9) {
      local_4c = (byte)((ulonglong)uVar9 * (ulonglong)DAT_8000fb38 >> 0x39) + 0x30;
      uVar7 = uVar9 + DAT_8000fb3c * (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb38 >> 0x39) *
                      0x100;
      uVar8 = (uint)((ulonglong)uVar7 * (ulonglong)DAT_8000fb40 >> 0x36);
      local_4b = (char)uVar8 + '0';
      local_4a = (char)(uint)((ulonglong)(uVar7 + DAT_8000fb44 * uVar8 * 0x80) *
                              (ulonglong)DAT_8000fb14 >> 0x32) + '0';
      local_48 = 0x53;
      local_49 = 'm';
      local_47 = 0;
      uVar9 = divide(DAT_8000fb04,(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb14 >> 0x32));
      if (uVar9 == 1000) {
        local_80 = '1';
        local_7f = '0';
        local_7e = 'H';
        local_7d = 'z';
        local_7c = 0;
      }
      else {
        uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb2c >> 0x25);
        local_80 = (char)uVar8 + '0';
        local_7f = '.';
        local_7e = (char)(uint)((ulonglong)(uVar9 + uVar8 * -100) * (ulonglong)DAT_8000fb30 >> 0x23)
                   + '0';
        local_7d = (char)uVar9 +
                   (char)(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb30 >> 0x23) * -10 + '0';
        local_7c = 0x48;
        local_7b = 0x7a;
        local_7a = 0;
      }
      goto LAB_80010394;
    }
    if (uVar9 < DAT_8000fb48) {
      if (uVar9 < DAT_8000faf8) {
        if (DAT_8000fb04 <= uVar9) {
          local_4c = (char)((ulonglong)DAT_8000fb18 * (ulonglong)uVar9 + (ulonglong)DAT_8000fb18 >>
                           0x30) + '0';
          local_4b = (char)(uint)((ulonglong)
                                  (uVar9 + DAT_8000fb20 *
                                           (uint)((ulonglong)DAT_8000fb18 * (ulonglong)uVar9 +
                                                  (ulonglong)DAT_8000fb18 >> 0x30) * 0x20) *
                                  (ulonglong)DAT_8000fb24 >> 0x2d) + '0';
          uVar8 = uVar9 + (uint)((ulonglong)DAT_8000fb18 * (ulonglong)uVar9 +
                                 (ulonglong)DAT_8000fb18 >> 0x30) * DAT_8000fb20 * 0x20;
          local_4a = (char)(uint)((ulonglong)
                                  (uVar8 + (uint)((ulonglong)uVar8 * (ulonglong)DAT_8000fb24 >> 0x2d
                                                 ) * -10000) * (ulonglong)DAT_8000fb28 >> 0x26) +
                     '0';
          local_49 = 'u';
          local_48 = 0x53;
          local_47 = 0;
          uVar9 = divide(DAT_8000fb04,(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb28 >> 0x26));
          if (uVar9 == 1000) {
            local_80 = '1';
            local_7f = '0';
            local_7e = 'K';
            local_7c = 0x7a;
            local_7d = 'H';
            local_7b = 0;
          }
          else {
            uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb2c >> 0x25);
            local_80 = (char)uVar8 + '0';
            local_7f = '.';
            local_7e = (char)(uint)((ulonglong)(uVar9 + uVar8 * -100) * (ulonglong)DAT_8000fb30 >>
                                   0x23) + '0';
            local_7d = (char)uVar9 +
                       (char)(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb30 >> 0x23) * -10 + '0';
            local_7c = 0x4b;
            local_7b = 0x48;
            local_7a = 0x7a;
            local_79 = 0;
          }
          goto LAB_80010394;
        }
        if (uVar9 < DAT_8000fb10) {
          if (uVar9 < 1000) {
            if (99 < uVar9) {
              uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb2c >> 0x25);
              local_4c = (char)uVar8 + '0';
              local_4b = (char)(uint)((ulonglong)(uVar9 + uVar8 * -100) * (ulonglong)DAT_8000fb30 >>
                                     0x23) + '0';
              local_4a = cVar3 + (char)(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb30 >> 0x23) *
                                 -10 + '0';
              local_48 = 0x53;
              local_49 = 'n';
              local_47 = 0;
              uVar9 = divide(DAT_8000fb04,uVar9);
              if (uVar9 != 1000) {
                uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)uVar7 >> 0x25);
                local_80 = (char)uVar8 + '0';
                local_7f = '.';
                local_7e = (char)(uint)((ulonglong)(uVar9 + uVar8 * -100) * (ulonglong)uVar12 >>
                                       0x23) + '0';
                local_7d = (char)uVar9 +
                           (char)(uint)((ulonglong)uVar9 * (ulonglong)uVar12 >> 0x23) * -10 + '0';
                local_7c = 0x4d;
                local_7b = 0x48;
                local_7a = 0x7a;
                local_79 = 0;
                goto LAB_80010394;
              }
              goto LAB_8001003c;
            }
            if (9 < uVar9) {
              local_48 = 0;
              cVar4 = (char)(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb30 >> 0x23);
              local_4c = cVar4 + '0';
              local_4b = cVar3 + cVar4 * -10 + '0';
              local_4a = 'n';
              local_49 = 'S';
              uVar9 = divide(DAT_8000fb10,uVar9);
              if (uVar9 != 1000) {
                uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb2c >> 0x25);
                local_80 = (char)uVar8 + '0';
                local_7f = (char)(uint)((ulonglong)(uVar9 + uVar8 * -100) * (ulonglong)uVar12 >>
                                       0x23) + '0';
                local_7e = '.';
                local_7d = (char)uVar9 +
                           (char)(uint)((ulonglong)uVar9 * (ulonglong)uVar12 >> 0x23) * -10 + '0';
                local_7c = 0x4d;
                local_7b = 0x48;
                local_7a = 0x7a;
                local_79 = 0;
                goto LAB_80010394;
              }
              goto LAB_8000fe14;
            }
            if (uVar9 == 0) goto LAB_80010394;
            local_4c = cVar3 + (char)(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb30 >> 0x23) *
                               -10 + '0';
            local_4b = 'n';
            local_4a = 'S';
            local_49 = '\0';
            if (uVar9 == 1) goto LAB_80010258;
            uVar8 = divide(1000,uVar9);
            uVar9 = (uint)((ulonglong)uVar8 * (ulonglong)DAT_8000fb2c >> 0x25);
            local_80 = (char)uVar9 + '0';
            local_7f = (char)(uint)((ulonglong)(uVar8 + uVar9 * -100) * (ulonglong)uVar12 >> 0x23) +
                       '0';
            local_7e = (char)uVar8 +
                       (char)(uint)((ulonglong)uVar8 * (ulonglong)uVar12 >> 0x23) * -10 + '0';
            local_7d = 'M';
          }
          else {
            uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb28 >> 0x26);
            local_4c = (char)uVar8 + '0';
            local_4b = '.';
            uVar6 = uVar9 + uVar8 * -1000;
            uVar8 = (uint)((ulonglong)uVar6 * (ulonglong)DAT_8000fb2c >> 0x25);
            local_4a = (char)uVar8 + '0';
            local_49 = (char)(uint)((ulonglong)(uVar6 + uVar8 * -100) * (ulonglong)DAT_8000fb30 >>
                                   0x23) + '0';
            local_48 = 0x75;
            local_47 = 0x53;
            local_46 = 0;
            uVar9 = divide(DAT_8000fb04,(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb30 >> 0x23));
            if (uVar9 == 1000) {
              local_80 = '1';
              local_7f = 'M';
              local_7e = 'H';
              local_7d = 'z';
              local_7c = 0;
              goto LAB_80010394;
            }
            uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)uVar7 >> 0x25);
            local_80 = (char)uVar8 + '0';
            local_7f = (char)(uint)((ulonglong)(uVar9 + uVar8 * -100) * (ulonglong)uVar12 >> 0x23) +
                       '0';
            local_7e = (char)uVar9 +
                       (char)(uint)((ulonglong)uVar9 * (ulonglong)uVar12 >> 0x23) * -10 + '0';
            local_7d = 'K';
          }
        }
        else {
          uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb24 >> 0x2d);
          local_4c = (char)uVar8 + '0';
          uVar12 = uVar9 + uVar8 * -10000;
          uVar8 = (uint)((ulonglong)uVar12 * (ulonglong)DAT_8000fb28 >> 0x26);
          local_4b = (char)uVar8 + '0';
          local_4a = '.';
          local_49 = (char)(uint)((ulonglong)(uVar12 + uVar8 * -1000) * (ulonglong)DAT_8000fb2c >>
                                 0x25) + '0';
          local_48 = 0x75;
          local_47 = 0x53;
          local_46 = 0;
          uVar9 = divide(DAT_8000fb04,(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb2c >> 0x25));
          if (uVar9 != 1000) {
            uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)uVar7 >> 0x25);
            local_80 = (char)uVar8 + '0';
            local_7f = (char)(uint)((ulonglong)(uVar9 + uVar8 * -100) * (ulonglong)DAT_8000fb30 >>
                                   0x23) + '0';
            local_7e = '.';
            local_7d = (char)uVar9 +
                       (char)(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb30 >> 0x23) * -10 + '0';
            local_7c = 0x4b;
            local_7b = 0x48;
            local_7a = 0x7a;
            local_79 = 0;
            goto LAB_80010394;
          }
          local_80 = '1';
          local_7f = '0';
          local_7e = '0';
          local_7d = 'K';
        }
        goto LAB_8000fc38;
      }
      local_4c = (char)(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb14 >> 0x32) + '0';
      local_4b = '.';
      uVar8 = uVar9 + (int)(short)(ushort)((ulonglong)uVar9 * (ulonglong)DAT_8000fb14 >> 0x32) *
                      (int)sVar1 * 0x40;
      local_4a = (char)((ulonglong)DAT_8000fb18 * (ulonglong)uVar8 + (ulonglong)DAT_8000fb18 >> 0x30
                       ) + '0';
      local_49 = (char)(uint)((ulonglong)
                              (uVar8 + DAT_8000fb20 *
                                       (uint)((ulonglong)DAT_8000fb18 * (ulonglong)uVar8 +
                                              (ulonglong)DAT_8000fb18 >> 0x30) * 0x20) *
                              (ulonglong)DAT_8000fb24 >> 0x2d) + '0';
      local_48 = 0x6d;
      local_47 = 0x53;
      local_46 = 0;
      uVar9 = divide(DAT_8000fb04,(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb24 >> 0x2d));
      if (uVar9 == 1000) {
        local_80 = '1';
        local_7f = 'K';
        local_7e = 'H';
        local_7d = 'z';
        local_7c = 0;
        goto LAB_80010394;
      }
      uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb2c >> 0x25);
      local_80 = (char)uVar8 + '0';
      local_7f = (char)(uint)((ulonglong)(uVar9 + uVar8 * -100) * (ulonglong)DAT_8000fb30 >> 0x23) +
                 '0';
      local_7e = (char)uVar9 +
                 (char)(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb30 >> 0x23) * -10 + '0';
    }
    else {
      uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb40 >> 0x36);
      local_4c = (char)uVar8 + '0';
      uVar8 = uVar9 + DAT_8000fb44 * uVar8 * 0x80;
      lVar2 = (ulonglong)uVar8 * (ulonglong)DAT_8000fb14;
      local_4b = (char)(uint)((ulonglong)lVar2 >> 0x32) + '0';
      local_4a = '.';
      local_49 = (char)((ulonglong)DAT_8000fb18 *
                        (ulonglong)
                        (uVar8 + (int)(short)(ushort)((ulonglong)lVar2 >> 0x32) * (int)sVar1 * 0x40)
                        + (ulonglong)DAT_8000fb18 >> 0x30) + '0';
      local_48 = 0x6d;
      local_47 = 0x53;
      local_46 = 0;
      uVar9 = divide(DAT_8000fb04,
                     (uint)((ulonglong)DAT_8000fb18 * (ulonglong)uVar9 + (ulonglong)DAT_8000fb18 >>
                           0x30));
      if (uVar9 != 1000) {
        uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb2c >> 0x25);
        local_80 = (char)uVar8 + '0';
        local_7f = (char)(uint)((ulonglong)(uVar9 + uVar8 * -100) * (ulonglong)DAT_8000fb30 >> 0x23)
                   + '0';
        local_7e = '.';
        local_7d = (char)uVar9 +
                   (char)(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb30 >> 0x23) * -10 + '0';
        local_7c = 0x48;
        local_7b = 0x7a;
        local_7a = 0;
        goto LAB_80010394;
      }
      local_80 = '1';
      local_7f = '0';
      local_7e = '0';
    }
  }
  else {
    if (0x1d < (byte)DAT_8000faf4[10]) goto LAB_80010394;
    if (uVar9 < DAT_8000fb04) {
      if (uVar9 < DAT_8000fb10) {
        if (uVar9 < 1000) {
          if (uVar9 < 100) goto LAB_80010394;
          uVar6 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb2c >> 0x25);
          local_4c = (char)uVar6 + '0';
          local_4b = (char)(uint)((ulonglong)(uVar9 + uVar6 * -100) * (ulonglong)DAT_8000fb30 >>
                                 0x23) + '0';
          local_4a = cVar3 + (char)(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb30 >> 0x23) * -10
                     + '0';
          local_49 = 'p';
          local_48 = 0x53;
          local_47 = 0;
          uVar9 = divide(DAT_8000fb10,uVar6);
          if (uVar9 != uVar8) {
            uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb28 >> 0x26);
            local_80 = (char)uVar8 + '0';
            local_7f = '.';
            uVar9 = uVar9 + uVar8 * -1000;
            uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)uVar7 >> 0x25);
            local_7e = (char)uVar8 + '0';
            local_7d = (char)(uint)((ulonglong)(uVar9 + uVar8 * -100) * (ulonglong)uVar12 >> 0x23) +
                       '0';
            local_7c = 0x47;
            local_7b = 0x48;
            local_7a = 0x7a;
            local_79 = 0;
            goto LAB_80010394;
          }
          local_80 = '1';
          local_7f = '0';
          local_7e = 'G';
          goto LAB_80010060;
        }
        uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb28 >> 0x26);
        local_4c = (char)uVar8 + '0';
        local_4b = '.';
        uVar9 = uVar9 + uVar8 * -1000;
        uVar6 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb2c >> 0x25);
        local_4a = (char)uVar6 + '0';
        local_49 = (char)(uint)((ulonglong)(uVar9 + uVar6 * -100) * (ulonglong)DAT_8000fb30 >> 0x23)
                   + '0';
        local_48 = 0x6e;
        local_47 = 0x53;
        local_46 = 0;
        uVar9 = divide(1000,uVar8);
        if (uVar9 == 1000) {
LAB_80010258:
          local_80 = '1';
          local_7f = 'G';
          local_7e = 'H';
          local_7d = 'z';
          local_7c = 0;
          goto LAB_80010394;
        }
        uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)uVar7 >> 0x25);
        local_80 = (char)uVar8 + '0';
        local_7f = (char)(uint)((ulonglong)(uVar9 + uVar8 * -100) * (ulonglong)uVar12 >> 0x23) + '0'
        ;
        local_7e = (char)uVar9 + (char)(uint)((ulonglong)uVar9 * (ulonglong)uVar12 >> 0x23) * -10 +
                   '0';
        local_7d = 'M';
      }
      else {
        uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb24 >> 0x2d);
        local_4c = (char)uVar8 + '0';
        uVar12 = uVar9 + uVar8 * -10000;
        uVar8 = (uint)((ulonglong)uVar12 * (ulonglong)DAT_8000fb28 >> 0x26);
        local_4b = (char)uVar8 + '0';
        uVar7 = DAT_8000fb28 * 5;
        local_4a = '.';
        local_49 = (char)(uint)((ulonglong)(uVar12 + uVar8 * -1000) * (ulonglong)uVar7 >> 0x25) +
                   '0';
        local_48 = 0x6e;
        local_47 = 0x53;
        local_46 = 0;
        uVar9 = divide(DAT_8000fb10,(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb28 >> 0x26));
        if (uVar9 != 1000) {
          uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)uVar7 >> 0x25);
          local_80 = (char)uVar8 + '0';
          local_7f = (char)(uint)((ulonglong)(uVar9 + uVar8 * -100) * (ulonglong)DAT_8000fb30 >>
                                 0x23) + '0';
          local_7e = '.';
          local_7d = (char)uVar9 +
                     (char)(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb30 >> 0x23) * -10 + '0';
          local_7c = 0x4d;
          local_7b = 0x48;
          local_7a = 0x7a;
          local_79 = 0;
          goto LAB_80010394;
        }
LAB_8000fe14:
        local_80 = '1';
        local_7f = '0';
        local_7e = '0';
        local_7d = 'M';
      }
LAB_8000fc38:
      local_7b = 0x7a;
      local_7c = 0x48;
      local_7a = 0;
      goto LAB_80010394;
    }
    local_4c = (char)((ulonglong)DAT_8000fb18 * (ulonglong)uVar9 + (ulonglong)DAT_8000fb18 >> 0x30)
               + '0';
    local_4b = (char)(uint)((ulonglong)
                            (uVar9 + DAT_8000fb20 *
                                     (uint)((ulonglong)DAT_8000fb18 * (ulonglong)uVar9 +
                                            (ulonglong)DAT_8000fb18 >> 0x30) * 0x20) *
                            (ulonglong)DAT_8000fb24 >> 0x2d) + '0';
    uVar8 = uVar9 + (uint)((ulonglong)DAT_8000fb18 * (ulonglong)uVar9 + (ulonglong)DAT_8000fb18 >>
                          0x30) * DAT_8000fb20 * 0x20;
    local_4a = (char)(uint)((ulonglong)
                            (uVar8 + (uint)((ulonglong)uVar8 * (ulonglong)DAT_8000fb24 >> 0x2d) *
                                     -10000) * (ulonglong)DAT_8000fb28 >> 0x26) + '0';
    local_49 = 'n';
    local_48 = 0x53;
    local_47 = 0;
    uVar9 = divide(DAT_8000fb04,(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb28 >> 0x26));
    if (uVar9 != 1000) {
      uVar8 = (uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb2c >> 0x25);
      local_80 = (char)uVar8 + '0';
      local_7f = '.';
      local_7e = (char)(uint)((ulonglong)(uVar9 + uVar8 * -100) * (ulonglong)DAT_8000fb30 >> 0x23) +
                 '0';
      local_7d = (char)uVar9 +
                 (char)(uint)((ulonglong)uVar9 * (ulonglong)DAT_8000fb30 >> 0x23) * -10 + '0';
      local_7c = 0x4d;
      local_7b = 0x48;
      local_7a = 0x7a;
      local_79 = 0;
      goto LAB_80010394;
    }
LAB_8001003c:
    local_80 = '1';
    local_7f = '0';
    local_7e = 'M';
  }
LAB_80010060:
  local_7c = 0x7a;
  local_7d = 'H';
  local_7b = 0;
LAB_80010394:
  iVar10 = DAT_800104a8;
  iVar13 = 0x33;
  if (*(char *)(DAT_800104a8 + 0x292) != '\0') {
    local_2c = 0x33;
    iVar13 = 0x53;
    local_30 = 0x43;
  }
  if (*(char *)(DAT_800104a8 + 0x29a) != '\0') {
    iVar14 = iVar13;
    if (*pcVar5 != '\0') {
      iVar14 = iVar13 + 0x10;
      unaff_r10 = iVar13;
    }
    ypos = (ushort)unaff_r10;
    iVar13 = iVar14;
    if (pcVar5[0xc] != '\0') {
      iVar13 = iVar14 + 0x10;
      local_34 = iVar14;
    }
  }
  if (*(char *)(DAT_800104a8 + 0x292) == '\0' && *(char *)(DAT_800104a8 + 0x29a) == '\0') {
    return;
  }
  set_display_fg_color(DAT_800104ac);
  display_fill_rounded_rect(5,0x31,0x66,(short)iVar13 - 1,2);
  set_font_paint_mode(2);
  select_font(PTR_FONT_0_800104b0);
  set_display_fg_color(0xffffff);
  if (*(char *)(iVar10 + 0x292) != '\0') {
    display_text(&local_50,10,(ushort)local_2c);
    display_text(&local_84,10,(ushort)local_30);
  }
  if (*(char *)(iVar10 + 0x29a) == '\0') {
    return;
  }
  display_text(&local_74,10,ypos);
  display_text(&local_60,10,(ushort)local_34);
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_move_speed(int mode)

{
  int iVar1;
  int iVar2;
  ushort *puVar3;
  uint uVar4;
  int iVar5;
  undefined *puVar6;
  int iVar7;
  bool bVar8;
  
  set_frame_to_global_pointer();
  uVar4 = 0;
  bVar8 = *(char *)(DAT_800105d0 + 0x16) == '\0';
  puVar6 = PTR_BITMAP_MOVE_SLOW_800105d8;
  if (bVar8) {
    puVar6 = PTR_BITMAP_MOVE_FAST_800105dc;
  }
  iVar5 = *Global_Frame_Buffer_Pointer;
  if (bVar8) {
    do {
      iVar2 = 0;
      iVar1 = 0x28;
      puVar3 = (ushort *)(puVar6 + uVar4 * 0x50);
      do {
        iVar7 = iVar2 + uVar4 * 800;
        if (mode == 0) {
          *(ushort *)(iVar5 + iVar7 * 2 + 0x2318) = *puVar3;
        }
        else {
          *(ushort *)(iVar5 + iVar7 * 2 + 0x2318) = ~*puVar3;
        }
        iVar1 = iVar1 + -1;
        iVar2 = iVar2 + 1;
        puVar3 = puVar3 + 1;
      } while (iVar1 != 0);
      uVar4 = uVar4 + 1 & 0xfffeffff;
    } while (uVar4 < 0x24);
  }
  else {
    do {
      iVar2 = 0;
      iVar1 = 0x28;
      puVar3 = (ushort *)(puVar6 + uVar4 * 0x50);
      do {
        iVar7 = iVar2 + uVar4 * 800;
        if (mode == 0) {
          *(ushort *)(iVar5 + iVar7 * 2 + 0x2318) = *puVar3;
        }
        else {
          *(ushort *)(iVar5 + iVar7 * 2 + 0x2318) = ~*puVar3;
        }
        iVar1 = iVar1 + -1;
        iVar2 = iVar2 + 1;
        puVar3 = puVar3 + 1;
      } while (iVar1 != 0);
      uVar4 = uVar4 + 1 & 0xfffeffff;
    } while (uVar4 < 0x24);
  }
  iVar1 = Start_Of_Screen_Mem;
  iVar5 = Screen_Frame_Buffer;
  uVar4 = 5;
  do {
    iVar2 = uVar4 * 800 + 0x1ec;
    copy_short((void *)(iVar1 + iVar2 * 2),(void *)(iVar5 + iVar2 * 2),0x29);
    uVar4 = uVar4 + 1;
  } while (uVar4 < 0x29);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void display_file_select_menu(void)

{
  int iVar1;
  undefined2 uVar2;
  undefined *puVar3;
  int *piVar4;
  undefined2 *puVar5;
  undefined2 *puVar6;
  uint uVar7;
  undefined4 uVar8;
  int iVar9;
  
  set_screen_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(0,0,0x2da,0x1e0);
  piVar4 = Global_Frame_Buffer_Pointer;
  puVar3 = PTR_BITMAP_FILE_SELECT_MENU_8001069c;
  uVar7 = 0;
  do {
    puVar5 = (undefined2 *)(puVar3 + uVar7 * 0x118);
    puVar6 = (undefined2 *)(*piVar4 + uVar7 * 0x640 + 0x5b4);
    *puVar6 = *puVar5;
    uVar8 = *(undefined4 *)(puVar5 + 2);
    iVar9 = 0x22;
    do {
      uVar2 = puVar5[4];
      puVar6[1] = (short)uVar8;
      uVar8 = *(undefined4 *)(puVar5 + 6);
      iVar9 = iVar9 + -1;
      puVar6 = puVar6 + 2;
      *puVar6 = uVar2;
      puVar5 = puVar5 + 4;
    } while (iVar9 != 0);
    iVar9 = uVar7 * 800;
    iVar1 = uVar7 * 0x46;
    uVar7 = uVar7 + 1 & 0xfffeffff;
    *(short *)(*piVar4 + (iVar9 + 0x45) * 2 + 0x5b4) =
         (short)*(undefined4 *)(puVar3 + (iVar1 + 0x45) * 4);
  } while (uVar7 < 0x1e0);
  *Global_Frame_Buffer_Pointer = Screen_Frame_Buffer;
  return;
}



void FUN_800106a4(int param_1)

{
  int iVar1;
  ushort uVar2;
  undefined2 uVar3;
  undefined *puVar4;
  int *piVar5;
  ushort *puVar6;
  undefined2 *puVar7;
  ushort *puVar8;
  undefined2 *puVar9;
  uint uVar10;
  undefined *puVar11;
  undefined4 uVar12;
  int iVar13;
  
  set_screen_to_global_pointer();
  piVar5 = Global_Frame_Buffer_Pointer;
  puVar4 = PTR_BITMAP_FILE_SELECT_MENU_800107ec;
  if (param_1 == 0) {
    uVar10 = 0xb4;
    do {
      puVar11 = puVar4 + uVar10 * 0x118;
      puVar9 = (undefined2 *)(*piVar5 + uVar10 * 0x640 + 0x5c2);
      *puVar9 = *(undefined2 *)(puVar11 + 0x1c);
      uVar12 = *(undefined4 *)(puVar11 + 0x20);
      iVar13 = 0x1b;
      puVar7 = (undefined2 *)(puVar11 + 0x1c);
      do {
        uVar3 = puVar7[4];
        puVar9[1] = (short)uVar12;
        uVar12 = *(undefined4 *)(puVar7 + 6);
        iVar13 = iVar13 + -1;
        puVar9 = puVar9 + 2;
        *puVar9 = uVar3;
        puVar7 = puVar7 + 4;
      } while (iVar13 != 0);
      iVar13 = uVar10 * 800;
      iVar1 = uVar10 * 0x46;
      uVar10 = uVar10 + 1 & 0xfffeffff;
      *(undefined2 *)(*piVar5 + (iVar13 + 0x37) * 2 + 0x5c2) =
           *(undefined2 *)(puVar4 + (iVar1 + 0x37) * 4 + 0x1c);
    } while (uVar10 < 0xdc);
    return;
  }
  uVar10 = 0xb4;
  do {
    puVar11 = puVar4 + uVar10 * 0x118;
    puVar8 = (ushort *)(*piVar5 + uVar10 * 0x640 + 0x5c2);
    *puVar8 = ~*(ushort *)(puVar11 + 0x1c);
    uVar12 = *(undefined4 *)(puVar11 + 0x20);
    iVar13 = 0x1b;
    puVar6 = (ushort *)(puVar11 + 0x1c);
    do {
      uVar2 = puVar6[4];
      puVar8[1] = ~(ushort)uVar12;
      iVar13 = iVar13 + -1;
      uVar12 = *(undefined4 *)(puVar6 + 6);
      puVar8 = puVar8 + 2;
      *puVar8 = ~uVar2;
      puVar6 = puVar6 + 4;
    } while (iVar13 != 0);
    iVar13 = uVar10 * 0x46;
    iVar1 = uVar10 * 800;
    uVar10 = uVar10 + 1 & 0xfffeffff;
    *(ushort *)(*piVar5 + (iVar1 + 0x37) * 2 + 0x5c2) =
         ~*(ushort *)(puVar4 + (iVar13 + 0x37) * 4 + 0x1c);
  } while (uVar10 < 0xdc);
  return;
}



void FUN_800107f4(int param_1)

{
  int iVar1;
  ushort uVar2;
  undefined2 uVar3;
  undefined *puVar4;
  int *piVar5;
  ushort *puVar6;
  undefined2 *puVar7;
  ushort *puVar8;
  undefined2 *puVar9;
  uint uVar10;
  undefined *puVar11;
  undefined4 uVar12;
  int iVar13;
  
  set_screen_to_global_pointer();
  piVar5 = Global_Frame_Buffer_Pointer;
  puVar4 = PTR_BITMAP_FILE_SELECT_MENU_8001093c;
  if (param_1 == 0) {
    uVar10 = 100;
    do {
      puVar11 = puVar4 + uVar10 * 0x118;
      puVar9 = (undefined2 *)(*piVar5 + uVar10 * 0x640 + 0x5c2);
      *puVar9 = *(undefined2 *)(puVar11 + 0x1c);
      uVar12 = *(undefined4 *)(puVar11 + 0x20);
      iVar13 = 0x1b;
      puVar7 = (undefined2 *)(puVar11 + 0x1c);
      do {
        uVar3 = puVar7[4];
        puVar9[1] = (short)uVar12;
        uVar12 = *(undefined4 *)(puVar7 + 6);
        iVar13 = iVar13 + -1;
        puVar9 = puVar9 + 2;
        *puVar9 = uVar3;
        puVar7 = puVar7 + 4;
      } while (iVar13 != 0);
      iVar13 = uVar10 * 800;
      iVar1 = uVar10 * 0x46;
      uVar10 = uVar10 + 1 & 0xfffeffff;
      *(undefined2 *)(*piVar5 + (iVar13 + 0x37) * 2 + 0x5c2) =
           *(undefined2 *)(puVar4 + (iVar1 + 0x37) * 4 + 0x1c);
    } while (uVar10 < 0x8c);
    return;
  }
  uVar10 = 100;
  do {
    puVar11 = puVar4 + uVar10 * 0x118;
    puVar8 = (ushort *)(*piVar5 + uVar10 * 0x640 + 0x5c2);
    *puVar8 = ~*(ushort *)(puVar11 + 0x1c);
    uVar12 = *(undefined4 *)(puVar11 + 0x20);
    iVar13 = 0x1b;
    puVar6 = (ushort *)(puVar11 + 0x1c);
    do {
      uVar2 = puVar6[4];
      puVar8[1] = ~(ushort)uVar12;
      iVar13 = iVar13 + -1;
      uVar12 = *(undefined4 *)(puVar6 + 6);
      puVar8 = puVar8 + 2;
      *puVar8 = ~uVar2;
      puVar6 = puVar6 + 4;
    } while (iVar13 != 0);
    iVar13 = uVar10 * 0x46;
    iVar1 = uVar10 * 800;
    uVar10 = uVar10 + 1 & 0xfffeffff;
    *(ushort *)(*piVar5 + (iVar1 + 0x37) * 2 + 0x5c2) =
         ~*(ushort *)(puVar4 + (iVar13 + 0x37) * 4 + 0x1c);
  } while (uVar10 < 0x8c);
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_run_stop_text(int mode)

{
  int *piVar1;
  undefined *puVar2;
  undefined *puVar3;
  int iVar4;
  ushort *puVar5;
  int iVar6;
  ushort *puVar7;
  uint uVar8;
  int iVar9;
  ushort uVar10;
  
  set_frame_to_global_pointer();
  puVar3 = PTR_TEXT_BITMAP_RUN_80010a2c;
  puVar2 = PTR_TEXT_BITMAP_STOP_80010a28;
  piVar1 = Global_Frame_Buffer_Pointer;
  if (mode == 0) {
    uVar8 = 0;
    do {
      memcpy((void *)(*piVar1 + uVar8 * 0x640 + 0x4bce),puVar3 + uVar8 * 0x44,0x44);
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < 0x12);
  }
  else {
    uVar8 = 0;
    do {
      iVar9 = 0x22;
      puVar5 = (ushort *)(*piVar1 + uVar8 * 0x640 + 0x4bce);
      puVar7 = (ushort *)(puVar2 + uVar8 * 0x44);
      do {
        uVar10 = 0xf800;
        if (*puVar7 != 0) {
          uVar10 = ~*puVar7;
        }
        iVar9 = iVar9 + -1;
        *puVar5 = uVar10;
        puVar5 = puVar5 + 1;
        puVar7 = puVar7 + 1;
      } while (iVar9 != 0);
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < 0x12);
  }
  iVar4 = Start_Of_Screen_Mem;
  iVar9 = Screen_Frame_Buffer;
  uVar8 = 10;
  do {
    iVar6 = uVar8 * 800 + 0x62;
    copy_short((void *)(iVar4 + iVar6 * 2),(void *)(iVar9 + iVar6 * 2),0x2d);
    uVar8 = uVar8 + 1;
  } while (uVar8 < 0x20);
  return;
}



void FUN_80010a30(void)

{
  int *piVar1;
  int iVar2;
  ushort uVar3;
  ushort uVar4;
  ushort uVar5;
  int iVar6;
  int iVar7;
  undefined2 *puVar8;
  ushort *puVar9;
  uint uVar10;
  uint uVar11;
  int iVar12;
  short sVar13;
  undefined2 *puVar14;
  
  piVar1 = Global_Frame_Buffer_Pointer;
  iVar12 = *Global_Frame_Buffer_Pointer;
  uVar3 = convert_color(DAT_80010bc0);
  uVar4 = convert_color(DAT_80010bc4);
  set_screen_to_global_pointer();
  iVar2 = DAT_80010bc8;
  uVar11 = 0;
  do {
    memcpy((void *)(iVar2 + uVar11 * 0x640),(void *)(*piVar1 + uVar11 * 0x640),0x640);
    iVar6 = DAT_80010bcc;
    uVar11 = uVar11 + 1 & 0xfffeffff;
  } while (uVar11 < 0x1e0);
  uVar11 = 0xef;
  do {
    iVar7 = 0;
    sVar13 = 0x6e;
    puVar9 = (ushort *)(*piVar1 + uVar11 * 0x640 + 0x26c);
    do {
      uVar10 = *(uint *)(iVar6 + ((iVar7 + uVar11 * 0x6e) - 0x66b2 & 0xffff) * 4) & 0xffff;
      uVar5 = uVar3;
      if ((uVar10 != 0) && (uVar5 = (ushort)uVar10, uVar10 == 0xf800)) {
        uVar5 = uVar4;
      }
      sVar13 = sVar13 + -1;
      iVar7 = iVar7 + 1;
      *puVar9 = uVar5;
      puVar9 = puVar9 + 1;
    } while (sVar13 != 0);
    uVar11 = uVar11 + 1 & 0xfffeffff;
  } while (uVar11 < 0x11e);
  delay_2(500);
  uVar11 = 0xef;
  do {
    iVar6 = *piVar1;
    if ((iVar6 - iVar2 < 1) || (uVar10 = 0x136, 0x6d < iVar6 - iVar2)) {
      FUN_80000730(iVar6 + uVar11 * 0x640 + 0x26c,iVar2 + uVar11 * 0x640 + 0x26c,0xdc);
    }
    else {
      do {
        iVar7 = uVar10 + uVar11 * 800;
        puVar8 = (undefined2 *)(iVar2 + iVar7 * 2);
        puVar14 = (undefined2 *)(iVar6 + iVar7 * 2);
        uVar10 = uVar10 + 2 & 0xfffeffff;
        *puVar14 = *puVar8;
        puVar14[1] = puVar8[1];
      } while (uVar10 < 0x1a4);
    }
    uVar11 = uVar11 + 1 & 0xfffeffff;
  } while (uVar11 < 0x11e);
  *piVar1 = iVar12;
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_system_settings_menu(void)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  ushort uVar6;
  ushort uVar7;
  uint uVar8;
  int iVar9;
  ushort *puVar10;
  uint uVar11;
  int iVar12;
  ushort uVar13;
  uint uVar14;
  ushort *puVar15;
  
  uVar5 = convert_color(DAT_80010ce4);
  uVar6 = convert_color(0);
  uVar7 = convert_color(0xffffff);
  uVar8 = DAT_80010cf4;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_DAT_80010cec;
  puVar1 = PTR_BITMAP_SYSTEM_SETTINGS_MENU_80010ce8;
  uVar11 = 0;
  do {
    iVar12 = 0xf4;
    puVar10 = (ushort *)(puVar1 + uVar11 * 0x1e8);
    puVar15 = (ushort *)
              (*piVar3 +
              ((uint)*(ushort *)(puVar2 + 4) + (*(ushort *)(puVar2 + 6) + uVar11) * 800) * 2);
    do {
      uVar14 = (uint)*puVar10;
      uVar13 = uVar5;
      if (((uVar14 != 0) && (uVar13 = uVar6, uVar14 != 0xf800)) &&
         (uVar13 = *puVar10, uVar14 == uVar8)) {
        uVar13 = uVar7;
      }
      iVar12 = iVar12 + -1;
      *puVar15 = uVar13;
      puVar10 = puVar10 + 1;
      puVar15 = puVar15 + 1;
    } while (iVar12 != 0);
    uVar11 = uVar11 + 1 & 0xfffeffff;
  } while (uVar11 < DAT_80010cf8);
  set_display_fg_color(DAT_80010cfc);
  display_draw_rect(*(ushort *)(puVar2 + 4),*(ushort *)(puVar2 + 6),*(ushort *)(puVar2 + 4) + 0xf3,
                    *(ushort *)(puVar2 + 6) + 0x125);
  display_sys_menu_disp_brightness(0);
  display_sys_menu_grid_brightness(0);
  display_sys_menu_always_trigger_50();
  display_sys_menu_xymode_display();
  display_sys_menu_highlight_item();
  iVar4 = Start_Of_Screen_Mem;
  iVar12 = Screen_Frame_Buffer;
  uVar11 = (uint)*(ushort *)(puVar2 + 6);
  uVar8 = (uint)*(ushort *)(puVar2 + 4);
  uVar14 = uVar11 + 0x126 & 0xfffeffff;
  if (uVar14 <= uVar11) {
    return;
  }
  do {
    iVar9 = uVar8 + uVar11 * 800;
    copy_short((void *)(iVar4 + iVar9 * 2),(void *)(iVar12 + iVar9 * 2),
               ((uVar8 + 0xf3 & 0xfffeffff) - uVar8) + 1);
    uVar11 = uVar11 + 1;
  } while (uVar11 < uVar14);
  return;
}



void display_sys_menu_always_trigger_50(void)

{
  ushort uVar1;
  undefined *puVar2;
  uint color;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  
  color = DAT_80010efc;
  puVar2 = PTR_DAT_80010ef8;
  if (*(char *)(DAT_80010f00 + 4) == '\0') {
    set_display_fg_color(DAT_80010f04);
    display_fill_rounded_rect
              (*(short *)(puVar2 + 4) + 0xb0,*(short *)(puVar2 + 6) + 0x89,
               *(short *)(puVar2 + 4) + 0xdc,*(short *)(puVar2 + 6) + 0x9c,2);
    set_display_fg_color(color);
    display_draw_rounded_rect
              (*(short *)(puVar2 + 4) + 0xb0,*(short *)(puVar2 + 6) + 0x89,
               *(short *)(puVar2 + 4) + 0xdc,*(short *)(puVar2 + 6) + 0x9c,2);
    set_display_fg_color(color);
    display_fill_rounded_rect
              (*(short *)(puVar2 + 4) + 0xb3,*(short *)(puVar2 + 6) + 0x8c,
               *(short *)(puVar2 + 4) + 0xc6,*(short *)(puVar2 + 6) + 0x99,0);
    set_display_fg_color(0);
    display_draw_vert_line
              (*(short *)(puVar2 + 4) + 0xb8,*(short *)(puVar2 + 6) + 0x8e,
               *(short *)(puVar2 + 6) + 0x97);
    display_draw_vert_line
              (*(short *)(puVar2 + 4) + 0xbb,*(short *)(puVar2 + 6) + 0x8e,
               *(short *)(puVar2 + 6) + 0x97);
    display_draw_vert_line
              (*(short *)(puVar2 + 4) + 0xbe,*(short *)(puVar2 + 6) + 0x8e,
               *(short *)(puVar2 + 6) + 0x97);
    uVar1 = *(ushort *)(puVar2 + 6);
    iVar3 = *(ushort *)(puVar2 + 4) + 0xc1;
  }
  else {
    set_display_fg_color(0xff00);
    display_fill_rounded_rect
              (*(short *)(puVar2 + 4) + 0xb0,*(short *)(puVar2 + 6) + 0x89,
               *(short *)(puVar2 + 4) + 0xdc,*(short *)(puVar2 + 6) + 0x9c,2);
    set_display_fg_color(0x8800);
    display_draw_rounded_rect
              (*(short *)(puVar2 + 4) + 0xb0,*(short *)(puVar2 + 6) + 0x89,
               *(short *)(puVar2 + 4) + 0xdc,*(short *)(puVar2 + 6) + 0x9c,2);
    set_display_fg_color(color);
    display_fill_rounded_rect
              (*(short *)(puVar2 + 4) + 0xc6,*(short *)(puVar2 + 6) + 0x8c,
               *(short *)(puVar2 + 4) + 0xd9,*(short *)(puVar2 + 6) + 0x99,0);
    set_display_fg_color(0);
    display_draw_vert_line
              (*(short *)(puVar2 + 4) + 0xcb,*(short *)(puVar2 + 6) + 0x8e,
               *(short *)(puVar2 + 6) + 0x97);
    display_draw_vert_line
              (*(short *)(puVar2 + 4) + 0xce,*(short *)(puVar2 + 6) + 0x8e,
               *(short *)(puVar2 + 6) + 0x97);
    display_draw_vert_line
              (*(short *)(puVar2 + 4) + 0xd1,*(short *)(puVar2 + 6) + 0x8e,
               *(short *)(puVar2 + 6) + 0x97);
    uVar1 = *(ushort *)(puVar2 + 6);
    iVar3 = *(ushort *)(puVar2 + 4) + 0xd4;
  }
  save_context();
  iVar6 = *(int *)(*DAT_80018f68 + 0x4c);
  iVar4 = *(int *)(*DAT_80018f68 + 0x50);
  iVar5 = FUN_8002ac10(&stack0xffffffe8);
  while (iVar5 != 0) {
    FUN_8001cc4c(iVar3 + iVar6,uVar1 + 0x8e + iVar4,uVar1 + 0x97 + iVar4);
    iVar5 = FUN_8002ab40();
  }
  restore_context();
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_calibration_start_text(void)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  ushort uVar6;
  uint uVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  undefined *puVar11;
  ushort *puVar12;
  int iVar13;
  uint uVar14;
  ushort *puVar15;
  ushort uVar16;
  
  uVar5 = convert_color(DAT_8001112c);
  uVar6 = convert_color(DAT_80011130);
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_DAT_8001113c;
  puVar1 = PTR_TEXT_BITMAP_CALIB_START_80011138;
  iVar8 = DAT_80011134;
  uVar7 = 0;
  do {
    iVar13 = 0xc5;
    puVar12 = (ushort *)(puVar1 + uVar7 * 0x18a);
    puVar15 = (ushort *)
              (*piVar3 + ((uint)*(ushort *)(puVar2 + 4) + (*(ushort *)(puVar2 + 6) + uVar7) * 800) *
                         2 + iVar8);
    do {
      uVar16 = *puVar12;
      if (*puVar12 == 0) {
        uVar16 = uVar5;
      }
      iVar13 = iVar13 + -1;
      *puVar15 = uVar16;
      iVar4 = DAT_8001114c;
      iVar9 = DAT_80011148;
      puVar12 = puVar12 + 1;
      puVar15 = puVar15 + 1;
    } while (iVar13 != 0);
    uVar7 = uVar7 + 1 & 0xfffeffff;
  } while (uVar7 < 0x3c);
  if (*(char *)(DAT_80011144 + 9) == '\0') {
    uVar7 = 8;
    do {
      iVar8 = 0x42;
      puVar12 = (ushort *)
                (*piVar3 + ((uint)*(ushort *)(puVar2 + 4) + (*(ushort *)(puVar2 + 6) + uVar7) * 800)
                           * 2 + iVar4);
      puVar15 = (ushort *)(puVar1 + uVar7 * 0x18a + 0xf4);
      do {
        uVar5 = *puVar15;
        if (*puVar15 == 0) {
          uVar5 = uVar6;
        }
        iVar8 = iVar8 + -1;
        *puVar12 = uVar5;
        puVar12 = puVar12 + 1;
        puVar15 = puVar15 + 1;
      } while (iVar8 != 0);
      uVar7 = uVar7 + 1 & 0xfffeffff;
    } while (uVar7 < 0x34);
  }
  else {
    uVar7 = 8;
    do {
      iVar13 = uVar7 * 0xc5;
      puVar11 = puVar1 + uVar7 * 0x18a;
      puVar15 = (ushort *)
                (*piVar3 + ((uint)*(ushort *)(puVar2 + 4) + (*(ushort *)(puVar2 + 6) + uVar7) * 800)
                           * 2 + iVar9 + 2);
      *puVar15 = ~*(ushort *)(puVar11 + 0xf4);
      uVar5 = *(ushort *)(puVar11 + 0xf6);
      iVar8 = 0x20;
      puVar12 = (ushort *)(puVar11 + 0xf4);
      do {
        uVar6 = puVar12[2];
        puVar15[1] = ~uVar5;
        uVar5 = puVar12[3];
        iVar8 = iVar8 + -1;
        puVar15 = puVar15 + 2;
        *puVar15 = ~uVar6;
        puVar12 = puVar12 + 2;
      } while (iVar8 != 0);
      iVar8 = *(ushort *)(puVar2 + 6) + uVar7;
      uVar7 = uVar7 + 1 & 0xfffeffff;
      *(ushort *)(*piVar3 + (iVar8 * 800 + 0x41 + (uint)*(ushort *)(puVar2 + 4)) * 2 + 0x4489c) =
           ~*(ushort *)(puVar1 + (iVar13 + 0x41) * 2 + 0xf4);
    } while (uVar7 < 0x34);
  }
  set_display_fg_color(DAT_80011150);
  display_draw_rect(*(short *)(puVar2 + 4) + 0xf4,*(short *)(puVar2 + 6) + 0xaf,
                    *(short *)(puVar2 + 4) + 0x1b8,*(short *)(puVar2 + 6) + 0xea);
  iVar13 = Start_Of_Screen_Mem;
  iVar8 = Screen_Frame_Buffer;
  uVar5 = *(ushort *)(puVar2 + 4);
  uVar10 = *(ushort *)(puVar2 + 6) + 0xaf & 0xfffeffff;
  uVar7 = uVar5 + 0xf4 & 0xfffeffff;
  uVar14 = *(ushort *)(puVar2 + 6) + 0xeb & 0xfffeffff;
  if (uVar14 <= uVar10) {
    return;
  }
  do {
    iVar9 = uVar7 + uVar10 * 800;
    copy_short((void *)(iVar13 + iVar9 * 2),(void *)(iVar8 + iVar9 * 2),
               ((uVar5 + 0x1b8 & 0xfffeffff) - uVar7) + 1);
    uVar10 = uVar10 + 1;
  } while (uVar10 < uVar14);
  return;
}



void open_calib_start_text_menu(void)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  ushort *puVar9;
  ushort *puVar10;
  ushort uVar11;
  
  uVar5 = convert_color(DAT_8001123c);
  set_screen_to_global_pointer();
  iVar4 = DAT_8001124c;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_DAT_80011244;
  puVar1 = PTR_TEXT_BITMAP_CALIB_START_80011240;
  uVar8 = 0xc5;
  do {
    uVar6 = 0;
    do {
      if (uVar8 < 0xc5) {
        uVar7 = 0xc5 - uVar8 & 0xffff;
        puVar9 = (ushort *)(puVar1 + (uVar6 * 0xc5 + uVar8) * 2);
        puVar10 = (ushort *)
                  (*piVar3 + ((*(ushort *)(puVar2 + 6) + uVar6) * 800 +
                             (uint)*(ushort *)(puVar2 + 4)) * 2 + iVar4);
        do {
          uVar11 = *puVar9;
          if (*puVar9 == 0) {
            uVar11 = uVar5;
          }
          uVar7 = uVar7 - 1 & 0xffff;
          *puVar10 = uVar11;
          puVar9 = puVar9 + 1;
          puVar10 = puVar10 + 1;
        } while (uVar7 != 0);
      }
      uVar6 = uVar6 + 1 & 0xfffeffff;
    } while (uVar6 < 0x3c);
    uVar8 = (uVar8 - (uVar8 * DAT_80011250 + 0xa3d7 >> 0x14)) - 1 & 0xffff;
  } while (1 < uVar8);
  *Global_Frame_Buffer_Pointer = Screen_Frame_Buffer;
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack
// WARNING: Unknown calling convention yet parameter storage is locked

void display_calibrating_text(void)

{
  undefined *puVar1;
  int *piVar2;
  undefined *puVar3;
  int iVar4;
  ushort uVar5;
  int iVar6;
  ushort *puVar7;
  uint uVar8;
  ushort *puVar9;
  uint uVar10;
  ushort uVar11;
  uint uVar12;
  int iVar13;
  
  uVar5 = convert_color(DAT_8001137c);
  piVar2 = Global_Frame_Buffer_Pointer;
  puVar1 = PTR_DAT_80011384;
  iVar13 = DAT_80011380;
  uVar12 = 0;
  do {
    memclear(*piVar2 + ((uint)*(ushort *)(puVar1 + 4) + (*(ushort *)(puVar1 + 6) + uVar12) * 800) *
                       2 + iVar13,0xae);
    iVar4 = DAT_80011390;
    puVar3 = PTR_TEXT_BITMAP_CALIBRATING_8001138c;
    uVar12 = uVar12 + 1 & 0xfffeffff;
  } while (uVar12 < 0x3c);
  uVar12 = 0;
  do {
    iVar13 = 0x6e;
    puVar7 = (ushort *)
             (*piVar2 + ((uint)*(ushort *)(puVar1 + 4) + (*(ushort *)(puVar1 + 6) + uVar12) * 800) *
                        2 + iVar4);
    puVar9 = (ushort *)(puVar3 + uVar12 * 0xdc);
    do {
      uVar11 = *puVar9;
      if (*puVar9 == 0) {
        uVar11 = uVar5;
      }
      iVar13 = iVar13 + -1;
      *puVar7 = uVar11;
      puVar7 = puVar7 + 1;
      puVar9 = puVar9 + 1;
    } while (iVar13 != 0);
    uVar12 = uVar12 + 1 & 0xfffeffff;
  } while (uVar12 < 0x3c);
  set_display_fg_color(DAT_80011394);
  display_draw_rect(*(short *)(puVar1 + 4) + 0xf4,*(short *)(puVar1 + 6) + 0xaf,
                    *(short *)(puVar1 + 4) + 0x162,*(short *)(puVar1 + 6) + 0xea);
  iVar4 = Start_Of_Screen_Mem;
  iVar13 = Screen_Frame_Buffer;
  uVar5 = *(ushort *)(puVar1 + 4);
  uVar10 = *(ushort *)(puVar1 + 6) + 0xeb & 0xfffeffff;
  uVar8 = *(ushort *)(puVar1 + 6) + 0xaf & 0xfffeffff;
  uVar12 = uVar5 + 0xf4 & 0xfffeffff;
  if (uVar10 <= uVar8) {
    return;
  }
  do {
    iVar6 = uVar12 + uVar8 * 800;
    copy_short((void *)(iVar4 + iVar6 * 2),(void *)(iVar13 + iVar6 * 2),
               ((uVar5 + 0x162 & 0xfffeffff) - uVar12) + 1);
    uVar8 = uVar8 + 1;
  } while (uVar8 < uVar10);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_calib_success(void)

{
  undefined *puVar1;
  undefined *puVar2;
  int *piVar3;
  int iVar4;
  ushort uVar5;
  int iVar6;
  ushort uVar7;
  uint uVar8;
  ushort *puVar9;
  ushort *puVar10;
  uint uVar11;
  int iVar12;
  uint uVar13;
  
  uVar5 = convert_color(DAT_80011484);
  iVar4 = DAT_80011498;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_DAT_80011490;
  puVar1 = PTR_TEXT_BITMAP_CALIB_SUCCESS_8001148c;
  uVar13 = 0;
  *(undefined *)(DAT_80011488 + 8) = 1;
  do {
    iVar12 = 0x6e;
    puVar9 = (ushort *)
             (*piVar3 + ((uint)*(ushort *)(puVar2 + 4) + (*(ushort *)(puVar2 + 6) + uVar13) * 800) *
                        2 + iVar4);
    puVar10 = (ushort *)(puVar1 + uVar13 * 0xdc);
    do {
      uVar7 = *puVar10;
      if (*puVar10 == 0) {
        uVar7 = uVar5;
      }
      iVar12 = iVar12 + -1;
      *puVar9 = uVar7;
      puVar9 = puVar9 + 1;
      puVar10 = puVar10 + 1;
    } while (iVar12 != 0);
    uVar13 = uVar13 + 1 & 0xfffeffff;
  } while (uVar13 < 0x3c);
  set_display_fg_color(DAT_8001149c);
  display_draw_rect(*(short *)(puVar2 + 4) + 0xf4,*(short *)(puVar2 + 6) + 0xaf,
                    *(short *)(puVar2 + 4) + 0x162,*(short *)(puVar2 + 6) + 0xea);
  iVar12 = Start_Of_Screen_Mem;
  iVar4 = Screen_Frame_Buffer;
  uVar5 = *(ushort *)(puVar2 + 4);
  uVar8 = *(ushort *)(puVar2 + 6) + 0xaf & 0xfffeffff;
  uVar11 = *(ushort *)(puVar2 + 6) + 0xeb & 0xfffeffff;
  uVar13 = uVar5 + 0xf4 & 0xfffeffff;
  if (uVar11 <= uVar8) {
    return;
  }
  do {
    iVar6 = uVar13 + uVar8 * 800;
    copy_short((void *)(iVar12 + iVar6 * 2),(void *)(iVar4 + iVar6 * 2),
               ((uVar5 + 0x162 & 0xfffeffff) - uVar13) + 1);
    uVar8 = uVar8 + 1;
  } while (uVar8 < uVar11);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack
// WARNING: Unknown calling convention yet parameter storage is locked

void display_grid_brightness_slider(void)

{
  undefined uVar1;
  ushort ystart;
  int iVar2;
  int iVar3;
  short sVar4;
  ushort xstart;
  int iVar5;
  uint uVar6;
  ushort xend;
  uint uVar7;
  uint uVar8;
  undefined8 uVar9;
  
  uVar1 = *(undefined *)(DAT_800114c8 + 3);
  uVar7 = *(ushort *)(PTR_DAT_800114cc + 6) + 0x3b & 0xfffeffff;
  uVar6 = *(ushort *)(PTR_DAT_800114cc + 4) + 0xf4 & 0xfffeffff;
  convert_color(DAT_80011fc8);
  convert_color(DAT_80011fcc);
  uVar9 = FUN_800397d0(uVar1);
  FUN_80039890((int)uVar9,(int)((ulonglong)uVar9 >> 0x20),DAT_80011fd0,DAT_80011fd4);
  sVar4 = FUN_8003972c();
  set_display_fg_color(DAT_80011fd8);
  ystart = (ushort)uVar7;
  xstart = (ushort)uVar6;
  xend = (ushort)(uVar6 + 0x14b);
  display_fill_rect(xstart,ystart,xend,ystart + 0x3a);
  set_display_fg_color(DAT_80011fdc);
  display_draw_rect(xstart,ystart,xend,ystart + 0x3a);
  set_display_fg_color(DAT_80011fe0);
  display_fill_rounded_rect(xstart + 0x14,ystart + 0x18,xstart + 0x137,ystart + 0x22,2);
  set_display_fg_color(DAT_80011fe4);
  sVar4 = sVar4 + xstart;
  display_fill_rounded_rect(xstart + 0x14,ystart + 0x18,sVar4 + 0x14,ystart + 0x22,2);
  set_display_fg_color(DAT_80011fe8);
  display_fill_rounded_rect(sVar4 + 9,ystart + 0x12,sVar4 + 0x1f,ystart + 0x28,2);
  set_display_fg_color(0);
  display_draw_vert_line(sVar4 + 0xf,ystart + 0x17,ystart + 0x23);
  display_draw_vert_line(sVar4 + 0x14,ystart + 0x17,ystart + 0x23);
  display_draw_vert_line(sVar4 + 0x19,ystart + 0x17,ystart + 0x23);
  iVar3 = Start_Of_Screen_Mem;
  iVar2 = Screen_Frame_Buffer;
  uVar8 = uVar7 + 0x3b & 0xfffeffff;
  if (uVar8 <= uVar7) {
    return;
  }
  do {
    iVar5 = uVar6 + uVar7 * 800;
    copy_short((void *)(iVar3 + iVar5 * 2),(void *)(iVar2 + iVar5 * 2),
               ((uVar6 + 0x14b & 0xfffeffff) - uVar6) + 1);
    uVar7 = uVar7 + 1;
  } while (uVar7 < uVar8);
  return;
}



void open_grid_brightness_slider_menu(void)

{
  ushort uVar1;
  ushort uVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  int *piVar7;
  undefined2 *puVar8;
  uint uVar9;
  undefined2 *puVar10;
  undefined2 *puVar11;
  uint unaff_r4;
  uint uVar12;
  uint uVar13;
  undefined2 *puVar14;
  
  uVar1 = *(ushort *)(PTR_DAT_800114f0 + 6);
  uVar2 = *(ushort *)(PTR_DAT_800114f0 + 4);
  convert_color(DAT_80012254);
  convert_color(DAT_80012258);
  iVar6 = DAT_80012264;
  iVar5 = Screen_Frame_Buffer;
  uVar4 = DAT_8001225c;
  uVar13 = DAT_8001225c - unaff_r4;
  uVar9 = 0;
  uVar12 = uVar13 * 0x8000 >> 0x10;
  do {
    if (unaff_r4 < uVar4) {
      puVar14 = (undefined2 *)(iVar6 + (uVar9 * DAT_8001225c + unaff_r4) * 2);
      puVar11 = (undefined2 *)(iVar5 + (unaff_r4 + uVar9 * 800) * 2);
      uVar3 = uVar12;
      puVar8 = puVar11 + -1;
      puVar10 = puVar14 + -1;
      if ((uVar13 & 1) != 0) {
        *puVar14 = *puVar11;
        puVar8 = puVar11;
        puVar10 = puVar14;
      }
      while (uVar3 != 0) {
        puVar10[1] = puVar8[1];
        puVar10[2] = puVar8[2];
        uVar3 = uVar3 - 1 & 0xffff;
        puVar8 = puVar8 + 2;
        puVar10 = puVar10 + 2;
      }
    }
    uVar9 = uVar9 + 1 & 0xfffeffff;
  } while (uVar9 < 0x3b);
  set_display_fg_color(DAT_80012268);
  display_fill_rect(0,0,(ushort)uVar4,0x3a);
  set_display_fg_color(DAT_8001226c);
  display_draw_rect(0,0,(ushort)uVar4,0x3a);
  set_display_fg_color(DAT_80012270);
  display_fill_rounded_rect(0x14,0x18,(ushort)DAT_80012274,0x22,2);
  set_screen_to_global_pointer();
  piVar7 = Global_Frame_Buffer_Pointer;
  uVar9 = 0;
  uVar12 = uVar4;
  do {
    uVar9 = uVar9 + 1 & 0xfffeffff;
    if (0x3a < uVar9) {
      uVar12 = (uVar12 - (uVar12 * DAT_8001227c >> 0x14)) - 1 & 0xffff;
      if (uVar12 < 2) {
        uVar13 = 0;
        uVar9 = (uVar4 - uVar12) * 0x8000 >> 0x10;
        do {
          puVar14 = (undefined2 *)(iVar6 + (uVar13 * DAT_8001225c + uVar12) * 2);
          puVar11 = (undefined2 *)(iVar5 + (uVar12 + uVar13 * 800) * 2);
          uVar3 = uVar9;
          puVar8 = puVar11 + -1;
          puVar10 = puVar14 + -1;
          if ((uVar4 - uVar12 & 1) != 0) {
            *puVar11 = *puVar14;
            puVar8 = puVar11;
            puVar10 = puVar14;
          }
          while (uVar3 != 0) {
            puVar8[1] = puVar10[1];
            puVar8[2] = puVar10[2];
            uVar3 = uVar3 - 1 & 0xffff;
            puVar8 = puVar8 + 2;
            puVar10 = puVar10 + 2;
          }
          do {
            uVar13 = uVar13 + 1 & 0xfffeffff;
            if (0x3a < uVar13) {
              *Global_Frame_Buffer_Pointer = Screen_Frame_Buffer;
              return;
            }
          } while (uVar4 <= uVar12);
        } while( true );
      }
      uVar9 = 0;
    }
    if (uVar12 < uVar4) {
      puVar14 = (undefined2 *)
                (*piVar7 +
                ((uVar9 + (uVar1 + 0x3b & 0xfffeffff)) * 800 + (uVar2 + 0xf4 & 0xfffeffff)) * 2);
      puVar11 = (undefined2 *)(iVar5 + (uVar12 + uVar9 * 800) * 2);
      puVar8 = puVar14 + -1;
      puVar10 = puVar11 + -1;
      if ((uVar4 - uVar12 & 1) != 0) {
        *puVar14 = *puVar11;
        puVar8 = puVar14;
        puVar10 = puVar11;
      }
      uVar13 = (uVar4 - uVar12) * 0x8000 >> 0x10;
      while (uVar13 != 0) {
        puVar8[1] = puVar10[1];
        puVar10 = puVar10 + 2;
        uVar13 = uVar13 - 1 & 0xffff;
        puVar8 = puVar8 + 2;
        *puVar8 = *puVar10;
      }
    }
  } while( true );
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_sys_menu_grid_brightness(int mode)

{
  byte bVar1;
  undefined *puVar2;
  uint uVar3;
  char local_18;
  char local_17;
  undefined local_16;
  undefined local_15;
  
  bVar1 = *(byte *)(DAT_8001162c + 3);
  uVar3 = (uint)bVar1;
  set_display_fg_color(DAT_80011630);
  puVar2 = PTR_DAT_80011634;
  display_fill_rect(*(short *)(PTR_DAT_80011634 + 4) + 0xb6,*(short *)(PTR_DAT_80011634 + 6) + 0x50,
                    *(short *)(PTR_DAT_80011634 + 4) + 0xd6,*(short *)(PTR_DAT_80011634 + 6) + 0x5f)
  ;
  if (uVar3 < 100) {
    if (uVar3 < 10) {
      local_18 = bVar1 + (char)(uint)((ulonglong)uVar3 * (ulonglong)DAT_80011638 >> 0x23) * -10 +
                 '0';
      local_17 = '\0';
    }
    else {
      local_18 = (char)((uint)((short)(ushort)bVar1 * 0xcd) >> 0xb) + '0';
      local_17 = bVar1 + (char)(uint)((ulonglong)uVar3 * (ulonglong)DAT_80011638 >> 0x23) * -10 +
                 '0';
      local_16 = 0;
    }
  }
  else {
    local_18 = '1';
    local_17 = '0';
    local_16 = 0x30;
    local_15 = 0;
  }
  set_display_fg_color(0);
  select_font(PTR_FONT_1_8001163c);
  set_font_paint_mode(2);
  display_text(&local_18,*(short *)(puVar2 + 4) + 0xbb,*(short *)(puVar2 + 6) + 0x51);
  if (mode == 1) {
    copy_rect_to_screen(*(short *)(puVar2 + 4) + 0xb6,*(short *)(puVar2 + 6) + 0x50,
                        *(short *)(puVar2 + 4) + 0xd6,*(short *)(puVar2 + 6) + 0x60);
    return;
  }
  return;
}



void display_slide_left_system_settings_menu(void)

{
  uint uVar1;
  ushort uVar2;
  ushort uVar3;
  ushort uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  ushort *puVar8;
  ushort uVar9;
  uint uVar10;
  ushort *puVar11;
  
  uVar2 = convert_color(DAT_8001174c);
  uVar3 = convert_color(0);
  uVar4 = convert_color(0xffffff);
  set_screen_to_global_pointer();
  uVar1 = DAT_80011750;
  uVar5 = 0xf4;
  do {
    uVar7 = 0;
    do {
      if (uVar5 < 0xf4) {
        uVar6 = 0xf4 - uVar5 & 0xffff;
        puVar8 = (ushort *)(PTR_BITMAP_SYSTEM_SETTINGS_MENU_8001175c + uVar5 * 2 + uVar7 * 0x1e8);
        puVar11 = (ushort *)
                  (*Global_Frame_Buffer_Pointer +
                  ((*(ushort *)(PTR_DAT_80011754 + 6) + uVar7) * 800 +
                  (uint)*(ushort *)(PTR_DAT_80011754 + 4)) * 2);
        do {
          uVar10 = (uint)*puVar8;
          uVar9 = uVar2;
          if (((uVar10 != 0) && (uVar9 = uVar3, uVar10 != 0xf800)) &&
             (uVar9 = *puVar8, uVar10 == uVar1)) {
            uVar9 = uVar4;
          }
          uVar6 = uVar6 - 1 & 0xffff;
          *puVar11 = uVar9;
          puVar8 = puVar8 + 1;
          puVar11 = puVar11 + 1;
        } while (uVar6 != 0);
      }
      uVar7 = uVar7 + 1 & 0xfffeffff;
    } while (uVar7 < 0x126);
    uVar5 = (uVar5 - (uVar5 * DAT_80011760 >> 0x13)) - 1 & 0xffff;
  } while (uVar5 != 0);
  *Global_Frame_Buffer_Pointer = Screen_Frame_Buffer;
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_screen_brightness_slider(void)

{
  undefined uVar1;
  ushort ystart;
  int iVar2;
  int iVar3;
  short sVar4;
  ushort xstart;
  int iVar5;
  uint uVar6;
  ushort xend;
  uint uVar7;
  uint uVar8;
  undefined8 uVar9;
  
  ystart = *(ushort *)(PTR_DAT_80011788 + 6);
  uVar7 = (uint)ystart;
  uVar1 = *(undefined *)(DAT_80011784 + 2);
  uVar6 = *(ushort *)(PTR_DAT_80011788 + 4) + 0xf4 & 0xfffeffff;
  convert_color(DAT_80011fc8);
  convert_color(DAT_80011fcc);
  uVar9 = FUN_800397d0(uVar1);
  FUN_80039890((int)uVar9,(int)((ulonglong)uVar9 >> 0x20),DAT_80011fd0,DAT_80011fd4);
  sVar4 = FUN_8003972c();
  set_display_fg_color(DAT_80011fd8);
  xstart = (ushort)uVar6;
  xend = (ushort)(uVar6 + 0x14b);
  display_fill_rect(xstart,ystart,xend,ystart + 0x3a);
  set_display_fg_color(DAT_80011fdc);
  display_draw_rect(xstart,ystart,xend,ystart + 0x3a);
  set_display_fg_color(DAT_80011fe0);
  display_fill_rounded_rect(xstart + 0x14,ystart + 0x18,xstart + 0x137,ystart + 0x22,2);
  set_display_fg_color(DAT_80011fe4);
  sVar4 = sVar4 + xstart;
  display_fill_rounded_rect(xstart + 0x14,ystart + 0x18,sVar4 + 0x14,ystart + 0x22,2);
  set_display_fg_color(DAT_80011fe8);
  display_fill_rounded_rect(sVar4 + 9,ystart + 0x12,sVar4 + 0x1f,ystart + 0x28,2);
  set_display_fg_color(0);
  display_draw_vert_line(sVar4 + 0xf,ystart + 0x17,ystart + 0x23);
  display_draw_vert_line(sVar4 + 0x14,ystart + 0x17,ystart + 0x23);
  display_draw_vert_line(sVar4 + 0x19,ystart + 0x17,ystart + 0x23);
  iVar3 = Start_Of_Screen_Mem;
  iVar2 = Screen_Frame_Buffer;
  uVar8 = uVar7 + 0x3b & 0xfffeffff;
  if (uVar8 <= uVar7) {
    return;
  }
  do {
    iVar5 = uVar6 + uVar7 * 800;
    copy_short((void *)(iVar3 + iVar5 * 2),(void *)(iVar2 + iVar5 * 2),
               ((uVar6 + 0x14b & 0xfffeffff) - uVar6) + 1);
    uVar7 = uVar7 + 1;
  } while (uVar7 < uVar8);
  return;
}



void open_screen_brightness_slider_menu(void)

{
  ushort uVar1;
  ushort uVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  int *piVar7;
  undefined2 *puVar8;
  uint uVar9;
  undefined2 *puVar10;
  undefined2 *puVar11;
  uint unaff_r4;
  uint uVar12;
  uint uVar13;
  undefined2 *puVar14;
  
  uVar1 = *(ushort *)(PTR_DAT_800117a4 + 4);
  uVar2 = *(ushort *)(PTR_DAT_800117a4 + 6);
  convert_color(DAT_80012254);
  convert_color(DAT_80012258);
  iVar6 = DAT_80012264;
  iVar5 = Screen_Frame_Buffer;
  uVar4 = DAT_8001225c;
  uVar13 = DAT_8001225c - unaff_r4;
  uVar9 = 0;
  uVar12 = uVar13 * 0x8000 >> 0x10;
  do {
    if (unaff_r4 < uVar4) {
      puVar14 = (undefined2 *)(iVar6 + (uVar9 * DAT_8001225c + unaff_r4) * 2);
      puVar11 = (undefined2 *)(iVar5 + (unaff_r4 + uVar9 * 800) * 2);
      uVar3 = uVar12;
      puVar8 = puVar11 + -1;
      puVar10 = puVar14 + -1;
      if ((uVar13 & 1) != 0) {
        *puVar14 = *puVar11;
        puVar8 = puVar11;
        puVar10 = puVar14;
      }
      while (uVar3 != 0) {
        puVar10[1] = puVar8[1];
        puVar10[2] = puVar8[2];
        uVar3 = uVar3 - 1 & 0xffff;
        puVar8 = puVar8 + 2;
        puVar10 = puVar10 + 2;
      }
    }
    uVar9 = uVar9 + 1 & 0xfffeffff;
  } while (uVar9 < 0x3b);
  set_display_fg_color(DAT_80012268);
  display_fill_rect(0,0,(ushort)uVar4,0x3a);
  set_display_fg_color(DAT_8001226c);
  display_draw_rect(0,0,(ushort)uVar4,0x3a);
  set_display_fg_color(DAT_80012270);
  display_fill_rounded_rect(0x14,0x18,(ushort)DAT_80012274,0x22,2);
  set_screen_to_global_pointer();
  piVar7 = Global_Frame_Buffer_Pointer;
  uVar9 = 0;
  uVar12 = uVar4;
  do {
    uVar9 = uVar9 + 1 & 0xfffeffff;
    if (0x3a < uVar9) {
      uVar12 = (uVar12 - (uVar12 * DAT_8001227c >> 0x14)) - 1 & 0xffff;
      if (uVar12 < 2) {
        uVar13 = 0;
        uVar9 = (uVar4 - uVar12) * 0x8000 >> 0x10;
        do {
          puVar14 = (undefined2 *)(iVar6 + (uVar13 * DAT_8001225c + uVar12) * 2);
          puVar11 = (undefined2 *)(iVar5 + (uVar12 + uVar13 * 800) * 2);
          uVar3 = uVar9;
          puVar8 = puVar11 + -1;
          puVar10 = puVar14 + -1;
          if ((uVar4 - uVar12 & 1) != 0) {
            *puVar11 = *puVar14;
            puVar8 = puVar11;
            puVar10 = puVar14;
          }
          while (uVar3 != 0) {
            puVar8[1] = puVar10[1];
            puVar8[2] = puVar10[2];
            uVar3 = uVar3 - 1 & 0xffff;
            puVar8 = puVar8 + 2;
            puVar10 = puVar10 + 2;
          }
          do {
            uVar13 = uVar13 + 1 & 0xfffeffff;
            if (0x3a < uVar13) {
              *Global_Frame_Buffer_Pointer = Screen_Frame_Buffer;
              return;
            }
          } while (uVar4 <= uVar12);
        } while( true );
      }
      uVar9 = 0;
    }
    if (uVar12 < uVar4) {
      puVar14 = (undefined2 *)(*piVar7 + ((uVar9 + uVar2) * 800 + (uVar1 + 0xf4 & 0xfffeffff)) * 2);
      puVar11 = (undefined2 *)(iVar5 + (uVar12 + uVar9 * 800) * 2);
      puVar8 = puVar14 + -1;
      puVar10 = puVar11 + -1;
      if ((uVar4 - uVar12 & 1) != 0) {
        *puVar14 = *puVar11;
        puVar8 = puVar14;
        puVar10 = puVar11;
      }
      uVar13 = (uVar4 - uVar12) * 0x8000 >> 0x10;
      while (uVar13 != 0) {
        puVar8[1] = puVar10[1];
        puVar10 = puVar10 + 2;
        uVar13 = uVar13 - 1 & 0xffff;
        puVar8 = puVar8 + 2;
        *puVar8 = *puVar10;
      }
    }
  } while( true );
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_sys_menu_disp_brightness(int mode)

{
  byte bVar1;
  undefined *puVar2;
  uint uVar3;
  char local_18;
  char local_17;
  undefined local_16;
  undefined local_15;
  
  bVar1 = *(byte *)(DAT_800118e0 + 2);
  uVar3 = (uint)bVar1;
  set_display_fg_color(DAT_800118e4);
  puVar2 = PTR_DAT_800118e8;
  display_fill_rect(*(short *)(PTR_DAT_800118e8 + 4) + 0xb6,*(short *)(PTR_DAT_800118e8 + 6) + 0x15,
                    *(short *)(PTR_DAT_800118e8 + 4) + 0xd6,*(short *)(PTR_DAT_800118e8 + 6) + 0x24)
  ;
  if (uVar3 < 100) {
    if (uVar3 < 10) {
      local_18 = bVar1 + (char)(uint)((ulonglong)uVar3 * (ulonglong)DAT_800118ec >> 0x23) * -10 +
                 '0';
      local_17 = '\0';
    }
    else {
      local_18 = (char)((uint)((short)(ushort)bVar1 * 0xcd) >> 0xb) + '0';
      local_17 = bVar1 + (char)(uint)((ulonglong)uVar3 * (ulonglong)DAT_800118ec >> 0x23) * -10 +
                 '0';
      local_16 = 0;
    }
  }
  else {
    local_18 = '1';
    local_17 = '0';
    local_16 = 0x30;
    local_15 = 0;
  }
  set_display_fg_color(0);
  select_font(PTR_FONT_1_800118f0);
  set_font_paint_mode(2);
  display_text(&local_18,*(short *)(puVar2 + 4) + 0xbb,*(short *)(puVar2 + 6) + 0x16);
  if (mode == 1) {
    copy_rect_to_screen(*(short *)(puVar2 + 4) + 0xb6,*(short *)(puVar2 + 6) + 0x15,
                        *(short *)(puVar2 + 4) + 0xd6,*(short *)(puVar2 + 6) + 0x25);
    return;
  }
  return;
}



void display_sys_menu_highlight_item(void)

{
  char cVar1;
  undefined *puVar2;
  int *piVar3;
  ushort uVar4;
  ushort uVar5;
  uint uVar6;
  uint uVar7;
  ushort *puVar8;
  uint uVar9;
  uint uVar10;
  
  cVar1 = *(char *)(DAT_80011c24 + 1);
  uVar4 = convert_color(DAT_80011c28);
  uVar9 = 0xe;
  uVar5 = convert_color(DAT_80011c2c);
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_DAT_80011c30;
  if (cVar1 == '\x01') {
    do {
      uVar10 = (uint)*(ushort *)(puVar2 + 4);
      uVar6 = uVar10 + 9 & 0xfffeffff;
      if (uVar6 < uVar10 + 0xeb) {
        uVar10 = (uVar10 - uVar6) + 0xeb & 0xffff;
        puVar8 = (ushort *)(*piVar3 + (uVar6 + (*(ushort *)(puVar2 + 6) + uVar9) * 800) * 2);
        do {
          if (*puVar8 == uVar5) {
            *puVar8 = uVar4;
          }
          else {
            *puVar8 = ~*puVar8;
          }
          uVar10 = uVar10 - 1 & 0xffff;
          puVar8 = puVar8 + 1;
        } while (uVar10 != 0);
      }
      uVar9 = uVar9 + 1 & 0xfffeffff;
    } while (uVar9 < 0x2e);
    return;
  }
  if (cVar1 == '\x02') {
    uVar9 = 0x47;
    do {
      uVar10 = (uint)*(ushort *)(puVar2 + 4);
      uVar6 = uVar10 + 9 & 0xfffeffff;
      if (uVar6 < uVar10 + 0xeb) {
        uVar10 = (uVar10 - uVar6) + 0xeb & 0xffff;
        puVar8 = (ushort *)(*piVar3 + (uVar6 + (*(ushort *)(puVar2 + 6) + uVar9) * 800) * 2);
        do {
          if (*puVar8 == uVar5) {
            *puVar8 = uVar4;
          }
          else {
            *puVar8 = ~*puVar8;
          }
          uVar10 = uVar10 - 1 & 0xffff;
          puVar8 = puVar8 + 1;
        } while (uVar10 != 0);
      }
      uVar9 = uVar9 + 1 & 0xfffeffff;
    } while (uVar9 < 0x69);
    return;
  }
  if (cVar1 == '\x03') {
    uVar9 = 0x82;
    do {
      uVar10 = (uint)*(ushort *)(puVar2 + 4);
      uVar6 = uVar10 + 9 & 0xfffeffff;
      if (uVar6 < uVar10 + 0xeb) {
        uVar10 = (uVar10 - uVar6) + 0xeb & 0xffff;
        puVar8 = (ushort *)(*piVar3 + (uVar6 + (*(ushort *)(puVar2 + 6) + uVar9) * 800) * 2);
        do {
          if (*puVar8 == uVar5) {
            *puVar8 = uVar4;
          }
          else {
            *puVar8 = ~*puVar8;
          }
          uVar10 = uVar10 - 1 & 0xffff;
          puVar8 = puVar8 + 1;
        } while (uVar10 != 0);
      }
      uVar9 = uVar9 + 1 & 0xfffeffff;
    } while (uVar9 < 0xa4);
    return;
  }
  if (cVar1 == '\x04') {
    uVar9 = 0xbd;
    do {
      uVar10 = (uint)*(ushort *)(puVar2 + 4);
      uVar6 = uVar10 + 9 & 0xfffeffff;
      if (uVar6 < uVar10 + 0xeb) {
        uVar10 = (uVar10 - uVar6) + 0xeb & 0xffff;
        puVar8 = (ushort *)(*piVar3 + (uVar6 + (*(ushort *)(puVar2 + 6) + uVar9) * 800) * 2);
        do {
          if (*puVar8 == uVar5) {
            *puVar8 = uVar4;
          }
          else {
            *puVar8 = ~*puVar8;
          }
          uVar10 = uVar10 - 1 & 0xffff;
          puVar8 = puVar8 + 1;
        } while (uVar10 != 0);
      }
      uVar9 = uVar9 + 1 & 0xfffeffff;
    } while (uVar9 < 0xde);
    return;
  }
  if (cVar1 != '\x05') {
    return;
  }
  uVar9 = 0xf7;
  uVar10 = DAT_80011c38 - 0xe;
  do {
    uVar6 = (uint)*(ushort *)(puVar2 + 4);
    uVar7 = uVar6 + 9 & 0xfffeffff;
    if (uVar7 < uVar6 + 0xeb) {
      uVar6 = (uVar6 - uVar7) + 0xeb & 0xffff;
      puVar8 = (ushort *)(*piVar3 + (uVar7 + (*(ushort *)(puVar2 + 6) + uVar9) * 800) * 2);
      do {
        if (*puVar8 == uVar5) {
          *puVar8 = uVar4;
        }
        else {
          *puVar8 = ~*puVar8;
        }
        uVar6 = uVar6 - 1 & 0xffff;
        puVar8 = puVar8 + 1;
      } while (uVar6 != 0);
    }
    uVar9 = uVar9 + 1 & 0xfffeffff;
  } while (uVar9 < uVar10);
  return;
}



void display_sys_menu_xymode_display(void)

{
  ushort uVar1;
  short sVar2;
  undefined *puVar3;
  uint color;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  
  color = DAT_80011e70;
  puVar3 = PTR_DAT_80011e6c;
  if (*(char *)(DAT_80011e74 + 7) == '\0') {
    set_display_fg_color(DAT_80011e78);
    display_fill_rounded_rect
              (*(short *)(puVar3 + 4) + 0xb0,*(short *)(puVar3 + 6) + 0xfe,
               *(short *)(puVar3 + 4) + 0xdc,*(short *)(puVar3 + 6) + 0x111,2);
    set_display_fg_color(color);
    display_draw_rounded_rect
              (*(short *)(puVar3 + 4) + 0xb0,*(short *)(puVar3 + 6) + 0xfe,
               *(short *)(puVar3 + 4) + 0xdc,*(short *)(puVar3 + 6) + 0x111,2);
    set_display_fg_color(color);
    display_fill_rounded_rect
              (*(short *)(puVar3 + 4) + 0xb3,*(short *)(puVar3 + 6) + 0x101,
               *(short *)(puVar3 + 4) + 0xc6,*(short *)(puVar3 + 6) + 0x10e,0);
    set_display_fg_color(0);
    display_draw_vert_line
              (*(short *)(puVar3 + 4) + 0xb8,*(short *)(puVar3 + 6) + 0x103,
               *(short *)(puVar3 + 6) + 0x10c);
    display_draw_vert_line
              (*(short *)(puVar3 + 4) + 0xbb,*(short *)(puVar3 + 6) + 0x103,
               *(short *)(puVar3 + 6) + 0x10c);
    display_draw_vert_line
              (*(short *)(puVar3 + 4) + 0xbe,*(short *)(puVar3 + 6) + 0x103,
               *(short *)(puVar3 + 6) + 0x10c);
    uVar1 = *(ushort *)(puVar3 + 6);
    iVar4 = *(ushort *)(puVar3 + 4) + 0xc1;
  }
  else {
    set_display_fg_color(0xff00);
    sVar2 = (short)((int)color >> 0xe);
    display_fill_rounded_rect
              (*(short *)(puVar3 + 4) + 0xb0,*(short *)(puVar3 + 6) + 0xfe,
               *(short *)(puVar3 + 4) + 0xdc,*(short *)(puVar3 + 6) + sVar2,2);
    set_display_fg_color(0x8800);
    display_draw_rounded_rect
              (*(short *)(puVar3 + 4) + 0xb0,*(short *)(puVar3 + 6) + 0xfe,
               *(short *)(puVar3 + 4) + 0xdc,*(short *)(puVar3 + 6) + sVar2,2);
    set_display_fg_color(color);
    display_fill_rounded_rect
              (*(short *)(puVar3 + 4) + 0xc6,*(short *)(puVar3 + 6) + 0x101,
               *(short *)(puVar3 + 4) + 0xd9,*(short *)(puVar3 + 6) + 0x10e,0);
    set_display_fg_color(0);
    display_draw_vert_line
              (*(short *)(puVar3 + 4) + 0xcb,*(short *)(puVar3 + 6) + 0x103,
               *(short *)(puVar3 + 6) + 0x10c);
    display_draw_vert_line
              (*(short *)(puVar3 + 4) + 0xce,*(short *)(puVar3 + 6) + 0x103,
               *(short *)(puVar3 + 6) + 0x10c);
    display_draw_vert_line
              (*(short *)(puVar3 + 4) + 0xd1,*(short *)(puVar3 + 6) + 0x103,
               *(short *)(puVar3 + 6) + 0x10c);
    uVar1 = *(ushort *)(puVar3 + 6);
    iVar4 = *(ushort *)(puVar3 + 4) + 0xd4;
  }
  save_context();
  iVar7 = *(int *)(*DAT_80018f68 + 0x4c);
  iVar5 = *(int *)(*DAT_80018f68 + 0x50);
  iVar6 = FUN_8002ac10(&stack0xffffffe8);
  while (iVar6 != 0) {
    FUN_8001cc4c(iVar4 + iVar7,uVar1 + 0x103 + iVar5,uVar1 + 0x10c + iVar5);
    iVar6 = FUN_8002ab40();
  }
  restore_context();
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void display_slider(uint16 a,uint16 b,uint16 xpos,uint16 ypos)

{
  ushort ystart;
  int iVar1;
  int iVar2;
  short sVar3;
  ushort xstart;
  int iVar4;
  int in_r1;
  ushort xend;
  uint in_r2;
  uint uVar5;
  undefined8 uVar6;
  
  convert_color(DAT_80011fc8);
  convert_color(DAT_80011fcc);
  uVar6 = FUN_800397d0();
  FUN_80039890((int)uVar6,(int)((ulonglong)uVar6 >> 0x20),DAT_80011fd0,DAT_80011fd4);
  sVar3 = FUN_8003972c();
  set_display_fg_color(DAT_80011fd8);
  ystart = (ushort)in_r2;
  xstart = (ushort)in_r1;
  xend = (ushort)(in_r1 + 0x14bU);
  display_fill_rect(xstart,ystart,xend,ystart + 0x3a);
  set_display_fg_color(DAT_80011fdc);
  display_draw_rect(xstart,ystart,xend,ystart + 0x3a);
  set_display_fg_color(DAT_80011fe0);
  display_fill_rounded_rect(xstart + 0x14,ystart + 0x18,xstart + 0x137,ystart + 0x22,2);
  set_display_fg_color(DAT_80011fe4);
  sVar3 = sVar3 + xstart;
  display_fill_rounded_rect(xstart + 0x14,ystart + 0x18,sVar3 + 0x14,ystart + 0x22,2);
  set_display_fg_color(DAT_80011fe8);
  display_fill_rounded_rect(sVar3 + 9,ystart + 0x12,sVar3 + 0x1f,ystart + 0x28,2);
  set_display_fg_color(0);
  display_draw_vert_line(sVar3 + 0xf,ystart + 0x17,ystart + 0x23);
  display_draw_vert_line(sVar3 + 0x14,ystart + 0x17,ystart + 0x23);
  display_draw_vert_line(sVar3 + 0x19,ystart + 0x17,ystart + 0x23);
  iVar2 = Start_Of_Screen_Mem;
  iVar1 = Screen_Frame_Buffer;
  uVar5 = in_r2 + 0x3b & 0xfffeffff;
  if (uVar5 <= in_r2) {
    return;
  }
  do {
    iVar4 = in_r1 + in_r2 * 800;
    copy_short((void *)(iVar2 + iVar4 * 2),(void *)(iVar1 + iVar4 * 2),
               ((in_r1 + 0x14bU & 0xfffeffff) - in_r1) + 1);
    in_r2 = in_r2 + 1;
  } while (in_r2 < uVar5);
  return;
}



void FUN_80011fec(int param_1,int param_2)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  undefined2 *puVar6;
  uint uVar7;
  undefined2 *puVar8;
  undefined2 *puVar9;
  uint unaff_r4;
  uint uVar10;
  uint uVar11;
  undefined2 *puVar12;
  
  convert_color(DAT_80012254);
  convert_color(DAT_80012258);
  iVar4 = DAT_80012264;
  iVar3 = Screen_Frame_Buffer;
  uVar2 = DAT_8001225c;
  uVar11 = DAT_8001225c - unaff_r4;
  uVar7 = 0;
  uVar10 = uVar11 * 0x8000 >> 0x10;
  do {
    if (unaff_r4 < uVar2) {
      puVar12 = (undefined2 *)(iVar4 + (uVar7 * DAT_8001225c + unaff_r4) * 2);
      puVar9 = (undefined2 *)(iVar3 + (unaff_r4 + uVar7 * 800) * 2);
      uVar1 = uVar10;
      puVar6 = puVar9 + -1;
      puVar8 = puVar12 + -1;
      if ((uVar11 & 1) != 0) {
        *puVar12 = *puVar9;
        puVar6 = puVar9;
        puVar8 = puVar12;
      }
      while (uVar1 != 0) {
        puVar8[1] = puVar6[1];
        puVar8[2] = puVar6[2];
        uVar1 = uVar1 - 1 & 0xffff;
        puVar6 = puVar6 + 2;
        puVar8 = puVar8 + 2;
      }
    }
    uVar7 = uVar7 + 1 & 0xfffeffff;
  } while (uVar7 < 0x3b);
  set_display_fg_color(DAT_80012268);
  display_fill_rect(0,0,(ushort)uVar2,0x3a);
  set_display_fg_color(DAT_8001226c);
  display_draw_rect(0,0,(ushort)uVar2,0x3a);
  set_display_fg_color(DAT_80012270);
  display_fill_rounded_rect(0x14,0x18,(ushort)DAT_80012274,0x22,2);
  set_screen_to_global_pointer();
  piVar5 = Global_Frame_Buffer_Pointer;
  uVar7 = 0;
  uVar10 = uVar2;
  do {
    uVar7 = uVar7 + 1 & 0xfffeffff;
    if (0x3a < uVar7) {
      uVar10 = (uVar10 - (uVar10 * DAT_8001227c >> 0x14)) - 1 & 0xffff;
      if (uVar10 < 2) {
        uVar11 = 0;
        uVar7 = (uVar2 - uVar10) * 0x8000 >> 0x10;
        do {
          puVar12 = (undefined2 *)(iVar4 + (uVar11 * DAT_8001225c + uVar10) * 2);
          puVar9 = (undefined2 *)(iVar3 + (uVar10 + uVar11 * 800) * 2);
          uVar1 = uVar7;
          puVar6 = puVar9 + -1;
          puVar8 = puVar12 + -1;
          if ((uVar2 - uVar10 & 1) != 0) {
            *puVar9 = *puVar12;
            puVar6 = puVar9;
            puVar8 = puVar12;
          }
          while (uVar1 != 0) {
            puVar6[1] = puVar8[1];
            puVar6[2] = puVar8[2];
            uVar1 = uVar1 - 1 & 0xffff;
            puVar6 = puVar6 + 2;
            puVar8 = puVar8 + 2;
          }
          do {
            uVar11 = uVar11 + 1 & 0xfffeffff;
            if (0x3a < uVar11) {
              *Global_Frame_Buffer_Pointer = Screen_Frame_Buffer;
              return;
            }
          } while (uVar2 <= uVar10);
        } while( true );
      }
      uVar7 = 0;
    }
    if (uVar10 < uVar2) {
      puVar12 = (undefined2 *)(*piVar5 + ((uVar7 + param_2) * 800 + param_1) * 2);
      puVar9 = (undefined2 *)(iVar3 + (uVar10 + uVar7 * 800) * 2);
      puVar6 = puVar12 + -1;
      puVar8 = puVar9 + -1;
      if ((uVar2 - uVar10 & 1) != 0) {
        *puVar12 = *puVar9;
        puVar6 = puVar12;
        puVar8 = puVar9;
      }
      uVar11 = (uVar2 - uVar10) * 0x8000 >> 0x10;
      while (uVar11 != 0) {
        puVar6[1] = puVar8[1];
        puVar8 = puVar8 + 2;
        uVar11 = uVar11 - 1 & 0xffff;
        puVar6 = puVar6 + 2;
        *puVar6 = *puVar8;
      }
    }
  } while( true );
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_time_div_setting(void)

{
  int iVar1;
  int iVar2;
  char *text;
  int iVar3;
  uint uVar4;
  
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(0x18b,5,0x1e8,0x2c);
  set_display_fg_color(0xffffff);
  select_font(PTR_FONT_0_800124d0);
  switch(*(undefined *)(DAT_800124d4 + 10)) {
  case 0:
    text = s_50S_div_800124dc;
    break;
  case 1:
    text = s_20S_div_800124e4;
    break;
  case 2:
    text = s_10S_div_800124ec;
    break;
  case 3:
    text = s_5S_div_800124f4;
    break;
  case 4:
    text = s_2S_div_800124fc;
    break;
  case 5:
    text = s_1S_div_80012504;
    break;
  case 6:
    text = s_500mS_div_8001250c;
    break;
  case 7:
    text = s_200mS_div_80012518;
    break;
  case 8:
    text = s_100mS_div_80012524;
    break;
  case 9:
    text = s_50mS_div_80012530;
    break;
  case 10:
    text = s_20mS_div_8001253c;
    break;
  case 0xb:
    text = s_10mS_div_80012548;
    break;
  case 0xc:
    text = s_5mS_div_80012554;
    break;
  case 0xd:
    text = s_2mS_div_8001255c;
    break;
  case 0xe:
    text = s_1mS_div_80012564;
    break;
  case 0xf:
    text = s_500uS_div_8001256c;
    break;
  case 0x10:
    text = s_200uS_div_80012578;
    break;
  case 0x11:
    text = s_100uS_div_80012584;
    break;
  case 0x12:
    text = s_50uS_div_80012590;
    break;
  case 0x13:
    text = s_20uS_div_8001259c;
    break;
  case 0x14:
    text = s_10uS_div_800125a8;
    break;
  case 0x15:
    text = s_5uS_div_800125b4;
    break;
  case 0x16:
    text = s_2uS_div_800125bc;
    break;
  case 0x17:
    text = s_1uS_div_800125c4;
    break;
  case 0x18:
    text = s_500nS_div_800125cc;
    break;
  case 0x19:
    text = s_250nS_div_80012640;
    break;
  case 0x1a:
    text = s_100nS_div_8001264c;
    break;
  case 0x1b:
    text = s_50nS_div_80012658;
    break;
  case 0x1c:
    text = s_25nS_div_80012664;
    break;
  case 0x1d:
    text = s_10nS_div_80012670;
    break;
  default:
    goto switchD_800122c0_caseD_1e;
  }
  display_text(text,(ushort)DAT_800124d8,0x10);
switchD_800122c0_caseD_1e:
  iVar2 = Start_Of_Screen_Mem;
  iVar1 = Screen_Frame_Buffer;
  uVar4 = 5;
  do {
    iVar3 = uVar4 * 800 + 0x17c;
    copy_short((void *)(iVar2 + iVar3 * 2),(void *)(iVar1 + iVar3 * 2),0x5f);
    uVar4 = uVar4 + 1;
  } while (uVar4 < 0x2a);
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_trigger_settings(int mode)

{
  int *piVar1;
  int iVar2;
  ushort uVar3;
  char *pcVar4;
  ushort *puVar5;
  ushort *puVar6;
  int iVar7;
  int iVar8;
  int count;
  uint uVar9;
  
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(0x23a,2,700,0x2c);
  set_font_paint_mode(2);
  select_font(PTR_FONT_4_800128dc);
  set_display_fg_color(0xff00);
  display_fill_rect(0x23a,5,600,0x28);
  set_display_fg_color(0);
  display_text(&DAT_800128e0,0x246,0xf);
  set_display_fg_color(0xffffff);
  select_font(PTR_FONT_2_800128e4);
  iVar8 = DAT_800128e8;
  if (*(char *)(DAT_800128e8 + 0x21) == '\0') {
    display_text(&DAT_800128fc,0x25e,7);
  }
  else {
    if (*(char *)(DAT_800128e8 + 0x21) == '\x01') {
      pcVar4 = s_Single_800128ec;
    }
    else {
      if (*(char *)(DAT_800128e8 + 0x21) != '\x02') goto LAB_80012754;
      pcVar4 = s_Normal_800128f4;
    }
    display_text(pcVar4,0x25e,7);
  }
LAB_80012754:
  uVar3 = (ushort)DAT_80012904;
  if (*(char *)(iVar8 + 0x23) == '\0') {
    set_display_fg_color(DAT_80012908);
    display_fill_rect(uVar3 - 0x1c,0x19,uVar3,0x28);
    set_display_fg_color(0);
    pcVar4 = &DAT_8001290c;
  }
  else {
    if (*(char *)(iVar8 + 0x23) != '\x01') goto LAB_800127e4;
    set_display_fg_color(DAT_80012910);
    display_fill_rect(uVar3 - 0x1c,0x19,uVar3,0x28);
    set_display_fg_color(0);
    pcVar4 = &DAT_80012914;
  }
  display_text(pcVar4,uVar3 - 0x18,0x1a);
LAB_800127e4:
  set_display_fg_color(0xffffff);
  display_draw_vert_line(0x282,0x1b,0x26);
  display_draw_horz_line(0x26,0x27f,0x282);
  display_draw_horz_line(0x1b,0x282,0x285);
  if (*(char *)(iVar8 + 0x22) == '\0') {
    display_draw_horz_line(0x20,0x281,0x283);
    uVar3 = 0x21;
  }
  else {
    display_draw_horz_line(0x21,0x281,0x283);
    uVar3 = 0x20;
  }
  display_draw_horz_line(uVar3,0x280,0x284);
  piVar1 = Global_Frame_Buffer_Pointer;
  if (mode != 0) {
    uVar9 = 5;
    do {
      iVar8 = 0x3c;
      puVar5 = (ushort *)(*piVar1 + uVar9 * 0x640 + 0x472);
      do {
        puVar6 = puVar5 + 2;
        iVar8 = iVar8 + -1;
        puVar5[1] = ~puVar5[1];
        *puVar6 = ~*puVar6;
        puVar5 = puVar6;
      } while (iVar8 != 0);
      uVar9 = uVar9 + 1 & 0xfffeffff;
    } while (uVar9 < 0x29);
  }
  iVar2 = Start_Of_Screen_Mem;
  iVar8 = Screen_Frame_Buffer;
  count = DAT_8001291c + -0x239;
  uVar9 = 5;
  do {
    iVar7 = uVar9 * 800 + 0x23a;
    copy_short((void *)(iVar2 + iVar7 * 2),(void *)(iVar8 + iVar7 * 2),count);
    uVar9 = uVar9 + 1;
  } while (uVar9 < 0x29);
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_return_arrow_symbol(int mode)

{
  int iVar1;
  ushort uVar2;
  undefined2 uVar3;
  undefined *puVar4;
  int *piVar5;
  ushort *puVar6;
  undefined2 *puVar7;
  ushort *puVar8;
  undefined2 *puVar9;
  uint uVar10;
  undefined4 uVar11;
  int iVar12;
  
  piVar5 = Global_Frame_Buffer_Pointer;
  puVar4 = PTR_BITMAP_ARROW_SYMBOL_80012a44;
  uVar10 = 0;
  if (mode == 0) {
    do {
      puVar7 = (undefined2 *)(puVar4 + uVar10 * 0x140);
      puVar9 = (undefined2 *)(*piVar5 + uVar10 * 0x640);
      iVar12 = 0x27;
      *puVar9 = *puVar7;
      uVar11 = *(undefined4 *)(puVar7 + 2);
      do {
        uVar3 = puVar7[4];
        puVar9[1] = (short)uVar11;
        uVar11 = *(undefined4 *)(puVar7 + 6);
        iVar12 = iVar12 + -1;
        puVar9 = puVar9 + 2;
        *puVar9 = uVar3;
        puVar7 = puVar7 + 4;
      } while (iVar12 != 0);
      iVar12 = uVar10 * 0x50;
      iVar1 = uVar10 * 800;
      uVar10 = uVar10 + 1 & 0xfffeffff;
      *(short *)(*piVar5 + (iVar1 + 0x4f) * 2) =
           (short)*(undefined4 *)(puVar4 + (iVar12 + 0x4f) * 4);
    } while (uVar10 < 0x28);
  }
  else {
    do {
      puVar6 = (ushort *)(puVar4 + uVar10 * 0x140);
      puVar8 = (ushort *)(*piVar5 + uVar10 * 0x640);
      *puVar8 = ~*puVar6;
      uVar11 = *(undefined4 *)(puVar6 + 2);
      iVar12 = 0x27;
      do {
        uVar2 = puVar6[4];
        puVar8[1] = ~(ushort)uVar11;
        iVar12 = iVar12 + -1;
        uVar11 = *(undefined4 *)(puVar6 + 6);
        puVar8 = puVar8 + 2;
        *puVar8 = ~uVar2;
        puVar6 = puVar6 + 4;
      } while (iVar12 != 0);
      iVar12 = uVar10 * 0x50;
      iVar1 = uVar10 * 800;
      uVar10 = uVar10 + 1 & 0xfffeffff;
      *(ushort *)(*piVar5 + (iVar1 + 0x4f) * 2) =
           ~(ushort)*(undefined4 *)(puVar4 + (iVar12 + 0x4f) * 4);
    } while (uVar10 < 0x28);
  }
  iVar1 = Start_Of_Screen_Mem;
  iVar12 = Screen_Frame_Buffer;
  uVar10 = 0;
  do {
    copy_short((void *)(iVar1 + uVar10 * 0x640),(void *)(iVar12 + uVar10 * 0x640),0x51);
    uVar10 = uVar10 + 1;
  } while (uVar10 < 0x28);
  return;
}



void fpga_enable_system(void)

{
  uint *ptr;
  
  fpga_write_cmd('\x04');
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = ptr[4] & 0xffffff00 | 1;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x80012da0
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_80012a64(int param_1,uint param_2,int param_3,int param_4,uint param_5)

{
  int *piVar1;
  ushort uVar2;
  uint uVar3;
  ushort *puVar4;
  ushort *puVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  code *UNRECOVERED_JUMPTABLE_00;
  bool bVar11;
  
  uVar2 = convert_color(param_5);
  piVar1 = Global_Frame_Buffer_Pointer;
  iVar7 = param_2 + param_3 + -1;
  uVar3 = param_2;
  if ((int)param_2 < iVar7) {
    do {
      puVar5 = (ushort *)(param_4 + uVar3 * 2);
      uVar9 = (uint)*puVar5;
      uVar10 = (uint)puVar5[1];
      uVar8 = uVar9 + uVar10 >> 1;
      if (uVar10 <= uVar9 && uVar9 != uVar10) {
        if (uVar10 + 10 < uVar9) {
          if (uVar10 <= uVar9) {
            iVar6 = *piVar1 + ((param_1 + uVar10 * 800 + uVar3) - param_2) * 2;
            bVar11 = (uVar9 - uVar10 & 1) == 0;
            puVar5 = (ushort *)(iVar6 + -0x63e);
            if (bVar11) {
              puVar5 = (ushort *)(iVar6 + 2);
            }
            if (bVar11) {
              *puVar5 = uVar2;
            }
            uVar8 = (uVar9 - uVar10) * 0x8000 + 0x8000 >> 0x10;
            while (uVar8 != 0) {
              puVar5[800] = uVar2;
              puVar5 = puVar5 + 0x640;
              uVar8 = uVar8 - 1 & 0xffff;
              *puVar5 = uVar2;
            }
          }
        }
        else {
          if (uVar10 <= uVar8) {
            bVar11 = (uVar8 - uVar10 & 1) == 0;
            iVar6 = *piVar1 + ((param_1 + uVar10 * 800 + uVar3) - param_2) * 2;
            puVar5 = (ushort *)(iVar6 + -0x63e);
            if (bVar11) {
              puVar5 = (ushort *)(iVar6 + 2);
            }
            if (bVar11) {
              *puVar5 = uVar2;
            }
            uVar10 = (uVar8 - uVar10) * 0x8000 + 0x8000 >> 0x10;
            while (uVar10 != 0) {
              puVar5[800] = uVar2;
              puVar5 = puVar5 + 0x640;
              uVar10 = uVar10 - 1 & 0xffff;
              *puVar5 = uVar2;
            }
          }
          if (uVar8 <= uVar9) {
            bVar11 = (uVar9 - uVar8 & 1) == 0;
            puVar4 = (ushort *)(*piVar1 + ((param_1 + uVar8 * 800 + uVar3) - param_2) * 2);
            puVar5 = puVar4 + -800;
            if (bVar11) {
              puVar5 = puVar4;
            }
            if (bVar11) {
              *puVar5 = uVar2;
            }
            uVar8 = (uVar9 - uVar8) * 0x8000 + 0x8000 >> 0x10;
            while (uVar8 != 0) {
              puVar5[800] = uVar2;
              puVar5 = puVar5 + 0x640;
              uVar8 = uVar8 - 1 & 0xffff;
              *puVar5 = uVar2;
            }
          }
        }
      }
      else {
        if (uVar10 <= uVar9) {
          puVar5 = (ushort *)(*piVar1 + ((param_1 + uVar9 * 800 + uVar3) - param_2) * 2);
          *puVar5 = uVar2;
          puVar5[1] = uVar2;
        }
        else {
          if (uVar9 + 10 < uVar10) {
            bVar11 = (uVar10 - uVar9 & 1) == 0;
            puVar4 = (ushort *)(*piVar1 + ((param_1 + uVar9 * 800 + uVar3) - param_2) * 2);
            puVar5 = puVar4 + -800;
            if (bVar11) {
              puVar5 = puVar4;
            }
            if (bVar11) {
              *puVar5 = uVar2;
            }
            uVar8 = (uVar10 - uVar9) * 0x8000 + 0x8000 >> 0x10;
            while (uVar8 != 0) {
              puVar5[800] = uVar2;
              puVar5 = puVar5 + 0x640;
              uVar8 = uVar8 - 1 & 0xffff;
              *puVar5 = uVar2;
            }
          }
          else {
            if (uVar9 <= uVar8) {
              puVar4 = (ushort *)(*piVar1 + ((param_1 + uVar9 * 800 + uVar3) - param_2) * 2);
              bVar11 = (uVar8 - uVar9 & 1) == 0;
              puVar5 = puVar4 + -800;
              if (bVar11) {
                puVar5 = puVar4;
              }
              if (bVar11) {
                *puVar5 = uVar2;
              }
              uVar9 = (uVar8 - uVar9) * 0x8000 + 0x8000 >> 0x10;
              while (uVar9 != 0) {
                puVar5[800] = uVar2;
                puVar5 = puVar5 + 0x640;
                uVar9 = uVar9 - 1 & 0xffff;
                *puVar5 = uVar2;
              }
            }
            if (uVar8 <= uVar10) {
              bVar11 = (uVar10 - uVar8 & 1) == 0;
              iVar6 = *piVar1 + ((param_1 + uVar8 * 800 + uVar3) - param_2) * 2;
              puVar5 = (ushort *)(iVar6 + -0x63e);
              if (bVar11) {
                puVar5 = (ushort *)(iVar6 + 2);
              }
              if (bVar11) {
                *puVar5 = uVar2;
              }
              uVar8 = (uVar10 - uVar8) * 0x8000 + 0x8000 >> 0x10;
              while (uVar8 != 0) {
                puVar5[800] = uVar2;
                puVar5 = puVar5 + 0x640;
                uVar8 = uVar8 - 1 & 0xffff;
                *puVar5 = uVar2;
              }
            }
          }
        }
      }
      uVar3 = uVar3 + 1 & 0xfffeffff;
    } while ((int)uVar3 < iVar7);
  }
  iVar7 = param_2 + param_3 + -2;
  uVar3 = param_2;
  if (iVar7 <= (int)param_2) {
                    // WARNING: Could not recover jumptable at 0x80012da0. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)();
    return;
  }
  do {
    puVar5 = (ushort *)(param_4 + uVar3 * 2);
    uVar8 = (uint)*puVar5;
    uVar9 = (uint)puVar5[1];
    if (uVar8 != 0) {
      uVar8 = uVar8 - 1 & 0xffff;
    }
    if (uVar9 != 0) {
      uVar9 = uVar9 - 1 & 0xffff;
    }
    uVar10 = uVar8 + uVar9 >> 1;
    if (uVar9 <= uVar8 && uVar8 != uVar9) {
      if (uVar9 + 10 < uVar8) {
        if (uVar9 <= uVar8) {
          bVar11 = (uVar8 - uVar9 & 1) == 0;
          iVar6 = *piVar1 + ((param_1 + uVar9 * 800 + uVar3) - param_2) * 2;
          puVar5 = (ushort *)(iVar6 + -0x63e);
          if (bVar11) {
            puVar5 = (ushort *)(iVar6 + 2);
          }
          if (bVar11) {
            *puVar5 = uVar2;
          }
          uVar8 = (uVar8 - uVar9) * 0x8000 + 0x8000 >> 0x10;
          while (uVar8 != 0) {
            puVar5[800] = uVar2;
            puVar5 = puVar5 + 0x640;
            uVar8 = uVar8 - 1 & 0xffff;
            *puVar5 = uVar2;
          }
        }
      }
      else {
        if (uVar9 <= uVar10) {
          bVar11 = (uVar10 - uVar9 & 1) == 0;
          iVar6 = *piVar1 + ((param_1 + uVar9 * 800 + uVar3) - param_2) * 2;
          puVar5 = (ushort *)(iVar6 + -0x63e);
          if (bVar11) {
            puVar5 = (ushort *)(iVar6 + 2);
          }
          if (bVar11) {
            *puVar5 = uVar2;
          }
          uVar9 = (uVar10 - uVar9) * 0x8000 + 0x8000 >> 0x10;
          while (uVar9 != 0) {
            puVar5[800] = uVar2;
            puVar5 = puVar5 + 0x640;
            uVar9 = uVar9 - 1 & 0xffff;
            *puVar5 = uVar2;
          }
        }
        if (uVar10 <= uVar8) {
          bVar11 = (uVar8 - uVar10 & 1) == 0;
          puVar4 = (ushort *)(*piVar1 + ((param_1 + uVar10 * 800 + uVar3) - param_2) * 2);
          puVar5 = puVar4 + -800;
          if (bVar11) {
            puVar5 = puVar4;
          }
          if (bVar11) {
            *puVar5 = uVar2;
          }
          uVar8 = (uVar8 - uVar10) * 0x8000 + 0x8000 >> 0x10;
          while (uVar8 != 0) {
            puVar5[800] = uVar2;
            puVar5 = puVar5 + 0x640;
            uVar8 = uVar8 - 1 & 0xffff;
            *puVar5 = uVar2;
          }
        }
      }
    }
    else {
      if (uVar9 <= uVar8) {
        puVar5 = (ushort *)(*piVar1 + ((param_1 + uVar8 * 800 + uVar3) - param_2) * 2);
        *puVar5 = uVar2;
        puVar5[1] = uVar2;
      }
      else {
        if (uVar8 + 10 < uVar9) {
          bVar11 = (uVar9 - uVar8 & 1) == 0;
          puVar4 = (ushort *)(*piVar1 + ((param_1 + uVar8 * 800 + uVar3) - param_2) * 2);
          puVar5 = puVar4 + -800;
          if (bVar11) {
            puVar5 = puVar4;
          }
          if (bVar11) {
            *puVar5 = uVar2;
          }
          uVar8 = (uVar9 - uVar8) * 0x8000 + 0x8000 >> 0x10;
          while (uVar8 != 0) {
            puVar5[800] = uVar2;
            puVar5 = puVar5 + 0x640;
            uVar8 = uVar8 - 1 & 0xffff;
            *puVar5 = uVar2;
          }
        }
        else {
          if (uVar8 <= uVar10) {
            bVar11 = (uVar10 - uVar8 & 1) == 0;
            puVar4 = (ushort *)(*piVar1 + ((param_1 + uVar8 * 800 + uVar3) - param_2) * 2);
            puVar5 = puVar4 + -800;
            if (bVar11) {
              puVar5 = puVar4;
            }
            if (bVar11) {
              *puVar5 = uVar2;
            }
            uVar8 = (uVar10 - uVar8) * 0x8000 + 0x8000 >> 0x10;
            while (uVar8 != 0) {
              puVar5[800] = uVar2;
              puVar5 = puVar5 + 0x640;
              uVar8 = uVar8 - 1 & 0xffff;
              *puVar5 = uVar2;
            }
          }
          if (uVar10 <= uVar9) {
            bVar11 = (uVar9 - uVar10 & 1) == 0;
            iVar6 = *piVar1 + ((param_1 + uVar10 * 800 + uVar3) - param_2) * 2;
            puVar5 = (ushort *)(iVar6 + -0x63e);
            if (bVar11) {
              puVar5 = (ushort *)(iVar6 + 2);
            }
            if (bVar11) {
              *puVar5 = uVar2;
            }
            uVar8 = (uVar9 - uVar10) * 0x8000 + 0x8000 >> 0x10;
            while (uVar8 != 0) {
              puVar5[800] = uVar2;
              puVar5 = puVar5 + 0x640;
              uVar8 = uVar8 - 1 & 0xffff;
              *puVar5 = uVar2;
            }
          }
        }
      }
    }
    uVar3 = uVar3 + 1 & 0xfffeffff;
  } while ((int)uVar3 < iVar7);
                    // WARNING: Could not recover jumptable at 0x800130bc. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE_00)();
  return;
}



void scope_pre_process_50ns_data(uint16 *buffer,uint offset,uint count)

{
  uint uVar1;
  ushort uVar2;
  longlong lVar3;
  longlong lVar4;
  int iVar5;
  ushort *puVar6;
  uint16 *puVar7;
  undefined2 *puVar8;
  uint uVar9;
  uint16 *puVar10;
  ushort *puVar11;
  undefined2 *puVar12;
  int iVar13;
  int iVar14;
  uint uVar15;
  ushort uVar16;
  uint uVar17;
  short sVar18;
  short *psVar19;
  
  uVar9 = count * DAT_8001360c;
  uVar15 = uVar9 >> 0x13;
  if (uVar15 != 0) {
    puVar7 = (uint16 *)((int)buffer + offset * 2);
    puVar8 = DAT_80013610;
    puVar10 = (uint16 *)((int)puVar7 + -2);
    if ((uVar15 & 1) != 0) {
      puVar8 = DAT_80013610 + 10;
      *puVar8 = *(undefined2 *)puVar7;
      puVar10 = puVar7;
    }
    uVar17 = (uVar15 << 0xf) >> 0x10;
    while (uVar17 != 0) {
      puVar8[10] = *(undefined2 *)((int)puVar10 + 2);
      puVar10 = (uint16 *)((int)puVar10 + 4);
      uVar17 = uVar17 - 1 & 0xffff;
      puVar8 = puVar8 + 0x14;
      *puVar8 = *(undefined2 *)puVar10;
    }
  }
  iVar5 = DAT_80013614;
  uVar17 = 0;
  if (0 < (int)(uVar15 - 1)) {
    do {
      puVar11 = (ushort *)(DAT_80013618 + uVar17 * 0x14);
      uVar2 = *puVar11;
      uVar16 = puVar11[10];
      if (uVar2 < uVar16) {
        uVar1 = (uint)(ushort)(uVar16 - uVar2);
        iVar13 = 1;
        sVar18 = 4;
        puVar11 = puVar11 + 1;
        *puVar11 = ((short)(int)((longlong)iVar5 * (longlong)(int)uVar1 >> 0x22) -
                   (short)((longlong)iVar5 * (longlong)(int)uVar1 >> 0x3f)) + uVar2;
        do {
          lVar3 = (longlong)iVar5 * (longlong)(int)(uVar1 * (iVar13 + 2));
          lVar4 = (longlong)iVar5 * (longlong)(int)(uVar1 * (iVar13 + 1));
          sVar18 = sVar18 + -1;
          puVar11[1] = ((short)(int)(lVar4 >> 0x22) - (short)(lVar4 >> 0x3f)) + uVar2;
          iVar13 = iVar13 + 2;
          puVar11 = puVar11 + 2;
          *puVar11 = ((short)(int)(lVar3 >> 0x22) - (short)(lVar3 >> 0x3f)) + uVar2;
        } while (sVar18 != 0);
      }
      else {
        uVar1 = (uint)(ushort)(uVar2 - uVar16);
        iVar13 = 1;
        sVar18 = 4;
        puVar11 = puVar11 + 1;
        *puVar11 = uVar2 - ((short)(int)((longlong)iVar5 * (longlong)(int)uVar1 >> 0x22) -
                           (short)((longlong)iVar5 * (longlong)(int)uVar1 >> 0x3f));
        do {
          lVar3 = (longlong)iVar5 * (longlong)(int)(uVar1 * (iVar13 + 2));
          lVar4 = (longlong)iVar5 * (longlong)(int)(uVar1 * (iVar13 + 1));
          sVar18 = sVar18 + -1;
          puVar11[1] = uVar2 - ((short)(int)(lVar4 >> 0x22) - (short)(lVar4 >> 0x3f));
          iVar13 = iVar13 + 2;
          puVar11 = puVar11 + 2;
          *puVar11 = uVar2 - ((short)(int)(lVar3 >> 0x22) - (short)(lVar3 >> 0x3f));
        } while (sVar18 != 0);
      }
      uVar17 = uVar17 + 1 & 0xfffeffff;
    } while ((int)uVar17 < (int)(uVar15 - 1));
  }
  uVar17 = uVar15 - 1;
  if (0 < (int)uVar17) {
    puVar8 = DAT_80013620;
    puVar12 = DAT_8001361c;
    if ((uVar17 & 1) != 0) {
      puVar12 = DAT_8001361c + 10;
      puVar8 = DAT_80013620 + 10;
      *puVar8 = *puVar12;
    }
    uVar17 = uVar17 * 0x8000 >> 0x10;
    while (uVar17 != 0) {
      puVar8[10] = puVar12[10];
      puVar12 = puVar12 + 0x14;
      uVar17 = uVar17 - 1 & 0xffff;
      puVar8 = puVar8 + 0x14;
      *puVar8 = *puVar12;
    }
  }
  uVar17 = 0;
  if (0 < (int)(uVar15 - 2)) {
    do {
      iVar13 = DAT_80013624 + uVar17 * 0x14;
      uVar2 = *(ushort *)(iVar13 + 10);
      uVar16 = *(ushort *)(iVar13 + 0x1e);
      if (uVar2 < uVar16) {
        uVar1 = (uint)(ushort)(uVar16 - uVar2);
        iVar14 = 1;
        sVar18 = 4;
        psVar19 = (short *)(iVar13 + 0xc);
        *psVar19 = ((short)(int)((longlong)iVar5 * (longlong)(int)uVar1 >> 0x22) -
                   (short)((longlong)iVar5 * (longlong)(int)uVar1 >> 0x3f)) + uVar2;
        do {
          lVar3 = (longlong)iVar5 * (longlong)(int)(uVar1 * (iVar14 + 1));
          lVar4 = (longlong)iVar5 * (longlong)(int)(uVar1 * (iVar14 + 2));
          sVar18 = sVar18 + -1;
          psVar19[1] = ((short)(int)(lVar3 >> 0x22) - (short)(lVar3 >> 0x3f)) + uVar2;
          iVar14 = iVar14 + 2;
          psVar19 = psVar19 + 2;
          *psVar19 = ((short)(int)(lVar4 >> 0x22) - (short)(lVar4 >> 0x3f)) + uVar2;
        } while (sVar18 != 0);
      }
      else {
        uVar1 = (uint)(ushort)(uVar2 - uVar16);
        iVar14 = 1;
        sVar18 = 4;
        psVar19 = (short *)(iVar13 + 0xc);
        *psVar19 = uVar2 - ((short)(int)((longlong)iVar5 * (longlong)(int)uVar1 >> 0x22) -
                           (short)((longlong)iVar5 * (longlong)(int)uVar1 >> 0x3f));
        do {
          lVar3 = (longlong)iVar5 * (longlong)(int)(uVar1 * (iVar14 + 1));
          lVar4 = (longlong)iVar5 * (longlong)(int)(uVar1 * (iVar14 + 2));
          sVar18 = sVar18 + -1;
          psVar19[1] = uVar2 - ((short)(int)(lVar3 >> 0x22) - (short)(lVar3 >> 0x3f));
          iVar14 = iVar14 + 2;
          psVar19 = psVar19 + 2;
          *psVar19 = uVar2 - ((short)(int)(lVar4 >> 0x22) - (short)(lVar4 >> 0x3f));
        } while (sVar18 != 0);
      }
      uVar17 = uVar17 + 1 & 0xfffeffff;
    } while ((int)uVar17 < (int)(uVar15 - 2));
  }
  uVar15 = count >> 1;
  if (count != 0) {
    uVar17 = uVar15;
    puVar10 = (uint16 *)((int)buffer + -2);
    puVar11 = DAT_80013628;
    puVar6 = DAT_8001362c;
    if ((count & 1) != 0) {
      puVar11 = DAT_80013628 + 1;
      puVar6 = DAT_8001362c + 1;
      *(short *)buffer = (short)((uint)*puVar11 + (uint)*puVar6 >> 1);
      puVar10 = buffer;
    }
    while (uVar17 != 0) {
      *(short *)((int)puVar10 + 2) = (short)((uint)puVar11[1] + (uint)puVar6[1] >> 1);
      *(short *)(uint16 *)((int)puVar10 + 4) = (short)((uint)puVar11[2] + (uint)puVar6[2] >> 1);
      uVar17 = uVar17 - 1;
      puVar10 = (uint16 *)((int)puVar10 + 4);
      puVar11 = puVar11 + 2;
      puVar6 = puVar6 + 2;
    }
  }
  uVar9 = uVar9 >> 0x12;
  uVar17 = uVar9 - 1;
  if (0 < (int)uVar17) {
    puVar12 = (undefined2 *)((int)buffer + -6);
    puVar8 = DAT_80013630;
    if ((uVar17 & 1) != 0) {
      puVar12 = (undefined2 *)((int)buffer + 4);
      puVar8 = DAT_80013630 + 5;
      *puVar8 = *puVar12;
    }
    uVar17 = uVar17 * 0x8000 >> 0x10;
    while (uVar17 != 0) {
      puVar8[5] = puVar12[5];
      puVar12 = puVar12 + 10;
      uVar17 = uVar17 - 1 & 0xffff;
      puVar8 = puVar8 + 10;
      *puVar8 = *puVar12;
    }
  }
  uVar17 = DAT_80013638;
  uVar9 = uVar9 - 2;
  if (0 < (int)uVar9) {
    uVar9 = uVar9 & 0xffff;
    puVar11 = DAT_80013634;
    do {
      uVar2 = *puVar11;
      uVar16 = puVar11[5];
      if (uVar2 < uVar16) {
        uVar16 = uVar16 - uVar2;
        puVar11[1] = uVar2 + (ushort)((uint)uVar16 * DAT_8001360c >> 0x12);
        puVar11[2] = (short)(uint)((ulonglong)uVar16 * 2 * (ulonglong)uVar17 >> 0x22) + uVar2;
        sVar18 = (short)(uint)((ulonglong)uVar16 * 4 * (ulonglong)uVar17 >> 0x22);
        puVar11[3] = (short)(uint)((ulonglong)((uint)uVar16 * 3) * (ulonglong)uVar17 >> 0x22) +
                     uVar2;
      }
      else {
        uVar16 = uVar2 - uVar16;
        puVar11[1] = uVar2 - (ushort)((uint)uVar16 * DAT_8001360c >> 0x12);
        puVar11[2] = uVar2 - (short)(uint)((ulonglong)uVar16 * 2 * (ulonglong)uVar17 >> 0x22);
        sVar18 = -(short)(uint)((ulonglong)uVar16 * 4 * (ulonglong)uVar17 >> 0x22);
        puVar11[3] = uVar2 - (short)(uint)((ulonglong)((uint)uVar16 * 3) * (ulonglong)uVar17 >> 0x22
                                          );
      }
      puVar11[4] = uVar2 + sVar18;
      uVar9 = uVar9 - 1 & 0xffff;
      puVar11 = puVar11 + 5;
    } while (uVar9 != 0);
  }
  if (count != 0) {
    puVar10 = (uint16 *)((int)buffer + -2);
    puVar11 = DAT_8001362c;
    if ((count & 1) != 0) {
      puVar11 = DAT_8001362c + 1;
      *(short *)buffer = (short)((uint)*(ushort *)buffer + (uint)*puVar11 >> 1);
      puVar10 = buffer;
    }
    if (uVar15 != 0) {
      do {
        puVar6 = (ushort *)((int)puVar10 + 2);
        uVar15 = uVar15 - 1;
        puVar10 = (uint16 *)((int)puVar10 + 4);
        *puVar6 = (ushort)((uint)*puVar6 + (uint)puVar11[1] >> 1);
        puVar11 = puVar11 + 2;
        *(ushort *)puVar10 = (ushort)((uint)*puVar11 + (uint)*(ushort *)puVar10 >> 1);
      } while (uVar15 != 0);
      return;
    }
    return;
  }
  return;
}



void scope_pre_process_250ns_data(uint16 *buffer,uint offset,uint count)

{
  ushort *puVar1;
  ushort *puVar2;
  uint uVar3;
  uint uVar4;
  uint16 *puVar5;
  uint16 *puVar6;
  uint uVar7;
  
  puVar1 = DAT_80013758;
  uVar3 = count >> 1;
  if (uVar3 != 0) {
    puVar5 = (uint16 *)((int)buffer + offset * 2);
    puVar2 = DAT_80013758 + -2;
    puVar6 = (uint16 *)((int)puVar5 + -2);
    if ((uVar3 & 1) != 0) {
      *DAT_80013758 = *(ushort *)puVar5;
      puVar2 = puVar1;
      puVar6 = puVar5;
    }
    uVar7 = (uVar3 << 0xf) >> 0x10;
    while (uVar7 != 0) {
      puVar2[2] = *(ushort *)((int)puVar6 + 2);
      puVar6 = (uint16 *)((int)puVar6 + 4);
      uVar7 = uVar7 - 1 & 0xffff;
      puVar2 = puVar2 + 4;
      *puVar2 = *(ushort *)puVar6;
    }
  }
  uVar7 = (count >> 1) - 1;
  if (0 < (int)uVar7) {
    puVar2 = puVar1 + -2;
    if ((uVar7 & 1) != 0) {
      puVar1[1] = (ushort)((uint)*puVar1 + (uint)puVar1[2] >> 1);
      puVar2 = puVar1;
    }
    uVar7 = uVar7 * 0x8000 >> 0x10;
    while (uVar7 != 0) {
      uVar4 = (uint)puVar2[4];
      puVar2[3] = (ushort)(puVar2[2] + uVar4 >> 1);
      uVar7 = uVar7 - 1 & 0xffff;
      puVar2[5] = (ushort)(uVar4 + puVar2[6] >> 1);
      puVar2 = puVar2 + 4;
    }
  }
  if (count == 0) {
    return;
  }
  puVar6 = (uint16 *)((int)buffer + -2);
  puVar2 = puVar1 + -1;
  if ((count & 1) != 0) {
    *(ushort *)buffer = *puVar1;
    puVar6 = buffer;
    puVar2 = puVar1;
  }
  if (uVar3 == 0) {
    return;
  }
  do {
    uVar3 = uVar3 - 1;
    *(ushort *)((int)puVar6 + 2) = puVar2[1];
    puVar2 = puVar2 + 2;
    puVar6 = (uint16 *)((int)puVar6 + 4);
    *(ushort *)puVar6 = *puVar2;
  } while (uVar3 != 0);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_8001375c(ushort *param_1,int param_2,uint param_3)

{
  ushort uVar1;
  longlong lVar2;
  longlong lVar3;
  ushort *puVar4;
  uint uVar5;
  ushort *puVar6;
  undefined2 *puVar7;
  ushort *puVar8;
  ushort uVar9;
  int iVar10;
  short *psVar11;
  int iVar12;
  ushort uVar13;
  short sVar14;
  uint uVar15;
  uint uVar16;
  int iVar17;
  ushort *puVar18;
  undefined2 *puVar19;
  uint uVar20;
  
  puVar8 = (ushort *)(param_3 * DAT_80013e70 + 0xa3d7 >> 0x14);
  if (puVar8 != (ushort *)0x0) {
    puVar4 = param_1 + param_2;
    puVar6 = DAT_80013e74;
    puVar18 = puVar4 + -1;
    if (((uint)puVar8 & 1) != 0) {
      puVar6 = DAT_80013e74 + 0x19;
      *puVar6 = *puVar4;
      puVar18 = puVar4;
    }
    uVar16 = (uint)((int)puVar8 << 0xf) >> 0x10;
    while (uVar16 != 0) {
      puVar6[0x19] = puVar18[1];
      puVar18 = puVar18 + 2;
      uVar16 = uVar16 - 1 & 0xffff;
      puVar6 = puVar6 + 0x32;
      *puVar6 = *puVar18;
    }
  }
  iVar17 = DAT_80013e78;
  uVar16 = 0;
  if (0 < (int)((int)puVar8 - 1U)) {
    do {
      puVar6 = (ushort *)(DAT_80013e7c + uVar16 * 0x32);
      uVar1 = *puVar6;
      uVar9 = puVar6[0x19];
      sVar14 = 0xc;
      if (uVar1 < uVar9) {
        uVar13 = uVar9 - uVar1;
      }
      else {
        uVar13 = uVar1 - uVar9;
      }
      iVar10 = 0;
      uVar15 = (uint)uVar13;
      if (uVar1 < uVar9) {
        do {
          lVar2 = (longlong)iVar17 * (longlong)(int)(uVar15 * (iVar10 + 2));
          lVar3 = (longlong)iVar17 * (longlong)(int)(uVar15 * (iVar10 + 1));
          sVar14 = sVar14 + -1;
          puVar6[1] = ((short)(int)(lVar3 >> 0x23) - (short)(lVar3 >> 0x3f)) + uVar1;
          iVar10 = iVar10 + 2;
          puVar6 = puVar6 + 2;
          *puVar6 = ((short)(int)(lVar2 >> 0x23) - (short)(lVar2 >> 0x3f)) + uVar1;
        } while (sVar14 != 0);
      }
      else {
        do {
          lVar2 = (longlong)iVar17 * (longlong)(int)(uVar15 * (iVar10 + 2));
          lVar3 = (longlong)iVar17 * (longlong)(int)(uVar15 * (iVar10 + 1));
          sVar14 = sVar14 + -1;
          puVar6[1] = uVar1 - ((short)(int)(lVar3 >> 0x23) - (short)(lVar3 >> 0x3f));
          iVar10 = iVar10 + 2;
          puVar6 = puVar6 + 2;
          *puVar6 = uVar1 - ((short)(int)(lVar2 >> 0x23) - (short)(lVar2 >> 0x3f));
        } while (sVar14 != 0);
      }
      uVar16 = uVar16 + 1 & 0xfffeffff;
    } while ((int)uVar16 < (int)((int)puVar8 - 1U));
  }
  uVar16 = (int)puVar8 - 1;
  if (0 < (int)uVar16) {
    puVar7 = DAT_80013e84;
    puVar19 = DAT_80013e80;
    if ((uVar16 & 1) != 0) {
      puVar19 = DAT_80013e80 + 0x19;
      puVar7 = DAT_80013e84 + 0x19;
      *puVar7 = *puVar19;
    }
    uVar16 = uVar16 * 0x8000 >> 0x10;
    while (uVar16 != 0) {
      puVar7[0x19] = puVar19[0x19];
      puVar19 = puVar19 + 0x32;
      uVar16 = uVar16 - 1 & 0xffff;
      puVar7 = puVar7 + 0x32;
      *puVar7 = *puVar19;
    }
  }
  uVar16 = 0;
  puVar6 = puVar8 + -1;
  if (0 < (int)puVar6) {
    do {
      iVar10 = DAT_80013e88 + uVar16 * 0x32;
      uVar1 = *(ushort *)(iVar10 + 0x18);
      uVar9 = *(ushort *)(iVar10 + 0x4a);
      if (uVar1 < uVar9) {
        psVar11 = (short *)(iVar10 + 0x18);
        iVar10 = 0;
        sVar14 = 0xc;
        do {
          lVar2 = (longlong)iVar17 * (longlong)(int)((uint)(ushort)(uVar9 - uVar1) * (iVar10 + 1));
          lVar3 = (longlong)iVar17 * (longlong)(int)((uint)(ushort)(uVar9 - uVar1) * (iVar10 + 2));
          sVar14 = sVar14 + -1;
          psVar11[1] = ((short)(int)(lVar2 >> 0x23) - (short)(lVar2 >> 0x3f)) + uVar1;
          iVar10 = iVar10 + 2;
          psVar11 = psVar11 + 2;
          *psVar11 = ((short)(int)(lVar3 >> 0x23) - (short)(lVar3 >> 0x3f)) + uVar1;
        } while (sVar14 != 0);
      }
      else {
        psVar11 = (short *)(iVar10 + 0x18);
        iVar10 = 0;
        sVar14 = 0xc;
        do {
          lVar2 = (longlong)iVar17 * (longlong)(int)((uint)(ushort)(uVar1 - uVar9) * (iVar10 + 1));
          lVar3 = (longlong)iVar17 * (longlong)(int)((uint)(ushort)(uVar1 - uVar9) * (iVar10 + 2));
          sVar14 = sVar14 + -1;
          psVar11[1] = uVar1 - ((short)(int)(lVar2 >> 0x23) - (short)(lVar2 >> 0x3f));
          iVar10 = iVar10 + 2;
          psVar11 = psVar11 + 2;
          *psVar11 = uVar1 - ((short)(int)(lVar3 >> 0x23) - (short)(lVar3 >> 0x3f));
        } while (sVar14 != 0);
      }
      puVar8 = (ushort *)(uVar16 + 1);
      uVar16 = (uint)puVar8 & 0xfffeffff;
    } while ((int)uVar16 < (int)puVar6);
  }
  uVar16 = param_3 >> 1;
  if (param_3 != 0) {
    uVar15 = uVar16;
    puVar6 = DAT_80013e90;
    puVar8 = DAT_80013e8c;
    puVar18 = param_1 + -1;
    if ((param_3 & 1) != 0) {
      puVar8 = DAT_80013e8c + 1;
      puVar6 = DAT_80013e90 + 1;
      *param_1 = (ushort)((uint)*puVar8 + (uint)*puVar6 >> 1);
      puVar18 = param_1;
    }
    while (uVar15 != 0) {
      puVar18[1] = (ushort)((uint)puVar8[1] + (uint)puVar6[1] >> 1);
      puVar18[2] = (ushort)((uint)puVar6[2] + (uint)puVar8[2] >> 1);
      uVar15 = uVar15 - 1;
      puVar6 = puVar6 + 2;
      puVar8 = puVar8 + 2;
      puVar18 = puVar18 + 2;
    }
  }
  uVar5 = param_3 * DAT_80013e94;
  uVar15 = uVar5 >> 0x13;
  uVar20 = uVar15 - 1;
  if (0 < (int)uVar20) {
    puVar6 = param_1 + -6;
    puVar8 = DAT_80013e98;
    if ((uVar20 & 1) != 0) {
      puVar6 = param_1 + 6;
      puVar8 = DAT_80013e98 + 0xc;
      *puVar8 = *puVar6;
    }
    uVar20 = uVar20 * 0x8000 >> 0x10;
    while (uVar20 != 0) {
      puVar8[0xc] = puVar6[0xc];
      puVar6 = puVar6 + 0x18;
      uVar20 = uVar20 - 1 & 0xffff;
      puVar8 = puVar8 + 0x18;
      *puVar8 = *puVar6;
    }
  }
  iVar17 = uVar15 - 2;
  if (0 < iVar17) {
    puVar8 = DAT_80013e9c;
  }
  uVar15 = 0;
  if (0 < iVar17) {
    do {
      iVar10 = DAT_80013e88 + uVar15 * 0x18;
      uVar1 = *(ushort *)(iVar10 + 0xc);
      uVar9 = *(ushort *)(iVar10 + 0x24);
      if (uVar1 < uVar9) {
        uVar20 = (uint)(ushort)(uVar9 - uVar1);
        iVar12 = 1;
        sVar14 = 5;
        psVar11 = (short *)(iVar10 + 0xe);
        *psVar11 = ((short)(int)((longlong)(int)puVar8 * (longlong)(int)uVar20 >> 0x21) -
                   (short)((longlong)(int)puVar8 * (longlong)(int)uVar20 >> 0x3f)) + uVar1;
        do {
          lVar2 = (longlong)(int)puVar8 * (longlong)(int)(uVar20 * (iVar12 + 1));
          lVar3 = (longlong)(int)puVar8 * (longlong)(int)(uVar20 * (iVar12 + 2));
          sVar14 = sVar14 + -1;
          psVar11[1] = ((short)(int)(lVar2 >> 0x21) - (short)(lVar2 >> 0x3f)) + uVar1;
          iVar12 = iVar12 + 2;
          psVar11 = psVar11 + 2;
          *psVar11 = ((short)(int)(lVar3 >> 0x21) - (short)(lVar3 >> 0x3f)) + uVar1;
        } while (sVar14 != 0);
      }
      else {
        uVar20 = (uint)(ushort)(uVar1 - uVar9);
        iVar12 = 1;
        sVar14 = 5;
        psVar11 = (short *)(iVar10 + 0xe);
        *psVar11 = uVar1 - ((short)(int)((longlong)(int)puVar8 * (longlong)(int)uVar20 >> 0x21) -
                           (short)((longlong)(int)puVar8 * (longlong)(int)uVar20 >> 0x3f));
        do {
          lVar2 = (longlong)(int)puVar8 * (longlong)(int)(uVar20 * (iVar12 + 1));
          lVar3 = (longlong)(int)puVar8 * (longlong)(int)(uVar20 * (iVar12 + 2));
          sVar14 = sVar14 + -1;
          psVar11[1] = uVar1 - ((short)(int)(lVar2 >> 0x21) - (short)(lVar2 >> 0x3f));
          iVar12 = iVar12 + 2;
          psVar11 = psVar11 + 2;
          *psVar11 = uVar1 - ((short)(int)(lVar3 >> 0x21) - (short)(lVar3 >> 0x3f));
        } while (sVar14 != 0);
      }
      uVar15 = uVar15 + 1 & 0xfffeffff;
    } while ((int)uVar15 < iVar17);
  }
  if (param_3 != 0) {
    uVar15 = uVar16;
    puVar8 = param_1 + -1;
    puVar6 = DAT_80013e90;
    if ((param_3 & 1) != 0) {
      puVar6 = DAT_80013e90 + 1;
      *param_1 = (ushort)((uint)*param_1 + (uint)*puVar6 >> 1);
      puVar8 = param_1;
    }
    while (uVar15 != 0) {
      puVar18 = puVar8 + 2;
      puVar8[1] = (ushort)((uint)puVar8[1] + (uint)puVar6[1] >> 1);
      *puVar18 = (ushort)((uint)puVar6[2] + (uint)*puVar18 >> 1);
      uVar15 = uVar15 - 1;
      puVar8 = puVar18;
      puVar6 = puVar6 + 2;
    }
  }
  uVar5 = uVar5 >> 0x12;
  uVar15 = uVar5 - 1;
  if (0 < (int)uVar15) {
    puVar6 = param_1 + -3;
    puVar8 = DAT_80013ea0;
    if ((uVar15 & 1) != 0) {
      puVar6 = param_1 + 3;
      puVar8 = DAT_80013ea0 + 6;
      *puVar8 = *puVar6;
    }
    uVar15 = uVar15 * 0x8000 >> 0x10;
    while (uVar15 != 0) {
      puVar8[6] = puVar6[6];
      puVar6 = puVar6 + 0xc;
      uVar15 = uVar15 - 1 & 0xffff;
      puVar8 = puVar8 + 0xc;
      *puVar8 = *puVar6;
    }
  }
  uVar15 = DAT_80013ea8;
  uVar5 = uVar5 - 2;
  if (0 < (int)uVar5) {
    uVar5 = uVar5 & 0xffff;
    puVar8 = DAT_80013ea4;
    do {
      uVar1 = *puVar8;
      uVar9 = puVar8[6];
      if (uVar1 < uVar9) {
        uVar9 = uVar9 - uVar1;
        uVar20 = (uint)uVar9;
        puVar8[1] = uVar1 + (ushort)(uVar20 * DAT_80013e94 >> 0x12);
        puVar8[2] = uVar1 + (short)(uint)((ulonglong)uVar9 * 2 * (ulonglong)uVar15 >> 0x22);
        puVar8[3] = uVar1 + (short)(uint)((ulonglong)(uVar20 * 3) * (ulonglong)uVar15 >> 0x22);
        puVar8[4] = uVar1 + (short)(uint)((ulonglong)uVar9 * 4 * (ulonglong)uVar15 >> 0x22);
        puVar8[5] = uVar1 + (short)(uint)((ulonglong)(uVar20 * 5) * (ulonglong)uVar15 >> 0x22);
      }
      else {
        uVar9 = uVar1 - uVar9;
        uVar20 = (uint)uVar9;
        puVar8[1] = uVar1 - (ushort)(uVar20 * DAT_80013e94 >> 0x12);
        puVar8[2] = uVar1 - (short)(uint)((ulonglong)uVar9 * 2 * (ulonglong)uVar15 >> 0x22);
        puVar8[3] = uVar1 - (short)(uint)((ulonglong)(uVar20 * 3) * (ulonglong)uVar15 >> 0x22);
        puVar8[4] = uVar1 - (short)(uint)((ulonglong)uVar9 * 4 * (ulonglong)uVar15 >> 0x22);
        puVar8[5] = uVar1 - (short)(uint)((ulonglong)(uVar20 * 5) * (ulonglong)uVar15 >> 0x22);
      }
      uVar5 = uVar5 - 1 & 0xffff;
      puVar8 = puVar8 + 6;
    } while (uVar5 != 0);
  }
  if (param_3 != 0) {
    puVar8 = param_1 + -1;
    puVar6 = DAT_80013e90;
    if ((param_3 & 1) != 0) {
      puVar6 = DAT_80013e90 + 1;
      *param_1 = (ushort)((uint)*param_1 + (uint)*puVar6 >> 1);
      puVar8 = param_1;
    }
    if (uVar16 != 0) {
      do {
        puVar18 = puVar8 + 1;
        uVar16 = uVar16 - 1;
        puVar8 = puVar8 + 2;
        *puVar18 = (ushort)((uint)*puVar18 + (uint)puVar6[1] >> 1);
        puVar6 = puVar6 + 2;
        *puVar8 = (ushort)((uint)*puVar8 + (uint)*puVar6 >> 1);
      } while (uVar16 != 0);
      return;
    }
    return;
  }
  return;
}



void FUN_80013eac(ushort *param_1,int param_2,uint param_3)

{
  ushort uVar1;
  short sVar2;
  ushort *puVar3;
  ushort *puVar4;
  ushort *puVar5;
  ushort *puVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  
  puVar3 = DAT_80014080;
  uVar8 = param_3 * DAT_8001407c >> 0x12;
  puVar4 = param_1 + param_2;
  if (uVar8 != 0) {
    puVar5 = DAT_80014080 + -5;
    puVar6 = puVar4 + -2;
    if ((uVar8 & 1) != 0) {
      *DAT_80014080 = *puVar4;
      puVar5 = puVar3;
      puVar6 = puVar4;
    }
    uVar9 = (uVar8 << 0xf) >> 0x10;
    while (uVar9 != 0) {
      puVar5[5] = puVar6[2];
      puVar6 = puVar6 + 4;
      uVar9 = uVar9 - 1 & 0xffff;
      puVar5 = puVar5 + 10;
      *puVar5 = *puVar6;
    }
  }
  uVar9 = uVar8 - 1;
  if (0 < (int)uVar9) {
    puVar6 = puVar4 + -1;
    puVar5 = puVar3 + -2;
    if ((uVar9 & 1) != 0) {
      puVar6 = puVar4 + 1;
      puVar5 = puVar3 + 3;
      *puVar5 = *puVar6;
    }
    uVar9 = uVar9 * 0x8000 >> 0x10;
    while (uVar9 != 0) {
      puVar5[5] = puVar6[2];
      puVar6 = puVar6 + 4;
      uVar9 = uVar9 - 1 & 0xffff;
      puVar5 = puVar5 + 10;
      *puVar5 = *puVar6;
    }
  }
  uVar9 = DAT_80014084;
  if (0 < (int)(uVar8 - 1)) {
    uVar8 = uVar8 - 1 & 0xffff;
    puVar4 = DAT_80014080;
    do {
      uVar1 = *puVar4;
      uVar10 = (uint)uVar1;
      uVar7 = (uint)puVar4[3];
      if (uVar10 < uVar7) {
        uVar10 = uVar7 - uVar10 & 0xffff;
        puVar4[1] = uVar1 + (ushort)(DAT_80014088 * uVar10 >> 0x11);
        puVar4[2] = uVar1 + (short)(uint)((ulonglong)(uVar10 << 1) * (ulonglong)uVar9 >> 0x21);
      }
      else {
        uVar10 = uVar10 - uVar7 & 0xffff;
        puVar4[1] = uVar1 - (ushort)(DAT_80014088 * uVar10 >> 0x11);
        puVar4[2] = uVar1 - (short)(uint)((ulonglong)(uVar10 << 1) * (ulonglong)uVar9 >> 0x21);
      }
      uVar10 = (uint)puVar4[5];
      if (uVar10 <= uVar7) {
        uVar11 = uVar7 - uVar10;
      }
      else {
        uVar11 = uVar10 - uVar7;
      }
      if (uVar10 <= uVar7) {
        sVar2 = -(short)((uVar11 & 0xfffeffff) >> 1);
      }
      else {
        sVar2 = (short)((uVar11 & 0xfffeffff) >> 1);
      }
      puVar4[4] = puVar4[3] + sVar2;
      uVar8 = uVar8 - 1 & 0xffff;
      puVar4 = puVar4 + 5;
    } while (uVar8 != 0);
  }
  if (param_3 == 0) {
    return;
  }
  puVar4 = param_1 + -1;
  puVar5 = puVar3 + -1;
  if ((param_3 & 1) != 0) {
    *param_1 = *puVar3;
    puVar4 = param_1;
    puVar5 = puVar3;
  }
  param_3 = param_3 >> 1;
  if (param_3 == 0) {
    return;
  }
  do {
    param_3 = param_3 - 1;
    puVar4[1] = puVar5[1];
    puVar5 = puVar5 + 2;
    puVar4 = puVar4 + 2;
    *puVar4 = *puVar5;
  } while (param_3 != 0);
  return;
}



void FUN_8001408c(ushort *param_1,int param_2,uint param_3)

{
  ushort uVar1;
  ushort *puVar2;
  ushort *puVar3;
  ushort *puVar4;
  ushort *puVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  
  puVar2 = DAT_800141c4;
  uVar6 = param_3 >> 2;
  if (uVar6 != 0) {
    puVar4 = param_1 + param_2;
    puVar3 = DAT_800141c4 + -4;
    puVar5 = puVar4 + -1;
    if ((uVar6 & 1) != 0) {
      *DAT_800141c4 = *puVar4;
      puVar3 = puVar2;
      puVar5 = puVar4;
    }
    uVar6 = (uVar6 << 0xf) >> 0x10;
    while (uVar6 != 0) {
      puVar3[4] = puVar5[1];
      puVar5 = puVar5 + 2;
      uVar6 = uVar6 - 1 & 0xffff;
      puVar3 = puVar3 + 8;
      *puVar3 = *puVar5;
    }
  }
  uVar6 = (param_3 >> 2) - 1;
  if (0 < (int)uVar6) {
    uVar6 = uVar6 & 0xffff;
    puVar3 = DAT_800141c4;
    do {
      uVar1 = *puVar3;
      uVar7 = (uint)uVar1;
      uVar8 = (uint)puVar3[4];
      if (uVar7 < uVar8) {
        uVar7 = uVar8 - uVar7 & 0xfffcffff;
        puVar3[1] = uVar1 + (short)(uVar7 >> 2);
        puVar3[2] = uVar1 + (short)(uVar7 >> 1);
        puVar3[3] = uVar1 + (short)(uVar7 * 3 >> 2);
      }
      else {
        uVar7 = uVar7 - uVar8 & 0xfffcffff;
        puVar3[1] = uVar1 - (short)(uVar7 >> 2);
        puVar3[2] = uVar1 - (short)(uVar7 >> 1);
        puVar3[3] = uVar1 - (short)(uVar7 * 3 >> 2);
      }
      uVar6 = uVar6 - 1 & 0xffff;
      puVar3 = puVar3 + 4;
    } while (uVar6 != 0);
  }
  if (param_3 == 0) {
    return;
  }
  puVar3 = param_1 + -1;
  puVar5 = puVar2 + -1;
  if ((param_3 & 1) != 0) {
    *param_1 = *puVar2;
    puVar3 = param_1;
    puVar5 = puVar2;
  }
  param_3 = param_3 >> 1;
  if (param_3 == 0) {
    return;
  }
  do {
    param_3 = param_3 - 1;
    puVar3[1] = puVar5[1];
    puVar5 = puVar5 + 2;
    puVar3 = puVar3 + 2;
    *puVar3 = *puVar5;
  } while (param_3 != 0);
  return;
}



void scope_pre_process_100ns_data(uint16 *buffer,uint offset,uint count)

{
  uint uVar1;
  ushort uVar2;
  ushort *puVar3;
  ushort *puVar4;
  uint uVar5;
  uint16 *puVar6;
  uint16 *puVar7;
  ushort uVar8;
  
  puVar3 = DAT_8001437c;
  uVar5 = count * DAT_80014378 >> 0x12;
  if (uVar5 != 0) {
    puVar6 = (uint16 *)((int)buffer + offset * 2);
    puVar4 = DAT_8001437c + -5;
    puVar7 = (uint16 *)((int)puVar6 + -2);
    if ((uVar5 & 1) != 0) {
      *DAT_8001437c = *(ushort *)puVar6;
      puVar4 = puVar3;
      puVar7 = puVar6;
    }
    uVar1 = (uVar5 << 0xf) >> 0x10;
    while (uVar1 != 0) {
      puVar4[5] = *(ushort *)((int)puVar7 + 2);
      puVar7 = (uint16 *)((int)puVar7 + 4);
      uVar1 = uVar1 - 1 & 0xffff;
      puVar4 = puVar4 + 10;
      *puVar4 = *(ushort *)puVar7;
    }
  }
  uVar1 = DAT_80014380;
  if (0 < (int)(uVar5 - 1)) {
    uVar5 = uVar5 - 1 & 0xffff;
    puVar4 = DAT_8001437c;
    do {
      uVar2 = *puVar4;
      uVar8 = puVar4[5];
      if (uVar2 < uVar8) {
        uVar8 = uVar8 - uVar2;
        puVar4[1] = uVar2 + (ushort)((uint)uVar8 * DAT_80014378 >> 0x12);
        puVar4[2] = (short)(uint)((ulonglong)uVar8 * 2 * (ulonglong)uVar1 >> 0x22) + uVar2;
        puVar4[3] = (short)(uint)((ulonglong)((uint)uVar8 * 3) * (ulonglong)uVar1 >> 0x22) + uVar2;
        puVar4[4] = uVar2 + (short)(uint)((ulonglong)uVar8 * 4 * (ulonglong)uVar1 >> 0x22);
      }
      else {
        uVar8 = uVar2 - uVar8;
        puVar4[1] = uVar2 - (ushort)((uint)uVar8 * DAT_80014378 >> 0x12);
        puVar4[2] = uVar2 - (short)(uint)((ulonglong)uVar8 * 2 * (ulonglong)uVar1 >> 0x22);
        puVar4[3] = uVar2 - (short)(uint)((ulonglong)((uint)uVar8 * 3) * (ulonglong)uVar1 >> 0x22);
        puVar4[4] = uVar2 - (short)(uint)((ulonglong)uVar8 * 4 * (ulonglong)uVar1 >> 0x22);
      }
      uVar5 = uVar5 - 1 & 0xffff;
      puVar4 = puVar4 + 5;
    } while (uVar5 != 0);
  }
  if (count == 0) {
    return;
  }
  puVar7 = (uint16 *)((int)buffer + -2);
  puVar4 = puVar3 + -1;
  if ((count & 1) != 0) {
    *(ushort *)buffer = *puVar3;
    puVar7 = buffer;
    puVar4 = puVar3;
  }
  uVar5 = count >> 1;
  if (uVar5 == 0) {
    return;
  }
  do {
    uVar5 = uVar5 - 1;
    *(ushort *)((int)puVar7 + 2) = puVar4[1];
    puVar4 = puVar4 + 2;
    puVar7 = (uint16 *)((int)puVar7 + 4);
    *(ushort *)puVar7 = *puVar4;
  } while (uVar5 != 0);
  return;
}



// WARNING: Removing unreachable block (ram,0x8000dc84)
// WARNING: Removing unreachable block (ram,0x8000dca8)
// WARNING: Removing unreachable block (ram,0x8000dcc8)
// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8000dc78)
// WARNING: Removing unreachable block (ram,0x8000dc7c)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_channel1_menu(void)

{
  ushort uVar1;
  undefined4 uVar2;
  undefined *puVar3;
  int *piVar4;
  int iVar5;
  char *pcVar6;
  char *pcVar7;
  uint uVar8;
  ushort *puVar9;
  int iVar10;
  short sVar11;
  uint uVar12;
  uint uVar13;
  ushort uVar14;
  uint uVar15;
  int iVar16;
  undefined2 *puVar17;
  
  uVar15 = DAT_800148c0;
  uVar2 = DAT_800148bc;
  set_frame_to_global_pointer();
  piVar4 = Global_Frame_Buffer_Pointer;
  puVar3 = PTR_BITMAP_CHANNEL_MENU_800148c4;
  uVar12 = 0;
  do {
    iVar16 = 0xb7;
    puVar9 = (ushort *)(puVar3 + uVar12 * 0x16e);
    puVar17 = (undefined2 *)(*piVar4 + uVar12 * 0x640 + 0x120c2);
    do {
      uVar8 = (uint)*puVar9;
      if (*puVar9 == 0) {
        uVar8 = uVar15;
      }
      iVar16 = iVar16 + -1;
      *puVar17 = (short)uVar8;
      iVar5 = DAT_800148cc;
      puVar9 = puVar9 + 1;
      puVar17 = puVar17 + 1;
    } while (iVar16 != 0);
    uVar12 = uVar12 + 1 & 0xfffeffff;
  } while (uVar12 < 0xfc);
  uVar12 = 0x42;
  if (*DAT_800148d0 == '\0') {
    uVar8 = DAT_800148cc - 0xef;
  }
  else {
    uVar8 = DAT_800148cc - 0xee;
  }
  uVar1 = (ushort)uVar2;
  if (*DAT_800148d0 == '\0') {
    do {
      puVar9 = (ushort *)(*piVar4 + (uVar12 * 800 + 5) * 2 + 0x232);
      uVar13 = uVar8 & 0xffff;
      do {
        if (*puVar9 == uVar15) {
          *puVar9 = uVar1;
        }
        else {
          *puVar9 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar9 = puVar9 + 1;
      } while (uVar13 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x58);
  }
  else {
    do {
      puVar9 = (ushort *)(*piVar4 + (uVar12 * 800 + 5) * 2 + 0x1ca);
      uVar13 = uVar8 & 0xffff;
      do {
        if (*puVar9 == uVar15) {
          *puVar9 = uVar1;
        }
        else {
          *puVar9 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar9 = puVar9 + 1;
      } while (uVar13 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x58);
  }
  uVar12 = 0x80;
  if (DAT_800148d0[4] == '\0') {
    uVar8 = iVar5 - 0xef;
  }
  else {
    uVar8 = iVar5 - 0xee;
  }
  if (DAT_800148d0[4] == '\0') {
    do {
      puVar9 = (ushort *)(*piVar4 + (uVar12 * 800 + 5) * 2 + 0x232);
      uVar13 = uVar8 & 0xffff;
      do {
        if (*puVar9 == uVar15) {
          *puVar9 = uVar1;
        }
        else {
          *puVar9 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar9 = puVar9 + 1;
      } while (uVar13 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x96);
  }
  else {
    do {
      puVar9 = (ushort *)(*piVar4 + (uVar12 * 800 + 5) * 2 + 0x1ca);
      uVar13 = uVar8 & 0xffff;
      do {
        if (*puVar9 == uVar15) {
          *puVar9 = uVar1;
        }
        else {
          *puVar9 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar9 = puVar9 + 1;
      } while (uVar13 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x96);
  }
  uVar12 = 0xc0;
  if (DAT_800148d0[1] == '\0') {
    uVar8 = iVar5 - 0xee;
  }
  else {
    uVar8 = iVar5 - 0xef;
  }
  if (DAT_800148d0[1] == '\0') {
    do {
      puVar9 = (ushort *)(*piVar4 + (uVar12 * 800 + 5) * 2 + 0x1ca);
      uVar13 = uVar8 & 0xffff;
      do {
        if (*puVar9 == uVar15) {
          *puVar9 = uVar1;
        }
        else {
          *puVar9 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar9 = puVar9 + 1;
      } while (uVar13 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0xd6);
  }
  else {
    do {
      puVar9 = (ushort *)(*piVar4 + (uVar12 * 800 + 5) * 2 + 0x232);
      uVar13 = uVar8 & 0xffff;
      do {
        if (*puVar9 == uVar15) {
          *puVar9 = uVar1;
        }
        else {
          *puVar9 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar9 = puVar9 + 1;
      } while (uVar13 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0xd6);
  }
  if (DAT_800148d0[2] == '\0') {
    uVar8 = 0xf7;
    uVar12 = DAT_800148d4 - 0xee;
    do {
      puVar9 = (ushort *)(*piVar4 + (uVar8 * 800 + 5) * 2 + 0x1ca);
      uVar13 = uVar12 & 0xffff;
      do {
        if (*puVar9 == uVar15) {
          *puVar9 = uVar1;
        }
        else {
          *puVar9 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar9 = puVar9 + 1;
      } while (uVar13 != 0);
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < 0x11c);
  }
  else {
    if (DAT_800148d0[2] == '\x01') {
      uVar8 = 0xf7;
      uVar12 = DAT_800148d8 - 0x110;
      do {
        puVar9 = (ushort *)(*piVar4 + (uVar8 * 800 + 5) * 2 + 0x20e);
        uVar13 = uVar12 & 0xffff;
        do {
          uVar14 = *puVar9;
          if (uVar14 == uVar15) {
            *puVar9 = uVar1;
          }
          if (uVar14 != uVar15) {
            *puVar9 = 0;
          }
          uVar13 = uVar13 - 1 & 0xffff;
          puVar9 = puVar9 + 1;
        } while (uVar13 != 0);
        uVar8 = uVar8 + 1 & 0xfffeffff;
      } while (uVar8 < 0x11c);
    }
    else {
      if (DAT_800148d0[2] == '\x02') {
        uVar12 = 0xf7;
        do {
          puVar9 = (ushort *)(*piVar4 + (uVar12 * 800 + 5) * 2 + 0x248);
          sVar11 = 0x1f;
          do {
            sVar11 = sVar11 + -1;
            if (*puVar9 == uVar15) {
              *puVar9 = uVar1;
            }
            else {
              *puVar9 = 0;
            }
            puVar9 = puVar9 + 1;
          } while (sVar11 != 0);
          uVar12 = uVar12 + 1 & 0xfffeffff;
        } while (uVar12 < 0x11c);
      }
    }
  }
  set_display_fg_color(DAT_800148dc);
  uVar1 = (ushort)DAT_800148e0;
  display_draw_rect(0xa1,0x2e,uVar1 + 0x2e,uVar1);
  set_display_fg_color(0);
  uVar14 = uVar1 + 0x21;
  display_draw_horz_line(0x6c,0xaf,uVar14);
  display_draw_horz_line(0xab,0xaf,uVar14);
  display_draw_horz_line(0xea,0xaf,uVar14);
  copy_rect_to_screen(0xa1,0x2e,uVar1 + 0x2e,uVar1 + 1);
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(0xa1,4,0x104,0x2d);
  pcVar7 = DAT_8000dcf0;
  uVar15 = DAT_8000dcf4;
  if (*DAT_8000dcf0 == '\0') {
    uVar15 = DAT_8000dcf8;
  }
  set_display_fg_color(uVar15);
  display_fill_rect(0xa1,5,0xbf,0x28);
  set_display_fg_color(0);
  set_font_paint_mode(2);
  select_font(PTR_FONT_2_8000dcfc);
  display_text(&DAT_8000dd00,0xa6,0x10);
  set_display_fg_color(0xffffff);
  if (pcVar7[1] == '\0') {
    pcVar6 = (char *)0x8000dd04;
  }
  else {
    pcVar6 = (char *)0x8000dd08;
  }
  display_text(pcVar6,199,8);
  set_display_fg_color(0xffffff);
  if (pcVar7[2] == '\0') {
    display_text(&DAT_8000dd0c,0xe0,8);
  }
  else {
    if (pcVar7[2] == '\x01') {
      pcVar6 = &DAT_8000dd10;
    }
    else {
      if (pcVar7[2] != '\x02') goto LAB_8000dac0;
      pcVar6 = &DAT_8000dd14;
    }
    display_text(pcVar6,0xde,8);
  }
LAB_8000dac0:
  if (pcVar7[2] != '\0') {
    if (pcVar7[2] == '\x01') {
      switch(pcVar7[3]) {
      case '\0':
switchD_8000db84_caseD_0:
        pcVar7 = &DAT_8000dda4;
        break;
      case '\x01':
        pcVar7 = &DAT_8000dd60;
        break;
      case '\x02':
switchD_8000db84_caseD_2:
        pcVar7 = &DAT_8000dd68;
        break;
      case '\x03':
switchD_8000db84_caseD_3:
        pcVar7 = s_5V_div_8000dd1c;
        break;
      case '\x04':
        pcVar7 = &DAT_8000dd70;
        break;
      case '\x05':
        goto switchD_8000daf0_caseD_2;
      case '\x06':
        goto switchD_8000daf0_caseD_3;
      default:
        goto switchD_8000daf0_caseD_7;
      }
    }
    else {
      if (pcVar7[2] != '\x02') goto switchD_8000daf0_caseD_7;
      switch(pcVar7[3]) {
      case '\0':
        pcVar7 = &DAT_8000dd80;
        break;
      case '\x01':
        pcVar7 = &DAT_8000dd8c;
        break;
      case '\x02':
        pcVar7 = &DAT_8000dd98;
        break;
      case '\x03':
        goto switchD_8000db84_caseD_0;
      case '\x04':
        pcVar7 = &DAT_8000ddac;
        break;
      case '\x05':
        goto switchD_8000db84_caseD_2;
      case '\x06':
        goto switchD_8000db84_caseD_3;
      default:
        goto switchD_8000daf0_caseD_7;
      }
    }
    goto LAB_8000db34;
  }
  switch(pcVar7[3]) {
  case '\0':
    display_text(s_5V_div_8000dd1c,199,0x18);
    goto switchD_8000daf0_caseD_7;
  case '\x01':
    pcVar7 = s_2_5V_div_8000dd24;
    break;
  case '\x02':
switchD_8000daf0_caseD_2:
    pcVar7 = &DAT_8000dd78;
    break;
  case '\x03':
switchD_8000daf0_caseD_3:
    pcVar7 = &DAT_8000dd30;
    break;
  case '\x04':
    pcVar7 = &DAT_8000dd3c;
    break;
  case '\x05':
    pcVar7 = &DAT_8000dd48;
    break;
  case '\x06':
    pcVar7 = &DAT_8000dd54;
    break;
  default:
    goto switchD_8000daf0_caseD_7;
  }
LAB_8000db34:
  display_text(pcVar7,199,0x18);
switchD_8000daf0_caseD_7:
  iVar5 = Start_Of_Screen_Mem;
  iVar16 = Screen_Frame_Buffer;
  uVar15 = 4;
  do {
    iVar10 = uVar15 * 800 + 0xa1;
    copy_short((void *)(iVar5 + iVar10 * 2),(void *)(iVar16 + iVar10 * 2),100);
    uVar15 = uVar15 + 1;
  } while (uVar15 < 0x2d);
  return;
}



// WARNING: Removing unreachable block (ram,0x8000e084)
// WARNING: Removing unreachable block (ram,0x8000e0ac)
// WARNING: Removing unreachable block (ram,0x8000e0d4)
// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8000e078)
// WARNING: Removing unreachable block (ram,0x8000e07c)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_channel2_menu(void)

{
  int iVar1;
  undefined4 uVar2;
  undefined *puVar3;
  int *piVar4;
  int iVar5;
  char *pcVar6;
  ushort *puVar7;
  int iVar8;
  ushort uVar9;
  short sVar10;
  ushort xstart;
  undefined2 *puVar11;
  uint uVar12;
  ushort xend;
  uint uVar13;
  uint uVar14;
  int iVar15;
  uint uVar16;
  
  uVar14 = DAT_80014e54;
  uVar2 = DAT_80014e50;
  set_frame_to_global_pointer();
  piVar4 = Global_Frame_Buffer_Pointer;
  puVar3 = PTR_BITMAP_CHANNEL_MENU_80014e58;
  uVar16 = 0;
  do {
    iVar15 = 0xb7;
    puVar11 = (undefined2 *)(*piVar4 + uVar16 * 0x640 + 0x121c0);
    puVar7 = (ushort *)(puVar3 + uVar16 * 0x16e);
    do {
      uVar13 = (uint)*puVar7;
      if (*puVar7 == 0) {
        uVar13 = uVar14;
      }
      iVar15 = iVar15 + -1;
      *puVar11 = (short)uVar13;
      iVar5 = DAT_80014e64;
      iVar1 = DAT_80014e60;
      puVar11 = puVar11 + 1;
      puVar7 = puVar7 + 1;
    } while (iVar15 != 0);
    uVar16 = uVar16 + 1 & 0xfffeffff;
  } while (uVar16 < 0xfc);
  uVar9 = (ushort)uVar2;
  if (*(char *)(DAT_80014e60 + 0xc) == '\0') {
    uVar16 = 0x42;
    do {
      puVar7 = (ushort *)(*piVar4 + (uVar16 * 800 + 5) * 2 + 0x330);
      sVar10 = 0x27;
      do {
        sVar10 = sVar10 + -1;
        if (*puVar7 == uVar14) {
          *puVar7 = uVar9;
        }
        else {
          *puVar7 = 0;
        }
        puVar7 = puVar7 + 1;
      } while (sVar10 != 0);
      uVar16 = uVar16 + 1 & 0xfffeffff;
    } while (uVar16 < 0x58);
  }
  else {
    uVar16 = DAT_80014e64 - 0x16d;
    uVar13 = 0x42;
    do {
      puVar7 = (ushort *)(*piVar4 + (uVar13 * 800 + 5) * 2 + 0x2c8);
      uVar12 = uVar16 & 0xffff;
      do {
        if (*puVar7 == uVar14) {
          *puVar7 = uVar9;
        }
        else {
          *puVar7 = 0;
        }
        uVar12 = uVar12 - 1 & 0xffff;
        puVar7 = puVar7 + 1;
      } while (uVar12 != 0);
      uVar13 = uVar13 + 1 & 0xfffeffff;
    } while (uVar13 < 0x58);
  }
  if (*(char *)(iVar1 + 0x10) == '\0') {
    uVar16 = 0x80;
    do {
      puVar7 = (ushort *)(*piVar4 + (uVar16 * 800 + 5) * 2 + 0x330);
      sVar10 = 0x27;
      do {
        sVar10 = sVar10 + -1;
        if (*puVar7 == uVar14) {
          *puVar7 = uVar9;
        }
        else {
          *puVar7 = 0;
        }
        puVar7 = puVar7 + 1;
      } while (sVar10 != 0);
      uVar16 = uVar16 + 1 & 0xfffeffff;
    } while (uVar16 < 0x96);
  }
  else {
    uVar16 = 0x80;
    do {
      puVar7 = (ushort *)(*piVar4 + (uVar16 * 800 + 5) * 2 + 0x2c8);
      uVar13 = iVar5 - 0x16dU & 0xffff;
      do {
        if (*puVar7 == uVar14) {
          *puVar7 = uVar9;
        }
        else {
          *puVar7 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar7 = puVar7 + 1;
      } while (uVar13 != 0);
      uVar16 = uVar16 + 1 & 0xfffeffff;
    } while (uVar16 < 0x96);
  }
  if (*(char *)(iVar1 + 0xd) == '\0') {
    uVar16 = 0xc0;
    do {
      puVar7 = (ushort *)(*piVar4 + (uVar16 * 800 + 5) * 2 + 0x2c8);
      uVar13 = iVar5 - 0x16dU & 0xffff;
      do {
        if (*puVar7 == uVar14) {
          *puVar7 = uVar9;
        }
        else {
          *puVar7 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar7 = puVar7 + 1;
      } while (uVar13 != 0);
      uVar16 = uVar16 + 1 & 0xfffeffff;
    } while (uVar16 < 0xd6);
  }
  else {
    uVar16 = 0xc0;
    do {
      puVar7 = (ushort *)(*piVar4 + (uVar16 * 800 + 5) * 2 + 0x330);
      sVar10 = 0x27;
      do {
        sVar10 = sVar10 + -1;
        if (*puVar7 == uVar14) {
          *puVar7 = uVar9;
        }
        else {
          *puVar7 = 0;
        }
        puVar7 = puVar7 + 1;
      } while (sVar10 != 0);
      uVar16 = uVar16 + 1 & 0xfffeffff;
    } while (uVar16 < 0xd6);
  }
  if (*(char *)(iVar1 + 0xe) == '\0') {
    uVar13 = 0xf7;
    uVar16 = DAT_80014e68 - 0x16d;
    do {
      puVar7 = (ushort *)(*piVar4 + (uVar13 * 800 + 5) * 2 + 0x2c8);
      uVar12 = uVar16 & 0xffff;
      do {
        if (*puVar7 == uVar14) {
          *puVar7 = uVar9;
        }
        else {
          *puVar7 = 0;
        }
        uVar12 = uVar12 - 1 & 0xffff;
        puVar7 = puVar7 + 1;
      } while (uVar12 != 0);
      uVar13 = uVar13 + 1 & 0xfffeffff;
    } while (uVar13 < 0x11c);
  }
  else {
    if (*(char *)(iVar1 + 0xe) == '\x01') {
      uVar13 = 0xf7;
      uVar16 = DAT_80014e6c - 399;
      do {
        puVar7 = (ushort *)(*piVar4 + (uVar13 * 800 + 5) * 2 + 0x30c);
        uVar12 = uVar16 & 0xffff;
        do {
          if (*puVar7 == uVar14) {
            *puVar7 = uVar9;
          }
          else {
            *puVar7 = 0;
          }
          uVar12 = uVar12 - 1 & 0xffff;
          puVar7 = puVar7 + 1;
        } while (uVar12 != 0);
        uVar13 = uVar13 + 1 & 0xfffeffff;
      } while (uVar13 < 0x11c);
    }
    else {
      if (*(char *)(iVar1 + 0xe) == '\x02') {
        uVar13 = 0xf7;
        uVar16 = DAT_80014e70 - 0x1ac;
        do {
          puVar7 = (ushort *)(*piVar4 + (uVar13 * 800 + 5) * 2 + 0x346);
          uVar12 = uVar16 & 0xffff;
          do {
            if (*puVar7 == uVar14) {
              *puVar7 = uVar9;
            }
            else {
              *puVar7 = 0;
            }
            uVar12 = uVar12 - 1 & 0xffff;
            puVar7 = puVar7 + 1;
          } while (uVar12 != 0);
          uVar13 = uVar13 + 1 & 0xfffeffff;
        } while (uVar13 < 0x11c);
      }
    }
  }
  set_display_fg_color(DAT_80014e74);
  uVar9 = (ushort)DAT_80014e78;
  display_draw_rect(0x120,0x2e,uVar9 + 0xad,uVar9);
  set_display_fg_color(0);
  xend = uVar9 + 0xa0;
  xstart = uVar9 + 5;
  display_draw_horz_line(0x6c,xstart,xend);
  display_draw_horz_line(0xab,xstart,xend);
  display_draw_horz_line(0xea,xstart,xend);
  copy_rect_to_screen(0x120,0x2e,uVar9 + 0xad,uVar9 + 1);
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  iVar15 = DAT_8000e100;
  display_fill_rect(0x120,4,(ushort)DAT_8000e100,0x2d);
  iVar1 = DAT_8000e104;
  uVar14 = DAT_8000e108;
  if (*(char *)(DAT_8000e104 + 0xc) == '\0') {
    uVar14 = DAT_8000e10c;
  }
  set_display_fg_color(uVar14);
  display_fill_rect(0x120,5,(ushort)DAT_8000e110,0x28);
  set_display_fg_color(0);
  set_font_paint_mode(2);
  select_font(PTR_FONT_2_8000e114);
  display_text(&DAT_8000e11c,(ushort)DAT_8000e118,0x10);
  set_display_fg_color(0xffffff);
  if (*(char *)(iVar1 + 0xd) == '\0') {
    pcVar6 = (char *)0x8000e124;
  }
  else {
    pcVar6 = (char *)0x8000e128;
  }
  uVar9 = (ushort)DAT_8000e120;
  display_text(pcVar6,uVar9,8);
  set_display_fg_color(0xffffff);
  if (*(char *)(iVar1 + 0xe) == '\0') {
    display_text(&DAT_8000e140,(ushort)DAT_8000e13c,8);
  }
  else {
    if (*(char *)(iVar1 + 0xe) == '\x01') {
      pcVar6 = (char *)0x8000e130;
    }
    else {
      if (*(char *)(iVar1 + 0xe) != '\x02') goto LAB_8000dec0;
      pcVar6 = (char *)0x8000e134;
    }
    display_text(pcVar6,(ushort)DAT_8000e12c,8);
  }
LAB_8000dec0:
  if (*(char *)(iVar1 + 0xe) != '\0') {
    if (*(char *)(iVar1 + 0xe) == '\x01') {
      switch(*(undefined *)(iVar1 + 0xf)) {
      case 0:
switchD_8000df84_caseD_0:
        pcVar6 = &DAT_8000e1cc;
        break;
      case 1:
        pcVar6 = &DAT_8000e188;
        break;
      case 2:
switchD_8000df84_caseD_2:
        pcVar6 = &DAT_8000e190;
        break;
      case 3:
switchD_8000df84_caseD_3:
        pcVar6 = s_5V_div_8000e144;
        break;
      case 4:
        pcVar6 = &DAT_8000e198;
        break;
      case 5:
        goto switchD_8000def0_caseD_2;
      case 6:
        goto switchD_8000def0_caseD_3;
      default:
        goto switchD_8000def0_caseD_7;
      }
    }
    else {
      if (*(char *)(iVar1 + 0xe) != '\x02') goto switchD_8000def0_caseD_7;
      switch(*(undefined *)(iVar1 + 0xf)) {
      case 0:
        pcVar6 = &DAT_8000e1a8;
        break;
      case 1:
        pcVar6 = &DAT_8000e1b4;
        break;
      case 2:
        pcVar6 = &DAT_8000e1c0;
        break;
      case 3:
        goto switchD_8000df84_caseD_0;
      case 4:
        pcVar6 = &DAT_8000e1d4;
        break;
      case 5:
        goto switchD_8000df84_caseD_2;
      case 6:
        goto switchD_8000df84_caseD_3;
      default:
        goto switchD_8000def0_caseD_7;
      }
    }
    goto LAB_8000df34;
  }
  switch(*(undefined *)(iVar1 + 0xf)) {
  case 0:
    display_text(s_5V_div_8000e144,uVar9,0x18);
    goto switchD_8000def0_caseD_7;
  case 1:
    pcVar6 = s_2_5V_div_8000e14c;
    break;
  case 2:
switchD_8000def0_caseD_2:
    pcVar6 = &DAT_8000e1a0;
    break;
  case 3:
switchD_8000def0_caseD_3:
    pcVar6 = &DAT_8000e158;
    break;
  case 4:
    pcVar6 = &DAT_8000e164;
    break;
  case 5:
    pcVar6 = &DAT_8000e170;
    break;
  case 6:
    pcVar6 = &DAT_8000e17c;
    break;
  default:
    goto switchD_8000def0_caseD_7;
  }
LAB_8000df34:
  display_text(pcVar6,uVar9,0x18);
switchD_8000def0_caseD_7:
  iVar5 = Start_Of_Screen_Mem;
  iVar1 = Screen_Frame_Buffer;
  uVar14 = 4;
  do {
    iVar8 = uVar14 * 800 + 0x120;
    copy_short((void *)(iVar5 + iVar8 * 2),(void *)(iVar1 + iVar8 * 2),iVar15 + -0x11f);
    uVar14 = uVar14 + 1;
  } while (uVar14 < 0x2d);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void highlight_measures_menu_items(void)

{
  undefined2 uVar1;
  uint uVar2;
  int iVar3;
  undefined *puVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  ushort *puVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  undefined2 *puVar12;
  ushort ypos;
  short sVar13;
  uint uVar14;
  int iVar15;
  
  iVar3 = DAT_800152dc;
  uVar2 = DAT_800152d8;
  uVar9 = DAT_800152d4;
  uVar14 = DAT_800152d0;
  set_frame_to_global_pointer();
  iVar5 = DAT_800152e4;
  puVar4 = PTR_BITMAP_MEASURES_MENU_800152e0;
  uVar11 = 0;
  do {
    puVar12 = (undefined2 *)((*Global_Frame_Buffer_Pointer + uVar11 * 0x640) - iVar5);
    puVar8 = (ushort *)(puVar4 + uVar11 * DAT_800152dc * 2);
    iVar15 = iVar3;
    do {
      uVar6 = (uint)*puVar8;
      uVar7 = uVar14;
      if (uVar6 != 0) {
        if (uVar6 == 0xf800) {
          uVar7 = 0;
        }
        else {
          uVar7 = uVar6;
          if (uVar6 == uVar2) {
            uVar7 = uVar9;
          }
        }
      }
      iVar15 = iVar15 + -1;
      *puVar12 = (short)uVar7;
      puVar12 = puVar12 + 1;
      puVar8 = puVar8 + 1;
    } while (iVar15 != 0);
    do {
      uVar11 = uVar11 + 1 & 0xfffeffff;
      if (0xd5 < uVar11) {
        set_font_paint_mode(2);
        select_font(PTR_FONT_2_800152ec);
        set_display_fg_color(0);
        ypos = (ushort)DAT_800152f0;
        display_text(&DAT_800152f4,0xef,ypos);
        display_text(&DAT_800152f8,0x1e8,ypos);
        uVar1 = (undefined2)uVar2;
        if (*(char *)(DAT_800152fc + 0x1c2) != '\0') {
          uVar14 = 0x1b;
          do {
            sVar13 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 2) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 2) * 2);
            do {
              sVar13 = sVar13 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar13 != 0);
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0x58);
        }
        if (*(char *)(DAT_800152fc + 0x1d2) != '\0') {
          uVar14 = 0x1b;
          do {
            sVar13 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 0x40) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 0x40) * 2);
            do {
              sVar13 = sVar13 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar13 != 0);
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0x58);
        }
        if (*(char *)(DAT_800152fc + 0x1e2) != '\0') {
          uVar14 = 0x1b;
          do {
            sVar13 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 0x7e) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 0x7e) * 2);
            do {
              sVar13 = sVar13 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar13 != 0);
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0x58);
        }
        if (*(char *)(DAT_800152fc + 0x1f2) != '\0') {
          uVar14 = 0x1b;
          do {
            sVar13 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 0xbc) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 0xbc) * 2);
            do {
              sVar13 = sVar13 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar13 != 0);
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0x58);
        }
        if (*(char *)(DAT_800152fc + 0x202) != '\0') {
          uVar14 = 0x59;
          do {
            sVar13 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 2) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 2) * 2);
            do {
              sVar13 = sVar13 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar13 != 0);
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0x96);
        }
        if (*(char *)(DAT_800152fc + 0x212) != '\0') {
          uVar14 = 0x59;
          do {
            sVar13 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 0x40) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 0x40) * 2);
            do {
              sVar13 = sVar13 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar13 != 0);
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0x96);
        }
        if (*(char *)(DAT_800152fc + 0x232) != '\0') {
          uVar14 = 0x59;
          do {
            sVar13 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 0x7e) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 0x7e) * 2);
            do {
              sVar13 = sVar13 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar13 != 0);
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0x96);
        }
        if (*(char *)(DAT_800152fc + 0x242) != '\0') {
          uVar14 = 0x59;
          do {
            sVar13 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 0xbc) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 0xbc) * 2);
            do {
              sVar13 = sVar13 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar13 != 0);
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0x96);
        }
        if (*(char *)(DAT_800152fc + 0x252) != '\0') {
          uVar14 = 0x97;
          do {
            sVar13 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 2) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 2) * 2);
            do {
              sVar13 = sVar13 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar13 != 0);
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0xd4);
        }
        if (*(char *)(DAT_800152fc + 0x262) != '\0') {
          uVar14 = 0x97;
          do {
            sVar13 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 0x40) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 0x40) * 2);
            do {
              sVar13 = sVar13 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar13 != 0);
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0xd4);
        }
        if (*(char *)(DAT_800152fc + 0x272) != '\0') {
          uVar14 = 0x97;
          do {
            sVar13 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 0x7e) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 0x7e) * 2);
            do {
              sVar13 = sVar13 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar13 != 0);
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0xd4);
        }
        if (*(char *)(DAT_800152fc + 0x282) != '\0') {
          uVar14 = 0x97;
          do {
            sVar13 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 0xbc) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 0xbc) * 2);
            do {
              sVar13 = sVar13 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar13 != 0);
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0xd4);
        }
        if (*(char *)(DAT_800152fc + 0x100) != '\0') {
          uVar11 = 0x1b;
          uVar14 = DAT_80015ef8 | (int)DAT_80015ef8 >> 4;
          uVar9 = DAT_80015ef8 - 0xf9;
          do {
            if (0xfa < (int)uVar14) {
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar11 * 800 + 0xfa) * 2) - iVar5);
              uVar7 = uVar9 & 0xffff;
              puVar8 = (ushort *)(puVar4 + (uVar11 * iVar3 + 0xfa) * 2);
              do {
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                uVar7 = uVar7 - 1 & 0xffff;
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (uVar7 != 0);
            }
            uVar11 = uVar11 + 1 & 0xfffeffff;
          } while (uVar11 < 0x58);
        }
        iVar15 = DAT_80015efc;
        if (*(char *)(DAT_800152fc + 0x112) != '\0') {
          uVar14 = 0x1b;
          do {
            if (0x138 < iVar15) {
              sVar13 = 0x3d;
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 0x138) * 2) - iVar5);
              puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 0x138) * 2);
              do {
                sVar13 = sVar13 + -1;
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (sVar13 != 0);
            }
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0x58);
        }
        if (*(char *)(DAT_800152fc + 0x122) != '\0') {
          uVar11 = 0x1b;
          uVar14 = DAT_80015f00 | (int)DAT_80015f00 >> 7;
          uVar9 = DAT_80015f00 - 0x175;
          do {
            if (0x176 < (int)uVar14) {
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar11 * 800 + 0x176) * 2) - iVar5);
              uVar7 = uVar9 & 0xffff;
              puVar8 = (ushort *)(puVar4 + (uVar11 * iVar3 + 0x176) * 2);
              do {
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                uVar7 = uVar7 - 1 & 0xffff;
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (uVar7 != 0);
            }
            uVar11 = uVar11 + 1 & 0xfffeffff;
          } while (uVar11 < 0x58);
        }
        iVar15 = DAT_80015f04;
        if (*(char *)(DAT_800152fc + 0x132) != '\0') {
          uVar14 = 0x1b;
          do {
            if (0x1b4 < iVar15) {
              sVar13 = 0x3d;
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 0x1b4) * 2) - iVar5);
              puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 0x1b4) * 2);
              do {
                sVar13 = sVar13 + -1;
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (sVar13 != 0);
            }
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0x58);
        }
        if (*(char *)(DAT_800152fc + 0x142) != '\0') {
          uVar11 = 0x59;
          uVar14 = DAT_80015ef8 | (int)DAT_80015ef8 >> 4;
          uVar9 = DAT_80015ef8 - 0xf9;
          do {
            if (0xfa < (int)uVar14) {
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar11 * 800 + 0xfa) * 2) - iVar5);
              uVar7 = uVar9 & 0xffff;
              puVar8 = (ushort *)(puVar4 + (uVar11 * iVar3 + 0xfa) * 2);
              do {
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                uVar7 = uVar7 - 1 & 0xffff;
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (uVar7 != 0);
            }
            uVar11 = uVar11 + 1 & 0xfffeffff;
          } while (uVar11 < 0x96);
        }
        iVar15 = DAT_80015efc;
        if (*(char *)(DAT_800152fc + 0x152) != '\0') {
          uVar14 = 0x59;
          do {
            if (0x138 < iVar15) {
              sVar13 = 0x3d;
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 0x138) * 2) - iVar5);
              puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 0x138) * 2);
              do {
                sVar13 = sVar13 + -1;
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (sVar13 != 0);
            }
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0x96);
        }
        if (*(char *)(DAT_800152fc + 0x162) != '\0') {
          uVar11 = 0x59;
          uVar14 = DAT_80015f00 | (int)DAT_80015f00 >> 7;
          uVar9 = DAT_80015f00 - 0x175;
          do {
            if (0x176 < (int)uVar14) {
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar11 * 800 + 0x176) * 2) - iVar5);
              uVar7 = uVar9 & 0xffff;
              puVar8 = (ushort *)(puVar4 + (uVar11 * iVar3 + 0x176) * 2);
              do {
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                uVar7 = uVar7 - 1 & 0xffff;
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (uVar7 != 0);
            }
            uVar11 = uVar11 + 1 & 0xfffeffff;
          } while (uVar11 < 0x96);
        }
        iVar15 = DAT_80015f04;
        if (*(char *)(DAT_800152fc + 0x172) != '\0') {
          uVar14 = 0x59;
          do {
            if (0x1b4 < iVar15) {
              sVar13 = 0x3d;
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 0x1b4) * 2) - iVar5);
              puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 0x1b4) * 2);
              do {
                sVar13 = sVar13 + -1;
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (sVar13 != 0);
            }
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0x96);
        }
        if (*(char *)(DAT_800152fc + 0x182) != '\0') {
          uVar11 = 0x97;
          uVar14 = DAT_80015ef8 | (int)DAT_80015ef8 >> 4;
          uVar9 = DAT_80015ef8 - 0xf9;
          do {
            if (0xfa < (int)uVar14) {
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar11 * 800 + 0xfa) * 2) - iVar5);
              uVar7 = uVar9 & 0xffff;
              puVar8 = (ushort *)(puVar4 + (uVar11 * iVar3 + 0xfa) * 2);
              do {
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                uVar7 = uVar7 - 1 & 0xffff;
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (uVar7 != 0);
            }
            uVar11 = uVar11 + 1 & 0xfffeffff;
          } while (uVar11 < 0xd4);
        }
        iVar15 = DAT_80015efc;
        if (*(char *)(DAT_800152fc + 0x192) != '\0') {
          uVar14 = 0x97;
          do {
            if (0x138 < iVar15) {
              sVar13 = 0x3d;
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 0x138) * 2) - iVar5);
              puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 0x138) * 2);
              do {
                sVar13 = sVar13 + -1;
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (sVar13 != 0);
            }
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0xd4);
        }
        if (*(char *)(DAT_800152fc + 0x1a2) != '\0') {
          uVar9 = 0x97;
          uVar11 = DAT_80015f00 | (int)DAT_80015f00 >> 7;
          uVar14 = DAT_80015f00 - 0x175;
          do {
            if (0x176 < (int)uVar11) {
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar9 * 800 + 0x176) * 2) - iVar5);
              uVar7 = uVar14 & 0xffff;
              puVar8 = (ushort *)(puVar4 + (uVar9 * iVar3 + 0x176) * 2);
              do {
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                uVar7 = uVar7 - 1 & 0xffff;
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (uVar7 != 0);
            }
            uVar9 = uVar9 + 1 & 0xfffeffff;
          } while (uVar9 < 0xd4);
        }
        iVar15 = DAT_80015f04;
        if (*(char *)(DAT_800152fc + 0x1b2) != '\0') {
          uVar14 = 0x97;
          do {
            if (0x1b4 < iVar15) {
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar14 * 800 + 0x1b4) * 2) - iVar5);
              puVar8 = (ushort *)(puVar4 + (uVar14 * iVar3 + 0x1b4) * 2);
              sVar13 = 0x3d;
              do {
                sVar13 = sVar13 + -1;
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (sVar13 != 0);
            }
            uVar14 = uVar14 + 1 & 0xfffeffff;
          } while (uVar14 < 0xd4);
        }
        iVar5 = Start_Of_Screen_Mem;
        iVar3 = Screen_Frame_Buffer;
        uVar14 = DAT_80015f08;
        uVar9 = DAT_80015f08 - 0xd8;
        iVar15 = DAT_80015f08 + 0x16;
        if (DAT_80015f08 <= uVar9) {
          return;
        }
        do {
          iVar10 = uVar9 * 800 + 0xe6;
          copy_short((void *)(iVar5 + iVar10 * 2),(void *)(iVar3 + iVar10 * 2),iVar15);
          uVar9 = uVar9 + 1;
        } while (uVar9 < uVar14);
        return;
      }
    } while (iVar3 == 0);
  } while( true );
}



// WARNING: Removing unreachable block (ram,0x8001285c)
// WARNING: Removing unreachable block (ram,0x80012878)
// WARNING: Removing unreachable block (ram,0x80012898)
// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x80012850)
// WARNING: Removing unreachable block (ram,0x80012854)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_trigger_menu(void)

{
  int iVar1;
  undefined *puVar2;
  int *piVar3;
  ushort uVar4;
  char *pcVar5;
  ushort *puVar6;
  int iVar7;
  short sVar8;
  undefined2 *puVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  int iVar14;
  int iVar15;
  
  uVar13 = DAT_80016394;
  set_frame_to_global_pointer();
  piVar3 = Global_Frame_Buffer_Pointer;
  iVar1 = DAT_8001639c;
  puVar2 = PTR_BITMAP_TRIGGER_MENU_80016398;
  uVar11 = 0;
  do {
    iVar15 = 0xac;
    puVar9 = (undefined2 *)((*piVar3 + uVar11 * 0x640) - iVar1);
    puVar6 = (ushort *)(puVar2 + uVar11 * 0x158);
    do {
      uVar12 = (uint)*puVar6;
      if (*puVar6 == 0) {
        uVar12 = uVar13;
      }
      iVar15 = iVar15 + -1;
      *puVar9 = (short)uVar12;
      iVar14 = DAT_800163a4;
      puVar9 = puVar9 + 1;
      puVar6 = puVar6 + 1;
    } while (iVar15 != 0);
    uVar11 = uVar11 + 1 & 0xfffeffff;
  } while (uVar11 < 0xba);
  if (*(char *)(DAT_800163a4 + 0x21) == '\0') {
    uVar12 = 0x39;
    uVar11 = DAT_800163a8 - 0x276;
    do {
      puVar6 = (ushort *)(*piVar3 + (uVar12 * 800 + 5) * 2 + 0x4da);
      uVar10 = uVar11 & 0xffff;
      do {
        if (*puVar6 == uVar13) {
          *puVar6 = 0x7e0;
        }
        else {
          *puVar6 = 0;
        }
        uVar10 = uVar10 - 1 & 0xffff;
        puVar6 = puVar6 + 1;
      } while (uVar10 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x61);
  }
  else {
    if (*(char *)(DAT_800163a4 + 0x21) == '\x01') {
      uVar12 = 0x39;
      uVar11 = DAT_800163ac - 0x296;
      do {
        puVar6 = (ushort *)(*piVar3 + (uVar12 * 800 + 5) * 2 + 0x51a);
        uVar10 = uVar11 & 0xffff;
        do {
          if (*puVar6 == uVar13) {
            *puVar6 = 0x7e0;
          }
          else {
            *puVar6 = 0;
          }
          uVar10 = uVar10 - 1 & 0xffff;
          puVar6 = puVar6 + 1;
        } while (uVar10 != 0);
        uVar12 = uVar12 + 1 & 0xfffeffff;
      } while (uVar12 < 0x61);
    }
    else {
      if (*(char *)(DAT_800163a4 + 0x21) == '\x02') {
        uVar12 = 0x39;
        uVar11 = DAT_800163b0 - 0x2b6;
        do {
          puVar6 = (ushort *)(*piVar3 + (uVar12 * 800 + 5) * 2 + 0x55a);
          uVar10 = uVar11 & 0xffff;
          do {
            if (*puVar6 == uVar13) {
              *puVar6 = 0x7e0;
            }
            else {
              *puVar6 = 0;
            }
            uVar10 = uVar10 - 1 & 0xffff;
            puVar6 = puVar6 + 1;
          } while (uVar10 != 0);
          uVar12 = uVar12 + 1 & 0xfffeffff;
        } while (uVar12 < 0x61);
      }
    }
  }
  if (*(char *)(iVar14 + 0x22) == '\0') {
    uVar12 = 0x7f;
    uVar11 = DAT_800163b4 - 0x271;
    do {
      puVar6 = (ushort *)(*piVar3 + (uVar12 * 800 + 5) * 2 + 0x4d0);
      uVar10 = uVar11 & 0xffff;
      do {
        if (*puVar6 == uVar13) {
          *puVar6 = 0x7e0;
        }
        else {
          *puVar6 = 0;
        }
        uVar10 = uVar10 - 1 & 0xffff;
        puVar6 = puVar6 + 1;
      } while (uVar10 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x96);
  }
  else {
    uVar11 = 0x7f;
    do {
      puVar6 = (ushort *)(*piVar3 + (uVar11 * 800 + 5) * 2 + 0x530);
      sVar8 = 0x2f;
      do {
        sVar8 = sVar8 + -1;
        if (*puVar6 == uVar13) {
          *puVar6 = 0x7e0;
        }
        else {
          *puVar6 = 0;
        }
        puVar6 = puVar6 + 1;
      } while (sVar8 != 0);
      uVar11 = uVar11 + 1 & 0xfffeffff;
    } while (uVar11 < 0x96);
  }
  if (*(char *)(iVar14 + 0x23) == '\0') {
    uVar12 = 0xbd;
    uVar11 = DAT_800163b8 - 0x274;
    do {
      puVar6 = (ushort *)(*piVar3 + (uVar12 * 800 + 5) * 2 + 0x4d6);
      uVar10 = uVar11 & 0xffff;
      do {
        if (*puVar6 == uVar13) {
          *puVar6 = 0x7e0;
        }
        else {
          *puVar6 = 0;
        }
        uVar10 = uVar10 - 1 & 0xffff;
        puVar6 = puVar6 + 1;
      } while (uVar10 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0xd4);
  }
  else {
    if (*(char *)(iVar14 + 0x23) == '\x01') {
      uVar12 = 0xbd;
      uVar11 = DAT_800163bc - 0x2a4;
      do {
        puVar6 = (ushort *)(*piVar3 + (uVar12 * 800 + 5) * 2 + 0x536);
        uVar10 = uVar11 & 0xffff;
        do {
          if (*puVar6 == uVar13) {
            *puVar6 = 0x7e0;
          }
          else {
            *puVar6 = 0;
          }
          uVar10 = uVar10 - 1 & 0xffff;
          puVar6 = puVar6 + 1;
        } while (uVar10 != 0);
        uVar12 = uVar12 + 1 & 0xfffeffff;
      } while (uVar12 < 0xd4);
    }
  }
  set_display_fg_color(DAT_800163c0);
  uVar4 = (ushort)DAT_800163c4;
  display_draw_rect(uVar4 - 0xab,0x2e,uVar4,0xe7);
  set_display_fg_color(0);
  display_draw_horz_line(0x6b,uVar4 - 0xa0,uVar4 - 0xb);
  display_draw_horz_line(0xa9,uVar4 - 0xa0,uVar4 - 0xb);
  copy_rect_to_screen(uVar4 - 0xab,0x2e,uVar4 + 1,0xe8);
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(0x23a,2,700,0x2c);
  set_font_paint_mode(2);
  select_font(PTR_FONT_4_800128dc);
  set_display_fg_color(0xff00);
  display_fill_rect(0x23a,5,600,0x28);
  set_display_fg_color(0);
  display_text(&DAT_800128e0,0x246,0xf);
  set_display_fg_color(0xffffff);
  select_font(PTR_FONT_2_800128e4);
  iVar1 = DAT_800128e8;
  if (*(char *)(DAT_800128e8 + 0x21) == '\0') {
    display_text(&DAT_800128fc,0x25e,7);
  }
  else {
    if (*(char *)(DAT_800128e8 + 0x21) == '\x01') {
      pcVar5 = s_Single_800128ec;
    }
    else {
      if (*(char *)(DAT_800128e8 + 0x21) != '\x02') goto LAB_80012754;
      pcVar5 = s_Normal_800128f4;
    }
    display_text(pcVar5,0x25e,7);
  }
LAB_80012754:
  uVar4 = (ushort)DAT_80012904;
  if (*(char *)(iVar1 + 0x23) == '\0') {
    set_display_fg_color(DAT_80012908);
    display_fill_rect(uVar4 - 0x1c,0x19,uVar4,0x28);
    set_display_fg_color(0);
    pcVar5 = &DAT_8001290c;
  }
  else {
    if (*(char *)(iVar1 + 0x23) != '\x01') goto LAB_800127e4;
    set_display_fg_color(DAT_80012910);
    display_fill_rect(uVar4 - 0x1c,0x19,uVar4,0x28);
    set_display_fg_color(0);
    pcVar5 = &DAT_80012914;
  }
  display_text(pcVar5,uVar4 - 0x18,0x1a);
LAB_800127e4:
  set_display_fg_color(0xffffff);
  display_draw_vert_line(0x282,0x1b,0x26);
  display_draw_horz_line(0x26,0x27f,0x282);
  display_draw_horz_line(0x1b,0x282,0x285);
  if (*(char *)(iVar1 + 0x22) == '\0') {
    display_draw_horz_line(0x20,0x281,0x283);
    uVar4 = 0x21;
  }
  else {
    display_draw_horz_line(0x21,0x281,0x283);
    uVar4 = 0x20;
  }
  display_draw_horz_line(uVar4,0x280,0x284);
  iVar15 = Start_Of_Screen_Mem;
  iVar1 = Screen_Frame_Buffer;
  iVar14 = DAT_8001291c + -0x239;
  uVar13 = 5;
  do {
    iVar7 = uVar13 * 800 + 0x23a;
    copy_short((void *)(iVar15 + iVar7 * 2),(void *)(iVar1 + iVar7 * 2),iVar14);
    uVar13 = uVar13 + 1;
  } while (uVar13 < 0x29);
  return;
}



void init_debe(ushort xsize,ushort ysize,uint address)

{
  int iVar1;
  int iVar2;
  undefined4 *puVar3;
  uint *puVar4;
  int iVar5;
  int iVar6;
  int *piVar7;
  
  iVar2 = Screen_Param_Struct;
  iVar1 = Global_Frame_Buffer_Pointer;
  iVar6 = DEBE_BASE;
  iVar5 = DEBE_BASE + -0x254000;
  piVar7 = (int *)(Screen_Param_Struct + 8);
  *(int *)(Global_Frame_Buffer_Pointer + 4) = Screen_Param_Struct;
  *piVar7 = iVar6;
  *(undefined4 *)(iVar2 + 0xc) = 0;
  *(int *)(iVar2 + 0x10) = iVar5;
  *(uint *)(iVar2 + 0x1c) = (uint)xsize;
  *(uint *)(iVar2 + 0x20) = (uint)ysize;
  *(undefined4 *)(iVar2 + 0x2c) = 0x10;
  *(undefined4 *)(iVar2 + 0x4c) = 0x14;
  *(undefined4 *)(iVar2 + 0x50) = 0x16;
  *(undefined4 *)(iVar2 + 0x58) = 10;
  *(undefined4 *)(iVar2 + 0x5c) = 0;
  *(undefined4 *)(iVar2 + 0x18) = 1;
  *(undefined4 *)(iVar2 + 0x54) = 0x17;
  *(undefined4 *)(iVar2 + 0x44) = 0xd2;
  *(undefined4 *)(iVar2 + 0x48) = 0x2e;
  *(undefined4 *)(iVar2 + 0x14) = 0;
  *(undefined4 *)(iVar2 + 0x60) = 0;
  *(undefined4 *)(iVar2 + 100) = 1;
  *(undefined4 *)(iVar2 + 0x68) = 0;
  *(undefined4 *)(iVar2 + 0x30) = 2;
  *(undefined4 *)(iVar2 + 0x34) = 0;
  *(uint *)(iVar2 + 0x38) = address;
  iVar6 = 0x800;
  *(undefined4 *)(iVar2 + 0x3c) = 0;
  do {
    *(undefined4 *)(DEBE_BASE + iVar6) = 0;
    iVar6 = iVar6 + 4;
  } while (iVar6 < 0x1000);
  puVar3 = *(undefined4 **)(iVar2 + 0x10);
  *puVar3 = 0;
  puVar3[1] = 0;
  puVar3[0x11] = puVar3[0x11] & 0xfffffff;
  puVar3[0x23] = 0xffffffff;
  puVar3[0x3d] = 0xffffffff;
  debe_enable(*(uint *)(iVar1 + 4));
  init_video_clock(*(uint *)(iVar1 + 4));
  puVar4 = *(uint **)(*(int *)(iVar1 + 4) + 0x10);
  *puVar4 = *puVar4 | 0x80000000;
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_800164e4(int param_1)

{
  uint uVar1;
  undefined4 uVar2;
  undefined4 *puVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  int iVar7;
  int iVar8;
  undefined4 uVar9;
  int iVar10;
  undefined4 uVar11;
  int iVar12;
  undefined4 uVar13;
  int iVar14;
  undefined4 *puVar15;
  undefined8 uVar16;
  int local_48;
  
  iVar8 = DAT_80016794;
  uVar1 = 0x200;
  iVar7 = 0;
  iVar10 = 0;
  while( true ) {
    iVar10 = iVar10 + 1;
    iVar7 = iVar7 + uVar1;
    if (iVar8 <= iVar10) break;
    if (iVar10 < iVar7) {
      puVar3 = (undefined4 *)(param_1 + iVar10 * 8);
      puVar15 = (undefined4 *)(param_1 + iVar7 * 8);
      uVar11 = puVar3[1];
      uVar2 = *puVar15;
      uVar13 = puVar15[1];
      *puVar15 = *puVar3;
      puVar15[1] = uVar11;
      *puVar3 = uVar2;
      puVar3[1] = uVar13;
    }
    uVar1 = 0x200;
    if (0x1ff < iVar7) {
      do {
        iVar7 = iVar7 - uVar1;
        uVar1 = uVar1 / 2;
      } while ((int)uVar1 <= iVar7);
    }
  }
  uVar1 = 0x400;
  iVar8 = 1;
  while (uVar1 = uVar1 / 2, uVar1 != 1) {
    iVar8 = iVar8 + 1;
  }
  local_48 = 1;
  if (iVar8 < 1) {
    return;
  }
  while( true ) {
    iVar10 = 2 << (local_48 - 1U & 0xff);
    iVar7 = iVar10 / 2;
    uVar11 = 0;
    uVar13 = 0x3f800000;
    uVar16 = FUN_8003979c();
    uVar16 = FUN_800393ec(DAT_80016798,DAT_8001679c,(int)uVar16,(int)((ulonglong)uVar16 >> 0x20));
    FUN_80032250();
    uVar2 = FUN_80039200();
    FUN_80036000((int)uVar16,(int)((ulonglong)uVar16 >> 0x20));
    uVar1 = FUN_80039200();
    if (-1 < iVar7 + -1) break;
LAB_80016770:
    local_48 = local_48 + 1;
    if (iVar8 < local_48) {
      return;
    }
  }
  iVar12 = 0;
  iVar14 = 0;
  do {
    do {
      puVar3 = (undefined4 *)(param_1 + (iVar7 + iVar12) * 8);
      uVar9 = puVar3[1];
      uVar4 = *puVar3;
      uVar5 = FUN_8003a44c(uVar9,uVar11);
      uVar6 = FUN_8003a44c(uVar4,uVar13);
      uVar5 = FUN_8003a678(uVar6,uVar5);
      uVar6 = FUN_8003a44c(uVar9,uVar13);
      uVar4 = FUN_8003a44c(uVar4,uVar11);
      uVar4 = FUN_80039fd8(uVar4,uVar6);
      puVar15 = (undefined4 *)(param_1 + iVar12 * 8);
      uVar6 = FUN_8003a678(*puVar15,uVar5);
      *puVar3 = uVar6;
      uVar6 = FUN_8003a678(puVar15[1],uVar4);
      puVar3[1] = uVar6;
      uVar5 = FUN_80039fd8(*puVar15,uVar5);
      *puVar15 = uVar5;
      uVar4 = FUN_80039fd8(puVar15[1],uVar4);
      puVar15[1] = uVar4;
      iVar12 = iVar12 + iVar10;
      uVar4 = uVar13;
    } while (iVar12 < 0x400);
    do {
      uVar13 = FUN_8003a44c(uVar11,uVar1 ^ 0x80000000);
      uVar5 = FUN_8003a44c(uVar4,uVar2);
      uVar13 = FUN_8003a678(uVar5,uVar13);
      uVar11 = FUN_8003a44c(uVar11,uVar2);
      uVar4 = FUN_8003a44c(uVar4,uVar1 ^ 0x80000000);
      uVar11 = FUN_80039fd8(uVar4,uVar11);
      iVar12 = iVar14 + 1;
      if (iVar7 + -1 < iVar12) goto LAB_80016770;
      uVar4 = uVar13;
      iVar14 = iVar12;
    } while (0x3ff < iVar12);
  } while( true );
}



// WARNING: Removing unreachable block (ram,0x80017684)
// WARNING: Removing unreachable block (ram,0x80017688)
// WARNING: Removing unreachable block (ram,0x8001768c)
// WARNING: Removing unreachable block (ram,0x80017690)
// WARNING: Removing unreachable block (ram,0x80017694)
// WARNING: Removing unreachable block (ram,0x80017698)
// WARNING: Removing unreachable block (ram,0x8001769c)
// WARNING: Removing unreachable block (ram,0x800176a0)
// WARNING: Removing unreachable block (ram,0x800176a4)

void fpga_bus_dir_in(void)

{
  uint *port;
  
  port = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,0);
  gpio_config_pin(port,1,0);
  gpio_config_pin(port,2,0);
  gpio_config_pin(port,3,0);
  gpio_config_pin(port,4,0);
  gpio_config_pin(port,5,0);
  gpio_config_pin(port,6,0);
  *port = *port & 0xfffffff;
  *port = *port & 0xefffffff;
  return;
}



uchar fpga_read_data(void)

{
  uint *ptr;
  
  fpga_bus_dir_in();
  ptr = PE_CFG0;
  set_gpio_pin_low(PE_CFG0,9);
  set_gpio_pin_low(ptr,10);
  set_gpio_pin_low(ptr,8);
  set_gpio_pin_high(ptr,8);
  return (uchar)ptr[4];
}



// WARNING: Removing unreachable block (ram,0x80017684)
// WARNING: Removing unreachable block (ram,0x80017688)
// WARNING: Removing unreachable block (ram,0x8001768c)
// WARNING: Removing unreachable block (ram,0x80017690)
// WARNING: Removing unreachable block (ram,0x80017694)
// WARNING: Removing unreachable block (ram,0x80017698)
// WARNING: Removing unreachable block (ram,0x8001769c)
// WARNING: Removing unreachable block (ram,0x800176a0)
// WARNING: Removing unreachable block (ram,0x800176a4)

void fpga_init(void)

{
  uint *puVar1;
  
  puVar1 = PE_CFG0;
  gpio_config_pin(PE_CFG0,9,1);
  gpio_config_pin(puVar1,10,1);
  gpio_config_pin(puVar1,8,1);
  set_gpio_pin_high(puVar1,8);
  puVar1 = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,0);
  gpio_config_pin(puVar1,1,0);
  gpio_config_pin(puVar1,2,0);
  gpio_config_pin(puVar1,3,0);
  gpio_config_pin(puVar1,4,0);
  gpio_config_pin(puVar1,5,0);
  gpio_config_pin(puVar1,6,0);
  *puVar1 = *puVar1 & 0xfffffff;
  *puVar1 = *puVar1 & 0xefffffff;
  return;
}



void fpga_write_data(uchar data)

{
  uint *ptr;
  
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = (uint)data | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void fpga_write_cmd(uchar cmd)

{
  uint *ptr;
  
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_high(ptr,10);
  ptr[4] = (uint)cmd | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void check_config_ok_refresh_it_on_fail(void)

{
  undefined2 uVar1;
  int iVar2;
  uint uVar3;
  uint *puVar4;
  undefined *puVar5;
  int iVar6;
  undefined2 *puVar7;
  uint *puVar8;
  uint *puVar9;
  int iVar10;
  undefined *puVar11;
  
  uVar3 = DAT_80016b5c;
  iVar2 = DAT_80016b58;
  if (*(ushort *)(DAT_80016b58 + 0x44) == DAT_80016b5c) {
    return;
  }
  reset_config_data();
  *(short *)(iVar2 + 0x44) = (short)uVar3;
  *(undefined *)(iVar2 + 0x21) = 0;
  set_fpga_trigger_mode();
  save_config_data(DAT_80016b60);
  uVar3 = FLASH_CONFIG_DATA;
  write_to_flash(FLASH_CONFIG_DATA,(uchar *)DAT_80016b60,500);
  read_from_flash(uVar3,DAT_80016b60,500);
  puVar7 = DAT_80027a1c;
  iVar6 = DAT_80027a18;
  iVar2 = DAT_80027a14;
  puVar5 = DAT_80027a10;
  puVar4 = DAT_80016b60;
  puVar8 = DAT_80016b60 + 0x40;
  *DAT_80027a10 = *(undefined *)DAT_80016b60;
  puVar9 = puVar4 + 0x53;
  puVar11 = (undefined *)(iVar6 + -1);
  iVar10 = 0xc;
  puVar5[3] = *(undefined *)((int)puVar4 + 2);
  puVar5[4] = *(undefined *)(puVar4 + 1);
  puVar5[1] = *(undefined *)((int)puVar4 + 6);
  puVar5[2] = *(undefined *)(puVar4 + 2);
  puVar5[0xc] = *(undefined *)((int)puVar4 + 10);
  puVar5[0xf] = *(undefined *)(puVar4 + 3);
  puVar5[0x10] = *(undefined *)((int)puVar4 + 0xe);
  puVar5[0xd] = *(undefined *)(puVar4 + 4);
  puVar5[0xe] = *(undefined *)((int)puVar4 + 0x12);
  puVar5[10] = *(undefined *)(puVar4 + 5);
  puVar5[0x16] = *(undefined *)((int)puVar4 + 0x16);
  puVar5[0x21] = *(undefined *)(puVar4 + 6);
  puVar5[0x22] = *(undefined *)((int)puVar4 + 0x1a);
  puVar5[0x23] = *(undefined *)(puVar4 + 7);
  puVar5[0x42] = *(undefined *)((int)puVar4 + 0x1e);
  *(undefined2 *)(puVar5 + 0x24) = *(undefined2 *)(puVar4 + 0x14);
  *(undefined2 *)(puVar5 + 0x26) = *(undefined2 *)((int)puVar4 + 0x52);
  *(undefined2 *)(puVar5 + 6) = *(undefined2 *)(puVar4 + 0x15);
  *(undefined2 *)(puVar5 + 0x12) = *(undefined2 *)((int)puVar4 + 0x56);
  *(undefined *)(iVar2 + 2) = *(undefined *)(puVar4 + 0x1e);
  *(undefined *)(iVar2 + 3) = *(undefined *)((int)puVar4 + 0x7a);
  *(undefined *)(iVar2 + 4) = *(undefined *)(puVar4 + 0x1f);
  *(undefined *)(iVar2 + 7) = *(undefined *)((int)puVar4 + 0x7e);
  *(undefined *)(iVar6 + 0x100) = *(undefined *)(puVar4 + 0x28);
  *(undefined *)(iVar6 + 0x112) = *(undefined *)((int)puVar4 + 0xa2);
  *(undefined *)(iVar6 + 0x122) = *(undefined *)(puVar4 + 0x29);
  *(undefined *)(iVar6 + 0x132) = *(undefined *)((int)puVar4 + 0xa6);
  *(undefined *)(iVar6 + 0x142) = *(undefined *)(puVar4 + 0x2a);
  *(undefined *)(iVar6 + 0x152) = *(undefined *)((int)puVar4 + 0xaa);
  *(undefined *)(iVar6 + 0x162) = *(undefined *)(puVar4 + 0x2b);
  *(undefined *)(iVar6 + 0x172) = *(undefined *)((int)puVar4 + 0xae);
  *(undefined *)(iVar6 + 0x182) = *(undefined *)(puVar4 + 0x2c);
  *(undefined *)(iVar6 + 0x192) = *(undefined *)((int)puVar4 + 0xb2);
  *(undefined *)(iVar6 + 0x1a2) = *(undefined *)(puVar4 + 0x2d);
  *(undefined *)(iVar6 + 0x1b2) = *(undefined *)((int)puVar4 + 0xb6);
  *(undefined *)(iVar6 + 0x1c2) = *(undefined *)(puVar4 + 0x2e);
  *(undefined *)(iVar6 + 0x1d2) = *(undefined *)((int)puVar4 + 0xba);
  *(undefined *)(iVar6 + 0x1e2) = *(undefined *)(puVar4 + 0x2f);
  *(undefined *)(iVar6 + 0x1f2) = *(undefined *)((int)puVar4 + 0xbe);
  *(undefined *)(iVar6 + 0x202) = *(undefined *)(puVar4 + 0x30);
  *(undefined *)(iVar6 + 0x212) = *(undefined *)((int)puVar4 + 0xc2);
  *(undefined *)(iVar6 + 0x232) = *(undefined *)(puVar4 + 0x31);
  *(undefined *)(iVar6 + 0x242) = *(undefined *)((int)puVar4 + 0xc6);
  *(undefined *)(iVar6 + 0x252) = *(undefined *)(puVar4 + 0x32);
  *(undefined *)(iVar6 + 0x262) = *(undefined *)((int)puVar4 + 0xca);
  *(undefined *)(iVar6 + 0x272) = *(undefined *)(puVar4 + 0x33);
  *(undefined *)(iVar6 + 0x282) = *(undefined *)((int)puVar4 + 0xce);
  *puVar7 = *(undefined2 *)(puVar4 + 0x3c);
  puVar7[1] = *(undefined2 *)((int)puVar4 + 0xf2);
  puVar7[2] = *(undefined2 *)(puVar4 + 0x3d);
  puVar7[3] = *(undefined2 *)((int)puVar4 + 0xf6);
  puVar7[4] = *(undefined2 *)(puVar4 + 0x3e);
  puVar7[5] = *(undefined2 *)((int)puVar4 + 0xfa);
  puVar7[6] = *(undefined2 *)(puVar4 + 0x3f);
  puVar7[7] = *(undefined2 *)((int)puVar4 + 0xfe);
  puVar7[8] = *(undefined2 *)puVar8;
  puVar7[9] = *(undefined2 *)((int)puVar4 + 0x102);
  puVar7[10] = *(undefined2 *)(puVar4 + 0x41);
  puVar7[0xb] = *(undefined2 *)((int)puVar4 + 0x106);
  puVar7[0xc] = *(undefined2 *)(puVar4 + 0x42);
  puVar7[0xd] = *(undefined2 *)((int)puVar4 + 0x10a);
  puVar7[0xe] = *(undefined2 *)(puVar4 + 0x43);
  puVar7[0xf] = *(undefined2 *)((int)puVar4 + 0x10e);
  puVar7[0x10] = *(undefined2 *)(puVar4 + 0x44);
  puVar7[0x11] = *(undefined2 *)((int)puVar4 + 0x112);
  *(undefined *)(puVar7 + 0x12) = *(undefined *)(puVar4 + 0x45);
  *(undefined *)((int)puVar7 + 0x25) = *(undefined *)((int)puVar4 + 0x116);
  *(undefined *)(puVar7 + 0x13) = *(undefined *)(puVar4 + 0x46);
  *(undefined *)((int)puVar7 + 0x27) = *(undefined *)((int)puVar4 + 0x11a);
  *(undefined *)(puVar7 + 0x14) = *(undefined *)(puVar4 + 0x47);
  *(undefined *)((int)puVar7 + 0x29) = *(undefined *)((int)puVar4 + 0x11e);
  puVar7[0x15] = *(undefined2 *)(puVar4 + 0x48);
  puVar7[0x16] = *(undefined2 *)((int)puVar4 + 0x122);
  puVar7[0x17] = *(undefined2 *)(puVar4 + 0x49);
  puVar7[0x18] = *(undefined2 *)((int)puVar4 + 0x126);
  puVar7[0x19] = *(undefined2 *)(puVar4 + 0x4a);
  puVar7[0x1a] = *(undefined2 *)((int)puVar4 + 0x12a);
  *(undefined *)(puVar7 + 0x1b) = *(undefined *)(puVar4 + 0x4b);
  *(undefined *)((int)puVar7 + 0x37) = *(undefined *)((int)puVar4 + 0x12e);
  *(undefined *)(puVar7 + 0x1c) = *(undefined *)(puVar4 + 0x4c);
  *(undefined *)((int)puVar7 + 0x39) = *(undefined *)((int)puVar4 + 0x132);
  *(undefined *)(puVar7 + 0x1d) = *(undefined *)(puVar4 + 0x4d);
  *(undefined *)((int)puVar7 + 0x3b) = *(undefined *)((int)puVar4 + 0x136);
  puVar7[0x1e] = *(undefined2 *)(puVar4 + 0x4e);
  puVar7[0x1f] = *(undefined2 *)((int)puVar4 + 0x13a);
  puVar7[0x20] = *(undefined2 *)(puVar4 + 0x4f);
  puVar7[0x21] = *(undefined2 *)((int)puVar4 + 0x13e);
  puVar7[0x22] = *(undefined2 *)(puVar4 + 0x50);
  uVar1 = *(undefined2 *)((int)puVar4 + 0x142);
  puVar7[0x23] = uVar1;
  *(char *)(iVar6 + 0x292) = (char)uVar1;
  *(undefined2 *)(iVar6 + 0x294) = *(undefined2 *)(puVar4 + 0x51);
  *(undefined2 *)(iVar6 + 0x296) = *(undefined2 *)((int)puVar4 + 0x146);
  *(undefined *)(iVar6 + 0x29a) = *(undefined *)(puVar4 + 0x52);
  *(undefined2 *)(iVar6 + 0x29c) = *(undefined2 *)((int)puVar4 + 0x14a);
  *(undefined2 *)(iVar6 + 0x29e) = *(undefined2 *)(puVar4 + 0x53);
  do {
    iVar10 = iVar10 + -1;
    puVar11[1] = *(undefined *)((int)puVar9 + 2);
    puVar9 = puVar9 + 1;
    puVar11 = puVar11 + 2;
    *puVar11 = *(undefined *)puVar9;
  } while (iVar10 != 0);
  *(undefined2 *)(puVar5 + 0x44) = *(undefined2 *)(puVar4 + 100);
  return;
}



void save_screen_under_main_menu(void)

{
  uint uVar1;
  uint uVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  undefined2 *puVar11;
  uint uVar12;
  int iVar13;
  undefined2 *puVar14;
  
  iVar6 = Screen_Frame_Buffer_2;
  iVar5 = Start_Of_Screen_Mem;
  uVar8 = (uint)*(ushort *)(PTR_DAT_80016b88 + 2);
  uVar7 = (uint)*(ushort *)PTR_DAT_80016b88;
  uVar10 = uVar8 + 0xeb & 0xfffeffff;
  uVar9 = uVar7 + 0x96 & 0xfffeffff;
  if (uVar8 < uVar10) {
    uVar12 = uVar9 - uVar7;
    uVar1 = uVar12 * 0x8000 >> 0x10;
    do {
      if (uVar7 < uVar9) {
        iVar13 = uVar7 + uVar8 * 800;
        puVar11 = (undefined2 *)(iVar5 + iVar13 * 2);
        puVar14 = (undefined2 *)(iVar6 + iVar13 * 2);
        uVar2 = uVar1;
        puVar3 = puVar14 + -1;
        puVar4 = puVar11 + -1;
        if ((uVar12 & 1) != 0) {
          *puVar14 = *puVar11;
          puVar3 = puVar14;
          puVar4 = puVar11;
        }
        while (uVar2 != 0) {
          puVar3[1] = puVar4[1];
          puVar3[2] = puVar4[2];
          uVar2 = uVar2 - 1 & 0xffff;
          puVar3 = puVar3 + 2;
          puVar4 = puVar4 + 2;
        }
      }
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < uVar10);
    return;
  }
  return;
}



void FUN_80016b8c(void)

{
  uint uVar1;
  uint uVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  undefined2 *puVar11;
  uint uVar12;
  int iVar13;
  undefined2 *puVar14;
  
  iVar6 = Start_Of_Screen_Mem;
  iVar5 = Screen_Frame_Buffer_2;
  uVar8 = (uint)*(ushort *)(PTR_DAT_80016bac + 2);
  uVar7 = (uint)*(ushort *)PTR_DAT_80016bac;
  uVar10 = uVar8 + 0xeb & 0xfffeffff;
  uVar9 = uVar7 + 0x96 & 0xfffeffff;
  if (uVar8 < uVar10) {
    uVar12 = uVar9 - uVar7;
    uVar1 = uVar12 * 0x8000 >> 0x10;
    do {
      if (uVar7 < uVar9) {
        iVar13 = uVar7 + uVar8 * 800;
        puVar11 = (undefined2 *)(iVar5 + iVar13 * 2);
        puVar14 = (undefined2 *)(iVar6 + iVar13 * 2);
        uVar2 = uVar1;
        puVar3 = puVar14 + -1;
        puVar4 = puVar11 + -1;
        if ((uVar12 & 1) != 0) {
          *puVar14 = *puVar11;
          puVar3 = puVar14;
          puVar4 = puVar11;
        }
        while (uVar2 != 0) {
          puVar3[1] = puVar4[1];
          puVar3[2] = puVar4[2];
          uVar2 = uVar2 - 1 & 0xffff;
          puVar3 = puVar3 + 2;
          puVar4 = puVar4 + 2;
        }
      }
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < uVar10);
    return;
  }
  return;
}



void FUN_80016bb0(int param_1)

{
  byte bVar1;
  int iVar2;
  
  if (param_1 == 10) {
    save_context();
    bVar1 = get_font_height();
    iVar2 = *DAT_80018a70;
    *(ushort *)(iVar2 + 0x24) = (ushort)bVar1 + *(short *)(iVar2 + 0x24);
    *(undefined2 *)(iVar2 + 0x22) = *(undefined2 *)(iVar2 + 0x20);
  }
  else {
    if (param_1 == 0xd) {
      return;
    }
    save_context();
    (***(code ***)(*DAT_80016c18 + 0x1c))(param_1);
    if (*DAT_80016c1c != (code *)0x0) {
                    // WARNING: Could not recover jumptable at 0x80016bfc. Too many branches
                    // WARNING: Treating indirect jump as call
      (**DAT_80016c1c)(param_1);
      return;
    }
  }
  iVar2 = *(int *)(DAT_80019a84 + 0xc) + -1;
  *(int *)(DAT_80019a84 + 0xc) = iVar2;
  if (iVar2 != 0) {
    return;
  }
  return;
}



undefined8
FUN_80016c20(int param_1,int param_2,undefined4 param_3,undefined4 param_4,int param_5,int param_6)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar3 = param_5 + 0x168;
  param_6 = param_6 + 0x168;
  while (iVar1 = param_1, iVar2 = param_2, 0x167 < iVar3) {
    iVar3 = iVar3 + -0x168;
    param_6 = param_6 + -0x168;
  }
  while (0 < param_6) {
    if (iVar3 < 0x5a) {
      if (iVar3 < 0) {
        iVar3 = 0;
      }
      iVar2 = param_6;
      if (0x59 < param_6) {
        iVar2 = 0x5a;
      }
      iVar1 = iVar3;
      param_5 = FUN_8002d3d0(param_1,param_2,param_3,param_4,iVar3,iVar2,1,0xffffffff);
    }
    iVar4 = param_6 + -0x5a;
    iVar3 = iVar3 + -0x5a;
    if (iVar4 < 1) break;
    if (iVar3 < 0x5a) {
      if (iVar3 < 0) {
        iVar3 = 0;
      }
      if (iVar4 < 0x5a) {
        param_5 = iVar4;
      }
      if (param_6 + -0xb4 < 0 == SBORROW4(iVar4,0x5a)) {
        param_5 = 0x5a;
      }
      iVar2 = 0x5a - iVar3;
      iVar1 = 0x5a - param_5;
      param_5 = FUN_8002d3d0(param_1,param_2,param_3,param_4,iVar1,iVar2,0xffffffff,0xffffffff);
    }
    iVar4 = param_6 + -0xb4;
    iVar3 = iVar3 + -0x5a;
    if (iVar4 < 1) break;
    if (iVar3 < 0x5a) {
      if (iVar3 < 0) {
        iVar3 = 0;
      }
      iVar2 = param_5;
      if (iVar4 < 0x5a) {
        iVar2 = iVar4;
      }
      if (param_6 + -0x10e < 0 == SBORROW4(iVar4,0x5a)) {
        iVar2 = 0x5a;
      }
      iVar1 = iVar3;
      param_5 = FUN_8002d3d0(param_1,param_2,param_3,param_4,iVar3,iVar2,0xffffffff,1);
    }
    iVar4 = param_6 + -0x10e;
    iVar3 = iVar3 + -0x5a;
    if (iVar4 < 1) break;
    if (iVar3 < 0x5a) {
      if (iVar3 < 0) {
        iVar3 = 0;
      }
      if (iVar4 < 0x5a) {
        param_5 = iVar4;
      }
      if (param_6 + -0x168 < 0 == SBORROW4(iVar4,0x5a)) {
        param_5 = 0x5a;
      }
      iVar2 = 0x5a - iVar3;
      iVar1 = 0x5a - param_5;
      param_5 = FUN_8002d3d0(param_1,param_2,param_3,param_4,iVar1,iVar2,1,1);
    }
    iVar3 = iVar3 + -0x5a;
    param_6 = param_6 + -0x168;
  }
  return CONCAT44(iVar2,iVar1);
}



void FUN_80016da0(void)

{
  FUN_800170c4();
  return;
}



void FUN_80016dc0(int param_1,int param_2,int param_3,int param_4,uint *param_5)

{
  bool bVar1;
  int *piVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  code *pcVar6;
  int iVar7;
  uint uVar8;
  uint divisor;
  uint uVar9;
  uint uVar10;
  int iVar11;
  int local_28;
  
  uVar9 = param_4 - param_2;
  uVar10 = *param_5;
  uVar8 = param_3 - param_1;
  if ((uVar8 | uVar9) == 0) {
    FUN_8001721c(param_1);
  }
  else {
    iVar3 = FUN_8000134c(uVar8);
    iVar4 = FUN_8000134c(uVar9);
    piVar2 = DAT_800170c0;
    bVar1 = iVar3 < iVar4;
    iVar3 = param_1;
    divisor = uVar8;
    iVar4 = param_3;
    local_28 = param_4;
    if (bVar1) {
      iVar3 = param_2;
      divisor = uVar9;
      uVar9 = uVar8;
      param_2 = param_1;
      iVar4 = param_4;
      local_28 = param_3;
    }
    uVar8 = divisor;
    if ((int)divisor < 1) {
      uVar8 = -divisor;
    }
    if (uVar8 == divisor) {
      iVar11 = 1;
      iVar7 = iVar3;
      local_28 = param_2;
      iVar3 = iVar4;
    }
    else {
      divisor = -divisor;
      uVar9 = -uVar9;
      iVar11 = -1;
      iVar7 = iVar4;
    }
    if (uVar9 != 0) {
      uVar10 = (int)divisor / 2;
    }
    if ((int)uVar9 < 0) {
      uVar10 = -uVar10;
    }
    if (uVar9 == 0) {
      iVar4 = *DAT_800170c0;
      if (bVar1) {
        if (*(char *)(iVar4 + 0x1a) == '\0') {
          FUN_8001cc4c(local_28,iVar7,iVar3);
          return;
        }
        iVar3 = 0;
        while (iVar3 <= (int)divisor) {
          iVar4 = FUN_800301f0(uVar10);
          if (iVar4 == 0) {
            (**(code **)(*(int *)(*piVar2 + 100) + 4))(local_28,iVar7 + iVar3);
          }
          iVar3 = iVar3 + 1;
          uVar10 = uVar10 + 1;
        }
      }
      else {
        if (*(char *)(iVar4 + 0x1a) == '\0') {
                    // WARNING: Could not recover jumptable at 0x80016f78. Too many branches
                    // WARNING: Treating indirect jump as call
          (***(code ***)(iVar4 + 100))(iVar7,local_28,iVar3);
          return;
        }
        iVar3 = 0;
        while (iVar3 <= (int)divisor) {
          iVar4 = FUN_800301f0(uVar10);
          if (iVar4 == 0) {
            (**(code **)(*(int *)(*piVar2 + 100) + 4))(iVar7 + iVar3,local_28);
          }
          iVar3 = iVar3 + 1;
          uVar10 = uVar10 + 1;
        }
      }
      uVar10 = uVar10 - 1;
    }
    else {
      uVar8 = (uint)*(byte *)(*DAT_800170c0 + 0x1a);
      if (uVar8 == 0) {
        iVar3 = 0;
        while (iVar3 <= (int)divisor) {
          iVar4 = divide_2(uVar9 * iVar3 + uVar10,divisor);
          iVar4 = iVar4 + local_28;
          if (bVar1) {
            pcVar6 = *(code **)(*(int *)(*DAT_800170c0 + 100) + 4);
            iVar11 = iVar4;
            iVar4 = iVar7 + iVar3;
          }
          else {
            iVar11 = iVar7 + iVar3;
            pcVar6 = *(code **)(*(int *)(*DAT_800170c0 + 100) + 4);
          }
          (*pcVar6)(iVar11,iVar4);
          iVar3 = iVar3 + 1;
        }
        return;
      }
      if (iVar11 < 0) {
        uVar8 = *param_5;
      }
      iVar3 = 0;
      if (iVar11 < 0) {
        *param_5 = uVar8 + divisor;
      }
      while (iVar3 <= (int)divisor) {
        iVar4 = divide_2(uVar9 * iVar3 + uVar10,divisor);
        iVar4 = iVar4 + local_28;
        *param_5 = *param_5 + iVar11;
        iVar5 = FUN_800301f0();
        if (iVar5 == 0) {
          if (bVar1) {
            pcVar6 = *(code **)(*(int *)(*DAT_800170c0 + 100) + 4);
            iVar5 = iVar4;
            iVar4 = iVar7 + iVar3;
          }
          else {
            pcVar6 = *(code **)(*(int *)(*DAT_800170c0 + 100) + 4);
            iVar5 = iVar7 + iVar3;
          }
          (*pcVar6)(iVar5,iVar4);
        }
        iVar3 = iVar3 + 1;
      }
      uVar10 = *param_5;
      if (iVar11 < 0) {
        uVar10 = uVar10 + divisor;
        *param_5 = uVar10;
      }
      uVar10 = uVar10 - iVar11;
    }
    *param_5 = uVar10;
  }
  return;
}



undefined8 FUN_800170c4(int param_1,int param_2,int param_3,int param_4,undefined4 param_5)

{
  short sVar1;
  short sVar2;
  short sVar3;
  short sVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  bool bVar10;
  undefined local_30;
  undefined uStack47;
  short sStack46;
  short local_2c;
  short local_2a;
  int local_28;
  int local_24;
  
  local_2c = (short)param_2;
  sVar5 = local_2c;
  local_2a = (short)((uint)param_2 >> 0x10);
  local_30 = (undefined)param_1;
  uStack47 = (undefined)((uint)param_1 >> 8);
  sStack46 = (short)((uint)param_1 >> 0x10);
  local_28 = param_3;
  local_24 = param_4;
  if (*(byte *)(*DAT_80017218 + 0x18) == 1) {
    local_30 = (undefined)param_5;
    uStack47 = (undefined)((uint)param_5 >> 8);
    sStack46 = (short)((uint)param_5 >> 0x10);
    FUN_80016dc0(param_1,param_2,param_3);
  }
  else {
    if ((param_1 - param_3 | param_2 - param_4) != 0) {
      iVar9 = *(byte *)(*DAT_80017218 + 0x18) - 1;
      iVar6 = FUN_80031c7c();
      iVar7 = FUN_8001a34c(iVar6 + 0x800);
      iVar7 = iVar7 * iVar9;
      iVar6 = FUN_8001a34c(iVar6 + 0x400);
      bVar10 = iVar7 < 0;
      iVar9 = iVar9 * iVar6;
      if (bVar10) {
        iVar7 = -iVar7;
      }
      iVar7 = iVar7 + 0x200 >> 10;
      if (bVar10) {
        iVar7 = -iVar7;
      }
      bVar10 = iVar9 < 0;
      if (bVar10) {
        iVar9 = -iVar9;
      }
      iVar9 = iVar9 + 0x200 >> 10;
      if (bVar10) {
        iVar9 = -iVar9;
      }
      if (iVar7 < 1) {
        iVar6 = iVar7 - (iVar7 >> 0x1f);
        iVar7 = iVar7 + -1;
      }
      else {
        iVar6 = (iVar7 + 1) - (iVar7 + 1 >> 0x1f);
      }
      if (iVar9 < 1) {
        iVar8 = iVar9 - (iVar9 >> 0x1f);
      }
      else {
        iVar8 = (iVar9 + 1) - (iVar9 + 1 >> 0x1f);
      }
      sVar2 = (short)(iVar6 >> 1);
      sVar1 = (short)param_1 + sVar2;
      local_30 = (undefined)sVar1;
      uStack47 = (undefined)((ushort)sVar1 >> 8);
      sVar1 = (short)(iVar8 >> 1);
      sStack46 = sVar5 + sVar1;
      sVar3 = (short)(iVar7 / 2);
      local_2c = (short)param_1 - sVar3;
      if (iVar9 < 1) {
        iVar9 = iVar9 + -1;
      }
      sVar4 = (short)(iVar9 / 2);
      local_2a = sVar5 - sVar4;
      local_28 = CONCAT22((short)param_4 - sVar4,(short)param_3 - sVar3);
      local_24 = CONCAT22((short)param_4 + sVar1,(short)param_3 + sVar2);
      FUN_80017384(&local_30,4,0);
      FUN_8002ea58(param_1,param_2);
      FUN_8002ea58(param_3,param_4);
    }
  }
  return CONCAT26(local_2a,CONCAT24(local_2c,CONCAT22(sStack46,CONCAT11(uStack47,local_30))));
}



void FUN_8001721c(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  
  uVar4 = (uint)*(byte *)(*DAT_8001724c + 0x18);
  if (uVar4 != 1) {
    iVar5 = (int)(uVar4 - 1) / 2;
    iVar2 = divide_2(iVar5 * DAT_8001737c,1000);
    iVar3 = iVar5 * iVar5;
    iVar1 = iVar5 / 2;
    (***(code ***)(*DAT_80017380 + 100))(param_1 - iVar5,param_2,param_1 + iVar5);
    iVar6 = 1;
    while (iVar6 <= iVar2 + 1) {
      if (iVar3 + iVar1 < iVar5 * iVar5 + iVar6 * iVar6) {
        if (iVar2 + 1 < iVar5) {
          (***(code ***)(*DAT_80017380 + 100))
                    ((param_1 - iVar6) + 1,param_2 + iVar5,param_1 + iVar6 + -1);
          (***(code ***)(*DAT_80017380 + 100))
                    ((param_1 - iVar6) + 1,param_2 - iVar5,param_1 + iVar6 + -1);
        }
        iVar5 = iVar5 + -1;
      }
      (***(code ***)(*DAT_80017380 + 100))(param_1 - iVar5,param_2 + iVar6,param_1 + iVar5);
      (***(code ***)(*DAT_80017380 + 100))(param_1 - iVar5,param_2 - iVar6,param_1 + iVar5);
      iVar6 = iVar6 + 1;
    }
    return;
  }
                    // WARNING: Could not recover jumptable at 0x80017248. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(int *)(*DAT_8001724c + 100) + 4))();
  return;
}



void FUN_80017384(int param_1,int param_2,int param_3,int param_4)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  short *psVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int unaff_r10;
  short *psVar10;
  bool bVar11;
  bool bVar12;
  bool bVar13;
  
  iVar3 = 0;
  iVar8 = DAT_8001763c;
  iVar9 = (DAT_8001763c >> 0xe) - DAT_8001763c;
  while (iVar3 < param_2) {
    iVar2 = (int)*(short *)(param_1 + iVar3 * 4 + 2);
    iVar3 = iVar3 + 1;
    if (iVar2 < iVar8) {
      iVar8 = iVar2;
    }
    if (iVar9 < iVar2) {
      iVar9 = iVar2;
    }
  }
  iVar3 = *(int *)(*DAT_80017640 + 0x14);
  if (iVar3 != 0) {
    iVar2 = *(short *)(iVar3 + 6) - param_4;
    if (iVar2 < iVar9) {
      iVar9 = iVar2;
    }
    iVar3 = *(short *)(iVar3 + 2) - param_4;
    if (iVar8 < iVar3) {
      iVar8 = iVar3;
    }
  }
  do {
    if (iVar9 < iVar8) {
      return;
    }
    iVar3 = 0;
    *DAT_80017644 = 0;
    while (iVar3 < param_2) {
      if (iVar3 < param_2 + -1) {
        iVar2 = iVar3 + 1;
      }
      else {
        iVar2 = 0;
      }
      psVar10 = (short *)(param_1 + iVar3 * 4);
      iVar4 = (int)psVar10[1];
      psVar6 = (short *)(param_1 + iVar2 * 4);
      iVar2 = (int)psVar6[1];
      if (iVar4 == iVar8) {
        if (iVar2 == iVar8) {
          iVar2 = *psVar10 + param_3;
          if (param_3 + *psVar6 <= iVar2) {
            iVar2 = param_3 + *psVar6;
          }
          (***(code ***)(*DAT_80017640 + 100))(iVar2,iVar8 + param_4);
        }
        else {
          iVar7 = 0;
          iVar4 = iVar3;
          while (iVar5 = iVar8, iVar7 < param_2 + -1) {
            if (iVar4 == 0) {
              iVar4 = param_2 + -1;
            }
            else {
              iVar4 = iVar4 + -1;
            }
            iVar5 = (int)*(short *)(param_1 + iVar4 * 4 + 2);
            if (iVar5 != iVar8) break;
            iVar7 = iVar7 + 1;
          }
          if (iVar5 != iVar8) {
            iVar4 = (int)*psVar10;
            if ((iVar5 - iVar8 ^ iVar2 - iVar8) < 0) {
LAB_80017580:
              FUN_8002cdd8(iVar4);
            }
            else {
              (***(code ***)(*DAT_80017640 + 100))(iVar4 + param_3,iVar8 + param_4);
            }
          }
        }
      }
      else {
        bVar13 = SBORROW4(iVar2,iVar8);
        iVar7 = iVar2 - iVar8;
        if (iVar2 != iVar8) {
          if (iVar8 <= iVar2) {
            bVar13 = SBORROW4(iVar8,iVar4);
            iVar7 = iVar8 - iVar4;
          }
          if (iVar7 < 0 != bVar13) {
            bVar13 = SBORROW4(iVar4,iVar8);
            iVar7 = iVar4 - iVar8;
            if (iVar8 <= iVar4) {
              bVar13 = SBORROW4(iVar8,iVar2);
              iVar7 = iVar8 - iVar2;
            }
            if (iVar7 < 0 != bVar13) goto LAB_80017584;
          }
          iVar7 = iVar2;
          if (iVar2 < iVar4) {
            bVar13 = SBORROW4(iVar2,iVar8);
            iVar5 = iVar2 - iVar8;
            if (iVar2 <= iVar8) {
              bVar13 = SBORROW4(iVar8,iVar4);
              iVar5 = iVar8 - iVar4;
              iVar7 = iVar4;
            }
            bVar12 = iVar7 == iVar8;
            bVar11 = iVar5 < 0;
            if (bVar12 || bVar11 != bVar13) {
              unaff_r10 = (int)*psVar6;
            }
            if (bVar12 || bVar11 != bVar13) {
              iVar4 = (int)*psVar10;
            }
            iVar5 = iVar4;
            if (bVar12 || bVar11 != bVar13) goto LAB_80017550;
          }
          else {
            bVar13 = SBORROW4(iVar4,iVar8);
            iVar5 = iVar4 - iVar8;
            iVar1 = iVar4;
            if (iVar4 <= iVar8) {
              bVar13 = SBORROW4(iVar8,iVar2);
              iVar5 = iVar8 - iVar2;
              iVar1 = iVar2;
            }
            bVar12 = iVar1 == iVar8;
            bVar11 = iVar5 < 0;
            if (bVar12 || bVar11 != bVar13) {
              unaff_r10 = (int)*psVar10;
            }
            iVar5 = iVar4;
            if (bVar12 || bVar11 != bVar13) {
              iVar5 = (int)*psVar6;
            }
            iVar2 = iVar4;
            if (bVar12 || bVar11 != bVar13) {
LAB_80017550:
              iVar5 = (iVar5 - unaff_r10) * (iVar8 - iVar2);
              iVar4 = iVar7 - iVar2 >> 1;
              if (iVar5 < 1) {
                iVar5 = (iVar5 - iVar4) + 1;
              }
              else {
                iVar5 = iVar5 + iVar4;
              }
              iVar4 = divide_2(iVar5,iVar7 - iVar2);
              iVar4 = iVar4 + unaff_r10;
              goto LAB_80017580;
            }
          }
        }
      }
LAB_80017584:
      iVar3 = iVar3 + 1;
    }
    bVar13 = false;
    iVar2 = 0;
    iVar3 = 0;
    while (iVar2 < *DAT_80017644) {
      unaff_r10 = (int)*(short *)(DAT_80017648 + iVar2 * 2);
      if (bVar13) {
        (***(code ***)(*DAT_80017640 + 100))(iVar3 + param_3,iVar8 + param_4);
      }
      bVar13 = (bool)(bVar13 ^ 1);
      iVar2 = iVar2 + 1;
      iVar3 = unaff_r10;
    }
    iVar8 = iVar8 + 1;
  } while( true );
}



void gpio_config_pin(undefined4 *port,uint pin,uint mode)

{
  uint uVar1;
  uint uVar2;
  bool bVar3;
  
  uVar1 = pin >> 3;
  uVar2 = (pin << 0x1d) >> 0x1b;
  bVar3 = mode == 0;
  port[uVar1] = port[uVar1] & ~(0xf << uVar2);
  if (bVar3) {
    mode = port[uVar1];
  }
  if (bVar3) {
    uVar2 = mode & ~(1 << uVar2);
  }
  else {
    if (mode == 1) {
      port[uVar1] = port[uVar1] | 1 << uVar2;
      return;
    }
    uVar2 = mode << uVar2 | port[uVar1];
  }
  port[uVar1] = uVar2;
  return;
}



void FUN_800176b4(int param_1,uint param_2,int param_3)

{
  uint uVar1;
  uint *puVar2;
  
  puVar2 = (uint *)(param_1 * 0x20 + (param_2 >> 3) * 4 + DAT_800176ec);
  uVar1 = (param_2 << 0x1d) >> 0x1b;
  *puVar2 = *puVar2 & ~(0xf << uVar1);
  *puVar2 = *puVar2 | param_3 << uVar1;
  return;
}



void FUN_800176f0(int param_1,undefined4 param_2)

{
  uint uVar1;
  uint *puVar2;
  uint uVar3;
  
  puVar2 = (uint *)(DAT_80017720 + param_1 * 0x20);
  uVar3 = *puVar2;
  uVar1 = FUN_8000056c(1,0,param_2);
  *puVar2 = uVar1 | uVar3;
  return;
}



uint check_port_pin(uint *port,uint pin)

{
  uint uVar1;
  
  uVar1 = port[4] & 1 << (pin & 0xff);
  if (uVar1 != 0) {
    uVar1 = 1;
  }
  return uVar1;
}



void set_gpio_pin_low(uint *ptr,uint pin)

{
  ptr[4] = ptr[4] & ~(1 << (pin & 0xff));
  return;
}



void set_gpio_pin_high(uint *ptr,uint pin)

{
  ptr[4] = ptr[4] | 1 << (pin & 0xff);
  return;
}



void set_frame_to_global_pointer(void)

{
  *Global_Frame_Buffer_Pointer = Screen_Frame_Buffer;
  return;
}



void set_screen_to_global_pointer(void)

{
  *Global_Frame_Buffer_Pointer = Start_Of_Screen_Mem;
  return;
}



undefined4 FUN_80017790(void)

{
  if ((*(short *)(PTR_DAT_800177c0 + 2) != 0 && *(short *)(PTR_DAT_800177c0 + 2) != 800) &&
     (*(short *)(PTR_DAT_800177c0 + 4) != 0 && *(short *)(PTR_DAT_800177c0 + 4) != 0x1e0)) {
    return 0;
  }
  return 1;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffdc : 0x80017814
// WARNING: Restarted to delay deadcode elimination for space: stack

void tp_i2c_read_status(void)

{
  undefined2 uVar1;
  uint *reg_addr;
  undefined *puVar2;
  undefined *puVar3;
  int iVar4;
  uchar uVar5;
  uchar uVar6;
  uint uVar7;
  code *in_lr;
  byte bStack48;
  byte bStack47;
  byte bStack46;
  byte bStack45;
  byte local_24 [4];
  uchar auStack32 [8];
  code *UNRECOVERED_JUMPTABLE;
  
  reg_addr = TP_GT911_STATUS_REG;
  local_24[0] = 0;
  UNRECOVERED_JUMPTABLE = in_lr;
  tp_i2c_read_data(TP_GT911_STATUS_REG,local_24,1);
  if ((local_24[0] & 0x80) == 0) {
                    // WARNING: Could not recover jumptable at 0x800177fc. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
  auStack32[0] = '\0';
  tp_send_i2c_data(reg_addr,auStack32,1);
  puVar3 = PTR_DAT_8001791c;
  puVar2 = DAT_80017918;
  if (4 < (local_24[0] & 0xf) - 1) {
    *(undefined2 *)(DAT_80017918 + 2) = 800;
    *(undefined2 *)(puVar3 + 2) = 800;
    *(undefined2 *)(puVar2 + 4) = 0x1e0;
    *(undefined2 *)(puVar3 + 4) = 0x1e0;
    *puVar2 = 0;
    *puVar3 = 0;
                    // WARNING: Could not recover jumptable at 0x80017910. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
  fpga_write_cmd('A');
  uVar5 = fpga_read_data();
  uVar6 = fpga_read_data();
  tp_i2c_read_data((uint *)(uint)CONCAT11(uVar5,uVar6),&bStack48,4);
  iVar4 = DAT_80017920;
  uVar7 = ((uint)bStack48 + (uint)bStack47 * 0x100 & 0xfffeffff) * 100 >> 7;
  *(short *)(DAT_80017920 + 2) = (short)uVar7;
  if (800 < uVar7) {
    *(undefined2 *)(iVar4 + 2) = 800;
  }
  uVar7 = DAT_80017924;
  uVar1 = *(undefined2 *)(iVar4 + 2);
  *(undefined2 *)(puVar2 + 2) = uVar1;
  *(undefined2 *)(puVar3 + 2) = uVar1;
  uVar7 = (uint)((ulonglong)(((uint)bStack46 + (uint)bStack45 * 0x100 & 0xfffeffff) * 100) *
                 (ulonglong)uVar7 >> 0x23) & 0xff80ffff;
  *(short *)(iVar4 + 4) = (short)uVar7;
  if (0x1e0 < uVar7) {
    *(undefined2 *)(iVar4 + 4) = 0x1e0;
  }
  uVar1 = *(undefined2 *)(iVar4 + 4);
  *(undefined2 *)(puVar2 + 4) = uVar1;
  *(undefined2 *)(puVar3 + 4) = uVar1;
  *puVar2 = 1;
  *puVar3 = 1;
                    // WARNING: Could not recover jumptable at 0x800178ec. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE)();
  return;
}



ushort fpga_get_tp_status_reg_address(void)

{
  uchar uVar1;
  uchar uVar2;
  
  fpga_write_cmd('A');
  uVar1 = fpga_read_data();
  uVar2 = fpga_read_data();
  return CONCAT11(uVar1,uVar2);
}



// WARNING: Could not reconcile some variable overlaps

void tp_i2c_setup(void)

{
  uint *puVar1;
  byte bVar2;
  uint uVar3;
  uint uVar4;
  undefined4 in_r3;
  undefined4 local_10;
  
  puVar1 = PA_CFG0;
  local_10 = in_r3;
  gpio_config_pin(PA_CFG0,3,1);
  gpio_config_pin(puVar1,2,1);
  set_gpio_pin_high(puVar1,3);
  set_gpio_pin_high(puVar1,2);
  gpio_config_pin(puVar1,0,1);
  gpio_config_pin(puVar1,1,1);
  set_gpio_pin_low(puVar1,0);
  set_gpio_pin_low(puVar1,1);
  delay(100);
  set_gpio_pin_high(puVar1,1);
  delay(DAT_80017ab8);
  set_gpio_pin_high(puVar1,0);
  delay(DAT_80017abc);
  gpio_config_pin(puVar1,1,0);
  delay(DAT_80017ac0);
  puVar1 = TP_GT911_CMD_REG;
  local_10._0_1_ = 2;
  tp_send_i2c_data(TP_GT911_CMD_REG,(uchar *)&local_10,1);
  bVar2 = 0;
  uVar3 = 0;
  do {
    uVar4 = uVar3 + 2 & 0xfffeffff;
    bVar2 = DAT_80017ac8[uVar3 + 1] + bVar2 + DAT_80017ac8[uVar3];
    uVar3 = uVar4;
  } while (uVar4 < 0xb8);
  DAT_80017ac8[0xb8] = ~bVar2 + 1;
  tp_send_i2c_data(TP_GT911_CFG_REG,DAT_80017ac8,0xba);
  delay(DAT_80017ad0);
  local_10 = (uint)local_10._1_3_ << 8;
  tp_send_i2c_data(puVar1,(uchar *)&local_10,1);
  return;
}



void tp_i2c_read_data(uint *reg_addr,uchar *buffer,uint size)

{
  bool bVar1;
  uint *ptr;
  byte bVar2;
  undefined4 uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  
  tp_send_i2c_start();
  tp_i2c_send_byte('(');
  tp_i2c_clock_ack();
  tp_i2c_send_byte((uchar)((uint)((int)reg_addr << 0x10) >> 0x18));
  tp_i2c_clock_ack();
  tp_i2c_send_byte((uchar)reg_addr);
  tp_i2c_clock_ack();
  tp_send_i2c_start();
  tp_i2c_send_byte(')');
  tp_i2c_clock_ack();
  ptr = DAT_80017cdc;
  uVar6 = 0;
  if (size != 0) {
    do {
      uVar5 = 0;
      gpio_config_pin(ptr,2,0);
      set_gpio_pin_low(ptr,3);
      delay(10);
      bVar2 = 0;
      do {
        set_gpio_pin_high(ptr,3);
        delay(10);
        uVar5 = (uVar5 << 0x19) >> 0x18;
        uVar4 = check_port_pin(ptr,2);
        if (uVar4 != 0) {
          uVar5 = uVar5 | 1;
        }
        set_gpio_pin_low(ptr,3);
        delay(10);
        bVar2 = bVar2 + 1;
      } while (bVar2 < 8);
      gpio_config_pin(ptr,2,1);
      buffer[uVar6] = (uchar)uVar5;
      if (uVar6 == size - 1) {
        gpio_config_pin(ptr,2,1);
        gpio_config_pin(ptr,3,1);
        set_gpio_pin_high(ptr,2);
        delay(10);
        set_gpio_pin_low(ptr,3);
        delay(10);
        set_gpio_pin_high(ptr,3);
        delay(10);
        set_gpio_pin_low(ptr,3);
        delay(10);
      }
      else {
        tp_i2c_clock_ack();
      }
      uVar6 = uVar6 + 1 & 0xff;
    } while (uVar6 < size);
  }
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,2,1);
  set_gpio_pin_low(ptr,2);
  delay(10);
  set_gpio_pin_high(ptr,3);
  delay(10);
  set_gpio_pin_high(ptr,2);
  uVar3 = FUN_8003a370(10);
  FUN_8003a44c(uVar3,DAT_8000bcb4);
  uVar6 = FUN_8003a31c();
  uVar5 = 0;
  while (uVar5 < uVar6) {
    bVar1 = false;
    while (!bVar1) {
      bVar1 = true;
    }
    uVar5 = uVar5 + 1;
  }
  return;
}



void set_fpga_battery_level(void)

{
  uint *ptr;
  uint uVar1;
  
  uVar1 = translate_parameter(0x16,(uint)*(byte *)(DAT_80017d28 + 0x38) *
                                   (uint)*(ushort *)(DAT_80017d28 + 0x12) & 0xff00ffff);
  fpga_write_cmd('<');
  fpga_write_data((uchar)(~uVar1 >> 8));
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = ~uVar1 & 0xff | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



int tp_send_i2c_data(uint *reg_addr,uchar *buffer,uint size)

{
  uint *ptr;
  uint uVar1;
  int iVar2;
  
  iVar2 = 0;
  tp_send_i2c_start();
  tp_i2c_send_byte('(');
  tp_i2c_clock_ack();
  tp_i2c_send_byte((uchar)((uint)((int)reg_addr << 0x10) >> 0x18));
  tp_i2c_clock_ack();
  tp_i2c_send_byte((uchar)reg_addr);
  tp_i2c_clock_ack();
  uVar1 = 0;
  if (size != 0) {
    do {
      tp_i2c_send_byte(buffer[uVar1]);
      tp_i2c_clock_ack();
      if (uVar1 == size) {
        iVar2 = 1;
        break;
      }
      uVar1 = uVar1 + 1 & 0xff;
    } while (uVar1 < size);
  }
  ptr = PA_CFG0;
  gpio_config_pin(PA_CFG0,3,1);
  gpio_config_pin(ptr,2,1);
  set_gpio_pin_low(ptr,2);
  delay(10);
  set_gpio_pin_high(ptr,3);
  delay(10);
  set_gpio_pin_high(ptr,2);
  delay(10);
  return iVar2;
}



void font_render_char_1(uint char)

{
  byte rows;
  byte pixels;
  short xpos;
  short ypos;
  short sVar1;
  int *piVar2;
  uchar mode;
  short *psVar3;
  uint uVar4;
  ushort *puVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  int *piVar9;
  uint unaff_r6;
  int iVar10;
  int unaff_r8;
  int unaff_r9;
  int iVar11;
  bool bVar12;
  bool bVar13;
  byte mode_00;
  
  piVar2 = DAT_80017ff8;
  iVar8 = *DAT_80017ff8;
  xpos = *(short *)(iVar8 + 0x22);
  uVar6 = SEXT24(xpos);
  piVar9 = *(int **)(*(int *)(iVar8 + 0x1c) + 0x1c);
  ypos = *(short *)(iVar8 + 0x24);
  uVar4 = (uint)*(ushort *)(piVar9 + 3);
  bVar13 = char <= uVar4;
  bVar12 = uVar4 == char;
  uVar7 = uVar6;
  if (!bVar13 || bVar12) {
    uVar7 = (uint)*(ushort *)((int)piVar9 + 0xe);
  }
  if (!bVar13 || bVar12) {
    bVar13 = uVar7 <= char;
    bVar12 = char == uVar7;
  }
  if (!bVar13 || bVar12) {
    unaff_r9 = *piVar9;
  }
  if (!bVar13 || bVar12) {
    unaff_r8 = char - uVar4;
  }
  if (!bVar13 || bVar12) {
    iVar10 = -1;
  }
  else {
    puVar5 = (ushort *)piVar9[2];
    unaff_r9 = piVar9[1];
    if (puVar5 == (ushort *)0x0) goto LAB_80017fd8;
    uVar7 = (uint)*puVar5;
    bVar13 = char <= uVar7;
    bVar12 = uVar7 == char;
    if (!bVar13 || bVar12) {
      unaff_r6 = (uint)puVar5[1];
    }
    if (!bVar13 || bVar12) {
      bVar13 = unaff_r6 <= char;
      bVar12 = char == unaff_r6;
    }
    if (bVar13 && !bVar12) goto LAB_80017fd8;
    psVar3 = (short *)(*(int *)(puVar5 + 2) + (char - uVar7 & 0xffff) * 4);
    unaff_r8 = (int)*psVar3;
    iVar10 = (int)psVar3[1];
  }
  if (unaff_r8 != -1) {
    rows = *(byte *)(*(int *)(iVar8 + 0x1c) + 0x18);
    iVar11 = (uint)rows * (uint)*(byte *)((int)piVar9 + 0x12);
    pixels = *(byte *)(piVar9 + 4);
    sVar1 = *(short *)(iVar8 + 0x2a);
    mode_00 = (byte)sVar1;
    mode = swap_font_paint_mode(mode_00);
    iVar8 = *(int *)(*piVar2 + 0x1c);
    render_character(xpos,ypos,pixels,rows,*(byte *)(iVar8 + 0x1a),*(byte *)(iVar8 + 0x1b),1,
                     *(byte *)((int)piVar9 + 0x12),(byte *)(unaff_r8 * iVar11 + unaff_r9),
                     *(ushort **)(*piVar2 + 0x38));
    if (iVar10 != -1) {
      swap_font_paint_mode(mode_00 | 2);
      iVar8 = *(int *)(*piVar2 + 0x1c);
      render_character(xpos,ypos,pixels,rows,*(byte *)(iVar8 + 0x1a),*(byte *)(iVar8 + 0x1b),1,
                       *(byte *)((int)piVar9 + 0x12),(byte *)(iVar10 * iVar11 + unaff_r9),
                       *(ushort **)(*piVar2 + 0x38));
    }
    if ((*(byte *)(*(int *)(*piVar2 + 0x1c) + 0x18) < *(byte *)(*(int *)(*piVar2 + 0x1c) + 0x19)) &&
       (sVar1 != 2)) {
      swap_font_paint_mode(mode_00 ^ 4);
      iVar8 = *(int *)(*piVar2 + 0x1c);
      FUN_8001cd50(uVar6,(uint)*(byte *)(iVar8 + 0x1b) * (uint)*(byte *)(iVar8 + 0x18) + (int)ypos,
                   (uint)pixels * (uint)*(byte *)(iVar8 + 0x1a) + uVar6,
                   (uint)*(byte *)(iVar8 + 0x19) + (int)ypos);
    }
    swap_font_paint_mode(mode);
  }
LAB_80017fd8:
  *(ushort *)(*piVar2 + 0x22) = *(short *)(*piVar2 + 0x22) + (ushort)*(byte *)((int)piVar9 + 0x11);
  return;
}



uint get_char_width_1(uint char,void *ptr)

{
  int iVar1;
  
  iVar1 = *(int *)(*(int *)(*DAT_80018020 + 0x1c) + 0x1c);
  if (ptr != (void *)0x0) {
    *(uint *)ptr = (uint)*(byte *)(iVar1 + 0x10);
  }
  return (uint)*(byte *)(iVar1 + 0x11);
}



void FUN_80018024(undefined4 param_1,undefined2 *param_2)

{
  *param_2 = 2;
  return;
}



undefined4 FUN_80018030(int param_1,uint param_2,undefined4 param_3,uint param_4)

{
  int iVar1;
  ushort *puVar2;
  uint uVar3;
  bool bVar4;
  bool bVar5;
  
  iVar1 = *(int *)(param_1 + 0x1c);
  uVar3 = (uint)*(ushort *)(iVar1 + 0xc);
  bVar5 = param_2 <= uVar3;
  bVar4 = uVar3 == param_2;
  if (!bVar5 || bVar4) {
    uVar3 = (uint)*(ushort *)(iVar1 + 0xe);
  }
  if (!bVar5 || bVar4) {
    bVar5 = uVar3 <= param_2;
    bVar4 = param_2 == uVar3;
  }
  if (!bVar5 || bVar4) {
    return 1;
  }
  puVar2 = *(ushort **)(iVar1 + 8);
  if (puVar2 != (ushort *)0x0) {
    uVar3 = (uint)*puVar2;
    bVar5 = param_2 <= uVar3;
    bVar4 = uVar3 == param_2;
    if (!bVar5 || bVar4) {
      param_4 = (uint)puVar2[1];
    }
    if (!bVar5 || bVar4) {
      bVar5 = param_4 <= param_2;
      bVar4 = param_2 == param_4;
    }
    if ((!bVar5 || bVar4) && (-1 < *(short *)(*(int *)(puVar2 + 2) + param_2 * 4 + uVar3 * -4))) {
      return 1;
    }
  }
  return 0;
}



void font_render_char_2(uint char)

{
  byte bVar1;
  byte bVar2;
  short sVar3;
  int *piVar4;
  uchar mode;
  ushort *puVar5;
  int iVar6;
  uint uVar7;
  uint color;
  uint color_00;
  int iVar8;
  byte *pbVar9;
  
  piVar4 = DAT_800181c0;
  sVar3 = *(short *)(*DAT_800181c0 + 0x2a);
  puVar5 = (ushort *)check_char_in_font(*(void **)(*(int *)(*DAT_800181c0 + 0x1c) + 0x1c),char);
  if (puVar5 != (ushort *)0x0) {
    pbVar9 = (byte *)(*(int *)(puVar5 + 2) + (char - *puVar5) * 8);
    bVar1 = pbVar9[2];
    mode = swap_font_paint_mode((uchar)sVar3);
    iVar6 = *piVar4;
    iVar8 = *(int *)(iVar6 + 0x1c);
    render_character(*(short *)(iVar6 + 0x22),*(short *)(iVar6 + 0x24),*pbVar9,
                     *(byte *)(iVar8 + 0x18),*(byte *)(iVar8 + 0x1a),*(byte *)(iVar8 + 0x1b),1,bVar1
                     ,*(byte **)(pbVar9 + 4),*(ushort **)(iVar6 + 0x38));
    iVar6 = *(int *)(*piVar4 + 0x1c);
    bVar1 = *(byte *)(iVar6 + 0x19);
    bVar2 = *(byte *)(iVar6 + 0x18);
    if ((uint)bVar2 < (uint)bVar1) {
      uVar7 = (uint)*(byte *)(iVar6 + 0x1b);
      if (sVar3 != 2) {
        color = FUN_800191ec(uVar7);
        color_00 = FUN_8001913c();
        set_display_fg_color(color_00);
        iVar6 = *piVar4;
        FUN_8001cd50((int)*(short *)(iVar6 + 0x22),(int)*(short *)(iVar6 + 0x24) + bVar2 * uVar7,
                     (uint)*(byte *)(*(int *)(iVar6 + 0x1c) + 0x1b) * (uint)*pbVar9 +
                     (int)*(short *)(iVar6 + 0x22),(int)*(short *)(iVar6 + 0x24) + bVar1 * uVar7);
        set_display_fg_color(color);
      }
    }
    swap_font_paint_mode(mode);
    iVar6 = *piVar4;
    *(ushort *)(iVar6 + 0x22) =
         (ushort)pbVar9[1] * (ushort)*(byte *)(*(int *)(iVar6 + 0x1c) + 0x1a) +
         *(short *)(iVar6 + 0x22);
  }
  return;
}



uint get_char_width_2(uint char,void *ptr)

{
  int *piVar1;
  ushort *puVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  
  piVar1 = DAT_8001822c;
  puVar2 = (ushort *)check_char_in_font(*(void **)(*(int *)(*DAT_8001822c + 0x1c) + 0x1c),char);
  if (puVar2 != (ushort *)0x0) {
    uVar4 = *(uint *)(puVar2 + 2);
    iVar3 = uVar4 + (char - *puVar2) * 8;
    uVar5 = (uint)*(byte *)(*(int *)(*piVar1 + 0x1c) + 0x1a);
    if ((int *)ptr != (int *)0x0) {
      uVar4 = (uint)*(byte *)(uVar4 + (char - *puVar2) * 8);
    }
    puVar2 = (ushort *)(uVar5 * *(byte *)(iVar3 + 1));
    if ((int *)ptr != (int *)0x0) {
      *(uint *)ptr = uVar5 * uVar4;
    }
  }
  return (uint)puVar2;
}



void FUN_80018230(undefined4 param_1,undefined2 *param_2)

{
  *param_2 = 1;
  return;
}



void * FUN_8001823c(int param_1,uint param_2)

{
  void *pvVar1;
  
  pvVar1 = check_char_in_font(*(void **)(param_1 + 0x1c),param_2);
  if (pvVar1 != (void *)0x0) {
    pvVar1 = (void *)0x1;
  }
  return pvVar1;
}



void * check_char_in_font(void *ptr,uint char)

{
  uint uVar1;
  bool bVar2;
  bool bVar3;
  
  while( true ) {
    if ((ushort *)ptr == (ushort *)0x0) {
      return (ushort *)0x0;
    }
                    // WARNING: Load size is inaccurate
    uVar1 = (uint)*ptr;
    bVar3 = char <= uVar1;
    bVar2 = uVar1 == char;
    if (!bVar3 || bVar2) {
      uVar1 = (uint)*(ushort *)((int)ptr + 2);
    }
    if (!bVar3 || bVar2) {
      bVar3 = uVar1 <= char;
      bVar2 = char == uVar1;
    }
    if (!bVar3 || bVar2) break;
    ptr = *(ushort **)((int)ptr + 8);
  }
  return (ushort *)ptr;
}



void FUN_8001827c(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  iVar2 = DAT_800182f4;
  iVar3 = 0;
  while (iVar3 < *(int *)(iVar2 + 8)) {
    FUN_80000804(*(int *)(iVar2 + 0x10) + iVar3 * 0x78 + 4,*DAT_800182f8,0x70);
    iVar1 = *(int *)(iVar2 + 0x10);
    *(undefined4 *)(iVar1 + iVar3 * 0x78) = 0;
    iVar1 = iVar1 + iVar3 * 0x78;
    *(int *)(iVar1 + 0x18) = iVar1 + 0xc;
    *(int *)(iVar1 + 0x3c) = iVar1 + 4;
    *(int *)(iVar1 + 0x40) = iVar1 + 8;
    *(int *)(iVar1 + 0x44) = iVar1 + 4;
    iVar3 = iVar3 + 1;
  }
  save_context();
  iVar2 = *(int *)(DAT_80019a84 + 0xc) + -1;
  *(int *)(DAT_80019a84 + 0xc) = iVar2;
  if (iVar2 != 0) {
    return;
  }
  return;
}



int FUN_800182fc(void)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  
  puVar1 = DAT_80018354;
  *DAT_80018354 = PTR_FUN_80018350;
  FUN_8001a19c(puVar1);
  puVar1 = DAT_80018358;
  iVar2 = DAT_80018358[2];
  uVar3 = FUN_80018464(iVar2 * 0x78);
  puVar1[4] = uVar3;
  FUN_8001a258(uVar3,0,iVar2 * 0x78);
  *puVar1 = 0xffffffff;
  empty_func_2();
  iVar2 = DAT_8002f980;
  iVar7 = 0;
  while( true ) {
    if (*(int *)(iVar2 + 8) <= iVar7) {
      return 0;
    }
    iVar4 = FUN_80019ab8();
    iVar6 = *(int *)(iVar2 + 0x10);
    iVar5 = *(int *)(iVar6 + iVar7 * 0x78);
    if (iVar5 == iVar4) break;
    if (iVar5 == 0) {
      *(int *)(iVar6 + iVar7 * 0x78) = iVar4;
      return iVar7;
    }
    iVar7 = iVar7 + 1;
  }
  return iVar7;
}



int FUN_8001835c(int param_1)

{
  if (param_1 != 0) {
    save_context();
    param_1 = FUN_8002cf28(param_1);
    restore_context();
  }
  return param_1;
}



int FUN_80018388(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  undefined4 local_10;
  
  local_10 = param_4;
  save_context();
  iVar1 = FUN_8001835c(param_1);
  if (iVar1 != 0) {
    local_10 = FUN_8001857c();
    FUN_8001a258(local_10,0,param_1);
    FUN_800185cc(&local_10);
  }
  restore_context();
  return iVar1;
}



void FUN_800183d0(undefined4 param_1,uint param_2)

{
  undefined4 *puVar1;
  
  puVar1 = DAT_800183e4;
  *DAT_800183e4 = param_1;
  puVar1[1] = param_2 & 0xfffffffc;
  return;
}



void FUN_800183e8(int param_1)

{
  int iVar1;
  
  if (param_1 == 0) {
    return;
  }
  save_context();
  if (*(char *)(*(int *)(DAT_80018438 + 0x34) + param_1 * 8) == '\x01') {
    FUN_8002ce34(*(undefined4 *)(*(int *)(*(int *)(DAT_80018438 + 0x34) + param_1 * 8 + 4) + 4));
    FUN_8002ff18(param_1);
  }
  iVar1 = *(int *)(DAT_80019a84 + 0xc) + -1;
  *(int *)(DAT_80019a84 + 0xc) = iVar1;
  if (iVar1 != 0) {
    return;
  }
  return;
}



void FUN_8001843c(int *param_1)

{
  int iVar1;
  int iVar2;
  
  iVar1 = DAT_80018460;
  if (param_1 == (int *)0x0) {
    return;
  }
  iVar2 = *(int *)(DAT_80018460 + 0x3c);
  *param_1 = iVar2;
  if (iVar2 != 0) {
    *(int **)(iVar2 + 4) = param_1;
  }
  *(int **)(iVar1 + 0x3c) = param_1;
  return;
}



uint ** FUN_80018464(int param_1)

{
  int iVar1;
  uint **ppuVar2;
  uint **ppuVar3;
  uint *puVar4;
  int *piVar5;
  int iVar6;
  
  FUN_8002fb5c();
  iVar1 = DAT_80018578;
  puVar4 = (uint *)((param_1 + 3U & 0xfffffffc) + 4);
  ppuVar3 = *(uint ***)(DAT_80018578 + 0x3c);
  if (puVar4 < *(uint **)(DAT_80018578 + 0x40)) {
    puVar4 = *(uint **)(DAT_80018578 + 0x40);
  }
  do {
    if (ppuVar3 == (uint **)0x0) {
LAB_800184e4:
      iVar6 = *(int *)(DAT_80018578 + 0x38) + *(int *)(DAT_80018578 + 0xc);
      piVar5 = (int *)(iVar6 - *(int *)(iVar6 + -4));
      if (*piVar5 != 0) {
        FUN_8002ffac(0);
        piVar5 = (int *)(iVar6 - *(int *)(iVar6 + -4));
        if (*piVar5 != 0) {
          return ppuVar3;
        }
      }
      if ((int)puVar4 <= piVar5[1]) {
        ppuVar2 = (uint **)((int)piVar5 + (piVar5[1] - (int)puVar4));
        ppuVar3 = ppuVar2 + 1;
        FUN_8002ff50(piVar5);
        *(int *)(iVar1 + 0xc) = *(int *)(iVar1 + 0xc) - (int)puVar4;
        *(int *)(iVar1 + 0x14) = *(int *)(iVar1 + 0x14) + (int)puVar4;
        if ((uint *)piVar5[1] != puVar4) {
          FUN_8002ce34();
        }
        *ppuVar2 = puVar4;
      }
      return ppuVar3;
    }
    if (ppuVar3[-1] == puVar4) {
      if (ppuVar3 != (uint **)0x0) {
        if (*ppuVar3 != (uint *)0x0) {
          (*ppuVar3)[1] = (uint)ppuVar3[1];
        }
        if ((uint **)ppuVar3[1] != (uint **)0x0) {
          *ppuVar3[1] = (uint)*ppuVar3;
        }
        if (*(uint ***)(iVar1 + 0x3c) != ppuVar3) {
          return ppuVar3;
        }
        *(uint **)(iVar1 + 0x3c) = *ppuVar3;
        return ppuVar3;
      }
      goto LAB_800184e4;
    }
    ppuVar3 = (uint **)*ppuVar3;
  } while( true );
}



int FUN_8001857c(int param_1)

{
  int iVar1;
  char *pcVar2;
  
  iVar1 = DAT_800185a0;
  *(int *)(DAT_800185a0 + 0x1c) = *(int *)(DAT_800185a0 + 0x1c) + 1;
  pcVar2 = (char *)(*(int *)(iVar1 + 0x34) + param_1 * 8);
  *pcVar2 = *pcVar2 + '\x01';
  if (param_1 == 0) {
    return 0;
  }
  return *(int *)(*(int *)(DAT_8001863c + 0x34) + param_1 * 8 + 4) + 8;
}



void FUN_800185a4(uint param_1)

{
  if (param_1 < 0x11) {
    param_1 = 0x10;
  }
  else {
    if (*(uint *)(DAT_800185c8 + 4) >> 1 <= param_1) {
      param_1 = *(uint *)(DAT_800185c8 + 4) >> 1;
    }
  }
  *(uint *)(DAT_800185c8 + 8) = param_1;
  return;
}



undefined4 FUN_800185cc(int *param_1)

{
  byte *pbVar1;
  
  pbVar1 = (byte *)(*(int *)(DAT_80018618 + 0x34) + *(int *)(*param_1 + -8) * 8);
  if ((1 < *pbVar1) && (*(int *)(DAT_80018618 + 0x1c) != 0)) {
    *(int *)(DAT_80018618 + 0x1c) = *(int *)(DAT_80018618 + 0x1c) + -1;
  }
  *pbVar1 = *pbVar1 - 1;
  *param_1 = 0;
  return 0;
}



int FUN_8001861c(int param_1)

{
  if (param_1 == 0) {
    return 0;
  }
  return *(int *)(*(int *)(DAT_8001863c + 0x34) + param_1 * 8 + 4) + 8;
}



int FUN_80018640(uint param_1,uint param_2)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  bool bVar4;
  
  uVar2 = (param_1 & 0xff) - (param_2 & 0xff);
  if ((int)uVar2 < 0) {
    uVar2 = -uVar2;
  }
  uVar3 = ((param_1 << 0x10) >> 0x18) - ((param_2 << 0x10) >> 0x18);
  if ((int)uVar3 < 0) {
    uVar3 = -uVar3;
  }
  uVar1 = (int)(((param_1 >> 0x10) - (param_2 >> 0x10)) * 0x10000) >> 0x10;
  bVar4 = (int)uVar1 < 0;
  if (bVar4) {
    uVar1 = uVar1 * -0x10000;
  }
  if (bVar4) {
    uVar1 = (int)uVar1 >> 0x10;
  }
  return (uVar1 & 0xffff) * (uVar1 & 0xffff) +
         (uVar3 & 0xffff) * (uVar3 & 0xffff) + (uVar2 & 0xffff) * (uVar2 & 0xffff);
}



void FUN_800186b0(void)

{
  uint uVar1;
  uchar mode;
  int iVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint local_20;
  uint local_1c;
  
  FUN_800192e4(0);
  uVar1 = DAT_800186d8;
  iVar2 = ((int)DAT_800186d8 >> 0xe) - DAT_800186d8;
  local_1c = DAT_800186d8;
  local_20 = DAT_800186d8;
  save_context();
  mode = swap_font_paint_mode('\x04');
  iVar3 = *(int *)(*(int *)(DAT_80018770 + 0xc) + 0x4c);
  iVar4 = *(int *)(*(int *)(DAT_80018770 + 0xc) + 0x50);
  uVar6 = iVar2 + iVar3;
  uVar5 = uVar1 + iVar3;
  iVar2 = iVar2 + iVar4;
  iVar4 = uVar1 + iVar4;
  local_20 = uVar6 & 0xffff | iVar2 * 0x10000;
  local_1c = uVar5 & 0xffff | iVar4 * 0x10000;
  iVar3 = FUN_8002ac10(&local_20);
  while (iVar3 != 0) {
    FUN_8001cd50(uVar6,iVar2,uVar5,iVar4);
    iVar3 = FUN_8002ab40();
  }
  swap_font_paint_mode(mode);
  restore_context();
  return;
}



undefined4 * FUN_80018774(undefined4 param_1,int param_2,undefined2 param_3,int param_4)

{
  undefined4 *puVar1;
  int *piVar2;
  int *piVar3;
  
  if (param_4 < 2) {
    puVar1 = (undefined4 *)FUN_80018464(0x1c);
    if (puVar1 != (undefined4 *)0x0) {
      if (param_2 == 0) {
        piVar2 = *(int **)(DAT_800187fc + param_4 * 4);
        if (piVar2 != (int *)0x0) {
          do {
            piVar3 = piVar2;
            piVar2 = (int *)*piVar3;
          } while (piVar2 != (int *)0x0);
          puVar1[4] = piVar3[4];
        }
      }
      else {
        puVar1[4] = param_2;
      }
      puVar1[6] = param_4;
      *(undefined2 *)(puVar1 + 5) = param_3;
      *puVar1 = 0;
      puVar1[3] = param_1;
      puVar1[1] = 0;
      puVar1[2] = 0;
    }
  }
  else {
    puVar1 = (undefined4 *)0x0;
  }
  return puVar1;
}



int FUN_80018800(void)

{
  int iVar1;
  int in_r3;
  
  iVar1 = FUN_80018774();
  if ((iVar1 != 0) && (FUN_8001884c(), **(int **)(iVar1 + 0xc) == 0)) {
    *(int *)(*DAT_80018844 + in_r3 * 4 + 0x58) = iVar1;
  }
  return iVar1;
}



void thunk_FUN_8001843c(int *param_1)

{
  int iVar1;
  int iVar2;
  
  iVar1 = DAT_80018460;
  if (param_1 == (int *)0x0) {
    return;
  }
  iVar2 = *(int *)(DAT_80018460 + 0x3c);
  *param_1 = iVar2;
  if (iVar2 != 0) {
    *(int **)(iVar2 + 4) = param_1;
  }
  *(int **)(iVar1 + 0x3c) = param_1;
  return;
}



// WARNING: Type propagation algorithm not settling

undefined4 FUN_8001884c(int *param_1,undefined4 param_2,int param_3)

{
  int iVar1;
  int **ppiVar2;
  int **ppiVar3;
  uint uVar4;
  bool bVar5;
  
  bVar5 = (int)param_1 < 0;
  if (param_1 != (int *)0x0) {
    param_3 = param_1[6];
    bVar5 = param_3 + -2 < 0;
  }
  if (bVar5 != (param_1 != (int *)0x0 && SBORROW4(param_3,2))) {
    iVar1 = *(int *)(DAT_80018938 + param_3 * 4);
    if (iVar1 == 0) {
      *(int **)(DAT_80018938 + param_3 * 4) = param_1;
      return 0;
    }
    do {
      ppiVar2 = (int **)iVar1;
      iVar1 = *(int *)((int)ppiVar2 + 4);
    } while (*(int *)((int)ppiVar2 + 4) != 0);
    while (ppiVar2 != (int **)0x0) {
      if (*(int *)((int *)ppiVar2)[3] <= *(int *)param_1[3]) {
        if (ppiVar2 == (int **)0x0) {
          return 1;
        }
        uVar4 = *(uint *)((int *)ppiVar2)[3];
        bVar5 = uVar4 == *(uint *)param_1[3];
        if (bVar5) {
          uVar4 = (uint)*(ushort *)(param_1 + 5);
        }
        ppiVar3 = ppiVar2;
        if (!bVar5 || uVar4 != 1) goto LAB_800188fc;
        goto LAB_800188e8;
      }
      ppiVar2 = (int **)*ppiVar2;
    }
  }
  return 1;
  while (ppiVar3 = ppiVar2, *(int *)param_1[3] <= *(int *)((int *)ppiVar2)[3]) {
LAB_800188e8:
    ppiVar2 = (int **)*ppiVar3;
    if (ppiVar2 == (int **)0x0) {
      ppiVar2 = ppiVar3;
      if (ppiVar3 == (int **)0x0) {
        return 1;
      }
      break;
    }
  }
LAB_800188fc:
  if ((int **)((int *)ppiVar2)[1] == (int **)0x0) {
    *(int **)(DAT_80018938 + param_3 * 4) = param_1;
  }
  else {
    *(int **)((int *)ppiVar2)[1] = param_1;
    param_1[1] = ((int *)ppiVar2)[1];
  }
  ((int *)ppiVar2)[1] = (int)param_1;
  if ((int **)param_1 == ppiVar2) {
    ppiVar2 = (int **)0x0;
  }
  *param_1 = (int)ppiVar2;
  return 0;
}



void FUN_8001893c(int *param_1)

{
  while (param_1 != (int *)0x0) {
    param_1 = (int *)*param_1;
    FUN_8001884c();
  }
  return;
}



void thunk_FUN_800306e0(int *param_1)

{
  if (*(int **)(DAT_80030728 + param_1[6] * 4) == param_1) {
    *(int *)(DAT_80030728 + param_1[6] * 4) = *param_1;
  }
  if ((int *)param_1[1] != (int *)0x0) {
    *(int *)param_1[1] = *param_1;
  }
  if (*param_1 != 0) {
    *(int *)(*param_1 + 4) = param_1[1];
  }
  *param_1 = 0;
  param_1[1] = 0;
  return;
}



uint * FUN_80018964(uint *param_1)

{
  int iVar1;
  int iVar2;
  undefined *puVar3;
  uint **ppuVar4;
  int iVar5;
  int iVar6;
  uint **ppuVar7;
  
  puVar3 = PTR_DAT_800189cc;
  iVar2 = DAT_800189c8;
  ppuVar7 = (uint **)0x0;
  iVar5 = 0;
  do {
    ppuVar4 = *(uint ***)(iVar2 + iVar5 * 4);
    while (ppuVar4 != (uint **)0x0) {
      param_1 = (uint *)(uint)(byte)puVar3[*ppuVar4[3]];
      if (param_1 != (uint *)0x0) {
        param_1 = (uint *)FUN_800306e0(ppuVar4);
        *ppuVar4 = (uint *)ppuVar7;
        ppuVar7 = ppuVar4;
      }
      ppuVar4 = (uint **)*ppuVar4;
    }
    iVar6 = iVar5 + 1;
    iVar1 = iVar5 + -1;
    if (1 < iVar6) {
      param_1 = (uint *)ppuVar7;
    }
    iVar5 = iVar6;
  } while (iVar1 < 0 != SBORROW4(iVar6,2));
  return param_1;
}



void FUN_800189d0(int param_1)

{
  int *piVar1;
  
  if (1 < param_1) {
    return;
  }
  piVar1 = *(int **)(DAT_80018a04 + param_1 * 4);
  while( true ) {
    if (piVar1 == (int *)0x0) {
      return;
    }
    if (*(int *)piVar1[3] == 0) break;
    piVar1 = (int *)*piVar1;
  }
  return;
}



void display_character(char character,uint16 xpos,uint16 ypos)

{
  undefined2 in_r1;
  int iVar1;
  undefined2 in_r2;
  
  save_context();
  iVar1 = *DAT_80018a3c;
  *(undefined2 *)(iVar1 + 0x22) = in_r1;
  *(undefined2 *)(iVar1 + 0x24) = in_r2;
  FUN_80009904((int)character);
  iVar1 = *(int *)(DAT_80019a84 + 0xc) + -1;
  *(int *)(DAT_80019a84 + 0xc) = iVar1;
  if (iVar1 != 0) {
    return;
  }
  return;
}



void FUN_80018a40(void)

{
  byte bVar1;
  int iVar2;
  
  save_context();
  bVar1 = get_font_height();
  iVar2 = *DAT_80018a70;
  *(ushort *)(iVar2 + 0x24) = (ushort)bVar1 + *(short *)(iVar2 + 0x24);
  *(undefined2 *)(iVar2 + 0x22) = *(undefined2 *)(iVar2 + 0x20);
  iVar2 = *(int *)(DAT_80019a84 + 0xc) + -1;
  *(int *)(DAT_80019a84 + 0xc) = iVar2;
  if (iVar2 != 0) {
    return;
  }
  return;
}



// WARNING: Could not reconcile some variable overlaps

void print_text(char *text)

{
  undefined2 uVar1;
  short sVar2;
  int *piVar3;
  byte bVar4;
  byte bVar5;
  byte bVar6;
  uint length;
  int iVar7;
  int iVar8;
  int iVar9;
  char *pcVar10;
  uint in_r2;
  undefined4 in_r3;
  undefined4 local_28;
  undefined4 local_24;
  
  if (text != (char *)0x0) {
    local_28 = in_r2;
    local_24 = in_r3;
    save_context();
    bVar4 = get_font_height();
    piVar3 = DAT_80018bf0;
    uVar1 = *(undefined2 *)(*DAT_80018bf0 + 0x22);
    bVar5 = get_font_baseline();
    *(ushort *)(*piVar3 + 0x24) = *(short *)(*piVar3 + 0x24) - (ushort)bVar5;
    while (*text != '\0') {
      length = get_string_length(text,DAT_80018bf4);
      iVar7 = FUN_80019e0c(text,length);
      iVar9 = *piVar3;
      bVar6 = *(byte *)(iVar9 + 0x2c) & 3;
      iVar8 = iVar7;
      if (bVar6 != 1) {
        if (bVar6 == 2) {
          iVar8 = iVar7 / 2;
        }
        else {
          iVar8 = 0;
        }
      }
      sVar2 = *(short *)(iVar9 + 0x22) - (short)iVar8;
      *(short *)(iVar9 + 0x22) = sVar2;
      local_28 = CONCAT22(*(short *)(iVar9 + 0x24),sVar2);
      local_24 = CONCAT22(*(short *)(iVar9 + 0x24) + (ushort)bVar4 + -1,sVar2 + (short)iVar7 + -1);
      draw_text(text,length,&local_28);
      *(undefined2 *)(*piVar3 + 0x24) = local_28._2_2_;
      iVar8 = FUN_80019988(text,length);
      pcVar10 = text + iVar8;
      if (*pcVar10 == '\n' || *pcVar10 == '\r') {
        iVar8 = *piVar3;
        bVar6 = *(byte *)(iVar8 + 0x2c) & 3;
        if (bVar6 == 1 || bVar6 == 2) {
          *(undefined2 *)(iVar8 + 0x22) = uVar1;
        }
        else {
          *(undefined2 *)(iVar8 + 0x22) = *(undefined2 *)(iVar8 + 0x20);
        }
        if (*pcVar10 == '\n') {
          *(ushort *)(iVar8 + 0x24) = *(short *)(iVar8 + 0x24) + (ushort)bVar4;
        }
      }
      else {
        *(short *)(*piVar3 + 0x22) = (short)local_28 + (short)iVar7;
      }
      if (*pcVar10 == '\0') break;
      text = pcVar10 + 1;
    }
    iVar8 = *piVar3;
    *(ushort *)(iVar8 + 0x24) = *(short *)(iVar8 + 0x24) + (ushort)bVar5;
    *(ushort *)(iVar8 + 0x2c) = *(ushort *)(iVar8 + 0x2c) & 0xfffc;
    restore_context();
  }
  return;
}



void display_text(char *text,ushort xpos,ushort ypos)

{
  int iVar1;
  
  save_context();
  iVar1 = *DAT_80018c2c;
  *(ushort *)(iVar1 + 0x22) = xpos;
  *(ushort *)(iVar1 + 0x24) = ypos;
  print_text(text);
  iVar1 = *(int *)(DAT_80019a84 + 0xc) + -1;
  *(int *)(DAT_80019a84 + 0xc) = iVar1;
  if (iVar1 != 0) {
    return;
  }
  return;
}



void FUN_80018c30(int param_1,int param_2,undefined4 param_3,undefined4 param_4,undefined4 param_5,
                 undefined4 param_6)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  save_context();
  iVar3 = *(int *)(*DAT_80018ca4 + 0x4c);
  iVar1 = *(int *)(*DAT_80018ca4 + 0x50);
  iVar2 = FUN_8002ac10(0,iVar3);
  while (iVar2 != 0) {
    FUN_80016c20(param_1 + iVar3,param_2 + iVar1,param_3,param_4,param_5,param_6);
    iVar2 = FUN_8002ab40();
  }
  iVar1 = *(int *)(DAT_80019a84 + 0xc) + -1;
  *(int *)(DAT_80019a84 + 0xc) = iVar1;
  if (iVar1 != 0) {
    return;
  }
  return;
}



void display_draw_horz_line(ushort ypos,ushort xstart,ushort xend)

{
  int *piVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  uint local_20;
  uint local_1c;
  
  local_20 = (uint)xend;
  save_context();
  piVar1 = DAT_80018d2c;
  iVar2 = *(int *)(*DAT_80018d2c + 0x4c);
  uVar5 = (uint)xstart + iVar2;
  uVar3 = (uint)xend + iVar2;
  iVar4 = (uint)ypos + *(int *)(*DAT_80018d2c + 0x50);
  local_20 = uVar5 & 0xffff | iVar4 * 0x10000;
  local_1c = uVar3 & 0xffff | iVar4 * 0x10000;
  iVar2 = FUN_8002ac10(&local_20);
  while (iVar2 != 0) {
    (***(code ***)(*piVar1 + 100))(uVar5,iVar4,uVar3);
    iVar2 = FUN_8002ab40();
  }
  restore_context();
  return;
}



void display_draw_line(uint xstart,uint ystart,uint xend,uint yend)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  save_context();
  iVar1 = *(int *)(*DAT_80018d9c + 0x4c);
  iVar3 = *(int *)(*DAT_80018d9c + 0x50);
  iVar2 = FUN_8002ac10(0,iVar3);
  while (iVar2 != 0) {
    FUN_80016da0(xstart + iVar1,ystart + iVar3,xend + iVar1,yend + iVar3);
    iVar2 = FUN_8002ab40();
  }
  iVar1 = *(int *)(DAT_80019a84 + 0xc) + -1;
  *(int *)(DAT_80019a84 + 0xc) = iVar1;
  if (iVar1 != 0) {
    return;
  }
  return;
}



void display_draw_rect(ushort xstart,ushort ystart,ushort xend,ushort yend)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  short sVar6;
  uint local_20;
  uint local_1c;
  
  local_20 = (uint)xend;
  local_1c = (uint)yend;
  save_context();
  iVar1 = *DAT_80018e64;
  sVar6 = *(byte *)(iVar1 + 0x18) - 1;
  iVar3 = (uint)ystart + *(int *)(iVar1 + 0x50);
  iVar4 = (uint)xstart + *(int *)(iVar1 + 0x4c);
  iVar5 = (uint)xend + *(int *)(iVar1 + 0x4c);
  iVar2 = *(int *)(iVar1 + 0x50) + (uint)yend;
  local_20 = CONCAT22((short)iVar3 - sVar6,(short)iVar4 - sVar6);
  local_1c = CONCAT22((short)iVar2 + sVar6,(short)iVar5 + sVar6);
  iVar1 = FUN_8002ac10(&local_20);
  while (iVar1 != 0) {
    FUN_8001cb24(iVar4,iVar3,iVar5);
    FUN_8001cb24(iVar4,iVar2,iVar5);
    FUN_8001cc4c(iVar4,iVar3 + 1,iVar2 + -1);
    FUN_8001cc4c(iVar5,iVar3 + 1,iVar2 + -1);
    iVar1 = FUN_8002ab40();
  }
  restore_context();
  return;
}



void display_draw_rounded_rect(ushort xstart,ushort ystart,ushort xend,ushort yend,ushort radius)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  undefined2 in_stack_00000002;
  uint local_24;
  uint local_20;
  
  local_24 = (uint)xend;
  local_20 = (uint)yend;
  save_context();
  iVar1 = *(int *)(*DAT_80018ef0 + 0x4c);
  iVar2 = *(int *)(*DAT_80018ef0 + 0x50);
  uVar5 = (uint)xstart + iVar1;
  uVar3 = (uint)xend + iVar1;
  iVar4 = (uint)ystart + iVar2;
  iVar2 = (uint)yend + iVar2;
  local_24 = uVar5 & 0xffff | iVar4 * 0x10000;
  local_20 = uVar3 & 0xffff | iVar2 * 0x10000;
  iVar1 = FUN_8002ac10(&local_24);
  while (iVar1 != 0) {
    FUN_8002ea74(uVar5,iVar4,uVar3,iVar2,_radius);
    iVar1 = FUN_8002ab40();
  }
  restore_context();
  return;
}



void display_draw_vert_line(ushort xpos,ushort ystart,ushort yend)

{
  int iVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  uint local_18;
  uint local_14;
  
  local_18 = (uint)yend;
  save_context();
  iVar1 = *(int *)(*DAT_80018f68 + 0x50);
  uVar4 = (uint)xpos + *(int *)(*DAT_80018f68 + 0x4c);
  iVar3 = (uint)ystart + iVar1;
  iVar1 = (uint)yend + iVar1;
  local_18 = uVar4 & 0xffff | iVar3 * 0x10000;
  local_14 = uVar4 & 0xffff | iVar1 * 0x10000;
  iVar2 = FUN_8002ac10(&local_18);
  while (iVar2 != 0) {
    FUN_8001cc4c(uVar4,iVar3,iVar1);
    iVar2 = FUN_8002ab40();
  }
  restore_context();
  return;
}



void display_fill_rect(ushort xstart,ushort ystart,ushort xend,ushort yend)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  uint local_20;
  uint local_1c;
  
  local_20 = (uint)xend;
  local_1c = (uint)yend;
  save_context();
  iVar1 = *(int *)(*DAT_80018fec + 0x4c);
  iVar2 = *(int *)(*DAT_80018fec + 0x50);
  uVar5 = (uint)xstart + iVar1;
  uVar3 = (uint)xend + iVar1;
  iVar4 = (uint)ystart + iVar2;
  iVar2 = (uint)yend + iVar2;
  local_20 = uVar5 & 0xffff | iVar4 * 0x10000;
  local_1c = uVar3 & 0xffff | iVar2 * 0x10000;
  iVar1 = FUN_8002ac10(&local_20);
  while (iVar1 != 0) {
    FUN_8001cd50(uVar5,iVar4,uVar3,iVar2);
    iVar1 = FUN_8002ab40();
  }
  restore_context();
  return;
}



void display_fill_rounded_rect(ushort xstart,ushort ystart,ushort xend,ushort yend,ushort radius)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  bool bVar9;
  bool bVar10;
  undefined2 in_stack_00000002;
  undefined2 local_38;
  undefined2 local_36;
  undefined2 local_34;
  undefined2 local_32;
  int local_30;
  int local_2c;
  
  save_context();
  iVar8 = *(int *)(*DAT_8001911c + 0x4c);
  iVar1 = *(int *)(*DAT_8001911c + 0x50);
  iVar5 = iVar8 + (uint)xstart;
  iVar7 = iVar1 + (uint)ystart;
  iVar8 = iVar8 + (uint)xend;
  iVar1 = iVar1 + (uint)yend;
  local_38 = (undefined2)iVar5;
  local_34 = (undefined2)iVar8;
  local_36 = (undefined2)iVar7;
  local_32 = (undefined2)iVar1;
  iVar2 = FUN_8002ac10(&local_38);
  if (iVar2 != 0) {
    local_2c = (iVar1 - iVar7) + 1;
    do {
      bVar10 = SBORROW4(local_2c,_radius * 2);
      bVar9 = local_2c + _radius * -2 < 0;
      if (bVar9 == bVar10) {
        iVar2 = (iVar8 - iVar5) + 1;
        bVar10 = SBORROW4(iVar2,_radius * 2);
        bVar9 = iVar2 + _radius * -2 < 0;
      }
      if (bVar9 == bVar10) {
        local_30 = _radius * _radius;
        iVar2 = iVar7;
        iVar6 = _radius;
        while (iVar2 <= iVar7 + _radius) {
          iVar3 = FUN_8001a320(local_30 - iVar6 * iVar6);
          iVar4 = (iVar5 + _radius) - iVar3;
          iVar3 = iVar3 + (iVar8 - _radius);
          FUN_8001cb24(iVar4,iVar2,iVar3);
          FUN_8001cb24(iVar4,iVar1 - (iVar2 - iVar7),iVar3);
          iVar2 = iVar2 + 1;
          iVar6 = iVar6 + -1;
        }
        FUN_8001cd50(iVar5,iVar2,iVar8,(iVar1 - _radius) + -1);
      }
      iVar2 = FUN_8002ab40();
    } while (iVar2 != 0);
  }
  restore_context();
  return;
}



void FUN_80019120(int param_1)

{
  int iVar1;
  
  iVar1 = *(int *)(DAT_80019138 + param_1 * 4);
                    // WARNING: Could not recover jumptable at 0x80019134. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(int *)(iVar1 + 0xc) + 0x28))(iVar1,8);
  return;
}



undefined4 FUN_8001913c(void)

{
  undefined4 uVar1;
  
  save_context();
  FUN_8001ce50();
  uVar1 = FUN_8001cfbc();
  restore_context();
  return uVar1;
}



uint get_char_width(uint char)

{
  uint uVar1;
  
  save_context();
  uVar1 = (**(code **)(*(int *)(*DAT_800191a0 + 0x1c) + 4))(char,0);
  restore_context();
  return uVar1;
}



undefined4 FUN_800191a4(undefined4 param_1,undefined4 param_2)

{
  undefined4 uVar1;
  
  save_context();
  uVar1 = (**(code **)(*(int *)(*DAT_800191e8 + 0x1c) + 4))(param_1,param_2);
  restore_context();
  return uVar1;
}



undefined4 FUN_800191ec(void)

{
  undefined4 uVar1;
  
  save_context();
  FUN_8001ce68();
  uVar1 = FUN_8001cfbc();
  restore_context();
  return uVar1;
}



uchar get_font_height(void)

{
  uchar uVar1;
  
  save_context();
  uVar1 = *(uchar *)(*(int *)(*DAT_80019238 + 0x1c) + 0x19);
  restore_context();
  return uVar1;
}



undefined4 FUN_8001923c(void)

{
  undefined4 uVar1;
  
  save_context();
  uVar1 = FUN_80019dec();
  restore_context();
  return uVar1;
}



uchar get_font_baseline(void)

{
  int iVar1;
  byte bVar2;
  byte bVar3;
  
  bVar3 = 0;
  save_context();
  iVar1 = *DAT_800192b0;
  bVar2 = *(byte *)(iVar1 + 0x2c) & 0xc;
  if (bVar2 == 4) {
    bVar3 = *(char *)(*(int *)(iVar1 + 0x1c) + 0x18) - 1;
  }
  else {
    if (bVar2 == 8 || bVar2 == 0xc) {
      bVar3 = *(byte *)(*(int *)(iVar1 + 0x1c) + 0x18) >> 1;
    }
  }
  restore_context();
  return (uchar)bVar3;
}



undefined4 FUN_800192b4(int param_1)

{
  return **(undefined4 **)(*(int *)(DAT_800192c8 + param_1 * 4) + 0x10);
}



undefined4 FUN_800192cc(int param_1)

{
  return *(undefined4 *)(*(int *)(*(int *)(DAT_800192e0 + param_1 * 4) + 0x10) + 4);
}



uint FUN_800192e4(undefined4 param_1,undefined4 param_2)

{
  uint uVar1;
  uint uVar2;
  
  save_context();
  uVar1 = FUN_8002f984(param_1);
  uVar2 = FUN_8002f99c(param_2);
  restore_context();
  return uVar1 | uVar2;
}



int setup_display_lib(void)

{
  int iVar1;
  
  FUN_80019c78();
  *DAT_80019364 = 0x2e;
  empty_func_1();
  FUN_8002faa8(DAT_80019368);
  iVar1 = FUN_8001d018();
  FUN_80019764(0);
  FUN_8002a65c();
  FUN_8001827c();
  return iVar1;
}



//                    FUNCTION
// probably not a correct name, but since it is
// used at the start of a lot of the drawing functions
// it seems approriate

void save_context(void)

{
  int *piVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  
  piVar1 = DAT_80019410;
  if (DAT_80019410[3] != 0) {
    iVar2 = FUN_80019ab8();
    if (iVar2 == piVar1[1]) goto LAB_8001939c;
  }
  empty_func_3();
  iVar2 = FUN_80019ab8();
  piVar1[1] = iVar2;
LAB_8001939c:
  iVar2 = piVar1[3];
  piVar1[3] = iVar2 + 1;
  if (iVar2 + 1 == 1) {
    iVar2 = FUN_8002f92c();
    if (iVar2 != *piVar1) {
      if (-1 < *piVar1) {
        uVar3 = FUN_80018964();
        iVar4 = piVar1[4];
        *(undefined4 *)(iVar4 + *piVar1 * 0x78 + 0x74) = uVar3;
        iVar4 = iVar4 + iVar2 * 0x78;
        *DAT_80019414 = iVar4 + 4;
        FUN_8001893c(*(undefined4 *)(iVar4 + 0x74));
      }
      *piVar1 = iVar2;
    }
  }
  return;
}



void FUN_80019418(int param_1,undefined4 param_2,undefined4 param_3,undefined4 *param_4)

{
  undefined4 *local_10;
  
  if (param_1 != 0) {
    local_10 = param_4;
    save_context();
    if (*(int *)(*DAT_8001947c + 0x60) == param_1) {
      FUN_80019670();
    }
    local_10 = (undefined4 *)FUN_8001857c(param_1);
    if (local_10[5] != 0) {
      FUN_80019a20();
    }
    thunk_FUN_8001843c(*local_10);
    FUN_800185cc(&local_10);
    FUN_800183e8(param_1);
    restore_context();
  }
  return;
}



undefined4 FUN_80019480(int param_1,undefined4 param_2,undefined4 param_3,int *param_4)

{
  undefined4 uVar1;
  int *local_10;
  
  uVar1 = 0;
  if (param_1 != 0) {
    local_10 = param_4;
    save_context();
    local_10 = (int *)FUN_8001857c(param_1);
    (**(code **)(*(int *)(*local_10 + 0x10) + 8))();
    uVar1 = some_main_scope_handling_1();
    FUN_800185cc(&local_10);
    restore_context();
  }
  return uVar1;
}



int FUN_800194d4(int param_1,undefined4 param_2,undefined4 param_3,int param_4)

{
  int local_10;
  
  if (param_1 != 0) {
    local_10 = param_4;
    save_context();
    local_10 = FUN_8001857c(param_1);
    param_1 = local_10 + 0x18;
    FUN_800185cc(&local_10);
    restore_context();
  }
  return param_1;
}



void FUN_8001950c(int param_1,undefined4 param_2,undefined4 param_3,int param_4)

{
  int iVar1;
  int iVar2;
  int local_18;
  
  if (param_1 != 0) {
    local_18 = param_4;
    local_18 = FUN_8001857c();
    iVar2 = *(int *)(local_18 + 0x14);
    FUN_800185cc(&local_18);
    iVar1 = FUN_80019480(param_1);
    if ((iVar1 < 9) || (iVar2 != 0)) {
      FUN_80030740(param_1,param_2,param_3);
    }
    else {
      FUN_80030cc8(param_1,param_2,param_3,iVar1);
    }
  }
  return;
}



longlong FUN_8001957c(uint *param_1,uint *param_2,uint *param_3)

{
  uint *puVar1;
  uint *puVar2;
  uint *puVar3;
  byte *pbVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  byte bVar8;
  short sVar9;
  byte bVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  bool bVar15;
  bool bVar16;
  
  if (param_1 == (uint *)0x0) {
    return ZEXT48(param_2) << 0x20;
  }
  puVar3 = param_3;
  if (param_2 != (uint *)0x0) {
    puVar3 = param_2;
  }
  if (param_2 != (uint *)0x0 && param_3 != (uint *)0x0) {
    sVar9 = *(short *)puVar3;
    if (*(short *)param_3 <= *(short *)puVar3) {
      sVar9 = *(short *)param_3;
    }
    *(short *)param_1 = sVar9;
    sVar9 = *(short *)((int)param_3 + 2);
    if (*(short *)((int)puVar3 + 2) < *(short *)((int)param_3 + 2)) {
      sVar9 = *(short *)((int)puVar3 + 2);
    }
    *(short *)((int)param_1 + 2) = sVar9;
    sVar9 = *(short *)(param_3 + 1);
    if (*(short *)(param_3 + 1) < *(short *)(puVar3 + 1)) {
      sVar9 = *(short *)(puVar3 + 1);
    }
    *(short *)(param_1 + 1) = sVar9;
    iVar5 = (int)*(short *)((int)puVar3 + 6);
    if ((int)*(short *)((int)puVar3 + 6) <= (int)*(short *)((int)param_3 + 6)) {
      iVar5 = (int)*(short *)((int)param_3 + 6);
    }
    *(short *)((int)param_1 + 6) = (short)iVar5;
    return CONCAT44(iVar5,param_1);
  }
  uVar7 = 8;
  uVar11 = (uint)param_1 & 3;
  uVar12 = uVar11;
  if (uVar11 != 0) {
    bVar8 = *(byte *)puVar3;
    puVar2 = (uint *)((int)puVar3 + 1);
    if (uVar11 < 3) {
      puVar2 = (uint *)((int)puVar3 + 2);
      uVar12 = (uint)*(byte *)(uint *)((int)puVar3 + 1);
    }
    *(byte *)param_1 = bVar8;
    puVar3 = puVar2;
    if (uVar11 < 2) {
      puVar3 = (uint *)((int)puVar2 + 1);
      bVar8 = *(byte *)puVar2;
    }
    puVar2 = (uint *)((int)param_1 + 1);
    if (uVar11 < 3) {
      puVar2 = (uint *)((int)param_1 + 2);
      *(byte *)(uint *)((int)param_1 + 1) = (byte)uVar12;
    }
    uVar7 = uVar11 + 4;
    param_1 = puVar2;
    if (uVar11 < 2) {
      param_1 = (uint *)((int)puVar2 + 1);
      *(byte *)puVar2 = bVar8;
    }
  }
  uVar11 = (uint)puVar3 & 3;
  if (uVar11 != 0) {
    uVar6 = uVar7 - 4;
    if (3 < uVar7) {
      puVar3 = (uint *)((int)puVar3 - uVar11);
      uVar12 = *puVar3;
      puVar2 = param_1;
      if (uVar11 == 2) {
        do {
          puVar1 = puVar3;
          uVar11 = uVar12 >> 0x10;
          puVar3 = puVar1 + 1;
          uVar12 = *puVar3;
          bVar15 = 3 < uVar6;
          uVar6 = uVar6 - 4;
          uVar11 = uVar11 | uVar12 << 0x10;
          param_1 = puVar2 + 1;
          *puVar2 = uVar11;
          puVar2 = param_1;
        } while (bVar15);
        puVar3 = (uint *)((int)puVar1 + 6);
      }
      else {
        if (uVar11 < 3) {
          do {
            puVar1 = puVar3;
            uVar11 = uVar12 >> 8;
            puVar3 = puVar1 + 1;
            uVar12 = *puVar3;
            bVar15 = 3 < uVar6;
            uVar6 = uVar6 - 4;
            uVar11 = uVar11 | uVar12 << 0x18;
            param_1 = puVar2 + 1;
            *puVar2 = uVar11;
            puVar2 = param_1;
          } while (bVar15);
          puVar3 = (uint *)((int)puVar1 + 5);
        }
        else {
          do {
            puVar1 = puVar3;
            uVar11 = uVar12 >> 0x18;
            puVar3 = puVar1 + 1;
            uVar12 = *puVar3;
            bVar15 = 3 < uVar6;
            uVar6 = uVar6 - 4;
            uVar11 = uVar11 | uVar12 << 8;
            param_1 = puVar2 + 1;
            *puVar2 = uVar11;
            puVar2 = param_1;
          } while (bVar15);
          puVar3 = (uint *)((int)puVar1 + 7);
        }
      }
    }
    bVar10 = (byte)uVar12;
    bVar8 = (byte)uVar11;
    bVar16 = (bool)((byte)(uVar6 >> 1) & 1);
    uVar6 = uVar6 << 0x1f;
    bVar15 = (int)uVar6 < 0;
    if (bVar16) {
      pbVar4 = (byte *)((int)puVar3 + 1);
      bVar8 = *(byte *)puVar3;
      puVar3 = (uint *)((int)puVar3 + 2);
      bVar10 = *pbVar4;
    }
    puVar2 = puVar3;
    if (bVar15) {
      puVar2 = (uint *)((int)puVar3 + 1);
      uVar6 = (uint)*(byte *)puVar3;
    }
    if (bVar16) {
      pbVar4 = (byte *)((int)param_1 + 1);
      *(byte *)param_1 = bVar8;
      param_1 = (uint *)((int)param_1 + 2);
      *pbVar4 = bVar10;
    }
    puVar3 = param_1;
    if (bVar15) {
      puVar3 = (uint *)((int)param_1 + 1);
      *(byte *)param_1 = (byte)uVar6;
    }
    return CONCAT44(puVar2,puVar3);
  }
  while (uVar12 = uVar7 - 0x20, 0x1f < uVar7) {
    uVar7 = puVar3[1];
    uVar11 = puVar3[2];
    uVar6 = puVar3[3];
    *param_1 = *puVar3;
    param_1[1] = uVar7;
    param_1[2] = uVar11;
    param_1[3] = uVar6;
    uVar11 = puVar3[4];
    uVar7 = puVar3[5];
    uVar6 = puVar3[6];
    uVar13 = puVar3[7];
    puVar3 = puVar3 + 8;
    param_1[4] = uVar11;
    param_1[5] = uVar7;
    param_1[6] = uVar6;
    param_1[7] = uVar13;
    param_1 = param_1 + 8;
    uVar7 = uVar12;
  }
  if ((bool)((byte)(uVar12 >> 4) & 1)) {
    uVar11 = *puVar3;
    uVar6 = puVar3[1];
    uVar13 = puVar3[2];
    uVar14 = puVar3[3];
    puVar3 = puVar3 + 4;
    *param_1 = uVar11;
    param_1[1] = uVar6;
    param_1[2] = uVar13;
    param_1[3] = uVar14;
    param_1 = param_1 + 4;
  }
  if ((int)(uVar7 << 0x1c) < 0) {
    uVar11 = *puVar3;
    uVar6 = puVar3[1];
    puVar3 = puVar3 + 2;
    *param_1 = uVar11;
    param_1[1] = uVar6;
    param_1 = param_1 + 2;
  }
  puVar1 = param_1;
  puVar2 = puVar3;
  if ((bool)((byte)(uVar12 >> 2) & 1)) {
    puVar2 = puVar3 + 1;
    uVar11 = *puVar3;
    puVar1 = param_1 + 1;
    *param_1 = uVar11;
  }
  sVar9 = (short)uVar11;
  if ((uVar12 & 3) != 0) {
    bVar16 = (bool)((byte)(uVar12 >> 1) & 1);
    uVar7 = uVar7 << 0x1f;
    bVar15 = (int)uVar7 < 0;
    puVar3 = puVar2;
    if (bVar16) {
      puVar3 = (uint *)((int)puVar2 + 2);
      sVar9 = *(short *)puVar2;
    }
    puVar2 = puVar3;
    if (bVar15) {
      puVar2 = (uint *)((int)puVar3 + 1);
      uVar7 = (uint)*(byte *)puVar3;
    }
    puVar3 = puVar1;
    if (bVar16) {
      puVar3 = (uint *)((int)puVar1 + 2);
      *(short *)puVar1 = sVar9;
    }
    puVar1 = puVar3;
    if (bVar15) {
      puVar1 = (uint *)((int)puVar3 + 1);
      *(byte *)puVar3 = (byte)uVar7;
    }
    return CONCAT44(puVar2,puVar1);
  }
  return CONCAT44(puVar2,puVar1);
}



short * FUN_8001962c(short *param_1,short *param_2)

{
  short *psVar1;
  short *psVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  bool bVar6;
  bool bVar7;
  
  iVar3 = (int)param_1[1];
  iVar5 = (int)param_2[3];
  bVar7 = SBORROW4(iVar3,iVar5);
  iVar4 = iVar3 - iVar5;
  bVar6 = iVar3 == iVar5;
  if (iVar3 <= iVar5) {
    iVar3 = (int)param_2[1];
    iVar5 = (int)param_1[3];
    bVar7 = SBORROW4(iVar3,iVar5);
    iVar4 = iVar3 - iVar5;
    bVar6 = iVar3 == iVar5;
  }
  if (bVar6 || iVar4 < 0 != bVar7) {
    iVar4 = (int)*param_1;
    iVar3 = (int)param_2[2];
    bVar7 = SBORROW4(iVar4,iVar3);
    psVar1 = (short *)(iVar4 - iVar3);
    bVar6 = iVar4 == iVar3;
    if (iVar4 <= iVar3) {
      psVar2 = (short *)(int)*param_2;
      param_1 = (short *)(int)param_1[2];
      bVar7 = SBORROW4((int)psVar2,(int)param_1);
      psVar1 = (short *)((int)psVar2 - (int)param_1);
      bVar6 = psVar2 == param_1;
    }
    if (bVar6 || (int)psVar1 < 0 != bVar7) {
      param_1 = (short *)0x1;
    }
    if (bVar6 || (int)psVar1 < 0 != bVar7) {
      return param_1;
    }
  }
  return (short *)0x0;
}



void FUN_80019670(void)

{
  int iVar1;
  
  save_context();
  FUN_8001d2dc();
  FUN_8001d630();
  FUN_8002a2ac();
  iVar1 = *(int *)(DAT_80019a84 + 0xc) + -1;
  *(int *)(DAT_80019a84 + 0xc) = iVar1;
  if (iVar1 != 0) {
    return;
  }
  return;
}



undefined FUN_8001968c(uint param_1)

{
  undefined uVar1;
  int *piVar2;
  int iVar3;
  
  piVar2 = DAT_800196e0;
  uVar1 = *(undefined *)(*DAT_800196e0 + 0x11);
  save_context();
  if ((param_1 < 2) && (iVar3 = FUN_800189d0(param_1), iVar3 != 0)) {
    *(char *)(*piVar2 + 0x11) = (char)param_1;
    FUN_80019670();
    *DAT_800196e4 = param_1;
  }
  restore_context();
  return uVar1;
}



void set_display_fg2_color(uint color)

{
  int iVar1;
  
  save_context();
  set_fg2_color(color);
  iVar1 = *(int *)(DAT_80019a84 + 0xc) + -1;
  *(int *)(DAT_80019a84 + 0xc) = iVar1;
  if (iVar1 != 0) {
    return;
  }
  return;
}



void set_display_fg_color(uint color)

{
  int iVar1;
  
  save_context();
  set_fg_color(color);
  iVar1 = *(int *)(DAT_80019a84 + 0xc) + -1;
  *(int *)(DAT_80019a84 + 0xc) = iVar1;
  if (iVar1 != 0) {
    return;
  }
  return;
}



void FUN_80019720(undefined4 param_1)

{
  *(undefined4 *)(DAT_8001972c + 8) = param_1;
  return;
}



void * select_font(void *fontptr)

{
  void *pvVar1;
  
  save_context();
  pvVar1 = *(void **)(*DAT_80019760 + 0x1c);
  if (fontptr != (void *)0x0) {
    *(void **)(*DAT_80019760 + 0x1c) = fontptr;
  }
  restore_context();
  return pvVar1;
}



void FUN_80019764(undefined4 param_1,undefined4 param_2)

{
  int iVar1;
  
  save_context();
  *DAT_800197b8 = (short)param_1;
  *DAT_800197bc = (short)param_2;
  iVar1 = *(int *)(DAT_800197c4 + (uint)*(byte *)(*DAT_800197c0 + 0x11) * 4);
  (**(code **)(*(int *)(iVar1 + 0xc) + 0x20))(iVar1,param_1,param_2);
  iVar1 = *(int *)(DAT_80019a84 + 0xc) + -1;
  *(int *)(DAT_80019a84 + 0xc) = iVar1;
  if (iVar1 != 0) {
    return;
  }
  return;
}



//                      FUNCTION
// 0x00 paint character with foreground color and background with background color
// 0x02 paint character with background color
// 0x01 and 0x03 get a value through a function pointer and use that to exor the current pixel data
// in the buffer if a font dot is on

short set_font_paint_mode(short mode)

{
  short sVar1;
  
  save_context();
  sVar1 = *(short *)(*DAT_800197f4 + 0x2a);
  *(short *)(*DAT_800197f4 + 0x2a) = mode;
  restore_context();
  return sVar1;
}



void FUN_800197f8(void)

{
  if (*DAT_8001980c == (code *)0x0) {
    return;
  }
                    // WARNING: Could not recover jumptable at 0x80019808. Too many branches
                    // WARNING: Treating indirect jump as call
  (**DAT_8001980c)();
  return;
}



undefined4 FUN_80019828(int param_1,int param_2,int param_3,int param_4,int param_5)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  int iVar4;
  undefined4 uVar5;
  
  piVar2 = DAT_8001991c;
  iVar1 = DAT_80019918;
  if ((*(byte *)(DAT_80019918 + 0x18) & 4) == 0) {
    iVar3 = FUN_8001cf2c(*(undefined *)(*DAT_8001991c + 0x11));
    iVar4 = FUN_8001cf34(*(undefined *)(*piVar2 + 0x11));
  }
  else {
    iVar3 = FUN_8001cf34();
    iVar4 = FUN_8001cf2c(*(undefined *)(*piVar2 + 0x11));
  }
  if (param_1 != 0) {
    iVar3 = iVar4;
  }
  iVar4 = param_4 - param_5;
  if (iVar4 < 0) {
    iVar4 = -iVar4;
  }
  if (0x13 < iVar4) {
    iVar4 = param_2 - param_3;
    if (iVar4 < 0) {
      iVar4 = -iVar4;
    }
    if (0x13 < iVar4) {
      uVar5 = FUN_8002fd3c(0,param_2,param_3,param_4,param_5);
      iVar4 = DAT_80019920;
      *(undefined4 *)(DAT_80019920 + param_1 * 8) = uVar5;
      uVar5 = FUN_8002fd3c(iVar3 + -1,param_2,param_3,param_4,param_5);
      *(undefined4 *)(iVar4 + param_1 * 8 + 4) = uVar5;
      FUN_800302b8();
      *(undefined4 *)(iVar1 + 0x1c) = 1;
      return 0;
    }
  }
  return 1;
}



void FUN_80019924(undefined4 param_1)

{
  *(undefined4 *)(DAT_80019930 + 0x18) = param_1;
  return;
}



uint get_char_from_string(uint **ptr)

{
  code **ppcVar1;
  uint uVar2;
  int iVar3;
  uint *puVar4;
  
  ppcVar1 = DAT_80019984;
  puVar4 = *ptr;
  uVar2 = (**(code **)*DAT_80019984)(puVar4);
  iVar3 = (**(code **)(*ppcVar1 + 4))(puVar4);
  *ptr = (uint *)(iVar3 + (int)puVar4);
  return uVar2;
}



int FUN_80019988(int param_1,int param_2)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  bool bVar4;
  
  piVar1 = DAT_800199d0;
  iVar3 = 0;
  while (bVar4 = param_2 != 0, param_2 = param_2 + -1, bVar4) {
    iVar2 = (**(code **)(*piVar1 + 4))(param_1);
    param_1 = param_1 + iVar2;
    iVar3 = iVar3 + iVar2;
  }
  return iVar3;
}



void FUN_800199d4(int param_1,undefined4 param_2,int param_3,undefined4 param_4,int param_5)

{
  do {
    (**(code **)(*(int *)(param_1 + 8) + 4))(param_1,param_2,param_3,param_4);
    param_5 = param_5 + -1;
    param_3 = param_3 + 1;
  } while (param_5 != 0);
  return;
}



void FUN_80019a20(undefined4 param_1,undefined4 param_2,undefined4 param_3,int param_4)

{
  int iVar1;
  int local_10;
  
  local_10 = param_4;
  save_context();
  local_10 = FUN_8001857c(param_1);
  iVar1 = (*(ushort *)(local_10 + 0xc) - 1) * 0x10000;
  *(short *)(local_10 + 0xc) = (short)((uint)iVar1 >> 0x10);
  FUN_800185cc(&local_10);
  if (iVar1 >> 0x10 == 0) {
    FUN_800183e8();
  }
  restore_context();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked
//                    FUNCTION
// probably not a correct name, but since it is
// used at the end of a lot of the drawing functions
// it seems approriate

void restore_context(void)

{
  int iVar1;
  
  iVar1 = *(int *)(DAT_80019a84 + 0xc) + -1;
  *(int *)(DAT_80019a84 + 0xc) = iVar1;
  if (iVar1 != 0) {
    return;
  }
  return;
}



void FUN_80019a88(void)

{
  FUN_800183d0(DAT_80019aac,0x19000);
  FUN_800185a4(0x80);
  *(undefined **)(DAT_8001972c + 8) = PTR_FONT_8_80019ab0;
  return;
}



undefined4 FUN_80019ab8(void)

{
  return 0;
}



void empty_func_1(void)

{
  return;
}



void empty_func_2(void)

{
  return;
}



void empty_func_3(void)

{
  return;
}



void empty_func_4(void)

{
  return;
}



void FUN_80019c78(void)

{
  undefined4 *puVar1;
  int iVar2;
  
  if (*(int *)(DAT_80019cc0 + 0x18) == 0) {
    *(undefined4 *)(DAT_80019cc0 + 0x18) = 1;
    FUN_80019a88();
    FUN_800182fc();
    FUN_8001d660();
    puVar1 = DAT_80019cc8;
    *DAT_80019cc8 = PTR_FUN_80019cc4;
    iVar2 = DAT_8001a1b0;
    puVar1[1] = *(undefined4 *)(DAT_8001a1b0 + 0x14);
    *(undefined4 **)(iVar2 + 0x14) = puVar1;
    return;
  }
  return;
}



int FUN_80019ccc(int param_1)

{
  int iVar1;
  int extraout_r1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  param_1 = param_1 + 90000;
  if (param_1 < 0) {
    iVar4 = -1;
    param_1 = -param_1;
  }
  else {
    iVar4 = 1;
  }
  divide_2(param_1,DAT_8001a248);
  iVar2 = extraout_r1;
  if (DAT_8001a24c < extraout_r1) {
    iVar2 = extraout_r1 - DAT_8001a24c;
    iVar4 = -iVar4;
  }
  if (DAT_8001a250 < iVar2) {
    iVar2 = DAT_8001a24c - iVar2;
  }
  iVar1 = divide_2(iVar2,1000);
  if (iVar1 < 0x5a) {
    iVar3 = *(int *)(PTR_DAT_8001a254 + iVar1 * 4);
    iVar2 = divide((iVar2 + iVar1 * -1000) * (*(int *)(PTR_DAT_8001a254 + iVar1 * 4 + 4) - iVar3),
                   1000);
    iVar2 = iVar2 + iVar3;
  }
  else {
    iVar2 = 0x10000;
  }
  if (iVar4 < 1) {
    iVar2 = -iVar2;
  }
  return iVar2;
}



// WARNING: Could not reconcile some variable overlaps

void draw_text(char *text,int length,uint *position)

{
  int *piVar1;
  int iVar2;
  undefined4 in_r3;
  undefined4 local_18;
  undefined4 local_14;
  
  local_18 = position;
  if (*DAT_80019de4 == 0) {
    local_14 = in_r3;
    memcpy(&local_18,position,8);
    piVar1 = DAT_80019de8;
    iVar2 = *DAT_80019de8;
    local_18 = (uint *)CONCAT22((short)((uint)local_18 >> 0x10) + *(short *)(iVar2 + 0x50),
                                (short)local_18 + *(short *)(iVar2 + 0x4c));
    local_14 = CONCAT22((short)((uint)local_14 >> 0x10) + *(short *)(iVar2 + 0x50),
                        (short)local_14 + *(short *)(iVar2 + 0x4c));
    iVar2 = FUN_8002ac10(&local_18);
    while (iVar2 != 0) {
      iVar2 = *piVar1;
      *(short *)(iVar2 + 0x22) = (short)local_18;
      *(undefined2 *)(iVar2 + 0x24) = local_18._2_2_;
      render_string(text,length,&local_18);
      iVar2 = FUN_8002ab40();
    }
    iVar2 = *piVar1;
    *(short *)(iVar2 + 0x22) = *(short *)(iVar2 + 0x22) - *(short *)(iVar2 + 0x4c);
    *(short *)(iVar2 + 0x24) = *(short *)(iVar2 + 0x24) - *(short *)(iVar2 + 0x50);
  }
  else {
    iVar2 = FUN_8002ac10(0);
    while (iVar2 != 0) {
      render_string(text,length,&local_18);
      iVar2 = FUN_8002ab40();
    }
  }
  return;
}



int FUN_80019dec(void)

{
  return (uint)*(byte *)(*(int *)(*DAT_80019e08 + 0x1c) + 0x18) *
         (uint)*(byte *)(*(int *)(*DAT_80019e08 + 0x1c) + 0x1b);
}



int FUN_80019e0c(uint *param_1,int param_2)

{
  uint uVar1;
  int iVar2;
  code **ppcVar3;
  code *pcVar4;
  int iVar5;
  uint char;
  uint *local_18;
  int local_14;
  
  pcVar4 = *DAT_80019ea8;
  local_18 = param_1;
  local_14 = param_2;
  local_18 = (uint *)(*pcVar4)(param_1,&local_14);
  iVar5 = 0;
  if (local_18 != (uint *)0x0) {
    char = 0;
    ppcVar3 = *(code ***)(*(int *)(*DAT_80019eac + 0x1c) + 0x14);
    if (ppcVar3 != (code **)0x0) {
      pcVar4 = *ppcVar3;
    }
    if (ppcVar3 != (code **)0x0 && pcVar4 != (code *)0x0) {
      iVar5 = (*pcVar4)(local_18,local_14);
    }
    else {
      while (local_14 = local_14 + -1, -1 < local_14) {
        char = get_char_from_string(&local_18);
        uVar1 = get_char_width(char);
        iVar5 = iVar5 + uVar1;
      }
      iVar2 = FUN_80019f28(char);
      iVar5 = iVar5 + iVar2;
    }
  }
  return iVar5;
}



uint get_string_length(char *text,uint max_length)

{
  uint uVar1;
  int iVar2;
  code *in_r2;
  uint uVar3;
  uint *local_18;
  uint uStack20;
  
  uVar3 = 0;
  if (text != (char *)0x0) {
    iVar2 = *(int *)(*(int *)(*DAT_80019f24 + 0x1c) + 0x14);
    if (iVar2 != 0) {
      in_r2 = *(code **)(iVar2 + 4);
    }
    local_18 = (uint *)text;
    uStack20 = max_length;
    if (iVar2 != 0 && in_r2 != (code *)0x0) {
      uVar3 = (*in_r2)(text,max_length);
    }
    else {
      while (((int)uVar3 < (int)max_length &&
             (uVar1 = get_char_from_string(&local_18), uVar1 != 0 && uVar1 != 10))) {
        uVar3 = uVar3 + 1;
      }
    }
  }
  return uVar3;
}



int FUN_80019f28(undefined4 param_1)

{
  int iVar1;
  int iVar2;
  int local_10;
  
  iVar2 = 0;
  local_10 = 0;
  iVar1 = FUN_800191a4(param_1,&local_10);
  if (iVar1 < local_10) {
    iVar2 = local_10 - iVar1;
  }
  return iVar2;
}



void FUN_80019f54(short *param_1,short *param_2)

{
  if (*param_1 < *param_2) {
    *param_1 = *param_2;
  }
  if (param_1[1] < param_2[1]) {
    param_1[1] = param_2[1];
  }
  if (param_2[2] < param_1[2]) {
    param_1[2] = param_2[2];
  }
  if (param_2[3] < param_1[3]) {
    param_1[3] = param_2[3];
  }
  return;
}



bool FUN_80019f98(undefined2 *param_1,short *param_2,short *param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  bool bVar6;
  
  iVar3 = (int)*param_3;
  if ((int)*param_3 < (int)*param_2) {
    iVar3 = (int)*param_2;
  }
  *param_1 = (short)iVar3;
  iVar5 = (int)param_3[1];
  if ((int)param_3[1] < (int)param_2[1]) {
    iVar5 = (int)param_2[1];
  }
  param_1[1] = (short)iVar5;
  iVar4 = (int)param_3[2];
  if ((int)param_2[2] < (int)param_3[2]) {
    iVar4 = (int)param_2[2];
  }
  param_1[2] = (short)iVar4;
  iVar2 = (int)param_2[3];
  if ((int)param_3[3] <= (int)param_2[3]) {
    iVar2 = (int)param_3[3];
  }
  bVar6 = SBORROW4(iVar4,iVar3);
  iVar1 = iVar4 - iVar3;
  param_1[3] = (short)iVar2;
  if (iVar3 <= iVar4) {
    bVar6 = SBORROW4(iVar2,iVar5);
    iVar1 = iVar2 - iVar5;
  }
  return iVar1 < 0 == bVar6;
}



undefined4 FUN_8001a004(int param_1,undefined4 param_2,undefined4 param_3,int param_4)

{
  code **ppcVar1;
  uint uVar2;
  code *pcVar3;
  code *UNRECOVERED_JUMPTABLE_00;
  code **ppcVar4;
  undefined4 uVar5;
  int local_20;
  
  ppcVar1 = DAT_8001a198;
  uVar2 = (uint)*(byte *)(*DAT_8001a018 + 0x11);
  uVar5 = 1;
  if (uVar2 < 2) {
    ppcVar4 = DAT_8001a198 + 1;
    local_20 = param_4;
    if (param_1 == 0) {
      if (((ppcVar4[uVar2] == (code *)0x1) && (local_20 = FUN_800189d0(uVar2), local_20 != 0)) &&
         (pcVar3 = (code *)(**(code **)(*(int *)(local_20 + 0xc) + 0x24))(&local_20,0xd),
         pcVar3 != (code *)0x0)) {
        UNRECOVERED_JUMPTABLE_00 = *ppcVar1;
        if (UNRECOVERED_JUMPTABLE_00 != (code *)0x0) {
                    // WARNING: Could not recover jumptable at 0x8001a168. Too many branches
                    // WARNING: Treating indirect jump as call
          uVar5 = (*UNRECOVERED_JUMPTABLE_00)();
          return uVar5;
        }
        (*pcVar3)(local_20,0);
        uVar5 = 0;
      }
      pcVar3 = ppcVar4[uVar2] + -(uint)(ppcVar4[uVar2] != (code *)0x0);
    }
    else {
      if (param_1 != 1) {
        if (param_1 != 2) {
          return 1;
        }
        local_20 = FUN_800189d0();
        if (local_20 == 0) {
          return 1;
        }
        pcVar3 = (code *)(**(code **)(*(int *)(local_20 + 0xc) + 0x24))(&local_20,0xd);
        if (pcVar3 == (code *)0x0) {
          return 1;
        }
        UNRECOVERED_JUMPTABLE_00 = *ppcVar1;
        if (UNRECOVERED_JUMPTABLE_00 == (code *)0x0) {
          (*pcVar3)(local_20,2);
          return 0;
        }
                    // WARNING: Could not recover jumptable at 0x8001a100. Too many branches
                    // WARNING: Treating indirect jump as call
        uVar5 = (*UNRECOVERED_JUMPTABLE_00)();
        return uVar5;
      }
      pcVar3 = ppcVar4[uVar2];
      if (pcVar3 == (code *)0x0) {
        local_20 = FUN_800189d0(uVar2);
        if (local_20 == 0) {
          return 1;
        }
        pcVar3 = (code *)(**(code **)(*(int *)(local_20 + 0xc) + 0x24))(&local_20,0xd);
        if (pcVar3 == (code *)0x0) {
          return 1;
        }
        (*pcVar3)(local_20,1);
        pcVar3 = ppcVar4[uVar2];
        uVar5 = 0;
      }
      pcVar3 = pcVar3 + 1;
    }
    ppcVar4[uVar2] = pcVar3;
  }
  return uVar5;
}



void FUN_8001a19c(int param_1)

{
  int iVar1;
  
  iVar1 = DAT_8001a1b0;
  *(undefined4 *)(param_1 + 4) = *(undefined4 *)(DAT_8001a1b0 + 0x14);
  *(int *)(iVar1 + 0x14) = param_1;
  return;
}



int FUN_8001a1b4(int param_1)

{
  int iVar1;
  int extraout_r1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  if (param_1 < 0) {
    iVar4 = -1;
    param_1 = -param_1;
  }
  else {
    iVar4 = 1;
  }
  divide_2(param_1,DAT_8001a248);
  iVar2 = extraout_r1;
  if (DAT_8001a24c < extraout_r1) {
    iVar2 = extraout_r1 - DAT_8001a24c;
    iVar4 = -iVar4;
  }
  if (DAT_8001a250 < iVar2) {
    iVar2 = DAT_8001a24c - iVar2;
  }
  iVar1 = divide_2(iVar2,1000);
  if (iVar1 < 0x5a) {
    iVar3 = *(int *)(PTR_DAT_8001a254 + iVar1 * 4);
    iVar2 = divide((iVar2 + iVar1 * -1000) * (*(int *)(PTR_DAT_8001a254 + iVar1 * 4 + 4) - iVar3),
                   1000);
    iVar2 = iVar2 + iVar3;
  }
  else {
    iVar2 = 0x10000;
  }
  if (iVar4 < 1) {
    iVar2 = -iVar2;
  }
  return iVar2;
}



void FUN_8001a258(int *param_1,int param_2,uint param_3)

{
  int iVar1;
  int *piVar2;
  uint uVar3;
  bool bVar4;
  
  while( true ) {
    bVar4 = param_3 == 0;
    if (!bVar4) {
      bVar4 = ((uint)param_1 & 3) == 0;
    }
    if (!bVar4) {
      param_3 = param_3 - 1;
    }
    if (bVar4) break;
    *(char *)param_1 = (char)param_2;
    param_1 = (int *)((int)param_1 + 1);
  }
  uVar3 = param_3 >> 2;
  if (uVar3 != 0) {
    param_3 = param_3 & 3;
    iVar1 = param_2 * 0x1010101;
    while (3 < (int)uVar3) {
      *param_1 = iVar1;
      param_1[1] = iVar1;
      piVar2 = param_1 + 3;
      param_1[2] = iVar1;
      uVar3 = uVar3 - 4;
      param_1 = param_1 + 4;
      *piVar2 = iVar1;
    }
    while (uVar3 != 0) {
      uVar3 = uVar3 - 1;
      *param_1 = iVar1;
      param_1 = param_1 + 1;
    }
  }
  while (param_3 != 0) {
    param_3 = param_3 - 1;
    *(char *)param_1 = (char)param_2;
    param_1 = (int *)((int)param_1 + 1);
  }
  return;
}



void FUN_8001a2c4(int *param_1,int param_2,uint param_3)

{
  int iVar1;
  int *piVar2;
  int *piVar3;
  uint uVar4;
  bool bVar5;
  
  bVar5 = ((uint)param_1 & 2) != 0;
  if (bVar5) {
    param_3 = param_3 - 1;
  }
  piVar2 = param_1;
  if (bVar5) {
    piVar2 = (int *)((int)param_1 + 2);
    *(short *)param_1 = (short)param_2;
  }
  uVar4 = param_3 >> 1;
  if (uVar4 != 0) {
    iVar1 = param_2 * 0x10001;
    piVar3 = piVar2;
    if (uVar4 < 4) goto LAB_8001a304;
    do {
      *piVar3 = iVar1;
      piVar3[1] = iVar1;
      uVar4 = uVar4 - 4;
      piVar2 = piVar3 + 4;
      piVar3[2] = iVar1;
      piVar3[3] = iVar1;
      piVar3 = piVar2;
    } while (3 < (int)uVar4);
    while (piVar3 = piVar2, uVar4 != 0) {
LAB_8001a304:
      uVar4 = uVar4 - 1;
      piVar2 = piVar3 + 1;
      *piVar3 = iVar1;
    }
  }
  if ((param_3 & 1) != 0) {
    *(short *)piVar2 = (short)param_2;
  }
  return;
}



void FUN_8001a320(uint param_1)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  
  uVar1 = 0;
  uVar2 = 0x40000000;
  do {
    uVar3 = uVar1 + uVar2;
    if (uVar3 <= param_1) {
      uVar1 = uVar3 + uVar2;
      param_1 = param_1 - uVar3;
    }
    uVar2 = uVar2 >> 2;
    uVar1 = uVar1 >> 1;
  } while (uVar2 != 0);
  return;
}



uint FUN_8001a34c(uint param_1)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  bool bVar6;
  
  param_1 = param_1 & 0xfff;
  uVar3 = param_1;
  if (0x800 < param_1) {
    uVar3 = param_1 - 0x800;
  }
  if (0x400 < (int)uVar3) {
    uVar3 = 0x800 - uVar3;
  }
  iVar1 = (int)uVar3 >> 6;
  iVar2 = -(uVar3 & 0x3f);
  iVar4 = iVar2 + 0x40;
  bVar6 = SBORROW4(iVar4,0x40);
  if (iVar4 != 0x40) {
    bVar6 = SBORROW4(iVar1,0x10);
    iVar2 = iVar1 + -0x10;
  }
  iVar5 = iVar4 * (uint)*(ushort *)(PTR_DAT_8001a3b0 + iVar1 * 2);
  if (iVar2 < 0 != bVar6) {
    iVar5 = (uint)*(ushort *)((int)(PTR_DAT_8001a3b0 + iVar1 * 2) + 2) * (0x40 - iVar4) + iVar5;
  }
  uVar3 = iVar5 + 0x20U >> 6;
  if (0x800 < param_1) {
    uVar3 = -uVar3;
  }
  return uVar3;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffe0 : 0x8001a700
// WARNING: Restarted to delay deadcode elimination for space: stack

void touch_handler(void)

{
  char cVar1;
  ushort uVar2;
  ushort uVar3;
  uint *ptr;
  undefined *puVar4;
  undefined *puVar5;
  short sVar6;
  undefined2 uVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  uint unaff_r4;
  int iVar11;
  code *UNRECOVERED_JUMPTABLE;
  bool bVar12;
  
  iVar8 = DAT_8001a5b8;
  puVar4 = PTR_DAT_8001a5b4;
  if (*PTR_DAT_8001a5b4 == '\0') {
    scan_for_first_touch();
    iVar9 = DAT_8001a5c8;
    if (*puVar4 != '\x02') goto LAB_8001a410;
    *(undefined2 *)(puVar4 + 0xe) = *(undefined2 *)PTR_DAT_8001a5c4;
    *(undefined2 *)(puVar4 + 0x10) = *(undefined2 *)PTR_DAT_8001a5cc;
    *(undefined2 *)(puVar4 + 0x12) = *(undefined2 *)(iVar8 + 6);
    *(undefined2 *)(puVar4 + 0x14) = *(undefined2 *)(iVar8 + 0x12);
    *(undefined2 *)(puVar4 + 10) = *(undefined2 *)(iVar8 + 0x24);
    *(undefined2 *)(puVar4 + 0xc) = *(undefined2 *)(iVar8 + 0x26);
    *(undefined2 *)(puVar4 + 0x16) = *(undefined2 *)(iVar9 + 0x94);
    *(undefined2 *)(puVar4 + 0x18) = *(undefined2 *)(iVar9 + 0x96);
    *(undefined2 *)(puVar4 + 0x1a) = *(undefined2 *)(iVar9 + 0x9c);
    *(undefined2 *)(puVar4 + 0x1c) = *(undefined2 *)(iVar9 + 0x9e);
    if (*(char *)(iVar8 + 0x3a) == '\0') {
      *(undefined2 *)(puVar4 + 0xe) = 400;
    }
  }
  else {
    tp_i2c_read_status();
    puVar5 = PTR_DAT_8001a5bc;
    if (*PTR_DAT_8001a5bc == '\0') {
      *puVar4 = 0;
      puVar4[1] = 0;
      return;
    }
    *(undefined2 *)(puVar4 + 0x2e) = *(undefined2 *)(PTR_DAT_8001a5bc + 2);
    *(undefined2 *)(puVar4 + 0x30) = *(undefined2 *)(puVar5 + 4);
LAB_8001a410:
    if (*puVar4 == '\x01') {
      if ((10 < *(byte *)(iVar8 + 0xb)) || (*(char *)(iVar8 + 0x3a) == '\0')) {
        scope_adjust_timebase();
      }
      *puVar4 = 0;
      return;
    }
    if (*puVar4 != '\x02') {
      return;
    }
  }
  if (*(char *)(DAT_8001a5c0 + 7) == '\0') {
    cVar1 = puVar4[1];
    if (cVar1 == '\x04') {
      FUN_8001a9c0();
    }
    else {
      if (cVar1 == '\x05') {
        FUN_8001a860();
      }
      else {
        if (cVar1 == '\x06') {
          FUN_8001aa6c();
        }
        else {
          if (cVar1 == '\a') {
            FUN_8001a910();
          }
        }
      }
    }
    iVar9 = DAT_8001a754;
    if (10 < *(byte *)(iVar8 + 10)) {
      if (puVar4[1] == '\0') {
        FUN_8001ab18();
      }
      cVar1 = puVar4[1];
      if (cVar1 != '\x01') {
        if (cVar1 == '\x02') {
          FUN_8001ab18();
          FUN_8001a5d0();
          if (*(char *)(iVar8 + 0x23) != '\0') {
            return;
          }
        }
        else {
          if (cVar1 != '\x03') {
            return;
          }
          FUN_8001ab18();
          FUN_8001a764();
          if (*(char *)(iVar8 + 0x23) != '\x01') {
            return;
          }
        }
      }
      iVar11 = 1;
      iVar9 = FUN_80017790();
      puVar4 = PTR_DAT_8001ac50;
      iVar8 = DAT_8001ac4c;
      if (iVar9 != 0) {
        return;
      }
      uVar2 = *(ushort *)(PTR_DAT_8001ac50 + 0x30);
      uVar3 = *(ushort *)(PTR_DAT_8001ac50 + 0x34);
      if (*(char *)(DAT_8001ac4c + 0x16) != '\0') {
        iVar11 = 5;
      }
      if (uVar2 < uVar3) {
        iVar9 = divide((uint)(ushort)(uVar3 - uVar2),iVar11);
        uVar10 = iVar9 + (uint)*(ushort *)(puVar4 + 0xc);
        bVar12 = 0x18b < uVar10;
        if (bVar12) {
          uVar10 = 0x18c;
        }
        uVar7 = (undefined2)uVar10;
        if (bVar12) {
          *(undefined2 *)(iVar8 + 0x26) = uVar7;
          return;
        }
      }
      else {
        iVar9 = divide((uint)(ushort)(uVar2 - uVar3),iVar11);
        uVar10 = (uint)*(ushort *)(puVar4 + 0xc);
        bVar12 = iVar9 + 6U < uVar10;
        if (bVar12) {
          iVar9 = uVar10 - iVar9;
        }
        uVar7 = (undefined2)iVar9;
        if (!bVar12) {
          uVar7 = 6;
        }
      }
      *(undefined2 *)(iVar8 + 0x26) = uVar7;
      return;
    }
    if ((*(char *)(iVar8 + 0x3a) != '\0') && (*(byte *)(iVar8 + 10) < 9)) {
      return;
    }
    if (puVar4[1] == '\x02') {
      iVar8 = 1;
      if (*(char *)(DAT_8001a754 + 0x16) != '\0') {
        iVar8 = 5;
      }
      iVar11 = FUN_80017790();
      puVar5 = PTR_DAT_8001a760;
      puVar4 = PTR_DAT_8001a75c;
      if (iVar11 != 0) {
        return;
      }
      if (*(char *)(DAT_8001a758 + 7) == '\0') {
        uVar2 = *(ushort *)(PTR_DAT_8001a760 + 0x30);
        uVar3 = *(ushort *)(PTR_DAT_8001a760 + 0x34);
        if (uVar3 <= uVar2) {
          iVar8 = divide((uint)(ushort)(uVar2 - uVar3),iVar8);
          uVar10 = (uint)*(ushort *)(puVar5 + 0x12);
          if (iVar8 + 7U < uVar10) {
            *(ushort *)(iVar9 + 6) = *(ushort *)(puVar5 + 0x12) - (short)iVar8;
          }
          else {
            *(undefined2 *)(iVar9 + 6) = 7;
          }
          goto joined_r0x8001a6a4;
        }
        iVar8 = divide((uint)(ushort)(uVar3 - uVar2),iVar8);
        uVar10 = (uint)*(ushort *)(puVar5 + 0x12);
        if (iVar8 + uVar10 < 0x18b) {
          *(short *)(iVar9 + 6) = (short)(iVar8 + uVar10);
        }
        else {
          *(undefined2 *)(iVar9 + 6) = 0x18b;
        }
joined_r0x8001a6f0:
        if (0x18b < uVar10) {
          *(undefined2 *)(puVar5 + 0x12) = 0x18b;
        }
        uVar2 = *(ushort *)(puVar5 + 0xe);
        sVar6 = (*(short *)(iVar9 + 6) - *(short *)(puVar5 + 0x12)) + uVar2;
      }
      else {
        uVar2 = *(ushort *)(PTR_DAT_8001a760 + 0x2e);
        uVar3 = *(ushort *)(PTR_DAT_8001a760 + 0x32);
        if (uVar2 < uVar3) {
          iVar8 = divide((uint)(ushort)(uVar3 - uVar2),iVar8);
          uVar10 = (uint)*(ushort *)(puVar5 + 0x12);
          if (iVar8 + uVar10 < 0x18b) {
            *(short *)(iVar9 + 6) = (short)(iVar8 + uVar10);
          }
          else {
            *(undefined2 *)(iVar9 + 6) = 0x18b;
          }
          goto joined_r0x8001a6f0;
        }
        iVar8 = divide((uint)(ushort)(uVar2 - uVar3),iVar8);
        uVar10 = (uint)*(ushort *)(puVar5 + 0x12);
        if (iVar8 + 7U < uVar10) {
          *(ushort *)(iVar9 + 6) = *(ushort *)(puVar5 + 0x12) - (short)iVar8;
        }
        else {
          *(undefined2 *)(iVar9 + 6) = 7;
        }
joined_r0x8001a6a4:
        if (uVar10 < 7) {
          *(undefined2 *)(puVar5 + 0x12) = 7;
        }
        uVar2 = *(ushort *)(puVar5 + 0xe);
        sVar6 = uVar2 - (*(short *)(puVar5 + 0x12) - *(short *)(iVar9 + 6));
      }
      uVar10 = (uint)uVar2;
      *(short *)puVar4 = sVar6;
      switch(*(undefined *)(DAT_80006a84 + 3)) {
      case 0:
        unaff_r4 = (uint)DAT_80006a88[1];
        break;
      case 1:
        unaff_r4 = (uint)DAT_80006a88[2];
        break;
      case 2:
        unaff_r4 = (uint)DAT_80006a88[3];
        break;
      case 3:
        unaff_r4 = (uint)DAT_80006a88[4];
        break;
      case 4:
        unaff_r4 = (uint)DAT_80006a88[5];
        break;
      case 5:
      case 6:
        unaff_r4 = (uint)DAT_80006a88[6];
      }
      switch(*(undefined *)(DAT_80006a84 + 3)) {
      case 0:
        uVar10 = (uint)*DAT_80006a8c;
        break;
      case 1:
        uVar10 = (uint)DAT_80006a8c[1];
        break;
      case 2:
        uVar10 = (uint)DAT_80006a8c[2];
        break;
      case 3:
        uVar10 = (uint)DAT_80006a8c[3];
        break;
      case 4:
        uVar10 = (uint)DAT_80006a8c[4];
        break;
      case 5:
        uVar10 = (uint)DAT_80006a8c[5];
        break;
      case 6:
        uVar10 = (uint)DAT_80006a8c[6];
      }
      iVar8 = (int)((ulonglong)
                    ((longlong)DAT_80006a90 *
                    (longlong)(int)((uint)*(ushort *)(DAT_80006a84 + 6) * (uint)*DAT_80006a88)) >>
                   0x20);
      iVar8 = divide_2((uint)*DAT_80006a8c * ((iVar8 >> 5) - (iVar8 >> 0x1f)),uVar10);
      uVar10 = unaff_r4 - iVar8 & 0xffff;
      fpga_write_cmd('2');
      fpga_write_data((uchar)(uVar10 >> 8));
      goto code_r0x800168fc;
    }
    if (puVar4[1] != '\x03') {
      return;
    }
  }
  else {
    FUN_8001a5d0();
  }
  iVar11 = 1;
  iVar9 = FUN_80017790();
  puVar5 = PTR_DAT_8001a858;
  puVar4 = PTR_DAT_8001a854;
  iVar8 = DAT_8001a850;
  if (iVar9 != 0) {
                    // WARNING: Could not recover jumptable at 0x8001a77c. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
  uVar2 = *(ushort *)(PTR_DAT_8001a854 + 0x30);
  uVar3 = *(ushort *)(PTR_DAT_8001a854 + 0x34);
  if (*(char *)(DAT_8001a850 + 0x16) != '\0') {
    iVar11 = 5;
  }
  if (uVar2 < uVar3) {
    iVar9 = divide((uint)(ushort)(uVar3 - uVar2),iVar11);
    uVar2 = *(ushort *)(puVar4 + 0x14);
    uVar10 = iVar9 + (uint)uVar2;
    uVar7 = (undefined2)DAT_8001a85c;
    if (uVar10 < DAT_8001a85c) {
      *(short *)(iVar8 + 0x12) = (short)uVar10;
    }
    else {
      *(undefined2 *)(iVar8 + 0x12) = uVar7;
    }
    if (0x18b < uVar2) {
      *(undefined2 *)(puVar4 + 0x14) = uVar7;
    }
    uVar2 = *(ushort *)(puVar4 + 0x10);
    sVar6 = (*(short *)(iVar8 + 0x12) - *(short *)(puVar4 + 0x14)) + uVar2;
  }
  else {
    iVar9 = divide((uint)(ushort)(uVar2 - uVar3),iVar11);
    uVar2 = *(ushort *)(puVar4 + 0x14);
    if (iVar9 + 7U < (uint)uVar2) {
      *(ushort *)(iVar8 + 0x12) = uVar2 - (short)iVar9;
    }
    else {
      *(undefined2 *)(iVar8 + 0x12) = 7;
    }
    if (uVar2 < 7) {
      *(undefined2 *)(puVar4 + 0x14) = 7;
    }
    uVar2 = *(ushort *)(puVar4 + 0x10);
    sVar6 = uVar2 - (*(short *)(puVar4 + 0x14) - *(short *)(iVar8 + 0x12));
  }
  uVar10 = (uint)uVar2;
  *(short *)puVar5 = sVar6;
  switch(*(undefined *)(DAT_800097d0 + 0xf)) {
  case 0:
    unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x10);
    break;
  case 1:
    unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x12);
    break;
  case 2:
    unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x14);
    break;
  case 3:
    unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x16);
    break;
  case 4:
    unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x18);
    break;
  case 5:
  case 6:
    unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x1a);
  }
  switch(*(undefined *)(DAT_800097d0 + 0xf)) {
  case 0:
    uVar10 = (uint)*DAT_800097d8;
    break;
  case 1:
    uVar10 = (uint)DAT_800097d8[1];
    break;
  case 2:
    uVar10 = (uint)DAT_800097d8[2];
    break;
  case 3:
    uVar10 = (uint)DAT_800097d8[3];
    break;
  case 4:
    uVar10 = (uint)DAT_800097d8[4];
    break;
  case 5:
    uVar10 = (uint)DAT_800097d8[5];
    break;
  case 6:
    uVar10 = (uint)DAT_800097d8[6];
  }
  iVar8 = (int)((ulonglong)
                ((longlong)DAT_800097dc *
                (longlong)
                (int)((uint)*(ushort *)(DAT_800097d0 + 0x12) * (uint)*(ushort *)(DAT_800097d4 + 0xe)
                     )) >> 0x20);
  iVar8 = divide_2((uint)*DAT_800097d8 * ((iVar8 >> 5) - (iVar8 >> 0x1f)),uVar10);
  uVar10 = unaff_r4 - iVar8 & 0xffff;
  fpga_write_cmd('5');
  fpga_write_data((uchar)(uVar10 >> 8));
code_r0x800168fc:
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = uVar10 & 0xff | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffe0 : 0x8001a700
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_8001a5d0(void)

{
  ushort uVar1;
  ushort uVar2;
  uint *ptr;
  undefined *puVar3;
  undefined *puVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  uint unaff_r4;
  int iVar9;
  
  iVar6 = DAT_8001a754;
  iVar9 = 1;
  if (*(char *)(DAT_8001a754 + 0x16) != '\0') {
    iVar9 = 5;
  }
  iVar7 = FUN_80017790();
  puVar4 = PTR_DAT_8001a760;
  puVar3 = PTR_DAT_8001a75c;
  if (iVar7 != 0) {
    return;
  }
  if (*(char *)(DAT_8001a758 + 7) == '\0') {
    uVar1 = *(ushort *)(PTR_DAT_8001a760 + 0x30);
    uVar2 = *(ushort *)(PTR_DAT_8001a760 + 0x34);
    if (uVar1 < uVar2) {
      iVar9 = divide((uint)(ushort)(uVar2 - uVar1),iVar9);
      uVar8 = (uint)*(ushort *)(puVar4 + 0x12);
      if (iVar9 + uVar8 < 0x18b) {
        *(short *)(iVar6 + 6) = (short)(iVar9 + uVar8);
      }
      else {
        *(undefined2 *)(iVar6 + 6) = 0x18b;
      }
      goto joined_r0x8001a6f0;
    }
    iVar9 = divide((uint)(ushort)(uVar1 - uVar2),iVar9);
    uVar8 = (uint)*(ushort *)(puVar4 + 0x12);
    if (iVar9 + 7U < uVar8) {
      *(ushort *)(iVar6 + 6) = *(ushort *)(puVar4 + 0x12) - (short)iVar9;
    }
    else {
      *(undefined2 *)(iVar6 + 6) = 7;
    }
  }
  else {
    uVar1 = *(ushort *)(PTR_DAT_8001a760 + 0x2e);
    uVar2 = *(ushort *)(PTR_DAT_8001a760 + 0x32);
    if (uVar1 < uVar2) {
      iVar9 = divide((uint)(ushort)(uVar2 - uVar1),iVar9);
      uVar8 = (uint)*(ushort *)(puVar4 + 0x12);
      if (iVar9 + uVar8 < 0x18b) {
        *(short *)(iVar6 + 6) = (short)(iVar9 + uVar8);
      }
      else {
        *(undefined2 *)(iVar6 + 6) = 0x18b;
      }
joined_r0x8001a6f0:
      if (0x18b < uVar8) {
        *(undefined2 *)(puVar4 + 0x12) = 0x18b;
      }
      uVar1 = *(ushort *)(puVar4 + 0xe);
      sVar5 = (*(short *)(iVar6 + 6) - *(short *)(puVar4 + 0x12)) + uVar1;
      goto set_fpga_channel1_offset;
    }
    iVar9 = divide((uint)(ushort)(uVar1 - uVar2),iVar9);
    uVar8 = (uint)*(ushort *)(puVar4 + 0x12);
    if (iVar9 + 7U < uVar8) {
      *(ushort *)(iVar6 + 6) = *(ushort *)(puVar4 + 0x12) - (short)iVar9;
    }
    else {
      *(undefined2 *)(iVar6 + 6) = 7;
    }
  }
  if (uVar8 < 7) {
    *(undefined2 *)(puVar4 + 0x12) = 7;
  }
  uVar1 = *(ushort *)(puVar4 + 0xe);
  sVar5 = uVar1 - (*(short *)(puVar4 + 0x12) - *(short *)(iVar6 + 6));
set_fpga_channel1_offset:
  uVar8 = (uint)uVar1;
  *(short *)puVar3 = sVar5;
  switch(*(undefined *)(DAT_80006a84 + 3)) {
  case 0:
    unaff_r4 = (uint)DAT_80006a88[1];
    break;
  case 1:
    unaff_r4 = (uint)DAT_80006a88[2];
    break;
  case 2:
    unaff_r4 = (uint)DAT_80006a88[3];
    break;
  case 3:
    unaff_r4 = (uint)DAT_80006a88[4];
    break;
  case 4:
    unaff_r4 = (uint)DAT_80006a88[5];
    break;
  case 5:
  case 6:
    unaff_r4 = (uint)DAT_80006a88[6];
  }
  switch(*(undefined *)(DAT_80006a84 + 3)) {
  case 0:
    uVar8 = (uint)*DAT_80006a8c;
    break;
  case 1:
    uVar8 = (uint)DAT_80006a8c[1];
    break;
  case 2:
    uVar8 = (uint)DAT_80006a8c[2];
    break;
  case 3:
    uVar8 = (uint)DAT_80006a8c[3];
    break;
  case 4:
    uVar8 = (uint)DAT_80006a8c[4];
    break;
  case 5:
    uVar8 = (uint)DAT_80006a8c[5];
    break;
  case 6:
    uVar8 = (uint)DAT_80006a8c[6];
  }
  iVar6 = (int)((ulonglong)
                ((longlong)DAT_80006a90 *
                (longlong)(int)((uint)*(ushort *)(DAT_80006a84 + 6) * (uint)*DAT_80006a88)) >> 0x20)
  ;
  iVar6 = divide_2((uint)*DAT_80006a8c * ((iVar6 >> 5) - (iVar6 >> 0x1f)),uVar8);
  fpga_write_cmd('2');
  fpga_write_data((uchar)(unaff_r4 - iVar6 >> 8));
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = unaff_r4 - iVar6 & 0xff | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffe8 : 0x8001a7f8
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_8001a764(void)

{
  ushort uVar1;
  ushort uVar2;
  undefined2 uVar3;
  uint *ptr;
  undefined *puVar4;
  undefined *puVar5;
  short sVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  uint unaff_r4;
  int divisor;
  code *UNRECOVERED_JUMPTABLE;
  
  divisor = 1;
  iVar8 = FUN_80017790();
  puVar5 = PTR_DAT_8001a858;
  puVar4 = PTR_DAT_8001a854;
  iVar7 = DAT_8001a850;
  if (iVar8 == 0) {
    uVar1 = *(ushort *)(PTR_DAT_8001a854 + 0x30);
    uVar2 = *(ushort *)(PTR_DAT_8001a854 + 0x34);
    if (*(char *)(DAT_8001a850 + 0x16) != '\0') {
      divisor = 5;
    }
    if (uVar1 < uVar2) {
      iVar8 = divide((uint)(ushort)(uVar2 - uVar1),divisor);
      uVar1 = *(ushort *)(puVar4 + 0x14);
      uVar9 = iVar8 + (uint)uVar1;
      uVar3 = (undefined2)DAT_8001a85c;
      if (uVar9 < DAT_8001a85c) {
        *(short *)(iVar7 + 0x12) = (short)uVar9;
      }
      else {
        *(undefined2 *)(iVar7 + 0x12) = uVar3;
      }
      if (0x18b < uVar1) {
        *(undefined2 *)(puVar4 + 0x14) = uVar3;
      }
      uVar1 = *(ushort *)(puVar4 + 0x10);
      sVar6 = (*(short *)(iVar7 + 0x12) - *(short *)(puVar4 + 0x14)) + uVar1;
    }
    else {
      iVar8 = divide((uint)(ushort)(uVar1 - uVar2),divisor);
      uVar1 = *(ushort *)(puVar4 + 0x14);
      if (iVar8 + 7U < (uint)uVar1) {
        *(ushort *)(iVar7 + 0x12) = uVar1 - (short)iVar8;
      }
      else {
        *(undefined2 *)(iVar7 + 0x12) = 7;
      }
      if (uVar1 < 7) {
        *(undefined2 *)(puVar4 + 0x14) = 7;
      }
      uVar1 = *(ushort *)(puVar4 + 0x10);
      sVar6 = uVar1 - (*(short *)(puVar4 + 0x14) - *(short *)(iVar7 + 0x12));
    }
    uVar9 = (uint)uVar1;
    *(short *)puVar5 = sVar6;
    switch(*(undefined *)(DAT_800097d0 + 0xf)) {
    case 0:
      unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x10);
      break;
    case 1:
      unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x12);
      break;
    case 2:
      unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x14);
      break;
    case 3:
      unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x16);
      break;
    case 4:
      unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x18);
      break;
    case 5:
    case 6:
      unaff_r4 = (uint)*(ushort *)(DAT_800097d4 + 0x1a);
    }
    switch(*(undefined *)(DAT_800097d0 + 0xf)) {
    case 0:
      uVar9 = (uint)*DAT_800097d8;
      break;
    case 1:
      uVar9 = (uint)DAT_800097d8[1];
      break;
    case 2:
      uVar9 = (uint)DAT_800097d8[2];
      break;
    case 3:
      uVar9 = (uint)DAT_800097d8[3];
      break;
    case 4:
      uVar9 = (uint)DAT_800097d8[4];
      break;
    case 5:
      uVar9 = (uint)DAT_800097d8[5];
      break;
    case 6:
      uVar9 = (uint)DAT_800097d8[6];
    }
    iVar7 = (int)((ulonglong)
                  ((longlong)DAT_800097dc *
                  (longlong)
                  (int)((uint)*(ushort *)(DAT_800097d0 + 0x12) *
                       (uint)*(ushort *)(DAT_800097d4 + 0xe))) >> 0x20);
    iVar7 = divide_2((uint)*DAT_800097d8 * ((iVar7 >> 5) - (iVar7 >> 0x1f)),uVar9);
    fpga_write_cmd('5');
    fpga_write_data((uchar)(unaff_r4 - iVar7 >> 8));
    ptr = PE_CFG0;
    gpio_config_pin(PE_CFG0,0,1);
    gpio_config_pin(ptr,1,1);
    gpio_config_pin(ptr,2,1);
    gpio_config_pin(ptr,3,1);
    gpio_config_pin(ptr,4,1);
    gpio_config_pin(ptr,5,1);
    gpio_config_pin(ptr,6,1);
    gpio_config_pin(ptr,7,1);
    set_gpio_pin_high(ptr,9);
    set_gpio_pin_low(ptr,10);
    ptr[4] = unaff_r4 - iVar7 & 0xff | ptr[4] & 0xffffff00;
    set_gpio_pin_low(ptr,8);
    ptr[4] = ptr[4] | 0x100;
    return;
  }
                    // WARNING: Could not recover jumptable at 0x8001a77c. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE)();
  return;
}



void FUN_8001a860(void)

{
  ushort uVar1;
  ushort uVar2;
  undefined *puVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  int divisor;
  
  divisor = 1;
  iVar5 = FUN_80017790();
  iVar4 = DAT_8001a908;
  puVar3 = PTR_DAT_8001a904;
  if (iVar5 != 0) {
    return;
  }
  uVar1 = *(ushort *)(PTR_DAT_8001a904 + 0x2e);
  uVar2 = *(ushort *)(PTR_DAT_8001a904 + 0x32);
  if (*(char *)(DAT_8001a900 + 0x16) != '\0') {
    divisor = 5;
  }
  if (uVar1 < uVar2) {
    iVar5 = divide((uint)(ushort)(uVar2 - uVar1),divisor);
    uVar6 = (uint)*(ushort *)(puVar3 + 0x18);
    if (uVar6 <= (uint)*(ushort *)(iVar4 + 0x94) + iVar5) {
      *(ushort *)(iVar4 + 0x96) = *(ushort *)(iVar4 + 0x94) + 1;
      return;
    }
    uVar6 = uVar6 - iVar5;
  }
  else {
    iVar5 = divide((uint)(ushort)(uVar1 - uVar2),divisor);
    uVar6 = iVar5 + (uint)*(ushort *)(puVar3 + 0x18);
    if (0x2d4 < uVar6) {
      uVar6 = DAT_8001a90c;
    }
  }
  *(short *)(iVar4 + 0x96) = (short)uVar6;
  return;
}



void FUN_8001a910(void)

{
  ushort uVar1;
  ushort uVar2;
  undefined *puVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  int divisor;
  
  divisor = 1;
  iVar5 = FUN_80017790();
  iVar4 = DAT_8001a9b8;
  puVar3 = PTR_DAT_8001a9b4;
  if (iVar5 != 0) {
    return;
  }
  uVar1 = *(ushort *)(PTR_DAT_8001a9b4 + 0x30);
  uVar2 = *(ushort *)(PTR_DAT_8001a9b4 + 0x34);
  if (*(char *)(DAT_8001a9b0 + 0x16) != '\0') {
    divisor = 5;
  }
  if (uVar1 < uVar2) {
    iVar5 = divide((uint)(ushort)(uVar2 - uVar1),divisor);
    uVar6 = (uint)*(ushort *)(puVar3 + 0x1c);
    if ((uint)*(ushort *)(iVar4 + 0x9c) + iVar5 < uVar6) {
      uVar6 = uVar6 - iVar5;
    }
    else {
      uVar6 = *(ushort *)(iVar4 + 0x9c) + 1;
    }
  }
  else {
    iVar5 = divide((uint)(ushort)(uVar1 - uVar2),divisor);
    uVar6 = iVar5 + (uint)*(ushort *)(puVar3 + 0x1c);
    if (DAT_8001a9bc <= uVar6) {
      *(short *)(iVar4 + 0x9e) = (short)DAT_8001a9bc;
      return;
    }
  }
  *(short *)(iVar4 + 0x9e) = (short)uVar6;
  return;
}



void FUN_8001a9c0(void)

{
  ushort uVar1;
  ushort uVar2;
  undefined *puVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  int divisor;
  
  divisor = 1;
  iVar5 = FUN_80017790();
  iVar4 = DAT_8001aa68;
  puVar3 = PTR_DAT_8001aa64;
  if (iVar5 != 0) {
    return;
  }
  uVar1 = *(ushort *)(PTR_DAT_8001aa64 + 0x2e);
  uVar2 = *(ushort *)(PTR_DAT_8001aa64 + 0x32);
  if (*(char *)(DAT_8001aa60 + 0x16) != '\0') {
    divisor = 5;
  }
  if (uVar1 < uVar2) {
    iVar5 = divide((uint)(ushort)(uVar2 - uVar1),divisor);
    uVar6 = (uint)*(ushort *)(puVar3 + 0x16);
    if (uVar6 <= iVar5 + 3U) {
      *(undefined2 *)(iVar4 + 0x94) = 3;
      return;
    }
    uVar6 = uVar6 - iVar5;
  }
  else {
    iVar5 = divide((uint)(ushort)(uVar1 - uVar2),divisor);
    uVar6 = iVar5 + (uint)*(ushort *)(puVar3 + 0x16);
    if (*(ushort *)(iVar4 + 0x96) <= uVar6) {
      uVar6 = *(ushort *)(iVar4 + 0x96) - 1;
    }
  }
  *(short *)(iVar4 + 0x94) = (short)uVar6;
  return;
}



void FUN_8001aa6c(void)

{
  ushort uVar1;
  ushort uVar2;
  undefined *puVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  int divisor;
  
  divisor = 1;
  iVar5 = FUN_80017790();
  iVar4 = DAT_8001ab14;
  puVar3 = PTR_DAT_8001ab10;
  if (iVar5 != 0) {
    return;
  }
  uVar1 = *(ushort *)(PTR_DAT_8001ab10 + 0x30);
  uVar2 = *(ushort *)(PTR_DAT_8001ab10 + 0x34);
  if (*(char *)(DAT_8001ab0c + 0x16) != '\0') {
    divisor = 5;
  }
  if (uVar1 < uVar2) {
    iVar5 = divide((uint)(ushort)(uVar2 - uVar1),divisor);
    uVar6 = (uint)*(ushort *)(puVar3 + 0x1a);
    if (uVar6 <= iVar5 + 0x2fU) {
      *(undefined2 *)(iVar4 + 0x9c) = 0x2f;
      return;
    }
    uVar6 = uVar6 - iVar5;
  }
  else {
    iVar5 = divide((uint)(ushort)(uVar1 - uVar2),divisor);
    uVar6 = iVar5 + (uint)*(ushort *)(puVar3 + 0x1a);
    if (*(ushort *)(iVar4 + 0x9e) <= uVar6) {
      uVar6 = *(ushort *)(iVar4 + 0x9e) - 1;
    }
  }
  *(short *)(iVar4 + 0x9c) = (short)uVar6;
  return;
}



void FUN_8001ab18(void)

{
  ushort uVar1;
  ushort uVar2;
  int iVar3;
  undefined *puVar4;
  int iVar5;
  uint uVar6;
  int divisor;
  
  divisor = 1;
  iVar5 = FUN_80017790();
  puVar4 = PTR_DAT_8001abb0;
  iVar3 = DAT_8001abac;
  if (iVar5 != 0) {
    return;
  }
  uVar1 = *(ushort *)(PTR_DAT_8001abb0 + 0x2e);
  uVar2 = *(ushort *)(PTR_DAT_8001abb0 + 0x32);

  if (*(char *)(DAT_8001abac + 0x16) != '\0') {
    divisor = 5;
  }
  if (uVar1 < uVar2) {
    uVar6 = divide((uint)(ushort)(uVar2 - uVar1),divisor);
    uVar1 = *(ushort *)(puVar4 + 10);
    if (uVar6 < uVar1) {
      *(ushort *)(iVar3 + 0x24) = uVar1 - (short)uVar6;
      return;
    }
    uVar6 = 0;
  }
  else {
    iVar5 = divide((uint)(ushort)(uVar1 - uVar2),divisor);
    uVar6 = iVar5 + (uint)*(ushort *)(puVar4 + 10);
    if (0x2cf < uVar6) {
      uVar6 = 0x2d0;
    }
  }
  *(short *)(iVar3 + 0x24) = (short)uVar6;
  return;
}



void FUN_8001abb4(void)

{
  ushort uVar1;
  ushort uVar2;
  int iVar3;
  undefined *puVar4;
  undefined2 uVar5;
  int iVar6;
  uint uVar7;
  int divisor;
  bool bVar8;
  
  divisor = 1;
  iVar6 = FUN_80017790();
  puVar4 = PTR_DAT_8001ac50;
  iVar3 = DAT_8001ac4c;
  if (iVar6 != 0) {
    return;
  }
  uVar1 = *(ushort *)(PTR_DAT_8001ac50 + 0x30);
  uVar2 = *(ushort *)(PTR_DAT_8001ac50 + 0x34);
  if (*(char *)(DAT_8001ac4c + 0x16) != '\0') {
    divisor = 5;
  }
  if (uVar1 < uVar2) {
    iVar6 = divide((uint)(ushort)(uVar2 - uVar1),divisor);
    uVar7 = iVar6 + (uint)*(ushort *)(puVar4 + 0xc);
    bVar8 = 0x18b < uVar7;
    if (bVar8) {
      uVar7 = 0x18c;
    }
    uVar5 = (undefined2)uVar7;
    if (bVar8) {
      *(undefined2 *)(iVar3 + 0x26) = uVar5;
      return;
    }
  }
  else {
    iVar6 = divide((uint)(ushort)(uVar1 - uVar2),divisor);
    uVar7 = (uint)*(ushort *)(puVar4 + 0xc);
    bVar8 = iVar6 + 6U < uVar7;
    if (bVar8) {
      iVar6 = uVar7 - iVar6;
    }
    uVar5 = (undefined2)iVar6;
    if (!bVar8) {
      uVar5 = 6;
    }
  }
  *(undefined2 *)(iVar3 + 0x26) = uVar5;
  return;
}



// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Type propagation algorithm not settling
// WARNING: Restarted to delay deadcode elimination for space: stack

void scope_adjust_timebase(void)

{
  byte bVar1;
  ushort uVar2;
  int iVar3;
  int iVar4;
  char cVar5;
  char *text;
  uint uVar6;
  int iVar7;
  undefined2 uVar8;
  uint uVar9;
  uint uVar10;
  bool bVar11;
  bool bVar12;
  
  iVar3 = DAT_8001af84;
  if ((*(byte *)(DAT_8001af84 + 0xb) < 9) && (*(char *)(DAT_8001af84 + 0x3a) != '\0'))
  goto LAB_8001af58;
  uVar2 = *(ushort *)(PTR_DAT_8001af88 + 6);
  uVar6 = (uint)*(ushort *)(PTR_DAT_8001af88 + 8);
  uVar9 = DAT_8001af8c + 0x6f;
  uVar10 = uVar2 - 1;
  bVar12 = uVar10 <= DAT_8001af8c;
  bVar11 = DAT_8001af8c == uVar10;
  if (bVar12 && !bVar11) {
    bVar12 = 0x31 < uVar6;
    bVar11 = uVar6 == 0x32;
  }
  if (bVar12 && !bVar11) {
    bVar12 = uVar6 <= uVar9;
    bVar11 = uVar9 == uVar6;
  }
  if ((bVar12 && !bVar11) && (*(char *)(DAT_8001af84 + 10) != '\0')) {
    *(char *)(DAT_8001af84 + 10) = *(char *)(DAT_8001af84 + 10) + -1;
  }
  uVar10 = uVar2 - 0x169;
  bVar12 = uVar10 <= DAT_8001af90;
  bVar11 = DAT_8001af90 == uVar10;
  if (bVar12 && !bVar11) {
    bVar12 = 0x31 < uVar6;
    bVar11 = uVar6 == 0x32;
  }
  if (bVar12 && !bVar11) {
    bVar11 = uVar6 < uVar9;
    if (bVar11) {
      uVar6 = (uint)*(byte *)(iVar3 + 10);
    }
    if (bVar11 && uVar6 < 0x1d) {
      *(char *)(iVar3 + 10) = *(char *)(iVar3 + 10) + '\x01';
    }
  }
  if (*(char *)(iVar3 + 0x3a) == '\0') {
    *(byte *)(iVar3 + 0xb) = *(byte *)(iVar3 + 10);
    goto LAB_8001af54;
  }
  if ((*(byte *)(iVar3 + 10) < 0xb) && (10 < *(byte *)(iVar3 + 0xb))) {
    *(undefined *)(iVar3 + 10) = 0xb;
  }
  uVar8 = 0;
  if ((uint)((ulonglong)(uint)*(byte *)(iVar3 + 0xb) * (ulonglong)DAT_8001af94 >> 0x21) * -3 +
      (uint)*(byte *)(iVar3 + 0xb) == 0) {
    if (*(byte *)(iVar3 + 10) < *(byte *)(iVar3 + 0xb)) {
      cVar5 = *(char *)(iVar3 + 0xb) - *(char *)(iVar3 + 10);
      if (cVar5 != '\x01') {
        if (cVar5 != '\x02') goto joined_r0x8001af30;
        uVar8 = 10;
        goto LAB_8001ae10;
      }
LAB_8001af40:
      *(undefined2 *)PTR_DAT_8001af98 = 5;
      goto LAB_8001af54;
    }
    switch(*(char *)(iVar3 + 10) - *(char *)(iVar3 + 0xb)) {
    case '\x01':
      uVar8 = 2;
    case '\0':
LAB_8001ae10:
      *(undefined2 *)PTR_DAT_8001af98 = uVar8;
      break;
    case '\x02':
LAB_8001aefc:
      *(undefined2 *)PTR_DAT_8001af98 = 3;
      break;
    case '\x03':
LAB_8001af04:
      *(undefined2 *)PTR_DAT_8001af98 = 4;
      break;
    case '\x04':
LAB_8001ae68:
      cVar5 = *(char *)(iVar3 + 10) + -1;
LAB_8001ae18:
      *(char *)(iVar3 + 10) = cVar5;
    }
  }
  else {
    if ((uint)*(byte *)(iVar3 + 0xb) +
        (uint)((ulonglong)(uint)*(byte *)(iVar3 + 0xb) * (ulonglong)DAT_8001af94 >> 0x21) * -3 != 1)
    {
      if ((uint)((ulonglong)(uint)*(byte *)(iVar3 + 0xb) * (ulonglong)DAT_8001af94 >> 0x21) * -3 +
          (uint)*(byte *)(iVar3 + 0xb) == 2) {
        if (*(byte *)(iVar3 + 10) < *(byte *)(iVar3 + 0xb)) {
          cVar5 = *(char *)(iVar3 + 0xb) - *(char *)(iVar3 + 10);
          if (cVar5 == '\x01') goto LAB_8001af40;
          if (cVar5 == '\x02') goto LAB_8001af48;
joined_r0x8001af30:
          if (cVar5 == '\x03') {
            *(undefined2 *)PTR_DAT_8001af98 = 8;
          }
          else {
            if (cVar5 == '\x04') {
              cVar5 = *(char *)(iVar3 + 10) + '\x01';
              goto LAB_8001ae18;
            }
          }
        }
        else {
          switch(*(char *)(iVar3 + 10) - *(char *)(iVar3 + 0xb)) {
          case '\0':
            goto LAB_8001ae10;
          case '\x01':
            goto LAB_8001aef4;
          case '\x02':
            goto LAB_8001aefc;
          case '\x03':
            goto LAB_8001af04;
          case '\x04':
            goto LAB_8001ae68;
          }
        }
      }
      goto LAB_8001af54;
    }
    if (*(byte *)(iVar3 + 10) < *(byte *)(iVar3 + 0xb)) {
      cVar5 = *(char *)(iVar3 + 0xb) - *(char *)(iVar3 + 10);
      if (cVar5 == '\x01') {
        uVar8 = 6;
        goto LAB_8001ae10;
      }
      if (cVar5 != '\x02') goto joined_r0x8001af30;
LAB_8001af48:
      *(undefined2 *)PTR_DAT_8001af98 = 7;
      goto LAB_8001af54;
    }
    switch(*(char *)(iVar3 + 10) - *(char *)(iVar3 + 0xb)) {
    case '\0':
      goto LAB_8001ae10;
    case '\x01':
LAB_8001aef4:
      *(undefined2 *)PTR_DAT_8001af98 = 1;
      break;
    case '\x02':
      uVar8 = 9;
      goto LAB_8001ae10;
    case '\x03':
      goto LAB_8001af04;
    case '\x04':
      goto LAB_8001ae68;
    }
  }
LAB_8001af54:
  set_fpga_trigger_timebase();
LAB_8001af58:
  bVar1 = *(byte *)(iVar3 + 0x21);
  bVar11 = bVar1 != 0;
  if (bVar11) {
    bVar1 = *(byte *)(iVar3 + 10);
  }
  if (bVar11 && bVar1 < 9) {
    *(undefined *)(iVar3 + 10) = 9;
    set_fpga_trigger_timebase();
  }
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(0x18b,5,0x1e8,0x2c);
  set_display_fg_color(0xffffff);
  select_font(PTR_FONT_0_800124d0);
  switch(*(undefined *)(DAT_800124d4 + 10)) {
  case 0:
    text = s_50S_div_800124dc;
    break;
  case 1:
    text = s_20S_div_800124e4;
    break;
  case 2:
    text = s_10S_div_800124ec;
    break;
  case 3:
    text = s_5S_div_800124f4;
    break;
  case 4:
    text = s_2S_div_800124fc;
    break;
  case 5:
    text = s_1S_div_80012504;
    break;
  case 6:
    text = s_500mS_div_8001250c;
    break;
  case 7:
    text = s_200mS_div_80012518;
    break;
  case 8:
    text = s_100mS_div_80012524;
    break;
  case 9:
    text = s_50mS_div_80012530;
    break;
  case 10:
    text = s_20mS_div_8001253c;
    break;
  case 0xb:
    text = s_10mS_div_80012548;
    break;
  case 0xc:
    text = s_5mS_div_80012554;
    break;
  case 0xd:
    text = s_2mS_div_8001255c;
    break;
  case 0xe:
    text = s_1mS_div_80012564;
    break;
  case 0xf:
    text = s_500uS_div_8001256c;
    break;
  case 0x10:
    text = s_200uS_div_80012578;
    break;
  case 0x11:
    text = s_100uS_div_80012584;
    break;
  case 0x12:
    text = s_50uS_div_80012590;
    break;
  case 0x13:
    text = s_20uS_div_8001259c;
    break;
  case 0x14:
    text = s_10uS_div_800125a8;
    break;
  case 0x15:
    text = s_5uS_div_800125b4;
    break;
  case 0x16:
    text = s_2uS_div_800125bc;
    break;
  case 0x17:
    text = s_1uS_div_800125c4;
    break;
  case 0x18:
    text = s_500nS_div_800125cc;
    break;
  case 0x19:
    text = s_250nS_div_80012640;
    break;
  case 0x1a:
    text = s_100nS_div_8001264c;
    break;
  case 0x1b:
    text = s_50nS_div_80012658;
    break;
  case 0x1c:
    text = s_25nS_div_80012664;
    break;
  case 0x1d:
    text = s_10nS_div_80012670;
    break;
  default:
    goto switchD_800122c0_caseD_1e;
  }
  display_text(text,(ushort)DAT_800124d8,0x10);
switchD_800122c0_caseD_1e:
  iVar4 = Start_Of_Screen_Mem;
  iVar3 = Screen_Frame_Buffer;
  uVar6 = 5;
  do {
    iVar7 = uVar6 * 800 + 0x17c;
    copy_short((void *)(iVar4 + iVar7 * 2),(void *)(iVar3 + iVar7 * 2),0x5f);
    uVar6 = uVar6 + 1;
  } while (uVar6 < 0x2a);
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x8001b000
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_8001af9c(void)

{
  int iVar1;
  uint *ptr;
  int iVar2;
  uint uVar3;
  uint uVar4;
  code *UNRECOVERED_JUMPTABLE_00;
  
  uVar4 = LENGTH_1500;
  if (*(byte *)(DAT_8001b044 + 10) < 0xb) {
    uVar4 = LENGTH_750;
  }
  uVar3 = translate_parameter(0xc,(uint)*(byte *)(DAT_8001b044 + 0x23));
  fpga_write_cmd((uchar)uVar3);
  fpga_bus_dir_in();
  ptr = PORT_E_DATA;
  set_gpio_pin_low(PORT_E_DATA,9);
  set_gpio_pin_low(ptr,10);
  iVar2 = DAT_8001b054;
  uVar3 = 0;
  if (uVar4 != 0) {
    do {
      set_gpio_pin_low(ptr,8);
      set_gpio_pin_high(ptr,8);
      iVar1 = uVar3 * 2;
      uVar3 = uVar3 + 1 & 0xfffeffff;
      *(ushort *)(iVar2 + iVar1) = (ushort)ptr[4] & 0xff;
    } while (uVar3 < uVar4);
                    // WARNING: Could not recover jumptable at 0x8001b040. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)();
    return;
  }
                    // WARNING: Could not recover jumptable at 0x8001b000. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE_00)();
  return;
}



uint FUN_8001b058(uint param_1)

{
  uint *ptr;
  uint uVar1;
  uint dividend;
  
  dividend = 0;
  fpga_write_cmd('$');
  fpga_bus_dir_in();
  ptr = DAT_8001b0f0;
  set_gpio_pin_low(DAT_8001b0f0,9);
  set_gpio_pin_low(ptr,10);
  uVar1 = 0;
  if (param_1 != 0) {
    do {
      set_gpio_pin_low(ptr,8);
      set_gpio_pin_high(ptr,8);
      uVar1 = uVar1 + 1 & 0xfffeffff;
      dividend = (ptr[4] & 0xff) + dividend & 0xfffeffff;
    } while (uVar1 < param_1);
  }
  uVar1 = divide(dividend,param_1);
  return uVar1 & 0xff;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x8001b14c
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_8001b0f4(void)

{
  int iVar1;
  uint *ptr;
  int iVar2;
  uint uVar3;
  uint uVar4;
  code *UNRECOVERED_JUMPTABLE_00;
  
  uVar4 = DAT_8001b194;
  if (*(byte *)(DAT_8001b190 + 10) < 0xb) {
    uVar4 = DAT_8001b198;
  }
  fpga_write_cmd('!');
  fpga_bus_dir_in();
  ptr = DAT_8001b19c;
  set_gpio_pin_low(DAT_8001b19c,9);
  set_gpio_pin_low(ptr,10);
  iVar2 = DAT_8001b1a0;
  uVar3 = 0;
  if (uVar4 != 0) {
    do {
      set_gpio_pin_low(ptr,8);
      set_gpio_pin_high(ptr,8);
      iVar1 = uVar3 * 2;
      uVar3 = uVar3 + 1 & 0xfffeffff;
      *(ushort *)(iVar2 + iVar1) = (ushort)ptr[4] & 0xff;
    } while (uVar3 < uVar4);
                    // WARNING: Could not recover jumptable at 0x8001b18c. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)();
    return;
  }
                    // WARNING: Could not recover jumptable at 0x8001b14c. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE_00)();
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x8001b208
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_8001b1a4(void)

{
  int iVar1;
  uint *ptr;
  int iVar2;
  uint uVar3;
  uint uVar4;
  code *UNRECOVERED_JUMPTABLE_00;
  
  uVar4 = LENGTH_1500;
  if (*(byte *)(DAT_8001b24c + 10) < 0xb) {
    uVar4 = LENGTH_750;
  }
  uVar3 = translate_parameter(0xd,(uint)*(byte *)(DAT_8001b24c + 0x23));
  fpga_write_cmd((uchar)uVar3);
  fpga_bus_dir_in();
  ptr = PORT_E_DATA;
  set_gpio_pin_low(PORT_E_DATA,9);
  set_gpio_pin_low(ptr,10);
  iVar2 = DAT_8001b25c;
  uVar3 = 0;
  if (uVar4 != 0) {
    do {
      set_gpio_pin_low(ptr,8);
      set_gpio_pin_high(ptr,8);
      iVar1 = uVar3 * 2;
      uVar3 = uVar3 + 1 & 0xfffeffff;
      *(ushort *)(iVar2 + iVar1) = (ushort)ptr[4] & 0xff;
    } while (uVar3 < uVar4);
                    // WARNING: Could not recover jumptable at 0x8001b248. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)();
    return;
  }
                    // WARNING: Could not recover jumptable at 0x8001b208. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE_00)();
  return;
}



uint FUN_8001b260(uint param_1)

{
  uint *ptr;
  uint uVar1;
  uint dividend;
  
  dividend = 0;
  fpga_write_cmd('&');
  fpga_bus_dir_in();
  ptr = DAT_8001b2f8;
  set_gpio_pin_low(DAT_8001b2f8,9);
  set_gpio_pin_low(ptr,10);
  uVar1 = 0;
  if (param_1 != 0) {
    do {
      set_gpio_pin_low(ptr,8);
      set_gpio_pin_high(ptr,8);
      uVar1 = uVar1 + 1 & 0xfffeffff;
      dividend = (ptr[4] & 0xff) + dividend & 0xfffeffff;
    } while (uVar1 < param_1);
  }
  uVar1 = divide(dividend,param_1);
  return uVar1 & 0xff;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x8001b354
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_8001b2fc(void)

{
  int iVar1;
  uint *ptr;
  int iVar2;
  uint uVar3;
  uint uVar4;
  code *UNRECOVERED_JUMPTABLE_00;
  
  uVar4 = DAT_8001b39c;
  if (*(byte *)(DAT_8001b398 + 10) < 0xb) {
    uVar4 = DAT_8001b3a0;
  }
  fpga_write_cmd('#');
  fpga_bus_dir_in();
  ptr = DAT_8001b3a4;
  set_gpio_pin_low(DAT_8001b3a4,9);
  set_gpio_pin_low(ptr,10);
  iVar2 = DAT_8001b3a8;
  uVar3 = 0;
  if (uVar4 != 0) {
    do {
      set_gpio_pin_low(ptr,8);
      set_gpio_pin_high(ptr,8);
      iVar1 = uVar3 * 2;
      uVar3 = uVar3 + 1 & 0xfffeffff;
      *(ushort *)(iVar2 + iVar1) = (ushort)ptr[4] & 0xff;
    } while (uVar3 < uVar4);
                    // WARNING: Could not recover jumptable at 0x8001b394. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)();
    return;
  }
                    // WARNING: Could not recover jumptable at 0x8001b354. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE_00)();
  return;
}



uchar read_keyadc_data(void)

{
  return (uchar)((byte)*KEYADC_DATA & 0x3f);
}



uint FUN_8001b3c0(int param_1)

{
  ushort uVar1;
  ushort *puVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  
  uVar3 = (uint)*(ushort *)(param_1 + 0x14);
  uVar1 = *(ushort *)(param_1 + 0x16);
  iVar4 = 0;
  puVar2 = (ushort *)(param_1 + 0x14);
  iVar5 = DAT_8001b41c;
  do {
    uVar3 = uVar3 + uVar1;
    uVar1 = puVar2[3];
    iVar5 = iVar5 + -1;
    iVar4 = iVar4 + (uint)puVar2[2];
    puVar2 = puVar2 + 2;
  } while (iVar5 != 0);
  return (uint)((ulonglong)(uVar3 + iVar4 + (uint)*(ushort *)(param_1 + 0xb8e)) *
                (ulonglong)DAT_8001b420 >> 0x2a) & 0xffc0ffff;
}



void FUN_8001b424(short *param_1,short *param_2)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  short sVar9;
  
  iVar1 = DAT_8001b644;
  *(undefined2 *)(DAT_8001b644 + 0x1a) = 3;
  *(undefined2 *)(iVar1 + 0x1c) = 0x2d3;
  uVar8 = DAT_8001b668;
  uVar7 = DAT_8001b664;
  uVar6 = DAT_8001b660;
  uVar5 = DAT_8001b65c;
  uVar4 = DAT_8001b654;
  uVar3 = DAT_8001b650;
  uVar2 = DAT_8001b64c;
  switch(*(undefined2 *)(PTR_DAT_8001b648 + 0x1a)) {
  case 5:
    if (0x177 < *(ushort *)(iVar1 + 0x24)) {
      if (*(ushort *)(iVar1 + 0x24) < 0x15d) {
        *param_1 = *(short *)(iVar1 + 0x24) + -0x174;
        *param_2 = (short)uVar3;
        return;
      }
      *param_1 = *(short *)(iVar1 + 0x24) + -0x174;
      sVar9 = (short)uVar2 - *(short *)(iVar1 + 0x24);
      break;
    }
    *param_1 = 3;
    sVar9 = *(short *)(iVar1 + 0x24) + 0x77;
    goto LAB_8001b4dc;
  case 6:
    if (300 < *(ushort *)(iVar1 + 0x24)) {
      if (*(ushort *)(iVar1 + 0x24) < 0x1a8) {
        *param_1 = *(short *)(iVar1 + 0x24) + -0x129;
        *param_2 = (short)uVar4;
        return;
      }
      *param_1 = *(short *)(iVar1 + 0x24) + -0x129;
      sVar9 = 0x400 - *(short *)(iVar1 + 0x24);
      break;
    }
    *param_1 = 3;
    sVar9 = *(short *)(iVar1 + 0x24) + 0x2a;
LAB_8001b4dc:
    sVar9 = sVar9 + 0x100;
    break;
  case 7:
    if (*(ushort *)(iVar1 + 0x24) < 0x97) {
      *param_1 = 3;
      sVar9 = *(short *)(iVar1 + 0x24) + 0x96;
    }
    else {
      if (*(ushort *)(iVar1 + 0x24) < DAT_8001b658) {
        *param_1 = *(short *)(iVar1 + 0x24) + -0x93;
        *param_2 = 300;
        return;
      }
      *param_1 = *(short *)(iVar1 + 0x24) + -0x93;
      sVar9 = (short)uVar5 - *(short *)(iVar1 + 0x24);
    }
    break;
  case 8:
    if (*(ushort *)(iVar1 + 0x24) < 0x4c) {
      *param_1 = 3;
      sVar9 = *(short *)(iVar1 + 0x24) + 0x4b;
    }
    else {
      if (*(ushort *)(iVar1 + 0x24) < 0x289) {
        *param_1 = *(short *)(iVar1 + 0x24) + -0x48;
        *param_2 = 0x96;
        return;
      }
      *param_1 = *(short *)(iVar1 + 0x24) + -0x48;
      sVar9 = (short)uVar6 - *(short *)(iVar1 + 0x24);
    }
    break;
  default:
    return;
  case 10:
    if (*(ushort *)(iVar1 + 0x24) < 0xbc) {
      *param_1 = 3;
      sVar9 = *(short *)(iVar1 + 0x24) + 0xbb;
    }
    else {
      if (*(ushort *)(iVar1 + 0x24) < 0x219) {
        *param_1 = *(short *)(iVar1 + 0x24) + -0xb8;
        *param_2 = (short)uVar8;
        return;
      }
      *param_1 = *(short *)(iVar1 + 0x24) + -0xb8;
      sVar9 = (short)uVar7 - *(short *)(iVar1 + 0x24);
    }
  }
  *param_2 = sVar9;
  return;
}



undefined4 FUN_8001b66c(void)

{
  return 0;
}


/*
Unable to decompile 'scan_for_first_touch'
Cause: Exception while decompiling 8001b674: process: timeout

*/


void calculate_absolute_touch_movement(void)

{
  ushort uVar1;
  ushort uVar2;
  ushort uVar3;
  
  uVar2 = *(ushort *)(PTR_DAT_8001bc7c + 2);
  uVar3 = *(ushort *)(PTR_DAT_8001bc7c + 6);
  uVar1 = *(ushort *)(PTR_DAT_8001bc7c + 4);
  if (uVar3 < uVar2) {
    uVar2 = uVar2 - uVar3;
  }
  else {
    uVar2 = uVar3 - uVar2;
  }
  uVar3 = *(ushort *)(PTR_DAT_8001bc7c + 8);
  if (uVar3 < uVar1) {
    uVar3 = uVar1 - uVar3;
  }
  else {
    uVar3 = uVar3 - uVar1;
  }
  if (uVar3 < uVar2) {
    *(ushort *)(PTR_DAT_8001bc7c + 0x2c) = uVar2;
  }
  else {
    *(ushort *)(PTR_DAT_8001bc7c + 0x2c) = uVar3;
  }
  return;
}



undefined4 FUN_8001bc80(void)

{
  bool bVar1;
  bool bVar2;
  ushort *puVar3;
  undefined4 uVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  uint uVar8;
  uint uVar9;
  bool bVar10;
  bool bVar11;
  
  uVar9 = (uint)*(ushort *)(PTR_DAT_8001bd70 + 4);
  bVar1 = false;
  bVar2 = false;
  uVar5 = 0;
  uVar6 = DAT_8001bd6c;
  iVar7 = DAT_8001bd74;
  puVar3 = DAT_8001bd78;
  if (*DAT_8001bd68 != '\0') {
    do {
      uVar8 = (uint)*puVar3;
      if (uVar5 < uVar8) {
        uVar5 = uVar8;
      }
      if (uVar8 < uVar6) {
        uVar6 = uVar8;
      }
      iVar7 = iVar7 + -1;
      puVar3 = puVar3 + 1;
    } while (iVar7 != 0);
    bVar11 = uVar6 <= uVar9;
    bVar10 = uVar9 == uVar6;
    if (bVar11 && !bVar10) {
      bVar11 = uVar9 <= uVar5;
      bVar10 = uVar5 == uVar9;
    }
    if (bVar11 && !bVar10) {
      bVar1 = true;
    }
  }
  uVar6 = 0;
  if (DAT_8001bd68[0xc] != '\0') {
    puVar3 = (ushort *)(DAT_8001bd7c + 0x14);
    uVar5 = DAT_8001bd6c;
    iVar7 = DAT_8001bd74;
    do {
      uVar8 = (uint)*puVar3;
      puVar3 = puVar3 + 1;
      if (uVar6 < uVar8) {
        uVar6 = uVar8;
      }
      if (uVar8 < uVar5) {
        uVar5 = uVar8;
      }
      iVar7 = iVar7 + -1;
    } while (iVar7 != 0);
    bVar11 = uVar5 <= uVar9;
    bVar10 = uVar9 == uVar5;
    if (bVar11 && !bVar10) {
      bVar11 = uVar9 <= uVar6;
      bVar10 = uVar6 == uVar9;
    }
    if (bVar11 && !bVar10) {
      bVar2 = true;
    }
  }
  if (bVar1) {
    if (bVar2) {
      uVar4 = 3;
    }
    else {
      uVar4 = 1;
    }
    return uVar4;
  }
  if (bVar2) {
    uVar4 = 2;
  }
  else {
    uVar4 = 0;
  }
  return uVar4;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void some_sd_card_stuff_3(void)

{
  undefined *puVar1;
  uint count;
  int iVar2;
  undefined auStack568 [556];
  
  puVar1 = PTR_DAT_8001be98;
  if (*PTR_DAT_8001be98 == '\0') {
    iVar2 = FUN_800337c4(auStack568,s__piclist_sys_8001beb0,1);
  }
  else {
    iVar2 = FUN_800337c4(auStack568,s__wavelist_sys_8001be9c,1);
  }
  count = DAT_8001beac;
  if (iVar2 == 4) {
    FUN_8003347c(auStack568);
    if (*puVar1 == '\0') {
      FUN_800337c4(auStack568,s__piclist_sys_8001beb0,7);
      some_sd_card_stuff_4();
    }
    else {
      FUN_800337c4(auStack568,s__wavelist_sys_8001be9c,7);
      some_sd_card_stuff_4();
    }
    some_sd_card_stuff_4();
    memclear(DAT_8001bec0,count);
    FUN_800334ac(auStack568,0);
    FUN_80034074(auStack568,DAT_8001bec0,count,0);
  }
  FUN_800334ac(auStack568,0);
  FUN_80033b18(auStack568,DAT_8001bec0,count,0);
  FUN_8003347c(auStack568);
  return;
}



uint fpga_prepare_for_transfer(void)

{
  byte bVar1;
  byte bVar2;
  uint uVar3;
  
  fpga_write_cmd('\x14');
  bVar1 = fpga_read_data();
  bVar2 = fpga_read_data();
  uVar3 = translate_parameter(0x11,bVar1 & 0xf | (bVar1 & 0xf) << 0xc | (uint)bVar2 << 4);
  return uVar3 & 0xfff;
}



undefined4 FUN_8001bf10(void)

{
  return DAT_8001bf18;
}



void FUN_8001bf1c(undefined4 param_1,undefined2 *param_2,int param_3)

{
  byte bVar1;
  byte bVar2;
  byte **ppbVar3;
  uint *puVar4;
  uint *puVar5;
  uint uVar6;
  int iVar7;
  uint uVar8;
  uint extraout_r1;
  char cVar9;
  int iVar10;
  undefined4 unaff_r4;
  byte *dividend;
  int iVar11;
  undefined4 unaff_r5;
  undefined4 unaff_r6;
  byte *pbVar12;
  byte *unaff_r7;
  undefined4 unaff_r8;
  byte **ppbVar13;
  uint uVar14;
  bool bVar15;
  bool bVar16;
  byte abStack105 [41];
  uint uStack64;
  int iStack60;
  undefined4 uStack52;
  undefined4 uStack48;
  undefined4 uStack44;
  byte *pbStack40;
  undefined4 uStack36;
  char *pcVar17;
  undefined4 uStack4;
  
  puVar4 = DAT_8001c0c4;
  uVar14 = DAT_8001c0c4[1];
  *param_2 = 9;
  *(undefined4 *)(param_2 + 2) = 7;
  *(uint *)(param_2 + 4) = uVar14;
  FUN_80036d3c(param_1,param_2,0);
  puVar5 = DAT_8001c0c8;
  uVar14 = *(uint *)(param_2 + 0xc);
  *DAT_8001c0c8 = uVar14;
  uVar8 = *(uint *)(param_2 + 10);
  bVar15 = (uVar14 & 0xc0000000) == 0;
  puVar5[1] = uVar8;
  uVar6 = *(uint *)(param_2 + 8);
  puVar5[2] = uVar6;
  uVar14 = *(uint *)(param_2 + 6);
  puVar5[3] = uVar14;
  if (!bVar15) {
    uVar14 = *puVar4;
  }
  if (bVar15 || uVar14 == 3) {
    uVar6 = (((uVar8 << 0x16) >> 0x14 | uVar6 >> 0x1e) + 1 << ((uVar6 << 0xe) >> 0x1d) + 2) <<
            ((uVar8 << 0xc) >> 0x1c);
    uVar14 = uVar6 >> 9;
    *(uint *)(param_3 + 4) = uVar14;
    *(uint *)(param_3 + 8) = uVar6 >> 10;
  }
  else {
    iVar7 = ((uVar8 << 0x1a) >> 10 | uVar6 >> 0x10) * 0x200 + 0x200;
    uVar14 = iVar7 * 2;
    *(int *)(param_3 + 8) = iVar7;
    *(uint *)(param_3 + 4) = uVar14;
  }
  puVar4[3] = uVar14;
  *(undefined4 *)(param_3 + 0xc) = 0x200;
  uVar14 = puVar4[1];
  uStack4 = 7;
  *param_2 = 10;
  *(undefined4 *)(param_2 + 2) = 7;
  *(uint *)(param_2 + 4) = uVar14;
  FUN_80036d3c(param_1,param_2,0);
  puVar4 = DAT_8001c0c8;
  uVar14 = *(uint *)(param_2 + 0xc);
  *puVar5 = uVar14;
  puVar5[1] = *(uint *)(param_2 + 10);
  puVar5[2] = *(uint *)(param_2 + 8);
  puVar5[3] = *(uint *)(param_2 + 6);
  *(char *)(param_3 + 0x10) = (char)(uVar14 >> 0x18);
  *(undefined *)(param_3 + 0x30) = *(undefined *)(puVar4 + 1);
  *(undefined *)(param_3 + 0x31) = *(undefined *)((int)puVar4 + 5);
  *(undefined *)(param_3 + 0x32) = *(undefined *)((int)puVar4 + 6);
  *(undefined *)(param_3 + 0x33) = *(undefined *)((int)puVar4 + 7);
  *(undefined *)(param_3 + 0x34) = *(undefined *)(puVar4 + 2);
  *(undefined *)(param_3 + 0x50) = *(undefined *)((int)puVar4 + 0x13);
  *(undefined *)(param_3 + 0x51) = *(undefined *)(puVar4 + 5);
  *(undefined *)(param_3 + 0x52) = *(undefined *)((int)puVar4 + 0x15);
  *(undefined *)(param_3 + 0x53) = *(undefined *)((int)puVar4 + 0x16);
  FUN_800376f8(s_SD_info_print____8001c0cc);
  FUN_800376f8(s_SD_info__diskSize___d__8001c0e0,*(undefined4 *)(param_3 + 8));
  FUN_800376f8(s_SD_info__totalSectorN___d__8001c0fc,*(undefined4 *)(param_3 + 4));
  pcVar17 = s_SD_info__sectorSize___d__8001c11c;
  uStack36 = unaff_r8;
  pbStack40 = unaff_r7;
  uStack44 = unaff_r6;
  uStack48 = unaff_r5;
  uStack52 = unaff_r4;
  ppbVar3 = (byte **)&stack0xfffffff4;
  puVar4 = DAT_80037bb8;
  bVar1 = s_SD_info__sectorSize___d__8001c11c[0];
joined_r0x80037718:
  if (bVar1 == 0) {
    DAT_80037bb8 = puVar4;
    return;
  }
  bVar1 = *pcVar17;
  DAT_80037bb8 = puVar4;
  if (bVar1 == 0x25) {
    uVar6 = (uint)((byte *)pcVar17)[1];
    uVar14 = 0;
    uVar8 = 0x20;
    ppbVar13 = ppbVar3 + 1;
    dividend = *ppbVar3;
    if (uVar6 == 0x30) {
      uVar8 = 0x30;
    }
    bVar15 = false;
    iVar7 = 0;
    pcVar17 = (char *)((byte *)pcVar17 + 2);
    if (uVar6 != 0) {
      do {
        if (9 < uVar6 - 0x30) {
          if (uVar6 == 100) {
LAB_80037a94:
            iVar7 = -10;
            break;
          }
          if (uVar6 < 0x65) {
            if (uVar6 == 0x2d) {
              bVar15 = true;
              goto LAB_800377b8;
            }
            if (uVar6 < 0x2e) {
              if (uVar6 == 0) {
                pcVar17 = (char *)((byte *)pcVar17 + -1);
                goto LAB_80037754;
              }
              if (uVar6 == 0x25) {
                uVar14 = 0x25;
                do {
                } while ((puVar4[0x1f] & 2) == 0);
LAB_800379c4:
                *DAT_80037bb8 = uVar14;
                goto LAB_80037754;
              }
            }
            else {
              if (uVar6 == 0x58) {
LAB_80037a9c:
                iVar7 = 0x10;
                break;
              }
              if (uVar6 == 99) {
                if (bVar15) {
                  do {
                  } while ((puVar4[0x1f] & 2) == 0);
                  *puVar4 = (uint)dividend & 0x7f;
                }
                puVar4 = DAT_80037bb8;
                if ((0 < (int)uVar14) && (iVar7 = uVar14 - 2, iVar7 != -1)) {
                  do {
                    do {
                    } while ((puVar4[0x1f] & 2) == 0);
                    *puVar4 = uVar8;
                    bVar16 = iVar7 != 0;
                    iVar7 = iVar7 + -1;
                  } while (bVar16);
                }
                if (bVar15) goto LAB_80037754;
                uVar14 = (uint)dividend & 0x7f;
                do {
                } while ((DAT_80037bb8[0x1f] & 2) == 0);
                goto LAB_800379c4;
              }
            }
          }
          else {
            if (uVar6 == 0x73) {
              if (bVar15) {
                bVar1 = *dividend;
                pbVar12 = dividend;
                while (bVar1 != 0) {
                  do {
                  } while ((puVar4[0x1f] & 2) == 0);
                  *puVar4 = (uint)bVar1;
                  pbVar12 = pbVar12 + 1;
                  bVar1 = *pbVar12;
                }
              }
              uVar6 = FUN_800005bc(dividend);
              if (uVar6 < uVar14) {
                iVar7 = FUN_800005bc(dividend);
                puVar4 = DAT_80037bb8;
                iVar7 = uVar14 - iVar7;
                while (iVar7 != 0) {
                  iVar7 = iVar7 + -1;
                  do {
                  } while ((puVar4[0x1f] & 2) == 0);
                  *puVar4 = uVar8;
                }
              }
              puVar4 = DAT_80037bb8;
              if (!bVar15) {
                bVar1 = *dividend;
                while (bVar1 != 0) {
                  do {
                  } while ((puVar4[0x1f] & 2) == 0);
                  *puVar4 = (uint)bVar1;
                  dividend = dividend + 1;
                  bVar1 = *dividend;
                }
              }
              goto LAB_80037754;
            }
            if (uVar6 < 0x74) {
              if (uVar6 == 0x69) goto LAB_80037a94;
              if (uVar6 != 0x6f) goto LAB_80037928;
              iVar7 = 8;
              break;
            }
            if (uVar6 == 0x75) {
              iVar7 = 10;
              break;
            }
            if (uVar6 == 0x78) goto LAB_80037a9c;
          }
LAB_80037928:
          iVar7 = 3;
          break;
        }
        uVar14 = (uVar6 + uVar14 * 10) - 0x30;
LAB_800377b8:
        pbVar12 = (byte *)pcVar17 + 1;
        uVar6 = (uint)(byte)*pcVar17;
        pcVar17 = (char *)pbVar12;
      } while (uVar6 != 0);
      if (bVar15) {
        uVar14 = -uVar14;
      }
    }
    if (uVar8 == 0) {
      uVar8 = 0x20;
    }
    bVar15 = (int)uVar14 < 0;
    uStack64 = 0;
    iStack60 = 0;
    if (bVar15) {
      uVar14 = -uVar14;
      uStack64 = 1;
    }
    uStack64 = (uint)bVar15;
    if (0x50 < uVar14) {
      uVar14 = 0;
    }
    bVar15 = iVar7 < 0;
    if (bVar15) {
      iVar7 = -iVar7;
    }
    iVar11 = 0;
    if (bVar15 && (int)dividend < 0) {
      dividend = (byte *)-(int)dividend;
      iStack60 = 1;
    }
LAB_80037820:
    do {
      iVar10 = iVar11;
      if (iVar7 == 0x10) {
        uVar6 = (uint)dividend & 0xf;
        dividend = (byte *)((uint)dividend >> 4);
      }
      else {
        dividend = (byte *)divide((int)dividend,iVar7);
        uVar6 = extraout_r1 & 0xffff;
      }
      puVar4 = DAT_80037bb8;
      if (uVar6 < 10) {
        cVar9 = '0';
      }
      else {
        cVar9 = '7';
      }
      abStack105[iVar10 + 1] = (char)uVar6 + cVar9;
      iVar11 = iVar10 + 1;
      if (dividend == (byte *)0x0) goto LAB_80037aa4;
      if (iVar7 == 10) {
        if (iVar11 != 3 && iVar11 != 7) {
          if (iVar11 == 0xb) {
            bVar1 = 1;
LAB_80037890:
            bVar2 = 0;
          }
          else {
            bVar1 = 0;
            if (iVar11 != 0xf) goto LAB_80037890;
            bVar2 = 1;
          }
          if (!(bool)(bVar1 | bVar2)) goto LAB_80037820;
        }
        abStack105[iVar10 + 2] = 0x2c;
        iVar11 = iVar10 + 2;
      }
    } while( true );
  }
  pcVar17 = (char *)((byte *)pcVar17 + 1);
  do {
  } while ((puVar4[0x1f] & 2) == 0);
  *puVar4 = (uint)bVar1;
  ppbVar13 = ppbVar3;
  goto LAB_80037754;
LAB_80037aa4:
  if (iStack60 != 0) {
    abStack105[iVar10 + 2] = 0x2d;
    iVar11 = iVar10 + 2;
  }
  if (iVar11 < (int)uVar14) {
    iVar10 = uVar14 - iVar11;
    iVar7 = iVar10;
    puVar5 = DAT_80037bb8;
    if (uStack64 == 0) {
      while (puVar5 = DAT_80037bb8, iVar7 != 0) {
        do {
        } while ((puVar4[0x1f] & 2) == 0);
        *puVar4 = uVar8;
        iVar7 = iVar7 + -1;
      }
    }
    while (puVar4 = DAT_80037bb8, 0 < iVar11) {
      do {
      } while ((DAT_80037bb8[0x1f] & 2) == 0);
      *DAT_80037bb8 = (uint)abStack105[iVar11];
      DAT_80037bb8 = puVar5;
      iVar11 = iVar11 + -1;
      puVar5 = DAT_80037bb8;
      DAT_80037bb8 = puVar4;
    }
    DAT_80037bb8 = puVar5;
    if (uStack64 != 0) {
      while (iVar10 != 0) {
        iVar10 = iVar10 + -1;
        do {
        } while ((puVar5[0x1f] & 2) == 0);
        *puVar5 = uVar8;
      }
    }
  }
  else {
    while (0 < iVar11) {
      do {
      } while ((puVar4[0x1f] & 2) == 0);
      *puVar4 = (uint)abStack105[iVar11];
      iVar11 = iVar11 + -1;
    }
  }
LAB_80037754:
  bVar1 = *pcVar17;
  ppbVar3 = ppbVar13;
  puVar4 = DAT_80037bb8;
  goto joined_r0x80037718;
}



int check_hardware(void)

{
  uchar uVar1;
  uchar uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  char *pcVar6;
  int iVar7;
  char *extraout_r1;
  
  uVar5 = is_hardware_check_needed();
  if (uVar5 == 2) {
    return 2;
  }
  reset_config_data();
  set_fpga_channel1_enable();
  set_fpga_channel2_enable();
  set_trigger_level_dividers();
  set_fpga_channel1_voltperdiv();
  set_fpga_channel2_voltperdiv();
  set_fpga_channel1_coupling();
  set_fpga_channel2_coupling();
  fpga_enable_system();
  set_fpga_trigger_channel();
  set_fpga_channel_trigger_channel();
  set_fpga_trigger_edge();
  set_fpga_trigger_level();
  set_fpga_trigger_mode();
  set_fpga_channel1_offset();
  set_fpga_channel2_offset();
  fpga_write_cmd('8');
  fpga_write_data(-0x16);
  fpga_write_data((uchar)DAT_8001c4a8);
  set_screen_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(0,0,800,0x1e0);
  select_font(PTR_FONT_3_8001c4ac);
  set_font_paint_mode(0);
  fpga_write_cmd('\x06');
  uVar1 = fpga_read_data();
  uVar2 = fpga_read_data();
  if (CONCAT11(uVar1,uVar2) != 0x1432) {
    set_display_fg_color(0xff0000);
    display_text(s_FPGA_8001c4b0,0x1e,0x5a);
    display_text(s_Failed_8001c4b8,100,0x5a);
    do {
                    // WARNING: Do nothing block with infinite loop
    } while( true );
  }
  set_display_fg_color(0xffffff);
  display_text(s_FPGA_8001c4b0,0x1e,0x5a);
  display_text(s_OK_8001c4c0,100,0x5a);
  set_fpga_battery_level();
  uVar3 = fpga_get_tp_status_reg_address();
  if (uVar3 != 0x8150) {
    set_display_fg_color(0xff0000);
    display_text(s_Encrypt_8001c4c4,0x1e,0x6e);
    display_text(s_Failed_8001c4b8,100,0x6e);
    do {
                    // WARNING: Do nothing block with infinite loop
    } while( true );
  }
  set_display_fg_color(0xffffff);
  display_text(s_Encrypt_8001c4c4,0x1e,0x6e);
  display_text(s_OK_8001c4c0,100,0x6e);
  uVar5 = check_ad9288();
  if (uVar5 != 3) {
    if (uVar5 == 1) {
      set_display_fg_color(0xff0000);
      display_text(s_AD9288_2_8001c4f8,0x1e,0x82);
      display_text(s_Failed_8001c4b8,0x78,0x82);
      do {
                    // WARNING: Do nothing block with infinite loop
      } while( true );
    }
    if (uVar5 != 2) {
      set_display_fg_color(0xff0000);
      display_text(s_AD9288_1_2_8001c4cc,0x1e,0x82);
      display_text(s_Failed_8001c4b8,0x78,0x82);
      do {
                    // WARNING: Do nothing block with infinite loop
      } while( true );
    }
    set_display_fg_color(0xff0000);
    display_text(s_AD9288_1_8001c504,0x1e,0x82);
    display_text(s_Failed_8001c4b8,0x78,0x82);
    do {
                    // WARNING: Do nothing block with infinite loop
    } while( true );
  }
  set_display_fg_color(0xffffff);
  display_text(s_AD9288_8001c4d8,0x1e,0x82);
  pcVar6 = s_OK_8001c4c0;
  display_text(s_OK_8001c4c0,100,0x82);
  do_baseline_calibration();
  if (pcVar6 == (char *)0x0) {
    set_display_fg_color(0xff0000);
    display_text(s_Analog_8001c4e0,0x1e,0x96);
    display_text(s_Failed_8001c4b8,100,0x96);
    do {
                    // WARNING: Do nothing block with infinite loop
    } while( true );
  }
  set_display_fg_color(0xffffff);
  display_text(s_Analog_8001c4e0,0x1e,0x96);
  display_text(s_OK_8001c4c0,100,0x96);
  set_display_fg_color(0xffffff);
  display_text(s_Touch_8001c4e8,0x1e,0xaa);
  display_text(&DAT_8001c4f0,0x67,0xa7);
  iVar7 = FUN_80028568();
  if (iVar7 == 0) {
    set_display_fg_color(0xff0000);
    pcVar6 = s_Failed_8001c4b8;
  }
  else {
    set_display_fg_color(0xffffff);
    pcVar6 = &DAT_8001c4f4;
  }
  display_text(pcVar6,100,0xaa);
  if (iVar7 == 0) {
    return (int)pcVar6;
  }
  set_display_fg_color(0xffffff);
  display_text(s_Hard_Checked_Successful___8001c510,0x1e,0xbe);
  iVar7 = DAT_8001c52c;
  *(undefined *)(DAT_8001c52c + 3) = 0;
  *(undefined2 *)(iVar7 + 6) = 300;
  *(undefined *)(iVar7 + 0xf) = 0;
  *(undefined2 *)(iVar7 + 0x12) = 100;
  *(undefined *)(iVar7 + 10) = 0x13;
  set_fpga_channel1_offset();
  set_fpga_channel2_offset();
  set_fpga_channel1_voltperdiv();
  set_fpga_channel2_voltperdiv();
  set_fpga_trigger_timebase();
  signal_sys_ok();
  uVar5 = get_timer_ticks();
  do {
    uVar4 = get_timer_ticks();
  } while ((char *)(uVar4 - uVar5) < extraout_r1);
  return (int)(char *)(uVar4 - uVar5);
}



void irq_handler(void)

{
  uint uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  
  uVar2 = *INTC_PEND_REG0;
  uVar3 = INTC_PEND_REG0[1];
  *INTC_PEND_REG0 = 0;
  iVar4 = 1;
  do {
    uVar1 = FUN_80000594(uVar2,uVar3,iVar4);
    if ((~uVar1 & 1) == 0) {
                    // WARNING: Could not recover jumptable at 0x8001c5b4. Too many branches
                    // WARNING: Treating indirect jump as call
      (**(code **)(INT_FUNC_TBL_BASE + iVar4 * 4))();
      return;
    }
    iVar4 = iVar4 + 1;
  } while (iVar4 < 0x40);
  return;
}



void setup_interrupt(uint type,uint irq_num,uint address,uint prio)

{
  uint *puVar1;
  
  if (*DAT_8001c678 == '\0') {
    *DAT_8001c678 = '\x01';
  }
  switch(type) {
  case 0:
    *(uint *)(DAT_8001c67c + irq_num * 4) = address;
    break;
  case 1:
  case 2:
  case 3:
  case 4:
  case 5:
  case 6:
  case 7:
    *(uint *)(DAT_8001c680 + irq_num * 4) = address;
  }
  puVar1 = (uint *)(INTC_PRIO_REG0 + (irq_num * 0x89 >> 0xb) * 4);
  *puVar1 = *puVar1 | prio << (((uint)((ulonglong)irq_num * (ulonglong)DAT_8001c688 >> 0x23) * -0xf
                               + irq_num) * 2 & 0xff);
  puVar1 = (uint *)(INTC_EN_REG0 + (irq_num >> 5) * 4);
  *puVar1 = *puVar1 | 1 << (irq_num & 0x1f);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void save_screen_under_screen_brightness_slider(void)

{
  uint uVar1;
  uint uVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  undefined2 *puVar11;
  uint uVar12;
  int iVar13;
  undefined2 *puVar14;
  
  iVar6 = Screen_Frame_Buffer_2;
  iVar5 = Start_Of_Screen_Mem;
  uVar8 = (uint)*(ushort *)(PTR_DAT_8001c6bc + 6);
  uVar10 = uVar8 + 0x3b & 0xfffeffff;
  uVar9 = *(ushort *)(PTR_DAT_8001c6bc + 4) + 0x247 & 0xfffeffff;
  uVar7 = *(ushort *)(PTR_DAT_8001c6bc + 4) + 0xf4 & 0xfffeffff;
  if (uVar8 < uVar10) {
    uVar12 = uVar9 - uVar7;
    uVar1 = uVar12 * 0x8000 >> 0x10;
    do {
      if (uVar7 < uVar9) {
        iVar13 = uVar7 + uVar8 * 800;
        puVar11 = (undefined2 *)(iVar5 + iVar13 * 2);
        puVar14 = (undefined2 *)(iVar6 + iVar13 * 2);
        uVar2 = uVar1;
        puVar3 = puVar14 + -1;
        puVar4 = puVar11 + -1;
        if ((uVar12 & 1) != 0) {
          *puVar14 = *puVar11;
          puVar3 = puVar14;
          puVar4 = puVar11;
        }
        while (uVar2 != 0) {
          puVar3[1] = puVar4[1];
          puVar3[2] = puVar4[2];
          uVar2 = uVar2 - 1 & 0xffff;
          puVar3 = puVar3 + 2;
          puVar4 = puVar4 + 2;
        }
      }
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < uVar10);
    return;
  }
  return;
}



void FUN_8001c6c0(void)

{
  uint uVar1;
  uint uVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  undefined2 *puVar11;
  uint uVar12;
  int iVar13;
  undefined2 *puVar14;
  
  iVar6 = Start_Of_Screen_Mem;
  iVar5 = Screen_Frame_Buffer_2;
  uVar8 = (uint)*(ushort *)(PTR_DAT_8001c6ec + 6);
  uVar10 = uVar8 + 0x3b & 0xfffeffff;
  uVar9 = *(ushort *)(PTR_DAT_8001c6ec + 4) + 0x247 & 0xfffeffff;
  uVar7 = *(ushort *)(PTR_DAT_8001c6ec + 4) + 0xf4 & 0xfffeffff;
  if (uVar8 < uVar10) {
    uVar12 = uVar9 - uVar7;
    uVar1 = uVar12 * 0x8000 >> 0x10;
    do {
      if (uVar7 < uVar9) {
        iVar13 = uVar7 + uVar8 * 800;
        puVar11 = (undefined2 *)(iVar5 + iVar13 * 2);
        puVar14 = (undefined2 *)(iVar6 + iVar13 * 2);
        uVar2 = uVar1;
        puVar3 = puVar14 + -1;
        puVar4 = puVar11 + -1;
        if ((uVar12 & 1) != 0) {
          *puVar14 = *puVar11;
          puVar3 = puVar14;
          puVar4 = puVar11;
        }
        while (uVar2 != 0) {
          puVar3[1] = puVar4[1];
          puVar3[2] = puVar4[2];
          uVar2 = uVar2 - 1 & 0xffff;
          puVar3 = puVar3 + 2;
          puVar4 = puVar4 + 2;
        }
      }
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < uVar10);
    return;
  }
  return;
}



void copy_rect_from_screen(ushort xstart,ushort ystart,ushort xend,ushort yend)

{
  uint uVar1;
  uint uVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  undefined2 *puVar9;
  uint uVar10;
  int iVar11;
  undefined2 *puVar12;
  
  iVar6 = Screen_Frame_Buffer_2;
  iVar5 = Start_Of_Screen_Mem;
  uVar8 = (uint)ystart;
  uVar7 = (uint)xstart;
  if (uVar8 < yend) {
    uVar10 = xend - uVar7;
    uVar1 = uVar10 * 0x8000 >> 0x10;
    do {
      if (uVar7 < xend) {
        iVar11 = uVar7 + uVar8 * 800;
        puVar9 = (undefined2 *)(iVar5 + iVar11 * 2);
        puVar12 = (undefined2 *)(iVar6 + iVar11 * 2);
        uVar2 = uVar1;
        puVar3 = puVar12 + -1;
        puVar4 = puVar9 + -1;
        if ((uVar10 & 1) != 0) {
          *puVar12 = *puVar9;
          puVar3 = puVar12;
          puVar4 = puVar9;
        }
        while (uVar2 != 0) {
          puVar3[1] = puVar4[1];
          puVar3[2] = puVar4[2];
          uVar2 = uVar2 - 1 & 0xffff;
          puVar3 = puVar3 + 2;
          puVar4 = puVar4 + 2;
        }
      }
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < yend);
    return;
  }
  return;
}



void turn_off_brightness(void)

{
  uint *ptr;
  
  fpga_write_cmd('8');
  fpga_write_data('\0');
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



uint convert_color_via_call(uint color)

{
  uint uVar1;
  
                    // WARNING: Could not recover jumptable at 0x8001c7d8. Too many branches
                    // WARNING: Treating indirect jump as call
  uVar1 = (***(code ***)(*(int *)(DAT_8001c7e0 + (uint)*(byte *)(*DAT_8001c7dc + 0x11) * 4) + 0x10))
                    ();
  return uVar1;
}



void render_character(short xpos,short ypos,byte pixels,byte rows,byte size,byte ymul,byte flag,
                     byte bytesperline,byte *bitmap,ushort *color)

{
  uint uVar1;
  byte *pbVar2;
  byte *pbVar3;
  uint uVar4;
  byte *pbVar5;
  byte *pbVar6;
  byte *pbVar7;
  uint uVar8;
  byte *pbVar9;
  code *pcVar10;
  byte *pbVar11;
  byte *pbVar12;
  uint uVar13;
  int iVar14;
  int iVar15;
  bool bVar16;
  bool bVar17;
  undefined3 in_stack_00000001;
  undefined3 in_stack_00000005;
  undefined3 in_stack_00000009;
  undefined3 in_stack_0000000d;
  int iVar18;
  
  pbVar12 = (byte *)(uint)rows;
  pbVar6 = (byte *)(uint)pixels;
  pbVar11 = (byte *)(int)ypos;
  pbVar2 = (byte *)(int)xpos;
  uVar13 = 0;
  if ((code **)*DAT_8001cb18 != (code **)0x0) {
    pcVar10 = *(code **)*DAT_8001cb18;
    pbVar5 = pbVar6;
    pbVar6 = bitmap;
    goto LAB_8001c9d4;
  }
  if (((uint)_size | (uint)_ymul) != 1) {
    uVar1 = 8 - (int)_flag;
    iVar18 = 0;
    while (iVar18 < (int)pbVar12) {
      pbVar3 = _ymul + (int)pbVar11;
      pbVar7 = pbVar3 + -1;
      pbVar9 = (byte *)(int)*(short *)(*DAT_8001cb1c + 10);
      bVar17 = SBORROW4((int)pbVar9,(int)pbVar7);
      pbVar5 = pbVar9 + -(int)pbVar7;
      bVar16 = pbVar9 == pbVar7;
      if ((int)pbVar9 <= (int)pbVar7) {
        pbVar9 = (byte *)(int)*(short *)(*DAT_8001cb1c + 0xe);
        bVar17 = SBORROW4((int)pbVar11,(int)pbVar9);
        pbVar5 = pbVar11 + -(int)pbVar9;
        bVar16 = pbVar11 == pbVar9;
      }
      if (bVar16 || (int)pbVar5 < 0 != bVar17) {
        iVar14 = 0;
        iVar15 = 0;
        pbVar5 = pbVar2;
        pbVar9 = bitmap;
        while (iVar15 < (int)pbVar6) {
          if (iVar14 == 0) {
            iVar14 = 8;
            uVar13 = (uint)*pbVar9;
            pbVar9 = pbVar9 + 1;
          }
          iVar14 = iVar14 - (int)_flag;
          uVar4 = uVar13 >> (uVar1 & 0xff);
          uVar13 = uVar13 << flag & 0xff;
          if ((uVar4 != 0) || ((*(byte *)(*DAT_8001cb1c + 0x10) & 2) == 0)) {
            uVar8 = **(uint **)(*DAT_8001cb1c + 0x3c);
            if (color != (ushort *)0x0) {
              uVar4 = *(uint *)(color + uVar4 * 2);
            }
            **(uint **)(*DAT_8001cb1c + 0x3c) = uVar4;
            FUN_8001cd50(pbVar5,pbVar11,(int)_size + (int)pbVar5 + -1,pbVar7);
            **(uint **)(*DAT_8001cb1c + 0x3c) = uVar8;
          }
          iVar15 = iVar15 + 1;
          pbVar5 = pbVar5 + (int)_size;
        }
      }
      iVar18 = iVar18 + 1;
      bitmap = bitmap + (int)_bytesperline;
      pbVar11 = pbVar3;
    }
    return;
  }
  iVar18 = *DAT_8001cb1c;
  pbVar3 = (byte *)(int)*(short *)(iVar18 + 10) + -(int)pbVar11;
  _size = pbVar12;
  pbVar5 = pbVar11;
  if (0 < (int)pbVar3) {
    _size = pbVar12 + -(int)pbVar3;
    if ((int)_size < 1) {
      return;
    }
    bitmap = bitmap + (int)pbVar3 * (int)_bytesperline;
    pbVar5 = (byte *)(int)*(short *)(iVar18 + 10);
  }
  iVar14 = ((int)pbVar11 + (int)pbVar12 + -1) - (int)*(short *)(iVar18 + 0xe);
  if ((0 < iVar14) && (_size = _size + -iVar14, (int)_size < 1)) {
    return;
  }
  iVar14 = ((int)pbVar2 + (int)pbVar6 + -1) - (int)*(short *)(iVar18 + 0xc);
  pbVar12 = pbVar6;
  if (0 < iVar14) {
    pbVar12 = pbVar6 + -iVar14;
  }
  pbVar6 = (byte *)0x0;
  pbVar11 = pbVar2;
  if ((int)pbVar2 < (int)*(short *)(iVar18 + 8)) {
    pbVar6 = (byte *)((int)*(short *)(iVar18 + 8) - (int)pbVar2);
    pbVar12 = pbVar12 + -(int)pbVar6;
    if (_flag == &SupervisorCall) {
      bitmap = bitmap + (int)pbVar6;
    }
    else {
      if ((int)_flag < 9) {
        if (_flag == (byte *)0x1) {
          uVar13 = (uint)pbVar6 & 0xfffffff8;
          bitmap = bitmap + ((int)pbVar6 >> 3);
          pbVar6 = (byte *)((uint)pbVar6 & 7);
          pbVar11 = pbVar2 + uVar13;
        }
        else {
          if (_flag == (byte *)0x2) {
            uVar13 = (uint)pbVar6 & 0xfffffffc;
            bitmap = bitmap + ((int)pbVar6 >> 2);
            pbVar6 = (byte *)((uint)pbVar6 & 3);
            pbVar11 = pbVar2 + uVar13;
          }
          else {
            if (_flag == &UndefinedInstruction) {
              uVar13 = (uint)pbVar6 & 0xfffffffe;
              bitmap = bitmap + ((int)pbVar6 >> 1);
              pbVar6 = (byte *)((uint)pbVar6 & 1);
              pbVar11 = pbVar2 + uVar13;
            }
          }
        }
        goto LAB_8001c990;
      }
      if (_flag == &DataAbort) {
        bitmap = bitmap + (int)pbVar6 * 2;
      }
      else {
        if (_flag != &IRQ && _flag != (byte *)0x20) goto LAB_8001c990;
        bitmap = bitmap + (int)pbVar6 * 4;
      }
    }
    pbVar11 = pbVar6 + (int)pbVar2;
    pbVar6 = (byte *)0x0;
  }
LAB_8001c990:
  if ((int)pbVar12 < 1) {
    return;
  }
  pbVar2 = *(byte **)(DAT_8001cb20 + (uint)*(byte *)(iVar18 + 0x11) * 4);
  pcVar10 = *(code **)(*(int *)(pbVar2 + 0xc) + 4);
  _ymul = _flag;
  _flag = _bytesperline;
  _bytesperline = bitmap;
LAB_8001c9d4:
  (*pcVar10)(pbVar2,pbVar11,pbVar5,pbVar12,_size,_ymul,_flag,_bytesperline,pbVar6,color);
  return;
}



void FUN_8001cb24(int param_1,int param_2,int param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  bool bVar4;
  
  iVar1 = *DAT_8001cba0;
  iVar2 = (int)*(short *)(iVar1 + 10);
  bVar4 = SBORROW4(iVar2,param_2);
  iVar3 = iVar2 - param_2;
  if (iVar2 <= param_2) {
    iVar2 = (int)*(short *)(iVar1 + 0xe);
    bVar4 = SBORROW4(param_2,iVar2);
    iVar3 = param_2 - iVar2;
  }
  if (iVar2 == param_2 || iVar3 < 0 != bVar4) {
    if (param_1 < *(short *)(iVar1 + 8)) {
      param_1 = (int)*(short *)(iVar1 + 8);
    }
    if (*(short *)(iVar1 + 0xc) < param_3) {
      param_3 = (int)*(short *)(iVar1 + 0xc);
    }
    if (param_1 <= param_3) {
      iVar3 = *(int *)(DAT_8001cba4 + (uint)*(byte *)(iVar1 + 0x11) * 4);
                    // WARNING: Could not recover jumptable at 0x8001cb94. Too many branches
                    // WARNING: Treating indirect jump as call
      (**(code **)(*(int *)(iVar3 + 0xc) + 8))(iVar3,param_1,param_2,param_3);
      return;
    }
  }
  return;
}



void FUN_8001cba8(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  bool bVar4;
  
  iVar1 = *DAT_8001cc44;
  iVar2 = (int)*(short *)(iVar1 + 10);
  bVar4 = SBORROW4(iVar2,param_2);
  iVar3 = iVar2 - param_2;
  if (iVar2 <= param_2) {
    iVar2 = (int)*(short *)(iVar1 + 0xe);
    bVar4 = SBORROW4(param_2,iVar2);
    iVar3 = param_2 - iVar2;
  }
  if (iVar2 == param_2 || iVar3 < 0 != bVar4) {
    iVar2 = (int)*(short *)(iVar1 + 8);
    bVar4 = SBORROW4(iVar2,param_1);
    iVar3 = iVar2 - param_1;
    if (iVar2 <= param_1) {
      iVar2 = (int)*(short *)(iVar1 + 0xc);
      bVar4 = SBORROW4(param_1,iVar2);
      iVar3 = param_1 - iVar2;
    }
    if (iVar2 == param_1 || iVar3 < 0 != bVar4) {
      if ((*(byte *)(iVar1 + 0x10) & 1) == 0) {
        iVar3 = *(int *)(DAT_8001cc48 + (uint)*(byte *)(iVar1 + 0x11) * 4);
                    // WARNING: Could not recover jumptable at 0x8001cc38. Too many branches
                    // WARNING: Treating indirect jump as call
        (**(code **)(*(int *)(iVar3 + 0xc) + 0x18))
                  (iVar3,param_1,param_2,**(undefined4 **)(iVar1 + 0x3c));
        return;
      }
      iVar3 = *(int *)(DAT_8001cc48 + (uint)*(byte *)(iVar1 + 0x11) * 4);
                    // WARNING: Could not recover jumptable at 0x8001cc0c. Too many branches
                    // WARNING: Treating indirect jump as call
      (**(code **)(*(int *)(iVar3 + 0xc) + 0x1c))(iVar3,param_1);
      return;
    }
  }
  return;
}



void FUN_8001cc4c(int param_1,int param_2,int param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  bool bVar4;
  
  iVar1 = *DAT_8001ccc4;
  iVar2 = (int)*(short *)(iVar1 + 8);
  bVar4 = SBORROW4(iVar2,param_1);
  iVar3 = iVar2 - param_1;
  if (iVar2 <= param_1) {
    iVar2 = (int)*(short *)(iVar1 + 0xc);
    bVar4 = SBORROW4(param_1,iVar2);
    iVar3 = param_1 - iVar2;
  }
  if (iVar2 == param_1 || iVar3 < 0 != bVar4) {
    if (param_2 < *(short *)(iVar1 + 10)) {
      param_2 = (int)*(short *)(iVar1 + 10);
    }
    if (*(short *)(iVar1 + 0xe) < param_3) {
      param_3 = (int)*(short *)(iVar1 + 0xe);
    }
    if (param_2 <= param_3) {
      iVar3 = *(int *)(DAT_8001ccc8 + (uint)*(byte *)(iVar1 + 0x11) * 4);
                    // WARNING: Could not recover jumptable at 0x8001ccb8. Too many branches
                    // WARNING: Treating indirect jump as call
      (**(code **)(*(int *)(iVar3 + 0xc) + 0xc))(iVar3,param_1,param_2,param_3);
      return;
    }
  }
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void copy_rect_to_screen(ushort xstart,ushort ystart,ushort xend,ushort yend)

{
  int iVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  
  iVar2 = Start_Of_Screen_Mem;
  iVar1 = Screen_Frame_Buffer;
  uVar4 = (uint)ystart;
  if (yend <= uVar4) {
    return;
  }
  do {
    iVar3 = (uint)xstart + uVar4 * 800;
    copy_short((void *)(iVar2 + iVar3 * 2),(void *)(iVar1 + iVar3 * 2),
               ((uint)xend - (uint)xstart) + 1);
    uVar4 = uVar4 + 1;
  } while (uVar4 < yend);
  return;
}



void copy_frame_to_screen(void)

{
  copy_byte(Start_Of_Screen_Mem,Screen_Frame_Buffer,number_of_pixels << 1);
  return;
}



void FUN_8001cd50(int param_1,int param_2,int param_3,int param_4)

{
  int iVar1;
  
  iVar1 = *DAT_8001cdd4;
  if (param_1 < *(short *)(iVar1 + 8)) {
    param_1 = (int)*(short *)(iVar1 + 8);
  }
  if (*(short *)(iVar1 + 0xc) < param_3) {
    param_3 = (int)*(short *)(iVar1 + 0xc);
  }
  if (param_1 <= param_3) {
    if (param_2 < *(short *)(iVar1 + 10)) {
      param_2 = (int)*(short *)(iVar1 + 10);
    }
    if (*(short *)(iVar1 + 0xe) < param_4) {
      param_4 = (int)*(short *)(iVar1 + 0xe);
    }
    if (param_2 <= param_4) {
      iVar1 = *(int *)(DAT_8001cdd8 + (uint)*(byte *)(iVar1 + 0x11) * 4);
      (**(code **)(*(int *)(iVar1 + 0xc) + 0x10))(iVar1,param_1,param_2,param_3,param_4);
    }
  }
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_8001cddc(int param_1,int param_2,int param_3,int param_4,uint param_5)

{
  int *piVar1;
  uint uVar2;
  uint uVar3;
  
  piVar1 = Global_Frame_Buffer_Pointer;
  uVar2 = param_4 - 1;
  param_2 = param_2 * 800;
  if (param_4 == 0) {
    return;
  }
  do {
    uVar3 = uVar2 & 0xffff;
    memset((void *)(*piVar1 + param_2 * 2 + param_1 * 2),param_5,param_3);
    uVar2 = uVar3 - 1;
    param_2 = param_2 + 800;
  } while (uVar3 != 0);
  return;
}



undefined4 FUN_8001ce48(int param_1)

{
  int iVar1;
  undefined4 uVar2;
  
  uVar2 = 0;
  if ((param_1 < 2) && (iVar1 = FUN_800189d0(), iVar1 != 0)) {
    uVar2 = (**(code **)(*(int *)(iVar1 + 0xc) + 0x28))(iVar1,8);
  }
  return uVar2;
}



undefined4 FUN_8001ce50(void)

{
  return **(undefined4 **)(*DAT_8001ce64 + 0x38);
}



undefined4 FUN_8001ce68(void)

{
  return **(undefined4 **)(*DAT_8001ce7c + 0x3c);
}



undefined4 FUN_8001ce80(void)

{
  int iVar1;
  undefined4 uVar2;
  
  uVar2 = 0;
  if ((*(byte *)(*DAT_8001ce94 + 0x11) < 2) && (iVar1 = FUN_800189d0(), iVar1 != 0)) {
    uVar2 = (**(code **)(*(int *)(iVar1 + 0xc) + 0x28))(iVar1,9);
  }
  return uVar2;
}



undefined4 FUN_8001ce98(int param_1)

{
  int iVar1;
  undefined4 uVar2;
  
  uVar2 = 0;
  if ((param_1 < 2) && (iVar1 = FUN_800189d0(), iVar1 != 0)) {
    uVar2 = (**(code **)(*(int *)(iVar1 + 0xc) + 0x28))(iVar1,9);
  }
  return uVar2;
}



int FUN_8001cea0(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  
  iVar5 = 0;
  iVar3 = 0;
  do {
    iVar2 = FUN_800189d0(iVar3);
    if (iVar2 != 0) {
      iVar5 = iVar5 + 1;
    }
    iVar4 = iVar3 + 1;
    iVar1 = iVar3 + -1;
    if (1 < iVar4) {
      iVar2 = iVar5;
    }
    iVar3 = iVar4;
  } while (iVar1 < 0 != SBORROW4(iVar4,2));
  return iVar2;
}



void FUN_8001ced4(void)

{
  int iVar1;
  
  iVar1 = FUN_800189d0(*(undefined *)(*DAT_8001cee4 + 0x11));
  if (iVar1 != 0) {
                    // WARNING: Could not recover jumptable at 0x8001cf08. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(*(int *)(iVar1 + 0xc) + 0x2c))(iVar1,2);
    return;
  }
  return;
}



undefined4 FUN_8001cf14(void)

{
  int iVar1;
  undefined4 uVar2;
  
  uVar2 = 0;
  if ((*(byte *)(*DAT_8001cf28 + 0x11) < 2) && (iVar1 = FUN_800189d0(), iVar1 != 0)) {
    uVar2 = (**(code **)(*(int *)(iVar1 + 0xc) + 0x28))(iVar1,0xe);
  }
  return uVar2;
}



undefined4 FUN_8001cf2c(int param_1)

{
  int iVar1;
  undefined4 uVar2;
  
  uVar2 = 0;
  if ((param_1 < 2) && (iVar1 = FUN_800189d0(), iVar1 != 0)) {
    uVar2 = (**(code **)(*(int *)(iVar1 + 0xc) + 0x28))(iVar1,1);
  }
  return uVar2;
}



undefined4 FUN_8001cf34(int param_1)

{
  int iVar1;
  undefined4 uVar2;
  
  uVar2 = 0;
  if ((param_1 < 2) && (iVar1 = FUN_800189d0(), iVar1 != 0)) {
    uVar2 = (**(code **)(*(int *)(iVar1 + 0xc) + 0x28))(iVar1,2);
  }
  return uVar2;
}



void empty_func_7(void)

{
  return;
}



void FUN_8001cfbc(void)

{
                    // WARNING: Could not recover jumptable at 0x8001cfd8. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(int *)(*(int *)(DAT_8001cfe0 + (uint)*(byte *)(*DAT_8001cfdc + 0x11) * 4) + 0x10) +
              4))();
  return;
}



uint FUN_8001d018(void)

{
  uint uVar1;
  code *UNRECOVERED_JUMPTABLE;
  uint uVar2;
  int in_r3;
  int iVar3;
  int local_18;
  
  local_18 = in_r3;
  FUN_8001d410();
  uVar1 = FUN_8001d118();
  if (uVar1 == 0) {
    iVar3 = 0;
    do {
      local_18 = FUN_800189d0(iVar3);
      if (local_18 != 0) {
        UNRECOVERED_JUMPTABLE =
             (code *)(**(code **)(*(int *)(local_18 + 0xc) + 0x24))(&local_18,0xc);
        if (UNRECOVERED_JUMPTABLE == (code *)0x0) {
          return 1;
        }
        uVar2 = (*UNRECOVERED_JUMPTABLE)(local_18);
        uVar1 = uVar1 | uVar2;
      }
      iVar3 = iVar3 + 1;
    } while (iVar3 < 2);
    if (uVar1 == 0) {
      FUN_8001d174();
      iVar3 = 1;
      do {
        local_18 = FUN_800189d0(iVar3);
        if (local_18 != 0) {
          FUN_8001968c(iVar3);
          swap_font_paint_mode('\x04');
          FUN_8001cd50(0,0,0x3fff,0x3fff);
          swap_font_paint_mode('\0');
          UNRECOVERED_JUMPTABLE =
               (code *)(**(code **)(*(int *)(local_18 + 0xc) + 0x24))(&local_18,0xe);
          if (UNRECOVERED_JUMPTABLE != (code *)0x0) {
                    // WARNING: Could not recover jumptable at 0x8001d100. Too many branches
                    // WARNING: Treating indirect jump as call
            uVar1 = (*UNRECOVERED_JUMPTABLE)(local_18);
            return uVar1;
          }
        }
        iVar3 = iVar3 + -1;
      } while (-1 < iVar3);
    }
  }
  return uVar1;
}



undefined4 FUN_8001d118(void)

{
  int *piVar1;
  undefined4 *puVar2;
  int iVar3;
  
  piVar1 = DAT_8001d168;
  if (DAT_8001d168[1] == 0) {
    iVar3 = FUN_80018464(*DAT_8001d168 << 2);
    piVar1[1] = iVar3;
    puVar2 = DAT_8001d170;
    if (iVar3 == 0) {
      return 1;
    }
    *DAT_8001d170 = PTR_FUN_8001d16c;
    FUN_8001a19c(puVar2);
  }
  return 0;
}



void FUN_8001d174(void)

{
  undefined uVar1;
  int *piVar2;
  int iVar3;
  int iVar4;
  undefined4 uVar5;
  int iVar6;
  uint uVar7;
  
  iVar3 = FUN_8001cea0();
  piVar2 = DAT_8001d224;
  iVar6 = 0;
  while (iVar6 < iVar3) {
    iVar4 = FUN_800189d0(iVar6);
    if (iVar4 != 0) {
      iVar4 = *piVar2;
      uVar1 = *(undefined *)(iVar4 + 0x11);
      *(char *)(iVar4 + 0x11) = (char)iVar6;
      iVar4 = FUN_8001ce48(iVar6);
      if ((iVar4 < 9) &&
         (*(undefined **)(*(int *)(DAT_8001d228 + iVar6 * 4) + 0x10) != PTR_PTR_LAB_8001d22c)) {
        iVar4 = FUN_8001ce98(iVar6);
        uVar7 = 0;
        while ((int)uVar7 < iVar4) {
          uVar5 = FUN_8001cfbc(uVar7 & 0xff);
          FUN_8001d488(iVar6,uVar7 & 0xff,uVar5);
          uVar7 = uVar7 + 1;
        }
      }
      *(undefined *)(*piVar2 + 0x11) = uVar1;
    }
    iVar6 = iVar6 + 1;
  }
  return;
}



void copy_rect_to_screen2(ushort xstart,ushort ystart,ushort xend,ushort yend)

{
  uint uVar1;
  uint uVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  undefined2 *puVar9;
  uint uVar10;
  int iVar11;
  undefined2 *puVar12;
  
  iVar6 = Start_Of_Screen_Mem;
  iVar5 = Screen_Frame_Buffer_2;
  uVar8 = (uint)ystart;
  uVar7 = (uint)xstart;
  if (uVar8 < yend) {
    uVar10 = xend - uVar7;
    uVar1 = uVar10 * 0x8000 >> 0x10;
    do {
      if (uVar7 < xend) {
        iVar11 = uVar7 + uVar8 * 800;
        puVar9 = (undefined2 *)(iVar5 + iVar11 * 2);
        puVar12 = (undefined2 *)(iVar6 + iVar11 * 2);
        uVar2 = uVar1;
        puVar3 = puVar12 + -1;
        puVar4 = puVar9 + -1;
        if ((uVar10 & 1) != 0) {
          *puVar12 = *puVar9;
          puVar3 = puVar12;
          puVar4 = puVar9;
        }
        while (uVar2 != 0) {
          puVar3[1] = puVar4[1];
          puVar3[2] = puVar4[2];
          uVar2 = uVar2 - 1 & 0xffff;
          puVar3 = puVar3 + 2;
          puVar4 = puVar4 + 2;
        }
      }
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < yend);
    return;
  }
  return;
}



void FUN_8001d2dc(void)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  
  piVar1 = DAT_8001d340;
  piVar2 = *(int **)(DAT_8001d344 + (uint)*(byte *)(*DAT_8001d340 + 0x11) * 4);
  do {
    if (piVar2 == (int *)0x0) {
LAB_8001d324:
      iVar3 = *piVar1;
      *(undefined4 *)(iVar3 + 0x60) = 0;
      *(int *)(iVar3 + 0x14) = iVar3 + 8;
      iVar3 = *(int *)(DAT_8001d438 + (uint)*(byte *)(*DAT_8001d434 + 0x11) * 4);
                    // WARNING: Could not recover jumptable at 0x8001d430. Too many branches
                    // WARNING: Treating indirect jump as call
      (**(code **)(*(int *)(iVar3 + 0xc) + 0x30))(iVar3,*DAT_8001d434 + 8);
      return;
    }
    if (((int *)piVar2[3] != (int *)0x0) && (*(int *)piVar2[3] == 4)) {
      if (piVar2 != (int *)0x0) {
        thunk_FUN_800306e0();
      }
      goto LAB_8001d324;
    }
    piVar2 = (int *)*piVar2;
  } while( true );
}



void set_fg2_color(uint color)

{
                    // WARNING: Could not recover jumptable at 0x8001d354. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*DAT_8001d358 + 4))();
  return;
}



void set_color_based_on_select(uint color)

{
  int iVar1;
  uint *puVar2;
  
  iVar1 = *DAT_8001d37c;
  if ((*(byte *)(iVar1 + 0x10) & 4) == 0) {
    puVar2 = *(uint **)(iVar1 + 0x38);
  }
  else {
    puVar2 = *(uint **)(iVar1 + 0x3c);
  }
  *puVar2 = color;
  return;
}



void set_translated_brightness(void)

{
  uint *ptr;
  uint uVar1;
  
  uVar1 = translate_parameter(0x10,(uint)*(byte *)(DAT_8001d3b8 + 2));
  fpga_write_cmd('8');
  fpga_write_data((uchar)(uVar1 >> 8));
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = uVar1 & 0xff | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void FUN_8001d3bc(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  int *piVar1;
  int iVar2;
  undefined4 local_18;
  undefined4 uStack20;
  
  piVar1 = DAT_8001d408;
  iVar2 = *(int *)(DAT_8001d40c + (uint)*(byte *)(*DAT_8001d408 + 0x11) * 4);
  local_18 = param_3;
  uStack20 = param_4;
  (**(code **)(*(int *)(iVar2 + 0xc) + 0x30))(iVar2,&local_18);
  FUN_80019f98(*piVar1 + 8,param_1,&local_18);
  return;
}



void FUN_8001d410(void)

{
  int iVar1;
  
  iVar1 = *(int *)(DAT_8001d438 + (uint)*(byte *)(*DAT_8001d434 + 0x11) * 4);
                    // WARNING: Could not recover jumptable at 0x8001d430. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(int *)(iVar1 + 0xc) + 0x30))(iVar1,*DAT_8001d434 + 8);
  return;
}



void set_fg_color(uint color)

{
                    // WARNING: Could not recover jumptable at 0x8001d448. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)*DAT_8001d44c)();
  return;
}



void set_fg_color_1(uint color)

{
  int iVar1;
  uint *puVar2;
  
  iVar1 = *DAT_8001d470;
  if ((*(byte *)(iVar1 + 0x10) & 4) == 0) {
    puVar2 = *(uint **)(iVar1 + 0x3c);
  }
  else {
    puVar2 = *(uint **)(iVar1 + 0x38);
  }
  *puVar2 = color;
  return;
}



uchar swap_font_paint_mode(uchar mode)

{
  uchar uVar1;
  
                    // WARNING: Could not recover jumptable at 0x8001d480. Too many branches
                    // WARNING: Treating indirect jump as call
  uVar1 = (**(code **)(*DAT_8001d484 + 8))(mode);
  return uVar1;
}



undefined4 FUN_8001d488(undefined4 param_1,undefined4 param_2,undefined4 param_3,int param_4)

{
  code *pcVar1;
  undefined4 uVar2;
  int local_18;
  
  uVar2 = 1;
  local_18 = param_4;
  local_18 = FUN_800189d0();
  if ((local_18 != 0) &&
     (pcVar1 = (code *)(**(code **)(*(int *)(local_18 + 0xc) + 0x24))(&local_18,0x10),
     pcVar1 != (code *)0x0)) {
    (*pcVar1)(local_18,param_2,param_3);
    uVar2 = 0;
  }
  return uVar2;
}



void FUN_8001d4ec(uint param_1)

{
  int *piVar1;
  
  piVar1 = DAT_8001d508;
  *DAT_8001d508 = param_1 << 3;
  piVar1[4] = param_1 >> 0x1d;
  return;
}



undefined4 FUN_8001d50c(undefined4 param_1,undefined4 param_2,undefined4 param_3,int param_4)

{
  code *pcVar1;
  undefined4 uVar2;
  int local_18;
  
  uVar2 = 1;
  local_18 = param_4;
  local_18 = FUN_800189d0();
  if ((local_18 != 0) &&
     (pcVar1 = (code *)(**(code **)(*(int *)(local_18 + 0xc) + 0x24))(&local_18,0xb),
     pcVar1 != (code *)0x0)) {
    (*pcVar1)(local_18,param_2,param_3);
    uVar2 = 0;
  }
  return uVar2;
}



undefined4 FUN_8001d570(undefined4 param_1,undefined4 param_2,undefined4 param_3,int param_4)

{
  code *pcVar1;
  undefined4 uVar2;
  int local_18;
  
  uVar2 = 1;
  local_18 = param_4;
  local_18 = FUN_800189d0();
  if ((local_18 != 0) &&
     (pcVar1 = (code *)(**(code **)(*(int *)(local_18 + 0xc) + 0x24))(&local_18,10),
     pcVar1 != (code *)0x0)) {
    (*pcVar1)(local_18,param_2,param_3);
    uVar2 = 0;
  }
  return uVar2;
}



void sys_init_display(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  undefined4 uVar4;
  undefined4 *puVar5;
  uint *puVar6;
  int iVar7;
  int *piVar8;
  
  puVar5 = PORT_D_CFG0;
  iVar7 = 0;
  *Global_Frame_Buffer_Pointer = Start_Of_Screen_Mem;
  do {
    gpio_config_pin(puVar5,iVar7,2);
    uVar4 = Start_Of_Screen_Mem;
    iVar3 = Screen_Param_Struct;
    iVar2 = Global_Frame_Buffer_Pointer;
    iVar1 = DEBE_BASE;
    iVar7 = iVar7 + 1;
  } while (iVar7 < 0x16);
  iVar7 = DEBE_BASE + -0x254000;
  piVar8 = (int *)(Screen_Param_Struct + 8);
  *(int *)(Global_Frame_Buffer_Pointer + 4) = Screen_Param_Struct;
  *piVar8 = iVar1;
  *(undefined4 *)(iVar3 + 0xc) = 0;
  *(int *)(iVar3 + 0x10) = iVar7;
  *(undefined4 *)(iVar3 + 0x1c) = 800;
  *(undefined4 *)(iVar3 + 0x20) = 0x1e0;
  *(undefined4 *)(iVar3 + 0x2c) = 0x10;
  *(undefined4 *)(iVar3 + 0x4c) = 0x14;
  *(undefined4 *)(iVar3 + 0x50) = 0x16;
  *(undefined4 *)(iVar3 + 0x58) = 10;
  *(undefined4 *)(iVar3 + 0x5c) = 0;
  *(undefined4 *)(iVar3 + 0x18) = 1;
  *(undefined4 *)(iVar3 + 0x54) = 0x17;
  *(undefined4 *)(iVar3 + 0x44) = 0xd2;
  *(undefined4 *)(iVar3 + 0x48) = 0x2e;
  *(undefined4 *)(iVar3 + 0x14) = 0;
  *(undefined4 *)(iVar3 + 0x60) = 0;
  *(undefined4 *)(iVar3 + 100) = 1;
  *(undefined4 *)(iVar3 + 0x68) = 0;
  *(undefined4 *)(iVar3 + 0x30) = 2;
  *(undefined4 *)(iVar3 + 0x34) = 0;
  *(undefined4 *)(iVar3 + 0x38) = uVar4;
  iVar7 = 0x800;
  *(undefined4 *)(iVar3 + 0x3c) = 0;
  do {
    *(undefined4 *)(DEBE_BASE + iVar7) = 0;
    iVar7 = iVar7 + 4;
  } while (iVar7 < 0x1000);
  puVar5 = *(undefined4 **)(iVar3 + 0x10);
  *puVar5 = 0;
  puVar5[1] = 0;
  puVar5[0x11] = puVar5[0x11] & 0xfffffff;
  puVar5[0x23] = 0xffffffff;
  puVar5[0x3d] = 0xffffffff;
  debe_enable(*(uint *)(iVar2 + 4));
  init_video_clock(*(uint *)(iVar2 + 4));
  puVar6 = *(uint **)(*(int *)(iVar2 + 4) + 0x10);
  *puVar6 = *puVar6 | 0x80000000;
  return;
}



void FUN_8001d630(void)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  uint *puVar4;
  
  piVar1 = DAT_8001d65c;
  uVar2 = convert_color_via_call(*(uint *)(*DAT_8001d65c + 0x30));
  set_fg_color_1(uVar2);
  uVar2 = convert_color_via_call(*(uint *)(*piVar1 + 0x34));
  iVar3 = *DAT_8001d37c;
  if ((*(byte *)(iVar3 + 0x10) & 4) == 0) {
    puVar4 = *(uint **)(iVar3 + 0x38);
  }
  else {
    puVar4 = *(uint **)(iVar3 + 0x3c);
  }
  *puVar4 = uVar2;
  return;
}



void FUN_8001d660(void)

{
  int iVar1;
  undefined4 in_r3;
  
  FUN_80018800(PTR_PTR_8001d710,PTR_PTR_convert_color_via_table_8001d70c,0,0,in_r3);
  iVar1 = FUN_8001cf14();
  if (iVar1 == 0) {
    FUN_8001d50c(0,800,0x1e0);
    FUN_8001d570(0,800,0x1e0);
  }
  else {
    FUN_8001d50c(0,0x1e0,800);
    FUN_8001d570(0,0x1e0,800);
  }
  FUN_80019924(2);
  FUN_80019828(1,0,0x1df,0x1e0,0);
  FUN_80019828(0,0,799,0,800);
  return;
}



undefined4 FUN_8001d714(void)

{
  return 0;
}



void FUN_8001d71c(int param_1,int param_2,int param_3,int param_4,uint param_5,uint param_6,
                 uint param_7,int param_8,byte *param_9,int param_10,uint param_11)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  int iVar8;
  uint uVar9;
  int iVar10;
  bool bVar11;
  bool bVar12;
  byte *pbVar13;
  
  uVar9 = 0;
  if ((code **)*DAT_8001d9d4 == (code **)0x0) {
    iVar6 = param_2 + param_4;
    if ((param_5 | param_6) == 1) {
      iVar4 = *DAT_8001d9d8;
      iVar2 = *(short *)(iVar4 + 10) - param_2;
      if (0 < iVar2) {
        param_4 = param_4 - iVar2;
        if (param_4 < 1) {
          return;
        }
        param_9 = param_9 + iVar2 * param_8;
        param_2 = (int)*(short *)(iVar4 + 10);
      }
      iVar6 = (iVar6 + -1) - (int)*(short *)(iVar4 + 0xe);
      if ((iVar6 < 1) || (param_4 = param_4 - iVar6, 0 < param_4)) {
        iVar6 = (param_1 + param_3 + -1) - (int)*(short *)(iVar4 + 0xc);
        if (0 < iVar6) {
          param_3 = param_3 - iVar6;
        }
        param_1 = param_1 - param_11;
        if (param_1 < *(short *)(iVar4 + 8)) {
          iVar6 = *(short *)(iVar4 + 8) - param_1;
          uVar9 = iVar6 + param_11;
          param_1 = param_1 + (uVar9 - param_11 & 0xfffffff8);
          param_3 = param_3 - iVar6;
          param_9 = param_9 + ((int)uVar9 >> 3);
          param_11 = uVar9 & 7;
        }
        if (0 < param_3) {
          iVar6 = *(int *)(DAT_8001d9dc + (uint)*(byte *)(iVar4 + 0x11) * 4);
          (**(code **)(*(int *)(iVar6 + 0xc) + 4))
                    (iVar6,param_1,param_2,param_3,param_4,param_7,param_8,param_9,param_11,param_10
                    );
        }
      }
    }
    else {
      uVar1 = 8 - param_7;
      iVar6 = 0;
      while (iVar6 < param_4) {
        iVar2 = param_2 + param_6;
        iVar5 = iVar2 + -1;
        iVar8 = (int)*(short *)(*DAT_8001d9d8 + 10);
        bVar12 = SBORROW4(iVar8,iVar5);
        iVar4 = iVar8 - iVar5;
        bVar11 = iVar8 == iVar5;
        if (iVar8 <= iVar5) {
          iVar8 = (int)*(short *)(*DAT_8001d9d8 + 0xe);
          bVar12 = SBORROW4(param_2,iVar8);
          iVar4 = param_2 - iVar8;
          bVar11 = param_2 == iVar8;
        }
        if (bVar11 || iVar4 < 0 != bVar12) {
          iVar8 = 0;
          iVar10 = 0;
          iVar4 = param_1;
          pbVar13 = param_9;
          while (iVar10 < param_3) {
            if (iVar8 == 0) {
              iVar8 = 8;
              uVar9 = (uint)*pbVar13;
              pbVar13 = pbVar13 + 1;
            }
            iVar8 = iVar8 - param_7;
            uVar3 = uVar9 >> (uVar1 & 0xff);
            uVar9 = uVar9 << (param_7 & 0xff) & 0xff;
            if ((uVar3 != 0) || ((*(byte *)(*DAT_8001d9d8 + 0x10) & 2) == 0)) {
              uVar7 = **(uint **)(*DAT_8001d9d8 + 0x3c);
              if (param_10 != 0) {
                uVar3 = *(uint *)(param_10 + uVar3 * 4);
              }
              **(uint **)(*DAT_8001d9d8 + 0x3c) = uVar3;
              FUN_8001cd50(iVar4,param_2,iVar4 + param_5 + -1,iVar5);
              **(uint **)(*DAT_8001d9d8 + 0x3c) = uVar7;
            }
            iVar10 = iVar10 + 1;
            iVar4 = iVar4 + param_5;
          }
        }
        iVar6 = iVar6 + 1;
        param_9 = param_9 + param_8;
        param_2 = iVar2;
      }
    }
  }
  else {
    (**(code **)*DAT_8001d9d4)
              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10);
  }
  return;
}



undefined4 FUN_8001d9e0(uint param_1)

{
  undefined4 uVar1;
  bool bVar2;
  
  if (param_1 == 0) {
    return 0;
  }
  if ((param_1 & 0xfffffffe) == 0) {
    return 1;
  }
  if ((param_1 & 0xfffffffc) == 0) {
    return 2;
  }
  if ((param_1 & 0xfffffff8) != 0) {
    if ((param_1 & 0xfffffff0) == 0) {
      return 4;
    }
    if ((param_1 & 0xffffffe0) != 0) {
      if ((param_1 & 0xffffff00) == 0) {
        return 8;
      }
      bVar2 = param_1 >> 9 == 0;
      if (!bVar2) {
        bVar2 = param_1 >> 0xc == 0;
      }
      if (!bVar2) {
        bVar2 = param_1 >> 0xf == 0;
        if (!bVar2) {
          bVar2 = param_1 >> 0x10 == 0;
        }
        if (!bVar2) {
          if (param_1 >> 0x12 != 0) {
            if ((param_1 & 0xff000000) == 0) {
              uVar1 = 0x18;
            }
            else {
              uVar1 = 0x20;
            }
            return uVar1;
          }
          return 0x12;
        }
      }
      return 0x10;
    }
    return 5;
  }
  return 3;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 some_main_scope_handling_1(void)

{
  int iVar1;
  undefined4 uVar2;
  
  uVar2 = 0;
  iVar1 = FUN_8001d9e0();
  if (iVar1 == 1) {
    uVar2 = 1;
  }
  else {
    if (iVar1 - 2U < 7) {
      uVar2 = 8;
    }
    else {
      if (iVar1 - 9U < 8) {
        uVar2 = 0x10;
      }
      else {
        if (iVar1 - 0x11U < 0x10) {
          uVar2 = 0x20;
        }
      }
    }
  }
  return uVar2;
}


/*
Unable to decompile 'top_menu_handler'
Cause: Exception while decompiling 8001dabc: process: timeout

*/


// WARNING: Removing unreachable block (ram,0x8002688c)
// WARNING: Restarted to delay deadcode elimination for space: stack

byte * FUN_80020310(void)

{
  byte bVar1;
  char *pcVar2;
  int iVar3;
  undefined *puVar4;
  char *pcVar5;
  undefined4 *puVar6;
  char cVar7;
  byte *pbVar8;
  byte *pbVar9;
  byte *pbVar10;
  int iVar11;
  int iVar12;
  int iVar13;
  
  pcVar2 = DAT_800203bc;
  pbVar8 = DAT_800203b8;
  bVar1 = *DAT_800203b8;
  *DAT_800203b8 = bVar1 | 0x10;
  iVar11 = DAT_800203c0;
  cVar7 = *pcVar2;
  if (cVar7 != '\x02') {
    if (cVar7 == '\x03') {
      FUN_80026858(0,1);
    }
    else {
      if (cVar7 != '\x04' && cVar7 != '\x05') {
        return pbVar8;
      }
      *pcVar2 = '\0';
      FUN_800266bc(2);
      pbVar8 = (byte *)FUN_8001b66c(2);
      if (pbVar8 != (byte *)0x2) {
        return pbVar8;
      }
    }
    return (byte *)0x2;
  }
  if (*(char *)(DAT_800203c0 + 0xf) != '(') {
    return pbVar8;
  }
  *pbVar8 = bVar1 | 0x12;
  iVar3 = DAT_80023be0;
  pbVar8 = DAT_80023bd0;
  pbVar9 = (byte *)(uint)*(byte *)(iVar11 + 0xd);
  iVar12 = *(int *)(pcVar2 + 0xc);
  iVar11 = *(int *)(pcVar2 + 8);
  pbVar10 = (byte *)(uint)*DAT_80023bd0;
  if (pbVar10 == (byte *)0x0) {
    iVar13 = FUN_80023908(*(undefined *)(DAT_80023be0 + 0xd),0x28,iVar11,iVar12);
    if (iVar13 == 0) {
      return (byte *)s_ERR_read10_address_out_of_range__80023be4;
    }
    if ((*(byte *)(iVar3 + 0xc) & 0x80) == 0) {
      FUN_80035d58(s_ERR_read10_FAILED__80023c08);
      FUN_80002c08(2);
      iVar11 = DAT_80023c20;
      *(undefined *)(DAT_80023c20 + 2) = 5;
      *(undefined *)(iVar11 + 0xc) = 0x24;
      puVar6 = DAT_800268ac;
      *DAT_800268ac = DAT_800268a8;
      *(undefined *)(puVar6 + 3) = 1;
      FUN_8002a004(2,puVar6,0xd);
      puVar4 = DAT_800268b0;
      *DAT_800268b0 = 5;
      *puVar4 = 4;
      return (byte *)0x1;
    }
    FUN_80035d58(s_read10__80023bd4);
    *pbVar8 = 2;
  }
  else {
    if (pbVar10 != (byte *)0x2) {
      return pbVar10;
    }
    FUN_80035d58(s_read10__80023bd4);
  }
  pcVar5 = DAT_80023554;
  iVar3 = DAT_80023418;
  pcVar2 = DAT_80023414;
  if (*(int *)(DAT_8002344c + 0x30) == 1) {
    if (*DAT_80023554 == '\0') {
      *(int *)(DAT_80023554 + 0xc) = iVar12;
      *(undefined4 *)(pcVar5 + 4) = 0;
      *pcVar5 = '\x01';
    }
    else {
      if (*DAT_80023554 != '\x01') goto LAB_800234dc;
    }
    if (*(int *)(pcVar5 + 4) == 0) {
      cVar7 = FUN_80024558(0,iVar11,iVar12,DAT_80023558);
      if (cVar7 != '\0') {
        pcVar5[1] = pcVar5[1] | 8;
      }
      FUN_8002a004(2,DAT_80023558,0x200);
      iVar11 = 0x200;
      *(int *)(pcVar5 + 0xc) = *(int *)(pcVar5 + 0xc) + -1;
      *(int *)(pcVar5 + 4) = *(int *)(pcVar5 + 4) + 1;
    }
    else {
      FUN_8002a004(2,*(int *)(pcVar5 + 0x2c) + DAT_80023558,0x200);
      *(int *)(pcVar5 + 0xc) = *(int *)(pcVar5 + 0xc) + -1;
      *(int *)(pcVar5 + 4) = *(int *)(pcVar5 + 4) + 1;
      iVar11 = *(int *)(pcVar5 + 0x2c) + 0x200;
    }
    *(int *)(pcVar5 + 0x2c) = iVar11;
    *(int *)(DAT_8002355c + 8) = *(int *)(DAT_8002355c + 8) + -0x200;
LAB_800234dc:
    if (*(byte **)(pcVar5 + 0xc) == (byte *)0x0) {
      *(undefined4 *)(pcVar5 + 4) = 0;
      *(undefined4 *)(pcVar5 + 0x2c) = 0;
      *DAT_80023560 = 3;
      *pcVar5 = '\0';
      return (byte *)0x3;
    }
    return *(byte **)(pcVar5 + 0xc);
  }
  if (*(int *)(DAT_8002344c + 0x30) != 0) {
    return pbVar9;
  }
  if (*DAT_80023414 == '\0') {
    iVar13 = *(int *)(DAT_80023418 + (int)pbVar9 * 4);
    *(int *)(DAT_80023414 + 0x10) = iVar13 * iVar11;
    *(int *)(pcVar2 + 0x14) = iVar13 * iVar12;
    *pcVar2 = '\x01';
  }
  else {
    if (*DAT_80023414 != '\x01') goto LAB_800233e4;
  }
  memcpy((void *)(DAT_8002341c + -0x800),(void *)(*(int *)(pcVar2 + 0x10) + DAT_8002341c),
         *(int *)(iVar3 + (int)pbVar9 * 4));
  FUN_8002a004(2,DAT_80023420,0x200);
  iVar11 = DAT_80023424;
  *(int *)(pcVar2 + 0x10) = *(int *)(pcVar2 + 0x10) + 0x200;
  *(int *)(pcVar2 + 0x14) = *(int *)(pcVar2 + 0x14) + -0x200;
  *(int *)(iVar11 + 8) = *(int *)(iVar11 + 8) + -0x200;
LAB_800233e4:
  if (*(byte **)(pcVar2 + 0x14) == (byte *)0x0) {
    *(undefined4 *)(pcVar2 + 4) = 0;
    *(undefined4 *)(pcVar2 + 0x2c) = 0;
    puVar4 = DAT_80023428;
    *(undefined4 *)(pcVar2 + 0x10) = 0;
    *puVar4 = 3;
    *pcVar2 = '\0';
    return (byte *)0x0;
  }
  return *(byte **)(pcVar2 + 0x14);
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffe8 : 0x80023b28
// WARNING: Removing unreachable block (ram,0x80002c14)
// WARNING: Removing unreachable block (ram,0x80002c1c)
// WARNING: Removing unreachable block (ram,0x80002c20)
// WARNING: Removing unreachable block (ram,0x80002c24)
// WARNING: Removing unreachable block (ram,0x80002c30)
// WARNING: Restarted to delay deadcode elimination for space: stack

char * FUN_800203c4(undefined4 param_1,undefined2 param_2)

{
  byte bVar1;
  ushort uVar2;
  int *piVar3;
  byte *pbVar4;
  char *pcVar5;
  int iVar6;
  int iVar7;
  undefined *puVar8;
  int iVar9;
  int iVar10;
  undefined4 *puVar11;
  ushort *puVar12;
  undefined uVar13;
  char cVar14;
  uint uVar15;
  uint uVar16;
  char *pcVar17;
  undefined *puVar18;
  undefined4 uVar19;
  char *pcVar20;
  char *pcVar21;
  uint uVar22;
  int iVar23;
  int iVar24;
  int iVar25;
  int iVar26;
  bool bVar27;
  
  iVar23 = DAT_80020470;
  pcVar21 = DAT_8002046c;
  pbVar4 = DAT_80020468;
  bVar1 = *DAT_80020468;
  *DAT_80020468 = bVar1 | 0x10;
  cVar14 = *(char *)(iVar23 + 0xf);
  *(undefined2 *)(pcVar21 + 2) = param_2;
  *(undefined4 *)(pcVar21 + 4) = param_1;
  piVar3 = DAT_80002fa8;
  iVar24 = DAT_80002fa4;
  if (*pcVar21 != '\0') {
    if (*pcVar21 == '\x01') {
      if (cVar14 == '*') {
        *pbVar4 = bVar1 | 0x11;
        bVar1 = *(byte *)(iVar23 + 0xd);
        iVar23 = *(int *)(pcVar21 + 8);
        iVar24 = *(int *)(pcVar21 + 0xc);
LAB_80023e4c:
        pcVar5 = DAT_8002cdc0;
        iVar25 = DAT_8002ccb4;
        pcVar20 = DAT_8002ccb0;
        iVar26 = DAT_80023ed8;
        pcVar21 = DAT_80023ed4;
        pcVar17 = (char *)(uint)bVar1;
        if (*DAT_80023ed4 != '\0') {
          if (*DAT_80023ed4 != '\x01') {
            return pcVar17;
          }
          if (*(int *)(DAT_8002ccec + 0x30) == 1) {
            if (*DAT_8002cdc0 == '\0') {
              *(int *)(DAT_8002cdc0 + 0x18) = iVar23;
              *(int *)(pcVar5 + 0x1c) = iVar24;
              *(undefined4 *)(pcVar5 + 0x20) = 0;
              *pcVar5 = '\x01';
            }
            else {
              if (*DAT_8002cdc0 != '\x01') goto LAB_8002cd64;
            }
            memcpy((void *)(DAT_8002cdc4 + *(int *)(pcVar5 + 0x20) * 0x200),*DAT_8002cdc8,0x200);
            puVar12 = DAT_8002cdd0;
            iVar24 = DAT_8002cdcc;
            *(int *)(pcVar5 + 0x20) = *(int *)(pcVar5 + 0x20) + 1;
            *(uint *)(iVar24 + 8) = *(int *)(iVar24 + 8) - (uint)*puVar12;
LAB_8002cd64:
            if ((*(uint *)(pcVar5 + 0x20) < *(uint *)(pcVar5 + 0x1c)) &&
               ((char *)(uint)*DAT_8002cdd4 != (char *)0x4)) {
              return (char *)(uint)*DAT_8002cdd4;
            }
            cVar14 = FUN_80024730(0,*(undefined4 *)(pcVar5 + 0x18),*(uint *)(pcVar5 + 0x1c),
                                  DAT_8002cdc4);
            if (cVar14 != '\0') {
              pcVar5[1] = pcVar5[1] | 4;
            }
            *(undefined4 *)(pcVar5 + 0x20) = 0;
            pcVar21 = (char *)FUN_80026858(0,1);
            *pcVar5 = '\0';
            return pcVar21;
          }
          if (*(int *)(DAT_8002ccec + 0x30) != 0) {
            return pcVar17;
          }
          if (*DAT_8002ccb0 == '\0') {
            iVar26 = *(int *)(DAT_8002ccb4 + (int)pcVar17 * 4);
            *(int *)(DAT_8002ccb0 + 0x24) = iVar26 * iVar23;
            *(int *)(pcVar20 + 0x28) = iVar26 * iVar24;
            *pcVar20 = '\x01';
          }
          else {
            if (*DAT_8002ccb0 != '\x01') goto LAB_8002cc78;
          }
          puVar12 = DAT_8002ccb8;
          uVar2 = *DAT_8002ccb8;
          iVar24 = *(int *)(pcVar20 + 0x24) + (uint)uVar2;
          *(int *)(pcVar20 + 0x24) = iVar24;
          *(uint *)(pcVar20 + 0x28) = *(int *)(pcVar20 + 0x28) - (uint)uVar2;
          iVar23 = *(int *)(iVar25 + (int)pcVar17 * 4);
          memcpy((void *)((iVar24 - iVar23) + DAT_8002ccbc),*DAT_8002ccc0,iVar23);
          *(uint *)(DAT_8002ccc4 + 8) = *(int *)(DAT_8002ccc4 + 8) - (uint)*puVar12;
LAB_8002cc78:
          if ((*(int *)(pcVar20 + 0x28) != 0) && ((char *)(uint)*DAT_8002ccc8 != (char *)0x4)) {
            return (char *)(uint)*DAT_8002ccc8;
          }
          *(undefined4 *)(pcVar20 + 8) = 0;
          pcVar21 = (char *)FUN_80026858(0,1);
          *pcVar20 = '\0';
          return pcVar21;
        }
        iVar24 = FUN_80023908(*(undefined *)(DAT_80023ed8 + 0xd),0x2a,iVar23);
        if (iVar24 == 0) {
          return (char *)0x0;
        }
        if ((*(byte *)(iVar26 + 0xc) & 0x80) == 0) {
          *pcVar21 = '\x01';
          return (char *)0x1;
        }
        FUN_80002c08(0);
        iVar24 = DAT_80023edc;
        *(undefined *)(DAT_80023edc + 2) = 5;
        *(undefined *)(iVar24 + 0xc) = 0x24;
        bVar27 = false;
        uVar13 = 1;
        goto code_r0x80026858;
      }
    }
    else {
      FUN_800266c0(1,2);
    }
    FUN_800266bc(2);
    FUN_800268b4(*(undefined *)(iVar23 + 0xd),5,0x24);
    bVar27 = false;
    uVar13 = 2;
    goto code_r0x80026858;
  }
  uVar22 = (uint)*(ushort *)(DAT_80002fa4 + 2);
  if (uVar22 != 0) {
    if ((*(ushort *)(DAT_80002fa4 + 2) & 1) != 0) {
      *(undefined *)DAT_80002fa8 = **(undefined **)(DAT_80002fa4 + 4);
    }
    if ((uVar22 & 1) < uVar22) {
      iVar23 = *(int *)(iVar24 + 4);
      uVar15 = uVar22 & 1;
      do {
        *(undefined *)((int)piVar3 + uVar15) = *(undefined *)(iVar23 + uVar15);
        uVar16 = uVar15 + 2;
        *(undefined *)((int)piVar3 + uVar15 + 1) = *(undefined *)(iVar23 + uVar15 + 1);
        uVar15 = uVar16;
      } while (uVar16 < uVar22);
    }
  }
  iVar23 = DAT_80002fac;
  *(int *)(DAT_80002fac + 4) = piVar3[1];
  *(int *)(iVar23 + 8) = piVar3[2];
  if (uVar22 != 0x1f) {
    FUN_80035d58(s_Valid_CBW_1_80002fb0);
    FUN_800266c0(1,2);
    FUN_800266bc(2);
    *piVar3 = 0;
    FUN_800268b4(*(undefined *)((int)piVar3 + 0xd),5,0x1a);
    bVar27 = false;
    uVar13 = 1;
    goto code_r0x80026858;
  }
  if (*(char *)((int)piVar3 + 0xf) == '(' || *(char *)((int)piVar3 + 0xf) == '*') {
    *(uint *)(iVar24 + 8) =
         (uint)*(byte *)(piVar3 + 5) | (uint)*(byte *)((int)piVar3 + 0x11) << 0x18 |
         (uint)*(byte *)((int)piVar3 + 0x12) << 0x10 | (uint)*(byte *)((int)piVar3 + 0x13) << 8;
    *(uint *)(iVar24 + 0xc) =
         (uint)CONCAT11(*(undefined *)((int)piVar3 + 0x16),*(undefined *)((int)piVar3 + 0x17));
  }
  if (*piVar3 != DAT_80002fc0) {
    FUN_80035d58(s_Valid_CBW_4_80003050);
    FUN_800266c0(1,2);
    FUN_800266bc(2);
    FUN_800268b4(*(undefined *)((int)piVar3 + 0xd),5,0x20);
    bVar27 = false;
    uVar13 = 1;
    goto code_r0x80026858;
  }
  if (((*DAT_80002fc4 < (uint)*(byte *)((int)piVar3 + 0xd)) || (*(byte *)((int)piVar3 + 0xe) == 0))
     || (0x10 < *(byte *)((int)piVar3 + 0xe))) {
    FUN_80035d58(s_Valid_CBW_2_80002fc8);
    FUN_800266c0(1,2);
    FUN_800266bc(2);
    FUN_800268b4(*(undefined *)((int)piVar3 + 0xd),5,0x24);
    bVar27 = false;
    uVar13 = 1;
    goto code_r0x80026858;
  }
  FUN_80035d58(s_CTRL___02X_80002fd8);
  iVar10 = DAT_80023de8;
  iVar9 = DAT_80023d6c;
  puVar8 = DAT_80023d68;
  iVar7 = DAT_80023d60;
  iVar6 = DAT_80023ccc;
  puVar18 = DAT_80023cc8;
  iVar25 = DAT_80023cc0;
  iVar26 = DAT_80023be0;
  pbVar4 = DAT_80023bd0;
  iVar23 = DAT_800239fc;
  bVar1 = *(byte *)((int)piVar3 + 0xf);
  if (bVar1 == 0x25) {
    uVar22 = (uint)*(byte *)((int)piVar3 + 0xd);
    if (1 < uVar22) {
      *(undefined *)(DAT_80023cc0 + 2) = 2;
      *(undefined *)(iVar25 + 0xc) = 0x3a;
      FUN_80026858(1);
      return (char *)0x1;
    }
    iVar24 = *(int *)(DAT_80023cc4 + uVar22 * 4) + -1;
    *DAT_80023cc8 = (char)((uint)iVar24 >> 0x18);
    puVar18[1] = (char)((uint)iVar24 >> 0x10);
    puVar18[2] = (char)((uint)iVar24 >> 8);
    puVar18[3] = (char)iVar24;
    uVar19 = *(undefined4 *)(iVar6 + uVar22 * 4);
    puVar18[4] = (char)((uint)uVar19 >> 0x18);
    puVar18[5] = (char)((uint)uVar19 >> 0x10);
    puVar18[6] = (char)((uint)uVar19 >> 8);
    puVar18[7] = (char)uVar19;
    uVar22 = 8;
    puVar18 = DAT_80023cc8;
    goto FUN_80029198;
  }
  if (bVar1 < 0x26) {
    if (bVar1 != 0x15) {
      if (0x15 < bVar1) {
        switch(bVar1) {
        case 0x1a:
          uVar22 = 4;
          puVar18 = DAT_80023ae0;
          break;
        case 0x1b:
        case 0x1e:
          bVar27 = true;
          uVar13 = 0;
          goto code_r0x80026858;
        default:
          goto switchD_80002e34_caseD_1c;
        case 0x1d:
          goto LAB_80023a48;
        case 0x23:
          uVar22 = (uint)*(byte *)((int)piVar3 + 0xd);
          if (1 < uVar22) {
            *(undefined *)(DAT_80023d60 + 2) = 2;
            *(undefined *)(iVar7 + 0xc) = 0x3a;
            FUN_80026858(1);
            return (char *)0x1;
          }
          uVar19 = *(undefined4 *)(DAT_80023d64 + uVar22 * 4);
          DAT_80023d68[4] = (char)((uint)uVar19 >> 0x18);
          puVar8[5] = (char)((uint)uVar19 >> 0x10);
          puVar8[6] = (char)((uint)uVar19 >> 8);
          puVar8[7] = (char)uVar19;
          uVar19 = *(undefined4 *)(iVar9 + uVar22 * 4);
          puVar8[9] = (char)((uint)uVar19 >> 0x10);
          puVar8[10] = (char)((uint)uVar19 >> 8);
          puVar8[0xb] = (char)uVar19;
          uVar22 = 0xc;
          puVar18 = DAT_80023d68;
        }
FUN_80029198:
        FUN_80037f54(1,puVar18,uVar22);
        pcVar21 = DAT_800291d8;
        *DAT_800291dc = 3;
        *(uint *)(pcVar21 + 8) = *(int *)(pcVar21 + 8) - uVar22;
        pcVar21[0xc] = '\0';
        return pcVar21;
      }
      if (bVar1 != 8) {
        if (bVar1 < 9) {
          if (bVar1 == 0) {
            if (1 < *(byte *)((int)piVar3 + 0xd)) {
              *(undefined *)(DAT_80023de8 + 2) = 2;
              *(undefined *)(iVar10 + 0xc) = 0x3a;
              FUN_80026858(1);
              return (char *)0x1;
            }
            bVar27 = true;
            uVar13 = 0;
            goto code_r0x80026858;
          }
          if (bVar1 == 3) {
            uVar22 = (uint)*(byte *)(DAT_80023d88 + 0x13);
            puVar18 = DAT_80023d8c;
            if (0x12 < uVar22) {
              uVar22 = 0x12;
            }
            goto FUN_80029198;
          }
          if (bVar1 == 4) {
            if ((char *)0x1 < (char *)(uint)*(byte *)((int)piVar3 + 0xd)) {
              *(undefined *)(DAT_800239fc + 2) = 2;
              *(undefined *)(iVar23 + 0xc) = 0x3a;
              FUN_80026858(1);
              return (char *)0x1;
            }
            return (char *)(uint)*(byte *)((int)piVar3 + 0xd);
          }
        }
        else {
          if (bVar1 == 10) goto LAB_80023a48;
          if (bVar1 == 0x12) {
            if ((*(byte *)(DAT_80023a38 + 0x10) & 1) == 0) {
              uVar22 = (uint)*(byte *)(DAT_80023a38 + 0x13);
              puVar18 = DAT_80023a40;
              if (*(char *)((int)piVar3 + 0xd) != '\0') {
                puVar18 = DAT_80023a44;
              }
              if (0x24 < uVar22) {
                uVar22 = 0x24;
              }
            }
            else {
              uVar22 = 5;
              puVar18 = DAT_80023a3c;
            }
            goto FUN_80029198;
          }
        }
switchD_80002e34_caseD_1c:
        FUN_80035d58(s_Valid_CBW_3_80002fe8);
        FUN_800266c0(1,2);
        FUN_800266bc(2);
        FUN_800268b4(*(undefined *)((int)piVar3 + 0xd),5,0x20);
        bVar27 = false;
        uVar13 = 1;
        goto code_r0x80026858;
      }
    }
  }
  else {
    if (bVar1 != 0x8a) {
      if (bVar1 < 0x8b) {
        if (bVar1 != 0x55) {
          if (bVar1 < 0x56) {
            if (bVar1 == 0x28) {
              pcVar21 = (char *)(uint)*(byte *)((int)piVar3 + 0xd);
              iVar23 = *(int *)(iVar24 + 8);
              iVar24 = *(int *)(iVar24 + 0xc);
              pcVar20 = (char *)(uint)*DAT_80023bd0;
              if (pcVar20 == (char *)0x0) {
                iVar25 = FUN_80023908(*(undefined *)(DAT_80023be0 + 0xd),0x28,iVar23,iVar24);
                if (iVar25 == 0) {
                  return s_ERR_read10_address_out_of_range__80023be4;
                }
                if ((*(byte *)(iVar26 + 0xc) & 0x80) == 0) {
                  FUN_80035d58(s_ERR_read10_FAILED__80023c08);
                  FUN_80002c08(2);
                  iVar24 = DAT_80023c20;
                  *(undefined *)(DAT_80023c20 + 2) = 5;
                  *(undefined *)(iVar24 + 0xc) = 0x24;
                  bVar27 = true;
                  uVar13 = 1;
                  goto code_r0x80026858;
                }
                FUN_80035d58(s_read10__80023bd4);
                *pbVar4 = 2;
              }
              else {
                if (pcVar20 != (char *)0x2) {
                  return pcVar20;
                }
                FUN_80035d58(s_read10__80023bd4);
              }
              pcVar5 = DAT_80023554;
              iVar26 = DAT_80023418;
              pcVar20 = DAT_80023414;
              if (*(int *)(DAT_8002344c + 0x30) == 1) {
                if (*DAT_80023554 == '\0') {
                  *(int *)(DAT_80023554 + 0xc) = iVar24;
                  *(undefined4 *)(pcVar5 + 4) = 0;
                  *pcVar5 = '\x01';
                }
                else {
                  if (*DAT_80023554 != '\x01') goto LAB_800234dc;
                }
                if (*(int *)(pcVar5 + 4) == 0) {
                  cVar14 = FUN_80024558(0,iVar23,iVar24,DAT_80023558);
                  if (cVar14 != '\0') {
                    pcVar5[1] = pcVar5[1] | 8;
                  }
                  FUN_8002a004(2,DAT_80023558,0x200);
                  iVar24 = 0x200;
                  *(int *)(pcVar5 + 0xc) = *(int *)(pcVar5 + 0xc) + -1;
                  *(int *)(pcVar5 + 4) = *(int *)(pcVar5 + 4) + 1;
                }
                else {
                  FUN_8002a004(2,*(int *)(pcVar5 + 0x2c) + DAT_80023558,0x200);
                  *(int *)(pcVar5 + 0xc) = *(int *)(pcVar5 + 0xc) + -1;
                  *(int *)(pcVar5 + 4) = *(int *)(pcVar5 + 4) + 1;
                  iVar24 = *(int *)(pcVar5 + 0x2c) + 0x200;
                }
                *(int *)(pcVar5 + 0x2c) = iVar24;
                *(int *)(DAT_8002355c + 8) = *(int *)(DAT_8002355c + 8) + -0x200;
LAB_800234dc:
                if (*(char **)(pcVar5 + 0xc) != (char *)0x0) {
                  return *(char **)(pcVar5 + 0xc);
                }
                *(undefined4 *)(pcVar5 + 4) = 0;
                *(undefined4 *)(pcVar5 + 0x2c) = 0;
                *DAT_80023560 = 3;
                *pcVar5 = '\0';
                return (char *)0x3;
              }
              if (*(int *)(DAT_8002344c + 0x30) != 0) {
                return pcVar21;
              }
              if (*DAT_80023414 == '\0') {
                iVar25 = *(int *)(DAT_80023418 + (int)pcVar21 * 4);
                *(int *)(DAT_80023414 + 0x10) = iVar25 * iVar23;
                *(int *)(pcVar20 + 0x14) = iVar25 * iVar24;
                *pcVar20 = '\x01';
              }
              else {
                if (*DAT_80023414 != '\x01') goto LAB_800233e4;
              }
              memcpy((void *)(DAT_8002341c + -0x800),
                     (void *)(*(int *)(pcVar20 + 0x10) + DAT_8002341c),
                     *(int *)(iVar26 + (int)pcVar21 * 4));
              FUN_8002a004(2,DAT_80023420,0x200);
              iVar24 = DAT_80023424;
              *(int *)(pcVar20 + 0x10) = *(int *)(pcVar20 + 0x10) + 0x200;
              *(int *)(pcVar20 + 0x14) = *(int *)(pcVar20 + 0x14) + -0x200;
              *(int *)(iVar24 + 8) = *(int *)(iVar24 + 8) + -0x200;
LAB_800233e4:
              if (*(char **)(pcVar20 + 0x14) != (char *)0x0) {
                return *(char **)(pcVar20 + 0x14);
              }
              *(undefined4 *)(pcVar20 + 4) = 0;
              *(undefined4 *)(pcVar20 + 0x2c) = 0;
              puVar18 = DAT_80023428;
              *(undefined4 *)(pcVar20 + 0x10) = 0;
              *puVar18 = 3;
              *pcVar20 = '\0';
              return (char *)0x0;
            }
            if (bVar1 == 0x2a) {
              bVar1 = *(byte *)((int)piVar3 + 0xd);
              iVar23 = *(int *)(iVar24 + 8);
              iVar24 = *(int *)(iVar24 + 0xc);
              goto LAB_80023e4c;
            }
            if (bVar1 == 0x2f) {
              bVar27 = *(int *)(DAT_80023e44 + 8) == 0;
              if (bVar27) {
                bVar27 = (*(byte *)(DAT_80023e44 + 0x10) & 4) == 0;
              }
              if (bVar27) {
                bVar27 = true;
                uVar13 = 0;
              }
              else {
                FUN_80002c08(2);
                iVar24 = DAT_80023e48;
                *(undefined *)(DAT_80023e48 + 2) = 5;
                *(undefined *)(iVar24 + 0xc) = 0x24;
                bVar27 = false;
                uVar13 = 1;
              }
              goto code_r0x80026858;
            }
          }
          else {
            if (bVar1 == 0x5a) {
              uVar22 = 8;
              puVar18 = DAT_80023ad0;
              goto FUN_80029198;
            }
            if (bVar1 == 0x88) goto LAB_80023a48;
          }
          goto switchD_80002e34_caseD_1c;
        }
      }
      else {
        if (bVar1 != 0xa8) {
          if (bVar1 < 0xa9) {
            if (bVar1 != 0x8f && bVar1 != 0x9e) goto switchD_80002e34_caseD_1c;
          }
          else {
            if (bVar1 != 0xaa && bVar1 != 0xaf) goto switchD_80002e34_caseD_1c;
          }
        }
      }
    }
  }
LAB_80023a48:
  if (*(int *)(DAT_80023aa8 + 8) == 0) {
    FUN_80002c08(0);
  }
  else {
    if ((*(byte *)(DAT_80023aa8 + 0xc) & 0x80) == 0) {
      uVar19 = 2;
    }
    else {
      uVar19 = 0;
    }
    FUN_80002c08(uVar19);
  }
  FUN_80035d58(s_SCSI_Invalid_Cmd_80023aac);
  iVar24 = DAT_80023ac0;
  *(undefined *)(DAT_80023ac0 + 2) = 5;
  *(undefined *)(iVar24 + 0xc) = 0x20;
  bVar27 = false;
  uVar13 = 1;
code_r0x80026858:
  puVar11 = DAT_800268ac;
  *DAT_800268ac = DAT_800268a8;
  *(undefined *)(puVar11 + 3) = uVar13;
  FUN_8002a004(2,puVar11,0xd);
  pcVar21 = DAT_800268b0;
  *DAT_800268b0 = '\x05';
  if (bVar27) {
    *pcVar21 = '\x04';
    return (char *)0x1;
  }
  return pcVar21;
}



void FUN_80020474(char *param_1,uint param_2)

{
  char cVar1;
  
  if (param_2 < 100) {
    cVar1 = (char)param_2 + (char)(uint)((ulonglong)param_2 * (ulonglong)DAT_80020530 >> 0x23) * -10
            + '0';
    if (param_2 < 10) {
      *param_1 = cVar1;
      param_1[1] = '%';
      param_1[2] = '\0';
    }
    else {
      *param_1 = (char)((DAT_80020530 & ~(DAT_80020530 << 0x10)) * param_2 >> 0x13) + '0';
      param_1[1] = cVar1;
      param_1[2] = '%';
      param_1[3] = '\0';
    }
  }
  else {
    *param_1 = '1';
    param_1[1] = '0';
    param_1[2] = '0';
    param_1[3] = '%';
    param_1[4] = '\0';
  }
  if (*(char *)(DAT_80020534 + 0x21) != '\0') {
    *param_1 = '*';
    param_1[1] = '*';
    param_1[2] = '*';
    param_1[3] = '\0';
    return;
  }
  return;
}



void FUN_80020538(char *param_1,uint param_2)

{
  uint uVar1;
  uint uVar2;
  char cVar3;
  ulonglong uVar4;
  longlong lVar5;
  char cVar6;
  uint uVar7;
  uint uVar8;
  undefined4 uVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  
  uVar12 = DAT_80020984;
  uVar11 = DAT_80020980;
  uVar10 = DAT_80020978;
  uVar9 = DAT_80020974;
  uVar8 = DAT_80020970;
  uVar7 = DAT_80020960;
  uVar2 = DAT_8002095c;
  uVar1 = DAT_80020954;
  if (param_2 < DAT_80020940) {
    if (DAT_80020958 <= param_2) {
      uVar4 = (ulonglong)DAT_80020964;
      *param_1 = (byte)(param_2 * uVar4 >> 0x39) + 0x30;
      param_2 = param_2 + DAT_80020968 * (uint)(param_2 * uVar4 >> 0x39) * 0x100;
      uVar1 = (uint)((ulonglong)param_2 * (ulonglong)uVar2 >> 0x36);
      param_1[1] = (char)uVar1 + '0';
      param_1[2] = (char)(uint)((ulonglong)(param_2 + DAT_8002096c * uVar1 * 0x80) *
                                (ulonglong)uVar7 >> 0x32) + '0';
      param_1[3] = 'M';
      param_1[4] = 'H';
      param_1[5] = 'z';
      param_1[6] = '\0';
      goto LAB_80020910;
    }
    if (DAT_80020944 <= param_2) {
      uVar1 = (uint)((ulonglong)param_2 * (ulonglong)DAT_8002095c >> 0x36);
      *param_1 = (char)uVar1 + '0';
      uVar9 = DAT_80020974;
      param_2 = param_2 + DAT_8002096c * uVar1 * 0x80;
      lVar5 = (ulonglong)param_2 * (ulonglong)uVar7;
      param_1[1] = (char)(uint)((ulonglong)lVar5 >> 0x32) + '0';
      param_1[2] = '.';
      param_1[3] = (char)((ulonglong)uVar8 *
                          (ulonglong)
                          (param_2 +
                          (int)(short)(ushort)((ulonglong)lVar5 >> 0x32) * (int)(short)uVar9 * 0x40)
                          + (ulonglong)uVar8 >> 0x30) + '0';
      param_1[4] = 'M';
      param_1[5] = 'H';
      param_1[6] = 'z';
      param_1[7] = '\0';
      goto LAB_80020910;
    }
    if (DAT_80020948 <= param_2) {
      uVar4 = (ulonglong)DAT_80020960;
      param_1[1] = '.';
      uVar1 = DAT_80020970;
      *param_1 = (char)(uint)(param_2 * uVar4 >> 0x32) + '0';
      uVar2 = DAT_80020970;
      param_2 = param_2 + (int)(short)(ushort)(param_2 * uVar4 >> 0x32) * (int)(short)uVar9 * 0x40;
      param_1[2] = (char)((ulonglong)uVar8 * (ulonglong)param_2 + (ulonglong)uVar1 >> 0x30) + '0';
      param_1[3] = (char)(uint)((ulonglong)
                                (param_2 +
                                (uint)((ulonglong)uVar8 * (ulonglong)param_2 + (ulonglong)uVar2 >>
                                      0x30) * DAT_8002097c * 0x20) * (ulonglong)uVar10 >> 0x2d) +
                   '0';
      param_1[4] = 'M';
      param_1[5] = 'H';
      param_1[6] = 'z';
      param_1[7] = '\0';
      goto LAB_80020910;
    }
    if (DAT_8002094c <= param_2) {
      *param_1 = (char)((ulonglong)DAT_80020970 * (ulonglong)param_2 + (ulonglong)DAT_80020970 >>
                       0x30) + '0';
      uVar1 = DAT_80020970;
      param_1[1] = (char)(uint)((ulonglong)
                                (param_2 +
                                (uint)((ulonglong)uVar8 * (ulonglong)param_2 + (ulonglong)uVar8 >>
                                      0x30) * -100000) * (ulonglong)uVar10 >> 0x2d) + '0';
      param_2 = param_2 + (uint)((ulonglong)uVar8 * (ulonglong)param_2 + (ulonglong)uVar1 >> 0x30) *
                          -100000;
      param_1[2] = (char)(uint)((ulonglong)
                                (param_2 +
                                (uint)((ulonglong)param_2 * (ulonglong)uVar10 >> 0x2d) * -10000) *
                                (ulonglong)uVar11 >> 0x26) + '0';
      param_1[3] = 'K';
      param_1[4] = 'H';
      param_1[5] = 'z';
      param_1[6] = '\0';
      goto LAB_80020910;
    }
    if (DAT_80020950 <= param_2) {
      uVar1 = (uint)((ulonglong)param_2 * (ulonglong)DAT_80020978 >> 0x2d);
      *param_1 = (char)uVar1 + '0';
      param_2 = param_2 + uVar1 * -10000;
      uVar1 = (uint)((ulonglong)param_2 * (ulonglong)uVar11 >> 0x26);
      param_1[1] = (char)uVar1 + '0';
      param_1[2] = '.';
      param_1[3] = (char)(uint)((ulonglong)(param_2 + uVar1 * -1000) * (ulonglong)uVar12 >> 0x25) +
                   '0';
      param_1[4] = 'K';
      param_1[5] = 'H';
      param_1[6] = 'z';
      param_1[7] = '\0';
      goto LAB_80020910;
    }
    if (999 < param_2) {
      uVar4 = (ulonglong)DAT_80020980;
      param_1[1] = '.';
      uVar2 = (uint)(param_2 * uVar4 >> 0x26);
      *param_1 = (char)uVar2 + '0';
      param_2 = param_2 + uVar2 * -1000;
      uVar2 = (uint)((ulonglong)param_2 * (ulonglong)uVar12 >> 0x25);
      param_1[2] = (char)uVar2 + '0';
      param_1[3] = (char)(uint)((ulonglong)(param_2 + uVar2 * -100) * (ulonglong)uVar1 >> 0x23) +
                   '0';
      param_1[4] = 'K';
      param_1[5] = 'H';
      param_1[6] = 'z';
      param_1[7] = '\0';
      goto LAB_80020910;
    }
    cVar6 = (char)(uint)((ulonglong)param_2 * (ulonglong)DAT_80020954 >> 0x23);
    cVar3 = (char)param_2 + cVar6 * -10 + '0';
    if (99 < param_2) {
      uVar2 = (uint)((ulonglong)param_2 * (ulonglong)DAT_80020984 >> 0x25);
      *param_1 = (char)uVar2 + '0';
      param_1[1] = (char)(uint)((ulonglong)(param_2 + uVar2 * -100) * (ulonglong)uVar1 >> 0x23) +
                   '0';
      param_1[2] = cVar3;
      param_1[3] = 'H';
      param_1[4] = 'z';
      param_1[5] = '\0';
      goto LAB_80020910;
    }
    if (9 < param_2) {
      *param_1 = cVar6 + '0';
      param_1[1] = cVar3;
      param_1[2] = 'H';
      param_1[3] = 'z';
      param_1[4] = '\0';
      goto LAB_80020910;
    }
  }
  else {
    param_2 = 0;
  }
  *param_1 = (char)param_2 +
             (char)(uint)((ulonglong)param_2 * (ulonglong)DAT_80020954 >> 0x23) * -10 + '0';
  param_1[1] = 'H';
  param_1[2] = 'z';
  param_1[3] = '\0';
LAB_80020910:
  if (*(char *)(DAT_80020988 + 0x21) != '\0') {
    *param_1 = '*';
    param_1[1] = '*';
    param_1[2] = '*';
    param_1[3] = '\0';
    return;
  }
  return;
}



void FUN_8002098c(void)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  undefined *puVar4;
  
  iVar1 = DAT_80020c10;
  uVar2 = 0;
  do {
    switch(*(undefined *)(iVar1 + uVar2)) {
    case 0:
      puVar4 = (undefined *)0x0;
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = 0;
      break;
    case 1:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c14;
      puVar4 = PTR_DAT_80020c18;
      break;
    case 2:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c1c;
      puVar4 = PTR_DAT_80020c20;
      break;
    case 3:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c24;
      puVar4 = DAT_80020c28;
      break;
    case 4:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c2c;
      puVar4 = DAT_80020c30;
      break;
    case 5:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c34;
      puVar4 = DAT_80020c38;
      break;
    case 6:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c3c;
      puVar4 = DAT_80020c40;
      break;
    case 7:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c44;
      puVar4 = DAT_80020c48;
      break;
    case 8:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c4c;
      puVar4 = DAT_80020c50;
      break;
    case 9:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c54;
      puVar4 = DAT_80020c58;
      break;
    case 10:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c5c;
      puVar4 = DAT_80020c60;
      break;
    case 0xb:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c64;
      puVar4 = DAT_80020c68;
      break;
    case 0xc:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c6c;
      puVar4 = DAT_80020c70;
      break;
    case 0xd:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c74;
      puVar4 = PTR_DAT_80020c18;
      break;
    case 0xe:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c78;
      puVar4 = PTR_DAT_80020c20;
      break;
    case 0xf:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c7c;
      puVar4 = DAT_80020c28;
      break;
    case 0x10:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c80;
      puVar4 = DAT_80020c30;
      break;
    case 0x11:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c84;
      puVar4 = DAT_80020c38;
      break;
    case 0x12:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c88;
      puVar4 = DAT_80020c40;
      break;
    case 0x13:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c8c;
      puVar4 = DAT_80020c48;
      break;
    case 0x14:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c90;
      puVar4 = DAT_80020c50;
      break;
    case 0x15:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c94;
      puVar4 = DAT_80020c58;
      break;
    case 0x16:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c98;
      puVar4 = DAT_80020c60;
      break;
    case 0x17:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020c9c;
      puVar4 = DAT_80020c68;
      break;
    case 0x18:
      iVar3 = iVar1 + uVar2 * 4;
      *(undefined4 *)(iVar3 + 0x18) = DAT_80020ca0;
      *(undefined **)(iVar3 + 0x78) = DAT_80020c70;
    default:
      goto switchD_8002099c_caseD_19;
    }
    *(undefined **)(iVar3 + 0x78) = puVar4;
switchD_8002099c_caseD_19:
    uVar2 = uVar2 + 1 & 0xff;
    if (0x17 < uVar2) {
      return;
    }
  } while( true );
}



void FUN_80020ca4(char *param_1,uint param_2)

{
  uint uVar1;
  char cVar2;
  ulonglong uVar3;
  ulonglong uVar4;
  longlong lVar5;
  char cVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  undefined4 uVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  uint uVar15;
  
  uVar14 = DAT_80021160;
  uVar13 = DAT_8002115c;
  uVar12 = DAT_80021154;
  uVar11 = DAT_80021148;
  uVar10 = DAT_80021140;
  uVar9 = DAT_8002113c;
  uVar8 = DAT_80021130;
  uVar7 = DAT_80021120;
  uVar1 = DAT_8002111c;
  uVar15 = DAT_8002111c + ((int)DAT_8002111c >> 2);
  if (param_2 < DAT_80021118) {
    if (param_2 < DAT_8002112c) {
      if (param_2 < DAT_80021138) {
        if (param_2 < DAT_80021144) {
          if (param_2 < DAT_80021150) {
            if (param_2 < DAT_80021158) {
              if (param_2 < 1000) {
                cVar6 = (char)(uint)((ulonglong)param_2 * (ulonglong)DAT_80021160 >> 0x23);
                cVar2 = (char)param_2 + cVar6 * -10 + '0';
                if (param_2 < 100) {
                  if (param_2 < 10) {
                    *param_1 = cVar2;
                    param_1[1] = 'n';
                    param_1[2] = 'S';
                    param_1[3] = '\0';
                  }
                  else {
                    *param_1 = cVar6 + '0';
                    param_1[1] = cVar2;
                    param_1[2] = 'n';
                    param_1[3] = 'S';
                    param_1[4] = '\0';
                  }
                }
                else {
                  uVar1 = (uint)((ulonglong)param_2 * (ulonglong)DAT_8002115c >> 0x25);
                  *param_1 = (char)uVar1 + '0';
                  param_1[1] = (char)(uint)((ulonglong)(param_2 + uVar1 * -100) * (ulonglong)uVar14
                                           >> 0x23) + '0';
                  param_1[2] = cVar2;
                  param_1[3] = 'n';
                  param_1[4] = 'S';
                  param_1[5] = '\0';
                }
              }
              else {
                uVar3 = (ulonglong)DAT_80021154;
                param_1[1] = '.';
                uVar1 = (uint)(param_2 * uVar3 >> 0x26);
                *param_1 = (char)uVar1 + '0';
                param_2 = param_2 + uVar1 * -1000;
                uVar1 = (uint)((ulonglong)param_2 * (ulonglong)uVar13 >> 0x25);
                param_1[2] = (char)uVar1 + '0';
                param_1[3] = (char)(uint)((ulonglong)(param_2 + uVar1 * -100) * (ulonglong)uVar14 >>
                                         0x23) + '0';
                param_1[4] = 'u';
                param_1[5] = 'S';
                param_1[6] = '\0';
              }
            }
            else {
              uVar1 = (uint)((ulonglong)param_2 * (ulonglong)DAT_80021148 >> 0x2d);
              *param_1 = (char)uVar1 + '0';
              param_2 = param_2 + uVar1 * -10000;
              uVar1 = (uint)((ulonglong)param_2 * (ulonglong)uVar12 >> 0x26);
              param_1[1] = (char)uVar1 + '0';
              param_1[2] = '.';
              param_1[3] = (char)(uint)((ulonglong)(param_2 + uVar1 * -1000) * (ulonglong)uVar13 >>
                                       0x25) + '0';
              param_1[4] = 'u';
              param_1[5] = 'S';
              param_1[6] = '\0';
            }
          }
          else {
            *param_1 = (char)((ulonglong)DAT_8002113c * (ulonglong)param_2 + (ulonglong)DAT_8002113c
                             >> 0x30) + '0';
            uVar1 = DAT_8002113c;
            param_1[1] = (char)(uint)((ulonglong)
                                      (param_2 +
                                      DAT_8002114c *
                                      (uint)((ulonglong)uVar9 * (ulonglong)param_2 +
                                             (ulonglong)uVar9 >> 0x30) * 0x20) * (ulonglong)uVar11
                                     >> 0x2d) + '0';
            param_2 = param_2 + (uint)((ulonglong)uVar9 * (ulonglong)param_2 + (ulonglong)uVar1 >>
                                      0x30) * DAT_8002114c * 0x20;
            param_1[2] = (char)(uint)((ulonglong)
                                      (param_2 +
                                      (uint)((ulonglong)param_2 * (ulonglong)uVar11 >> 0x2d) *
                                      -10000) * (ulonglong)uVar12 >> 0x26) + '0';
            param_1[3] = 'u';
            param_1[4] = 'S';
            param_1[5] = '\0';
          }
        }
        else {
          uVar3 = (ulonglong)DAT_80021130;
          param_1[1] = '.';
          *param_1 = (char)(uint)(param_2 * uVar3 >> 0x32) + '0';
          uVar1 = DAT_8002113c;
          param_2 = param_2 + (int)(short)(ushort)(param_2 * uVar3 >> 0x32) * (int)(short)uVar10 *
                              0x40;
          param_1[2] = (char)((ulonglong)uVar9 * (ulonglong)param_2 + (ulonglong)DAT_8002113c >>
                             0x30) + '0';
          param_1[3] = (char)(uint)((ulonglong)
                                    (param_2 +
                                    (uint)((ulonglong)uVar9 * (ulonglong)param_2 + (ulonglong)uVar1
                                          >> 0x30) * DAT_8002114c * 0x20) * (ulonglong)uVar11 >>
                                   0x2d) + '0';
          param_1[4] = 'm';
          param_1[5] = 'S';
          param_1[6] = '\0';
        }
      }
      else {
        uVar1 = (uint)((ulonglong)param_2 * (ulonglong)uVar15 >> 0x36);
        *param_1 = (char)uVar1 + '0';
        uVar10 = DAT_80021140;
        param_2 = param_2 + DAT_80021134 * uVar1 * 0x80;
        lVar5 = (ulonglong)param_2 * (ulonglong)uVar8;
        param_1[1] = (char)(uint)((ulonglong)lVar5 >> 0x32) + '0';
        param_1[2] = '.';
        param_1[3] = (char)((ulonglong)uVar9 *
                            (ulonglong)
                            (param_2 +
                            (int)(short)(ushort)((ulonglong)lVar5 >> 0x32) * (int)(short)uVar10 *
                            0x40) + (ulonglong)uVar9 >> 0x30) + '0';
        param_1[4] = 'm';
        param_1[5] = 'S';
        param_1[6] = '\0';
      }
    }
    else {
      uVar3 = (ulonglong)DAT_8002111c;
      *param_1 = (byte)(param_2 * uVar3 >> 0x39) + 0x30;
      param_2 = param_2 + DAT_80021128 * (uint)(param_2 * uVar3 >> 0x39) * 0x100;
      uVar1 = (uint)((ulonglong)param_2 * (ulonglong)uVar15 >> 0x36);
      param_1[1] = (char)uVar1 + '0';
      param_1[2] = (char)(uint)((ulonglong)(param_2 + DAT_80021134 * uVar1 * 0x80) *
                                (ulonglong)uVar8 >> 0x32) + '0';
      param_1[3] = 'm';
      param_1[4] = 'S';
      param_1[5] = '\0';
    }
  }
  else {
    uVar3 = (ulonglong)DAT_80021120;
    uVar4 = (ulonglong)DAT_80021120;
    param_1[1] = '.';
    uVar8 = DAT_80021120;
    *param_1 = (byte)(uVar4 * param_2 + uVar3 >> 0x3d) + 0x30;
    uVar9 = DAT_80021120;
    param_1[2] = (byte)((ulonglong)
                        (param_2 +
                        DAT_80021124 *
                        (uint)((ulonglong)uVar7 * (ulonglong)param_2 + (ulonglong)uVar8 >> 0x3d) *
                        0x200) * (ulonglong)uVar1 >> 0x39) + 0x30;
    param_2 = param_2 + (uint)((ulonglong)uVar7 * (ulonglong)param_2 + (ulonglong)uVar9 >> 0x3d) *
                        DAT_80021124 * 0x200;
    param_1[3] = (char)(uint)((ulonglong)
                              (param_2 +
                              DAT_80021128 * (uint)((ulonglong)param_2 * (ulonglong)uVar1 >> 0x39) *
                              0x100) * (ulonglong)uVar15 >> 0x36) + '0';
    param_1[4] = 'S';
    param_1[5] = '\0';
  }
  if (*(char *)(DAT_80021164 + 0x21) != '\0') {
    *param_1 = '*';
    param_1[1] = '*';
    param_1[2] = '*';
    param_1[3] = '\0';
    return;
  }
  return;
}



undefined FUN_80021168(void)

{
  char cVar1;
  int iVar2;
  undefined local_28;
  undefined auStack39 [15];
  
  iVar2 = DAT_8002140c;
  FUN_80021414(DAT_8002140c + 0x108,*(undefined4 *)(DAT_8002140c + 0x104));
  FUN_80021414(iVar2 + 0x118,*(undefined4 *)(iVar2 + 0x114));
  FUN_80021414(iVar2 + 0x128,*(undefined4 *)(iVar2 + 0x124));
  FUN_80021414(iVar2 + 0x138,*(undefined4 *)(iVar2 + 0x134));
  FUN_80021414(iVar2 + 0x148,*(undefined4 *)(iVar2 + 0x144));
  FUN_80021414(iVar2 + 0x158,*(undefined4 *)(iVar2 + 0x154));
  FUN_80021414(iVar2 + 0x1c8,*(undefined4 *)(iVar2 + 0x1c4));
  FUN_80021414(iVar2 + 0x1d8,*(undefined4 *)(iVar2 + 0x1d4));
  FUN_80021414(iVar2 + 0x1e8,*(undefined4 *)(iVar2 + 0x1e4));
  FUN_80021414(iVar2 + 0x1f8,*(undefined4 *)(iVar2 + 500));
  FUN_80021414(iVar2 + 0x208,*(undefined4 *)(iVar2 + 0x204));
  FUN_80021414(iVar2 + 0x218,*(undefined4 *)(iVar2 + 0x214));
  cVar1 = *(char *)(iVar2 + 0x101);
  memcpy(auStack39,(void *)(iVar2 + 0x108),9);
  if (cVar1 == '\0') {
    local_28 = 0x2b;
  }
  else {
    local_28 = 0x2d;
  }
  memcpy((void *)(iVar2 + 0x108),&local_28,10);
  cVar1 = *(char *)(iVar2 + 0x113);
  memcpy(auStack39,(void *)(iVar2 + 0x118),9);
  if (cVar1 == '\0') {
    local_28 = 0x2b;
  }
  else {
    local_28 = 0x2d;
  }
  memcpy((void *)(iVar2 + 0x118),&local_28,10);
  cVar1 = *(char *)(iVar2 + 0x123);
  memcpy(auStack39,(void *)(iVar2 + 0x128),9);
  if (cVar1 == '\0') {
    local_28 = 0x2b;
  }
  else {
    local_28 = 0x2d;
  }
  memcpy((void *)(iVar2 + 0x128),&local_28,10);
  cVar1 = *(char *)(iVar2 + 0x1c3);
  memcpy(auStack39,(void *)(iVar2 + 0x1c8),9);
  if (cVar1 == '\0') {
    local_28 = 0x2b;
  }
  else {
    local_28 = 0x2d;
  }
  memcpy((void *)(iVar2 + 0x1c8),&local_28,10);
  cVar1 = *(char *)(iVar2 + 0x1d3);
  memcpy(auStack39,(void *)(iVar2 + 0x1d8),9);
  if (cVar1 == '\0') {
    local_28 = 0x2b;
  }
  else {
    local_28 = 0x2d;
  }
  memcpy((void *)(iVar2 + 0x1d8),&local_28,10);
  cVar1 = *(char *)(iVar2 + 0x1e3);
  memcpy(auStack39,(void *)(iVar2 + 0x1e8),9);
  if (cVar1 == '\0') {
    local_28 = 0x2b;
  }
  else {
    local_28 = 0x2d;
  }
  memcpy((void *)(iVar2 + 0x1e8),&local_28,10);
  FUN_80020538(iVar2 + 0x168,*(undefined4 *)(iVar2 + 0x164));
  FUN_80020538(iVar2 + 0x238,*(undefined4 *)(iVar2 + 0x234));
  FUN_80020ca4(iVar2 + 0x178,*(undefined4 *)(iVar2 + 0x174));
  FUN_80020ca4(iVar2 + 0x188,*(undefined4 *)(iVar2 + 0x184));
  FUN_80020ca4(iVar2 + 0x198,*(undefined4 *)(iVar2 + 0x194));
  FUN_80020ca4(iVar2 + 0x248,*(undefined4 *)(iVar2 + 0x244));
  FUN_80020ca4(iVar2 + 600,*(undefined4 *)(iVar2 + 0x254));
  FUN_80020ca4(iVar2 + 0x268,*(undefined4 *)(iVar2 + 0x264));
  FUN_80020474(iVar2 + 0x1a8,*(uint *)(iVar2 + 0x1a4) & 0xffff);
  FUN_80020474(iVar2 + 0x1b8,*(uint *)(iVar2 + 0x1b4) & 0xffff);
  FUN_80020474(iVar2 + 0x278,*(uint *)(iVar2 + 0x274) & 0xffff);
  FUN_80020474(iVar2 + 0x288,*(uint *)(iVar2 + 0x284) & 0xffff);
  return *(undefined *)(DAT_80021410 + 10);
}



void FUN_80021414(char *param_1,undefined4 param_2)

{
  short sVar1;
  uint uVar2;
  ulonglong uVar3;
  char cVar4;
  char cVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  undefined8 uVar12;
  
  uVar12 = FUN_800397d0(param_2);
  FUN_80039890((int)uVar12,(int)((ulonglong)uVar12 >> 0x20),DAT_80021748,DAT_8002174c);
  uVar11 = FUN_8003972c();
  uVar10 = DAT_80021778;
  uVar9 = DAT_80021774;
  uVar8 = DAT_8002176c;
  uVar6 = DAT_8002175c;
  uVar7 = DAT_80021758;
  uVar2 = DAT_80021754;
  if (DAT_80021750 <= uVar11) {
    param_1[1] = '.';
    sVar1 = (short)DAT_80021760;
    *param_1 = (char)(uint)((ulonglong)uVar11 * (ulonglong)uVar6 >> 0x32) + '0';
    uVar11 = uVar11 + (int)(short)(ushort)((ulonglong)uVar11 * (ulonglong)uVar6 >> 0x32) *
                      (int)sVar1 * 0x40;
    param_1[2] = (char)((ulonglong)uVar2 * (ulonglong)uVar11 + (ulonglong)uVar2 >> 0x30) + '0';
    param_1[3] = (char)(uint)((ulonglong)
                              (uVar11 + (uint)((ulonglong)uVar2 * (ulonglong)uVar11 +
                                               (ulonglong)uVar2 >> 0x30) * DAT_80021764 * 0x20) *
                              (ulonglong)uVar7 >> 0x2d) + '0';
    param_1[4] = 'K';
    param_1[5] = 'V';
    param_1[6] = '\0';
    return;
  }
  if (DAT_80021768 <= uVar11) {
    *param_1 = (char)((ulonglong)DAT_80021754 * (ulonglong)uVar11 + (ulonglong)DAT_80021754 >> 0x30)
               + '0';
    uVar6 = DAT_80021754;
    param_1[1] = (char)(uint)((ulonglong)
                              (uVar11 + DAT_80021764 *
                                        (uint)((ulonglong)uVar2 * (ulonglong)uVar11 +
                                               (ulonglong)uVar2 >> 0x30) * 0x20) * (ulonglong)uVar7
                             >> 0x2d) + '0';
    uVar11 = uVar11 + (uint)((ulonglong)uVar2 * (ulonglong)uVar11 + (ulonglong)uVar6 >> 0x30) *
                      DAT_80021764 * 0x20;
    param_1[2] = (char)(uint)((ulonglong)
                              (uVar11 + (uint)((ulonglong)uVar11 * (ulonglong)uVar7 >> 0x2d) *
                                        -10000) * (ulonglong)uVar8 >> 0x26) + '0';
    param_1[3] = 'V';
    param_1[4] = '\0';
    return;
  }
  if (DAT_80021770 <= uVar11) {
    uVar2 = (uint)((ulonglong)uVar11 * (ulonglong)DAT_80021758 >> 0x2d);
    *param_1 = (char)uVar2 + '0';
    uVar11 = uVar11 + uVar2 * -10000;
    uVar2 = (uint)((ulonglong)uVar11 * (ulonglong)uVar8 >> 0x26);
    param_1[1] = (char)uVar2 + '0';
    param_1[2] = '.';
    param_1[3] = (char)(uint)((ulonglong)(uVar11 + uVar2 * -1000) * (ulonglong)uVar9 >> 0x25) + '0';
    param_1[4] = 'V';
    param_1[5] = '\0';
    return;
  }
  if (999 < uVar11) {
    uVar3 = (ulonglong)DAT_8002176c;
    param_1[1] = '.';
    uVar2 = (uint)(uVar11 * uVar3 >> 0x26);
    *param_1 = (char)uVar2 + '0';
    uVar11 = uVar11 + uVar2 * -1000;
    uVar2 = (uint)((ulonglong)uVar11 * (ulonglong)uVar9 >> 0x25);
    param_1[2] = (char)uVar2 + '0';
    param_1[3] = (char)(uint)((ulonglong)(uVar11 + uVar2 * -100) * (ulonglong)uVar10 >> 0x23) + '0';
    param_1[4] = 'V';
    param_1[5] = '\0';
    return;
  }
  cVar4 = (char)uVar11;
  if (99 < uVar11) {
    uVar2 = (uint)((ulonglong)uVar11 * (ulonglong)DAT_80021774 >> 0x25);
    *param_1 = (char)uVar2 + '0';
    param_1[1] = (char)(uint)((ulonglong)(uVar11 + uVar2 * -100) * (ulonglong)uVar10 >> 0x23) + '0';
    param_1[2] = cVar4 + (char)(uint)((ulonglong)uVar11 * (ulonglong)uVar10 >> 0x23) * -10 + '0';
    param_1[3] = 'm';
    param_1[4] = 'V';
    param_1[5] = '\0';
    return;
  }
  if (9 < uVar11) {
    cVar5 = (char)(uint)((ulonglong)uVar11 * (ulonglong)DAT_80021778 >> 0x23);
    *param_1 = cVar5 + '0';
    param_1[1] = cVar4 + cVar5 * -10 + '0';
    param_1[2] = 'm';
    param_1[3] = 'V';
    param_1[4] = '\0';
    return;
  }
  if (uVar11 != 0) {
    *param_1 = cVar4 + (char)(uint)((ulonglong)uVar11 * (ulonglong)DAT_80021778 >> 0x23) * -10 + '0'
    ;
    param_1[1] = 'm';
    param_1[2] = 'V';
    param_1[3] = '\0';
    return;
  }
  *param_1 = '0';
  param_1[1] = 'V';
  param_1[2] = '\0';
  return;
}



void remove_measures_item_from_list(int item)

{
  int iVar1;
  uint uVar2;
  undefined *puVar3;
  undefined *puVar4;
  uint in_r2;
  
  iVar1 = DAT_8002180c;
  uVar2 = 0;
  do {
    if ((uint)*(byte *)(DAT_8002180c + uVar2) == item) {
      *(undefined *)(DAT_8002180c + uVar2) = 0;
      in_r2 = uVar2;
      break;
    }
    uVar2 = uVar2 + 1 & 0xff;
  } while (uVar2 < 0x18);
  if (in_r2 < 0x17) {
    puVar3 = (undefined *)(iVar1 + in_r2);
    puVar4 = puVar3;
    if ((0x17 - in_r2 & 1) != 0) {
      puVar4 = puVar3 + 1;
      *puVar3 = *puVar4;
    }
    uVar2 = (int)(0x17 - in_r2) >> 1;
    while ((uVar2 & 0xff) != 0) {
      uVar2 = (uVar2 & 0xff) - 1;
      *puVar4 = puVar4[1];
      puVar4[1] = puVar4[2];
      puVar4 = puVar4 + 2;
    }
  }
  if (item != 0) {
    *(undefined *)(iVar1 + 0x17) = 0;
  }
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_80021810(void)

{
  short sVar1;
  int *piVar2;
  int iVar3;
  char character;
  ushort uVar4;
  uint uVar5;
  undefined4 unaff_r4;
  undefined4 unaff_r5;
  undefined4 unaff_r6;
  int iVar6;
  undefined4 unaff_r7;
  uint uVar7;
  undefined4 unaff_r8;
  uint uVar8;
  int iVar9;
  short *psVar10;
  int iVar11;
  ushort *puVar12;
  undefined in_stack_ffffffd0;
  undefined uVar13;
  undefined2 uVar14;
  short sVar15;
  undefined4 in_stack_ffffffd8;
  
  uVar4 = convert_color(DAT_80021a54);
  select_font(PTR_FONT_1_80021a58);
  FUN_80021168();
  FUN_8002098c();
  set_font_paint_mode(2);
  uVar7 = 0;
  uVar8 = 0;
  while( true ) {
    while( true ) {
      iVar6 = DAT_80021a5c;
      iVar9 = uVar7 * 5 + uVar8;
      if (*(char *)(DAT_80021a5c + iVar9) == '\0') {
        return;
      }
      set_display_fg_color(0);
      iVar11 = uVar7 * -0x1b;
      sVar1 = (short)(uVar8 * 0x91);
      sVar15 = (short)iVar11;
      display_fill_rect(sVar1 + 2,sVar15 + 0x1c4,sVar1 + 0x92,sVar15 + 0x1de);
      set_display_fg_color(DAT_80021a60);
      uVar13 = 0;
      uVar14 = 0;
      display_fill_rounded_rect(sVar1 + 3,sVar15 + 0x1c5,sVar1 + 0x91,sVar15 + 0x1dd,2);
      if (*(byte *)(iVar6 + iVar9) < 0xd) {
        set_display_fg_color(DAT_80021a64);
        display_fill_rect(sVar1 + 6,(short)iVar11 + 0x1c8,sVar1 + 0x18,(short)iVar11 + 0x1da);
        set_display_fg_color(0);
        character = '1';
      }
      else {
        set_display_fg_color(DAT_80021a68);
        display_fill_rect(sVar1 + 6,(short)iVar11 + 0x1c8,sVar1 + 0x18,(short)iVar11 + 0x1da);
        set_display_fg_color(0);
        character = '2';
      }
      display_character(character,
                        (uint16)CONCAT412(unaff_r4,CONCAT48(in_stack_ffffffd8,
                                                            CONCAT44(iVar11,CONCAT22(uVar14,CONCAT11
                                                  (uVar13,in_stack_ffffffd0))))),
                        (uint16)CONCAT412(unaff_r8,CONCAT48(unaff_r7,CONCAT44(unaff_r6,unaff_r5))));
      iVar3 = DAT_80021a74;
      piVar2 = Global_Frame_Buffer_Pointer;
      sVar15 = (short)iVar11;
      iVar11 = uVar7 * DAT_80021a6c;
      uVar5 = 0;
      iVar6 = iVar6 + iVar9 * 4;
      do {
        iVar9 = 0x34;
        puVar12 = (ushort *)(*piVar2 + (uVar5 * 800 + iVar11 * 0x20 + uVar8 * 0x91) * 2 + iVar3);
        psVar10 = (short *)(*(int *)(iVar6 + 0x78) + uVar5 * 0x68);
        do {
          if (*psVar10 != 0) {
            *puVar12 = uVar4;
          }
          iVar9 = iVar9 + -1;
          puVar12 = puVar12 + 1;
          psVar10 = psVar10 + 1;
        } while (iVar9 != 0);
        uVar5 = uVar5 + 1 & 0xfffeffff;
      } while (uVar5 < 0x10);
      set_display_fg_color(DAT_80021a54);
      display_text(*(char **)(iVar6 + 0x18),sVar1 + 0x55,sVar15 + 0x1cb);
      uVar8 = uVar8 + 1 & 0xfffeffff;
      if (4 < uVar8) break;
      if (uVar8 == 4 && uVar7 == 4) {
        return;
      }
    }
    uVar7 = uVar7 + 1 & 0xfffeffff;
    if (4 < uVar7) break;
    uVar8 = 0;
  }
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffe0 : 0x80021bc0
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_80021a78(void)

{
  char cVar1;
  ushort uVar2;
  ushort uVar3;
  int *piVar4;
  int *piVar5;
  int iVar6;
  undefined *puVar7;
  char *pcVar8;
  ushort uVar9;
  int iVar10;
  uint uVar11;
  int iVar12;
  int iVar13;
  uint uVar14;
  int iVar15;
  int iVar16;
  uint uVar17;
  uint uVar18;
  int iVar19;
  ushort *puVar20;
  int unaff_r4;
  uint uVar21;
  uint uVar22;
  uint uVar23;
  int iVar24;
  bool bVar25;
  undefined8 uVar26;
  undefined8 uVar27;
  
  iVar6 = DAT_80021bd4;
  uVar14 = DAT_80021bd0;
  pcVar8 = DAT_80021bcc;
  if (*DAT_80021bcc != '\0') {
    if ((byte)DAT_80021bcc[10] < 0xb) {
      iVar16 = 100;
      iVar13 = 600;
    }
    else {
      iVar16 = 200;
      iVar13 = 0x4b0;
    }
    uVar21 = 0;
    iVar10 = 0;
    puVar20 = (ushort *)(DAT_80021bd8 + iVar16 * 2);
    uVar22 = iVar13 - iVar16 & 0xffff;
    uVar18 = DAT_80021bd0;
    do {
      uVar17 = (uint)*puVar20;
      puVar20 = puVar20 + 1;
      if (uVar21 < uVar17) {
        uVar21 = uVar17;
      }
      iVar10 = iVar10 + uVar17;
      if (uVar17 < uVar18) {
        uVar18 = uVar17;
      }
      uVar22 = uVar22 - 1 & 0xffff;
    } while (uVar22 != 0);
    iVar16 = divide(iVar10,iVar13 - iVar16);
    *(short *)(iVar6 + 0xe4) = (short)uVar21;
    *(short *)(iVar6 + 0xe6) = (short)uVar18;
    *(short *)(iVar6 + 0xea) = (short)(uVar21 + uVar18 >> 1);
    *(short *)(iVar6 + 0xe8) = (short)uVar21 - (short)uVar18;
    *(short *)(iVar6 + 0xec) = (short)iVar16;
    FUN_80004a50();
    FUN_8000519c();
  }
  if (pcVar8[0xc] == '\0') {
    return;
  }
  uVar22 = 0;
  if ((byte)pcVar8[10] < 0xb) {
    iVar16 = 100;
    iVar13 = 600;
  }
  else {
    iVar16 = 200;
    iVar13 = 0x4b0;
  }
  puVar20 = (ushort *)(DAT_80021bdc + iVar16 * 2);
  iVar10 = 0;
  uVar18 = iVar13 - iVar16 & 0xffff;
  do {
    uVar21 = (uint)*puVar20;
    if (uVar22 < uVar21) {
      uVar22 = uVar21;
    }
    if (uVar21 < uVar14) {
      uVar14 = uVar21;
    }
    uVar18 = uVar18 - 1 & 0xffff;
    iVar10 = iVar10 + uVar21;
    puVar20 = puVar20 + 1;
  } while (uVar18 != 0);
  iVar16 = divide(iVar10,iVar13 - iVar16);
  *(short *)(iVar6 + 0xee) = (short)uVar22;
  *(short *)(iVar6 + 0xf0) = (short)uVar14;
  *(short *)(iVar6 + 0xf4) = (short)(uVar22 + uVar14 >> 1);
  *(short *)(iVar6 + 0xf2) = (short)uVar22 - (short)uVar14;
  *(short *)(iVar6 + 0xf6) = (short)iVar16;
  FUN_800077c4();
  iVar13 = DAT_8000855c;
  iVar16 = DAT_80008558;
  iVar6 = DAT_80008554;
  uVar22 = (uint)*(ushort *)(DAT_8000855c + 0xfc);
  uVar18 = (uint)*(ushort *)(DAT_8000855c + 0xfe);
  uVar9 = *(ushort *)(DAT_8000855c + 0xee);
  uVar14 = 0;
  if (*(byte *)(DAT_80008554 + 10) < 0xb) {
    uVar21 = 2;
  }
  else {
    uVar21 = 10;
  }
  uVar11 = 0;
  uVar2 = *(ushort *)(DAT_8000855c + 0xf0);
  uVar3 = *(ushort *)(DAT_8000855c + 0xf2);
  uVar17 = uVar22;
  if (uVar22 < uVar18) {
    do {
      uVar23 = (uint)*(ushort *)(DAT_80008558 + uVar17 * 2);
      uVar17 = uVar17 + 1 & 0xfffeffff;
      if (uVar23 < *(ushort *)(DAT_80008554 + 0x12)) {
        uVar11 = uVar11 + (*(ushort *)(DAT_80008554 + 0x12) - uVar23);
      }
      else {
        uVar14 = uVar14 + (uVar23 - *(ushort *)(DAT_80008554 + 0x12));
      }
    } while (uVar17 < uVar18);
    if (uVar11 <= uVar14) goto LAB_80007fac;
    iVar10 = uVar11 - uVar14;
    *(undefined *)(DAT_8000855c + 0x1e3) = 1;
  }
  else {
LAB_80007fac:
    iVar10 = uVar14 - uVar11;
    *(undefined *)(DAT_8000855c + 0x1e3) = 0;
  }
  uVar14 = divide(iVar10,uVar18 - uVar22);
  if (uVar3 < 0x28) {
    *(undefined2 *)(iVar13 + 0xfc) = 0x32;
    *(undefined2 *)(iVar13 + 0xfe) = 0x3b6;
  }
  iVar10 = 0;
  uVar22 = (uint)*(ushort *)(iVar13 + 0xfc);
  while (uVar22 < *(ushort *)(iVar13 + 0xfe)) {
    uVar18 = (uint)*(ushort *)(iVar16 + uVar22 * 2);
    uVar22 = uVar22 + 1 & 0xfffeffff;
    if (uVar18 < *(ushort *)(iVar6 + 0x12)) {
      iVar12 = *(ushort *)(iVar6 + 0x12) - uVar18;
    }
    else {
      iVar12 = uVar18 - *(ushort *)(iVar6 + 0x12);
    }
    iVar10 = iVar10 + iVar12 * iVar12;
  }
  iVar16 = divide(iVar10,(uint)*(ushort *)(iVar13 + 0xfe) - (uint)*(ushort *)(iVar13 + 0xfc));
  piVar5 = DAT_80008564;
  puVar7 = PTR_DAT_80008560;
  uVar22 = (uint)(byte)PTR_DAT_80008560[3];
  DAT_80008564[uVar22] = (uint)uVar9;
  piVar5[uVar22 + 0x1e] = (uint)uVar2;
  piVar5[uVar22 + 0x3c] = iVar16;
  uVar18 = uVar22 + 1 & 0xff;
  piVar5[uVar22 + 0x5a] = uVar14 & 0xffff;
  puVar7[3] = (char)uVar18;
  if (uVar18 < uVar21) goto LAB_800084c8;
  iVar12 = uVar21 - 1;
  iVar10 = 0;
  puVar7[3] = 0;
  iVar16 = iVar12 >> 1;
  if (0 < iVar12) {
    iVar10 = *piVar5;
    iVar24 = piVar5[1];
    iVar19 = 0;
    piVar4 = piVar5;
    iVar15 = iVar16;
    while (iVar15 != 0) {
      iVar10 = iVar10 + iVar24;
      iVar24 = piVar4[3];
      iVar15 = iVar15 + -1;
      iVar19 = iVar19 + piVar4[2];
      piVar4 = piVar4 + 2;
    }
    iVar10 = iVar10 + iVar19;
  }
  if (-1 < iVar12) {
    iVar10 = iVar10 + piVar5[iVar12];
  }
  uVar14 = divide(iVar10,uVar21);
  uVar14 = uVar14 & 0xffff;
  iVar10 = 0;
  if (0 < iVar12) {
    iVar10 = *(int *)(DAT_80008568 + 4);
    iVar24 = *(int *)(DAT_80008568 + 8);
    iVar19 = 0;
    piVar5 = (int *)(DAT_80008568 + 4);
    iVar15 = iVar16;
    while (iVar15 != 0) {
      iVar10 = iVar10 + iVar24;
      iVar24 = piVar5[3];
      iVar15 = iVar15 + -1;
      iVar19 = iVar19 + piVar5[2];
      piVar5 = piVar5 + 2;
    }
    iVar10 = iVar10 + iVar19;
  }
  if (-1 < (int)(uVar21 - 1)) {
    iVar10 = iVar10 + *(int *)(DAT_8000856c + (uVar21 - 1) * 4);
  }
  uVar22 = divide(iVar10,uVar21);
  cVar1 = *(char *)(iVar6 + 0x23);
  uVar22 = uVar22 & 0xffff;
  bVar25 = cVar1 == '\x01';
  if (bVar25) {
    cVar1 = *(char *)(iVar6 + 0x21);
  }
  if ((bVar25 && cVar1 == '\0') && (*(char *)(DAT_80008570 + 4) != '\0')) {
    *(short *)(iVar6 + 0x26) = (short)(uVar14 + uVar22 >> 1);
    set_fpga_trigger_level();
  }
  iVar10 = 0;
  if (0 < iVar12) {
    iVar10 = *(int *)(DAT_80008574 + 4);
    iVar24 = *(int *)(DAT_80008574 + 8);
    iVar19 = 0;
    piVar5 = (int *)(DAT_80008574 + 4);
    iVar15 = iVar16;
    while (iVar15 != 0) {
      iVar10 = iVar10 + iVar24;
      iVar24 = piVar5[3];
      iVar15 = iVar15 + -1;
      iVar19 = iVar19 + piVar5[2];
      piVar5 = piVar5 + 2;
    }
    iVar10 = iVar10 + iVar19;
  }
  if (-1 < (int)(uVar21 - 1)) {
    iVar10 = iVar10 + *(int *)(DAT_80008578 + (uVar21 - 1) * 4);
  }
  uVar18 = divide(iVar10,uVar21);
  iVar10 = 0;
  if (0 < iVar12) {
    iVar10 = *(int *)(DAT_8000857c + 4);
    iVar12 = *(int *)(DAT_8000857c + 8);
    iVar24 = 0;
    piVar5 = (int *)(DAT_8000857c + 4);
    while (iVar16 != 0) {
      iVar10 = iVar10 + iVar12;
      iVar12 = piVar5[3];
      iVar16 = iVar16 + -1;
      iVar24 = iVar24 + piVar5[2];
      piVar5 = piVar5 + 2;
    }
    iVar10 = iVar10 + iVar24;
  }
  if (-1 < (int)(uVar21 - 1)) {
    iVar10 = iVar10 + *(int *)(DAT_80008580 + (uVar21 - 1) * 4);
  }
  iVar10 = divide(iVar10,uVar21);
  iVar16 = DAT_8000858c;
  switch(*(undefined *)(iVar6 + 0xf)) {
  case 0:
    unaff_r4 = DAT_80008584;
    break;
  case 1:
    unaff_r4 = DAT_80008588;
    break;
  case 2:
    unaff_r4 = 1000;
    break;
  case 3:
    unaff_r4 = 500;
    break;
  case 4:
    unaff_r4 = 200;
    break;
  case 5:
    unaff_r4 = 100;
    break;
  case 6:
    unaff_r4 = 0x32;
  }
  if (uVar14 < *(ushort *)(iVar6 + 0x12)) {
    *(undefined *)(iVar13 + 0x1c3) = 1;
    iVar12 = (int)((ulonglong)
                   ((longlong)iVar16 *
                   (longlong)(int)(unaff_r4 * (*(ushort *)(iVar6 + 0x12) - uVar14))) >> 0x20);
    *(int *)(iVar13 + 0x1c4) = (iVar12 >> 4) - (iVar12 >> 0x1f);
  }
  else {
    *(undefined *)(iVar13 + 0x1c3) = 0;
    iVar12 = (int)((ulonglong)
                   ((longlong)iVar16 *
                   (longlong)(int)(unaff_r4 * (uVar14 - *(ushort *)(iVar6 + 0x12)))) >> 0x20);
    *(int *)(iVar13 + 0x1c4) = (iVar12 >> 4) - (iVar12 >> 0x1f);
  }
  if (uVar22 < *(ushort *)(iVar6 + 0x12)) {
    *(undefined *)(iVar13 + 0x1d3) = 1;
    iVar12 = (int)((ulonglong)
                   ((longlong)iVar16 *
                   (longlong)(int)(unaff_r4 * (*(ushort *)(iVar6 + 0x12) - uVar22))) >> 0x20);
    *(int *)(iVar13 + 0x1d4) = (iVar12 >> 4) - (iVar12 >> 0x1f);
  }
  else {
    *(undefined *)(iVar13 + 0x1d3) = 0;
    iVar12 = (int)((ulonglong)
                   ((longlong)iVar16 *
                   (longlong)(int)(unaff_r4 * (uVar22 - *(ushort *)(iVar6 + 0x12)))) >> 0x20);
    *(int *)(iVar13 + 0x1d4) = (iVar12 >> 4) - (iVar12 >> 0x1f);
  }
  uVar26 = FUN_800397d0(unaff_r4);
  FUN_800397d0(iVar10);
  uVar27 = FUN_80036618();
  uVar26 = FUN_80039890((int)uVar27,(int)((ulonglong)uVar27 >> 0x20),(int)uVar26,
                        (int)((ulonglong)uVar26 >> 0x20));
  FUN_800393ec((int)uVar26,(int)((ulonglong)uVar26 >> 0x20),0,DAT_80008590);
  iVar10 = FUN_8003972c();
  *(int *)(iVar13 + 500) = iVar10;
  iVar16 = (int)((ulonglong)((longlong)iVar16 * (longlong)(int)(unaff_r4 * (uVar18 & 0xffff))) >>
                0x20);
  iVar16 = (iVar16 >> 4) - (iVar16 >> 0x1f);
  *(int *)(iVar13 + 0x1e4) = iVar16;
  cVar1 = *(char *)(iVar13 + 0x1c3);
  if (cVar1 == *(char *)(iVar13 + 0x1d3)) {
    if (cVar1 != '\0') {
      iVar12 = *(int *)(iVar13 + 0x1d4);
      iVar24 = *(int *)(iVar13 + 0x1c4);
    }
    else {
      iVar12 = *(int *)(iVar13 + 0x1c4);
      iVar24 = *(int *)(iVar13 + 0x1d4);
    }
    iVar12 = iVar12 - iVar24;
    if (cVar1 == '\0') goto LAB_800083f8;
    *(int *)(iVar13 + 0x204) = iVar12;
  }
  else {
    iVar12 = *(int *)(iVar13 + 0x1c4) + *(int *)(iVar13 + 0x1d4);
LAB_800083f8:
    *(int *)(iVar13 + 0x204) = iVar12;
  }
  uVar14 = *(uint *)(iVar13 + 0x1d4);
  uVar22 = *(uint *)(iVar13 + 0x1c4);
  if (uVar22 < uVar14) {
    *(uint *)(iVar13 + 0x214) = uVar14;
  }
  else {
    *(uint *)(iVar13 + 0x214) = uVar22;
  }
  if (*(char *)(iVar6 + 0xe) == '\x01') {
    *(uint *)(iVar13 + 0x1d4) = uVar14 * 10;
    *(int *)(iVar13 + 0x1e4) = iVar16 * 10;
    *(uint *)(iVar13 + 0x1c4) = uVar22 * 10;
    *(int *)(iVar13 + 500) = iVar10 * 10;
    *(int *)(iVar13 + 0x204) = *(int *)(iVar13 + 0x204) * 10;
    iVar16 = *(int *)(iVar13 + 0x214) * 10;
  }
  else {
    if (*(char *)(iVar6 + 0xe) != '\x02') goto LAB_800084c8;
    *(uint *)(iVar13 + 0x1d4) = uVar14 * 100;
    *(uint *)(iVar13 + 0x1c4) = uVar22 * 100;
    *(int *)(iVar13 + 500) = iVar10 * 100;
    *(int *)(iVar13 + 0x1e4) = iVar16 * 100;
    *(int *)(iVar13 + 0x204) = *(int *)(iVar13 + 0x204) * 100;
    iVar16 = *(int *)(iVar13 + 0x214) * 100;
  }
  *(int *)(iVar13 + 0x214) = iVar16;
LAB_800084c8:
  if (*(char *)(iVar6 + 0xf) == '\x06') {
    uVar9 = 0xf;
  }
  else {
    uVar9 = 7;
  }
  if (*(ushort *)(iVar13 + 0xf2) < uVar9) {
    *(undefined4 *)(iVar13 + 0x204) = 0;
  }
  if (0x13 < *(ushort *)(iVar13 + 0xf2)) {
    return;
  }
  *(undefined4 *)(iVar13 + 0x204) = 0;
  if (*(ushort *)(iVar6 + 0x12) + 5 <= (uint)*(ushort *)(iVar13 + 0xf4)) {
    return;
  }
  if (*(ushort *)(iVar13 + 0xf4) + 5 <= (uint)*(ushort *)(iVar6 + 0x12)) {
    return;
  }
  *(undefined4 *)(iVar13 + 500) = 0;
  *(undefined4 *)(iVar13 + 0x1c4) = 0;
  *(undefined4 *)(iVar13 + 0x1d4) = 0;
  *(undefined4 *)(iVar13 + 0x1e4) = 0;
  *(undefined4 *)(iVar13 + 0x214) = 0;
  return;
}



void FUN_80021be0(void)

{
  longlong lVar1;
  undefined4 *puVar2;
  int iVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  
  puVar2 = DAT_80021c2c;
  *(undefined4 *)(DAT_80021c28 + 0x30) = 1;
  iVar3 = DAT_80021c34;
  *puVar2 = 0x200;
  puVar2 = DAT_80021c30;
  lVar1 = (ulonglong)*(uint *)(iVar3 + 4) * 0x200;
  uVar4 = (undefined4)lVar1;
  uVar5 = (undefined4)((ulonglong)lVar1 >> 0x20);
  *DAT_80021c30 = uVar4;
  puVar2[1] = uVar5;
  uVar4 = FUN_8000027c(uVar4,uVar5,0x200,0);
  *DAT_80021c38 = uVar4;
  return;
}



// WARNING: Removing unreachable block (ram,0x8000dc84)
// WARNING: Removing unreachable block (ram,0x8000dca8)
// WARNING: Removing unreachable block (ram,0x8000dcc8)
// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8000dc78)
// WARNING: Removing unreachable block (ram,0x8000dc7c)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void setup_channel1_menu(void)

{
  ushort uVar1;
  undefined4 uVar2;
  undefined *puVar3;
  int *piVar4;
  int iVar5;
  char *pcVar6;
  char *pcVar7;
  uint uVar8;
  ushort *puVar9;
  int iVar10;
  short *psVar11;
  uint uVar12;
  uint uVar13;
  short *psVar14;
  ushort uVar15;
  int iVar16;
  short sVar17;
  short sVar18;
  undefined2 *puVar19;
  uint uVar20;
  
  copy_rect_from_screen(0xa1,6,(ushort)DAT_80021d00 + 0x30,(ushort)DAT_80021d00);
  set_screen_to_global_pointer();
  sVar18 = (short)DAT_80021d04;
  set_screen_to_global_pointer();
  piVar4 = Global_Frame_Buffer_Pointer;
  puVar3 = PTR_BITMAP_CHANNEL_MENU_80021d08;
  uVar20 = 0xfc;
  uVar12 = uVar20;
  do {
    while (uVar20 < 0xfc) {
      iVar16 = 0xb7;
      psVar11 = (short *)(*piVar4 + (uVar20 - uVar12) * 0x640 + 0x120c2);
      psVar14 = (short *)(puVar3 + uVar20 * 0x16e);
      do {
        sVar17 = *psVar14;
        if (*psVar14 == 0) {
          sVar17 = sVar18;
        }
        iVar16 = iVar16 + -1;
        *psVar11 = sVar17;
        psVar11 = psVar11 + 1;
        psVar14 = psVar14 + 1;
      } while (iVar16 != 0);
      uVar20 = uVar20 + 1 & 0xfffeffff;
    }
    uVar20 = (uVar12 - (uVar12 * DAT_80021d10 >> 0x13)) - 1 & 0xffff;
    uVar12 = uVar20;
  } while (uVar20 != 0);
  empty_func_7();
  empty_func_7();
  uVar20 = DAT_800148c0;
  uVar2 = DAT_800148bc;
  set_frame_to_global_pointer();
  piVar4 = Global_Frame_Buffer_Pointer;
  puVar3 = PTR_BITMAP_CHANNEL_MENU_800148c4;
  uVar12 = 0;
  do {
    iVar16 = 0xb7;
    puVar9 = (ushort *)(puVar3 + uVar12 * 0x16e);
    puVar19 = (undefined2 *)(*piVar4 + uVar12 * 0x640 + 0x120c2);
    do {
      uVar8 = (uint)*puVar9;
      if (*puVar9 == 0) {
        uVar8 = uVar20;
      }
      iVar16 = iVar16 + -1;
      *puVar19 = (short)uVar8;
      iVar5 = DAT_800148cc;
      puVar9 = puVar9 + 1;
      puVar19 = puVar19 + 1;
    } while (iVar16 != 0);
    uVar12 = uVar12 + 1 & 0xfffeffff;
  } while (uVar12 < 0xfc);
  uVar12 = 0x42;
  if (*DAT_800148d0 == '\0') {
    uVar8 = DAT_800148cc - 0xef;
  }
  else {
    uVar8 = DAT_800148cc - 0xee;
  }
  uVar1 = (ushort)uVar2;
  if (*DAT_800148d0 == '\0') {
    do {
      puVar9 = (ushort *)(*piVar4 + (uVar12 * 800 + 5) * 2 + 0x232);
      uVar13 = uVar8 & 0xffff;
      do {
        if (*puVar9 == uVar20) {
          *puVar9 = uVar1;
        }
        else {
          *puVar9 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar9 = puVar9 + 1;
      } while (uVar13 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x58);
  }
  else {
    do {
      puVar9 = (ushort *)(*piVar4 + (uVar12 * 800 + 5) * 2 + 0x1ca);
      uVar13 = uVar8 & 0xffff;
      do {
        if (*puVar9 == uVar20) {
          *puVar9 = uVar1;
        }
        else {
          *puVar9 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar9 = puVar9 + 1;
      } while (uVar13 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x58);
  }
  uVar12 = 0x80;
  if (DAT_800148d0[4] == '\0') {
    uVar8 = iVar5 - 0xef;
  }
  else {
    uVar8 = iVar5 - 0xee;
  }
  if (DAT_800148d0[4] == '\0') {
    do {
      puVar9 = (ushort *)(*piVar4 + (uVar12 * 800 + 5) * 2 + 0x232);
      uVar13 = uVar8 & 0xffff;
      do {
        if (*puVar9 == uVar20) {
          *puVar9 = uVar1;
        }
        else {
          *puVar9 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar9 = puVar9 + 1;
      } while (uVar13 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x96);
  }
  else {
    do {
      puVar9 = (ushort *)(*piVar4 + (uVar12 * 800 + 5) * 2 + 0x1ca);
      uVar13 = uVar8 & 0xffff;
      do {
        if (*puVar9 == uVar20) {
          *puVar9 = uVar1;
        }
        else {
          *puVar9 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar9 = puVar9 + 1;
      } while (uVar13 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x96);
  }
  uVar12 = 0xc0;
  if (DAT_800148d0[1] == '\0') {
    uVar8 = iVar5 - 0xee;
  }
  else {
    uVar8 = iVar5 - 0xef;
  }
  if (DAT_800148d0[1] == '\0') {
    do {
      puVar9 = (ushort *)(*piVar4 + (uVar12 * 800 + 5) * 2 + 0x1ca);
      uVar13 = uVar8 & 0xffff;
      do {
        if (*puVar9 == uVar20) {
          *puVar9 = uVar1;
        }
        else {
          *puVar9 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar9 = puVar9 + 1;
      } while (uVar13 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0xd6);
  }
  else {
    do {
      puVar9 = (ushort *)(*piVar4 + (uVar12 * 800 + 5) * 2 + 0x232);
      uVar13 = uVar8 & 0xffff;
      do {
        if (*puVar9 == uVar20) {
          *puVar9 = uVar1;
        }
        else {
          *puVar9 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar9 = puVar9 + 1;
      } while (uVar13 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0xd6);
  }
  if (DAT_800148d0[2] == '\0') {
    uVar8 = 0xf7;
    uVar12 = DAT_800148d4 - 0xee;
    do {
      puVar9 = (ushort *)(*piVar4 + (uVar8 * 800 + 5) * 2 + 0x1ca);
      uVar13 = uVar12 & 0xffff;
      do {
        if (*puVar9 == uVar20) {
          *puVar9 = uVar1;
        }
        else {
          *puVar9 = 0;
        }
        uVar13 = uVar13 - 1 & 0xffff;
        puVar9 = puVar9 + 1;
      } while (uVar13 != 0);
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < 0x11c);
  }
  else {
    if (DAT_800148d0[2] == '\x01') {
      uVar8 = 0xf7;
      uVar12 = DAT_800148d8 - 0x110;
      do {
        puVar9 = (ushort *)(*piVar4 + (uVar8 * 800 + 5) * 2 + 0x20e);
        uVar13 = uVar12 & 0xffff;
        do {
          uVar15 = *puVar9;
          if (uVar15 == uVar20) {
            *puVar9 = uVar1;
          }
          if (uVar15 != uVar20) {
            *puVar9 = 0;
          }
          uVar13 = uVar13 - 1 & 0xffff;
          puVar9 = puVar9 + 1;
        } while (uVar13 != 0);
        uVar8 = uVar8 + 1 & 0xfffeffff;
      } while (uVar8 < 0x11c);
    }
    else {
      if (DAT_800148d0[2] == '\x02') {
        uVar12 = 0xf7;
        do {
          puVar9 = (ushort *)(*piVar4 + (uVar12 * 800 + 5) * 2 + 0x248);
          sVar18 = 0x1f;
          do {
            sVar18 = sVar18 + -1;
            if (*puVar9 == uVar20) {
              *puVar9 = uVar1;
            }
            else {
              *puVar9 = 0;
            }
            puVar9 = puVar9 + 1;
          } while (sVar18 != 0);
          uVar12 = uVar12 + 1 & 0xfffeffff;
        } while (uVar12 < 0x11c);
      }
    }
  }
  set_display_fg_color(DAT_800148dc);
  uVar1 = (ushort)DAT_800148e0;
  display_draw_rect(0xa1,0x2e,uVar1 + 0x2e,uVar1);
  set_display_fg_color(0);
  uVar15 = uVar1 + 0x21;
  display_draw_horz_line(0x6c,0xaf,uVar15);
  display_draw_horz_line(0xab,0xaf,uVar15);
  display_draw_horz_line(0xea,0xaf,uVar15);
  copy_rect_to_screen(0xa1,0x2e,uVar1 + 0x2e,uVar1 + 1);
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(0xa1,4,0x104,0x2d);
  pcVar7 = DAT_8000dcf0;
  uVar20 = DAT_8000dcf4;
  if (*DAT_8000dcf0 == '\0') {
    uVar20 = DAT_8000dcf8;
  }
  set_display_fg_color(uVar20);
  display_fill_rect(0xa1,5,0xbf,0x28);
  set_display_fg_color(0);
  set_font_paint_mode(2);
  select_font(PTR_FONT_2_8000dcfc);
  display_text(&DAT_8000dd00,0xa6,0x10);
  set_display_fg_color(0xffffff);
  if (pcVar7[1] == '\0') {
    pcVar6 = (char *)0x8000dd04;
  }
  else {
    pcVar6 = (char *)0x8000dd08;
  }
  display_text(pcVar6,199,8);
  set_display_fg_color(0xffffff);
  if (pcVar7[2] == '\0') {
    display_text(&DAT_8000dd0c,0xe0,8);
  }
  else {
    if (pcVar7[2] == '\x01') {
      pcVar6 = &DAT_8000dd10;
    }
    else {
      if (pcVar7[2] != '\x02') goto LAB_8000dac0;
      pcVar6 = &DAT_8000dd14;
    }
    display_text(pcVar6,0xde,8);
  }
LAB_8000dac0:
  if (pcVar7[2] != '\0') {
    if (pcVar7[2] == '\x01') {
      switch(pcVar7[3]) {
      case '\0':
switchD_8000db84_caseD_0:
        pcVar7 = &DAT_8000dda4;
        break;
      case '\x01':
        pcVar7 = &DAT_8000dd60;
        break;
      case '\x02':
switchD_8000db84_caseD_2:
        pcVar7 = &DAT_8000dd68;
        break;
      case '\x03':
switchD_8000db84_caseD_3:
        pcVar7 = s_5V_div_8000dd1c;
        break;
      case '\x04':
        pcVar7 = &DAT_8000dd70;
        break;
      case '\x05':
        goto switchD_8000daf0_caseD_2;
      case '\x06':
        goto switchD_8000daf0_caseD_3;
      default:
        goto switchD_8000daf0_caseD_7;
      }
    }
    else {
      if (pcVar7[2] != '\x02') goto switchD_8000daf0_caseD_7;
      switch(pcVar7[3]) {
      case '\0':
        pcVar7 = &DAT_8000dd80;
        break;
      case '\x01':
        pcVar7 = &DAT_8000dd8c;
        break;
      case '\x02':
        pcVar7 = &DAT_8000dd98;
        break;
      case '\x03':
        goto switchD_8000db84_caseD_0;
      case '\x04':
        pcVar7 = &DAT_8000ddac;
        break;
      case '\x05':
        goto switchD_8000db84_caseD_2;
      case '\x06':
        goto switchD_8000db84_caseD_3;
      default:
        goto switchD_8000daf0_caseD_7;
      }
    }
    goto LAB_8000db34;
  }
  switch(pcVar7[3]) {
  case '\0':
    display_text(s_5V_div_8000dd1c,199,0x18);
    goto switchD_8000daf0_caseD_7;
  case '\x01':
    pcVar7 = s_2_5V_div_8000dd24;
    break;
  case '\x02':
switchD_8000daf0_caseD_2:
    pcVar7 = &DAT_8000dd78;
    break;
  case '\x03':
switchD_8000daf0_caseD_3:
    pcVar7 = &DAT_8000dd30;
    break;
  case '\x04':
    pcVar7 = &DAT_8000dd3c;
    break;
  case '\x05':
    pcVar7 = &DAT_8000dd48;
    break;
  case '\x06':
    pcVar7 = &DAT_8000dd54;
    break;
  default:
    goto switchD_8000daf0_caseD_7;
  }
LAB_8000db34:
  display_text(pcVar7,199,0x18);
switchD_8000daf0_caseD_7:
  iVar5 = Start_Of_Screen_Mem;
  iVar16 = Screen_Frame_Buffer;
  uVar20 = 4;
  do {
    iVar10 = uVar20 * 800 + 0xa1;
    copy_short((void *)(iVar5 + iVar10 * 2),(void *)(iVar16 + iVar10 * 2),100);
    uVar20 = uVar20 + 1;
  } while (uVar20 < 0x2d);
  return;
}



// WARNING: Removing unreachable block (ram,0x8000e084)
// WARNING: Removing unreachable block (ram,0x8000e0ac)
// WARNING: Removing unreachable block (ram,0x8000e0d4)
// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x8000e078)
// WARNING: Removing unreachable block (ram,0x8000e07c)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void setup_channel2_menu(void)

{
  int iVar1;
  undefined4 uVar2;
  undefined *puVar3;
  int *piVar4;
  int iVar5;
  char *pcVar6;
  ushort *puVar7;
  int iVar8;
  short *psVar9;
  ushort uVar10;
  ushort xstart;
  undefined2 *puVar11;
  uint uVar12;
  short *psVar13;
  ushort xend;
  uint uVar14;
  int iVar15;
  short sVar16;
  short sVar17;
  uint uVar18;
  uint uVar19;
  
  copy_rect_from_screen(0x120,0x2e,(ushort)DAT_80021dd8 + 0xad,(ushort)DAT_80021dd8);
  set_screen_to_global_pointer();
  sVar17 = (short)DAT_80021ddc;
  set_screen_to_global_pointer();
  piVar4 = Global_Frame_Buffer_Pointer;
  puVar3 = PTR_BITMAP_CHANNEL_MENU_80021de0;
  uVar19 = 0xfc;
  uVar18 = uVar19;
  do {
    while (uVar19 < 0xfc) {
      iVar15 = 0xb7;
      psVar9 = (short *)(*piVar4 + (uVar19 - uVar18) * 0x640 + 0x121c0);
      psVar13 = (short *)(puVar3 + uVar19 * 0x16e);
      do {
        sVar16 = *psVar13;
        if (*psVar13 == 0) {
          sVar16 = sVar17;
        }
        iVar15 = iVar15 + -1;
        *psVar9 = sVar16;
        psVar9 = psVar9 + 1;
        psVar13 = psVar13 + 1;
      } while (iVar15 != 0);
      uVar19 = uVar19 + 1 & 0xfffeffff;
    }
    uVar19 = (uVar18 - (uVar18 * DAT_80021de8 >> 0x13)) - 1 & 0xffff;
    uVar18 = uVar19;
  } while (uVar19 != 0);
  empty_func_7();
  empty_func_7();
  uVar19 = DAT_80014e54;
  uVar2 = DAT_80014e50;
  set_frame_to_global_pointer();
  piVar4 = Global_Frame_Buffer_Pointer;
  puVar3 = PTR_BITMAP_CHANNEL_MENU_80014e58;
  uVar18 = 0;
  do {
    iVar15 = 0xb7;
    puVar11 = (undefined2 *)(*piVar4 + uVar18 * 0x640 + 0x121c0);
    puVar7 = (ushort *)(puVar3 + uVar18 * 0x16e);
    do {
      uVar14 = (uint)*puVar7;
      if (*puVar7 == 0) {
        uVar14 = uVar19;
      }
      iVar15 = iVar15 + -1;
      *puVar11 = (short)uVar14;
      iVar5 = DAT_80014e64;
      iVar1 = DAT_80014e60;
      puVar11 = puVar11 + 1;
      puVar7 = puVar7 + 1;
    } while (iVar15 != 0);
    uVar18 = uVar18 + 1 & 0xfffeffff;
  } while (uVar18 < 0xfc);
  uVar10 = (ushort)uVar2;
  if (*(char *)(DAT_80014e60 + 0xc) == '\0') {
    uVar18 = 0x42;
    do {
      puVar7 = (ushort *)(*piVar4 + (uVar18 * 800 + 5) * 2 + 0x330);
      sVar17 = 0x27;
      do {
        sVar17 = sVar17 + -1;
        if (*puVar7 == uVar19) {
          *puVar7 = uVar10;
        }
        else {
          *puVar7 = 0;
        }
        puVar7 = puVar7 + 1;
      } while (sVar17 != 0);
      uVar18 = uVar18 + 1 & 0xfffeffff;
    } while (uVar18 < 0x58);
  }
  else {
    uVar18 = DAT_80014e64 - 0x16d;
    uVar14 = 0x42;
    do {
      puVar7 = (ushort *)(*piVar4 + (uVar14 * 800 + 5) * 2 + 0x2c8);
      uVar12 = uVar18 & 0xffff;
      do {
        if (*puVar7 == uVar19) {
          *puVar7 = uVar10;
        }
        else {
          *puVar7 = 0;
        }
        uVar12 = uVar12 - 1 & 0xffff;
        puVar7 = puVar7 + 1;
      } while (uVar12 != 0);
      uVar14 = uVar14 + 1 & 0xfffeffff;
    } while (uVar14 < 0x58);
  }
  if (*(char *)(iVar1 + 0x10) == '\0') {
    uVar18 = 0x80;
    do {
      puVar7 = (ushort *)(*piVar4 + (uVar18 * 800 + 5) * 2 + 0x330);
      sVar17 = 0x27;
      do {
        sVar17 = sVar17 + -1;
        if (*puVar7 == uVar19) {
          *puVar7 = uVar10;
        }
        else {
          *puVar7 = 0;
        }
        puVar7 = puVar7 + 1;
      } while (sVar17 != 0);
      uVar18 = uVar18 + 1 & 0xfffeffff;
    } while (uVar18 < 0x96);
  }
  else {
    uVar18 = 0x80;
    do {
      puVar7 = (ushort *)(*piVar4 + (uVar18 * 800 + 5) * 2 + 0x2c8);
      uVar14 = iVar5 - 0x16dU & 0xffff;
      do {
        if (*puVar7 == uVar19) {
          *puVar7 = uVar10;
        }
        else {
          *puVar7 = 0;
        }
        uVar14 = uVar14 - 1 & 0xffff;
        puVar7 = puVar7 + 1;
      } while (uVar14 != 0);
      uVar18 = uVar18 + 1 & 0xfffeffff;
    } while (uVar18 < 0x96);
  }
  if (*(char *)(iVar1 + 0xd) == '\0') {
    uVar18 = 0xc0;
    do {
      puVar7 = (ushort *)(*piVar4 + (uVar18 * 800 + 5) * 2 + 0x2c8);
      uVar14 = iVar5 - 0x16dU & 0xffff;
      do {
        if (*puVar7 == uVar19) {
          *puVar7 = uVar10;
        }
        else {
          *puVar7 = 0;
        }
        uVar14 = uVar14 - 1 & 0xffff;
        puVar7 = puVar7 + 1;
      } while (uVar14 != 0);
      uVar18 = uVar18 + 1 & 0xfffeffff;
    } while (uVar18 < 0xd6);
  }
  else {
    uVar18 = 0xc0;
    do {
      puVar7 = (ushort *)(*piVar4 + (uVar18 * 800 + 5) * 2 + 0x330);
      sVar17 = 0x27;
      do {
        sVar17 = sVar17 + -1;
        if (*puVar7 == uVar19) {
          *puVar7 = uVar10;
        }
        else {
          *puVar7 = 0;
        }
        puVar7 = puVar7 + 1;
      } while (sVar17 != 0);
      uVar18 = uVar18 + 1 & 0xfffeffff;
    } while (uVar18 < 0xd6);
  }
  if (*(char *)(iVar1 + 0xe) == '\0') {
    uVar14 = 0xf7;
    uVar18 = DAT_80014e68 - 0x16d;
    do {
      puVar7 = (ushort *)(*piVar4 + (uVar14 * 800 + 5) * 2 + 0x2c8);
      uVar12 = uVar18 & 0xffff;
      do {
        if (*puVar7 == uVar19) {
          *puVar7 = uVar10;
        }
        else {
          *puVar7 = 0;
        }
        uVar12 = uVar12 - 1 & 0xffff;
        puVar7 = puVar7 + 1;
      } while (uVar12 != 0);
      uVar14 = uVar14 + 1 & 0xfffeffff;
    } while (uVar14 < 0x11c);
  }
  else {
    if (*(char *)(iVar1 + 0xe) == '\x01') {
      uVar14 = 0xf7;
      uVar18 = DAT_80014e6c - 399;
      do {
        puVar7 = (ushort *)(*piVar4 + (uVar14 * 800 + 5) * 2 + 0x30c);
        uVar12 = uVar18 & 0xffff;
        do {
          if (*puVar7 == uVar19) {
            *puVar7 = uVar10;
          }
          else {
            *puVar7 = 0;
          }
          uVar12 = uVar12 - 1 & 0xffff;
          puVar7 = puVar7 + 1;
        } while (uVar12 != 0);
        uVar14 = uVar14 + 1 & 0xfffeffff;
      } while (uVar14 < 0x11c);
    }
    else {
      if (*(char *)(iVar1 + 0xe) == '\x02') {
        uVar14 = 0xf7;
        uVar18 = DAT_80014e70 - 0x1ac;
        do {
          puVar7 = (ushort *)(*piVar4 + (uVar14 * 800 + 5) * 2 + 0x346);
          uVar12 = uVar18 & 0xffff;
          do {
            if (*puVar7 == uVar19) {
              *puVar7 = uVar10;
            }
            else {
              *puVar7 = 0;
            }
            uVar12 = uVar12 - 1 & 0xffff;
            puVar7 = puVar7 + 1;
          } while (uVar12 != 0);
          uVar14 = uVar14 + 1 & 0xfffeffff;
        } while (uVar14 < 0x11c);
      }
    }
  }
  set_display_fg_color(DAT_80014e74);
  uVar10 = (ushort)DAT_80014e78;
  display_draw_rect(0x120,0x2e,uVar10 + 0xad,uVar10);
  set_display_fg_color(0);
  xend = uVar10 + 0xa0;
  xstart = uVar10 + 5;
  display_draw_horz_line(0x6c,xstart,xend);
  display_draw_horz_line(0xab,xstart,xend);
  display_draw_horz_line(0xea,xstart,xend);
  copy_rect_to_screen(0x120,0x2e,uVar10 + 0xad,uVar10 + 1);
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  iVar15 = DAT_8000e100;
  display_fill_rect(0x120,4,(ushort)DAT_8000e100,0x2d);
  iVar1 = DAT_8000e104;
  uVar19 = DAT_8000e108;
  if (*(char *)(DAT_8000e104 + 0xc) == '\0') {
    uVar19 = DAT_8000e10c;
  }
  set_display_fg_color(uVar19);
  display_fill_rect(0x120,5,(ushort)DAT_8000e110,0x28);
  set_display_fg_color(0);
  set_font_paint_mode(2);
  select_font(PTR_FONT_2_8000e114);
  display_text(&DAT_8000e11c,(ushort)DAT_8000e118,0x10);
  set_display_fg_color(0xffffff);
  if (*(char *)(iVar1 + 0xd) == '\0') {
    pcVar6 = (char *)0x8000e124;
  }
  else {
    pcVar6 = (char *)0x8000e128;
  }
  uVar10 = (ushort)DAT_8000e120;
  display_text(pcVar6,uVar10,8);
  set_display_fg_color(0xffffff);
  if (*(char *)(iVar1 + 0xe) == '\0') {
    display_text(&DAT_8000e140,(ushort)DAT_8000e13c,8);
  }
  else {
    if (*(char *)(iVar1 + 0xe) == '\x01') {
      pcVar6 = (char *)0x8000e130;
    }
    else {
      if (*(char *)(iVar1 + 0xe) != '\x02') goto LAB_8000dec0;
      pcVar6 = (char *)0x8000e134;
    }
    display_text(pcVar6,(ushort)DAT_8000e12c,8);
  }
LAB_8000dec0:
  if (*(char *)(iVar1 + 0xe) != '\0') {
    if (*(char *)(iVar1 + 0xe) == '\x01') {
      switch(*(undefined *)(iVar1 + 0xf)) {
      case 0:
switchD_8000df84_caseD_0:
        pcVar6 = &DAT_8000e1cc;
        break;
      case 1:
        pcVar6 = &DAT_8000e188;
        break;
      case 2:
switchD_8000df84_caseD_2:
        pcVar6 = &DAT_8000e190;
        break;
      case 3:
switchD_8000df84_caseD_3:
        pcVar6 = s_5V_div_8000e144;
        break;
      case 4:
        pcVar6 = &DAT_8000e198;
        break;
      case 5:
        goto switchD_8000def0_caseD_2;
      case 6:
        goto switchD_8000def0_caseD_3;
      default:
        goto switchD_8000def0_caseD_7;
      }
    }
    else {
      if (*(char *)(iVar1 + 0xe) != '\x02') goto switchD_8000def0_caseD_7;
      switch(*(undefined *)(iVar1 + 0xf)) {
      case 0:
        pcVar6 = &DAT_8000e1a8;
        break;
      case 1:
        pcVar6 = &DAT_8000e1b4;
        break;
      case 2:
        pcVar6 = &DAT_8000e1c0;
        break;
      case 3:
        goto switchD_8000df84_caseD_0;
      case 4:
        pcVar6 = &DAT_8000e1d4;
        break;
      case 5:
        goto switchD_8000df84_caseD_2;
      case 6:
        goto switchD_8000df84_caseD_3;
      default:
        goto switchD_8000def0_caseD_7;
      }
    }
    goto LAB_8000df34;
  }
  switch(*(undefined *)(iVar1 + 0xf)) {
  case 0:
    display_text(s_5V_div_8000e144,uVar10,0x18);
    goto switchD_8000def0_caseD_7;
  case 1:
    pcVar6 = s_2_5V_div_8000e14c;
    break;
  case 2:
switchD_8000def0_caseD_2:
    pcVar6 = &DAT_8000e1a0;
    break;
  case 3:
switchD_8000def0_caseD_3:
    pcVar6 = &DAT_8000e158;
    break;
  case 4:
    pcVar6 = &DAT_8000e164;
    break;
  case 5:
    pcVar6 = &DAT_8000e170;
    break;
  case 6:
    pcVar6 = &DAT_8000e17c;
    break;
  default:
    goto switchD_8000def0_caseD_7;
  }
LAB_8000df34:
  display_text(pcVar6,uVar10,0x18);
switchD_8000def0_caseD_7:
  iVar5 = Start_Of_Screen_Mem;
  iVar1 = Screen_Frame_Buffer;
  uVar19 = 4;
  do {
    iVar8 = uVar19 * 800 + 0x120;
    copy_short((void *)(iVar5 + iVar8 * 2),(void *)(iVar1 + iVar8 * 2),iVar15 + -0x11f);
    uVar19 = uVar19 + 1;
  } while (uVar19 < 0x2d);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack
// WARNING: Unknown calling convention yet parameter storage is locked

void setup_measures_menu(void)

{
  undefined2 uVar1;
  uint uVar2;
  int iVar3;
  undefined *puVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  ushort *puVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  undefined2 *puVar12;
  ushort uVar13;
  short sVar14;
  uint uVar15;
  int iVar16;
  
  uVar13 = (ushort)DAT_80021e18;
  copy_rect_from_screen(0xe6,uVar13 - 0xd8,uVar13 + 0xfb,uVar13);
  slide_measures_menu_on_screen();
  set_screen_to_global_pointer();
  empty_func_7();
  iVar3 = DAT_800152dc;
  uVar2 = DAT_800152d8;
  uVar9 = DAT_800152d4;
  uVar15 = DAT_800152d0;
  set_frame_to_global_pointer();
  iVar5 = DAT_800152e4;
  puVar4 = PTR_BITMAP_MEASURES_MENU_800152e0;
  uVar11 = 0;
  do {
    puVar12 = (undefined2 *)((*Global_Frame_Buffer_Pointer + uVar11 * 0x640) - iVar5);
    puVar8 = (ushort *)(puVar4 + uVar11 * DAT_800152dc * 2);
    iVar16 = iVar3;
    do {
      uVar6 = (uint)*puVar8;
      uVar7 = uVar15;
      if (uVar6 != 0) {
        if (uVar6 == 0xf800) {
          uVar7 = 0;
        }
        else {
          uVar7 = uVar6;
          if (uVar6 == uVar2) {
            uVar7 = uVar9;
          }
        }
      }
      iVar16 = iVar16 + -1;
      *puVar12 = (short)uVar7;
      puVar12 = puVar12 + 1;
      puVar8 = puVar8 + 1;
    } while (iVar16 != 0);
    do {
      uVar11 = uVar11 + 1 & 0xfffeffff;
      if (0xd5 < uVar11) {
        set_font_paint_mode(2);
        select_font(PTR_FONT_2_800152ec);
        set_display_fg_color(0);
        uVar13 = (ushort)DAT_800152f0;
        display_text(&DAT_800152f4,0xef,uVar13);
        display_text(&DAT_800152f8,0x1e8,uVar13);
        uVar1 = (undefined2)uVar2;
        if (*(char *)(DAT_800152fc + 0x1c2) != '\0') {
          uVar15 = 0x1b;
          do {
            sVar14 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 2) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 2) * 2);
            do {
              sVar14 = sVar14 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar14 != 0);
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0x58);
        }
        if (*(char *)(DAT_800152fc + 0x1d2) != '\0') {
          uVar15 = 0x1b;
          do {
            sVar14 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 0x40) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 0x40) * 2);
            do {
              sVar14 = sVar14 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar14 != 0);
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0x58);
        }
        if (*(char *)(DAT_800152fc + 0x1e2) != '\0') {
          uVar15 = 0x1b;
          do {
            sVar14 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 0x7e) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 0x7e) * 2);
            do {
              sVar14 = sVar14 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar14 != 0);
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0x58);
        }
        if (*(char *)(DAT_800152fc + 0x1f2) != '\0') {
          uVar15 = 0x1b;
          do {
            sVar14 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 0xbc) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 0xbc) * 2);
            do {
              sVar14 = sVar14 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar14 != 0);
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0x58);
        }
        if (*(char *)(DAT_800152fc + 0x202) != '\0') {
          uVar15 = 0x59;
          do {
            sVar14 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 2) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 2) * 2);
            do {
              sVar14 = sVar14 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar14 != 0);
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0x96);
        }
        if (*(char *)(DAT_800152fc + 0x212) != '\0') {
          uVar15 = 0x59;
          do {
            sVar14 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 0x40) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 0x40) * 2);
            do {
              sVar14 = sVar14 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar14 != 0);
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0x96);
        }
        if (*(char *)(DAT_800152fc + 0x232) != '\0') {
          uVar15 = 0x59;
          do {
            sVar14 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 0x7e) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 0x7e) * 2);
            do {
              sVar14 = sVar14 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar14 != 0);
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0x96);
        }
        if (*(char *)(DAT_800152fc + 0x242) != '\0') {
          uVar15 = 0x59;
          do {
            sVar14 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 0xbc) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 0xbc) * 2);
            do {
              sVar14 = sVar14 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar14 != 0);
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0x96);
        }
        if (*(char *)(DAT_800152fc + 0x252) != '\0') {
          uVar15 = 0x97;
          do {
            sVar14 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 2) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 2) * 2);
            do {
              sVar14 = sVar14 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar14 != 0);
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0xd4);
        }
        if (*(char *)(DAT_800152fc + 0x262) != '\0') {
          uVar15 = 0x97;
          do {
            sVar14 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 0x40) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 0x40) * 2);
            do {
              sVar14 = sVar14 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar14 != 0);
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0xd4);
        }
        if (*(char *)(DAT_800152fc + 0x272) != '\0') {
          uVar15 = 0x97;
          do {
            sVar14 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 0x7e) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 0x7e) * 2);
            do {
              sVar14 = sVar14 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar14 != 0);
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0xd4);
        }
        if (*(char *)(DAT_800152fc + 0x282) != '\0') {
          uVar15 = 0x97;
          do {
            sVar14 = 0x3d;
            puVar12 = (undefined2 *)
                      ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 0xbc) * 2) - iVar5);
            puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 0xbc) * 2);
            do {
              sVar14 = sVar14 + -1;
              if (*puVar8 == uVar2) {
                *puVar12 = uVar1;
              }
              puVar12 = puVar12 + 1;
              puVar8 = puVar8 + 1;
            } while (sVar14 != 0);
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0xd4);
        }
        if (*(char *)(DAT_800152fc + 0x100) != '\0') {
          uVar11 = 0x1b;
          uVar15 = DAT_80015ef8 | (int)DAT_80015ef8 >> 4;
          uVar9 = DAT_80015ef8 - 0xf9;
          do {
            if (0xfa < (int)uVar15) {
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar11 * 800 + 0xfa) * 2) - iVar5);
              uVar7 = uVar9 & 0xffff;
              puVar8 = (ushort *)(puVar4 + (uVar11 * iVar3 + 0xfa) * 2);
              do {
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                uVar7 = uVar7 - 1 & 0xffff;
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (uVar7 != 0);
            }
            uVar11 = uVar11 + 1 & 0xfffeffff;
          } while (uVar11 < 0x58);
        }
        iVar16 = DAT_80015efc;
        if (*(char *)(DAT_800152fc + 0x112) != '\0') {
          uVar15 = 0x1b;
          do {
            if (0x138 < iVar16) {
              sVar14 = 0x3d;
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 0x138) * 2) - iVar5);
              puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 0x138) * 2);
              do {
                sVar14 = sVar14 + -1;
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (sVar14 != 0);
            }
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0x58);
        }
        if (*(char *)(DAT_800152fc + 0x122) != '\0') {
          uVar11 = 0x1b;
          uVar15 = DAT_80015f00 | (int)DAT_80015f00 >> 7;
          uVar9 = DAT_80015f00 - 0x175;
          do {
            if (0x176 < (int)uVar15) {
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar11 * 800 + 0x176) * 2) - iVar5);
              uVar7 = uVar9 & 0xffff;
              puVar8 = (ushort *)(puVar4 + (uVar11 * iVar3 + 0x176) * 2);
              do {
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                uVar7 = uVar7 - 1 & 0xffff;
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (uVar7 != 0);
            }
            uVar11 = uVar11 + 1 & 0xfffeffff;
          } while (uVar11 < 0x58);
        }
        iVar16 = DAT_80015f04;
        if (*(char *)(DAT_800152fc + 0x132) != '\0') {
          uVar15 = 0x1b;
          do {
            if (0x1b4 < iVar16) {
              sVar14 = 0x3d;
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 0x1b4) * 2) - iVar5);
              puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 0x1b4) * 2);
              do {
                sVar14 = sVar14 + -1;
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (sVar14 != 0);
            }
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0x58);
        }
        if (*(char *)(DAT_800152fc + 0x142) != '\0') {
          uVar11 = 0x59;
          uVar15 = DAT_80015ef8 | (int)DAT_80015ef8 >> 4;
          uVar9 = DAT_80015ef8 - 0xf9;
          do {
            if (0xfa < (int)uVar15) {
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar11 * 800 + 0xfa) * 2) - iVar5);
              uVar7 = uVar9 & 0xffff;
              puVar8 = (ushort *)(puVar4 + (uVar11 * iVar3 + 0xfa) * 2);
              do {
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                uVar7 = uVar7 - 1 & 0xffff;
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (uVar7 != 0);
            }
            uVar11 = uVar11 + 1 & 0xfffeffff;
          } while (uVar11 < 0x96);
        }
        iVar16 = DAT_80015efc;
        if (*(char *)(DAT_800152fc + 0x152) != '\0') {
          uVar15 = 0x59;
          do {
            if (0x138 < iVar16) {
              sVar14 = 0x3d;
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 0x138) * 2) - iVar5);
              puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 0x138) * 2);
              do {
                sVar14 = sVar14 + -1;
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (sVar14 != 0);
            }
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0x96);
        }
        if (*(char *)(DAT_800152fc + 0x162) != '\0') {
          uVar11 = 0x59;
          uVar15 = DAT_80015f00 | (int)DAT_80015f00 >> 7;
          uVar9 = DAT_80015f00 - 0x175;
          do {
            if (0x176 < (int)uVar15) {
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar11 * 800 + 0x176) * 2) - iVar5);
              uVar7 = uVar9 & 0xffff;
              puVar8 = (ushort *)(puVar4 + (uVar11 * iVar3 + 0x176) * 2);
              do {
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                uVar7 = uVar7 - 1 & 0xffff;
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (uVar7 != 0);
            }
            uVar11 = uVar11 + 1 & 0xfffeffff;
          } while (uVar11 < 0x96);
        }
        iVar16 = DAT_80015f04;
        if (*(char *)(DAT_800152fc + 0x172) != '\0') {
          uVar15 = 0x59;
          do {
            if (0x1b4 < iVar16) {
              sVar14 = 0x3d;
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 0x1b4) * 2) - iVar5);
              puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 0x1b4) * 2);
              do {
                sVar14 = sVar14 + -1;
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (sVar14 != 0);
            }
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0x96);
        }
        if (*(char *)(DAT_800152fc + 0x182) != '\0') {
          uVar11 = 0x97;
          uVar15 = DAT_80015ef8 | (int)DAT_80015ef8 >> 4;
          uVar9 = DAT_80015ef8 - 0xf9;
          do {
            if (0xfa < (int)uVar15) {
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar11 * 800 + 0xfa) * 2) - iVar5);
              uVar7 = uVar9 & 0xffff;
              puVar8 = (ushort *)(puVar4 + (uVar11 * iVar3 + 0xfa) * 2);
              do {
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                uVar7 = uVar7 - 1 & 0xffff;
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (uVar7 != 0);
            }
            uVar11 = uVar11 + 1 & 0xfffeffff;
          } while (uVar11 < 0xd4);
        }
        iVar16 = DAT_80015efc;
        if (*(char *)(DAT_800152fc + 0x192) != '\0') {
          uVar15 = 0x97;
          do {
            if (0x138 < iVar16) {
              sVar14 = 0x3d;
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 0x138) * 2) - iVar5);
              puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 0x138) * 2);
              do {
                sVar14 = sVar14 + -1;
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (sVar14 != 0);
            }
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0xd4);
        }
        if (*(char *)(DAT_800152fc + 0x1a2) != '\0') {
          uVar9 = 0x97;
          uVar11 = DAT_80015f00 | (int)DAT_80015f00 >> 7;
          uVar15 = DAT_80015f00 - 0x175;
          do {
            if (0x176 < (int)uVar11) {
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar9 * 800 + 0x176) * 2) - iVar5);
              uVar7 = uVar15 & 0xffff;
              puVar8 = (ushort *)(puVar4 + (uVar9 * iVar3 + 0x176) * 2);
              do {
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                uVar7 = uVar7 - 1 & 0xffff;
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (uVar7 != 0);
            }
            uVar9 = uVar9 + 1 & 0xfffeffff;
          } while (uVar9 < 0xd4);
        }
        iVar16 = DAT_80015f04;
        if (*(char *)(DAT_800152fc + 0x1b2) != '\0') {
          uVar15 = 0x97;
          do {
            if (0x1b4 < iVar16) {
              puVar12 = (undefined2 *)
                        ((*Global_Frame_Buffer_Pointer + (uVar15 * 800 + 0x1b4) * 2) - iVar5);
              puVar8 = (ushort *)(puVar4 + (uVar15 * iVar3 + 0x1b4) * 2);
              sVar14 = 0x3d;
              do {
                sVar14 = sVar14 + -1;
                if (*puVar8 == uVar2) {
                  *puVar12 = uVar1;
                }
                puVar12 = puVar12 + 1;
                puVar8 = puVar8 + 1;
              } while (sVar14 != 0);
            }
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0xd4);
        }
        iVar5 = Start_Of_Screen_Mem;
        iVar3 = Screen_Frame_Buffer;
        uVar15 = DAT_80015f08;
        uVar9 = DAT_80015f08 - 0xd8;
        iVar16 = DAT_80015f08 + 0x16;
        if (DAT_80015f08 <= uVar9) {
          return;
        }
        do {
          iVar10 = uVar9 * 800 + 0xe6;
          copy_short((void *)(iVar5 + iVar10 * 2),(void *)(iVar3 + iVar10 * 2),iVar16);
          uVar9 = uVar9 + 1;
        } while (uVar9 < uVar15);
        return;
      }
    } while (iVar3 == 0);
  } while( true );
}



// WARNING: Removing unreachable block (ram,0x8001285c)
// WARNING: Removing unreachable block (ram,0x80012878)
// WARNING: Removing unreachable block (ram,0x80012898)
// WARNING: Removing unreachable block (ram,0x8001ccec)
// WARNING: Removing unreachable block (ram,0x80012850)
// WARNING: Removing unreachable block (ram,0x80012854)
// WARNING: Removing unreachable block (ram,0x8001ccf8)
// WARNING: Restarted to delay deadcode elimination for space: stack

void setup_trigger_menu(void)

{
  int iVar1;
  undefined *puVar2;
  int *piVar3;
  ushort uVar4;
  char *pcVar5;
  ushort *puVar6;
  int iVar7;
  uint uVar8;
  undefined2 *puVar9;
  uint uVar10;
  int iVar11;
  uint uVar12;
  short sVar13;
  uint uVar14;
  short sVar15;
  short *psVar16;
  int iVar17;
  short *psVar18;
  
  copy_rect_from_screen((ushort)DAT_80021edc - 0xc0,5,(ushort)DAT_80021edc,0xe8);
  set_screen_to_global_pointer();
  sVar13 = (short)DAT_80021ee0;
  set_screen_to_global_pointer();
  uVar14 = DAT_80021ef0;
  iVar1 = DAT_80021eec;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_BITMAP_TRIGGER_MENU_80021ee4;
  uVar12 = 0xba;
  do {
    uVar8 = uVar12 & 0xffff;
    while (uVar8 < 0xba) {
      iVar11 = 0xac;
      psVar16 = (short *)((*piVar3 + (uVar8 - uVar12) * 0x640) - iVar1);
      psVar18 = (short *)(puVar2 + uVar8 * 0x158);
      do {
        sVar15 = *psVar18;
        if (*psVar18 == 0) {
          sVar15 = sVar13;
        }
        iVar11 = iVar11 + -1;
        *psVar16 = sVar15;
        psVar16 = psVar16 + 1;
        psVar18 = psVar18 + 1;
      } while (iVar11 != 0);
      uVar8 = uVar8 + 1 & 0xfffeffff;
    }
    uVar12 = (uVar12 - (uint)((ulonglong)uVar12 * (ulonglong)uVar14 >> 0x24)) - 1;
  } while (uVar12 != 0);
  empty_func_7();
  empty_func_7();
  uVar14 = DAT_80016394;
  set_frame_to_global_pointer();
  piVar3 = Global_Frame_Buffer_Pointer;
  iVar1 = DAT_8001639c;
  puVar2 = PTR_BITMAP_TRIGGER_MENU_80016398;
  uVar12 = 0;
  do {
    iVar11 = 0xac;
    puVar9 = (undefined2 *)((*piVar3 + uVar12 * 0x640) - iVar1);
    puVar6 = (ushort *)(puVar2 + uVar12 * 0x158);
    do {
      uVar8 = (uint)*puVar6;
      if (*puVar6 == 0) {
        uVar8 = uVar14;
      }
      iVar11 = iVar11 + -1;
      *puVar9 = (short)uVar8;
      iVar17 = DAT_800163a4;
      puVar9 = puVar9 + 1;
      puVar6 = puVar6 + 1;
    } while (iVar11 != 0);
    uVar12 = uVar12 + 1 & 0xfffeffff;
  } while (uVar12 < 0xba);
  if (*(char *)(DAT_800163a4 + 0x21) == '\0') {
    uVar8 = 0x39;
    uVar12 = DAT_800163a8 - 0x276;
    do {
      puVar6 = (ushort *)(*piVar3 + (uVar8 * 800 + 5) * 2 + 0x4da);
      uVar10 = uVar12 & 0xffff;
      do {
        if (*puVar6 == uVar14) {
          *puVar6 = 0x7e0;
        }
        else {
          *puVar6 = 0;
        }
        uVar10 = uVar10 - 1 & 0xffff;
        puVar6 = puVar6 + 1;
      } while (uVar10 != 0);
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < 0x61);
  }
  else {
    if (*(char *)(DAT_800163a4 + 0x21) == '\x01') {
      uVar8 = 0x39;
      uVar12 = DAT_800163ac - 0x296;
      do {
        puVar6 = (ushort *)(*piVar3 + (uVar8 * 800 + 5) * 2 + 0x51a);
        uVar10 = uVar12 & 0xffff;
        do {
          if (*puVar6 == uVar14) {
            *puVar6 = 0x7e0;
          }
          else {
            *puVar6 = 0;
          }
          uVar10 = uVar10 - 1 & 0xffff;
          puVar6 = puVar6 + 1;
        } while (uVar10 != 0);
        uVar8 = uVar8 + 1 & 0xfffeffff;
      } while (uVar8 < 0x61);
    }
    else {
      if (*(char *)(DAT_800163a4 + 0x21) == '\x02') {
        uVar8 = 0x39;
        uVar12 = DAT_800163b0 - 0x2b6;
        do {
          puVar6 = (ushort *)(*piVar3 + (uVar8 * 800 + 5) * 2 + 0x55a);
          uVar10 = uVar12 & 0xffff;
          do {
            if (*puVar6 == uVar14) {
              *puVar6 = 0x7e0;
            }
            else {
              *puVar6 = 0;
            }
            uVar10 = uVar10 - 1 & 0xffff;
            puVar6 = puVar6 + 1;
          } while (uVar10 != 0);
          uVar8 = uVar8 + 1 & 0xfffeffff;
        } while (uVar8 < 0x61);
      }
    }
  }
  if (*(char *)(iVar17 + 0x22) == '\0') {
    uVar8 = 0x7f;
    uVar12 = DAT_800163b4 - 0x271;
    do {
      puVar6 = (ushort *)(*piVar3 + (uVar8 * 800 + 5) * 2 + 0x4d0);
      uVar10 = uVar12 & 0xffff;
      do {
        if (*puVar6 == uVar14) {
          *puVar6 = 0x7e0;
        }
        else {
          *puVar6 = 0;
        }
        uVar10 = uVar10 - 1 & 0xffff;
        puVar6 = puVar6 + 1;
      } while (uVar10 != 0);
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < 0x96);
  }
  else {
    uVar12 = 0x7f;
    do {
      puVar6 = (ushort *)(*piVar3 + (uVar12 * 800 + 5) * 2 + 0x530);
      sVar13 = 0x2f;
      do {
        sVar13 = sVar13 + -1;
        if (*puVar6 == uVar14) {
          *puVar6 = 0x7e0;
        }
        else {
          *puVar6 = 0;
        }
        puVar6 = puVar6 + 1;
      } while (sVar13 != 0);
      uVar12 = uVar12 + 1 & 0xfffeffff;
    } while (uVar12 < 0x96);
  }
  if (*(char *)(iVar17 + 0x23) == '\0') {
    uVar8 = 0xbd;
    uVar12 = DAT_800163b8 - 0x274;
    do {
      puVar6 = (ushort *)(*piVar3 + (uVar8 * 800 + 5) * 2 + 0x4d6);
      uVar10 = uVar12 & 0xffff;
      do {
        if (*puVar6 == uVar14) {
          *puVar6 = 0x7e0;
        }
        else {
          *puVar6 = 0;
        }
        uVar10 = uVar10 - 1 & 0xffff;
        puVar6 = puVar6 + 1;
      } while (uVar10 != 0);
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < 0xd4);
  }
  else {
    if (*(char *)(iVar17 + 0x23) == '\x01') {
      uVar8 = 0xbd;
      uVar12 = DAT_800163bc - 0x2a4;
      do {
        puVar6 = (ushort *)(*piVar3 + (uVar8 * 800 + 5) * 2 + 0x536);
        uVar10 = uVar12 & 0xffff;
        do {
          if (*puVar6 == uVar14) {
            *puVar6 = 0x7e0;
          }
          else {
            *puVar6 = 0;
          }
          uVar10 = uVar10 - 1 & 0xffff;
          puVar6 = puVar6 + 1;
        } while (uVar10 != 0);
        uVar8 = uVar8 + 1 & 0xfffeffff;
      } while (uVar8 < 0xd4);
    }
  }
  set_display_fg_color(DAT_800163c0);
  uVar4 = (ushort)DAT_800163c4;
  display_draw_rect(uVar4 - 0xab,0x2e,uVar4,0xe7);
  set_display_fg_color(0);
  display_draw_horz_line(0x6b,uVar4 - 0xa0,uVar4 - 0xb);
  display_draw_horz_line(0xa9,uVar4 - 0xa0,uVar4 - 0xb);
  copy_rect_to_screen(uVar4 - 0xab,0x2e,uVar4 + 1,0xe8);
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(0x23a,2,700,0x2c);
  set_font_paint_mode(2);
  select_font(PTR_FONT_4_800128dc);
  set_display_fg_color(0xff00);
  display_fill_rect(0x23a,5,600,0x28);
  set_display_fg_color(0);
  display_text(&DAT_800128e0,0x246,0xf);
  set_display_fg_color(0xffffff);
  select_font(PTR_FONT_2_800128e4);
  iVar1 = DAT_800128e8;
  if (*(char *)(DAT_800128e8 + 0x21) == '\0') {
    display_text(&DAT_800128fc,0x25e,7);
  }
  else {
    if (*(char *)(DAT_800128e8 + 0x21) == '\x01') {
      pcVar5 = s_Single_800128ec;
    }
    else {
      if (*(char *)(DAT_800128e8 + 0x21) != '\x02') goto LAB_80012754;
      pcVar5 = s_Normal_800128f4;
    }
    display_text(pcVar5,0x25e,7);
  }
LAB_80012754:
  uVar4 = (ushort)DAT_80012904;
  if (*(char *)(iVar1 + 0x23) == '\0') {
    set_display_fg_color(DAT_80012908);
    display_fill_rect(uVar4 - 0x1c,0x19,uVar4,0x28);
    set_display_fg_color(0);
    pcVar5 = &DAT_8001290c;
  }
  else {
    if (*(char *)(iVar1 + 0x23) != '\x01') goto LAB_800127e4;
    set_display_fg_color(DAT_80012910);
    display_fill_rect(uVar4 - 0x1c,0x19,uVar4,0x28);
    set_display_fg_color(0);
    pcVar5 = &DAT_80012914;
  }
  display_text(pcVar5,uVar4 - 0x18,0x1a);
LAB_800127e4:
  set_display_fg_color(0xffffff);
  display_draw_vert_line(0x282,0x1b,0x26);
  display_draw_horz_line(0x26,0x27f,0x282);
  display_draw_horz_line(0x1b,0x282,0x285);
  if (*(char *)(iVar1 + 0x22) == '\0') {
    display_draw_horz_line(0x20,0x281,0x283);
    uVar4 = 0x21;
  }
  else {
    display_draw_horz_line(0x21,0x281,0x283);
    uVar4 = 0x20;
  }
  display_draw_horz_line(uVar4,0x280,0x284);
  iVar11 = Start_Of_Screen_Mem;
  iVar1 = Screen_Frame_Buffer;
  iVar17 = DAT_8001291c + -0x239;
  uVar14 = 5;
  do {
    iVar7 = uVar14 * 800 + 0x23a;
    copy_short((void *)(iVar11 + iVar7 * 2),(void *)(iVar1 + iVar7 * 2),iVar17);
    uVar14 = uVar14 + 1;
  } while (uVar14 < 0x29);
  return;
}



void enter_usb_connect(void)

{
  uint uVar1;
  char cVar2;
  uint uVar3;
  undefined *puVar4;
  int iVar5;
  int iVar6;
  undefined2 *puVar7;
  undefined2 *puVar8;
  ushort yend;
  ushort yend_00;
  ushort uVar9;
  uint uVar10;
  uint uVar11;
  int iStack28;
  
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(0,0,(ushort)DAT_800221e0 + 0x140,(ushort)DAT_800221e0);
  uVar3 = DAT_800221e4;
  set_display_fg_color(DAT_800221e4);
  iStack28 = DAT_800221e8;
  yend_00 = (ushort)DAT_800221e8;
  display_fill_rounded_rect(0x1d6,0x73,0x2d0,yend_00,2);
  display_fill_rect(0x244,yend_00,0x262,yend_00 + 0x14);
  uVar9 = yend_00 + 0x1e;
  display_fill_rounded_rect(0x226,yend_00 + 0x14,0x280,uVar9,2);
  display_fill_rect(0x226,uVar9 & 0xfffa,0x280,uVar9);
  display_fill_rounded_rect(0x50,200,0x104,uVar9,2);
  display_fill_rect(0xd2,0xbe,0xdb,200);
  display_draw_vert_line(0xd5,0x99,0xbd);
  display_draw_vert_line(0xd6,0x99,0xbd);
  display_draw_vert_line(0xd7,0x99,0xbd);
  display_draw_vert_line(0xd8,0x99,0xbd);
  uVar9 = yend_00 + 0x3c;
  display_draw_horz_line(0x95,0xd5,uVar9);
  display_draw_horz_line(0x96,0xd5,uVar9);
  display_draw_horz_line(0x97,0xd5,uVar9);
  display_draw_horz_line(0x98,0xd5,uVar9);
  yend = yend_00 - 0x2f;
  display_draw_vert_line(0x16a,0x99,yend);
  display_draw_vert_line(0x16b,0x99,yend);
  display_draw_vert_line(0x16c,0x99,yend);
  display_draw_vert_line(uVar9,0x99,yend);
  iStack28 = iStack28 + -0x23;
  FUN_80018c30(0x170,0xfb,6);
  display_draw_horz_line(0xff,0x16b,0x1d6);
  display_draw_horz_line(0x100,0x16b,0x1d6);
  display_draw_horz_line(yend_00 - 0x30,0x16b,0x1d6);
  display_draw_horz_line(yend,0x16b,0x1d6);
  display_fill_rect(0x1cd,0xfc,0x1d6,yend_00 - 0x2c);
  set_display_fg_color(0x55);
  display_fill_rect(0x1dd,0x7d,yend_00 + 0x198,0x120);
  display_fill_rect(0x58,0xd2,0xfc,0x142);
  set_display_fg_color(DAT_800221ec);
  display_draw_rect(0x1dd,0x7d,yend_00 + 0x198,0x120);
  display_draw_rect(0x58,0xd2,0xfc,0x142);
  set_display_fg_color(uVar3);
  select_font(PTR_FONT_5_800221f0);
  set_font_paint_mode(2);
  display_text(s_ON___OFF_800221f4,0x7d,0xfe);
  copy_frame_to_screen();
  puVar4 = PTR_DAT_80022200;
  *PTR_DAT_80022200 = 1;
  setup_usb_int();
  cVar2 = *puVar4;
  while (cVar2 != '\0') {
    FUN_80029f48();
    cVar2 = *puVar4;
  }
  FUN_8002a018();
  puVar4 = PTR_DAT_8002a1b4;
  *PTR_DAT_8002a1b4 = 0;
  FUN_8002a1b8();
  *puVar4 = 1;
  uVar11 = 0;
  FUN_8002c7a4();
  FUN_8000b2ac();
  uVar3 = DAT_8002a2a4;
  iVar5 = DAT_8002a2a0;
  uVar10 = 0;
  do {
    if (*(short *)(iVar5 + uVar10 * 2 + 0x1e) == 0) break;
    iVar6 = FUN_800337c4(&stack0xfffffdc0,uVar10 * 0xf + iVar5 + 0x7ee,1);
    if (iVar6 == 4) {
      if (uVar10 < uVar3) {
        iVar6 = iVar5 + (uVar10 - uVar11) * 2;
        puVar8 = (undefined2 *)(iVar6 + 0x1e);
        puVar7 = (undefined2 *)(iVar6 + 0x1c);
        if ((uVar3 - uVar10 & 1) != 0) {
          puVar8 = (undefined2 *)(iVar6 + 0x20);
          puVar7 = (undefined2 *)(iVar6 + 0x1e);
          *puVar7 = *puVar8;
        }
        uVar1 = (uVar3 - uVar10) * 0x8000 >> 0x10;
        while (uVar1 != 0) {
          puVar7[1] = puVar8[1];
          puVar8 = puVar8 + 2;
          uVar1 = uVar1 - 1 & 0xffff;
          puVar7 = puVar7 + 2;
          *puVar7 = *puVar8;
        }
      }
      uVar11 = uVar11 + 1 & 0xfffeffff;
    }
    FUN_8003347c(&stack0xfffffdc0);
    uVar10 = uVar10 + 1 & 0xfffeffff;
  } while (uVar10 < uVar3);
  *(undefined2 *)(DAT_8002a2a8 + 0xec) = 0;
  FUN_8002c8f4();
  return;
}



undefined4 FUN_80022204(void)

{
  char cVar1;
  ushort uVar2;
  undefined *puVar3;
  char *pcVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint unaff_r8;
  bool bVar10;
  bool bVar11;
  
  tp_i2c_read_status();
  pcVar4 = DAT_80022bbc;
  puVar3 = PTR_DAT_80022bb8;
  uVar5 = (uint)*(ushort *)(PTR_DAT_80022bb8 + 2);
  if ((uVar5 - 0x2db < 0x45) && (uVar2 = *(ushort *)(PTR_DAT_80022bb8 + 4), uVar2 != 0)) {
    if (uVar2 < 0x50) {
      cVar1 = *PTR_DAT_80022bb8;
      while (cVar1 != '\0') {
        tp_i2c_read_status();
        cVar1 = *puVar3;
      }
      FUN_8002b0f4();
      return 1;
    }
    if (0x50 < uVar2) {
      if (uVar2 < 0xa0) {
        cVar1 = *PTR_DAT_80022bb8;
        while (cVar1 != '\0') {
          tp_i2c_read_status();
          cVar1 = *puVar3;
        }
        FUN_8002b0f4();
        return 2;
      }
      if (0xa0 < uVar2) {
        if (uVar2 < 0xf0) {
          cVar1 = *PTR_DAT_80022bb8;
          while (cVar1 != '\0') {
            tp_i2c_read_status();
            cVar1 = *puVar3;
          }
          FUN_8002b0f4();
          return 3;
        }
        if (0xf0 < uVar2) {
          if (uVar2 < 0x140) {
            cVar1 = *PTR_DAT_80022bb8;
            while (cVar1 != '\0') {
              tp_i2c_read_status();
              cVar1 = *puVar3;
            }
            FUN_8002b0f4();
            return 4;
          }
          if (0x140 < uVar2) {
            bVar10 = 399 < uVar2;
            if (!bVar10) {
              cVar1 = *PTR_DAT_80022bb8;
              while (cVar1 != '\0') {
                tp_i2c_read_status();
                cVar1 = *puVar3;
              }
              FUN_8002b0f4();
              return 5;
            }
            if (uVar2 != 400) {
              bVar10 = 0x1df < uVar2;
            }
            if (!bVar10) {
              cVar1 = *PTR_DAT_80022bb8;
              while (cVar1 != '\0') {
                tp_i2c_read_status();
                cVar1 = *puVar3;
              }
              FUN_8002b0f4();
              return 6;
            }
          }
        }
      }
    }
  }
  uVar8 = uVar5 - 1;
  if ((uVar8 < 0xb3) &&
     (*(ushort *)(PTR_DAT_80022bb8 + 4) != 0 && *(ushort *)(PTR_DAT_80022bb8 + 4) < 0x75)) {
    cVar1 = *PTR_DAT_80022bb8;
    while (cVar1 != '\0') {
      tp_i2c_read_status();
      cVar1 = *puVar3;
    }
    FUN_8002b0f4();
    if ((ushort)((ushort)(byte)pcVar4[10] * 0x10 - 0x10) < (ushort)(byte)pcVar4[0xc]) {
      if (*pcVar4 != '\0') {
        if (pcVar4[0xd] == '\0') {
          pcVar4[0xd] = '\x01';
        }
        else {
          pcVar4[0xd] = '\0';
        }
      }
      return 7;
    }
  }
  else {
    uVar7 = uVar5 - 0xb7;
    if ((uVar7 < 0xb3) &&
       (*(ushort *)(PTR_DAT_80022bb8 + 4) != 0 && *(ushort *)(PTR_DAT_80022bb8 + 4) < 0x75)) {
      cVar1 = *PTR_DAT_80022bb8;
      while (cVar1 != '\0') {
        tp_i2c_read_status();
        cVar1 = *puVar3;
      }
      FUN_8002b0f4();
      if ((ushort)((ushort)(byte)pcVar4[10] * 0x10 - 0xf) < (ushort)(byte)pcVar4[0xc]) {
        if (*pcVar4 != '\0') {
          if (pcVar4[0xe] == '\0') {
            pcVar4[0xe] = '\x01';
          }
          else {
            pcVar4[0xe] = '\0';
          }
        }
        return 8;
      }
    }
    else {
      uVar6 = uVar5 - 0x16d;
      if ((uVar6 < 0xb3) &&
         (*(ushort *)(PTR_DAT_80022bb8 + 4) != 0 && *(ushort *)(PTR_DAT_80022bb8 + 4) < 0x75)) {
        cVar1 = *PTR_DAT_80022bb8;
        while (cVar1 != '\0') {
          tp_i2c_read_status();
          cVar1 = *puVar3;
        }
        FUN_8002b0f4();
        if ((ushort)((ushort)(byte)pcVar4[10] * 0x10 - 0xe) < (ushort)(byte)pcVar4[0xc]) {
          if (*pcVar4 != '\0') {
            if (pcVar4[0xf] == '\0') {
              pcVar4[0xf] = '\x01';
            }
            else {
              pcVar4[0xf] = '\0';
            }
          }
          return 9;
        }
      }
      else {
        uVar5 = uVar5 - 0x223;
        if ((uVar5 < 0xb3) &&
           (*(ushort *)(PTR_DAT_80022bb8 + 4) != 0 && *(ushort *)(PTR_DAT_80022bb8 + 4) < 0x75)) {
          cVar1 = *PTR_DAT_80022bb8;
          while (cVar1 != '\0') {
            tp_i2c_read_status();
            cVar1 = *puVar3;
          }
          FUN_8002b0f4();
          if ((ushort)((ushort)(byte)pcVar4[10] * 0x10 - 0xd) < (ushort)(byte)pcVar4[0xc]) {
            if (*pcVar4 != '\0') {
              if (pcVar4[0x10] == '\0') {
                pcVar4[0x10] = '\x01';
              }
              else {
                pcVar4[0x10] = '\0';
              }
            }
            return 10;
          }
        }
        else {
          if (((uVar8 < 0xb3) && (0x77 < *(ushort *)(PTR_DAT_80022bb8 + 4))) &&
             (*(ushort *)(PTR_DAT_80022bb8 + 4) < 0xec)) {
            cVar1 = *PTR_DAT_80022bb8;
            while (cVar1 != '\0') {
              tp_i2c_read_status();
              cVar1 = *puVar3;
            }
            FUN_8002b0f4();
            if ((ushort)((ushort)(byte)pcVar4[10] * 0x10 - 0xc) < (ushort)(byte)pcVar4[0xc]) {
              if (*pcVar4 != '\0') {
                if (pcVar4[0x11] == '\0') {
                  pcVar4[0x11] = '\x01';
                }
                else {
                  pcVar4[0x11] = '\0';
                }
              }
              return 0xb;
            }
          }
          else {
            if (((uVar7 < 0xb3) && (0x77 < *(ushort *)(PTR_DAT_80022bb8 + 4))) &&
               (*(ushort *)(PTR_DAT_80022bb8 + 4) < 0xec)) {
              cVar1 = *PTR_DAT_80022bb8;
              while (cVar1 != '\0') {
                tp_i2c_read_status();
                cVar1 = *puVar3;
              }
              FUN_8002b0f4();
              if ((ushort)((ushort)(byte)pcVar4[10] * 0x10 - 0xb) < (ushort)(byte)pcVar4[0xc]) {
                if (*pcVar4 != '\0') {
                  if (pcVar4[0x12] == '\0') {
                    pcVar4[0x12] = '\x01';
                  }
                  else {
                    pcVar4[0x12] = '\0';
                  }
                }
                return 0xc;
              }
            }
            else {
              if (((uVar6 < 0xb3) && (0x77 < *(ushort *)(PTR_DAT_80022bb8 + 4))) &&
                 (*(ushort *)(PTR_DAT_80022bb8 + 4) < 0xec)) {
                cVar1 = *PTR_DAT_80022bb8;
                while (cVar1 != '\0') {
                  tp_i2c_read_status();
                  cVar1 = *puVar3;
                }
                FUN_8002b0f4();
                if ((ushort)((ushort)(byte)pcVar4[10] * 0x10 - 10) < (ushort)(byte)pcVar4[0xc]) {
                  if (*pcVar4 != '\0') {
                    if (pcVar4[0x13] == '\0') {
                      pcVar4[0x13] = '\x01';
                    }
                    else {
                      pcVar4[0x13] = '\0';
                    }
                  }
                  return 0xd;
                }
              }
              else {
                if (((uVar5 < 0xb3) && (0x77 < *(ushort *)(PTR_DAT_80022bb8 + 4))) &&
                   (*(ushort *)(PTR_DAT_80022bb8 + 4) < 0xec)) {
                  cVar1 = *PTR_DAT_80022bb8;
                  while (cVar1 != '\0') {
                    tp_i2c_read_status();
                    cVar1 = *puVar3;
                  }
                  FUN_8002b0f4();
                  if ((ushort)((ushort)(byte)pcVar4[10] * 0x10 - 9) < (ushort)(byte)pcVar4[0xc]) {
                    if (*pcVar4 != '\0') {
                      if (pcVar4[0x14] == '\0') {
                        pcVar4[0x14] = '\x01';
                      }
                      else {
                        pcVar4[0x14] = '\0';
                      }
                    }
                    return 0xe;
                  }
                }
                else {
                  if (uVar8 < 0xb3) {
                    unaff_r8 = (uint)*(ushort *)(PTR_DAT_80022bb8 + 4);
                    bVar11 = 0xed < unaff_r8;
                    bVar10 = unaff_r8 == 0xee;
                    if (0xee < unaff_r8) {
                      bVar11 = unaff_r8 <= DAT_80022bc0;
                      bVar10 = DAT_80022bc0 == unaff_r8;
                    }
                    if (bVar11 && !bVar10) {
                      cVar1 = *PTR_DAT_80022bb8;
                      while (cVar1 != '\0') {
                        tp_i2c_read_status();
                        cVar1 = *puVar3;
                      }
                      FUN_8002b0f4();
                      if ((ushort)(byte)pcVar4[0xc] <= (ushort)((ushort)(byte)pcVar4[10] * 0x10 - 8)
                         ) {
                        return 0;
                      }
                      if (*pcVar4 != '\0') {
                        if (pcVar4[0x15] == '\0') {
                          pcVar4[0x15] = '\x01';
                        }
                        else {
                          pcVar4[0x15] = '\0';
                        }
                      }
                      return 0xf;
                    }
                  }
                  if (uVar7 < 0xb3) {
                    unaff_r8 = (uint)*(ushort *)(PTR_DAT_80022bb8 + 4);
                    bVar11 = 0xed < unaff_r8;
                    bVar10 = unaff_r8 == 0xee;
                    if (0xee < unaff_r8) {
                      bVar11 = unaff_r8 <= DAT_80022bc0;
                      bVar10 = DAT_80022bc0 == unaff_r8;
                    }
                    if (bVar11 && !bVar10) {
                      cVar1 = *PTR_DAT_80022bb8;
                      while (cVar1 != '\0') {
                        tp_i2c_read_status();
                        cVar1 = *puVar3;
                      }
                      FUN_8002b0f4();
                      if ((ushort)(byte)pcVar4[0xc] <= (ushort)((ushort)(byte)pcVar4[10] * 0x10 - 7)
                         ) {
                        return 0;
                      }
                      if (*pcVar4 != '\0') {
                        if (pcVar4[0x16] == '\0') {
                          pcVar4[0x16] = '\x01';
                        }
                        else {
                          pcVar4[0x16] = '\0';
                        }
                      }
                      return 0x10;
                    }
                  }
                  if (uVar6 < 0xb3) {
                    unaff_r8 = (uint)*(ushort *)(PTR_DAT_80022bb8 + 4);
                    bVar11 = 0xed < unaff_r8;
                    bVar10 = unaff_r8 == 0xee;
                    if (0xee < unaff_r8) {
                      bVar11 = unaff_r8 <= DAT_80022bc0;
                      bVar10 = DAT_80022bc0 == unaff_r8;
                    }
                    if (bVar11 && !bVar10) {
                      cVar1 = *PTR_DAT_80022bb8;
                      while (cVar1 != '\0') {
                        tp_i2c_read_status();
                        cVar1 = *puVar3;
                      }
                      FUN_8002b0f4();
                      if ((ushort)(byte)pcVar4[0xc] <= (ushort)((ushort)(byte)pcVar4[10] * 0x10 - 6)
                         ) {
                        return 0;
                      }
                      if (*pcVar4 != '\0') {
                        if (pcVar4[0x17] == '\0') {
                          pcVar4[0x17] = '\x01';
                        }
                        else {
                          pcVar4[0x17] = '\0';
                        }
                      }
                      return 0x11;
                    }
                  }
                  if (uVar5 < 0xb3) {
                    unaff_r8 = (uint)*(ushort *)(PTR_DAT_80022bb8 + 4);
                    bVar11 = 0xed < unaff_r8;
                    bVar10 = unaff_r8 == 0xee;
                    if (0xee < unaff_r8) {
                      bVar11 = unaff_r8 <= DAT_80022bc0;
                      bVar10 = DAT_80022bc0 == unaff_r8;
                    }
                    if (bVar11 && !bVar10) {
                      cVar1 = *PTR_DAT_80022bb8;
                      while (cVar1 != '\0') {
                        tp_i2c_read_status();
                        cVar1 = *puVar3;
                      }
                      FUN_8002b0f4();
                      if ((ushort)(byte)pcVar4[0xc] <= (ushort)((ushort)(byte)pcVar4[10] * 0x10 - 5)
                         ) {
                        return 0;
                      }
                      if (*pcVar4 != '\0') {
                        if (pcVar4[0x18] == '\0') {
                          pcVar4[0x18] = '\x01';
                        }
                        else {
                          pcVar4[0x18] = '\0';
                        }
                      }
                      return 0x12;
                    }
                  }
                  if (0xb2 >= uVar8) {
                    unaff_r8 = (uint)*(ushort *)(PTR_DAT_80022bb8 + 4);
                  }
                  uVar9 = DAT_80022bc4 + 0x75;
                  if ((0xb2 < uVar8 || unaff_r8 <= DAT_80022bc4) || uVar9 <= unaff_r8) {
                    bVar10 = 0xb2 < uVar7;
                    if (!bVar10) {
                      uVar7 = (uint)*(ushort *)(PTR_DAT_80022bb8 + 4);
                    }
                    if ((bVar10 || uVar7 <= DAT_80022bc4) || uVar9 <= uVar7) {
                      bVar10 = 0xb2 < uVar6;
                      if (!bVar10) {
                        uVar6 = (uint)*(ushort *)(PTR_DAT_80022bb8 + 4);
                      }
                      if ((bVar10 || uVar6 <= DAT_80022bc4) || uVar9 <= uVar6) {
                        bVar10 = uVar5 < 0xb3;
                        if (bVar10) {
                          uVar5 = (uint)*(ushort *)(PTR_DAT_80022bb8 + 4);
                        }
                        if ((bVar10 && DAT_80022bc4 < uVar5) && uVar5 < uVar9) {
                          cVar1 = *PTR_DAT_80022bb8;
                          while (cVar1 != '\0') {
                            tp_i2c_read_status();
                            cVar1 = *puVar3;
                          }
                          FUN_8002b0f4();
                          if ((ushort)((ushort)(byte)pcVar4[10] * 0x10 - 1) <
                              (ushort)(byte)pcVar4[0xc]) {
                            if (*pcVar4 != '\0') {
                              if (pcVar4[0x1c] == '\0') {
                                pcVar4[0x1c] = '\x01';
                              }
                              else {
                                pcVar4[0x1c] = '\0';
                              }
                            }
                            return 0x16;
                          }
                        }
                      }
                      else {
                        cVar1 = *PTR_DAT_80022bb8;
                        while (cVar1 != '\0') {
                          tp_i2c_read_status();
                          cVar1 = *puVar3;
                        }
                        FUN_8002b0f4();
                        if ((ushort)((ushort)(byte)pcVar4[10] * 0x10 - 2) <
                            (ushort)(byte)pcVar4[0xc]) {
                          if (*pcVar4 != '\0') {
                            if (pcVar4[0x1b] == '\0') {
                              pcVar4[0x1b] = '\x01';
                            }
                            else {
                              pcVar4[0x1b] = '\0';
                            }
                          }
                          return 0x15;
                        }
                      }
                    }
                    else {
                      cVar1 = *PTR_DAT_80022bb8;
                      while (cVar1 != '\0') {
                        tp_i2c_read_status();
                        cVar1 = *puVar3;
                      }
                      FUN_8002b0f4();
                      if ((ushort)((ushort)(byte)pcVar4[10] * 0x10 - 3) < (ushort)(byte)pcVar4[0xc])
                      {
                        if (*pcVar4 != '\0') {
                          if (pcVar4[0x1a] == '\0') {
                            pcVar4[0x1a] = '\x01';
                          }
                          else {
                            pcVar4[0x1a] = '\0';
                          }
                        }
                        return 0x14;
                      }
                    }
                  }
                  else {
                    cVar1 = *PTR_DAT_80022bb8;
                    while (cVar1 != '\0') {
                      tp_i2c_read_status();
                      cVar1 = *puVar3;
                    }
                    FUN_8002b0f4();
                    if ((ushort)((ushort)(byte)pcVar4[10] * 0x10 - 4) < (ushort)(byte)pcVar4[0xc]) {
                      if (*pcVar4 != '\0') {
                        if (pcVar4[0x19] == '\0') {
                          pcVar4[0x19] = '\x01';
                        }
                        else {
                          pcVar4[0x19] = '\0';
                        }
                      }
                      return 0x13;
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  return 0;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x80022c00
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_return_delete_menu(void)

{
  ushort uVar1;
  undefined *puVar2;
  int *piVar3;
  ushort uVar4;
  ushort uVar5;
  ushort uVar6;
  int iVar7;
  ushort *puVar8;
  ushort *puVar9;
  int iVar10;
  uint uVar11;
  code *in_lr;
  undefined auStack576 [556];
  code *UNRECOVERED_JUMPTABLE_00;
  
  iVar10 = DAT_80022dac;
  puVar2 = PTR_DAT_80022da8;
  uVar4 = *(ushort *)(PTR_DAT_80022da8 + 2);
  if (*(byte *)(DAT_80022dac + 0xc) <= uVar4) {
    if (uVar4 == 0) {
      return;
    }
    uVar4 = uVar4 - 1;
    *(ushort *)(PTR_DAT_80022da8 + 2) = uVar4;
  }
  UNRECOVERED_JUMPTABLE_00 = in_lr;
  iVar7 = FUN_800337c4(auStack576,(uint)uVar4 * 0xf + iVar10 + 0x7ee,1);
  if (iVar7 != 4) {
    FUN_800334ac(auStack576,0x46);
    FUN_80033b18(auStack576,DAT_80022db4,DAT_80022db0,0);
    FUN_8003347c(auStack576);
    iVar10 = DAT_80022db8;
    *(undefined *)(DAT_80022db8 + 0x43) = 0;
    FUN_80001358(DAT_80022db4);
    *(undefined *)(iVar10 + 0x18) = 1;
    *(undefined *)(iVar10 + 0x17) = 1;
    FUN_8001d4ec(DAT_80022dbc);
    delay_2(0xf);
    set_frame_to_global_pointer();
    setup_main_screen();
    set_frame_to_global_pointer();
    FUN_8002b68c();
    if (*puVar2 != '\0') {
      uVar4 = convert_color(0);
      uVar5 = convert_color(DAT_80022dc0);
      set_screen_to_global_pointer();
      piVar3 = Global_Frame_Buffer_Pointer;
      puVar2 = PTR_BITMAP_RETURN_DELETE_MENU_80022dc4;
      uVar11 = 0x1a4;
      do {
        iVar10 = 800;
        puVar8 = (ushort *)(*piVar3 + uVar11 * 0x640);
        puVar9 = (ushort *)(puVar2 + uVar11 * 0xc80 + -0x148200);
        do {
          uVar1 = *puVar9;
          uVar6 = uVar5;
          if ((uVar1 != 0) && (uVar6 = uVar1, uVar1 == 0xf800)) {
            uVar6 = uVar4;
          }
          iVar10 = iVar10 + -1;
          *puVar8 = uVar6;
          puVar8 = puVar8 + 1;
          puVar9 = puVar9 + 2;
        } while (iVar10 != 0);
        uVar11 = uVar11 + 1 & 0xfffeffff;
      } while (uVar11 < 0x1e0);
      set_frame_to_global_pointer();
    }
    copy_short(DAT_80022dbc,Start_Of_Screen_Mem,number_of_pixels);
    FUN_8001d4ec(Start_Of_Screen_Mem);
                    // WARNING: Could not recover jumptable at 0x80022d4c. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)(0);
    return;
  }
  FUN_8002c7a4();
  FUN_8000b2ac();
  FUN_8000bb04(*(undefined2 *)(iVar10 + (uint)*(ushort *)(puVar2 + 2) * 2 + 0x1e));
  FUN_80033ea4((uint)*(ushort *)(puVar2 + 2) * 0xf + iVar10 + 0x7ee);
  FUN_8002c8f4();
  FUN_800261b4();
  FUN_8002c7a4();
  FUN_8000b2ac();
  FUN_8003347c(auStack576);
                    // WARNING: Could not recover jumptable at 0x80022da4. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE_00)(1);
  return;
}



void display_confirm_delete_menu(void)

{
  ushort uVar1;
  undefined *puVar2;
  int *piVar3;
  undefined *puVar4;
  ushort uVar5;
  ushort uVar6;
  ushort uVar7;
  ushort uVar8;
  short sVar9;
  int iVar10;
  ushort *puVar11;
  ushort *puVar12;
  uint uVar13;
  
  puVar4 = PTR_DAT_80022fb4;
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_BITMAP_CONFIRM_DELETE_MENU_80022fac;
LAB_80022df0:
  while( true ) {
    do {
      iVar10 = FUN_800230a0();
    } while (iVar10 == 0);
    if (iVar10 == 1) {
      memset(DAT_80022fbc,0,number_of_pixels);
      *puVar4 = 1;
      puVar4[4] = 1;
      puVar4[5] = 0;
      return;
    }
    if (iVar10 != 2) break;
    uVar5 = convert_color(DAT_80022fc0);
    uVar6 = convert_color(DAT_80022fc4);
    uVar7 = convert_color(DAT_80022fc8);
    set_screen_to_global_pointer();
    uVar13 = 0xc0;
    do {
      iVar10 = 0xb4;
      puVar11 = (ushort *)(*piVar3 + uVar13 * 0x640 + 0x226);
      puVar12 = (ushort *)(puVar2 + uVar13 * 0x2d0 + -0x21c00);
      do {
        uVar1 = *puVar12;
        uVar8 = uVar7;
        if (((uVar1 != 0) && (uVar8 = uVar5, uVar1 != 0xf800)) && (uVar8 = uVar1, uVar1 == 0x7e0)) {
          uVar8 = uVar6;
        }
        iVar10 = iVar10 + -1;
        *puVar11 = uVar8;
        puVar11 = puVar11 + 1;
        puVar12 = puVar12 + 2;
      } while (iVar10 != 0);
      uVar13 = uVar13 + 1 & 0xfffeffff;
    } while (uVar13 < 0x121);
    do {
      iVar10 = FUN_80022fd0();
    } while (iVar10 == 2);
    if (iVar10 == 0) goto LAB_80022f64;
    FUN_8002c7a4();
    FUN_8000b2ac();
    iVar10 = DAT_80022fcc;
    FUN_8000bb04(*(undefined2 *)(DAT_80022fcc + (uint)*(ushort *)(puVar4 + 2) * 2 + 0x1e));
    FUN_80033ea4((uint)*(ushort *)(puVar4 + 2) * 0xf + iVar10 + 0x7ee);
    FUN_8002c8f4();
    FUN_800261b4();
    FUN_8002c7a4();
    iVar10 = FUN_8000b2ac();
    puVar4[4] = 1;
    puVar4[5] = 0;
    display_return_delete_menu();
    if (iVar10 != 0) {
      return;
    }
  }
  if (iVar10 == 3) {
    if (*(short *)(puVar4 + 2) == 0) goto LAB_80022df0;
    sVar9 = *(short *)(puVar4 + 2) + -1;
  }
  else {
    if (iVar10 != 4) {
      if (iVar10 == 5) {
        display_return_delete_menu();
      }
      goto LAB_80022df0;
    }
    if ((int)(*(byte *)(DAT_80022fcc + 0xc) - 1) <= (int)(uint)*(ushort *)(puVar4 + 2))
    goto LAB_80022df0;
    sVar9 = *(ushort *)(puVar4 + 2) + 1;
  }
  *(short *)(puVar4 + 2) = sVar9;
LAB_80022f64:
  puVar4[4] = 1;
  puVar4[5] = 0;
  display_return_delete_menu();
  goto LAB_80022df0;
}



undefined4 FUN_80022fd0(void)

{
  char cVar1;
  undefined *puVar2;
  uint uVar3;
  bool bVar4;
  bool bVar5;
  
  tp_i2c_read_status();
  puVar2 = PTR_DAT_80023098;
  if (*(ushort *)(PTR_DAT_80023098 + 2) - 0x11e < 0x4a) {
    uVar3 = (uint)*(ushort *)(PTR_DAT_80023098 + 4);
    bVar5 = 0xe4 < uVar3;
    bVar4 = uVar3 == 0xe5;
    if (0xe5 < uVar3) {
      bVar5 = uVar3 <= DAT_8002309c;
      bVar4 = DAT_8002309c == uVar3;
    }
    if (bVar5 && !bVar4) {
      cVar1 = *PTR_DAT_80023098;
      while (cVar1 != '\0') {
        tp_i2c_read_status();
        cVar1 = *puVar2;
      }
      goto LAB_8002308c;
    }
  }
  if (*(ushort *)(PTR_DAT_80023098 + 2) - 0x173 < 0x4a) {
    uVar3 = (uint)*(ushort *)(PTR_DAT_80023098 + 4);
    bVar5 = 0xe4 < uVar3;
    bVar4 = uVar3 == 0xe5;
    if (0xe5 < uVar3) {
      bVar5 = uVar3 <= DAT_8002309c;
      bVar4 = DAT_8002309c == uVar3;
    }
    if (bVar5 && !bVar4) {
      cVar1 = *PTR_DAT_80023098;
      while (cVar1 != '\0') {
        tp_i2c_read_status();
        cVar1 = *puVar2;
      }
      FUN_8002b0f4();
      return 1;
    }
  }
  if (*PTR_DAT_80023098 == '\0') {
    return 2;
  }
  do {
    tp_i2c_read_status();
  } while (*puVar2 != '\0');
LAB_8002308c:
  FUN_8002b0f4();
  return 0;
}



undefined4 FUN_800230a0(void)

{
  char cVar1;
  undefined *puVar2;
  uint uVar3;
  undefined *puVar4;
  uint uVar5;
  uint uVar6;
  bool bVar7;
  bool bVar8;
  
  puVar4 = PTR_DAT_800232b0;
  uVar3 = DAT_800232ac;
  uVar6 = DAT_800232a8;
  puVar2 = PTR_DAT_800232a4;
  if (*PTR_DAT_800232a4 == '\0') {
    tp_i2c_read_status();
    if ((*(ushort *)(puVar4 + 2) - 1 < uVar6) &&
       (*(ushort *)(puVar4 + 4) != 0 && *(ushort *)(puVar4 + 4) < uVar3)) {
      cVar1 = *puVar4;
      while (cVar1 != '\0') {
        tp_i2c_read_status();
        cVar1 = *puVar4;
      }
      FUN_8002b0f4();
      *puVar2 = 1;
      return 5;
    }
  }
  else {
    tp_i2c_read_status();
    uVar5 = (uint)*(ushort *)(puVar4 + 2);
    if ((uVar5 - 1 < uVar6) && (*(ushort *)(puVar4 + 4) != 0 && *(ushort *)(puVar4 + 4) < 0x1a4)) {
      cVar1 = *puVar4;
      while (cVar1 != '\0') {
        tp_i2c_read_status();
        cVar1 = *puVar4;
      }
      FUN_8002b0f4();
      *puVar2 = 0;
      return 5;
    }
    if (uVar5 - 1 < 199) {
      uVar6 = (uint)*(ushort *)(puVar4 + 4);
      bVar8 = 0x1a3 < uVar6;
      bVar7 = uVar6 == 0x1a4;
      if (0x1a4 < uVar6) {
        bVar8 = uVar6 <= uVar3;
        bVar7 = uVar3 == uVar6;
      }
      if (bVar8 && !bVar7) {
        cVar1 = *puVar4;
        while (cVar1 != '\0') {
          tp_i2c_read_status();
          cVar1 = *puVar4;
        }
        FUN_8002b0f4();
        return 1;
      }
    }
    if (uVar5 - 0xc9 < 199) {
      uVar6 = (uint)*(ushort *)(puVar4 + 4);
      bVar8 = 0x1a3 < uVar6;
      bVar7 = uVar6 == 0x1a4;
      if (0x1a4 < uVar6) {
        bVar8 = uVar6 <= uVar3;
        bVar7 = uVar3 == uVar6;
      }
      if (bVar8 && !bVar7) {
        cVar1 = *puVar4;
        while (cVar1 != '\0') {
          tp_i2c_read_status();
          cVar1 = *puVar4;
        }
        FUN_8002b0f4();
        return 2;
      }
    }
    if (uVar5 - 0x191 < 199) {
      uVar6 = (uint)*(ushort *)(puVar4 + 4);
      bVar8 = 0x1a3 < uVar6;
      bVar7 = uVar6 == 0x1a4;
      if (0x1a4 < uVar6) {
        bVar8 = uVar6 <= uVar3;
        bVar7 = uVar3 == uVar6;
      }
      if (bVar8 && !bVar7) {
        cVar1 = *puVar4;
        while (cVar1 != '\0') {
          tp_i2c_read_status();
          cVar1 = *puVar4;
        }
        FUN_8002b0f4();
        return 3;
      }
    }
    if (uVar5 - 0x259 < 199) {
      uVar6 = (uint)*(ushort *)(puVar4 + 4);
      bVar8 = 0x1a3 < uVar6;
      bVar7 = uVar6 == 0x1a4;
      if (0x1a4 < uVar6) {
        bVar8 = uVar6 <= uVar3;
        bVar7 = uVar3 == uVar6;
      }
      if (bVar8 && !bVar7) {
        cVar1 = *puVar4;
        while (cVar1 != '\0') {
          tp_i2c_read_status();
          cVar1 = *puVar4;
        }
        FUN_8002b0f4();
        return 4;
      }
    }
  }
  return 0;
}



ushort convert_color(uint color)

{
  return (ushort)(((color << 8) >> 0x1b) << 0xb) | (ushort)(((color << 0x10) >> 0x1a) << 5) |
         (ushort)((color << 0x18) >> 0x1b);
}



void load_config_data(void)

{
  undefined2 uVar1;
  uint *puVar2;
  undefined *puVar3;
  int iVar4;
  int iVar5;
  undefined2 *puVar6;
  uint *puVar7;
  uint *puVar8;
  int iVar9;
  undefined *puVar10;
  
  read_from_flash(FLASH_CONFIG_DATA,DAT_80023304,500);
  puVar6 = DAT_80027a1c;
  iVar5 = DAT_80027a18;
  iVar4 = DAT_80027a14;
  puVar3 = DAT_80027a10;
  puVar2 = DAT_80023304;
  puVar7 = DAT_80023304 + 0x40;
  *DAT_80027a10 = *(undefined *)DAT_80023304;
  puVar8 = puVar2 + 0x53;
  puVar10 = (undefined *)(iVar5 + -1);
  iVar9 = 0xc;
  puVar3[3] = *(undefined *)((int)puVar2 + 2);
  puVar3[4] = *(undefined *)(puVar2 + 1);
  puVar3[1] = *(undefined *)((int)puVar2 + 6);
  puVar3[2] = *(undefined *)(puVar2 + 2);
  puVar3[0xc] = *(undefined *)((int)puVar2 + 10);
  puVar3[0xf] = *(undefined *)(puVar2 + 3);
  puVar3[0x10] = *(undefined *)((int)puVar2 + 0xe);
  puVar3[0xd] = *(undefined *)(puVar2 + 4);
  puVar3[0xe] = *(undefined *)((int)puVar2 + 0x12);
  puVar3[10] = *(undefined *)(puVar2 + 5);
  puVar3[0x16] = *(undefined *)((int)puVar2 + 0x16);
  puVar3[0x21] = *(undefined *)(puVar2 + 6);
  puVar3[0x22] = *(undefined *)((int)puVar2 + 0x1a);
  puVar3[0x23] = *(undefined *)(puVar2 + 7);
  puVar3[0x42] = *(undefined *)((int)puVar2 + 0x1e);
  *(undefined2 *)(puVar3 + 0x24) = *(undefined2 *)(puVar2 + 0x14);
  *(undefined2 *)(puVar3 + 0x26) = *(undefined2 *)((int)puVar2 + 0x52);
  *(undefined2 *)(puVar3 + 6) = *(undefined2 *)(puVar2 + 0x15);
  *(undefined2 *)(puVar3 + 0x12) = *(undefined2 *)((int)puVar2 + 0x56);
  *(undefined *)(iVar4 + 2) = *(undefined *)(puVar2 + 0x1e);
  *(undefined *)(iVar4 + 3) = *(undefined *)((int)puVar2 + 0x7a);
  *(undefined *)(iVar4 + 4) = *(undefined *)(puVar2 + 0x1f);
  *(undefined *)(iVar4 + 7) = *(undefined *)((int)puVar2 + 0x7e);
  *(undefined *)(iVar5 + 0x100) = *(undefined *)(puVar2 + 0x28);
  *(undefined *)(iVar5 + 0x112) = *(undefined *)((int)puVar2 + 0xa2);
  *(undefined *)(iVar5 + 0x122) = *(undefined *)(puVar2 + 0x29);
  *(undefined *)(iVar5 + 0x132) = *(undefined *)((int)puVar2 + 0xa6);
  *(undefined *)(iVar5 + 0x142) = *(undefined *)(puVar2 + 0x2a);
  *(undefined *)(iVar5 + 0x152) = *(undefined *)((int)puVar2 + 0xaa);
  *(undefined *)(iVar5 + 0x162) = *(undefined *)(puVar2 + 0x2b);
  *(undefined *)(iVar5 + 0x172) = *(undefined *)((int)puVar2 + 0xae);
  *(undefined *)(iVar5 + 0x182) = *(undefined *)(puVar2 + 0x2c);
  *(undefined *)(iVar5 + 0x192) = *(undefined *)((int)puVar2 + 0xb2);
  *(undefined *)(iVar5 + 0x1a2) = *(undefined *)(puVar2 + 0x2d);
  *(undefined *)(iVar5 + 0x1b2) = *(undefined *)((int)puVar2 + 0xb6);
  *(undefined *)(iVar5 + 0x1c2) = *(undefined *)(puVar2 + 0x2e);
  *(undefined *)(iVar5 + 0x1d2) = *(undefined *)((int)puVar2 + 0xba);
  *(undefined *)(iVar5 + 0x1e2) = *(undefined *)(puVar2 + 0x2f);
  *(undefined *)(iVar5 + 0x1f2) = *(undefined *)((int)puVar2 + 0xbe);
  *(undefined *)(iVar5 + 0x202) = *(undefined *)(puVar2 + 0x30);
  *(undefined *)(iVar5 + 0x212) = *(undefined *)((int)puVar2 + 0xc2);
  *(undefined *)(iVar5 + 0x232) = *(undefined *)(puVar2 + 0x31);
  *(undefined *)(iVar5 + 0x242) = *(undefined *)((int)puVar2 + 0xc6);
  *(undefined *)(iVar5 + 0x252) = *(undefined *)(puVar2 + 0x32);
  *(undefined *)(iVar5 + 0x262) = *(undefined *)((int)puVar2 + 0xca);
  *(undefined *)(iVar5 + 0x272) = *(undefined *)(puVar2 + 0x33);
  *(undefined *)(iVar5 + 0x282) = *(undefined *)((int)puVar2 + 0xce);
  *puVar6 = *(undefined2 *)(puVar2 + 0x3c);
  puVar6[1] = *(undefined2 *)((int)puVar2 + 0xf2);
  puVar6[2] = *(undefined2 *)(puVar2 + 0x3d);
  puVar6[3] = *(undefined2 *)((int)puVar2 + 0xf6);
  puVar6[4] = *(undefined2 *)(puVar2 + 0x3e);
  puVar6[5] = *(undefined2 *)((int)puVar2 + 0xfa);
  puVar6[6] = *(undefined2 *)(puVar2 + 0x3f);
  puVar6[7] = *(undefined2 *)((int)puVar2 + 0xfe);
  puVar6[8] = *(undefined2 *)puVar7;
  puVar6[9] = *(undefined2 *)((int)puVar2 + 0x102);
  puVar6[10] = *(undefined2 *)(puVar2 + 0x41);
  puVar6[0xb] = *(undefined2 *)((int)puVar2 + 0x106);
  puVar6[0xc] = *(undefined2 *)(puVar2 + 0x42);
  puVar6[0xd] = *(undefined2 *)((int)puVar2 + 0x10a);
  puVar6[0xe] = *(undefined2 *)(puVar2 + 0x43);
  puVar6[0xf] = *(undefined2 *)((int)puVar2 + 0x10e);
  puVar6[0x10] = *(undefined2 *)(puVar2 + 0x44);
  puVar6[0x11] = *(undefined2 *)((int)puVar2 + 0x112);
  *(undefined *)(puVar6 + 0x12) = *(undefined *)(puVar2 + 0x45);
  *(undefined *)((int)puVar6 + 0x25) = *(undefined *)((int)puVar2 + 0x116);
  *(undefined *)(puVar6 + 0x13) = *(undefined *)(puVar2 + 0x46);
  *(undefined *)((int)puVar6 + 0x27) = *(undefined *)((int)puVar2 + 0x11a);
  *(undefined *)(puVar6 + 0x14) = *(undefined *)(puVar2 + 0x47);
  *(undefined *)((int)puVar6 + 0x29) = *(undefined *)((int)puVar2 + 0x11e);
  puVar6[0x15] = *(undefined2 *)(puVar2 + 0x48);
  puVar6[0x16] = *(undefined2 *)((int)puVar2 + 0x122);
  puVar6[0x17] = *(undefined2 *)(puVar2 + 0x49);
  puVar6[0x18] = *(undefined2 *)((int)puVar2 + 0x126);
  puVar6[0x19] = *(undefined2 *)(puVar2 + 0x4a);
  puVar6[0x1a] = *(undefined2 *)((int)puVar2 + 0x12a);
  *(undefined *)(puVar6 + 0x1b) = *(undefined *)(puVar2 + 0x4b);
  *(undefined *)((int)puVar6 + 0x37) = *(undefined *)((int)puVar2 + 0x12e);
  *(undefined *)(puVar6 + 0x1c) = *(undefined *)(puVar2 + 0x4c);
  *(undefined *)((int)puVar6 + 0x39) = *(undefined *)((int)puVar2 + 0x132);
  *(undefined *)(puVar6 + 0x1d) = *(undefined *)(puVar2 + 0x4d);
  *(undefined *)((int)puVar6 + 0x3b) = *(undefined *)((int)puVar2 + 0x136);
  puVar6[0x1e] = *(undefined2 *)(puVar2 + 0x4e);
  puVar6[0x1f] = *(undefined2 *)((int)puVar2 + 0x13a);
  puVar6[0x20] = *(undefined2 *)(puVar2 + 0x4f);
  puVar6[0x21] = *(undefined2 *)((int)puVar2 + 0x13e);
  puVar6[0x22] = *(undefined2 *)(puVar2 + 0x50);
  uVar1 = *(undefined2 *)((int)puVar2 + 0x142);
  puVar6[0x23] = uVar1;
  *(char *)(iVar5 + 0x292) = (char)uVar1;
  *(undefined2 *)(iVar5 + 0x294) = *(undefined2 *)(puVar2 + 0x51);
  *(undefined2 *)(iVar5 + 0x296) = *(undefined2 *)((int)puVar2 + 0x146);
  *(undefined *)(iVar5 + 0x29a) = *(undefined *)(puVar2 + 0x52);
  *(undefined2 *)(iVar5 + 0x29c) = *(undefined2 *)((int)puVar2 + 0x14a);
  *(undefined2 *)(iVar5 + 0x29e) = *(undefined2 *)(puVar2 + 0x53);
  do {
    iVar9 = iVar9 + -1;
    puVar10[1] = *(undefined *)((int)puVar8 + 2);
    puVar8 = puVar8 + 1;
    puVar10 = puVar10 + 2;
    *puVar10 = *(undefined *)puVar8;
  } while (iVar9 != 0);
  *(undefined2 *)(puVar3 + 0x44) = *(undefined2 *)(puVar2 + 100);
  return;
}



uint is_hardware_check_needed(void)

{
  uint in_r3;
  uint local_8 [2];
  
  local_8[0] = in_r3 & 0xffff0000;
  read_from_flash(FLASH_CHK_HW_FLAG,local_8,2);
  if ((local_8[0] & 0xffff) != 0x9086) {
    return (uint)((local_8[0] & 0xffff) == 0x7293);
  }
  return 2;
}



uint get_timer_ticks(void)

{
  return *TImer_Ticks;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x800235f0
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_80023574(undefined2 *param_1,uint param_2)

{
  undefined2 *puVar1;
  undefined2 *puVar2;
  undefined2 *puVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  code *UNRECOVERED_JUMPTABLE;
  bool bVar7;
  
  FUN_80023804();
  puVar1 = DAT_80023644;
  if (param_2 != 0) {
    bVar7 = (param_2 & 1) != 0;
    puVar2 = param_1 + -1;
    if (bVar7) {
      *DAT_80023644 = *param_1;
      puVar2 = param_1;
    }
    uVar4 = (uint)bVar7;
    uVar5 = param_2 >> 1;
    while (uVar5 != 0) {
      uVar6 = uVar4 + 1;
      *(undefined2 *)((int)puVar1 + (uVar4 & 0xfffffffe)) = puVar2[1];
      puVar2 = puVar2 + 2;
      uVar5 = uVar5 - 1 & 0xffff;
      uVar4 = uVar4 + 2;
      *(undefined2 *)((int)puVar1 + (uVar6 & 0xfffffffe)) = *puVar2;
    }
  }
  param_2 = param_2 >> 1;
  if (param_2 == 0) {
                    // WARNING: Could not recover jumptable at 0x800235f0. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
  puVar2 = param_1 + -1;
  puVar3 = puVar1 + -1;
  if ((param_2 & 1) != 0) {
    *param_1 = *puVar1;
    puVar2 = param_1;
    puVar3 = puVar1;
  }
  uVar5 = (param_2 << 0xf) >> 0x10;
  if (uVar5 == 0) {
                    // WARNING: Could not recover jumptable at 0x80023618. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
  do {
    puVar2[1] = puVar3[1];
    puVar3 = puVar3 + 2;
    uVar5 = uVar5 - 1 & 0xffff;
    puVar2 = puVar2 + 2;
    *puVar2 = *puVar3;
  } while (uVar5 != 0);
                    // WARNING: Could not recover jumptable at 0x80023640. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE)();
  return;
}



void FUN_80023648(undefined2 *param_1,uint param_2)

{
  uint uVar1;
  undefined2 *puVar2;
  undefined2 *puVar3;
  uint uVar4;
  undefined2 *puVar5;
  uint uVar6;
  uint uVar7;
  bool bVar8;
  
  puVar2 = DAT_8002370c;
  uVar6 = param_2 >> 1;
  if (param_2 != 0) {
    bVar8 = (param_2 & 1) != 0;
    puVar3 = param_1 + -1;
    if (bVar8) {
      *DAT_8002370c = *param_1;
      puVar3 = param_1;
    }
    uVar4 = (uint)bVar8;
    uVar1 = uVar6;
    while (uVar1 != 0) {
      uVar7 = uVar4 + 1;
      *(undefined2 *)((int)puVar2 + (uVar4 & 0xfffffffe)) = puVar3[1];
      puVar3 = puVar3 + 2;
      uVar1 = uVar1 - 1 & 0xffff;
      uVar4 = uVar4 + 2;
      *(undefined2 *)((int)puVar2 + (uVar7 & 0xfffffffe)) = *puVar3;
    }
  }
  if (uVar6 == 0) {
    return;
  }
  puVar3 = param_1 + -1;
  puVar5 = puVar2 + -1;
  if ((uVar6 & 1) != 0) {
    *param_1 = *puVar2;
    puVar3 = param_1;
    puVar5 = puVar2;
  }
  uVar6 = (uVar6 << 0xf) >> 0x10;
  if (uVar6 == 0) {
    return;
  }
  do {
    puVar3[1] = puVar5[1];
    puVar5 = puVar5 + 2;
    uVar6 = uVar6 - 1 & 0xffff;
    puVar3 = puVar3 + 2;
    *puVar3 = *puVar5;
  } while (uVar6 != 0);
  return;
}



void FUN_80023710(ushort *param_1,uint param_2)

{
  ushort *puVar1;
  ushort *puVar2;
  ushort *puVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  
  FUN_80023804();
  puVar1 = DAT_80013758;
  uVar4 = param_2 >> 1;
  if (uVar4 != 0) {
    puVar2 = DAT_80013758 + -2;
    puVar3 = param_1 + -1;
    if ((uVar4 & 1) != 0) {
      *DAT_80013758 = *param_1;
      puVar2 = puVar1;
      puVar3 = param_1;
    }
    uVar6 = (uVar4 << 0xf) >> 0x10;
    while (uVar6 != 0) {
      puVar2[2] = puVar3[1];
      puVar3 = puVar3 + 2;
      uVar6 = uVar6 - 1 & 0xffff;
      puVar2 = puVar2 + 4;
      *puVar2 = *puVar3;
    }
  }
  uVar6 = (param_2 >> 1) - 1;
  if (0 < (int)uVar6) {
    puVar2 = puVar1 + -2;
    if ((uVar6 & 1) != 0) {
      puVar1[1] = (ushort)((uint)*puVar1 + (uint)puVar1[2] >> 1);
      puVar2 = puVar1;
    }
    uVar6 = uVar6 * 0x8000 >> 0x10;
    while (uVar6 != 0) {
      uVar5 = (uint)puVar2[4];
      puVar2[3] = (ushort)(puVar2[2] + uVar5 >> 1);
      uVar6 = uVar6 - 1 & 0xffff;
      puVar2[5] = (ushort)(uVar5 + puVar2[6] >> 1);
      puVar2 = puVar2 + 4;
    }
  }
  if (param_2 == 0) {
    return;
  }
  puVar2 = param_1 + -1;
  puVar3 = puVar1 + -1;
  if ((param_2 & 1) != 0) {
    *param_1 = *puVar1;
    puVar2 = param_1;
    puVar3 = puVar1;
  }
  if (uVar4 == 0) {
    return;
  }
  do {
    uVar4 = uVar4 - 1;
    puVar2[1] = puVar3[1];
    puVar3 = puVar3 + 2;
    puVar2 = puVar2 + 2;
    *puVar2 = *puVar3;
  } while (uVar4 != 0);
  return;
}



void FUN_80023734(undefined2 *param_1,uint param_2)

{
  undefined2 *puVar1;
  undefined2 *puVar2;
  undefined2 *puVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  bool bVar7;
  
  puVar1 = DAT_80023800;
  if (param_2 != 0) {
    bVar7 = (param_2 & 1) != 0;
    puVar2 = param_1 + -1;
    if (bVar7) {
      *DAT_80023800 = *param_1;
      puVar2 = param_1;
    }
    uVar5 = (uint)bVar7;
    uVar4 = param_2 >> 1;
    while (uVar4 != 0) {
      iVar6 = uVar5 + 1;
      puVar1[(int)uVar5 >> 2] = puVar2[1];
      puVar2 = puVar2 + 2;
      uVar4 = uVar4 - 1 & 0xffff;
      uVar5 = uVar5 + 2;
      puVar1[iVar6 >> 2] = *puVar2;
    }
  }
  param_2 = param_2 >> 2;
  if (param_2 == 0) {
    return;
  }
  puVar2 = param_1 + -1;
  puVar3 = puVar1 + -1;
  if ((param_2 & 1) != 0) {
    *param_1 = *puVar1;
    puVar2 = param_1;
    puVar3 = puVar1;
  }
  uVar4 = (param_2 << 0xf) >> 0x10;
  if (uVar4 == 0) {
    return;
  }
  do {
    puVar2[1] = puVar3[1];
    puVar3 = puVar3 + 2;
    uVar4 = uVar4 - 1 & 0xffff;
    puVar2 = puVar2 + 2;
    *puVar2 = *puVar3;
  } while (uVar4 != 0);
  return;
}



void FUN_80023804(undefined2 *param_1,uint param_2)

{
  undefined2 *puVar1;
  int iVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  bool bVar9;
  
  iVar2 = DAT_80023900;
  puVar1 = DAT_800238fc;
  if (param_2 != 0) {
    bVar9 = (param_2 & 1) != 0;
    puVar3 = param_1 + -1;
    if (bVar9) {
      *DAT_800238fc = *param_1;
      puVar3 = param_1;
    }
    uVar6 = (uint)bVar9;
    uVar5 = param_2 >> 1;
    while (uVar5 != 0) {
      iVar7 = (int)((ulonglong)((longlong)iVar2 * (longlong)(int)uVar6) >> 0x20);
      iVar8 = (int)((ulonglong)((longlong)iVar2 * (longlong)(int)(uVar6 + 1)) >> 0x20);
      puVar1[(iVar7 >> 1) - (iVar7 >> 0x1f)] = puVar3[1];
      puVar3 = puVar3 + 2;
      uVar5 = uVar5 - 1 & 0xffff;
      uVar6 = uVar6 + 2;
      puVar1[(iVar8 >> 1) - (iVar8 >> 0x1f)] = *puVar3;
    }
  }
  uVar5 = DAT_80023904 * param_2 >> 0x12;
  if (uVar5 == 0) {
    return;
  }
  puVar3 = param_1 + -1;
  puVar4 = puVar1 + -1;
  if ((uVar5 & 1) != 0) {
    *param_1 = *puVar1;
    puVar3 = param_1;
    puVar4 = puVar1;
  }
  uVar5 = (uVar5 << 0xf) >> 0x10;
  if (uVar5 == 0) {
    return;
  }
  do {
    puVar3[1] = puVar4[1];
    puVar4 = puVar4 + 2;
    uVar5 = uVar5 - 1 & 0xffff;
    puVar3 = puVar3 + 2;
    *puVar3 = *puVar4;
  } while (uVar5 != 0);
  return;
}



undefined4 FUN_80023908(int param_1,int param_2,int param_3,int param_4)

{
  int iVar1;
  undefined4 uVar2;
  
  iVar1 = DAT_800239b4;
  if (*(uint *)(DAT_800239b0 + param_1 * 4) < (uint)(param_3 + param_4)) {
    if (param_2 == 0x2a) {
      FUN_80002c08(2);
    }
    FUN_80002c08(0);
    *(undefined *)(iVar1 + 2) = 5;
    *(undefined *)(iVar1 + 0xc) = 0x21;
    FUN_80026858(1,0);
    return 0;
  }
  if (*(int *)(DAT_800239bc + 8) != param_4 * *(int *)(DAT_800239b8 + param_1 * 4)) {
    if (param_2 == 0x2a) {
      uVar2 = 2;
    }
    else {
      uVar2 = 0;
    }
    FUN_80002c08(uVar2);
    *(undefined *)(iVar1 + 2) = 5;
    *(undefined *)(iVar1 + 0xc) = 0x24;
    FUN_80026858(1,0);
    return 0;
  }
  return 1;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

uint sys_sd_card_init(void)

{
  uint uVar1;
  undefined4 *port;
  int *piVar2;
  int in_r0;
  uint *puVar3;
  char *pcVar4;
  int iVar5;
  uint *puVar6;
  uint *puVar7;
  uint *puVar8;
  undefined4 *unaff_r9;
  uint local_34;
  uint local_30;
  uint local_2c;
  uint local_28;
  
  port = PORT_C_CFG0;
  puVar6 = SD_MMC_0_BASE;
  puVar7 = SD_MMC_0_BASE + 0x400;
  puVar8 = SD_MMC_0_BASE;
  if ((in_r0 != 0) && (puVar8 = puVar7, in_r0 != 1)) {
    puVar8 = (uint *)0x0;
  }
  if (in_r0 == 0) {
    unaff_r9 = PORT_F_CFG0;
  }
  iVar5 = 0;
  if (in_r0 == 0) {
    do {
      gpio_config_pin(unaff_r9,iVar5,2);
      iVar5 = iVar5 + 1;
    } while (iVar5 < 6);
  }
  else {
    if (in_r0 == 1) {
      do {
        gpio_config_pin(port,iVar5,3);
        iVar5 = iVar5 + 1;
      } while (iVar5 < 3);
    }
  }
  puVar3 = BUS_CLK_GATING_REG0;
  uVar1 = 1 << (in_r0 + 8U & 0xff);
  *BUS_CLK_GATING_REG0 = *BUS_CLK_GATING_REG0 | uVar1;
  puVar3[0x98] = uVar1 | puVar3[0x98];
  FUN_800324d0(1);
  sd_card_clk_init(in_r0,DAT_8002446c);
  puVar3 = puVar6;
  if ((in_r0 != 0) && (puVar3 = puVar7, in_r0 != 1)) {
    puVar3 = (uint *)0x0;
  }
  puVar3[0x1e] = puVar3[0x1e] | 2;
  puVar3[0x1e] = puVar3[0x1e] & 0xfffffffd;
  uVar1 = DAT_80024470;
  delay(DAT_80024470);
  puVar3[0x1e] = puVar3[0x1e] | 2;
  delay(uVar1);
  puVar3 = puVar6;
  if ((in_r0 != 0) && (puVar3 = puVar7, in_r0 != 1)) {
    puVar3 = (uint *)0x0;
  }
  *puVar3 = *puVar3 | 7;
  delay(uVar1);
  puVar3 = puVar6;
  if ((in_r0 != 0) && (puVar3 = puVar7, in_r0 != 1)) {
    puVar3 = (uint *)0x0;
  }
  *puVar3 = *puVar3 & 0xfffffeff;
  puVar3 = puVar6;
  if ((in_r0 != 0) && (puVar3 = puVar7, in_r0 != 1)) {
    puVar3 = (uint *)0x0;
  }
  puVar3[1] = puVar3[1] | 0x20000;
  puVar3 = puVar6;
  if ((in_r0 != 0) && (puVar3 = puVar7, in_r0 != 1)) {
    puVar3 = (uint *)0x0;
  }
  puVar3[3] = 0;
  puVar8[2] = 0xffffffff;
  if ((in_r0 != 0) && (puVar6 = puVar7, in_r0 != 1)) {
    puVar6 = (uint *)0x0;
  }
  puVar6[1] = puVar6[1] | 0x10000;
  FUN_80035c1c();
  FUN_800324d0(0x32);
  FUN_80036d3c();
  FUN_800324d0(500);
  iVar5 = FUN_80036d3c();
  piVar2 = DAT_80024478;
  if (iVar5 == 0) {
    FUN_800376f8(s_SD2_0____80024498);
    FUN_80036d3c();
    FUN_80036d3c();
    while ((local_28 & 0x80000000) == 0) {
      FUN_80036d3c();
      FUN_80036d3c();
    }
    if ((local_28 & 0x40000000) != 0) {
      pcVar4 = s__TYPE_SD_HIGH____800244a7 + 1;
      *piVar2 = 1;
      goto LAB_80024268;
    }
  }
  else {
    FUN_800376f8(s_SD1_1____8002447c);
    FUN_80036d3c();
    FUN_800324d0(500);
    iVar5 = FUN_80036d3c();
    if (iVar5 == 0x98) {
      FUN_80036d3c();
      FUN_800324d0(1);
      iVar5 = FUN_80036d3c();
      if (iVar5 == 0x98) {
        *piVar2 = 0;
        FUN_800376f8(s_ERR_DEVICE____800244d4);
        return 0xffffffff;
      }
      while ((local_28 & 0x80000000) == 0) {
        FUN_80036d3c();
      }
      *piVar2 = 3;
      pcVar4 = s_TYPE_MMC____800244c4;
      goto LAB_80024268;
    }
    if (iVar5 != 0) {
      *piVar2 = 0;
      FUN_800376f8(s_Init_Error____80024488);
      return 0xffffffff;
    }
    FUN_80036d3c();
    while ((local_28 & 0x80000000) == 0) {
      FUN_80036d3c();
      FUN_80036d3c();
    }
  }
  pcVar4 = s_TYPE_SD_LOW____800244e8;
  *piVar2 = 2;
LAB_80024268:
  FUN_800376f8(pcVar4);
  if (*piVar2 != 0) {
    FUN_80036d3c();
    puVar6 = DAT_800244bc;
    *DAT_800244bc = local_28;
    puVar6[1] = local_2c;
    puVar6[2] = local_30;
    puVar6[3] = local_34;
    if (*piVar2 == 3) {
      iVar5 = FUN_80036d3c();
      if (iVar5 != 0) {
        return 0xffffffff;
      }
      local_28 = 0x10000;
    }
    else {
      iVar5 = FUN_80036d3c();
      if (iVar5 != 0) {
        return 0xffffffff;
      }
    }
    piVar2[1] = local_28;
  }
  FUN_8001bf1c();
  FUN_800262e0();
  return 0;
}



int FUN_80024558(undefined4 param_1,int param_2,int param_3,uint param_4)

{
  int *piVar1;
  int iVar2;
  uint uVar3;
  undefined2 uVar4;
  undefined2 local_50 [2];
  undefined4 local_4c;
  int local_48;
  uint uStack48;
  undefined4 uStack44;
  int iStack40;
  undefined4 uStack36;
  
  piVar1 = DAT_800246c4;
  uVar3 = (param_2 + param_3) - 1;
  if ((uint)DAT_800246c4[3] < uVar3) {
    FUN_800376f8(DAT_800246c8,uVar3);
    FUN_800376f8(PTR_s__The_max_valid_sector_number_for_800246cc,piVar1[3]);
    return DAT_800246d0;
  }
  if (param_4 == 0) {
    FUN_800376f8(s_ERROR__fmiSD_Read_in____uBufcnt_c_800246fc);
    return DAT_8002472c;
  }
  if ((param_4 & 3) != 0) {
    FUN_800376f8(s_SD_Read_Addr_Align_Err__08x______800246d4,param_4);
    return DAT_800246f8;
  }
  local_48 = DAT_800246c4[1];
  if (*DAT_800246c4 != 1) {
    param_2 = param_2 << 9;
  }
  local_50[0] = 7;
  if (param_3 == 1) {
    uVar4 = 0x11;
  }
  else {
    uVar4 = 0x12;
  }
  local_4c = 0xd;
  iVar2 = FUN_80036d3c(param_1,local_50,0);
  if (iVar2 == 0) {
    uStack36 = 0x200;
    uStack44 = 1;
    local_4c = 0xd;
    local_50[0] = uVar4;
    local_48 = param_2;
    uStack48 = param_4;
    iStack40 = param_3;
    iVar2 = FUN_80036d3c(param_1,local_50,&uStack48);
    if (iVar2 == 0) {
      local_50[0] = 7;
      local_48 = 0;
      local_4c = 0;
      FUN_80036d3c(param_1,local_50);
      return 0;
    }
    return iVar2;
  }
  return iVar2;
}



int FUN_80024730(undefined4 param_1,int param_2,int param_3,uint param_4)

{
  int *piVar1;
  int iVar2;
  uint uVar3;
  undefined2 uVar4;
  undefined2 local_50 [2];
  undefined4 local_4c;
  int local_48;
  uint uStack48;
  undefined4 uStack44;
  int iStack40;
  undefined4 uStack36;
  
  piVar1 = DAT_80024898;
  uVar3 = (param_2 + param_3) - 1;
  if ((uint)DAT_80024898[3] < uVar3) {
    FUN_800376f8(DAT_8002489c,uVar3);
    FUN_800376f8(PTR_s__The_max_valid_sector_number_for_800248a0,piVar1[3]);
    return DAT_800248a4;
  }
  if (param_4 == 0) {
    FUN_800376f8(s_ERROR__fmiSD_Read_in____uBufcnt_c_800248c4);
    return DAT_800248f4;
  }
  if ((param_4 & 3) != 0) {
    FUN_800376f8(s_Addr_Align_Err_____800248a8);
    return DAT_800248c0;
  }
  local_48 = DAT_80024898[1];
  if (*DAT_80024898 != 1) {
    param_2 = param_2 << 9;
  }
  local_50[0] = 7;
  if (param_3 == 1) {
    uVar4 = 0x18;
  }
  else {
    uVar4 = 0x19;
  }
  local_4c = 0xd;
  iVar2 = FUN_80036d3c(param_1,local_50,0);
  if (iVar2 == 0) {
    uStack36 = 0x200;
    uStack44 = 2;
    local_4c = 0xd;
    local_50[0] = uVar4;
    local_48 = param_2;
    uStack48 = param_4;
    iStack40 = param_3;
    iVar2 = FUN_80036d3c(param_1,local_50,&uStack48);
    if (iVar2 == 0) {
      local_50[0] = 7;
      local_48 = 0;
      local_4c = 0;
      FUN_80036d3c(param_1,local_50);
      return 0;
    }
    return iVar2;
  }
  return iVar2;
}



uint translate_parameter(uint parameter,uint cur_val)

{
  bool bVar1;
  undefined *puVar2;
  uchar *puVar3;
  uchar *puVar4;
  byte bVar5;
  uchar uVar6;
  byte bVar7;
  byte bVar8;
  uint uVar9;
  
  puVar3 = parm_store_buffer;
  puVar2 = PTR_parm_store_crypt_data_80024b0c;
  bVar8 = 0;
  do {
    write_parameter_storage(parameter,cur_val);
    delay(500);
    bVar7 = 0;
    do {
      delay(100);
      puVar4 = parm_store_buffer;
      fpga_write_cmd('d');
      fpga_write_cmd('d');
      delay(0x14);
      fpga_write_cmd('f');
      do {
        fpga_write_cmd('g');
        bVar5 = fpga_read_data();
      } while ((bVar5 & 1) == 0);
      fpga_write_cmd('h');
      uVar6 = fpga_read_data();
      *puVar4 = uVar6;
      fpga_write_cmd('i');
      uVar6 = fpga_read_data();
      puVar4[1] = uVar6;
      fpga_write_cmd('j');
      uVar6 = fpga_read_data();
      puVar4[2] = uVar6;
      fpga_write_cmd('k');
      uVar6 = fpga_read_data();
      puVar4[3] = uVar6;
      fpga_write_cmd('l');
      uVar6 = fpga_read_data();
      puVar4[4] = uVar6;
      fpga_write_cmd('m');
      uVar6 = fpga_read_data();
      puVar4[5] = uVar6;
      fpga_write_cmd('n');
      uVar6 = fpga_read_data();
      puVar4[6] = uVar6;
      FUN_80024b14();
      *puVar2 = *puVar3;
      if (puVar3[1] == 'U') {
        uVar9 = (uint)puVar3[6];
      }
      else {
        if (puVar3[1] == 'Z') {
          uVar9 = (uint)CONCAT11(puVar3[5],puVar3[6]);
        }
        else {
          if (puVar3[1] == -0x5b) {
            uVar9 = (uint)CONCAT21(CONCAT11(puVar3[4],puVar3[5]),puVar3[6]);
          }
          else {
            if (puVar3[1] == -0x56) {
              uVar9 = CONCAT31(CONCAT21(CONCAT11(puVar3[3],puVar3[4]),puVar3[5]),puVar3[6]);
            }
            else {
              uVar9 = 0;
            }
          }
        }
      }
      uVar6 = puVar3[1];
      bVar1 = true;
      if ((uVar6 != 'U' && uVar6 != 'Z') && (uVar6 != -0x5b && uVar6 != -0x56)) {
        bVar1 = false;
      }
      if (((uchar)(*puVar3 + puVar3[1] + puVar3[3] + puVar3[4] + puVar3[5] + puVar3[6]) == puVar3[2]
          ) && (bVar1)) {
        return uVar9;
      }
      bVar7 = bVar7 + 1;
    } while (bVar7 < 0x32);
    delay(10);
    bVar8 = bVar8 + 1;
    if (5 < bVar8) {
      return uVar9;
    }
  } while( true );
}



void FUN_80024b14(void)

{
  byte *pbVar1;
  uint uVar2;
  byte bVar3;
  
  pbVar1 = parm_store_buffer;
  uVar2 = 1;
  bVar3 = ~*parm_store_buffer;
  *parm_store_buffer = ~*parm_store_buffer;
  do {
    if ((bVar3 & 0x80) != 0) {
      pbVar1[uVar2] = ~pbVar1[uVar2] & 0x80 | pbVar1[uVar2] & 0x7f;
    }
    if ((bVar3 & 0x40) != 0) {
      pbVar1[uVar2] = ~pbVar1[uVar2] & 0x40 | pbVar1[uVar2] & 0xbf;
    }
    if ((bVar3 & 0x20) != 0) {
      pbVar1[uVar2] = ~pbVar1[uVar2] & 0x20 | pbVar1[uVar2] & 0xdf;
    }
    if ((bVar3 & 0x10) != 0) {
      pbVar1[uVar2] = ~pbVar1[uVar2] & 0x10 | pbVar1[uVar2] & 0xef;
    }
    if ((bVar3 & 8) != 0) {
      pbVar1[uVar2] = ~pbVar1[uVar2] & 8 | pbVar1[uVar2] & 0xf7;
    }
    if ((bVar3 & 4) != 0) {
      pbVar1[uVar2] = ~pbVar1[uVar2] & 4 | pbVar1[uVar2] & 0xfb;
    }
    if ((bVar3 & 2) != 0) {
      pbVar1[uVar2] = ~pbVar1[uVar2] & 2 | pbVar1[uVar2] & 0xfd;
    }
    if ((bVar3 & 1) != 0) {
      pbVar1[uVar2] = ~pbVar1[uVar2] & 1 | pbVar1[uVar2] & 0xfe;
    }
    uVar2 = uVar2 + 1 & 0xff;
  } while (uVar2 < 7);
  return;
}



void do_xor(void)

{
  byte bVar1;
  byte *pbVar2;
  byte bVar3;
  uint uVar4;
  
  pbVar2 = parm_store_buffer;
  bVar1 = *parm_store_buffer;
  uVar4 = 1;
  do {
    if ((bVar1 & 0x80) != 0) {
      pbVar2[uVar4] = ~pbVar2[uVar4] & 0x80 | pbVar2[uVar4] & 0x7f;
    }
    if ((bVar1 & 0x40) != 0) {
      pbVar2[uVar4] = ~pbVar2[uVar4] & 0x40 | pbVar2[uVar4] & 0xbf;
    }
    if ((bVar1 & 0x20) != 0) {
      pbVar2[uVar4] = ~pbVar2[uVar4] & 0x20 | pbVar2[uVar4] & 0xdf;
    }
    if ((bVar1 & 0x10) != 0) {
      pbVar2[uVar4] = ~pbVar2[uVar4] & 0x10 | pbVar2[uVar4] & 0xef;
    }
    if ((bVar1 & 8) != 0) {
      pbVar2[uVar4] = ~pbVar2[uVar4] & 8 | pbVar2[uVar4] & 0xf7;
    }
    if ((bVar1 & 4) != 0) {
      pbVar2[uVar4] = ~pbVar2[uVar4] & 4 | pbVar2[uVar4] & 0xfb;
    }
    if ((bVar1 & 2) != 0) {
      pbVar2[uVar4] = ~pbVar2[uVar4] & 2 | pbVar2[uVar4] & 0xfd;
    }
    if ((bVar1 & 1) != 0) {
      pbVar2[uVar4] = ~pbVar2[uVar4] & 1 | pbVar2[uVar4] & 0xfe;
    }
    uVar4 = uVar4 + 1 & 0xff;
  } while (uVar4 < 7);
  bVar3 = 0;
  if ((bVar1 & 4) != 0) {
    bVar3 = 0x80;
  }
  if ((bVar1 & 0x10) != 0) {
    bVar3 = bVar3 | 0x40;
  }
  if ((bVar1 & 1) != 0) {
    bVar3 = bVar3 | 0x20;
  }
  if ((bVar1 & 0x40) != 0) {
    bVar3 = bVar3 | 0x10;
  }
  if ((bVar1 & 2) != 0) {
    bVar3 = bVar3 | 8;
  }
  if ((bVar1 & 0x80) != 0) {
    bVar3 = bVar3 | 4;
  }
  if ((bVar1 & 8) != 0) {
    bVar3 = bVar3 | 2;
  }
  if ((bVar1 & 0x20) != 0) {
    bVar3 = bVar3 | 1;
  }
  *pbVar2 = bVar3;
  return;
}



void init_parameter_conversion(void)

{
  uchar *puVar1;
  byte bVar2;
  uchar uVar3;
  
  puVar1 = parm_store_buffer;
  fpga_write_cmd('d');
  fpga_write_cmd('d');
  delay(0x14);
  fpga_write_cmd('f');
  do {
    fpga_write_cmd('g');
    bVar2 = fpga_read_data();
  } while ((bVar2 & 1) == 0);
  fpga_write_cmd('h');
  uVar3 = fpga_read_data();
  *puVar1 = uVar3;
  fpga_write_cmd('i');
  uVar3 = fpga_read_data();
  puVar1[1] = uVar3;
  fpga_write_cmd('j');
  uVar3 = fpga_read_data();
  puVar1[2] = uVar3;
  fpga_write_cmd('k');
  uVar3 = fpga_read_data();
  puVar1[3] = uVar3;
  fpga_write_cmd('l');
  uVar3 = fpga_read_data();
  puVar1[4] = uVar3;
  fpga_write_cmd('m');
  uVar3 = fpga_read_data();
  puVar1[5] = uVar3;
  fpga_write_cmd('n');
  uVar3 = fpga_read_data();
  puVar1[6] = uVar3;
  *PTR_parm_store_crypt_data_80024edc = parm_store_buffer[3];
  return;
}



void write_parameter_storage(uint id,uint value)

{
  uchar uVar1;
  uchar uVar2;
  uchar uVar3;
  uchar *puVar4;
  byte bVar5;
  
  puVar4 = parm_store_buffer;
  *parm_store_buffer = *PTR_parm_store_crypt_data_80025098;
  puVar4[1] = (uchar)(id << 2);
  uVar3 = (uchar)value;
  bVar5 = 0;
  uVar1 = (uchar)((value << 8) >> 0x18);
  uVar2 = (uchar)((value << 0x10) >> 0x18);
  if (value < 0x1000000) {
    if (value < 0x10000) {
      if (value < 0x100) {
        puVar4[3] = 'i';
        puVar4[4] = -0x6a;
        puVar4[5] = -0x67;
        puVar4[6] = uVar3;
      }
      else {
        puVar4[3] = 'i';
        bVar5 = 1;
        puVar4[4] = -0x6a;
        puVar4[5] = uVar2;
        puVar4[6] = uVar3;
      }
    }
    else {
      bVar5 = 2;
      puVar4[3] = 'i';
      puVar4[4] = uVar1;
      puVar4[5] = uVar2;
      puVar4[6] = uVar3;
    }
  }
  else {
    bVar5 = 3;
    puVar4[3] = (uchar)(value >> 0x18);
    puVar4[4] = uVar1;
    puVar4[5] = uVar2;
    puVar4[6] = uVar3;
  }
  puVar4[1] = bVar5 | puVar4[1];
  do_xor();
  puVar4[2] = puVar4[6] + puVar4[3] + puVar4[4] + puVar4[1] + *puVar4 + puVar4[5];
  fpga_write_cmd('e');
  fpga_write_cmd('e');
  uVar1 = *puVar4;
  fpga_write_cmd('h');
  fpga_write_data(uVar1);
  uVar1 = puVar4[1];
  fpga_write_cmd('i');
  fpga_write_data(uVar1);
  uVar1 = puVar4[2];
  fpga_write_cmd('j');
  fpga_write_data(uVar1);
  uVar1 = puVar4[3];
  fpga_write_cmd('k');
  fpga_write_data(uVar1);
  uVar1 = puVar4[4];
  fpga_write_cmd('l');
  fpga_write_data(uVar1);
  uVar1 = puVar4[5];
  fpga_write_cmd('m');
  fpga_write_data(uVar1);
  uVar1 = puVar4[6];
  fpga_write_cmd('n');
  fpga_write_data(uVar1);
  fpga_write_cmd('f');
  do {
    fpga_write_cmd('g');
    bVar5 = fpga_read_data();
  } while ((bVar5 & 1) == 0);
  return;
}



undefined4 FUN_8002509c(int param_1)

{
  int iVar1;
  uint *puVar2;
  undefined4 uVar3;
  
  uVar3 = 0;
  puVar2 = (uint *)(DAT_800250f4 + param_1 * 0x1000 + 8);
  *puVar2 = *puVar2 & 0xffffff4f;
  iVar1 = spi0_start_transfer();
  if (iVar1 != 1) {
    uVar3 = 0xffffffff;
  }
  *puVar2 = *puVar2 & 0xffffff4f | 0x80;
  return uVar3;
}



void read_from_flash(uint address,uint *buffer,uint count)

{
  int iVar1;
  uint *puVar2;
  
  puVar2 = (uint *)(DAT_800375ec + 8);
  *puVar2 = *puVar2 & 0xffffff4f;
  iVar1 = spi0_start_transfer();
  if (iVar1 == 4) {
    spi0_start_transfer();
  }
  *puVar2 = *puVar2 & 0xffffff4f | 0x80;
  return;
}



// WARNING: Removing unreachable block (ram,0x800360f0)
// WARNING: Removing unreachable block (ram,0x800360f8)
// WARNING: Removing unreachable block (ram,0x80036154)

void sys_spi0_init(void)

{
  undefined4 *port;
  int iVar1;
  uint uVar2;
  uint *puVar3;
  uint uVar4;
  
  port = PORT_C_CFG0;
  gpio_config_pin(PORT_C_CFG0,0,2);
  gpio_config_pin(port,1,2);
  gpio_config_pin(port,2,2);
  gpio_config_pin(port,3,2);
  puVar3 = BUS_SOFT_RST_REG0;
  uVar4 = *BUS_SOFT_RST_REG0;
  uVar2 = FUN_8000056c(1,0,0x14);
  *puVar3 = uVar4 | uVar2;
  puVar3 = puVar3 + -0x98;
  *puVar3 = uVar2 | *puVar3;
  iVar1 = SPI0_BASE;
  *(undefined4 *)(SPI0_BASE + 0x24) = DAT_80036248;
  puVar3 = (uint *)(iVar1 + 4);
  *puVar3 = *puVar3 | 0x80000083;
  do {
  } while ((*puVar3 & 0x80000000) != 0);
  *(uint *)(iVar1 + 8) = *(uint *)(iVar1 + 8) & 0xfffffffc | 0x44;
  *(uint *)(iVar1 + 0x18) = *(uint *)(iVar1 + 0x18) | 0x80008000;
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void spi0_setup(void)

{
  int in_r0;
  int iVar1;
  uint *puVar2;
  byte local_1c;
  
  puVar2 = (uint *)(SPI0_BASE + in_r0 * 0x1000 + 8);
  do {
    *puVar2 = *puVar2 & 0xffffff4f;
    iVar1 = spi0_start_transfer();
    if (iVar1 == 1) {
      spi0_start_transfer();
    }
    *puVar2 = *puVar2 & 0xffffff4f | 0x80;
  } while ((local_1c & 1) != 0);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void write_to_flash(uint address,uchar *buffer,uint count)

{
  int iVar1;
  ushort uVar2;
  uint *puVar3;
  uint uVar4;
  uchar *puVar5;
  int iVar6;
  int extraout_r1;
  uchar *puVar7;
  uint uVar8;
  uchar *puVar9;
  uint *puVar10;
  uint uVar11;
  ushort uVar12;
  undefined8 uVar13;
  uchar *local_30;
  uint local_2c;
  uint local_28;
  
  uVar8 = address & 0xfff;
  uVar11 = 0x1000 - uVar8;
  if (count <= 0x1000 - uVar8) {
    uVar11 = count;
  }
  puVar3 = (uint *)(SPI0_BASE + 8);
  local_30 = buffer;
  local_2c = address;
  local_28 = count;
  do {
    *puVar3 = *puVar3 & 0xffffff4f;
    uVar13 = spi0_start_transfer();
    iVar6 = (int)((ulonglong)uVar13 >> 0x20);
    if ((int)uVar13 == 4) {
      spi0_start_transfer();
      iVar6 = extraout_r1;
    }
    iVar1 = SPI0_BASE;
    *puVar3 = *puVar3 & 0xffffff4f | 0x80;
    if (uVar11 != 0) {
      iVar6 = DAT_80036614;
    }
    uVar4 = 0;
    if (uVar11 != 0) {
      do {
        if (*(char *)(iVar6 + uVar8 + uVar4) != -1) break;
        uVar4 = uVar4 + 1 & 0xfffeffff;
      } while (uVar4 < uVar11);
    }
    if (uVar4 < uVar11) {
      FUN_8002509c(0);
      spi0_setup();
      *puVar3 = *puVar3 & 0xffffff4f;
      spi0_start_transfer();
      *puVar3 = *puVar3 & 0xffffff4f | 0x80;
      spi0_setup();
      if (uVar11 != 0) {
        puVar9 = (uchar *)(DAT_80036614 + uVar8);
        puVar5 = puVar9 + -1;
        puVar7 = local_30 + -1;
        if ((uVar11 & 1) != 0) {
          *puVar9 = *local_30;
          puVar5 = puVar9;
          puVar7 = local_30;
        }
        uVar8 = uVar11 >> 1;
        while (uVar8 != 0) {
          uVar8 = uVar8 - 1;
          puVar5[1] = puVar7[1];
          puVar7 = puVar7 + 2;
          puVar5 = puVar5 + 2;
          *puVar5 = *puVar7;
        }
      }
      puVar10 = (uint *)(iVar1 + 8);
      uVar2 = 0x1000;
      uVar12 = 0x100;
      while( true ) {
        FUN_8002509c(0);
        spi0_setup();
        *puVar10 = *puVar10 & 0xffffff4f;
        iVar6 = spi0_start_transfer();
        if (iVar6 == 4) {
          spi0_start_transfer();
        }
        *puVar10 = *puVar10 & 0xffffff4f | 0x80;
        spi0_setup();
        if (uVar2 == uVar12) break;
        uVar2 = uVar2 - uVar12;
        uVar12 = uVar2;
        if (0x100 < uVar2) {
          uVar12 = 0x100;
        }
      }
    }
    else {
      uVar8 = 0x100 - (local_2c & 0xff);
      if (uVar11 <= uVar8) {
        uVar8 = uVar11;
      }
      puVar10 = (uint *)(iVar1 + 8);
      uVar4 = uVar11;
      while( true ) {
        FUN_8002509c(0);
        spi0_setup();
        *puVar10 = *puVar10 & 0xffffff4f;
        iVar6 = spi0_start_transfer();
        if (iVar6 == 4) {
          spi0_start_transfer();
        }
        *puVar10 = *puVar10 & 0xffffff4f | 0x80;
        spi0_setup();
        if (uVar4 == uVar8) break;
        uVar4 = uVar4 - uVar8 & 0xffff;
        uVar8 = uVar4;
        if (0x100 < uVar4) {
          uVar8 = 0x100;
        }
      }
    }
    if (local_28 == uVar11) {
      return;
    }
    uVar8 = 0;
    local_28 = local_28 - uVar11 & 0xffff;
    local_30 = local_30 + uVar11;
    local_2c = local_2c + uVar11;
    uVar11 = local_28;
    if (0x1000 < local_28) {
      uVar11 = 0x1000;
    }
  } while( true );
}



void FUN_800251bc(undefined4 param_1,int param_2)

{
  longlong lVar1;
  int iVar2;
  undefined *puVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  ushort *puVar7;
  short sVar8;
  int iVar9;
  
  puVar3 = DAT_800253b4;
  iVar2 = DAT_800253b0;
  iVar9 = DAT_800253b0 + param_2;
  *(char *)(DAT_800253b0 + param_2) = (char)((uint)param_1 >> 8);
  *(char *)(iVar9 + 1) = (char)param_1;
  uVar5 = DAT_800253bc;
  uVar4 = DAT_800253b8;
  lVar1 = (longlong)(int)DAT_800253b8 * (longlong)(int)((*(ushort *)(puVar3 + 6) - 0x2e) * 10);
  *(char *)(iVar9 + 2) = ((char)(int)(lVar1 >> 0x23) - (char)(lVar1 >> 0x3f)) + '\x05';
  lVar1 = (longlong)(int)uVar4 * (longlong)(int)((*(ushort *)(puVar3 + 0x12) - 0x2e) * 10);
  *(char *)(iVar9 + 3) = ((char)(int)(lVar1 >> 0x23) - (char)(lVar1 >> 0x3f)) + '\x05';
  *(char *)(iVar9 + 4) =
       (char)(uint)((ulonglong)((uint)*(ushort *)(puVar3 + 0x26) * 10) * (ulonglong)uVar4 >> 0x23) +
       '\x05';
  *(char *)(iVar9 + 5) =
       (char)(uint)((ulonglong)((uint)*(ushort *)(puVar3 + 0x24) * 10) * (ulonglong)uVar5 >> 0x25);
  *(undefined *)(iVar9 + 6) = *puVar3;
  *(undefined *)(iVar9 + 7) = puVar3[0xc];
  if ((byte)puVar3[10] < 9) {
    *(undefined *)(iVar9 + 8) = 0;
    *(char *)(iVar9 + 9) = (char)(*(ushort *)PTR_DAT_800253c0 >> 2);
  }
  else {
    *(char *)(iVar9 + 8) = (char)(*(ushort *)(puVar3 + 0x1a) >> 2);
    *(char *)(iVar9 + 9) = (char)(*(ushort *)(puVar3 + 0x1c) >> 2);
  }
  puVar7 = DAT_800253c8;
  iVar6 = 0;
  *(undefined *)(iVar9 + 10) = *(undefined *)(DAT_800253c4 + 7);
  sVar8 = 0x160;
  do {
    sVar8 = sVar8 + -1;
    lVar1 = (longlong)(int)uVar4 * (longlong)(int)((puVar7[1] - 0x2e) * 10);
    *(char *)(iVar2 + param_2 + 0x14 + (iVar6 >> 2)) =
         ((char)(int)(lVar1 >> 0x23) - (char)(lVar1 >> 0x3f)) + '\x05';
    puVar7 = puVar7 + 2;
    lVar1 = (longlong)(int)uVar4 * (longlong)(int)((*puVar7 - 0x2e) * 10);
    iVar9 = iVar6 + 1;
    iVar6 = iVar6 + 2;
    *(char *)(iVar2 + param_2 + 0x14 + (iVar9 >> 2)) =
         ((char)(int)(lVar1 >> 0x23) - (char)(lVar1 >> 0x3f)) + '\x05';
  } while (sVar8 != 0);
  iVar9 = 0;
  sVar8 = 0x160;
  puVar7 = DAT_800253cc;
  do {
    iVar6 = iVar9 + 1;
    lVar1 = (longlong)(int)uVar4 * (longlong)(int)((puVar7[1] - 0x2e) * 10);
    sVar8 = sVar8 + -1;
    *(char *)(iVar2 + param_2 + 200 + (iVar9 >> 2)) =
         ((char)(int)(lVar1 >> 0x23) - (char)(lVar1 >> 0x3f)) + '\x05';
    puVar7 = puVar7 + 2;
    lVar1 = (longlong)(int)uVar4 * (longlong)(int)((*puVar7 - 0x2e) * 10);
    iVar9 = iVar9 + 2;
    *(char *)(iVar2 + param_2 + 200 + (iVar6 >> 2)) =
         ((char)(int)(lVar1 >> 0x23) - (char)(lVar1 >> 0x3f)) + '\x05';
  } while (sVar8 != 0);
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffd0 : 0x80007fd0
// WARNING: Restarted to delay deadcode elimination for space: stack

void process_trace_data(void)

{
  char cVar1;
  ushort uVar2;
  undefined2 uVar3;
  short sVar4;
  int *piVar5;
  int *piVar6;
  int iVar7;
  undefined *puVar8;
  char *pcVar9;
  undefined *puVar10;
  uint *ptr;
  ushort *puVar11;
  undefined2 *puVar12;
  int iVar13;
  int iVar14;
  uint uVar15;
  uint uVar16;
  ushort *puVar17;
  int iVar18;
  ushort uVar19;
  uint uVar20;
  int iVar21;
  uint extraout_r1;
  ushort *puVar22;
  int iVar23;
  uint uVar24;
  int iVar25;
  int unaff_r4;
  uint uVar26;
  uint uVar27;
  ushort uVar28;
  uint uVar29;
  int iVar30;
  code *UNRECOVERED_JUMPTABLE_00;
  bool bVar31;
  undefined8 uVar32;
  undefined8 uVar33;
  
  if (*(byte *)(DAT_80025460 + 10) < 9) {
    fpga_write_cmd('\r');
    fpga_write_data('\0');
    fpga_write_data('\0');
    fpga_write_data('\a');
    iVar14 = 2000;
    fpga_write_data(-0x30);
    puVar10 = PTR_DAT_80025adc;
    puVar8 = PTR_initialization_data_80025ad8;
    iVar7 = DAT_80025ad4;
    switch(*(undefined *)(DAT_80025ad4 + 10)) {
    case 0:
      iVar14 = 2000;
      break;
    case 1:
      iVar14 = 1000;
      break;
    case 2:
      iVar14 = 400;
      break;
    case 3:
      iVar14 = 200;
      break;
    case 4:
      iVar14 = 0x50;
      break;
    case 5:
      iVar14 = 0x28;
      break;
    case 6:
      iVar14 = 0x14;
      break;
    case 7:
      iVar14 = 8;
      break;
    case 8:
      iVar14 = 4;
    }
    iVar21 = *(int *)(PTR_initialization_data_80025ad8 + 8);
    do {
      uVar15 = get_timer_ticks();
      if ((uint)(iVar14 + iVar21) <= uVar15) {
        *(uint *)(puVar8 + 8) = uVar15;
        goto LAB_8002582c;
      }
    } while ((5 < *(byte *)(iVar7 + 10)) || (tp_i2c_read_status(), *puVar10 == '\0'));
    delay_2(0x28);
LAB_8002582c:
    fpga_write_cmd('(');
    fpga_write_data('\x01');
    uVar26 = 0;
    fpga_write_cmd('$');
    fpga_bus_dir_in();
    ptr = DAT_80025ae0;
    set_gpio_pin_low(DAT_80025ae0,9);
    set_gpio_pin_low(ptr,10);
    uVar15 = 0;
    do {
      set_gpio_pin_low(ptr,8);
      set_gpio_pin_high(ptr,8);
      uVar15 = uVar15 + 1 & 0xfffeffff;
      uVar26 = (ptr[4] & 0xff) + uVar26 & 0xfffeffff;
    } while (uVar15 < 10);
    iVar14 = divide(uVar26,10);
    puVar17 = DAT_80025ae4;
    *DAT_80025ae4 = (ushort)iVar14 & 0xff;
    uVar26 = 0;
    fpga_write_cmd('&');
    fpga_bus_dir_in();
    set_gpio_pin_low(ptr,9);
    set_gpio_pin_low(ptr,10);
    uVar15 = 0;
    do {
      set_gpio_pin_low(ptr,8);
      set_gpio_pin_high(ptr,8);
      uVar15 = uVar15 + 1 & 0xfffeffff;
      uVar26 = (ptr[4] & 0xff) + uVar26 & 0xfffeffff;
    } while (uVar15 < 10);
    uVar16 = divide(uVar26,10);
    *DAT_80025ae8 = (short)(uVar16 & 0xff);
    puVar11 = DAT_80025af4;
    uVar15 = DAT_80025af0;
    puVar22 = DAT_80025aec;
    uVar26 = extraout_r1;
    switch(*(undefined *)(iVar7 + 3)) {
    case 0:
      uVar26 = (uint)*DAT_80025aec;
      break;
    case 1:
      uVar26 = (uint)DAT_80025aec[1];
      break;
    case 2:
      uVar26 = (uint)DAT_80025aec[2];
      break;
    case 3:
      uVar26 = (uint)DAT_80025aec[3];
      break;
    case 4:
      uVar26 = (uint)DAT_80025aec[4];
      break;
    case 5:
      uVar26 = (uint)DAT_80025aec[5];
      break;
    case 6:
      uVar26 = (uint)DAT_80025aec[6];
    }
    uVar26 = *puVar17 * uVar26 & 0xffff;
    uVar28 = (ushort)(((int)DAT_80025af0 >> 0xf) * uVar26 + 0xa3d7 >> 0x10);
    uVar19 = uVar28 >> 6;
    if (0x32 < (int)(uVar26 + (uint)((ulonglong)uVar26 * (ulonglong)DAT_80025af0 >> 0x25) * -100)) {
      uVar19 = (uVar28 >> 6) + 1;
    }
    *DAT_80025af4 = uVar19;
    uVar26 = DAT_80025afc;
    puVar17 = DAT_80025af8;
    uVar28 = *puVar11;
    *DAT_80025af8 = uVar28;
    if (uVar26 < uVar28) {
      *puVar17 = (ushort)uVar26;
    }
    puVar17 = DAT_80025b00;
    switch(*(undefined *)(iVar7 + 0xf)) {
    case 0:
      puVar22 = (ushort *)(uint)*puVar22;
      break;
    case 1:
      puVar22 = (ushort *)(uint)puVar22[1];
      break;
    case 2:
      puVar22 = (ushort *)(uint)puVar22[2];
      break;
    case 3:
      puVar22 = (ushort *)(uint)puVar22[3];
      break;
    case 4:
      puVar22 = (ushort *)(uint)puVar22[4];
      break;
    case 5:
      puVar22 = (ushort *)(uint)puVar22[5];
      break;
    case 6:
      puVar22 = (ushort *)(uint)puVar22[6];
    }
    uVar16 = (uVar16 & 0xff) * (int)puVar22 & 0xff00ffff;
    uVar28 = (ushort)(DAT_80025b04 * uVar16 + 0xa3d7 >> 0x10);
    uVar19 = uVar28 >> 6;
    if (0x32 < (int)(uVar16 + (uint)((ulonglong)uVar16 * (ulonglong)uVar15 >> 0x25) * -100)) {
      uVar19 = (uVar28 >> 6) + 1;
    }
    *DAT_80025b00 = uVar19;
    puVar22 = DAT_80025b08;
    uVar28 = *puVar17;
    *DAT_80025b08 = uVar28;
    if (uVar26 < uVar28) {
      *puVar22 = (ushort)uVar26;
    }
  }
  else {
    if ((*(char *)(DAT_80025460 + 0x3a) != '\x01') && (*PTR_DAT_80025464 != '\x02')) {
      FUN_80025468();
      iVar7 = DAT_80021bd4;
      uVar15 = DAT_80021bd0;
      pcVar9 = DAT_80021bcc;
      if (*DAT_80021bcc != '\0') {
        if ((byte)DAT_80021bcc[10] < 0xb) {
          iVar14 = 100;
          iVar21 = 600;
        }
        else {
          iVar14 = 200;
          iVar21 = 0x4b0;
        }
        uVar27 = 0;
        iVar13 = 0;
        puVar17 = (ushort *)(DAT_80021bd8 + iVar14 * 2);
        uVar26 = iVar21 - iVar14 & 0xffff;
        uVar16 = DAT_80021bd0;
        do {
          uVar24 = (uint)*puVar17;
          puVar17 = puVar17 + 1;
          if (uVar27 < uVar24) {
            uVar27 = uVar24;
          }
          iVar13 = iVar13 + uVar24;
          if (uVar24 < uVar16) {
            uVar16 = uVar24;
          }
          uVar26 = uVar26 - 1 & 0xffff;
        } while (uVar26 != 0);
        iVar14 = divide(iVar13,iVar21 - iVar14);
        *(short *)(iVar7 + 0xe4) = (short)uVar27;
        *(short *)(iVar7 + 0xe6) = (short)uVar16;
        *(short *)(iVar7 + 0xea) = (short)(uVar27 + uVar16 >> 1);
        *(short *)(iVar7 + 0xe8) = (short)uVar27 - (short)uVar16;
        *(short *)(iVar7 + 0xec) = (short)iVar14;
        FUN_80004a50();
        FUN_8000519c();
      }
      if (pcVar9[0xc] == '\0') {
        return;
      }
      uVar26 = 0;
      if ((byte)pcVar9[10] < 0xb) {
        iVar14 = 100;
        iVar21 = 600;
      }
      else {
        iVar14 = 200;
        iVar21 = 0x4b0;
      }
      puVar17 = (ushort *)(DAT_80021bdc + iVar14 * 2);
      iVar13 = 0;
      uVar16 = iVar21 - iVar14 & 0xffff;
      do {
        uVar27 = (uint)*puVar17;
        if (uVar26 < uVar27) {
          uVar26 = uVar27;
        }
        if (uVar27 < uVar15) {
          uVar15 = uVar27;
        }
        uVar16 = uVar16 - 1 & 0xffff;
        iVar13 = iVar13 + uVar27;
        puVar17 = puVar17 + 1;
      } while (uVar16 != 0);
      iVar14 = divide(iVar13,iVar21 - iVar14);
      *(short *)(iVar7 + 0xee) = (short)uVar26;
      *(short *)(iVar7 + 0xf0) = (short)uVar15;
      *(short *)(iVar7 + 0xf4) = (short)(uVar26 + uVar15 >> 1);
      *(short *)(iVar7 + 0xf2) = (short)uVar26 - (short)uVar15;
      *(short *)(iVar7 + 0xf6) = (short)iVar14;
      FUN_800077c4();
      iVar21 = DAT_8000855c;
      iVar14 = DAT_80008558;
      iVar7 = DAT_80008554;
      uVar26 = (uint)*(ushort *)(DAT_8000855c + 0xfc);
      uVar16 = (uint)*(ushort *)(DAT_8000855c + 0xfe);
      uVar28 = *(ushort *)(DAT_8000855c + 0xee);
      uVar15 = 0;
      if (*(byte *)(DAT_80008554 + 10) < 0xb) {
        uVar27 = 2;
      }
      else {
        uVar27 = 10;
      }
      uVar20 = 0;
      uVar19 = *(ushort *)(DAT_8000855c + 0xf0);
      uVar2 = *(ushort *)(DAT_8000855c + 0xf2);
      uVar24 = uVar26;
      if (uVar26 < uVar16) {
        do {
          uVar29 = (uint)*(ushort *)(DAT_80008558 + uVar24 * 2);
          uVar24 = uVar24 + 1 & 0xfffeffff;
          if (uVar29 < *(ushort *)(DAT_80008554 + 0x12)) {
            uVar20 = uVar20 + (*(ushort *)(DAT_80008554 + 0x12) - uVar29);
          }
          else {
            uVar15 = uVar15 + (uVar29 - *(ushort *)(DAT_80008554 + 0x12));
          }
        } while (uVar24 < uVar16);
        if (uVar20 <= uVar15) goto LAB_80007fac;
        iVar13 = uVar20 - uVar15;
        *(undefined *)(DAT_8000855c + 0x1e3) = 1;
      }
      else {
LAB_80007fac:
        iVar13 = uVar15 - uVar20;
        *(undefined *)(DAT_8000855c + 0x1e3) = 0;
      }
      uVar15 = divide(iVar13,uVar16 - uVar26);
      if (uVar2 < 0x28) {
        *(undefined2 *)(iVar21 + 0xfc) = 0x32;
        *(undefined2 *)(iVar21 + 0xfe) = 0x3b6;
      }
      iVar13 = 0;
      uVar26 = (uint)*(ushort *)(iVar21 + 0xfc);
      while (uVar26 < *(ushort *)(iVar21 + 0xfe)) {
        uVar16 = (uint)*(ushort *)(iVar14 + uVar26 * 2);
        uVar26 = uVar26 + 1 & 0xfffeffff;
        if (uVar16 < *(ushort *)(iVar7 + 0x12)) {
          iVar18 = *(ushort *)(iVar7 + 0x12) - uVar16;
        }
        else {
          iVar18 = uVar16 - *(ushort *)(iVar7 + 0x12);
        }
        iVar13 = iVar13 + iVar18 * iVar18;
      }
      iVar14 = divide(iVar13,(uint)*(ushort *)(iVar21 + 0xfe) - (uint)*(ushort *)(iVar21 + 0xfc));
      piVar6 = DAT_80008564;
      puVar8 = PTR_DAT_80008560;
      uVar26 = (uint)(byte)PTR_DAT_80008560[3];
      DAT_80008564[uVar26] = (uint)uVar28;
      piVar6[uVar26 + 0x1e] = (uint)uVar19;
      piVar6[uVar26 + 0x3c] = iVar14;
      uVar16 = uVar26 + 1 & 0xff;
      piVar6[uVar26 + 0x5a] = uVar15 & 0xffff;
      puVar8[3] = (char)uVar16;
      if (uVar16 < uVar27) goto LAB_800084c8;
      iVar18 = uVar27 - 1;
      iVar13 = 0;
      puVar8[3] = 0;
      iVar14 = iVar18 >> 1;
      if (0 < iVar18) {
        iVar13 = *piVar6;
        iVar30 = piVar6[1];
        iVar25 = 0;
        piVar5 = piVar6;
        iVar23 = iVar14;
        while (iVar23 != 0) {
          iVar13 = iVar13 + iVar30;
          iVar30 = piVar5[3];
          iVar23 = iVar23 + -1;
          iVar25 = iVar25 + piVar5[2];
          piVar5 = piVar5 + 2;
        }
        iVar13 = iVar13 + iVar25;
      }
      if (-1 < iVar18) {
        iVar13 = iVar13 + piVar6[iVar18];
      }
      uVar15 = divide(iVar13,uVar27);
      uVar15 = uVar15 & 0xffff;
      iVar13 = 0;
      if (0 < iVar18) {
        iVar13 = *(int *)(DAT_80008568 + 4);
        iVar30 = *(int *)(DAT_80008568 + 8);
        iVar25 = 0;
        piVar6 = (int *)(DAT_80008568 + 4);
        iVar23 = iVar14;
        while (iVar23 != 0) {
          iVar13 = iVar13 + iVar30;
          iVar30 = piVar6[3];
          iVar23 = iVar23 + -1;
          iVar25 = iVar25 + piVar6[2];
          piVar6 = piVar6 + 2;
        }
        iVar13 = iVar13 + iVar25;
      }
      if (-1 < (int)(uVar27 - 1)) {
        iVar13 = iVar13 + *(int *)(DAT_8000856c + (uVar27 - 1) * 4);
      }
      uVar26 = divide(iVar13,uVar27);
      cVar1 = *(char *)(iVar7 + 0x23);
      uVar26 = uVar26 & 0xffff;
      bVar31 = cVar1 == '\x01';
      if (bVar31) {
        cVar1 = *(char *)(iVar7 + 0x21);
      }
      if ((bVar31 && cVar1 == '\0') && (*(char *)(DAT_80008570 + 4) != '\0')) {
        *(short *)(iVar7 + 0x26) = (short)(uVar15 + uVar26 >> 1);
        set_fpga_trigger_level();
      }
      iVar13 = 0;
      if (0 < iVar18) {
        iVar13 = *(int *)(DAT_80008574 + 4);
        iVar30 = *(int *)(DAT_80008574 + 8);
        iVar25 = 0;
        piVar6 = (int *)(DAT_80008574 + 4);
        iVar23 = iVar14;
        while (iVar23 != 0) {
          iVar13 = iVar13 + iVar30;
          iVar30 = piVar6[3];
          iVar23 = iVar23 + -1;
          iVar25 = iVar25 + piVar6[2];
          piVar6 = piVar6 + 2;
        }
        iVar13 = iVar13 + iVar25;
      }
      if (-1 < (int)(uVar27 - 1)) {
        iVar13 = iVar13 + *(int *)(DAT_80008578 + (uVar27 - 1) * 4);
      }
      uVar16 = divide(iVar13,uVar27);
      iVar13 = 0;
      if (0 < iVar18) {
        iVar13 = *(int *)(DAT_8000857c + 4);
        iVar18 = *(int *)(DAT_8000857c + 8);
        iVar30 = 0;
        piVar6 = (int *)(DAT_8000857c + 4);
        while (iVar14 != 0) {
          iVar13 = iVar13 + iVar18;
          iVar18 = piVar6[3];
          iVar14 = iVar14 + -1;
          iVar30 = iVar30 + piVar6[2];
          piVar6 = piVar6 + 2;
        }
        iVar13 = iVar13 + iVar30;
      }
      if (-1 < (int)(uVar27 - 1)) {
        iVar13 = iVar13 + *(int *)(DAT_80008580 + (uVar27 - 1) * 4);
      }
      iVar13 = divide(iVar13,uVar27);
      iVar14 = DAT_8000858c;
      switch(*(undefined *)(iVar7 + 0xf)) {
      case 0:
        unaff_r4 = DAT_80008584;
        break;
      case 1:
        unaff_r4 = DAT_80008588;
        break;
      case 2:
        unaff_r4 = 1000;
        break;
      case 3:
        unaff_r4 = 500;
        break;
      case 4:
        unaff_r4 = 200;
        break;
      case 5:
        unaff_r4 = 100;
        break;
      case 6:
        unaff_r4 = 0x32;
      }
      if (uVar15 < *(ushort *)(iVar7 + 0x12)) {
        *(undefined *)(iVar21 + 0x1c3) = 1;
        iVar18 = (int)((ulonglong)
                       ((longlong)iVar14 *
                       (longlong)(int)(unaff_r4 * (*(ushort *)(iVar7 + 0x12) - uVar15))) >> 0x20);
        *(int *)(iVar21 + 0x1c4) = (iVar18 >> 4) - (iVar18 >> 0x1f);
      }
      else {
        *(undefined *)(iVar21 + 0x1c3) = 0;
        iVar18 = (int)((ulonglong)
                       ((longlong)iVar14 *
                       (longlong)(int)(unaff_r4 * (uVar15 - *(ushort *)(iVar7 + 0x12)))) >> 0x20);
        *(int *)(iVar21 + 0x1c4) = (iVar18 >> 4) - (iVar18 >> 0x1f);
      }
      if (uVar26 < *(ushort *)(iVar7 + 0x12)) {
        *(undefined *)(iVar21 + 0x1d3) = 1;
        iVar18 = (int)((ulonglong)
                       ((longlong)iVar14 *
                       (longlong)(int)(unaff_r4 * (*(ushort *)(iVar7 + 0x12) - uVar26))) >> 0x20);
        *(int *)(iVar21 + 0x1d4) = (iVar18 >> 4) - (iVar18 >> 0x1f);
      }
      else {
        *(undefined *)(iVar21 + 0x1d3) = 0;
        iVar18 = (int)((ulonglong)
                       ((longlong)iVar14 *
                       (longlong)(int)(unaff_r4 * (uVar26 - *(ushort *)(iVar7 + 0x12)))) >> 0x20);
        *(int *)(iVar21 + 0x1d4) = (iVar18 >> 4) - (iVar18 >> 0x1f);
      }
      uVar32 = FUN_800397d0(unaff_r4);
      FUN_800397d0(iVar13);
      uVar33 = FUN_80036618();
      uVar32 = FUN_80039890((int)uVar33,(int)((ulonglong)uVar33 >> 0x20),(int)uVar32,
                            (int)((ulonglong)uVar32 >> 0x20));
      FUN_800393ec((int)uVar32,(int)((ulonglong)uVar32 >> 0x20),0,DAT_80008590);
      iVar13 = FUN_8003972c();
      *(int *)(iVar21 + 500) = iVar13;
      iVar14 = (int)((ulonglong)((longlong)iVar14 * (longlong)(int)(unaff_r4 * (uVar16 & 0xffff)))
                    >> 0x20);
      iVar14 = (iVar14 >> 4) - (iVar14 >> 0x1f);
      *(int *)(iVar21 + 0x1e4) = iVar14;
      cVar1 = *(char *)(iVar21 + 0x1c3);
      if (cVar1 == *(char *)(iVar21 + 0x1d3)) {
        if (cVar1 != '\0') {
          iVar18 = *(int *)(iVar21 + 0x1d4);
          iVar30 = *(int *)(iVar21 + 0x1c4);
        }
        else {
          iVar18 = *(int *)(iVar21 + 0x1c4);
          iVar30 = *(int *)(iVar21 + 0x1d4);
        }
        iVar18 = iVar18 - iVar30;
        if (cVar1 == '\0') goto LAB_800083f8;
        *(int *)(iVar21 + 0x204) = iVar18;
      }
      else {
        iVar18 = *(int *)(iVar21 + 0x1c4) + *(int *)(iVar21 + 0x1d4);
LAB_800083f8:
        *(int *)(iVar21 + 0x204) = iVar18;
      }
      uVar15 = *(uint *)(iVar21 + 0x1d4);
      uVar26 = *(uint *)(iVar21 + 0x1c4);
      if (uVar26 < uVar15) {
        *(uint *)(iVar21 + 0x214) = uVar15;
      }
      else {
        *(uint *)(iVar21 + 0x214) = uVar26;
      }
      if (*(char *)(iVar7 + 0xe) == '\x01') {
        *(uint *)(iVar21 + 0x1d4) = uVar15 * 10;
        *(int *)(iVar21 + 0x1e4) = iVar14 * 10;
        *(uint *)(iVar21 + 0x1c4) = uVar26 * 10;
        *(int *)(iVar21 + 500) = iVar13 * 10;
        *(int *)(iVar21 + 0x204) = *(int *)(iVar21 + 0x204) * 10;
        iVar14 = *(int *)(iVar21 + 0x214) * 10;
      }
      else {
        if (*(char *)(iVar7 + 0xe) != '\x02') goto LAB_800084c8;
        *(uint *)(iVar21 + 0x1d4) = uVar15 * 100;
        *(uint *)(iVar21 + 0x1c4) = uVar26 * 100;
        *(int *)(iVar21 + 500) = iVar13 * 100;
        *(int *)(iVar21 + 0x1e4) = iVar14 * 100;
        *(int *)(iVar21 + 0x204) = *(int *)(iVar21 + 0x204) * 100;
        iVar14 = *(int *)(iVar21 + 0x214) * 100;
      }
      *(int *)(iVar21 + 0x214) = iVar14;
LAB_800084c8:
      if (*(char *)(iVar7 + 0xf) == '\x06') {
        uVar28 = 0xf;
      }
      else {
        uVar28 = 7;
      }
      if (*(ushort *)(iVar21 + 0xf2) < uVar28) {
        *(undefined4 *)(iVar21 + 0x204) = 0;
      }
      if (0x13 < *(ushort *)(iVar21 + 0xf2)) {
        return;
      }
      *(undefined4 *)(iVar21 + 0x204) = 0;
      if (*(ushort *)(iVar7 + 0x12) + 5 <= (uint)*(ushort *)(iVar21 + 0xf4)) {
        return;
      }
      if (*(ushort *)(iVar21 + 0xf4) + 5 <= (uint)*(ushort *)(iVar7 + 0x12)) {
        return;
      }
      *(undefined4 *)(iVar21 + 500) = 0;
      *(undefined4 *)(iVar21 + 0x1c4) = 0;
      *(undefined4 *)(iVar21 + 0x1d4) = 0;
      *(undefined4 *)(iVar21 + 0x1e4) = 0;
      *(undefined4 *)(iVar21 + 0x214) = 0;
      return;
    }
  }
  pcVar9 = DAT_8002b64c;
  puVar8 = PTR_DAT_8002b648;
  cVar1 = *PTR_DAT_8002b648;
  if ((cVar1 == '\x02') && ((DAT_8002b64c[0x21] != '\x01' || (DAT_8002b64c[0x3a] == '\x01')))) {
    DAT_8002b64c[0x18] = '\x01';
    pcVar9[0x17] = '\x01';
  }
  puVar10 = PTR_DAT_8002b65c;
  iVar14 = DAT_8002b658;
  iVar7 = DAT_8002b654;
  uVar28 = (ushort)DAT_8002b650;
  iVar21 = DAT_8002b654 + 2000;
  if (8 < (byte)pcVar9[10]) {
    if (pcVar9[0x18] != '\0') {
      set_frame_to_global_pointer();
      set_display_fg_color(0);
      display_fill_rect(2,0x2f,uVar28,uVar28 - 0xfb);
      display_draw_grid();
    }
    if (pcVar9[0x17] == '\0') goto LAB_8002b414;
    FUN_8001b424(pcVar9 + 0x1a,pcVar9 + 0x1c);
    if (*pcVar9 != '\0') {
      if ((pcVar9[0x3a] == '\0') && (*puVar8 != '\x02')) {
        *(undefined2 *)(puVar10 + 0x12) = 400;
      }
      FUN_8000410c();
      cVar1 = pcVar9[0x21];
      bVar31 = cVar1 != '\0';
      if (bVar31) {
        cVar1 = pcVar9[0x21];
      }
      if (((!bVar31 || cVar1 == '\x02') && (0x1a < (byte)pcVar9[10])) &&
         ((pcVar9[0x23] == '\x01' || (pcVar9[9] != '\0')))) {
        FUN_8000583c();
      }
      if (*(char *)(iVar14 + 7) == '\0') {
        FUN_80012a64(*(undefined2 *)(pcVar9 + 0x1a),0,*(undefined2 *)(pcVar9 + 0x1c),DAT_8002b654);
      }
    }
    if (pcVar9[0xc] == '\0') {
LAB_8002b2e8:
      if (*(char *)(iVar14 + 7) != '\0') goto LAB_8002b2f4;
    }
    else {
      if ((pcVar9[0x3a] == '\0') && (*puVar8 != '\x02')) {
        *(undefined2 *)(puVar10 + 0x14) = 400;
      }
      FUN_80006f28();
      cVar1 = pcVar9[0x21];
      bVar31 = cVar1 != '\0';
      if (bVar31) {
        cVar1 = pcVar9[0x21];
      }
      if (((!bVar31 || cVar1 == '\x02') && (0x1a < (byte)pcVar9[10])) &&
         ((pcVar9[0x23] == '\0' || (pcVar9[0x15] != '\0')))) {
        FUN_80008594();
      }
      if (*(char *)(iVar14 + 7) == '\0') {
        FUN_80012a64(*(undefined2 *)(pcVar9 + 0x1a),0,*(undefined2 *)(pcVar9 + 0x1c),DAT_8002b668);
        goto LAB_8002b2e8;
      }
LAB_8002b2f4:
      set_frame_to_global_pointer();
      set_display_fg_color(DAT_8002b66c);
      if (*(ushort *)(pcVar9 + 0x1c) < 2) {
        *(undefined2 *)(pcVar9 + 0x1c) = 2;
      }
      uVar15 = 1;
      if (1 < (int)(*(ushort *)(pcVar9 + 0x1c) - 2)) {
        do {
          puVar17 = (ushort *)(iVar7 + uVar15 * 2);
          puVar22 = (ushort *)(iVar21 + uVar15 * 2);
          display_draw_line(*puVar17 + 0x96,(uint)*puVar22,puVar17[1] + 0x96,(uint)puVar22[1]);
          uVar15 = uVar15 + 1 & 0xfffeffff;
        } while ((int)uVar15 < (int)(*(ushort *)(pcVar9 + 0x1c) - 2));
      }
    }
    cVar1 = pcVar9[4];
    bVar31 = cVar1 != '\0';
    if (bVar31) {
      cVar1 = *pcVar9;
    }
    if (bVar31 && cVar1 != '\0') {
      FUN_800043e4();
    }
    cVar1 = pcVar9[0x10];
    bVar31 = cVar1 != '\0';
    if (bVar31) {
      cVar1 = pcVar9[0xc];
    }
    if (bVar31 && cVar1 != '\0') {
      set_display_fg_color(0);
      display_fill_rect(3,0x81,0x2d5,0xd1);
      FUN_800075dc();
      set_display_fg_color(DAT_8002b670);
      puVar12 = DAT_8002b674;
      uVar15 = 0;
      *DAT_8002b674 = DAT_8002b674[1];
      do {
        puVar17 = puVar12 + uVar15;
        if (0x50 < *puVar17) {
          *puVar17 = 0x50;
        }
        display_draw_vert_line((short)uVar15 + 3,0xd1 - *puVar17,0xd1);
        uVar15 = uVar15 + 1 & 0xfffeffff;
      } while (uVar15 < 0x2d3);
    }
LAB_8002b414:
    iVar7 = DAT_8002b678;
    if (pcVar9[0x18] == '\0') {
      return;
    }
    if (*(char *)(DAT_8002b678 + 0x292) != '\0') {
      display_draw_time_cursors();
    }
    if (*(char *)(iVar7 + 0x29a) != '\0') {
      display_draw_volt_cursors();
    }
    cVar1 = *(char *)(iVar7 + 0x292);
    bVar31 = cVar1 == '\0';
    if (bVar31) {
      cVar1 = *(char *)(iVar7 + 0x29a);
    }
    if (!bVar31 || cVar1 != '\0') {
      FUN_8000ebf8();
    }
    display_draw_trace_pointers();
    FUN_80021810();
    uVar15 = DAT_8002b67c;
    iVar14 = Start_Of_Screen_Mem;
    iVar7 = Screen_Frame_Buffer;
    uVar26 = 0x2e;
    iVar21 = DAT_8002b67c + 0xf6;
    if (DAT_8002b67c < 0x2f) {
      return;
    }
    do {
      iVar13 = uVar26 * 800 + 2;
      copy_short((void *)(iVar14 + iVar13 * 2),(void *)(iVar7 + iVar13 * 2),iVar21);
      uVar26 = uVar26 + 1;
    } while (uVar26 < uVar15);
    return;
  }
  uVar19 = (ushort)(byte)pcVar9[0x3a];
  if (uVar19 != 0) {
                    // WARNING: Could not recover jumptable at 0x8002b490. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)();
    return;
  }
  if (cVar1 != '\x02') {
    uVar19 = *(ushort *)PTR_DAT_8002b65c;
  }
  else {
    *(undefined2 *)PTR_DAT_8002b65c = 0;
  }
  if (cVar1 == '\x02' || uVar19 == 0) {
    set_frame_to_global_pointer();
    set_display_fg_color(0);
    uVar19 = (ushort)DAT_8002b67c;
    display_fill_rect(2,0x2f,uVar28,uVar19);
    display_draw_grid();
    display_draw_trace_pointers();
    copy_rect_to_screen(2,0x2e,uVar19 + 0xf7,uVar19);
    set_screen_to_global_pointer();
  }
  iVar13 = DAT_8002b680;
  if (*pcVar9 != '\0') {
    set_screen_to_global_pointer();
    iVar18 = iVar13 - (uint)*DAT_8002b684;
    *(short *)(puVar10 + 0x16) = (short)iVar18;
    iVar18 = iVar18 * 0x10000 >> 0x10;
    if (iVar18 < 0x2f) {
      iVar18 = 0x2f;
    }
    else {
      if (0x1c0 < iVar18) {
        iVar18 = 0x1c0;
      }
    }
    *(short *)(puVar10 + 0x16) = (short)iVar18;
    if (*(char *)(iVar14 + 7) == '\0') {
      display_channel1_long_timebase_trace();
    }
  }
  if (pcVar9[0xc] == '\0') {
LAB_8002b590:
    if (*(char *)(iVar14 + 7) == '\0') goto LAB_8002b624;
  }
  else {
    set_screen_to_global_pointer();
    iVar13 = iVar13 - (uint)*DAT_8002b688;
    *(short *)(puVar10 + 0x18) = (short)iVar13;
    iVar13 = iVar13 * 0x10000 >> 0x10;
    if (iVar13 < 0x2f) {
      iVar13 = 0x2f;
    }
    else {
      if (0x1c0 < iVar13) {
        iVar13 = 0x1c0;
      }
    }
    *(short *)(puVar10 + 0x18) = (short)iVar13;
    if (*(char *)(iVar14 + 7) == '\0') {
      display_channel2_long_timebase_trace();
      goto LAB_8002b590;
    }
  }
  if (*(short *)puVar10 == 0) {
    *(undefined2 *)(puVar10 + 2) = *(undefined2 *)(puVar10 + 0x16);
    *(undefined2 *)(puVar10 + 4) = *(undefined2 *)(puVar10 + 0x18);
  }
  set_display_fg_color(DAT_8002b66c);
  display_draw_line(*(ushort *)(puVar10 + 2) + 0x96,(uint)*(ushort *)(puVar10 + 4),
                    *(ushort *)(puVar10 + 0x16) + 0x96,(uint)*(ushort *)(puVar10 + 0x18));
  display_draw_line(*(ushort *)(puVar10 + 2) + 0x97,*(ushort *)(puVar10 + 4) + 1,
                    *(ushort *)(puVar10 + 0x16) + 0x97,*(ushort *)(puVar10 + 0x18) + 1);
  *(undefined2 *)(puVar10 + 2) = *(undefined2 *)(puVar10 + 0x16);
  uVar3 = *(undefined2 *)(puVar10 + 0x18);
  *(undefined2 *)(puVar10 + 4) = uVar3;
  uVar28 = *(ushort *)puVar10;
  *(undefined2 *)(iVar7 + (uint)uVar28 * 2) = *(undefined2 *)(puVar10 + 0x16);
  *(undefined2 *)(iVar21 + (uint)uVar28 * 2) = uVar3;
LAB_8002b624:
  sVar4 = *(short *)puVar10;
  *(ushort *)puVar10 = sVar4 + 1U;
  if (0x2cf < (ushort)(sVar4 + 1U)) {
    *(undefined2 *)puVar10 = 0;
  }
                    // WARNING: Could not recover jumptable at 0x8002b644. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE_00)();
  return;
}



void FUN_80025468(void)

{
  ushort uVar1;
  char *pcVar2;
  char *pcVar3;
  ushort *puVar4;
  uint *puVar5;
  undefined *puVar6;
  undefined *puVar7;
  uchar data;
  byte bVar8;
  short sVar9;
  ushort uVar10;
  uint *puVar11;
  uint uVar12;
  uint uVar13;
  ushort *puVar14;
  uint *puVar15;
  ushort *puVar16;
  ushort *puVar17;
  uint *puVar18;
  int iVar19;
  uint uVar20;
  uint *puVar21;
  uint *puVar22;
  uint *unaff_r4;
  undefined4 uVar23;
  uint *puVar24;
  uint uVar25;
  uint16 *puVar26;
  bool bVar27;
  bool bVar28;
  uint local_30;
  uchar data_00;
  
  iVar19 = DAT_80025710;
  bVar27 = false;
  uVar23 = DAT_80025714;
  switch(*(undefined *)(DAT_80025710 + 10)) {
  case 9:
  case 10:
    uVar23 = 800;
    break;
  case 0xb:
    uVar23 = DAT_80025734;
    break;
  case 0xc:
  case 0xd:
  case 0xe:
  case 0xf:
  case 0x10:
    uVar23 = DAT_80025730;
    break;
  case 0x11:
    uVar23 = DAT_8002572c;
    break;
  case 0x12:
    uVar23 = DAT_80025728;
    break;
  case 0x13:
    uVar23 = DAT_80025724;
    break;
  case 0x14:
  case 0x15:
    uVar23 = DAT_80025720;
    break;
  case 0x16:
    uVar23 = DAT_8002571c;
    break;
  case 0x17:
    uVar23 = DAT_80025718;
  }
  if ((*(byte *)(DAT_80025710 + 10) < 0x1c) || (*(char *)(DAT_80025710 + 0x21) != '\0')) {
    set_fpga_trigger_level();
  }
  fpga_write_cmd('\x0e');
  fpga_write_data((uchar)((uint)uVar23 >> 0x18));
  fpga_write_data((uchar)((uint)uVar23 >> 0x10));
  fpga_write_data((uchar)((uint)uVar23 >> 8));
  fpga_write_data((uchar)uVar23);
  fpga_write_cmd('\x0f');
  fpga_write_data('\0');
  fpga_write_cmd('(');
  fpga_write_data('\0');
  fpga_write_cmd('\x01');
  fpga_write_data('\x01');
  fpga_write_cmd('\x05');
  do {
    bVar8 = fpga_read_data();
  } while ((bVar8 & 1) == 0);
  do {
    bVar8 = fpga_read_data();
  } while ((bVar8 & 1) == 0);
  fpga_write_cmd('\x01');
  fpga_write_data('\0');
  puVar7 = PTR_DAT_8002573c;
  puVar6 = PTR_DAT_80025738;
  *(undefined *)(iVar19 + 0xb) = *(undefined *)(iVar19 + 10);
  *(ushort *)puVar6 = (ushort)*(byte *)(iVar19 + 3);
  *(ushort *)puVar7 = (ushort)*(byte *)(iVar19 + 0xf);
  pcVar2 = PTR_DAT_8002574c;
  pcVar3 = PTR_DAT_80025748;
  if (*(char *)(iVar19 + 0x37) != '\0') {
    *(undefined *)(iVar19 + 0x37) = 0;
    set_frame_to_global_pointer();
    set_display_fg_color(0);
    display_fill_rect(2,0x2f,(ushort)DAT_80025740 + 0xfb,(ushort)DAT_80025740);
    display_draw_grid();
    display_draw_trace_pointers();
    copy_rect_to_screen(2,0x2e,0x2d8,(ushort)DAT_80025744);
    pcVar2 = PTR_DAT_8002574c;
    pcVar3 = PTR_DAT_80025748;
  }
  do {
    fpga_write_cmd('\n');
    bVar8 = fpga_read_data();
    if ((bVar8 & 1) != 0) break;
    tp_i2c_read_status();
    if (*pcVar3 != '\0') {
      bVar27 = true;
      break;
    }
  } while (*pcVar2 != '\x02');
  fpga_write_cmd('\x0f');
  fpga_write_data('\x01');
  if (*(char *)(iVar19 + 0x21) != '\0') {
    if (bVar27) {
      *(undefined *)(iVar19 + 0x18) = 1;
      bVar27 = *(char *)(iVar19 + 0x21) != '\x01';
      if (bVar27) {
        if (*(char *)(iVar19 + 0x36) == '\0') {
          bVar27 = false;
        }
      }
      else {
        *(bool *)(iVar19 + 0x36) = bVar27;
      }
      *(bool *)(iVar19 + 0x17) = bVar27;
      return;
    }
    if (*(char *)(iVar19 + 0x21) == '\x01') {
      *(undefined *)(iVar19 + 0x3a) = 1;
      display_run_stop_text(1);
      *(ushort *)puVar6 = (ushort)*(byte *)(iVar19 + 3);
      *(ushort *)puVar7 = (ushort)*(byte *)(iVar19 + 0xf);
    }
    *(undefined *)(iVar19 + 0x36) = 1;
  }
  local_30 = 0;
  puVar11 = (uint *)fpga_prepare_for_transfer();
  puVar5 = DAT_8000b270;
  puVar15 = DAT_8000b268;
  sVar9 = (short)puVar11;
  if ((byte)DAT_8000b264[10] < 0x19) {
    if ((byte)DAT_8000b264[10] < 0xb) {
      sVar9 = 10;
    }
    else {
      if (puVar11 < DAT_8000b268) {
        sVar9 = sVar9 + 0xd11;
      }
      else {
        sVar9 = sVar9 + -0x2ee;
      }
    }
  }
  else {
    switch(DAT_8000b264[10]) {
    case '\x19':
      unaff_r4 = DAT_8000b26c;
      break;
    case '\x1a':
      unaff_r4 = (uint *)0xaa;
      break;
    case '\x1b':
      unaff_r4 = (uint *)0x55;
      break;
    case '\x1c':
      unaff_r4 = (uint *)0x2f;
      break;
    case '\x1d':
      unaff_r4 = (uint *)&NotUsed;
    }
    if (puVar11 < unaff_r4) {
      sVar9 = 0xfff - ((short)unaff_r4 - sVar9);
    }
    else {
      sVar9 = sVar9 - (short)unaff_r4;
    }
  }
  puVar11 = DAT_8000b270 + 0xfa;
  data = (uchar)((ushort)sVar9 >> 8);
  data_00 = (uchar)sVar9;
  if (*DAT_8000b264 != '\0') {
    fpga_write_cmd('\x1f');
    fpga_write_data(data);
    fpga_write_data(data_00);
    puVar22 = puVar5;
    if ((byte)DAT_8000b264[10] < 0xb) {
      puVar22 = puVar15;
    }
    uVar12 = translate_parameter(0xc,(uint)(byte)DAT_8000b264[0x23]);
    fpga_write_cmd((uchar)uVar12);
    fpga_bus_dir_in();
    puVar18 = DAT_8000b274;
    set_gpio_pin_low(DAT_8000b274,9);
    set_gpio_pin_low(puVar18,10);
    puVar24 = (uint *)0x0;
    if (puVar22 != (uint *)0x0) {
      do {
        set_gpio_pin_low(puVar18,8);
        set_gpio_pin_high(puVar18,8);
        iVar19 = (int)puVar24 * 2;
        puVar24 = (uint *)((uint)((int)puVar24 + 1) & 0xfffeffff);
        *(ushort *)((int)DAT_8000b278 + iVar19) = (ushort)puVar18[4] & 0xff;
      } while (puVar24 < puVar22);
    }
    pcVar2 = DAT_8000b264;
    *(ushort *)DAT_8000b278 = *(ushort *)((int)DAT_8000b278 + 2);
    if (pcVar2[0x23] == '\0') {
      local_30 = scope_process_trigger();
    }
    if (pcVar2[10] == '\x19') {
      scope_pre_process_250ns_data(DAT_8000b278,0,(uint)puVar11);
    }
    if (pcVar2[10] == '\x1a') {
      scope_pre_process_100ns_data(DAT_8000b278,0,(uint)puVar11);
    }
    if (pcVar2[10] == '\x1b') {
      scope_pre_process_50ns_data(DAT_8000b278,0,(uint)puVar11);
    }
    if ((DAT_8000b264[10] == '\x1c') || (DAT_8000b264[10] == '\x1d')) {
      fpga_write_cmd('\x1f');
      fpga_write_data(data);
      fpga_write_data(data_00);
      puVar22 = puVar5;
      if ((byte)DAT_8000b264[10] < 0xb) {
        puVar22 = puVar15;
      }
      fpga_write_cmd('!');
      fpga_bus_dir_in();
      set_gpio_pin_low(puVar18,9);
      set_gpio_pin_low(puVar18,10);
      puVar24 = puVar18;
      if (puVar22 != (uint *)0x0) {
        puVar24 = DAT_8000b27c;
      }
      puVar21 = (uint *)0x0;
      if (puVar22 != (uint *)0x0) {
        do {
          set_gpio_pin_low(puVar18,8);
          set_gpio_pin_high(puVar18,8);
          iVar19 = (int)puVar21 * 2;
          puVar21 = (uint *)((uint)((int)puVar21 + 1) & 0xfffeffff);
          *(ushort *)(DAT_8000b280 + iVar19) = (ushort)*puVar24 & 0xff;
        } while (puVar21 < puVar22);
      }
      scope_pre_process_ch1_25ns_data();
      scope_process_ch1_25ns_data();
    }
    puVar22 = puVar11;
    if (((byte)DAT_8000b264[10] < 0x19) && (puVar22 = puVar5, (byte)DAT_8000b264[10] < 9)) {
      puVar22 = puVar15;
    }
    uVar13 = translate_parameter(0xb,(uint)(byte)DAT_8000b264[3]);
    uVar12 = DAT_8000b288;
    pcVar2 = DAT_8000b264;
    puVar26 = DAT_8000b278;
    puVar16 = DAT_8000b284;
    puVar14 = DAT_8000b284;
    puVar4 = DAT_8000b290;
    while (DAT_8000b264 = pcVar2, DAT_8000b284 = puVar14, DAT_8000b290 = puVar4,
          puVar22 != (uint *)0x0) {
      uVar20 = (uVar13 & 0xffff) * (uint)*(ushort *)puVar26 & 0xffff;
      uVar1 = (ushort)(DAT_8000b28c * uVar20 + DAT_8000b28c >> 0x10);
      uVar10 = uVar1 >> 6;
      if (0x32 < (int)(uVar20 + (uint)((ulonglong)uVar20 * (ulonglong)uVar12 >> 0x25) * -100)) {
        uVar10 = (uVar1 >> 6) + 1;
      }
      puVar22 = (uint *)((int)puVar22 + -1);
      *puVar16 = uVar10;
      pcVar2 = DAT_8000b264;
      puVar26 = (uint16 *)((int)puVar26 + 2);
      puVar16 = puVar16 + 1;
      puVar14 = DAT_8000b284;
      puVar4 = DAT_8000b290;
    }
    puVar22 = puVar11;
    if (((byte)pcVar2[10] < 0x19) && (puVar22 = puVar5, (byte)pcVar2[10] < 9)) {
      puVar22 = puVar15;
    }
    puVar16 = puVar14 + -1;
    puVar17 = puVar4 + -1;
    if (((uint)puVar22 & 1) == 0) {
      *puVar4 = *puVar14;
      puVar16 = puVar14;
      puVar17 = puVar4;
    }
    uVar10 = puVar16[1];
    iVar19 = (int)puVar22 + -1 >> 1;
    while (iVar19 != 0) {
      uVar1 = puVar16[2];
      puVar17[1] = uVar10;
      uVar10 = puVar16[3];
      iVar19 = iVar19 + -1;
      puVar17 = puVar17 + 2;
      *puVar17 = uVar1;
      puVar16 = puVar16 + 2;
    }
    iVar19 = (int)puVar22 + -1;
    if (-1 < iVar19) {
      puVar4[iVar19] = puVar14[iVar19];
    }
    puVar22 = puVar11;
    if (((byte)pcVar2[10] < 0x19) && (puVar22 = puVar5, (byte)pcVar2[10] < 9)) {
      puVar22 = puVar15;
    }
    puVar16 = DAT_8000b290;
    puVar18 = puVar11;
    uVar12 = DAT_8000b294;
    if ((pcVar2[3] == '\x06') && (puVar22 != (uint *)0x0)) {
      puVar16 = puVar4 + -1;
      if (((uint)puVar22 & 1) != 0) {
        *puVar4 = *puVar4 << 1;
        puVar16 = puVar4;
      }
      uVar12 = (uint)puVar22 >> 1;
      while (uVar12 != 0) {
        puVar14 = puVar16 + 2;
        uVar12 = uVar12 - 1;
        puVar16[1] = puVar16[1] << 1;
        *puVar14 = *puVar14 << 1;
        puVar16 = puVar14;
      }
      puVar24 = (uint *)0x0;
      puVar16 = DAT_8000b290;
      uVar12 = DAT_8000b294;
      if (puVar22 != (uint *)0x0) {
        do {
          puVar16 = puVar4 + (int)puVar24;
          if (*puVar16 < *(ushort *)(pcVar2 + 6)) {
            *puVar16 = 0;
          }
          else {
            *puVar16 = *puVar16 - *(short *)(pcVar2 + 6);
          }
          puVar24 = (uint *)((uint)((int)puVar24 + 1) & 0xfffeffff);
          puVar16 = DAT_8000b290;
          uVar12 = DAT_8000b294;
        } while (puVar24 < puVar22);
      }
    }
    do {
      if (uVar12 < *puVar16) {
        *puVar16 = (ushort)uVar12;
      }
      puVar18 = (uint *)((int)puVar18 + -1);
      puVar16 = puVar16 + 1;
    } while (puVar18 != (uint *)0x0);
    puVar16 = DAT_8000b290;
    iVar19 = DAT_8000b298;
    if ((byte)pcVar2[10] < 0x19) {
      do {
        uVar12 = (uint)*puVar16;
        uVar20 = (uint)puVar16[1];
        uVar13 = (uint)puVar16[2];
        uVar25 = uVar12 + 6;
        bVar28 = uVar25 <= uVar20;
        bVar27 = uVar20 == uVar25;
        if (bVar28 && !bVar27) {
          uVar25 = uVar13 + 6;
        }
        if (bVar28 && !bVar27) {
          bVar28 = uVar25 <= uVar20;
          bVar27 = uVar20 == uVar25;
        }
        if (bVar28 && !bVar27) {
          puVar16[1] = (ushort)(uVar12 + uVar13 >> 1);
        }
        if (uVar20 + 6 < uVar12 && uVar20 + 6 < uVar13) {
          puVar16[1] = (ushort)(uVar12 + uVar13 >> 1);
        }
        iVar19 = iVar19 + -1;
        puVar16 = puVar16 + 1;
      } while (iVar19 != 0);
    }
    FUN_800049a0();
    FUN_80006654();
    if (pcVar2[0x48] == '\0') {
      FUN_80003ec8();
    }
  }
  if (DAT_8000b264[0xc] != '\0') {
    fpga_write_cmd('\x1f');
    fpga_write_data(data);
    fpga_write_data(data_00);
    puVar22 = puVar5;
    if ((byte)DAT_8000b264[10] < 0xb) {
      puVar22 = puVar15;
    }
    uVar12 = translate_parameter(0xd,(uint)(byte)DAT_8000b264[0x23]);
    fpga_write_cmd((uchar)uVar12);
    fpga_bus_dir_in();
    puVar24 = DAT_8000b274;
    set_gpio_pin_low(DAT_8000b274,9);
    set_gpio_pin_low(puVar24,10);
    puVar26 = DAT_8000b29c;
    puVar18 = (uint *)0x0;
    if (puVar22 != (uint *)0x0) {
      do {
        set_gpio_pin_low(puVar24,8);
        set_gpio_pin_high(puVar24,8);
        iVar19 = (int)puVar18 * 2;
        puVar18 = (uint *)((uint)((int)puVar18 + 1) & 0xfffeffff);
        *(ushort *)((int)puVar26 + iVar19) = (ushort)*DAT_8000b27c & 0xff;
      } while (puVar18 < puVar22);
    }
    pcVar2 = DAT_8000b264;
    *(ushort *)puVar26 = *(ushort *)((int)puVar26 + 2);
    if (pcVar2[0x23] == '\x01') {
      local_30 = scope_process_trigger();
    }
    if (pcVar2[10] == '\x19') {
      scope_pre_process_250ns_data(DAT_8000b29c,0,(uint)puVar11);
    }
    if (pcVar2[10] == '\x1a') {
      scope_pre_process_100ns_data(DAT_8000b29c,0,(uint)puVar11);
    }
    if (pcVar2[10] == '\x1b') {
      scope_pre_process_50ns_data(DAT_8000b29c,0,(uint)puVar11);
    }
    if ((DAT_8000b264[10] == '\x1c') || (DAT_8000b264[10] == '\x1d')) {
      fpga_write_cmd('\x1f');
      fpga_write_data(data);
      fpga_write_data(data_00);
      puVar22 = puVar5;
      if ((byte)DAT_8000b264[10] < 0xb) {
        puVar22 = puVar15;
      }
      fpga_write_cmd('#');
      fpga_bus_dir_in();
      set_gpio_pin_low(puVar24,9);
      set_gpio_pin_low(puVar24,10);
      if (puVar22 != (uint *)0x0) {
        puVar26 = DAT_8000b2a0;
        puVar18 = DAT_8000b27c;
      }
      puVar21 = (uint *)0x0;
      if (puVar22 != (uint *)0x0) {
        do {
          set_gpio_pin_low(puVar24,8);
          set_gpio_pin_high(puVar24,8);
          iVar19 = (int)puVar21 * 2;
          puVar21 = (uint *)((uint)((int)puVar21 + 1) & 0xfffeffff);
          *(ushort *)((int)puVar26 + iVar19) = (ushort)*puVar18 & 0xff;
        } while (puVar21 < puVar22);
      }
      scope_pre_process_ch2_25ns_data();
      scope_process_ch2_25ns_data();
    }
    pcVar2 = DAT_8000b264;
    puVar22 = puVar11;
    if (((byte)DAT_8000b264[10] < 0x19) && (puVar22 = puVar5, (byte)DAT_8000b264[10] < 9)) {
      puVar22 = puVar15;
    }
    uVar13 = translate_parameter(0xb,(uint)(byte)DAT_8000b264[0xf]);
    uVar12 = DAT_8000b288;
    puVar26 = DAT_8000b29c;
    puVar16 = DAT_8000b2a4;
    puVar14 = DAT_8000b2a4;
    puVar4 = DAT_8000b2a8;
    while (DAT_8000b2a4 = puVar14, DAT_8000b2a8 = puVar4, puVar22 != (uint *)0x0) {
      uVar20 = (uVar13 & 0xffff) * (uint)*(ushort *)puVar26 & 0xffff;
      uVar1 = (ushort)(DAT_8000b28c * uVar20 + DAT_8000b28c >> 0x10);
      uVar10 = uVar1 >> 6;
      if (0x32 < (int)(uVar20 + (uint)((ulonglong)uVar20 * (ulonglong)uVar12 >> 0x25) * -100)) {
        uVar10 = (uVar1 >> 6) + 1;
      }
      puVar22 = (uint *)((int)puVar22 + -1);
      *puVar16 = uVar10;
      puVar26 = (uint16 *)((int)puVar26 + 2);
      puVar16 = puVar16 + 1;
      puVar14 = DAT_8000b2a4;
      puVar4 = DAT_8000b2a8;
    }
    puVar22 = puVar11;
    if (((byte)pcVar2[10] < 0x19) && (puVar22 = puVar5, (byte)pcVar2[10] < 9)) {
      puVar22 = puVar15;
    }
    puVar16 = puVar14 + -1;
    puVar17 = puVar4 + -1;
    if (((uint)puVar22 & 1) == 0) {
      *puVar4 = *puVar14;
      puVar16 = puVar14;
      puVar17 = puVar4;
    }
    uVar10 = puVar16[1];
    iVar19 = (int)puVar22 + -1 >> 1;
    while (iVar19 != 0) {
      uVar1 = puVar16[2];
      puVar17[1] = uVar10;
      uVar10 = puVar16[3];
      iVar19 = iVar19 + -1;
      puVar17 = puVar17 + 2;
      *puVar17 = uVar1;
      puVar16 = puVar16 + 2;
    }
    iVar19 = (int)puVar22 + -1;
    if (-1 < iVar19) {
      puVar4[iVar19] = puVar14[iVar19];
    }
    puVar22 = puVar11;
    if (((byte)pcVar2[10] < 0x19) && (puVar22 = puVar15, 8 < (byte)pcVar2[10])) {
      puVar22 = puVar5;
    }
    puVar16 = DAT_8000b2a8;
    uVar12 = DAT_8000b294;
    if ((pcVar2[0xf] == '\x06') && (puVar22 != (uint *)0x0)) {
      puVar16 = puVar4 + -1;
      if (((uint)puVar22 & 1) != 0) {
        *puVar4 = *puVar4 << 1;
        puVar16 = puVar4;
      }
      uVar12 = (uint)puVar22 >> 1;
      while (uVar12 != 0) {
        puVar14 = puVar16 + 2;
        uVar12 = uVar12 - 1;
        puVar16[1] = puVar16[1] << 1;
        *puVar14 = *puVar14 << 1;
        puVar16 = puVar14;
      }
      puVar15 = (uint *)0x0;
      puVar16 = DAT_8000b2a8;
      uVar12 = DAT_8000b294;
      if (puVar22 != (uint *)0x0) {
        do {
          puVar16 = puVar4 + (int)puVar15;
          if (*puVar16 < *(ushort *)(pcVar2 + 0x12)) {
            *puVar16 = 0;
          }
          else {
            *puVar16 = *puVar16 - *(short *)(pcVar2 + 0x12);
          }
          puVar15 = (uint *)((uint)((int)puVar15 + 1) & 0xfffeffff);
          puVar16 = DAT_8000b2a8;
          uVar12 = DAT_8000b294;
        } while (puVar15 < puVar22);
      }
    }
    do {
      if (uVar12 < *puVar16) {
        *puVar16 = (ushort)uVar12;
      }
      puVar11 = (uint *)((int)puVar11 + -1);
      puVar16 = puVar16 + 1;
    } while (puVar11 != (uint *)0x0);
    puVar16 = DAT_8000b2a8;
    iVar19 = DAT_8000b298;
    if ((byte)pcVar2[10] < 0x19) {
      do {
        uVar13 = (uint)*puVar16;
        uVar12 = (uint)puVar16[1];
        uVar20 = (uint)puVar16[2];
        uVar25 = uVar13 + 6;
        bVar28 = uVar25 <= uVar12;
        bVar27 = uVar12 == uVar25;
        if (bVar28 && !bVar27) {
          uVar25 = uVar20 + 6;
        }
        if (bVar28 && !bVar27) {
          bVar28 = uVar25 <= uVar12;
          bVar27 = uVar12 == uVar25;
        }
        if (bVar28 && !bVar27) {
          puVar16[1] = (ushort)(uVar13 + uVar20 >> 1);
        }
        if (uVar12 + 6 < uVar13 && uVar12 + 6 < uVar20) {
          puVar16[1] = (ushort)(uVar13 + uVar20 >> 1);
        }
        iVar19 = iVar19 + -1;
        puVar16 = puVar16 + 1;
      } while (iVar19 != 0);
    }
    FUN_80007714();
    FUN_800093ac();
    if (pcVar2[0x48] == '\0') {
      FUN_80006ce8();
    }
  }
  pcVar2 = DAT_8000b264;
  if (0x18 < (byte)DAT_8000b264[10]) {
    if (DAT_8000b264[0x23] == '\0') {
      if (*DAT_8000b264 != '\0') {
        FUN_80006a94(*(undefined2 *)(DAT_8000b264 + 0x26));
        FUN_80005080();
      }
      if (pcVar2[0xc] != '\0') {
        FUN_80008fac();
        FUN_80007df4();
      }
    }
    else {
      if (DAT_8000b264[0xc] != '\0') {
        FUN_800097e0(*(undefined2 *)(DAT_8000b264 + 0x26));
        FUN_80007df4();
      }
      if (*pcVar2 != '\0') {
        FUN_80006250();
        FUN_80005080();
      }
    }
  }
  if (local_30 == 0) {
    pcVar2[0x1e] = '\0';
    pcVar2[0x18] = '\x01';
    pcVar2[0x17] = '\x01';
  }
  else {
    pcVar2[0x1e] = '\x01';
    pcVar2[0x18] = '\0';
    pcVar2[0x17] = '\0';
  }
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffdc : 0x8002b464
// WARNING: Restarted to delay deadcode elimination for space: stack

void process_long_timebase_data(void)

{
  char cVar1;
  undefined2 uVar2;
  short sVar3;
  int iVar4;
  undefined *puVar5;
  undefined *puVar6;
  uint *ptr;
  ushort *puVar7;
  char *pcVar8;
  undefined2 *puVar9;
  int iVar10;
  int in_r0;
  uint uVar11;
  uint uVar12;
  ushort *puVar13;
  int iVar14;
  ushort uVar15;
  int iVar16;
  uint extraout_r1;
  ushort *puVar17;
  uint uVar18;
  int iVar19;
  ushort uVar20;
  code *UNRECOVERED_JUMPTABLE_00;
  bool bVar21;
  
  puVar6 = PTR_DAT_80025adc;
  puVar5 = PTR_initialization_data_80025ad8;
  iVar4 = DAT_80025ad4;
  switch(*(undefined *)(DAT_80025ad4 + 10)) {
  case 0:
    in_r0 = 2000;
    break;
  case 1:
    in_r0 = 1000;
    break;
  case 2:
    in_r0 = 400;
    break;
  case 3:
    in_r0 = 200;
    break;
  case 4:
    in_r0 = 0x50;
    break;
  case 5:
    in_r0 = 0x28;
    break;
  case 6:
    in_r0 = 0x14;
    break;
  case 7:
    in_r0 = 8;
    break;
  case 8:
    in_r0 = 4;
  }
  iVar16 = *(int *)(PTR_initialization_data_80025ad8 + 8);
  do {
    uVar11 = get_timer_ticks();
    if ((uint)(in_r0 + iVar16) <= uVar11) {
      *(uint *)(puVar5 + 8) = uVar11;
      goto LAB_8002582c;
    }
  } while ((5 < *(byte *)(iVar4 + 10)) || (tp_i2c_read_status(), *puVar6 == '\0'));
  delay_2(0x28);
LAB_8002582c:
  fpga_write_cmd('(');
  fpga_write_data('\x01');
  uVar18 = 0;
  fpga_write_cmd('$');
  fpga_bus_dir_in();
  ptr = DAT_80025ae0;
  set_gpio_pin_low(DAT_80025ae0,9);
  set_gpio_pin_low(ptr,10);
  uVar11 = 0;
  do {
    set_gpio_pin_low(ptr,8);
    set_gpio_pin_high(ptr,8);
    uVar11 = uVar11 + 1 & 0xfffeffff;
    uVar18 = (ptr[4] & 0xff) + uVar18 & 0xfffeffff;
  } while (uVar11 < 10);
  iVar16 = divide(uVar18,10);
  puVar13 = DAT_80025ae4;
  *DAT_80025ae4 = (ushort)iVar16 & 0xff;
  uVar18 = 0;
  fpga_write_cmd('&');
  fpga_bus_dir_in();
  set_gpio_pin_low(ptr,9);
  set_gpio_pin_low(ptr,10);
  uVar11 = 0;
  do {
    set_gpio_pin_low(ptr,8);
    set_gpio_pin_high(ptr,8);
    uVar11 = uVar11 + 1 & 0xfffeffff;
    uVar18 = (ptr[4] & 0xff) + uVar18 & 0xfffeffff;
  } while (uVar11 < 10);
  uVar12 = divide(uVar18,10);
  *DAT_80025ae8 = (short)(uVar12 & 0xff);
  puVar7 = DAT_80025af4;
  uVar11 = DAT_80025af0;
  puVar17 = DAT_80025aec;
  uVar18 = extraout_r1;
  switch(*(undefined *)(iVar4 + 3)) {
  case 0:
    uVar18 = (uint)*DAT_80025aec;
    break;
  case 1:
    uVar18 = (uint)DAT_80025aec[1];
    break;
  case 2:
    uVar18 = (uint)DAT_80025aec[2];
    break;
  case 3:
    uVar18 = (uint)DAT_80025aec[3];
    break;
  case 4:
    uVar18 = (uint)DAT_80025aec[4];
    break;
  case 5:
    uVar18 = (uint)DAT_80025aec[5];
    break;
  case 6:
    uVar18 = (uint)DAT_80025aec[6];
  }
  uVar18 = *puVar13 * uVar18 & 0xffff;
  uVar20 = (ushort)(((int)DAT_80025af0 >> 0xf) * uVar18 + 0xa3d7 >> 0x10);
  uVar15 = uVar20 >> 6;
  if (0x32 < (int)(uVar18 + (uint)((ulonglong)uVar18 * (ulonglong)DAT_80025af0 >> 0x25) * -100)) {
    uVar15 = (uVar20 >> 6) + 1;
  }
  *DAT_80025af4 = uVar15;
  uVar18 = DAT_80025afc;
  puVar13 = DAT_80025af8;
  uVar20 = *puVar7;
  *DAT_80025af8 = uVar20;
  if (uVar18 < uVar20) {
    *puVar13 = (ushort)uVar18;
  }
  puVar13 = DAT_80025b00;
  switch(*(undefined *)(iVar4 + 0xf)) {
  case 0:
    puVar17 = (ushort *)(uint)*puVar17;
    break;
  case 1:
    puVar17 = (ushort *)(uint)puVar17[1];
    break;
  case 2:
    puVar17 = (ushort *)(uint)puVar17[2];
    break;
  case 3:
    puVar17 = (ushort *)(uint)puVar17[3];
    break;
  case 4:
    puVar17 = (ushort *)(uint)puVar17[4];
    break;
  case 5:
    puVar17 = (ushort *)(uint)puVar17[5];
    break;
  case 6:
    puVar17 = (ushort *)(uint)puVar17[6];
  }
  uVar12 = (uVar12 & 0xff) * (int)puVar17 & 0xff00ffff;
  uVar20 = (ushort)(DAT_80025b04 * uVar12 + 0xa3d7 >> 0x10);
  uVar15 = uVar20 >> 6;
  if (0x32 < (int)(uVar12 + (uint)((ulonglong)uVar12 * (ulonglong)uVar11 >> 0x25) * -100)) {
    uVar15 = (uVar20 >> 6) + 1;
  }
  *DAT_80025b00 = uVar15;
  puVar17 = DAT_80025b08;
  uVar20 = *puVar13;
  *DAT_80025b08 = uVar20;
  if (uVar18 < uVar20) {
    *puVar17 = (ushort)uVar18;
  }
  pcVar8 = DAT_8002b64c;
  puVar5 = PTR_DAT_8002b648;
  cVar1 = *PTR_DAT_8002b648;
  if ((cVar1 == '\x02') && ((DAT_8002b64c[0x21] != '\x01' || (DAT_8002b64c[0x3a] == '\x01')))) {
    DAT_8002b64c[0x18] = '\x01';
    pcVar8[0x17] = '\x01';
  }
  puVar6 = PTR_DAT_8002b65c;
  iVar16 = DAT_8002b658;
  iVar4 = DAT_8002b654;
  uVar20 = (ushort)DAT_8002b650;
  iVar19 = DAT_8002b654 + 2000;
  if (8 < (byte)pcVar8[10]) {
    if (pcVar8[0x18] != '\0') {
      set_frame_to_global_pointer();
      set_display_fg_color(0);
      display_fill_rect(2,0x2f,uVar20,uVar20 - 0xfb);
      display_draw_grid();
    }
    if (pcVar8[0x17] == '\0') goto LAB_8002b414;
    FUN_8001b424(pcVar8 + 0x1a,pcVar8 + 0x1c);
    if (*pcVar8 != '\0') {
      if ((pcVar8[0x3a] == '\0') && (*puVar5 != '\x02')) {
        *(undefined2 *)(puVar6 + 0x12) = 400;
      }
      FUN_8000410c();
      cVar1 = pcVar8[0x21];
      bVar21 = cVar1 != '\0';
      if (bVar21) {
        cVar1 = pcVar8[0x21];
      }
      if (((!bVar21 || cVar1 == '\x02') && (0x1a < (byte)pcVar8[10])) &&
         ((pcVar8[0x23] == '\x01' || (pcVar8[9] != '\0')))) {
        FUN_8000583c();
      }
      if (*(char *)(iVar16 + 7) == '\0') {
        FUN_80012a64(*(undefined2 *)(pcVar8 + 0x1a),0,*(undefined2 *)(pcVar8 + 0x1c),DAT_8002b654);
      }
    }
    if (pcVar8[0xc] == '\0') {
LAB_8002b2e8:
      if (*(char *)(iVar16 + 7) != '\0') goto LAB_8002b2f4;
    }
    else {
      if ((pcVar8[0x3a] == '\0') && (*puVar5 != '\x02')) {
        *(undefined2 *)(puVar6 + 0x14) = 400;
      }
      FUN_80006f28();
      cVar1 = pcVar8[0x21];
      bVar21 = cVar1 != '\0';
      if (bVar21) {
        cVar1 = pcVar8[0x21];
      }
      if (((!bVar21 || cVar1 == '\x02') && (0x1a < (byte)pcVar8[10])) &&
         ((pcVar8[0x23] == '\0' || (pcVar8[0x15] != '\0')))) {
        FUN_80008594();
      }
      if (*(char *)(iVar16 + 7) == '\0') {
        FUN_80012a64(*(undefined2 *)(pcVar8 + 0x1a),0,*(undefined2 *)(pcVar8 + 0x1c),DAT_8002b668);
        goto LAB_8002b2e8;
      }
LAB_8002b2f4:
      set_frame_to_global_pointer();
      set_display_fg_color(DAT_8002b66c);
      if (*(ushort *)(pcVar8 + 0x1c) < 2) {
        *(undefined2 *)(pcVar8 + 0x1c) = 2;
      }
      uVar11 = 1;
      if (1 < (int)(*(ushort *)(pcVar8 + 0x1c) - 2)) {
        do {
          puVar13 = (ushort *)(iVar4 + uVar11 * 2);
          puVar17 = (ushort *)(iVar19 + uVar11 * 2);
          display_draw_line(*puVar13 + 0x96,(uint)*puVar17,puVar13[1] + 0x96,(uint)puVar17[1]);
          uVar11 = uVar11 + 1 & 0xfffeffff;
        } while ((int)uVar11 < (int)(*(ushort *)(pcVar8 + 0x1c) - 2));
      }
    }
    cVar1 = pcVar8[4];
    bVar21 = cVar1 != '\0';
    if (bVar21) {
      cVar1 = *pcVar8;
    }
    if (bVar21 && cVar1 != '\0') {
      FUN_800043e4();
    }
    cVar1 = pcVar8[0x10];
    bVar21 = cVar1 != '\0';
    if (bVar21) {
      cVar1 = pcVar8[0xc];
    }
    if (bVar21 && cVar1 != '\0') {
      set_display_fg_color(0);
      display_fill_rect(3,0x81,0x2d5,0xd1);
      FUN_800075dc();
      set_display_fg_color(DAT_8002b670);
      puVar9 = DAT_8002b674;
      uVar11 = 0;
      *DAT_8002b674 = DAT_8002b674[1];
      do {
        puVar13 = puVar9 + uVar11;
        if (0x50 < *puVar13) {
          *puVar13 = 0x50;
        }
        display_draw_vert_line((short)uVar11 + 3,0xd1 - *puVar13,0xd1);
        uVar11 = uVar11 + 1 & 0xfffeffff;
      } while (uVar11 < 0x2d3);
    }
LAB_8002b414:
    iVar4 = DAT_8002b678;
    if (pcVar8[0x18] == '\0') {
      return;
    }
    if (*(char *)(DAT_8002b678 + 0x292) != '\0') {
      display_draw_time_cursors();
    }
    if (*(char *)(iVar4 + 0x29a) != '\0') {
      display_draw_volt_cursors();
    }
    cVar1 = *(char *)(iVar4 + 0x292);
    bVar21 = cVar1 == '\0';
    if (bVar21) {
      cVar1 = *(char *)(iVar4 + 0x29a);
    }
    if (!bVar21 || cVar1 != '\0') {
      FUN_8000ebf8();
    }
    display_draw_trace_pointers();
    FUN_80021810();
    uVar11 = DAT_8002b67c;
    iVar16 = Start_Of_Screen_Mem;
    iVar4 = Screen_Frame_Buffer;
    uVar18 = 0x2e;
    iVar19 = DAT_8002b67c + 0xf6;
    if (0x2e < DAT_8002b67c) {
      do {
        iVar10 = uVar18 * 800 + 2;
        copy_short((void *)(iVar16 + iVar10 * 2),(void *)(iVar4 + iVar10 * 2),iVar19);
        uVar18 = uVar18 + 1;
      } while (uVar18 < uVar11);
      return;
    }
    return;
  }
  uVar15 = (ushort)(byte)pcVar8[0x3a];
  if (uVar15 != 0) {
                    // WARNING: Could not recover jumptable at 0x8002b490. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)();
    return;
  }
  if (cVar1 != '\x02') {
    uVar15 = *(ushort *)PTR_DAT_8002b65c;
  }
  else {
    *(undefined2 *)PTR_DAT_8002b65c = 0;
  }
  if (cVar1 == '\x02' || uVar15 == 0) {
    set_frame_to_global_pointer();
    set_display_fg_color(0);
    uVar15 = (ushort)DAT_8002b67c;
    display_fill_rect(2,0x2f,uVar20,uVar15);
    display_draw_grid();
    display_draw_trace_pointers();
    copy_rect_to_screen(2,0x2e,uVar15 + 0xf7,uVar15);
    set_screen_to_global_pointer();
  }
  iVar10 = DAT_8002b680;
  if (*pcVar8 != '\0') {
    set_screen_to_global_pointer();
    iVar14 = iVar10 - (uint)*DAT_8002b684;
    *(short *)(puVar6 + 0x16) = (short)iVar14;
    iVar14 = iVar14 * 0x10000 >> 0x10;
    if (iVar14 < 0x2f) {
      iVar14 = 0x2f;
    }
    else {
      if (0x1c0 < iVar14) {
        iVar14 = 0x1c0;
      }
    }
    *(short *)(puVar6 + 0x16) = (short)iVar14;
    if (*(char *)(iVar16 + 7) == '\0') {
      display_channel1_long_timebase_trace();
    }
  }
  if (pcVar8[0xc] == '\0') {
LAB_8002b590:
    if (*(char *)(iVar16 + 7) == '\0') goto LAB_8002b624;
  }
  else {
    set_screen_to_global_pointer();
    iVar10 = iVar10 - (uint)*DAT_8002b688;
    *(short *)(puVar6 + 0x18) = (short)iVar10;
    iVar10 = iVar10 * 0x10000 >> 0x10;
    if (iVar10 < 0x2f) {
      iVar10 = 0x2f;
    }
    else {
      if (0x1c0 < iVar10) {
        iVar10 = 0x1c0;
      }
    }
    *(short *)(puVar6 + 0x18) = (short)iVar10;
    if (*(char *)(iVar16 + 7) == '\0') {
      display_channel2_long_timebase_trace();
      goto LAB_8002b590;
    }
  }
  if (*(short *)puVar6 == 0) {
    *(undefined2 *)(puVar6 + 2) = *(undefined2 *)(puVar6 + 0x16);
    *(undefined2 *)(puVar6 + 4) = *(undefined2 *)(puVar6 + 0x18);
  }
  set_display_fg_color(DAT_8002b66c);
  display_draw_line(*(ushort *)(puVar6 + 2) + 0x96,(uint)*(ushort *)(puVar6 + 4),
                    *(ushort *)(puVar6 + 0x16) + 0x96,(uint)*(ushort *)(puVar6 + 0x18));
  display_draw_line(*(ushort *)(puVar6 + 2) + 0x97,*(ushort *)(puVar6 + 4) + 1,
                    *(ushort *)(puVar6 + 0x16) + 0x97,*(ushort *)(puVar6 + 0x18) + 1);
  *(undefined2 *)(puVar6 + 2) = *(undefined2 *)(puVar6 + 0x16);
  uVar2 = *(undefined2 *)(puVar6 + 0x18);
  *(undefined2 *)(puVar6 + 4) = uVar2;
  uVar20 = *(ushort *)puVar6;
  *(undefined2 *)(iVar4 + (uint)uVar20 * 2) = *(undefined2 *)(puVar6 + 0x16);
  *(undefined2 *)(iVar19 + (uint)uVar20 * 2) = uVar2;
LAB_8002b624:
  sVar3 = *(short *)puVar6;
  *(ushort *)puVar6 = sVar3 + 1U;
  if (0x2cf < (ushort)(sVar3 + 1U)) {
    *(undefined2 *)puVar6 = 0;
  }
                    // WARNING: Could not recover jumptable at 0x8002b644. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE_00)();
  return;
}



byte FUN_80025b0c(void)

{
  byte bVar1;
  
  fpga_write_cmd('\n');
  bVar1 = fpga_read_data();
  return bVar1 & 1;
}



void FUN_80025b24(void)

{
  uint *ptr;
  byte bVar1;
  
  fpga_write_cmd('(');
  fpga_write_data('\0');
  fpga_write_cmd('\x01');
  fpga_write_data('\x01');
  fpga_write_cmd('\x05');
  do {
    bVar1 = fpga_read_data();
  } while ((bVar1 & 1) == 0);
  do {
    bVar1 = fpga_read_data();
  } while ((bVar1 & 1) == 0);
  fpga_write_cmd('\x01');
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void write_fpga_cmd_0x0E(uint data)

{
  uint *ptr;
  
  fpga_write_cmd('\x0e');
  fpga_write_data((uchar)(data >> 0x18));
  fpga_write_data((uchar)(data >> 0x10));
  fpga_write_data((uchar)(data >> 8));
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = data & 0xff | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void signal_sys_ok(void)

{
  int iVar1;
  ushort uVar2;
  uint *puVar3;
  uint uVar4;
  undefined *puVar5;
  int iVar6;
  int extraout_r1;
  uint *puVar7;
  uint uVar8;
  undefined *puVar9;
  uint uVar10;
  ushort uVar11;
  undefined8 uVar12;
  uint *puStack48;
  uint uStack44;
  uint uStack40;
  
  iVar6 = DAT_80025bec;
  *(short *)(DAT_80025bec + 0x44) = (short)DAT_80025be8;
  *(undefined *)(iVar6 + 0x21) = 0;
  set_fpga_trigger_mode();
  save_config_data(DAT_80025bf0);
  uStack40 = 500;
  uStack44 = FLASH_CONFIG_DATA;
  puStack48 = DAT_80025bf0;
  uVar8 = FLASH_CONFIG_DATA & 0xfff;
  uVar10 = 0x1000 - uVar8;
  if (499 < 0x1000 - uVar8) {
    uVar10 = 500;
  }
  puVar3 = (uint *)(SPI0_BASE + 8);
  do {
    *puVar3 = *puVar3 & 0xffffff4f;
    uVar12 = spi0_start_transfer();
    iVar6 = (int)((ulonglong)uVar12 >> 0x20);
    if ((int)uVar12 == 4) {
      spi0_start_transfer();
      iVar6 = extraout_r1;
    }
    iVar1 = SPI0_BASE;
    *puVar3 = *puVar3 & 0xffffff4f | 0x80;
    if (uVar10 != 0) {
      iVar6 = DAT_80036614;
    }
    uVar4 = 0;
    if (uVar10 != 0) {
      do {
        if (*(char *)(iVar6 + uVar8 + uVar4) != -1) break;
        uVar4 = uVar4 + 1 & 0xfffeffff;
      } while (uVar4 < uVar10);
    }
    if (uVar4 < uVar10) {
      FUN_8002509c(0);
      spi0_setup();
      *puVar3 = *puVar3 & 0xffffff4f;
      spi0_start_transfer();
      *puVar3 = *puVar3 & 0xffffff4f | 0x80;
      spi0_setup();
      if (uVar10 != 0) {
        puVar9 = (undefined *)(DAT_80036614 + uVar8);
        puVar5 = puVar9 + -1;
        puVar7 = (uint *)((int)puStack48 + -1);
        if ((uVar10 & 1) != 0) {
          *puVar9 = *(undefined *)puStack48;
          puVar5 = puVar9;
          puVar7 = puStack48;
        }
        uVar8 = uVar10 >> 1;
        while (uVar8 != 0) {
          uVar8 = uVar8 - 1;
          puVar5[1] = *(undefined *)((int)puVar7 + 1);
          puVar7 = (uint *)((int)puVar7 + 2);
          puVar5 = puVar5 + 2;
          *puVar5 = *(undefined *)puVar7;
        }
      }
      puVar7 = (uint *)(iVar1 + 8);
      uVar2 = 0x1000;
      uVar11 = 0x100;
      while( true ) {
        FUN_8002509c(0);
        spi0_setup();
        *puVar7 = *puVar7 & 0xffffff4f;
        iVar6 = spi0_start_transfer();
        if (iVar6 == 4) {
          spi0_start_transfer();
        }
        *puVar7 = *puVar7 & 0xffffff4f | 0x80;
        spi0_setup();
        if (uVar2 == uVar11) break;
        uVar2 = uVar2 - uVar11;
        uVar11 = uVar2;
        if (0x100 < uVar2) {
          uVar11 = 0x100;
        }
      }
    }
    else {
      uVar8 = 0x100 - (uStack44 & 0xff);
      if (uVar10 <= uVar8) {
        uVar8 = uVar10;
      }
      puVar7 = (uint *)(iVar1 + 8);
      uVar4 = uVar10;
      while( true ) {
        FUN_8002509c(0);
        spi0_setup();
        *puVar7 = *puVar7 & 0xffffff4f;
        iVar6 = spi0_start_transfer();
        if (iVar6 == 4) {
          spi0_start_transfer();
        }
        *puVar7 = *puVar7 & 0xffffff4f | 0x80;
        spi0_setup();
        if (uVar4 == uVar8) break;
        uVar4 = uVar4 - uVar8 & 0xffff;
        uVar8 = uVar4;
        if (0x100 < uVar4) {
          uVar8 = 0x100;
        }
      }
    }
    if (uStack40 == uVar10) {
      return;
    }
    uVar8 = 0;
    uStack40 = uStack40 - uVar10 & 0xffff;
    puStack48 = (uint *)((int)puStack48 + uVar10);
    uStack44 = uStack44 + uVar10;
    uVar10 = uStack40;
    if (0x1000 < uStack40) {
      uVar10 = 0x1000;
    }
  } while( true );
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_80025bd8(void)

{
  int iVar1;
  ushort uVar2;
  uint *puVar3;
  uint uVar4;
  undefined *puVar5;
  int iVar6;
  int extraout_r1;
  undefined *puVar7;
  uint uVar8;
  undefined *puVar9;
  uint *puVar10;
  uint uVar11;
  ushort uVar12;
  undefined8 uVar13;
  undefined *puStack48;
  uint uStack44;
  uint uStack40;
  
  uStack40 = 500;
  uStack44 = FLASH_CONFIG_DATA;
  puStack48 = DAT_80025bf0;
  uVar8 = FLASH_CONFIG_DATA & 0xfff;
  uVar11 = 0x1000 - uVar8;
  if (499 < 0x1000 - uVar8) {
    uVar11 = 500;
  }
  puVar3 = (uint *)(SPI0_BASE + 8);
  do {
    *puVar3 = *puVar3 & 0xffffff4f;
    uVar13 = spi0_start_transfer();
    iVar6 = (int)((ulonglong)uVar13 >> 0x20);
    if ((int)uVar13 == 4) {
      spi0_start_transfer();
      iVar6 = extraout_r1;
    }
    iVar1 = SPI0_BASE;
    *puVar3 = *puVar3 & 0xffffff4f | 0x80;
    if (uVar11 != 0) {
      iVar6 = DAT_80036614;
    }
    uVar4 = 0;
    if (uVar11 != 0) {
      do {
        if (*(char *)(iVar6 + uVar8 + uVar4) != -1) break;
        uVar4 = uVar4 + 1 & 0xfffeffff;
      } while (uVar4 < uVar11);
    }
    if (uVar4 < uVar11) {
      FUN_8002509c(0);
      spi0_setup();
      *puVar3 = *puVar3 & 0xffffff4f;
      spi0_start_transfer();
      *puVar3 = *puVar3 & 0xffffff4f | 0x80;
      spi0_setup();
      if (uVar11 != 0) {
        puVar9 = (undefined *)(DAT_80036614 + uVar8);
        puVar5 = puVar9 + -1;
        puVar7 = puStack48 + -1;
        if ((uVar11 & 1) != 0) {
          *puVar9 = *puStack48;
          puVar5 = puVar9;
          puVar7 = puStack48;
        }
        uVar8 = uVar11 >> 1;
        while (uVar8 != 0) {
          uVar8 = uVar8 - 1;
          puVar5[1] = puVar7[1];
          puVar7 = puVar7 + 2;
          puVar5 = puVar5 + 2;
          *puVar5 = *puVar7;
        }
      }
      puVar10 = (uint *)(iVar1 + 8);
      uVar2 = 0x1000;
      uVar12 = 0x100;
      while( true ) {
        FUN_8002509c(0);
        spi0_setup();
        *puVar10 = *puVar10 & 0xffffff4f;
        iVar6 = spi0_start_transfer();
        if (iVar6 == 4) {
          spi0_start_transfer();
        }
        *puVar10 = *puVar10 & 0xffffff4f | 0x80;
        spi0_setup();
        if (uVar2 == uVar12) break;
        uVar2 = uVar2 - uVar12;
        uVar12 = uVar2;
        if (0x100 < uVar2) {
          uVar12 = 0x100;
        }
      }
    }
    else {
      uVar8 = 0x100 - (uStack44 & 0xff);
      if (uVar11 <= uVar8) {
        uVar8 = uVar11;
      }
      puVar10 = (uint *)(iVar1 + 8);
      uVar4 = uVar11;
      while( true ) {
        FUN_8002509c(0);
        spi0_setup();
        *puVar10 = *puVar10 & 0xffffff4f;
        iVar6 = spi0_start_transfer();
        if (iVar6 == 4) {
          spi0_start_transfer();
        }
        *puVar10 = *puVar10 & 0xffffff4f | 0x80;
        spi0_setup();
        if (uVar4 == uVar8) break;
        uVar4 = uVar4 - uVar8 & 0xffff;
        uVar8 = uVar4;
        if (0x100 < uVar4) {
          uVar8 = 0x100;
        }
      }
    }
    if (uStack40 == uVar11) {
      return;
    }
    uVar8 = 0;
    uStack40 = uStack40 - uVar11 & 0xffff;
    puStack48 = puStack48 + uVar11;
    uStack44 = uStack44 + uVar11;
    uVar11 = uStack40;
    if (0x1000 < uStack40) {
      uVar11 = 0x1000;
    }
  } while( true );
}



void FUN_80025bf8(uint param_1,undefined4 param_2,undefined4 param_3,uint param_4)

{
  uint uVar1;
  bool bVar2;
  uint local_8 [2];
  
  bVar2 = param_1 == 1;
  if (bVar2) {
    param_1 = DAT_80025c2c;
  }
  uVar1 = param_1;
  if ((bVar2) || (uVar1 = DAT_80025c30, local_8[0] = param_4, param_1 == 2)) {
    local_8[0] = param_4 & 0xffff0000 | uVar1 & 0xffff;
  }
  write_to_flash(DAT_80025c34,(uchar *)local_8,100);
  return;
}



void FUN_80025c38(void)

{
  uint uVar1;
  undefined uVar2;
  undefined2 uVar3;
  char cVar4;
  int iVar5;
  int iVar6;
  undefined2 *puVar7;
  uint uVar8;
  undefined2 *puVar9;
  uint uVar10;
  undefined2 uVar11;
  uint uVar12;
  undefined auStack1160 [552];
  undefined auStack608 [552];
  undefined local_38;
  char local_37;
  char local_36;
  char local_35;
  undefined local_34;
  undefined local_33;
  undefined local_32;
  undefined local_31;
  undefined local_30;
  
  uVar2 = *PTR_DAT_80025f04;
  local_38 = 0x2f;
  local_34 = 0x61;
  local_36 = '.';
  local_33 = 0x76;
  local_35 = 'w';
  local_32 = 0;
  *PTR_DAT_80025f04 = 1;
  FUN_8002c7a4();
  uVar12 = 1;
  do {
    local_37 = (char)uVar12 + '0';
    iVar6 = FUN_800337c4(auStack1160,&local_38,1);
    if (iVar6 == 4) {
      FUN_8003347c(auStack1160);
      break;
    }
    FUN_8003347c(auStack1160);
    uVar12 = uVar12 + 1;
  } while (uVar12 < 10);
  uVar10 = DAT_80025f08;
  if (uVar12 == 10) {
    local_34 = 0x77;
    local_33 = 0x61;
    local_38 = 0x2f;
    local_32 = 0x76;
    local_35 = '.';
    local_31 = 0;
    do {
      cVar4 = (char)(uint)((ulonglong)uVar12 * (ulonglong)uVar10 >> 0x23);
      local_37 = cVar4 + '0';
      local_36 = (char)uVar12 + cVar4 * -10 + '0';
      iVar6 = FUN_800337c4(auStack1160,&local_38,1);
      if (iVar6 == 4) {
        FUN_8003347c(auStack1160);
        break;
      }
      FUN_8003347c(auStack1160);
      uVar12 = uVar12 + 1;
    } while (uVar12 < 100);
  }
  uVar8 = DAT_80025f0c;
  if (uVar12 == 100) {
    local_34 = 0x2e;
    local_38 = 0x2f;
    local_33 = 0x77;
    local_32 = 0x61;
    local_31 = 0x76;
    local_30 = 0;
    do {
      uVar1 = (uint)((ulonglong)uVar12 * (ulonglong)uVar8 >> 0x25);
      local_37 = (char)uVar1 + '0';
      local_36 = (char)(uint)((ulonglong)(uVar12 + uVar1 * -100) * (ulonglong)uVar10 >> 0x23) + '0';
      local_35 = (char)uVar12 + (char)(uint)((ulonglong)uVar12 * (ulonglong)uVar10 >> 0x23) * -10 +
                 '0';
      iVar6 = FUN_800337c4(auStack1160,&local_38,1);
      if (iVar6 == 4) {
        FUN_8003347c(auStack1160);
        break;
      }
      FUN_8003347c(auStack1160);
      uVar12 = uVar12 + 1;
    } while (uVar12 < 1000);
  }
  FUN_8002c7a4();
  uVar11 = DAT_80025f10[-1];
  puVar9 = DAT_80025f10 + 1;
  puVar7 = DAT_80025f10;
  iVar6 = DAT_80025f14;
  do {
    uVar3 = puVar7[-2];
    puVar9[-1] = uVar11;
    uVar11 = puVar7[-3];
    iVar6 = iVar6 + -1;
    puVar9 = puVar9 + -2;
    *puVar9 = uVar3;
    iVar5 = DAT_80025f18;
    puVar7 = puVar7 + -2;
  } while (iVar6 != 0);
  *(undefined2 *)(DAT_80025f18 + 0x20) = *(undefined2 *)(DAT_80025f18 + 0x1e);
  *(short *)(iVar5 + 0x1e) = (short)uVar12;
  FUN_8002c8f4();
  some_sd_card_stuff_3();
  uVar10 = 0;
  do {
    uVar8 = (uint)CONCAT11(*(undefined *)(DAT_80025f1c + uVar10),
                           *(undefined *)(DAT_80025f1c + uVar10 + 1));
    if (uVar8 == 0 || uVar8 == (uVar12 & 0xffff)) {
      FUN_800251bc(uVar12 & 0xffff);
      break;
    }
    uVar10 = uVar10 + 400;
  } while (uVar10 < DAT_80025f20);
  FUN_800261b4();
  FUN_800019fc(DAT_80025f24);
  FUN_800337c4(auStack608,&local_38,7);
  some_sd_card_stuff_4();
  FUN_80034074(auStack608,DAT_80025f24,DAT_80025f28,0);
  FUN_8003347c(auStack608);
  FUN_80010a30();
  *PTR_DAT_80025f04 = uVar2;
  return;
}



void FUN_80025f2c(void)

{
  uint uVar1;
  undefined uVar2;
  undefined2 uVar3;
  char cVar4;
  int iVar5;
  int iVar6;
  undefined2 *puVar7;
  uint uVar8;
  undefined2 *puVar9;
  uint uVar10;
  undefined2 uVar11;
  uint uVar12;
  undefined auStack608 [552];
  undefined local_38;
  char local_37;
  char local_36;
  char local_35;
  undefined local_34;
  undefined local_33;
  undefined local_32;
  undefined local_31;
  undefined local_30;
  
  uVar2 = *PTR_DAT_80026194;
  local_38 = 0x2f;
  local_34 = 0x6d;
  local_36 = '.';
  local_33 = 0x70;
  local_35 = 'b';
  local_32 = 0;
  *PTR_DAT_80026194 = 0;
  FUN_8002c7a4();
  uVar12 = 1;
  do {
    local_37 = (char)uVar12 + '0';
    iVar6 = FUN_800337c4(auStack608,&local_38,1);
    if (iVar6 == 4) {
      FUN_8003347c(auStack608);
      break;
    }
    FUN_8003347c(auStack608);
    uVar12 = uVar12 + 1;
  } while (uVar12 < 10);
  uVar10 = DAT_80026198;
  if (uVar12 == 10) {
    local_34 = 0x62;
    local_33 = 0x6d;
    local_38 = 0x2f;
    local_32 = 0x70;
    local_35 = '.';
    local_31 = 0;
    do {
      cVar4 = (char)(uint)((ulonglong)uVar12 * (ulonglong)uVar10 >> 0x23);
      local_37 = cVar4 + '0';
      local_36 = (char)uVar12 + cVar4 * -10 + '0';
      iVar6 = FUN_800337c4(auStack608,&local_38,1);
      if (iVar6 == 4) {
        FUN_8003347c(auStack608);
        break;
      }
      FUN_8003347c(auStack608);
      uVar12 = uVar12 + 1;
    } while (uVar12 < 100);
  }
  uVar8 = DAT_8002619c;
  if (uVar12 == 100) {
    local_34 = 0x2e;
    local_33 = 0x62;
    local_30 = 0;
    local_32 = 0x6d;
    local_38 = 0x2f;
    local_31 = 0x70;
    do {
      uVar1 = (uint)((ulonglong)uVar12 * (ulonglong)uVar8 >> 0x25);
      local_37 = (char)uVar1 + '0';
      local_36 = (char)(uint)((ulonglong)(uVar12 + uVar1 * -100) * (ulonglong)uVar10 >> 0x23) + '0';
      local_35 = (char)uVar12 + (char)(uint)((ulonglong)uVar12 * (ulonglong)uVar10 >> 0x23) * -10 +
                 '0';
      iVar6 = FUN_800337c4(auStack608,&local_38,1);
      if (iVar6 == 4) {
        FUN_8003347c(auStack608);
        break;
      }
      FUN_8003347c(auStack608);
      uVar12 = uVar12 + 1;
    } while (uVar12 < 1000);
  }
  FUN_8002c7a4();
  uVar11 = DAT_800261a0[-1];
  puVar9 = DAT_800261a0 + 1;
  puVar7 = DAT_800261a0;
  iVar6 = DAT_800261a4;
  do {
    uVar3 = puVar7[-2];
    puVar9[-1] = uVar11;
    uVar11 = puVar7[-3];
    iVar6 = iVar6 + -1;
    puVar9 = puVar9 + -2;
    *puVar9 = uVar3;
    iVar5 = DAT_800261a8;
    puVar7 = puVar7 + -2;
  } while (iVar6 != 0);
  *(undefined2 *)(DAT_800261a8 + 0x20) = *(undefined2 *)(DAT_800261a8 + 0x1e);
  *(short *)(iVar5 + 0x1e) = (short)uVar12;
  FUN_8002c8f4();
  some_sd_card_stuff_3();
  uVar10 = 0;
  do {
    uVar8 = (uint)CONCAT11(*(undefined *)(DAT_800261ac + uVar10),
                           *(undefined *)(DAT_800261ac + uVar10 + 1));
    if (uVar8 == 0 || uVar8 == (uVar12 & 0xffff)) {
      FUN_800251bc(uVar12 & 0xffff);
      break;
    }
    uVar10 = uVar10 + 400;
  } while (uVar10 < DAT_800261b0);
  FUN_800261b4();
  FUN_80002810(&local_38);
  FUN_80010a30();
  *PTR_DAT_80026194 = uVar2;
  return;
}



void FUN_800261b4(void)

{
  undefined *puVar1;
  uint count;
  int iVar2;
  undefined auStack568 [556];
  
  puVar1 = PTR_DAT_800262cc;
  if (*PTR_DAT_800262cc == '\0') {
    iVar2 = FUN_800337c4(auStack568,PTR_s__piclist_sys_800262d8,3);
  }
  else {
    iVar2 = FUN_800337c4(auStack568,PTR_s__wavelist_sys_800262d0,3);
  }
  count = DAT_800262d4;
  if (iVar2 == 4) {
    FUN_8003347c(auStack568);
    if (*puVar1 == '\0') {
      FUN_800337c4(auStack568,PTR_s__piclist_sys_800262d8,7);
      some_sd_card_stuff_4();
    }
    else {
      FUN_800337c4(auStack568,PTR_s__wavelist_sys_800262d0,7);
      some_sd_card_stuff_4();
    }
    some_sd_card_stuff_4();
    memclear(DAT_800262dc,count);
    FUN_800334ac(auStack568,0);
    FUN_80034074(auStack568,DAT_800262dc,count,0);
  }
  FUN_800334ac(auStack568,0);
  FUN_80034074(auStack568,DAT_800262dc,count,0);
  FUN_8003347c(auStack568);
  return;
}



int FUN_800262e0(int param_1,undefined2 *param_2,int param_3)

{
  int *piVar1;
  undefined4 uVar2;
  byte *pbVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  byte *pbStack56;
  undefined4 uStack52;
  undefined4 uStack48;
  undefined4 uStack44;
  
  FUN_800376f8(s_SelectCard____8002660c);
  piVar1 = DAT_8002661c;
  iVar5 = DAT_8002661c[1];
  *param_2 = 7;
  *(undefined4 *)(param_2 + 2) = 5;
  *(int *)(param_2 + 4) = iVar5;
  iVar4 = FUN_80036d3c(param_1,param_2,0);
  iVar5 = DAT_80026624;
  uVar2 = DAT_80026620;
  if (iVar4 != 0) {
    return iVar4;
  }
  iVar4 = DAT_80026624 + 0x1000;
  if (*piVar1 == 1) {
    FUN_800376f8(s_CARD_TYPE_SD_HIGH_80026628);
    iVar6 = piVar1[1];
    *param_2 = 0x37;
    *(undefined4 *)(param_2 + 2) = 5;
    *(int *)(param_2 + 4) = iVar6;
    iVar6 = FUN_80036d3c(param_1,param_2,0);
    pbVar3 = DAT_80026640;
    if (iVar6 != 0) {
      return iVar6;
    }
    uStack48 = 1;
    uStack44 = 8;
    uStack52 = 1;
    pbStack56 = DAT_80026640;
    *param_2 = 0x33;
    *(undefined4 *)(param_2 + 2) = 5;
    *(undefined4 *)(param_2 + 4) = 0;
    iVar6 = FUN_80036d3c(param_1,param_2,&pbStack56);
    if (iVar6 != 0) {
      return iVar6;
    }
    if (((*pbVar3 & 0xf) == 2) && (iVar6 = FUN_80009edc(param_1,param_2), iVar6 == 0)) {
      FUN_800376f8(s_Set_Clock___d_HZ_80026644,uVar2);
      FUN_800355d8(param_1,uVar2);
    }
    if (param_3 != 1) goto LAB_800265a8;
    FUN_800376f8(s_Card_width_4bit_80026658);
    iVar6 = piVar1[1];
    *param_2 = 0x37;
    *(undefined4 *)(param_2 + 2) = 5;
    *(int *)(param_2 + 4) = iVar6;
    iVar6 = FUN_80036d3c(param_1,param_2,0);
    if (iVar6 != 0) {
      return iVar6;
    }
    *param_2 = 6;
    *(undefined4 *)(param_2 + 2) = 5;
    *(undefined4 *)(param_2 + 4) = 2;
    iVar6 = FUN_80036d3c(param_1,param_2,0);
    if (iVar6 != 0) {
      return iVar6;
    }
  }
  else {
    if (*piVar1 != 2) goto LAB_800265a8;
    FUN_800376f8(s_CARD_TYPE_SD_LOW_8002666c);
    FUN_800355d8(param_1,uVar2);
    if (param_3 != 1) goto LAB_800265a8;
    FUN_800376f8(s_Card_width_4bit_80026658);
    iVar6 = piVar1[1];
    *param_2 = 0x37;
    *(undefined4 *)(param_2 + 2) = 5;
    *(int *)(param_2 + 4) = iVar6;
    iVar6 = FUN_80036d3c(param_1,param_2,0);
    if (iVar6 != 0) {
      return iVar6;
    }
    *param_2 = 6;
    *(undefined4 *)(param_2 + 2) = 5;
    *(undefined4 *)(param_2 + 4) = 2;
    iVar6 = FUN_80036d3c(param_1,param_2,0);
    if (iVar6 != 0) {
      return iVar6;
    }
  }
  if ((param_1 != 0) && (iVar5 = iVar4, param_1 != 1)) {
    iVar5 = 0;
  }
  *(undefined4 *)(iVar5 + 0xc) = 1;
LAB_800265a8:
  FUN_800376f8(s_SD_BLOCK_SIZE_512_80026680);
  *param_2 = 0x10;
  *(undefined4 *)(param_2 + 2) = 0xd;
  *(undefined4 *)(param_2 + 4) = 0x200;
  FUN_80036d3c(param_1,param_2,0);
  *param_2 = 7;
  *(undefined4 *)(param_2 + 4) = 0;
  *(undefined4 *)(param_2 + 2) = 0;
  FUN_80036d3c(param_1);
  return 0;
}



void FUN_80026698(uint param_1)

{
  uint *ptr;
  
  fpga_write_cmd('\x1f');
  fpga_write_data((uchar)(param_1 >> 8));
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = param_1 & 0xff | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void FUN_800266bc(void)

{
  return;
}



void FUN_800266c0(void)

{
  return;
}



void set_fpga_trigger_timebase(void)

{
  uint uVar1;
  uint uVar2;
  
  uVar1 = translate_parameter(10,(uint)*(byte *)(DAT_80026720 + 10));
  uVar2 = translate_parameter(0x14,0xed);
  fpga_write_cmd((uchar)uVar2);
  fpga_write_data((uchar)(uVar1 >> 0x18));
  fpga_write_data((uchar)(uVar1 >> 0x10));
  fpga_write_data((uchar)(uVar1 >> 8));
  fpga_write_data((uchar)uVar1);
  *(undefined2 *)PTR_DAT_80026724 = 0;
  return;
}



void FUN_80026728(void)

{
  uint *ptr;
  int iVar1;
  uchar uVar2;
  
  iVar1 = DAT_800267bc;
  *(undefined *)(DAT_800267bc + 3) = 0;
  *(undefined2 *)(iVar1 + 6) = 200;
  *(undefined *)(iVar1 + 0xf) = 0;
  *(undefined2 *)(iVar1 + 0x12) = 200;
  *(undefined *)(iVar1 + 10) = 0x13;
  fpga_write_cmd('3');
  if (*(char *)(iVar1 + 3) == '\x06') {
    uVar2 = '\x05';
  }
  else {
    uVar2 = *(uchar *)(iVar1 + 3);
  }
  fpga_write_data(uVar2);
  fpga_write_cmd('6');
  if (*(char *)(iVar1 + 0xf) == '\x06') {
    uVar2 = '\x05';
  }
  else {
    uVar2 = *(uchar *)(iVar1 + 0xf);
  }
  fpga_write_data(uVar2);
  set_fpga_channel1_offset();
  set_fpga_channel2_offset();
  set_fpga_trigger_timebase();
  fpga_write_cmd('\x17');
  fpga_write_data('\0');
  delay_2(100);
  write_fpga_cmd_0x0E(DAT_800267c0);
  fpga_write_cmd('\x0f');
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = ptr[4] & 0xffffff00 | 1;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void set_fpga_trigger_level(void)

{
  byte bVar1;
  uint *ptr;
  
  calculate_trigger_level();
  fpga_write_cmd('\x17');
  ptr = PE_CFG0;
  bVar1 = *(byte *)(DAT_800267e4 + 0x28);
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = (uint)bVar1 | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



//                          FUNCTION
// called from trigger menu when channel is changed

void set_fpga_trigger_channel(void)

{
  byte bVar1;
  uint *ptr;
  
  fpga_write_cmd('\x15');
  ptr = PE_CFG0;
  bVar1 = *(byte *)(DAT_80026804 + 0x23);
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = (uint)bVar1 | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void set_fpga_trigger_edge(void)

{
  byte bVar1;
  uint *ptr;
  
  fpga_write_cmd('\x16');
  ptr = PE_CFG0;
  bVar1 = *(byte *)(DAT_80026824 + 0x22);
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = (uint)bVar1 | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void set_fpga_trigger_mode(void)

{
  char cVar1;
  uint *ptr;
  
  cVar1 = *(char *)(DAT_80026854 + 0x21);
  fpga_write_cmd('\x1a');
  ptr = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = (uint)(cVar1 != '\0') | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



undefined8 FUN_80026858(undefined param_1,int param_2)

{
  undefined4 *puVar1;
  undefined *puVar2;
  
  puVar1 = DAT_800268ac;
  *DAT_800268ac = DAT_800268a8;
  *(undefined *)(puVar1 + 3) = param_1;
  FUN_8002a004(2,puVar1,0xd);
  puVar2 = DAT_800268b0;
  *DAT_800268b0 = 5;
  if (param_2 == 0) {
    return CONCAT44(5,puVar2);
  }
  *puVar2 = 4;
  return 0x200000001;
}



void FUN_800268b4(undefined4 param_1,undefined param_2,undefined param_3)

{
  int iVar1;
  
  iVar1 = DAT_800268c4;
  *(undefined *)(DAT_800268c4 + 2) = param_2;
  *(undefined *)(iVar1 + 0xc) = param_3;
  return;
}



void save_screen_under_settings_menu(void)

{
  uint uVar1;
  uint uVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  undefined2 *puVar11;
  uint uVar12;
  int iVar13;
  undefined2 *puVar14;
  
  iVar6 = Screen_Frame_Buffer_2;
  iVar5 = Start_Of_Screen_Mem;
  uVar8 = (uint)*(ushort *)(PTR_DAT_800268e8 + 6);
  uVar7 = (uint)*(ushort *)(PTR_DAT_800268e8 + 4);
  uVar10 = uVar8 + 0x160 & 0xfffeffff;
  uVar9 = uVar7 + 0xf4 & 0xfffeffff;
  if (uVar8 < uVar10) {
    uVar12 = uVar9 - uVar7;
    uVar1 = uVar12 * 0x8000 >> 0x10;
    do {
      if (uVar7 < uVar9) {
        iVar13 = uVar7 + uVar8 * 800;
        puVar11 = (undefined2 *)(iVar5 + iVar13 * 2);
        puVar14 = (undefined2 *)(iVar6 + iVar13 * 2);
        uVar2 = uVar1;
        puVar3 = puVar14 + -1;
        puVar4 = puVar11 + -1;
        if ((uVar12 & 1) != 0) {
          *puVar14 = *puVar11;
          puVar3 = puVar14;
          puVar4 = puVar11;
        }
        while (uVar2 != 0) {
          puVar3[1] = puVar4[1];
          puVar3[2] = puVar4[2];
          uVar2 = uVar2 - 1 & 0xffff;
          puVar3 = puVar3 + 2;
          puVar4 = puVar4 + 2;
        }
      }
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < uVar10);
    return;
  }
  return;
}



void FUN_800268ec(void)

{
  uint uVar1;
  uint uVar2;
  undefined2 *puVar3;
  undefined2 *puVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  undefined2 *puVar11;
  uint uVar12;
  int iVar13;
  undefined2 *puVar14;
  
  iVar6 = Start_Of_Screen_Mem;
  iVar5 = Screen_Frame_Buffer_2;
  uVar8 = (uint)*(ushort *)(PTR_DAT_8002690c + 6);
  uVar7 = (uint)*(ushort *)(PTR_DAT_8002690c + 4);
  uVar10 = uVar8 + 0x160 & 0xfffeffff;
  uVar9 = uVar7 + 0xf4 & 0xfffeffff;
  if (uVar8 < uVar10) {
    uVar12 = uVar9 - uVar7;
    uVar1 = uVar12 * 0x8000 >> 0x10;
    do {
      if (uVar7 < uVar9) {
        iVar13 = uVar7 + uVar8 * 800;
        puVar11 = (undefined2 *)(iVar5 + iVar13 * 2);
        puVar14 = (undefined2 *)(iVar6 + iVar13 * 2);
        uVar2 = uVar1;
        puVar3 = puVar14 + -1;
        puVar4 = puVar11 + -1;
        if ((uVar12 & 1) != 0) {
          *puVar14 = *puVar11;
          puVar3 = puVar14;
          puVar4 = puVar11;
        }
        while (uVar2 != 0) {
          puVar3[1] = puVar4[1];
          puVar3[2] = puVar4[2];
          uVar2 = uVar2 - 1 & 0xffff;
          puVar3 = puVar3 + 2;
          puVar4 = puVar4 + 2;
        }
      }
      uVar8 = uVar8 + 1 & 0xfffeffff;
    } while (uVar8 < uVar10);
    return;
  }
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack
// WARNING: Unknown calling convention yet parameter storage is locked

void another_functionality_test(void)

{
  ushort uVar1;
  ushort uVar2;
  undefined2 uVar3;
  bool bVar4;
  bool bVar5;
  undefined *puVar6;
  int iVar7;
  int iVar8;
  short sVar9;
  uint uVar10;
  ushort *puVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  char *pcVar15;
  uint extraout_r1;
  uint uVar16;
  uint uVar17;
  ushort *puVar18;
  int iVar19;
  int iVar20;
  uint uVar21;
  uint uVar22;
  uint uVar23;
  uint uVar24;
  uint unaff_r4;
  int iVar25;
  uint uVar26;
  uint uVar27;
  bool bVar28;
  uint local_54;
  uint local_50;
  uint local_4c;
  uint local_48;
  
  local_50 = 0;
  local_54 = 0;
  local_4c = 0;
  local_48 = 0;
  bVar4 = false;
  bVar5 = false;
  uVar10 = is_hardware_check_needed();
  if (uVar10 == 2) {
    return;
  }
  set_translated_brightness();
  set_screen_to_global_pointer();
  set_display_fg_color(0xffffff);
  select_font(PTR_FONT_3_80026ca0);
  sVar9 = set_font_paint_mode(2);
  FUN_800186b0((int)sVar9);
  display_text(s_Please_insert_test_clip_and_pres_80026ca4,0xf7,100);
  display_fill_rect(0x168,0x140,0x1b8,400);
  set_display_fg_color(0);
  select_font(PTR_FONT_6_80026cd8);
  display_text(&DAT_80026ce0,0x17c,(ushort)DAT_80026cdc);
  puVar6 = PTR_DAT_80026ce4;
  do {
    do {
      tp_i2c_read_status();
    } while (0x4e < *(ushort *)(puVar6 + 2) - 0x169);
  } while (((*(ushort *)(puVar6 + 4) < 0x141) || (399 < *(ushort *)(puVar6 + 4))) ||
          (*puVar6 == '\0'));
  do {
    tp_i2c_read_status();
    set_display_fg_color(0xdd00);
    display_fill_rect(0x168,0x140,0x1b8,400);
  } while (*puVar6 != '\0');
  FUN_800186b0();
  set_display_fg_color(0xffffff);
  select_font(PTR_FONT_3_80026ca0);
  set_font_paint_mode(2);
  iVar7 = DAT_80026ce8;
  *(undefined *)(DAT_80026ce8 + 1) = 0;
  *(undefined2 *)(iVar7 + 6) = 0x96;
  *(undefined2 *)(iVar7 + 0x12) = 0x96;
  *(undefined *)(iVar7 + 10) = 0x11;
  set_fpga_channel1_coupling();
  set_fpga_channel1_offset();
  set_fpga_channel2_offset();
  set_fpga_trigger_timebase();
  iVar7 = DAT_80026cec;
  uVar10 = 0;
  do {
    iVar8 = DAT_80026ce8;
    *(char *)(DAT_80026ce8 + 3) = (char)uVar10;
    set_fpga_channel1_voltperdiv();
    *(char *)(iVar8 + 0xf) = (char)uVar10;
    set_fpga_channel2_voltperdiv();
    delay_2(100);
    process_trace_data();
    iVar8 = DAT_80026cf0;
    iVar19 = 0;
    iVar25 = 0;
    puVar11 = (ushort *)(DAT_80026cf0 + 200);
    uVar16 = 0;
    uVar26 = 0;
    iVar20 = 900;
    do {
      uVar27 = (uint)*puVar11;
      if (uVar27 < 0x9c) {
        iVar25 = iVar25 + uVar27;
        uVar26 = uVar26 + 1 & 0xfffeffff;
      }
      else {
        iVar19 = iVar19 + uVar27;
        uVar16 = uVar16 + 1 & 0xfffeffff;
      }
      iVar20 = iVar20 + -1;
      puVar11 = puVar11 + 1;
    } while (iVar20 != 0);
    uVar27 = divide(iVar19,uVar16);
    uVar26 = divide(iVar25,uVar26);
    uVar12 = 100;
    uVar16 = (uVar27 & 0xffff) - (uVar26 & 0xffff) & 0xffff;
    do {
      puVar11 = (ushort *)(iVar8 + uVar12 * 2);
      if ((*puVar11 < 0x9b) && (uVar14 = uVar12, 0x9b < puVar11[2])) break;
      uVar12 = uVar12 + 1 & 0xfffeffff;
      uVar14 = unaff_r4;
    } while (uVar12 < 1000);
    uVar17 = uVar14 + 5 & 0xfffeffff;
    uVar12 = 0;
    if (uVar17 < uVar14 + 0x19) {
      puVar18 = (ushort *)(iVar8 + uVar17 * 2);
      puVar11 = puVar18 + -1;
      if ((uVar14 - uVar17 & 1) == 0) {
        uVar12 = (uint)*puVar18;
        puVar11 = puVar18;
      }
      uVar17 = (uVar14 - uVar17) * 0x8000 + 0xc8000 >> 0x10;
      uVar21 = 0;
      while (uVar17 != 0) {
        puVar18 = puVar11 + 1;
        puVar11 = puVar11 + 2;
        uVar17 = uVar17 - 1 & 0xffff;
        uVar12 = uVar12 + *puVar18 & 0xfffeffff;
        uVar21 = uVar21 + *puVar11 & 0xfffeffff;
      }
      uVar12 = uVar12 + uVar21 & 0xfffeffff;
    }
    uVar21 = uVar14 + 0xd2 & 0xfffeffff;
    uVar17 = 0;
    uVar12 = uVar12 * DAT_80026cf4 >> 0x14;
    if (uVar21 < uVar14 + 0xe6) {
      puVar18 = (ushort *)(iVar8 + uVar21 * 2);
      puVar11 = puVar18 + -1;
      if (((uVar14 - uVar21 ^ 0xe5) & 1) == 0) {
        uVar17 = (uint)*puVar18;
        puVar11 = puVar18;
      }
      uVar21 = (uVar14 - uVar21) * 0x8000 + 0x730000 >> 0x10;
      uVar22 = 0;
      while (uVar21 != 0) {
        puVar18 = puVar11 + 1;
        puVar11 = puVar11 + 2;
        uVar21 = uVar21 - 1 & 0xffff;
        uVar17 = uVar17 + *puVar18 & 0xfffeffff;
        uVar22 = uVar22 + *puVar11 & 0xfffeffff;
      }
      uVar17 = uVar17 + uVar22 & 0xfffeffff;
    }
    iVar19 = 900;
    puVar11 = (ushort *)(iVar7 + 200);
    uVar17 = DAT_80026cf4 * uVar17 >> 0x14;
    if (uVar12 < uVar17) {
      uVar12 = uVar17 - uVar12;
    }
    else {
      uVar12 = uVar12 - uVar17;
    }
    uVar12 = uVar12 & 0xffff;
    iVar20 = 0;
    iVar25 = 0;
    uVar17 = 0;
    uVar21 = 0;
    do {
      uVar22 = (uint)*puVar11;
      if (uVar22 < 0x9c) {
        iVar25 = iVar25 + uVar22;
        uVar21 = uVar21 + 1 & 0xfffeffff;
      }
      else {
        iVar20 = iVar20 + uVar22;
        uVar17 = uVar17 + 1 & 0xfffeffff;
      }
      iVar19 = iVar19 + -1;
      puVar11 = puVar11 + 1;
    } while (iVar19 != 0);
    uVar22 = divide(iVar20,uVar17);
    uVar21 = divide(iVar25,uVar21);
    iVar19 = DAT_80026ce8;
    uVar13 = 100;
    uVar17 = (uVar22 & 0xffff) - (uVar21 & 0xffff) & 0xffff;
    do {
      puVar11 = (ushort *)(iVar7 + uVar13 * 2);
      if ((*puVar11 < 0x9b) && (unaff_r4 = uVar13, 0x9b < puVar11[2])) break;
      uVar13 = uVar13 + 1 & 0xfffeffff;
      unaff_r4 = uVar14;
    } while (uVar13 < 1000);
    uVar13 = unaff_r4 + 5 & 0xfffeffff;
    uVar14 = 0;
    if (uVar13 < unaff_r4 + 0x19) {
      puVar18 = (ushort *)(iVar7 + uVar13 * 2);
      puVar11 = puVar18 + -1;
      if ((unaff_r4 - uVar13 & 1) == 0) {
        uVar14 = (uint)*puVar18;
        puVar11 = puVar18;
      }
      uVar13 = (unaff_r4 - uVar13) * 0x8000 + 0xc8000 >> 0x10;
      uVar23 = 0;
      while (uVar13 != 0) {
        puVar18 = puVar11 + 1;
        puVar11 = puVar11 + 2;
        uVar13 = uVar13 - 1 & 0xffff;
        uVar14 = uVar14 + *puVar18 & 0xfffeffff;
        uVar23 = uVar23 + *puVar11 & 0xfffeffff;
      }
      uVar14 = uVar14 + uVar23 & 0xfffeffff;
    }
    uVar23 = unaff_r4 + 0xd2 & 0xfffeffff;
    uVar13 = 0;
    uVar14 = uVar14 * DAT_80026cf4 >> 0x14;
    if (uVar23 < unaff_r4 + 0xe6) {
      puVar18 = (ushort *)(iVar7 + uVar23 * 2);
      puVar11 = puVar18 + -1;
      if (((unaff_r4 - uVar23 ^ 0xe5) & 1) == 0) {
        uVar13 = (uint)*puVar18;
        puVar11 = puVar18;
      }
      uVar23 = (unaff_r4 - uVar23) * 0x8000 + 0x730000 >> 0x10;
      uVar24 = 0;
      while (uVar23 != 0) {
        puVar18 = puVar11 + 1;
        puVar11 = puVar11 + 2;
        uVar23 = uVar23 - 1 & 0xffff;
        uVar13 = uVar13 + *puVar18 & 0xfffeffff;
        uVar24 = uVar24 + *puVar11 & 0xfffeffff;
      }
      uVar13 = uVar13 + uVar24 & 0xfffeffff;
    }
    uVar13 = DAT_80026cf4 * uVar13 >> 0x14;
    if (uVar14 < uVar13) {
      uVar14 = uVar13 - uVar14;
    }
    else {
      uVar14 = uVar14 - uVar13;
    }
    uVar14 = uVar14 & 0xffff;
    if (uVar10 == 4) {
      uVar3 = (undefined2)DAT_800275b0;
      *(undefined2 *)(DAT_80026ce8 + 6) = uVar3;
      *(undefined2 *)(iVar19 + 0x12) = uVar3;
      set_fpga_channel1_offset();
      set_fpga_channel2_offset();
      delay_2(100);
      process_trace_data();
      uVar26 = 100;
      do {
        puVar11 = (ushort *)(iVar8 + uVar26 * 2);
        uVar1 = *puVar11;
        uVar2 = puVar11[2];
        bVar28 = 0x15d < uVar1;
        if (0x15e < uVar1) {
          bVar28 = uVar2 < 0x15f;
          uVar1 = uVar2;
        }
        uVar27 = uVar26;
      } while ((!bVar28 || uVar1 == 0x15e) &&
              (uVar26 = uVar26 + 1 & 0xfffeffff, uVar27 = unaff_r4, uVar26 < 1000));
      uVar12 = uVar27 + 5 & 0xfffeffff;
      uVar26 = 0;
      if (uVar12 < uVar27 + 0x19) {
        puVar18 = (ushort *)(iVar8 + uVar12 * 2);
        puVar11 = puVar18 + -1;
        if ((uVar27 - uVar12 & 1) == 0) {
          uVar26 = (uint)*puVar18;
          puVar11 = puVar18;
        }
        uVar12 = (uVar27 - uVar12) * 0x8000 + 0xc8000 >> 0x10;
        uVar14 = 0;
        while (uVar12 != 0) {
          puVar18 = puVar11 + 1;
          puVar11 = puVar11 + 2;
          uVar12 = uVar12 - 1 & 0xffff;
          uVar26 = uVar26 + *puVar18 & 0xfffeffff;
          uVar14 = uVar14 + *puVar11 & 0xfffeffff;
        }
        uVar26 = uVar26 + uVar14 & 0xfffeffff;
      }
      uVar14 = uVar27 + 0xd2 & 0xfffeffff;
      uVar12 = 0;
      uVar26 = uVar26 * DAT_80026cf4 >> 0x14;
      if (uVar14 < uVar27 + 0xe6) {
        puVar18 = (ushort *)(iVar8 + uVar14 * 2);
        puVar11 = puVar18 + -1;
        if (((uVar27 - uVar14 ^ 0xe5) & 1) == 0) {
          uVar12 = (uint)*puVar18;
          puVar11 = puVar18;
        }
        uVar14 = (uVar27 - uVar14) * 0x8000 + 0x730000 >> 0x10;
        uVar21 = 0;
        while (uVar14 != 0) {
          puVar18 = puVar11 + 1;
          puVar11 = puVar11 + 2;
          uVar14 = uVar14 - 1 & 0xffff;
          uVar12 = uVar12 + *puVar18 & 0xfffeffff;
          uVar21 = uVar21 + *puVar11 & 0xfffeffff;
        }
        uVar12 = uVar12 + uVar21 & 0xfffeffff;
      }
      uVar12 = DAT_80026cf4 * uVar12 >> 0x14;
      if (uVar26 < uVar12) {
        uVar26 = uVar12 - uVar26;
      }
      else {
        uVar26 = uVar26 - uVar12;
      }
      uVar12 = 100;
      do {
        puVar11 = (ushort *)(iVar7 + uVar12 * 2);
        uVar1 = *puVar11;
        uVar2 = puVar11[2];
        bVar28 = 0x15d < uVar1;
        if (0x15e < uVar1) {
          bVar28 = uVar2 < 0x15f;
          uVar1 = uVar2;
        }
        unaff_r4 = uVar12;
      } while ((!bVar28 || uVar1 == 0x15e) &&
              (uVar12 = uVar12 + 1 & 0xfffeffff, unaff_r4 = uVar27, uVar12 < 1000));
      uVar12 = unaff_r4 + 5 & 0xfffeffff;
      uVar27 = 0;
      if (uVar12 < unaff_r4 + 0x19) {
        puVar18 = (ushort *)(iVar7 + uVar12 * 2);
        puVar11 = puVar18 + -1;
        if ((unaff_r4 - uVar12 & 1) == 0) {
          uVar27 = (uint)*puVar18;
          puVar11 = puVar18;
        }
        uVar12 = (unaff_r4 - uVar12) * 0x8000 + 0xc8000 >> 0x10;
        uVar14 = 0;
        while (uVar12 != 0) {
          puVar18 = puVar11 + 1;
          puVar11 = puVar11 + 2;
          uVar12 = uVar12 - 1 & 0xffff;
          uVar27 = uVar27 + *puVar18 & 0xfffeffff;
          uVar14 = uVar14 + *puVar11 & 0xfffeffff;
        }
        uVar27 = uVar27 + uVar14 & 0xfffeffff;
      }
      uVar14 = unaff_r4 + 0xd2 & 0xfffeffff;
      uVar12 = 0;
      uVar27 = uVar27 * DAT_80026cf4 >> 0x14;
      if (uVar14 < unaff_r4 + 0xe6) {
        puVar18 = (ushort *)(iVar7 + uVar14 * 2);
        puVar11 = puVar18 + -1;
        if (((unaff_r4 - uVar14 ^ 0xe5) & 1) == 0) {
          uVar12 = (uint)*puVar18;
          puVar11 = puVar18;
        }
        uVar14 = (unaff_r4 - uVar14) * 0x8000 + 0x730000 >> 0x10;
        uVar21 = 0;
        while (uVar14 != 0) {
          puVar18 = puVar11 + 1;
          puVar11 = puVar11 + 2;
          uVar14 = uVar14 - 1 & 0xffff;
          uVar12 = uVar12 + *puVar18 & 0xfffeffff;
          uVar21 = uVar21 + *puVar11 & 0xfffeffff;
        }
        uVar12 = uVar12 + uVar21 & 0xfffeffff;
      }
      uVar12 = DAT_80026cf4 * uVar12 >> 0x14;
      if (uVar27 < uVar12) {
        uVar27 = uVar12 - uVar27;
      }
      else {
        uVar27 = uVar27 - uVar12;
      }
      if (uVar16 == DAT_800275b4) {
        local_4c = local_4c | 0x10;
      }
      if (uVar17 == DAT_800275b4) {
        local_48 = local_48 | 0x10;
      }
      if ((uVar26 & 0xffff) < 0x65) {
        local_50 = local_50 | 0x10;
      }
      if ((uVar27 & 0xffff) < 0x65) {
        local_54 = local_54 | 0x10;
      }
    }
    else {
      if (uVar10 == 0) {
        if (uVar16 - 0x1b < 0xb) {
          local_4c = local_4c | 1;
        }
        if (uVar17 - 0x1b < 0xb) {
          local_48 = local_48 | 1;
        }
        if (uVar12 < 7) {
          local_50 = local_50 | 1;
        }
        if (uVar14 < 7) {
          local_54 = local_54 | 1;
        }
      }
      else {
        if (uVar10 == 1) {
          if (uVar16 - 0x3b < 0xd) {
            local_4c = local_4c | 2;
          }
          if (uVar17 - 0x3b < 0xd) {
            local_48 = local_48 | 2;
          }
          if (uVar12 < 0xb) {
            local_50 = local_50 | 2;
          }
          if (uVar14 < 0xb) {
            local_54 = local_54 | 2;
          }
        }
        else {
          if (uVar10 == 2) {
            if (uVar16 - 0x8e < 0x21) {
              local_4c = local_4c | 4;
            }
            if (uVar17 - 0x8e < 0x21) {
              local_48 = local_48 | 4;
            }
            if (uVar12 < 0x10) {
              local_50 = local_50 | 4;
            }
            if (uVar14 < 0x10) {
              local_54 = local_54 | 4;
            }
            if (0xa0 < (uVar27 & 0xffff) + (uVar26 & 0xffff) >> 1) {
              bVar4 = true;
            }
            if (0xa0 < (uVar21 & 0xffff) + (uVar22 & 0xffff) >> 1) {
              bVar5 = true;
            }
          }
          else {
            if (uVar10 == 3) {
              if (uVar16 - 0x11e < 0x41) {
                local_4c = local_4c | 8;
              }
              if (uVar17 - 0x11e < 0x41) {
                local_48 = local_48 | 8;
              }
              if (uVar12 < 0x1a) {
                local_50 = local_50 | 8;
              }
              if (uVar14 < 0x1a) {
                local_54 = local_54 | 8;
              }
            }
          }
        }
      }
    }
    uVar10 = uVar10 + 1 & 0xfffeffff;
    if (4 < uVar10) {
      if (local_4c == 0x1f) {
        set_display_fg_color(0xffffff);
        pcVar15 = s_CH1_amplitude_OK_80027628;
      }
      else {
        local_4c = 0;
        set_display_fg_color(0xff0000);
        pcVar15 = s_CH1_relay_or_resistance_ERROR_800275b8;
      }
      display_text(pcVar15,0x1e,100);
      if (local_50 == 0x1f) {
        set_display_fg_color(0xffffff);
        pcVar15 = s_CH1_phase_OK_8002763c;
      }
      else {
        local_50 = 0;
        set_display_fg_color(0xff0000);
        pcVar15 = s_CH1_capacitance_ERROR_800275d8;
      }
      display_text(pcVar15,0x1e,0x78);
      if (local_48 == 0x1f) {
        set_display_fg_color(0xffffff);
        pcVar15 = s_CH2_amplitude_OK_8002764c;
      }
      else {
        local_48 = 0;
        set_display_fg_color(0xff0000);
        pcVar15 = s_CH2_relay_or_resistance_ERROR_800275f0;
      }
      display_text(pcVar15,0x1e,0x8c);
      if (local_54 == 0x1f) {
        set_display_fg_color(0xffffff);
        pcVar15 = s_CH2_phase_OK_80027660;
      }
      else {
        local_54 = 0;
        set_display_fg_color(0xff0000);
        pcVar15 = s_CH2_capacitance_ERROR_80027610;
      }
      display_text(pcVar15,0x1e,0xa0);
      uVar10 = local_4c;
      if (local_4c != 0) {
        uVar10 = local_50;
      }
      if ((local_4c != 0 && uVar10 != 0) && (!bVar4)) {
        set_display_fg_color(0xff0000);
        display_text(s_KAQY214S_1_ERROR_80027670,0x1e,0xb4);
      }
      uVar10 = local_48;
      if (local_48 != 0) {
        uVar10 = local_54;
      }
      if ((local_48 != 0 && uVar10 != 0) && (!bVar5)) {
        set_display_fg_color(0xff0000);
        display_text(s_KAQY214S_2_ERROR_80027684,0x1e,200);
      }
      bVar28 = local_4c != 0;
      if (bVar28) {
        local_4c = local_50;
      }
      if (bVar28 && local_4c != 0) {
        bVar28 = local_48 != 0;
        if (bVar28) {
          local_48 = local_54;
        }
        if (bVar28 && local_48 != 0) {
          bVar28 = bVar4;
          if (bVar4) {
            bVar28 = bVar5;
          }
          if (bVar4 && bVar28) {
            set_display_fg_color(0xffffff);
            display_text(s_Channel_Checked_Successful___80027698,0x1e,200);
            iVar7 = DAT_80026ce8;
            *(undefined *)(DAT_80026ce8 + 3) = 0;
            *(undefined2 *)(iVar7 + 6) = 300;
            *(undefined *)(iVar7 + 0xf) = 0;
            *(undefined2 *)(iVar7 + 0x12) = 100;
            *(undefined *)(iVar7 + 10) = 0x13;
            set_fpga_channel1_offset();
            set_fpga_channel2_offset();
            set_fpga_channel1_voltperdiv();
            set_fpga_channel2_voltperdiv();
            set_fpga_trigger_timebase();
            signal_sys_ok();
            FUN_80025bf8(2);
            uVar10 = get_timer_ticks();
            do {
              uVar16 = get_timer_ticks();
            } while (uVar16 - uVar10 < extraout_r1);
            return;
          }
        }
      }
      do {
                    // WARNING: Do nothing block with infinite loop
      } while( true );
    }
  } while( true );
}



void restore_config_data(uint *address)

{
  undefined2 uVar1;
  undefined *puVar2;
  int iVar3;
  int iVar4;
  undefined2 *puVar5;
  uint *puVar6;
  int iVar7;
  undefined *puVar8;
  
  puVar5 = DAT_80027a1c;
  iVar4 = DAT_80027a18;
  iVar3 = DAT_80027a14;
  puVar2 = DAT_80027a10;
  *DAT_80027a10 = *(undefined *)address;
  puVar6 = address + 0x53;
  puVar8 = (undefined *)(iVar4 + -1);
  iVar7 = 0xc;
  puVar2[3] = *(undefined *)((int)address + 2);
  puVar2[4] = *(undefined *)(address + 1);
  puVar2[1] = *(undefined *)((int)address + 6);
  puVar2[2] = *(undefined *)(address + 2);
  puVar2[0xc] = *(undefined *)((int)address + 10);
  puVar2[0xf] = *(undefined *)(address + 3);
  puVar2[0x10] = *(undefined *)((int)address + 0xe);
  puVar2[0xd] = *(undefined *)(address + 4);
  puVar2[0xe] = *(undefined *)((int)address + 0x12);
  puVar2[10] = *(undefined *)(address + 5);
  puVar2[0x16] = *(undefined *)((int)address + 0x16);
  puVar2[0x21] = *(undefined *)(address + 6);
  puVar2[0x22] = *(undefined *)((int)address + 0x1a);
  puVar2[0x23] = *(undefined *)(address + 7);
  puVar2[0x42] = *(undefined *)((int)address + 0x1e);
  *(undefined2 *)(puVar2 + 0x24) = *(undefined2 *)(address + 0x14);
  *(undefined2 *)(puVar2 + 0x26) = *(undefined2 *)((int)address + 0x52);
  *(undefined2 *)(puVar2 + 6) = *(undefined2 *)(address + 0x15);
  *(undefined2 *)(puVar2 + 0x12) = *(undefined2 *)((int)address + 0x56);
  *(undefined *)(iVar3 + 2) = *(undefined *)(address + 0x1e);
  *(undefined *)(iVar3 + 3) = *(undefined *)((int)address + 0x7a);
  *(undefined *)(iVar3 + 4) = *(undefined *)(address + 0x1f);
  *(undefined *)(iVar3 + 7) = *(undefined *)((int)address + 0x7e);
  *(undefined *)(iVar4 + 0x100) = *(undefined *)(address + 0x28);
  *(undefined *)(iVar4 + 0x112) = *(undefined *)((int)address + 0xa2);
  *(undefined *)(iVar4 + 0x122) = *(undefined *)(address + 0x29);
  *(undefined *)(iVar4 + 0x132) = *(undefined *)((int)address + 0xa6);
  *(undefined *)(iVar4 + 0x142) = *(undefined *)(address + 0x2a);
  *(undefined *)(iVar4 + 0x152) = *(undefined *)((int)address + 0xaa);
  *(undefined *)(iVar4 + 0x162) = *(undefined *)(address + 0x2b);
  *(undefined *)(iVar4 + 0x172) = *(undefined *)((int)address + 0xae);
  *(undefined *)(iVar4 + 0x182) = *(undefined *)(address + 0x2c);
  *(undefined *)(iVar4 + 0x192) = *(undefined *)((int)address + 0xb2);
  *(undefined *)(iVar4 + 0x1a2) = *(undefined *)(address + 0x2d);
  *(undefined *)(iVar4 + 0x1b2) = *(undefined *)((int)address + 0xb6);
  *(undefined *)(iVar4 + 0x1c2) = *(undefined *)(address + 0x2e);
  *(undefined *)(iVar4 + 0x1d2) = *(undefined *)((int)address + 0xba);
  *(undefined *)(iVar4 + 0x1e2) = *(undefined *)(address + 0x2f);
  *(undefined *)(iVar4 + 0x1f2) = *(undefined *)((int)address + 0xbe);
  *(undefined *)(iVar4 + 0x202) = *(undefined *)(address + 0x30);
  *(undefined *)(iVar4 + 0x212) = *(undefined *)((int)address + 0xc2);
  *(undefined *)(iVar4 + 0x232) = *(undefined *)(address + 0x31);
  *(undefined *)(iVar4 + 0x242) = *(undefined *)((int)address + 0xc6);
  *(undefined *)(iVar4 + 0x252) = *(undefined *)(address + 0x32);
  *(undefined *)(iVar4 + 0x262) = *(undefined *)((int)address + 0xca);
  *(undefined *)(iVar4 + 0x272) = *(undefined *)(address + 0x33);
  *(undefined *)(iVar4 + 0x282) = *(undefined *)((int)address + 0xce);
  *puVar5 = *(undefined2 *)(address + 0x3c);
  puVar5[1] = *(undefined2 *)((int)address + 0xf2);
  puVar5[2] = *(undefined2 *)(address + 0x3d);
  puVar5[3] = *(undefined2 *)((int)address + 0xf6);
  puVar5[4] = *(undefined2 *)(address + 0x3e);
  puVar5[5] = *(undefined2 *)((int)address + 0xfa);
  puVar5[6] = *(undefined2 *)(address + 0x3f);
  puVar5[7] = *(undefined2 *)((int)address + 0xfe);
  puVar5[8] = *(undefined2 *)(address + 0x40);
  puVar5[9] = *(undefined2 *)((int)address + 0x102);
  puVar5[10] = *(undefined2 *)(address + 0x41);
  puVar5[0xb] = *(undefined2 *)((int)address + 0x106);
  puVar5[0xc] = *(undefined2 *)(address + 0x42);
  puVar5[0xd] = *(undefined2 *)((int)address + 0x10a);
  puVar5[0xe] = *(undefined2 *)(address + 0x43);
  puVar5[0xf] = *(undefined2 *)((int)address + 0x10e);
  puVar5[0x10] = *(undefined2 *)(address + 0x44);
  puVar5[0x11] = *(undefined2 *)((int)address + 0x112);
  *(undefined *)(puVar5 + 0x12) = *(undefined *)(address + 0x45);
  *(undefined *)((int)puVar5 + 0x25) = *(undefined *)((int)address + 0x116);
  *(undefined *)(puVar5 + 0x13) = *(undefined *)(address + 0x46);
  *(undefined *)((int)puVar5 + 0x27) = *(undefined *)((int)address + 0x11a);
  *(undefined *)(puVar5 + 0x14) = *(undefined *)(address + 0x47);
  *(undefined *)((int)puVar5 + 0x29) = *(undefined *)((int)address + 0x11e);
  puVar5[0x15] = *(undefined2 *)(address + 0x48);
  puVar5[0x16] = *(undefined2 *)((int)address + 0x122);
  puVar5[0x17] = *(undefined2 *)(address + 0x49);
  puVar5[0x18] = *(undefined2 *)((int)address + 0x126);
  puVar5[0x19] = *(undefined2 *)(address + 0x4a);
  puVar5[0x1a] = *(undefined2 *)((int)address + 0x12a);
  *(undefined *)(puVar5 + 0x1b) = *(undefined *)(address + 0x4b);
  *(undefined *)((int)puVar5 + 0x37) = *(undefined *)((int)address + 0x12e);
  *(undefined *)(puVar5 + 0x1c) = *(undefined *)(address + 0x4c);
  *(undefined *)((int)puVar5 + 0x39) = *(undefined *)((int)address + 0x132);
  *(undefined *)(puVar5 + 0x1d) = *(undefined *)(address + 0x4d);
  *(undefined *)((int)puVar5 + 0x3b) = *(undefined *)((int)address + 0x136);
  puVar5[0x1e] = *(undefined2 *)(address + 0x4e);
  puVar5[0x1f] = *(undefined2 *)((int)address + 0x13a);
  puVar5[0x20] = *(undefined2 *)(address + 0x4f);
  puVar5[0x21] = *(undefined2 *)((int)address + 0x13e);
  puVar5[0x22] = *(undefined2 *)(address + 0x50);
  uVar1 = *(undefined2 *)((int)address + 0x142);
  puVar5[0x23] = uVar1;
  *(char *)(iVar4 + 0x292) = (char)uVar1;
  *(undefined2 *)(iVar4 + 0x294) = *(undefined2 *)(address + 0x51);
  *(undefined2 *)(iVar4 + 0x296) = *(undefined2 *)((int)address + 0x146);
  *(undefined *)(iVar4 + 0x29a) = *(undefined *)(address + 0x52);
  *(undefined2 *)(iVar4 + 0x29c) = *(undefined2 *)((int)address + 0x14a);
  *(undefined2 *)(iVar4 + 0x29e) = *(undefined2 *)(address + 0x53);
  do {
    iVar7 = iVar7 + -1;
    puVar8[1] = *(undefined *)((int)puVar6 + 2);
    puVar6 = puVar6 + 1;
    puVar8 = puVar8 + 2;
    *puVar8 = *(undefined *)puVar6;
  } while (iVar7 != 0);
  *(undefined2 *)(puVar2 + 0x44) = *(undefined2 *)(address + 100);
  return;
}



void save_config_data(uint *address)

{
  byte *pbVar1;
  int iVar2;
  int iVar3;
  undefined2 *puVar4;
  uint *puVar5;
  byte *pbVar6;
  int iVar7;
  
  puVar4 = DAT_80027d84;
  iVar3 = DAT_80027d80;
  iVar2 = DAT_80027d7c;
  pbVar1 = DAT_80027d78;
  *(ushort *)address = (ushort)*DAT_80027d78;
  puVar5 = address + 0x53;
  pbVar6 = (byte *)(iVar3 + -1);
  iVar7 = 0xc;
  *(ushort *)((int)address + 2) = (ushort)pbVar1[3];
  *(ushort *)(address + 1) = (ushort)pbVar1[4];
  *(ushort *)((int)address + 6) = (ushort)pbVar1[1];
  *(ushort *)(address + 2) = (ushort)pbVar1[2];
  *(ushort *)((int)address + 10) = (ushort)pbVar1[0xc];
  *(ushort *)(address + 3) = (ushort)pbVar1[0xf];
  *(ushort *)((int)address + 0xe) = (ushort)pbVar1[0x10];
  *(ushort *)(address + 4) = (ushort)pbVar1[0xd];
  *(ushort *)((int)address + 0x12) = (ushort)pbVar1[0xe];
  *(ushort *)(address + 5) = (ushort)pbVar1[10];
  *(ushort *)((int)address + 0x16) = (ushort)pbVar1[0x16];
  *(ushort *)(address + 6) = (ushort)pbVar1[0x21];
  *(ushort *)((int)address + 0x1a) = (ushort)pbVar1[0x22];
  *(ushort *)(address + 7) = (ushort)pbVar1[0x23];
  *(ushort *)((int)address + 0x1e) = (ushort)pbVar1[0x42];
  *(undefined2 *)(address + 0x14) = *(undefined2 *)(pbVar1 + 0x24);
  *(undefined2 *)((int)address + 0x52) = *(undefined2 *)(pbVar1 + 0x26);
  *(undefined2 *)(address + 0x15) = *(undefined2 *)(pbVar1 + 6);
  *(undefined2 *)((int)address + 0x56) = *(undefined2 *)(pbVar1 + 0x12);
  *(ushort *)(address + 0x1e) = (ushort)*(byte *)(iVar2 + 2);
  *(ushort *)((int)address + 0x7a) = (ushort)*(byte *)(iVar2 + 3);
  *(ushort *)(address + 0x1f) = (ushort)*(byte *)(iVar2 + 4);
  *(ushort *)((int)address + 0x7e) = (ushort)*(byte *)(iVar2 + 7);
  *(ushort *)(address + 0x28) = (ushort)*(byte *)(iVar3 + 0x100);
  *(ushort *)((int)address + 0xa2) = (ushort)*(byte *)(iVar3 + 0x112);
  *(ushort *)(address + 0x29) = (ushort)*(byte *)(iVar3 + 0x122);
  *(ushort *)((int)address + 0xa6) = (ushort)*(byte *)(iVar3 + 0x132);
  *(ushort *)(address + 0x2a) = (ushort)*(byte *)(iVar3 + 0x142);
  *(ushort *)((int)address + 0xaa) = (ushort)*(byte *)(iVar3 + 0x152);
  *(ushort *)(address + 0x2b) = (ushort)*(byte *)(iVar3 + 0x162);
  *(ushort *)((int)address + 0xae) = (ushort)*(byte *)(iVar3 + 0x172);
  *(ushort *)(address + 0x2c) = (ushort)*(byte *)(iVar3 + 0x182);
  *(ushort *)((int)address + 0xb2) = (ushort)*(byte *)(iVar3 + 0x192);
  *(ushort *)(address + 0x2d) = (ushort)*(byte *)(iVar3 + 0x1a2);
  *(ushort *)((int)address + 0xb6) = (ushort)*(byte *)(iVar3 + 0x1b2);
  *(ushort *)(address + 0x2e) = (ushort)*(byte *)(iVar3 + 0x1c2);
  *(ushort *)((int)address + 0xba) = (ushort)*(byte *)(iVar3 + 0x1d2);
  *(ushort *)(address + 0x2f) = (ushort)*(byte *)(iVar3 + 0x1e2);
  *(ushort *)((int)address + 0xbe) = (ushort)*(byte *)(iVar3 + 0x1f2);
  *(ushort *)(address + 0x30) = (ushort)*(byte *)(iVar3 + 0x202);
  *(ushort *)((int)address + 0xc2) = (ushort)*(byte *)(iVar3 + 0x212);
  *(ushort *)(address + 0x31) = (ushort)*(byte *)(iVar3 + 0x232);
  *(ushort *)((int)address + 0xc6) = (ushort)*(byte *)(iVar3 + 0x242);
  *(ushort *)(address + 0x32) = (ushort)*(byte *)(iVar3 + 0x252);
  *(ushort *)((int)address + 0xca) = (ushort)*(byte *)(iVar3 + 0x262);
  *(ushort *)(address + 0x33) = (ushort)*(byte *)(iVar3 + 0x272);
  *(ushort *)((int)address + 0xce) = (ushort)*(byte *)(iVar3 + 0x282);
  *(undefined2 *)(address + 0x3c) = *puVar4;
  *(undefined2 *)((int)address + 0xf2) = puVar4[1];
  *(undefined2 *)(address + 0x3d) = puVar4[2];
  *(undefined2 *)((int)address + 0xf6) = puVar4[3];
  *(undefined2 *)(address + 0x3e) = puVar4[4];
  *(undefined2 *)((int)address + 0xfa) = puVar4[5];
  *(undefined2 *)(address + 0x3f) = puVar4[6];
  *(undefined2 *)((int)address + 0xfe) = puVar4[7];
  *(undefined2 *)(address + 0x40) = puVar4[8];
  *(undefined2 *)((int)address + 0x102) = puVar4[9];
  *(undefined2 *)(address + 0x41) = puVar4[10];
  *(undefined2 *)((int)address + 0x106) = puVar4[0xb];
  *(undefined2 *)(address + 0x42) = puVar4[0xc];
  *(undefined2 *)((int)address + 0x10a) = puVar4[0xd];
  *(undefined2 *)(address + 0x43) = puVar4[0xe];
  *(undefined2 *)((int)address + 0x10e) = puVar4[0xf];
  *(undefined2 *)(address + 0x44) = puVar4[0x10];
  *(undefined2 *)((int)address + 0x112) = puVar4[0x11];
  *(ushort *)(address + 0x45) = (ushort)*(byte *)(puVar4 + 0x12);
  *(ushort *)((int)address + 0x116) = (ushort)*(byte *)((int)puVar4 + 0x25);
  *(ushort *)(address + 0x46) = (ushort)*(byte *)(puVar4 + 0x13);
  *(ushort *)((int)address + 0x11a) = (ushort)*(byte *)((int)puVar4 + 0x27);
  *(ushort *)(address + 0x47) = (ushort)*(byte *)(puVar4 + 0x14);
  *(ushort *)((int)address + 0x11e) = (ushort)*(byte *)((int)puVar4 + 0x29);
  *(undefined2 *)(address + 0x48) = puVar4[0x15];
  *(undefined2 *)((int)address + 0x122) = puVar4[0x16];
  *(undefined2 *)(address + 0x49) = puVar4[0x17];
  *(undefined2 *)((int)address + 0x126) = puVar4[0x18];
  *(undefined2 *)(address + 0x4a) = puVar4[0x19];
  *(undefined2 *)((int)address + 0x12a) = puVar4[0x1a];
  *(ushort *)(address + 0x4b) = (ushort)*(byte *)(puVar4 + 0x1b);
  *(ushort *)((int)address + 0x12e) = (ushort)*(byte *)((int)puVar4 + 0x37);
  *(ushort *)(address + 0x4c) = (ushort)*(byte *)(puVar4 + 0x1c);
  *(ushort *)((int)address + 0x132) = (ushort)*(byte *)((int)puVar4 + 0x39);
  *(ushort *)(address + 0x4d) = (ushort)*(byte *)(puVar4 + 0x1d);
  *(ushort *)((int)address + 0x136) = (ushort)*(byte *)((int)puVar4 + 0x3b);
  *(undefined2 *)(address + 0x4e) = puVar4[0x1e];
  *(undefined2 *)((int)address + 0x13a) = puVar4[0x1f];
  *(undefined2 *)(address + 0x4f) = puVar4[0x20];
  *(undefined2 *)((int)address + 0x13e) = puVar4[0x21];
  *(undefined2 *)(address + 0x50) = puVar4[0x22];
  *(undefined2 *)((int)address + 0x142) = puVar4[0x23];
  *(ushort *)((int)address + 0x142) = (ushort)*(byte *)(iVar3 + 0x292);
  *(undefined2 *)(address + 0x51) = *(undefined2 *)(iVar3 + 0x294);
  *(undefined2 *)((int)address + 0x146) = *(undefined2 *)(iVar3 + 0x296);
  *(ushort *)(address + 0x52) = (ushort)*(byte *)(iVar3 + 0x29a);
  *(undefined2 *)((int)address + 0x14a) = *(undefined2 *)(iVar3 + 0x29c);
  *(undefined2 *)(address + 0x53) = *(undefined2 *)(iVar3 + 0x29e);
  do {
    iVar7 = iVar7 + -1;
    *(ushort *)((int)puVar5 + 2) = (ushort)pbVar6[1];
    pbVar6 = pbVar6 + 2;
    puVar5 = puVar5 + 1;
    *(ushort *)puVar5 = (ushort)*pbVar6;
  } while (iVar7 != 0);
  *(undefined2 *)(address + 100) = *(undefined2 *)(pbVar1 + 0x44);
  return;
}



void reset_config_data(void)

{
  undefined *puVar1;
  undefined *puVar2;
  int iVar3;
  
  puVar1 = DAT_80027eec;
  *DAT_80027eec = 1;
  puVar1[2] = 0;
  puVar1[1] = 0;
  puVar1[3] = 0;
  puVar2 = DAT_80027ef0;
  puVar1[4] = 0;
  *(undefined2 *)(puVar1 + 6) = 300;
  puVar1[0xc] = 1;
  puVar1[0xe] = 0;
  puVar1[0xd] = 0;
  puVar1[0xf] = 0;
  puVar1[0x10] = 0;
  *(undefined2 *)(puVar1 + 0x12) = 100;
  puVar1[0x21] = 0;
  puVar1[0x22] = 0;
  puVar1[0x23] = 0;
  *(undefined2 *)(puVar1 + 0x26) = 200;
  *(undefined2 *)(puVar1 + 0x24) = 0x16a;
  puVar1[0x16] = 0;
  puVar1[10] = 0x13;
  puVar1[0x48] = 0;
  *puVar2 = 5;
  puVar2[0x142] = 1;
  puVar2[1] = 4;
  puVar2[0x132] = 1;
  puVar2[2] = 7;
  puVar2[0x162] = 1;
  puVar2[3] = 0x11;
  puVar2[0x202] = 1;
  puVar2[4] = 0x13;
  puVar2[0x232] = 1;
  puVar2[0x100] = 0;
  puVar2[0x112] = 0;
  puVar2[0x122] = 0;
  puVar2[0x152] = 0;
  puVar2[0x172] = 0;
  puVar2[0x182] = 0;
  puVar2[0x192] = 0;
  puVar2[0x1a2] = 0;
  puVar2[0x1b2] = 0;
  puVar2[0x1c2] = 0;
  puVar2[0x1d2] = 0;
  puVar2[0x1e2] = 0;
  puVar2[0x1f2] = 0;
  puVar2[0x212] = 0;
  puVar2[0x242] = 0;
  puVar2[0x252] = 0;
  puVar2[0x262] = 0;
  puVar2[0x272] = 0;
  puVar2[0x282] = 0;
  memclear((uint)(puVar2 + 5),0x13);
  puVar2[0x292] = 0;
  *(undefined2 *)(puVar2 + 0x294) = 0xb7;
  *(undefined2 *)(puVar2 + 0x296) = 0x223;
  puVar2[0x29a] = 0;
  *(undefined2 *)(puVar2 + 0x29c) = 0xa7;
  iVar3 = DAT_80027ef4;
  *(undefined2 *)(puVar2 + 0x29e) = 0x148;
  puVar1[0x42] = 0;
  puVar1[0x18] = 1;
  puVar1[0x17] = 1;
  *(undefined *)(iVar3 + 2) = 100;
  *(undefined *)(iVar3 + 3) = 0xf;
  *(undefined *)(iVar3 + 4) = 1;
  *(undefined *)(iVar3 + 7) = 0;
  return;
}



void do_baseline_calibration(void)

{
  int iVar1;
  undefined *puVar2;
  uchar uVar3;
  
  puVar2 = PTR_DAT_80027fe4;
  iVar1 = DAT_80027fe0;
  *(undefined *)(DAT_80027fe0 + 0x3a) = 0;
  *(ushort *)(puVar2 + 2) = (ushort)*(byte *)(iVar1 + 10);
  *(ushort *)(puVar2 + 4) = (ushort)*(byte *)(iVar1 + 3);
  *(ushort *)(puVar2 + 6) = (ushort)*(byte *)(iVar1 + 0xf);
  *(undefined2 *)(puVar2 + 8) = *(undefined2 *)(iVar1 + 6);
  *(undefined2 *)(puVar2 + 10) = *(undefined2 *)(iVar1 + 0x12);
  *(undefined2 *)(puVar2 + 0xc) = *(undefined2 *)(iVar1 + 0x26);
  FUN_8000317c();
  FUN_80003060();
  *(undefined *)(iVar1 + 10) = puVar2[2];
  *(undefined *)(iVar1 + 3) = puVar2[4];
  *(undefined *)(iVar1 + 0xf) = puVar2[6];
  *(undefined2 *)(iVar1 + 6) = *(undefined2 *)(puVar2 + 8);
  *(undefined2 *)(iVar1 + 0x12) = *(undefined2 *)(puVar2 + 10);
  *(undefined2 *)(iVar1 + 0x26) = *(undefined2 *)(puVar2 + 0xc);
  fpga_write_cmd('3');
  if (*(char *)(iVar1 + 3) == '\x06') {
    uVar3 = '\x05';
  }
  else {
    uVar3 = *(uchar *)(iVar1 + 3);
  }
  fpga_write_data(uVar3);
  fpga_write_cmd('6');
  if (*(char *)(iVar1 + 0xf) == '\x06') {
    uVar3 = '\x05';
  }
  else {
    uVar3 = *(uchar *)(iVar1 + 0xf);
  }
  fpga_write_data(uVar3);
  set_fpga_channel1_offset();
  set_fpga_channel2_offset();
  set_fpga_trigger_timebase();
  set_fpga_trigger_level();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void setup_timer_int(void)

{
  setup_timer(0,1000,1);
  setup_interrupt(2,0xd,(uint)PTR_timer0_irq_handler_80028024,0);
  enable_timer(0);
  change_status_reg_control_bits('\x7f');
  return;
}



void sys_clock_init(void)

{
  undefined4 uVar1;
  uint *puVar2;
  undefined4 *puVar3;
  int *piVar4;
  uint uVar5;
  
  puVar3 = PLL_STABLE_TIME_REG0;
  uVar1 = DAT_8002808c;
  *PLL_STABLE_TIME_REG0 = DAT_8002808c;
  puVar3[1] = uVar1;
  puVar3 = puVar3 + -0x6c;
  *puVar3 = 0x20000;
  piVar4 = (int *)((uint)puVar3 | DAT_80028094 >> 0xe);
  *piVar4 = DAT_80028094;
  uVar5 = DAT_80028098;
  puVar2 = (uint *)(piVar4 + -0x15);
  *puVar2 = *puVar2 & DAT_80028098 | 0x80001800;
  uVar5 = uVar5 >> 0x14;
  do {
    uVar5 = uVar5 - 1;
    if (uVar5 == 0) {
      return;
    }
  } while ((*puVar2 & 0x10000000) == 0);
  return;
}



void sys_init_uart0(uint baudrate)

{
  undefined4 *port;
  uint *puVar1;
  uint uVar2;
  uint *puVar3;
  uint *puVar4;
  
  uVar2 = divide(DAT_80028164,baudrate);
  port = PE_CFG0;
  gpio_config_pin(PE_CFG0,0,5);
  gpio_config_pin(port,1,5);
  puVar1 = BUS_CLK_GATING_REG2;
  *BUS_CLK_GATING_REG2 = *BUS_CLK_GATING_REG2 | 0x100000;
  puVar1[0x9a] = puVar1[0x9a] | 0x100000;
  puVar1 = UART0_BASE;
  puVar4 = UART0_BASE + 1;
  *puVar4 = 0;
  puVar1[2] = 0xf7;
  puVar1[4] = 0;
  puVar3 = puVar1 + 3;
  *puVar3 = *puVar3 | 0x80;
  *puVar1 = uVar2 >> 4 & 0xff;
  *puVar4 = ((uVar2 >> 4) << 0x10) >> 0x18;
  *puVar3 = *puVar3 & 0xffffff7f;
  *puVar3 = *puVar3 & 0xffffffe0 | 3;
  return;
}



void sys_init_watchdog(void)

{
  uint *puVar1;
  
  *WDOG_CFG_REG = *WDOG_CFG_REG | 1;
  puVar1 = WDOG_CFG_REG + 1;
  *puVar1 = *puVar1;
  *puVar1 = *puVar1 | 1;
  do {
                    // WARNING: Do nothing block with infinite loop
  } while( true );
}



void timer0_irq_handler(void)

{
  int *piVar1;
  uint uVar2;
  
  uVar2 = read32(TMR_IRQ_STA_REG);
  write32(TMR_IRQ_STA_REG,uVar2 | 1);
  piVar1 = Timer_Ticks;
  *Timer_Ticks = *Timer_Ticks + 1;
  if (*piVar1 == -1) {
    *piVar1 = 0;
  }
  return;
}



void init_video_clock(uint addr)

{
  uint uVar1;
  uint *puVar2;
  uint *puVar3;
  uint *puVar4;
  
  puVar3 = PLL_VIDEO_CTRL_REG;
  puVar4 = *(uint **)(addr + 0x10);
  *PLL_VIDEO_CTRL_REG = *PLL_VIDEO_CTRL_REG & 0x7fffffff;
  *puVar3 = DAT_80028328;
  *puVar3 = *puVar3 | 0x80000000;
  delay_2(1);
  puVar3 = BUS_CLK_GATING_REG1;
  *BUS_CLK_GATING_REG1 = *BUS_CLK_GATING_REG1 | 0x10;
  puVar2 = puVar3 + 0x2d;
  *puVar2 = *puVar2 | 0x80000000;
  puVar3 = puVar3 + 0x98;
  *puVar3 = *puVar3 | 0x10;
  delay_2(1);
  *puVar4 = *puVar4 & 0xfffffffe;
  puVar4[0x10] = ((uint)*(byte *)(addr + 0x50) + (uint)*(byte *)(addr + 0x54) +
                  (uint)*(byte *)(addr + 0x58) & 0x1f) << 4 | 0x80000000;
  puVar4[0x11] = 0xf0000006;
  puVar4[0x12] = *(int *)(addr + 0x20) - 1U | (*(ushort *)(addr + 0x1c) - 1) * 0x10000;
  puVar4[0x13] = DAT_80028330;
  puVar4[0x14] = DAT_80028334;
  puVar4[0x15] = 0x160000;
  puVar4[0x16] = 0;
  puVar4[0x18] = 0;
  uVar1 = 0x10000000;
  if (*(int *)(addr + 0x5c) == 0) {
    uVar1 = 0x12000000;
  }
  if (*(int *)(addr + 0x60) == 0) {
    uVar1 = uVar1 | 0x1000000;
  }
  if (*(int *)(addr + 100) == 0) {
    uVar1 = uVar1 | 0x8000000;
  }
  if (*(int *)(addr + 0x68) == 0) {
    uVar1 = uVar1 | 0x4000000;
  }
  puVar4[0x22] = uVar1;
  puVar4[0x23] = 0;
  return;
}



void setup_timer(int timer,int count,int enable_irq)

{
  uint uVar1;
  
  write32((uint *)((timer + 1) * 0x10 + 0x1c20c00),0);
  uVar1 = read32((uint *)((timer + 1) * 0x10 + 0x1c20c00));
  write32((uint *)((timer + 1) * 0x10 + 0x1c20c00),uVar1);
  uVar1 = read32((uint *)((timer + 1) * 0x10 + 0x1c20c00));
  write32((uint *)((timer + 1) * 0x10 + 0x1c20c00),uVar1);
  uVar1 = read32((uint *)((timer + 1) * 0x10 + 0x1c20c00));
  write32((uint *)((timer + 1) * 0x10 + 0x1c20c00),uVar1 | 4);
  uVar1 = read32((uint *)((timer + 1) * 0x10 + 0x1c20c00));
  write32((uint *)((timer + 1) * 0x10 + 0x1c20c00),uVar1 | 2);
  write32((uint *)((timer + 1) * 0x10 + 0x1c20c04),count * 0x18);
  if (enable_irq == 1) {
    uVar1 = read32(TIMER_BASE);
    write32(TIMER_BASE,uVar1 | 1 << (timer & 0xffU));
  }
  return;
}



void enable_timer(uint timer)

{
  uint uVar1;
  
  uVar1 = read32((uint *)((timer + 1) * 0x10 + 0x1c20c00));
  write32((uint *)((timer + 1) * 0x10 + 0x1c20c00),uVar1 | 1);
  return;
}



undefined4 FUN_80028568(void)

{
  uint uVar1;
  uint uVar2;
  undefined *puVar3;
  ushort xstart;
  ushort xstart_00;
  uint uVar4;
  ushort ystart;
  ushort uVar5;
  uint extraout_r1;
  uint uVar6;
  ushort xend;
  uint uVar7;
  ushort yend;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  bool bVar11;
  bool bVar12;
  uint local_7c;
  uint local_78;
  uint local_5c;
  uint local_50;
  
  uVar2 = DAT_8002881c;
  uVar8 = 0;
  uVar10 = DAT_8002881c - 0x140;
  local_78 = 0;
  uVar1 = (int)DAT_8002881c >> 1;
  local_7c = 0;
  local_5c = 0xd7;
  set_screen_to_global_pointer();
  set_display_fg_color(DAT_80028820);
  display_fill_rect(0,0,0x32,0x32);
  xstart = (ushort)uVar2;
  display_fill_rect(xstart,0,800,0x32);
  display_fill_rect((ushort)uVar1,0xd7,0x1a9,0x109);
  ystart = (ushort)uVar10;
  display_fill_rect(0,ystart,0x32,0x1e0);
  display_fill_rect(xstart,ystart,800,0x1e0);
  set_display_fg_color(0xff00);
  puVar3 = PTR_DAT_80028824;
  local_50 = 0x32;
  uVar9 = uVar2 - 0x10e;
  do {
    tp_i2c_read_status();
    uVar4 = (uint)*(ushort *)(puVar3 + 2);
    bVar11 = uVar4 == 0;
    if (uVar4 != 0) {
      bVar11 = uVar4 == 0x32;
    }
    uVar6 = extraout_r1;
    if (0x32 < uVar4 || bVar11) {
LAB_800286d8:
      bVar12 = uVar2 <= uVar4;
      bVar11 = uVar4 == uVar2;
      if (bVar12 && !bVar11) {
        uVar6 = uVar2 + 0x32;
      }
      if (bVar12 && !bVar11) {
        bVar12 = uVar4 <= uVar6;
        bVar11 = uVar6 == uVar4;
      }
      if (!bVar12 || bVar11) {
LAB_80028720:
        bVar12 = uVar1 <= uVar4;
        bVar11 = uVar4 == uVar1;
        if (bVar12 && !bVar11) {
          uVar6 = uVar1 + 0x32;
        }
        if (bVar12 && !bVar11) {
          bVar12 = uVar4 <= uVar6;
          bVar11 = uVar6 == uVar4;
        }
        if (!bVar12 || bVar11) {
LAB_80028770:
          bVar11 = uVar4 == 0;
          if (uVar4 != 0) {
            uVar6 = local_50;
          }
          if (uVar4 != 0) {
            bVar11 = uVar6 == uVar4;
          }
          uVar5 = ystart;
          if ((uVar4 == 0 || uVar4 <= uVar6) && !bVar11) {
            uVar6 = (uint)*(ushort *)(puVar3 + 4);
            bVar12 = uVar10 <= uVar6;
            bVar11 = uVar6 == uVar10;
            uVar7 = uVar10;
            if (bVar12 && !bVar11) {
              uVar7 = uVar2 - 0x10e;
            }
            if (bVar12 && !bVar11) {
              bVar12 = uVar6 <= uVar7;
              bVar11 = uVar7 == uVar6;
            }
            if (bVar12 && !bVar11) {
              if (*puVar3 == '\0') goto LAB_80028804;
              yend = (ushort)uVar7;
              xend = 0x32;
              uVar8 = uVar8 | 8;
              xstart_00 = 0;
              goto LAB_80028768;
            }
          }
          bVar12 = uVar2 <= uVar4;
          bVar11 = uVar4 == uVar2;
          if (bVar12 && !bVar11) {
            uVar6 = uVar2 + 0x32;
          }
          if (bVar12 && !bVar11) {
            bVar12 = uVar4 <= uVar6;
            bVar11 = uVar6 == uVar4;
          }
          if (bVar12 && !bVar11) {
            uVar4 = (uint)*(ushort *)(puVar3 + 4);
            bVar12 = uVar10 <= uVar4;
            bVar11 = uVar4 == uVar10;
            if (bVar12 && !bVar11) {
              bVar12 = uVar4 <= uVar9;
              bVar11 = uVar9 == uVar4;
            }
            if ((bVar12 && !bVar11) && (*puVar3 != '\0')) {
              xend = (ushort)(uVar2 + 0x32);
              uVar8 = uVar8 | 0x10;
              uVar6 = uVar9;
              goto LAB_800287fc;
            }
          }
          goto LAB_80028804;
        }
        uVar5 = *(ushort *)(puVar3 + 4);
        bVar12 = 0xd6 < uVar5;
        bVar11 = uVar5 == 0xd7;
        uVar6 = local_5c;
        if (0xd7 < uVar5) {
          uVar6 = 0x109;
          bVar12 = uVar5 < 0x10a;
          bVar11 = uVar5 == 0x109;
        }
        if (!bVar12 || bVar11) goto LAB_80028770;
        if (*puVar3 == '\0') goto LAB_80028804;
        yend = (ushort)uVar6;
        xend = (ushort)(uVar1 + 0x32);
        uVar8 = uVar8 | 4;
        xstart_00 = (ushort)uVar1;
        uVar5 = 0xd7;
      }
      else {
        uVar7 = (uint)*(ushort *)(puVar3 + 4);
        bVar11 = uVar7 == 0;
        uVar6 = local_7c;
        if (!bVar11) {
          uVar6 = 0x32;
        }
        if (!bVar11 && uVar6 < uVar7 || (bVar11 || uVar6 == uVar7)) goto LAB_80028720;
        if (*puVar3 == '\0') goto LAB_80028804;
        xend = (ushort)(uVar2 + 0x32);
        uVar8 = uVar8 | 2;
        uVar5 = 0;
LAB_800287fc:
        yend = (ushort)uVar6;
        xstart_00 = xstart;
      }
LAB_80028768:
      display_fill_rect(xstart_00,uVar5,xend,yend);
    }
    else {
      uVar6 = (uint)*(ushort *)(puVar3 + 4);
      bVar11 = uVar6 == 0;
      uVar7 = local_78;
      if (!bVar11) {
        uVar7 = 0x32;
      }
      if (!bVar11 && uVar7 < uVar6 || (bVar11 || uVar7 == uVar6)) goto LAB_800286d8;
      if (*puVar3 != '\0') {
        uVar8 = uVar8 | 1;
        display_fill_rect(0,0,0x32,(ushort)uVar7);
      }
    }
LAB_80028804:
    if (uVar8 == 0x1f) {
      return 1;
    }
  } while( true );
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffd8 : 0x800290b0
// WARNING: Heritage AFTER dead removal. Example location: s0xffffffd8 : 0x80028860
// WARNING: Restarted to delay deadcode elimination for space: stack

void handle_main_menu_touch(void)

{
  byte bVar1;
  int *piVar2;
  undefined4 uVar3;
  undefined uVar4;
  ushort uVar5;
  int iVar6;
  undefined *puVar7;
  ushort uVar8;
  undefined *puVar9;
  ushort *puVar10;
  undefined *in_r2;
  ushort *puVar11;
  undefined *puVar12;
  undefined *puVar13;
  uint uVar14;
  uint uVar15;
  byte *pbVar16;
  undefined *puVar17;
  uint uVar18;
  int iVar19;
  int iVar20;
  undefined *in_r12;
  uint uVar21;
  uint uVar22;
  bool bVar23;
  bool bVar24;
  bool bVar25;
  undefined4 *puVar26;
  code **ppcVar27;
  undefined8 uVar28;
  byte *in_stack_ffffffd8;
  undefined *in_stack_ffffffdc;
  undefined uVar29;
  undefined4 in_stack_ffffffe0;
  code *UNRECOVERED_JUMPTABLE;
  
  pbVar16 = DAT_80029140;
  puVar17 = DAT_8002913c;
  ppcVar27 = (code **)&stack0xffffffd8;
  uVar4 = 0;
  *DAT_8002913c = 0;
  iVar19 = 0;
  iVar20 = 0;
  bVar24 = false;
  if (pbVar16[6] == 0) {
                    // WARNING: Could not recover jumptable at 0x8002885c. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
  tp_i2c_read_status();
  puVar9 = (undefined *)(uint)*(ushort *)(pbVar16 + 2);
  puVar7 = (undefined *)(uint)*(ushort *)PTR_DAT_80029144;
  if ((puVar7 < puVar9) && (in_r2 = PTR_DAT_80029144, puVar9 < puVar7 + 0x95)) {
    puVar12 = (undefined *)(uint)*(ushort *)(pbVar16 + 4);
    in_r2 = (undefined *)(uint)*(ushort *)(PTR_DAT_80029144 + 2);
    bVar25 = in_r2 <= puVar12;
    bVar23 = puVar12 == in_r2;
    if (bVar25 && !bVar23) {
      in_r2 = in_r2 + 0x3b;
    }
    if (bVar25 && !bVar23) {
      bVar25 = puVar12 <= in_r2;
      bVar23 = in_r2 == puVar12;
    }
    if (!bVar25 || bVar23) goto LAB_800288e8;
    bVar1 = *pbVar16;
    while (bVar1 != 0) {
      *puVar17 = 1;
      display_highlight_main_menu_item();
      tp_i2c_read_status();
      bVar1 = *pbVar16;
    }
    if (pbVar16[7] == 0) {
      pbVar16[7] = 1;
      save_screen_under_settings_menu();
      display_slide_left_system_settings_menu();
      display_system_settings_menu();
      goto LAB_80028a48;
    }
  }
  else {
LAB_800288e8:
    bVar25 = puVar7 <= puVar9;
    bVar23 = puVar9 == puVar7;
    if (bVar25 && !bVar23) {
      in_r2 = puVar7 + 0x95;
    }
    if (bVar25 && !bVar23) {
      bVar25 = puVar9 <= in_r2;
      bVar23 = in_r2 == puVar9;
    }
    if (bVar25 && !bVar23) {
      puVar12 = (undefined *)(uint)*(ushort *)(PTR_DAT_80029144 + 2);
      in_r2 = (undefined *)(uint)*(ushort *)(pbVar16 + 4);
      in_r12 = puVar12 + 0x3b;
      bVar25 = in_r12 <= in_r2;
      bVar23 = in_r2 == in_r12;
      if (bVar25 && !bVar23) {
        puVar12 = puVar12 + 0x76;
      }
      if (bVar25 && !bVar23) {
        bVar25 = in_r2 <= puVar12;
        bVar23 = puVar12 == in_r2;
      }
      if (bVar25 && !bVar23) {
        bVar1 = *pbVar16;
        while (bVar1 != 0) {
          *puVar17 = 2;
          display_highlight_main_menu_item();
          tp_i2c_read_status();
          bVar1 = *pbVar16;
        }
        *PTR_DAT_80029148 = 0;
        FUN_8002be60();
        FUN_8000A750();
        setup_main_screen();
        goto LAB_80028a48;
      }
    }
    bVar25 = puVar7 <= puVar9;
    bVar23 = puVar9 == puVar7;
    if (bVar25 && !bVar23) {
      in_r2 = puVar7 + 0x95;
    }
    if (bVar25 && !bVar23) {
      bVar25 = puVar9 <= in_r2;
      bVar23 = in_r2 == puVar9;
    }
    if (bVar25 && !bVar23) {
      puVar12 = (undefined *)(uint)*(ushort *)(PTR_DAT_80029144 + 2);
      in_r2 = (undefined *)(uint)*(ushort *)(pbVar16 + 4);
      in_r12 = puVar12 + 0x76;
      bVar25 = in_r12 <= in_r2;
      bVar23 = in_r2 == in_r12;
      if (bVar25 && !bVar23) {
        puVar12 = puVar12 + 0xb1;
      }
      if (bVar25 && !bVar23) {
        bVar25 = in_r2 <= puVar12;
        bVar23 = puVar12 == in_r2;
      }
      if (bVar25 && !bVar23) {
        bVar1 = *pbVar16;
        while (bVar1 != 0) {
          *puVar17 = 3;
          display_highlight_main_menu_item();
          tp_i2c_read_status();
          bVar1 = *pbVar16;
        }
        *PTR_DAT_80029148 = 1;
        FUN_8002be60();
        FUN_8000A750();
        setup_main_screen();
        goto LAB_80028a48;
      }
    }
    bVar25 = puVar7 <= puVar9;
    bVar23 = puVar9 == puVar7;
    if (bVar25 && !bVar23) {
      puVar7 = puVar7 + 0x95;
    }
    if (bVar25 && !bVar23) {
      bVar25 = puVar9 <= puVar7;
      bVar23 = puVar7 == puVar9;
    }
    if (bVar25 && !bVar23) {
      puVar9 = (undefined *)(uint)*(ushort *)(PTR_DAT_80029144 + 2);
      puVar7 = (undefined *)(uint)*(ushort *)(pbVar16 + 4);
      in_r2 = puVar9 + 0xb1;
      bVar25 = in_r2 <= puVar7;
      bVar23 = puVar7 == in_r2;
      if (bVar25 && !bVar23) {
        puVar9 = puVar9 + 0xec;
      }
      if (bVar25 && !bVar23) {
        bVar25 = puVar7 <= puVar9;
        bVar23 = puVar9 == puVar7;
      }
      if (bVar25 && !bVar23) {
        bVar1 = *pbVar16;
        while (bVar1 != 0) {
          *puVar17 = 4;
          display_highlight_main_menu_item();
          tp_i2c_read_status();
          bVar1 = *pbVar16;
        }
        FUN_8000A750();
        copy_screen_to_frame2();
        enter_usb_connect();
        set_frame_to_global_pointer();
        copy_frame2_to_frame();
        copy_frame_to_screen();
        FUN_8000A750();
        setup_main_screen();
        goto LAB_80028a48;
      }
    }
    if (*pbVar16 != 0) {
      iVar19 = 1;
    }
LAB_80028a48:
    if (pbVar16[7] == 0) {
      if (*pbVar16 == 0 || iVar19 == 0) {
                    // WARNING: Could not recover jumptable at 0x80029138. Too many branches
                    // WARNING: Treating indirect jump as call
        (*UNRECOVERED_JUMPTABLE)();
        return;
      }
      goto code_r0x8000a750;
    }
  }
  uVar29 = (undefined)in_stack_ffffffe0;
  puVar9 = (undefined *)(uint)*(ushort *)(pbVar16 + 2);
  puVar7 = (undefined *)(uint)*(ushort *)(PTR_DAT_80029144 + 4);
  if ((puVar7 < puVar9) && (in_r2 = puVar7 + 0xf4, puVar9 < in_r2)) {
    in_r2 = (undefined *)(uint)*(ushort *)(pbVar16 + 4);
    puVar12 = (undefined *)(uint)*(ushort *)(PTR_DAT_80029144 + 6);
    bVar25 = puVar12 <= in_r2;
    bVar23 = in_r2 == puVar12;
    if (bVar25 && !bVar23) {
      puVar12 = puVar12 + 0x3b;
    }
    if (bVar25 && !bVar23) {
      bVar25 = in_r2 <= puVar12;
      bVar23 = puVar12 == in_r2;
    }
    if (!bVar25 || bVar23) goto LAB_80028b08;
    bVar1 = *pbVar16;
    while (uVar29 = (undefined)in_stack_ffffffe0, bVar1 != 0) {
      puVar17[1] = 1;
      display_system_settings_menu();
      tp_i2c_read_status();
      bVar1 = *pbVar16;
    }
    if (pbVar16[9] == 1) {
      pbVar16[9] = 0;
      display_sys_menu_grid_brightness(0);
      restore_screen_under_grid_brightness_slider();
    }
    if (pbVar16[10] == 1) {
      pbVar16[10] = 0;
      restore_screen_under_calibration_texts();
    }
    if (pbVar16[8] == 0) {
      pbVar16[8] = 1;
      save_screen_under_screen_brightness_slider();
      open_screen_brightness_slider_menu();
      display_screen_brightness_slider();
      display_sys_menu_disp_brightness(1);
    }
  }
  else {
LAB_80028b08:
    bVar25 = puVar7 <= puVar9;
    bVar23 = puVar9 == puVar7;
    if (bVar25 && !bVar23) {
      in_r2 = puVar7 + 0xf4;
    }
    if (bVar25 && !bVar23) {
      bVar25 = puVar9 <= in_r2;
      bVar23 = in_r2 == puVar9;
    }
    if (bVar25 && !bVar23) {
      in_r2 = (undefined *)(uint)*(ushort *)(PTR_DAT_80029144 + 6);
      puVar12 = (undefined *)(uint)*(ushort *)(pbVar16 + 4);
      in_r12 = in_r2 + 0x3b;
      bVar25 = in_r12 <= puVar12;
      bVar23 = puVar12 == in_r12;
      if (bVar25 && !bVar23) {
        in_r2 = in_r2 + 0x76;
      }
      if (bVar25 && !bVar23) {
        bVar25 = puVar12 <= in_r2;
        bVar23 = in_r2 == puVar12;
      }
      if (bVar25 && !bVar23) {
        bVar1 = *pbVar16;
        while (bVar1 != 0) {
          puVar17[1] = 2;
          display_system_settings_menu();
          tp_i2c_read_status();
          uVar29 = (undefined)in_stack_ffffffe0;
          bVar1 = *pbVar16;
        }
        if (pbVar16[8] == 1) {
          pbVar16[8] = 0;
          display_sys_menu_disp_brightness(0);
          FUN_8001c6c0();
        }
        if (pbVar16[10] == 1) {
          pbVar16[10] = 0;
          restore_screen_under_calibration_texts();
        }
        if (pbVar16[9] == 0) {
          pbVar16[9] = 1;
          save_screen_under_grid_brightness_slider();
          open_grid_brightness_slider_menu();
          display_grid_brightness_slider();
          display_sys_menu_grid_brightness(1);
        }
        goto LAB_80028dcc;
      }
    }
    bVar25 = puVar7 <= puVar9;
    bVar23 = puVar9 == puVar7;
    if (bVar25 && !bVar23) {
      in_r2 = puVar7 + 0xf4;
    }
    if (bVar25 && !bVar23) {
      bVar25 = puVar9 <= in_r2;
      bVar23 = in_r2 == puVar9;
    }
    if (!bVar25 || bVar23) {
LAB_80028c60:
      bVar25 = puVar7 <= puVar9;
      bVar23 = puVar9 == puVar7;
      if (bVar25 && !bVar23) {
        in_r2 = puVar7 + 0xf4;
      }
      if (bVar25 && !bVar23) {
        bVar25 = puVar9 <= in_r2;
        bVar23 = in_r2 == puVar9;
      }
      if (bVar25 && !bVar23) {
        puVar13 = (undefined *)(uint)*(ushort *)(PTR_DAT_80029144 + 6);
        puVar12 = (undefined *)(uint)*(ushort *)(pbVar16 + 4);
        in_r12 = puVar13 + 0xb1;
        bVar25 = in_r12 <= puVar12;
        bVar23 = puVar12 == in_r12;
        if (bVar25 && !bVar23) {
          puVar13 = puVar13 + 0xec;
        }
        if (bVar25 && !bVar23) {
          bVar25 = puVar12 <= puVar13;
          bVar23 = puVar13 == puVar12;
        }
        if (bVar25 && !bVar23) {
          bVar1 = *pbVar16;
          while (bVar1 != 0) {
            puVar17[1] = 4;
            display_system_settings_menu();
            tp_i2c_read_status();
            uVar29 = (undefined)in_stack_ffffffe0;
            bVar1 = *pbVar16;
          }
          if (pbVar16[8] == 1) {
            pbVar16[8] = 0;
            display_sys_menu_disp_brightness(0);
            FUN_8001c6c0();
          }
          if (pbVar16[9] == 1) {
            pbVar16[9] = 0;
            display_sys_menu_grid_brightness(0);
            restore_screen_under_grid_brightness_slider();
          }
          if (pbVar16[10] == 0) {
            pbVar16[10] = 1;
            puVar17[8] = 0;
            save_screen_under_calib_start_text();
            open_calib_start_text_menu();
            display_calibration_start_text();
          }
          goto LAB_80028dcc;
        }
      }
      bVar25 = puVar7 <= puVar9;
      bVar23 = puVar9 == puVar7;
      if (bVar25 && !bVar23) {
        puVar7 = puVar7 + 0xf4;
      }
      if (bVar25 && !bVar23) {
        bVar25 = puVar9 <= puVar7;
        bVar23 = puVar7 == puVar9;
      }
      if (bVar25 && !bVar23) {
        if ((*(ushort *)(PTR_DAT_80029144 + 6) + 0xec < (uint)*(ushort *)(pbVar16 + 4)) &&
           ((uint)*(ushort *)(pbVar16 + 4) < *(ushort *)(PTR_DAT_80029144 + 6) + 0x127)) {
          bVar1 = *pbVar16;
          while (uVar29 = (undefined)in_stack_ffffffe0, bVar1 != 0) {
            tp_i2c_read_status();
            bVar1 = *pbVar16;
          }
          if (puVar17[7] == '\0') {
            puVar17[7] = 1;
          }
          else {
            puVar17[7] = 0;
          }
          puVar17[1] = 0;
          if (pbVar16[8] == 1) {
            pbVar16[8] = 0;
            display_sys_menu_disp_brightness(0);
            FUN_8001c6c0();
          }
          if (pbVar16[9] == 1) {
            pbVar16[9] = 0;
            display_sys_menu_grid_brightness(0);
            restore_screen_under_grid_brightness_slider();
          }
          bVar1 = pbVar16[10];
          goto joined_r0x80028db4;
        }
      }
      if (*pbVar16 != 0) {
        iVar20 = 1;
      }
    }
    else {
      in_r2 = (undefined *)(uint)*(ushort *)(PTR_DAT_80029144 + 6);
      puVar12 = (undefined *)(uint)*(ushort *)(pbVar16 + 4);
      in_r12 = in_r2 + 0x76;
      bVar25 = in_r12 <= puVar12;
      bVar23 = puVar12 == in_r12;
      if (bVar25 && !bVar23) {
        in_r2 = in_r2 + 0xb1;
      }
      if (bVar25 && !bVar23) {
        bVar25 = puVar12 <= in_r2;
        bVar23 = in_r2 == puVar12;
      }
      if (!bVar25 || bVar23) goto LAB_80028c60;
      bVar1 = *pbVar16;
      while (uVar29 = (undefined)in_stack_ffffffe0, bVar1 != 0) {
        tp_i2c_read_status();
        bVar1 = *pbVar16;
      }
      if (puVar17[4] == '\0') {
        puVar17[4] = 1;
      }
      else {
        puVar17[4] = 0;
      }
      puVar17[1] = 0;
      if (pbVar16[8] == 1) {
        pbVar16[8] = 0;
        display_sys_menu_disp_brightness(0);
        FUN_8001c6c0();
      }
      if (pbVar16[9] == 1) {
        pbVar16[9] = 0;
        display_sys_menu_grid_brightness(0);
        restore_screen_under_grid_brightness_slider();
      }
      bVar1 = pbVar16[10];
joined_r0x80028db4:
      if (bVar1 == 1) {
        pbVar16[10] = 0;
        restore_screen_under_calibration_texts();
      }
      display_system_settings_menu();
    }
  }
LAB_80028dcc:
  uVar3 = DAT_80029150;
  uVar15 = DAT_8002914c;
  if (pbVar16[8] == 1) {
    uVar22 = (uint)*(ushort *)(pbVar16 + 2);
    uVar18 = (uint)*(ushort *)(PTR_DAT_80029144 + 4);
    uVar14 = uVar18 + 0x108;
    bVar25 = uVar14 <= uVar22;
    bVar23 = uVar22 == uVar14;
    if (bVar25 && !bVar23) {
      uVar14 = uVar18 + 0x200;
    }
    if (bVar25 && !bVar23) {
      uVar14 = uVar14 + 0x2b;
    }
    if (bVar25 && !bVar23) {
      bVar25 = uVar22 <= uVar14;
      bVar23 = uVar14 == uVar22;
    }
    if (bVar25 && !bVar23) {
      uVar21 = (uint)*(ushort *)(pbVar16 + 4);
      uVar14 = (uint)*(ushort *)(PTR_DAT_80029144 + 6);
      bVar25 = uVar14 <= uVar21;
      bVar23 = uVar21 == uVar14;
      if (bVar25 && !bVar23) {
        uVar14 = uVar14 + 0x3b;
      }
      if (bVar25 && !bVar23) {
        bVar25 = uVar21 <= uVar14;
        bVar23 = uVar14 == uVar21;
      }
      if (bVar25 && !bVar23) {
        bVar1 = *pbVar16;
        while (bVar1 != 0) {
          uVar22 = (uint)*(ushort *)(pbVar16 + 2);
          uVar18 = uVar15;
          if ((0x19c < uVar22) && (uVar18 = uVar22, 0x2c0 < uVar22)) {
            uVar18 = 0x2c0;
          }
          uVar28 = FUN_8003979c(uVar18 - 0x19d);
          FUN_800393ec((int)uVar28,(int)((ulonglong)uVar28 >> 0x20),DAT_80029154,uVar3);
          uVar4 = FUN_8003972c();
          puVar17[2] = uVar4;
          set_translated_brightness();
          display_sys_menu_disp_brightness(1);
          display_screen_brightness_slider();
          tp_i2c_read_status();
          bVar1 = *pbVar16;
        }
        goto LAB_80028f04;
      }
    }
    if ((uVar18 + 0xf4 < uVar22) && (uVar22 < uVar18 + 0x23f)) {
      uVar18 = (uint)*(ushort *)(pbVar16 + 4);
      uVar15 = (uint)*(ushort *)(PTR_DAT_80029144 + 6);
      bVar25 = uVar15 <= uVar18;
      bVar23 = uVar18 == uVar15;
      if (bVar25 && !bVar23) {
        uVar15 = uVar15 + 0x3b;
      }
      if (bVar25 && !bVar23) {
        bVar25 = uVar18 <= uVar15;
        bVar23 = uVar15 == uVar18;
      }
      if (bVar25 && !bVar23) goto LAB_80028f04;
    }
    bVar1 = *pbVar16;
joined_r0x80028f00:
    if (bVar1 != 0) {
      bVar24 = true;
    }
  }
  else {
    if (pbVar16[9] != 1) {
      if (pbVar16[10] == 1) {
        puVar7 = (undefined *)(uint)*(ushort *)(pbVar16 + 2);
        uVar15 = (uint)*(ushort *)(PTR_DAT_80029144 + 4);
        puVar9 = (undefined *)(uVar15 + 0x16e);
        bVar23 = puVar9 <= puVar7;
        bVar24 = puVar7 == puVar9;
        if (bVar23 && !bVar24) {
          in_r12 = (undefined *)(uVar15 + 0x1b0);
        }
        if (bVar23 && !bVar24) {
          bVar23 = puVar7 <= in_r12;
          bVar24 = in_r12 == puVar7;
        }
        if (bVar23 && !bVar24) {
          uVar18 = (uint)*(ushort *)(PTR_DAT_80029144 + 6);
          uVar22 = (uint)*(ushort *)(pbVar16 + 4);
          bVar23 = uVar18 + 0xb7 <= uVar22;
          bVar24 = uVar22 == uVar18 + 0xb7;
          if (bVar23 && !bVar24) {
            uVar18 = uVar18 + 0xe3;
          }
          if (bVar23 && !bVar24) {
            bVar23 = uVar22 <= uVar18;
            bVar24 = uVar18 == uVar22;
          }
          if (bVar23 && !bVar24) {
            if (puVar17[8] != '\0') {
                    // WARNING: Could not recover jumptable at 0x80029068. Too many branches
                    // WARNING: Treating indirect jump as call
              (*UNRECOVERED_JUMPTABLE)();
              return;
            }
            bVar1 = *pbVar16;
            while (uVar15 = (uint)bVar1, uVar15 != 0) {
              puVar17[9] = 1;
              display_calibration_start_text();
              tp_i2c_read_status();
              bVar1 = *pbVar16;
            }
            puVar17[9] = 0;
            restore_screen_under_calibration_texts();
            display_calibrating_text();
            do_baseline_calibration();
            puVar17[8] = (char)uVar15;
            if (uVar15 != 0) {
              signal_sys_ok();
            }
            restore_screen_under_calibration_texts();
            uVar5 = convert_color(DAT_80011484);
            iVar19 = DAT_80011498;
            piVar2 = Global_Frame_Buffer_Pointer;
            puVar7 = PTR_DAT_80011490;
            puVar17 = PTR_TEXT_BITMAP_CALIB_SUCCESS_8001148c;
            uVar15 = 0;
            *(undefined *)(DAT_80011488 + 8) = 1;
            do {
              iVar20 = 0x6e;
              puVar10 = (ushort *)
                        (*piVar2 + ((uint)*(ushort *)(puVar7 + 4) +
                                   (*(ushort *)(puVar7 + 6) + uVar15) * 800) * 2 + iVar19);
              puVar11 = (ushort *)(puVar17 + uVar15 * 0xdc);
              do {
                uVar8 = *puVar11;
                if (*puVar11 == 0) {
                  uVar8 = uVar5;
                }
                iVar20 = iVar20 + -1;
                *puVar10 = uVar8;
                puVar10 = puVar10 + 1;
                puVar11 = puVar11 + 1;
              } while (iVar20 != 0);
              uVar15 = uVar15 + 1 & 0xfffeffff;
            } while (uVar15 < 0x3c);
            set_display_fg_color(DAT_8001149c);
            display_draw_rect(*(short *)(puVar7 + 4) + 0xf4,*(short *)(puVar7 + 6) + 0xaf,
                              *(short *)(puVar7 + 4) + 0x162,*(short *)(puVar7 + 6) + 0xea);
            iVar20 = Start_Of_Screen_Mem;
            iVar19 = Screen_Frame_Buffer;
            uVar5 = *(ushort *)(puVar7 + 4);
            uVar18 = *(ushort *)(puVar7 + 6) + 0xaf & 0xfffeffff;
            uVar22 = *(ushort *)(puVar7 + 6) + 0xeb & 0xfffeffff;
            uVar15 = uVar5 + 0xf4 & 0xfffeffff;
            if (uVar22 <= uVar18) {
              return;
            }
            do {
              iVar6 = uVar15 + uVar18 * 800;
              copy_short((void *)(iVar20 + iVar6 * 2),(void *)(iVar19 + iVar6 * 2),
                         ((uVar5 + 0x162 & 0xfffeffff) - uVar15) + 1);
              uVar18 = uVar18 + 1;
            } while (uVar18 < uVar22);
            return;
          }
        }
        bVar23 = (undefined *)(uVar15 + 0xf4) <= puVar7;
        bVar24 = puVar7 == (undefined *)(uVar15 + 0xf4);
        if (bVar23 && !bVar24) {
          bVar23 = puVar7 <= puVar9;
          bVar24 = puVar9 == puVar7;
        }
        if (bVar23 && !bVar24) {
          uVar15 = (uint)*(ushort *)(PTR_DAT_80029144 + 6);
          uVar18 = (uint)*(ushort *)(pbVar16 + 4);
          bVar23 = uVar15 + 0xb1 <= uVar18;
          bVar24 = uVar18 == uVar15 + 0xb1;
          if (bVar23 && !bVar24) {
            uVar15 = uVar15 + 0xed;
          }
          if (bVar23 && !bVar24) {
            bVar23 = uVar18 <= uVar15;
            bVar24 = uVar15 == uVar18;
          }
          if (bVar23 && !bVar24) {
            ppcVar27 = (code **)&stack0xffffffec;
            pbVar16 = in_stack_ffffffd8;
            puVar17 = in_stack_ffffffdc;
            uVar4 = uVar29;
          }
          if (bVar23 && !bVar24) {
            iVar19 = (int)*ppcVar27;
            iVar20 = ((int *)ppcVar27)[1];
            ppcVar27 = (code **)((int *)ppcVar27 + 4);
          }
                    // WARNING: Could not recover jumptable at 0x800290ec. Too many branches
                    // WARNING: Treating indirect jump as call
          if (bVar23 && !bVar24) {
            (**ppcVar27)();
            return;
          }
        }
        if (*pbVar16 == 0) {
                    // WARNING: Could not recover jumptable at 0x80029100. Too many branches
                    // WARNING: Treating indirect jump as call
          (**(code **)((int)ppcVar27 + 0x24))();
          return;
        }
        puVar17[8] = uVar4;
        if (iVar19 == 0 || iVar20 == 0) {
                    // WARNING: Could not recover jumptable at 0x80029118. Too many branches
                    // WARNING: Treating indirect jump as call
          (**(code **)((undefined *)((int)ppcVar27 + 0x14) + 0x10))();
          return;
        }
      }
      else {
        bVar25 = *pbVar16 == 0;
        bVar24 = iVar19 == 0;
        bVar23 = iVar20 == 0;
        if ((bVar25 || bVar24) || bVar23) {
          ppcVar27 = (code **)&stack0xffffffec;
        }
        if ((bVar25 || bVar24) || bVar23) {
          ppcVar27 = (code **)((int)ppcVar27 + 0x10);
        }
                    // WARNING: Could not recover jumptable at 0x80028e0c. Too many branches
                    // WARNING: Treating indirect jump as call
        if ((bVar25 || bVar24) || bVar23) {
          (**ppcVar27)();
          return;
        }
      }
      goto code_r0x8000a750;
    }
    uVar22 = (uint)*(ushort *)(pbVar16 + 2);
    uVar18 = (uint)*(ushort *)(PTR_DAT_80029144 + 4);
    uVar14 = uVar18 + 0x108;
    bVar25 = uVar14 <= uVar22;
    bVar23 = uVar22 == uVar14;
    if (bVar25 && !bVar23) {
      uVar14 = uVar18 + 0x200;
    }
    if (bVar25 && !bVar23) {
      uVar14 = uVar14 + 0x2b;
    }
    if (bVar25 && !bVar23) {
      bVar25 = uVar22 <= uVar14;
      bVar23 = uVar14 == uVar22;
    }
    if (bVar25 && !bVar23) {
      uVar14 = (uint)*(ushort *)(PTR_DAT_80029144 + 6);
      uVar21 = (uint)*(ushort *)(pbVar16 + 4);
      bVar25 = uVar14 + 0x3b <= uVar21;
      bVar23 = uVar21 == uVar14 + 0x3b;
      if (bVar25 && !bVar23) {
        uVar14 = uVar14 + 0x76;
      }
      if (bVar25 && !bVar23) {
        bVar25 = uVar21 <= uVar14;
        bVar23 = uVar14 == uVar21;
      }
      if (bVar25 && !bVar23) {
        bVar1 = *pbVar16;
        while (bVar1 != 0) {
          uVar22 = (uint)*(ushort *)(pbVar16 + 2);
          uVar18 = uVar15;
          if ((0x19c < uVar22) && (uVar18 = uVar22, 0x2c0 < uVar22)) {
            uVar18 = 0x2c0;
          }
          uVar28 = FUN_8003979c(uVar18 - 0x19d);
          FUN_800393ec((int)uVar28,(int)((ulonglong)uVar28 >> 0x20),DAT_80029154,uVar3);
          uVar4 = FUN_8003972c();
          puVar17[3] = uVar4;
          display_sys_menu_grid_brightness(1);
          display_grid_brightness_slider();
          tp_i2c_read_status();
          bVar1 = *pbVar16;
        }
        goto LAB_80028f04;
      }
    }
    if ((uVar22 <= uVar18 + 0xf4) || (uVar18 + 0x23f <= uVar22)) {
LAB_80029004:
      bVar1 = *pbVar16;
      goto joined_r0x80028f00;
    }
    uVar15 = (uint)*(ushort *)(PTR_DAT_80029144 + 6);
    uVar18 = (uint)*(ushort *)(pbVar16 + 4);
    bVar25 = uVar15 + 0x3b <= uVar18;
    bVar23 = uVar18 == uVar15 + 0x3b;
    if (bVar25 && !bVar23) {
      uVar15 = uVar15 + 0x76;
    }
    if (bVar25 && !bVar23) {
      bVar25 = uVar18 <= uVar15;
      bVar23 = uVar15 == uVar18;
    }
    if (!bVar25 || bVar23) goto LAB_80029004;
  }
LAB_80028f04:
  bVar25 = iVar19 == 0;
  bVar23 = iVar20 == 0;
  bVar24 = !bVar24;
  puVar17[8] = 0;
  if ((bVar25 || bVar23) || bVar24) {
    ppcVar27 = (code **)&stack0xffffffec;
  }
  if ((bVar25 || bVar23) || bVar24) {
    ppcVar27 = (code **)((int)ppcVar27 + 0x10);
  }
                    // WARNING: Could not recover jumptable at 0x80028f1c. Too many branches
                    // WARNING: Treating indirect jump as call
  if ((bVar25 || bVar23) || bVar24) {
    (**ppcVar27)();
    return;
  }
code_r0x8000a750:
  puVar17 = DAT_8000a7ec;
  ppcVar27[9] = ppcVar27[9];
  ppcVar27[8] = ppcVar27[2];
  ppcVar27[7] = ppcVar27[1];
  puVar26 = ppcVar27 + 6;
  *puVar26 = *ppcVar27;
  if (DAT_8000a7ec[10] == '\x01') {
    DAT_8000a7ec[10] = 0;
    restore_screen_under_calibration_texts(*(undefined *)puVar26);
  }
  if (puVar17[8] == '\x01') {
    puVar17[8] = 0;
    display_sys_menu_disp_brightness(0,*(undefined *)puVar26);
    FUN_8001c6c0();
  }
  if (puVar17[9] == '\x01') {
    puVar17[9] = 0;
    display_sys_menu_grid_brightness(0,*(undefined *)puVar26);
    restore_screen_under_grid_brightness_slider(*(undefined *)puVar26);
  }
  if (puVar17[7] == '\x01') {
    FUN_800268ec();
  }
  FUN_80016b8c();
  puVar17[8] = 0;
  puVar17[9] = 0;
  puVar17[10] = 0;
  puVar17[6] = 0;
  puVar17[0xb] = 0;
  *puVar17 = 0;
  puVar17[7] = 0;
  puVar17[0xc] = 0;
  puVar7 = DAT_8000a7f0;
  *(undefined2 *)(puVar17 + 2) = 0;
  *(undefined2 *)(puVar17 + 4) = 0;
  *puVar7 = 0;
  puVar7[1] = 0;
  return;
}



void setup_main_menu(void)

{
  int iVar1;
  
  iVar1 = DAT_80029194;
  *(undefined *)(DAT_80029194 + 6) = 1;
  save_screen_under_main_menu();
  display_slide_down_main_menu();
  display_highlight_main_menu_item();
  if (*(char *)(iVar1 + 6) == '\0') {
    return;
  }
  do {
    handle_main_menu_touch();
  } while (*(char *)(iVar1 + 6) != '\0');
  return;
}



void FUN_80029198(undefined4 param_1,int param_2)

{
  int iVar1;
  
  FUN_80037f54(1,param_1,param_2);
  iVar1 = DAT_800291d8;
  *DAT_800291dc = 3;
  *(int *)(iVar1 + 8) = *(int *)(iVar1 + 8) - param_2;
  *(undefined *)(iVar1 + 0xc) = 0;
  return;
}



uint scope_process_trigger(void)

{
  ushort uVar1;
  bool bVar2;
  bool bVar3;
  uint uVar4;
  uint uVar5;
  byte bVar6;
  int iVar7;
  int iVar8;
  bool bVar9;
  bool bVar10;
  
  bVar6 = *(byte *)(DAT_80029300 + 10);
  bVar2 = false;
  bVar10 = 10 < bVar6;
  bVar9 = bVar6 == 0xb;
  if (bVar10) {
    bVar6 = *(byte *)(DAT_80029300 + 0x21);
  }
  uVar4 = 1;
  bVar3 = false;
  if (bVar10) {
    bVar9 = bVar6 == 0;
  }
  if (!bVar9) {
    return 0;
  }
  if (0x18 < *(byte *)(DAT_80029300 + 10)) {
    return 0;
  }
  iVar7 = DAT_80029308;
  if (*(char *)(DAT_80029300 + 0x23) != '\0') {
    iVar7 = DAT_8002930c;
  }
  uVar5 = DAT_80029304;
  if (*(char *)(DAT_80029300 + 0x22) == '\0') {
    do {
      iVar8 = iVar7 + uVar5 * 2;
      if ((*(ushort *)(iVar8 + -2) < (ushort)*(byte *)(DAT_80029300 + 0x28)) &&
         ((ushort)*(byte *)(DAT_80029300 + 0x28) <= *(ushort *)(iVar8 + 2))) goto LAB_80029294;
      uVar5 = uVar5 + 1 & 0xfffeffff;
    } while (uVar5 < DAT_80029304 + 10);
  }
  else {
    do {
      iVar8 = iVar7 + uVar5 * 2;
      if (((ushort)*(byte *)(DAT_80029300 + 0x28) < *(ushort *)(iVar8 + -2)) &&
         (*(ushort *)(iVar8 + 2) <= (ushort)*(byte *)(DAT_80029300 + 0x28))) goto LAB_80029294;
      uVar5 = uVar5 + 1 & 0xfffeffff;
    } while (uVar5 < DAT_80029304 + 10);
  }
LAB_800292ac:
  uVar5 = 100;
  do {
    uVar1 = *(ushort *)(iVar7 + uVar5 * 2);
    if (*(byte *)(DAT_80029300 + 0x28) < uVar1) {
      bVar2 = true;
    }
    if (uVar1 < *(byte *)(DAT_80029300 + 0x28)) {
      bVar3 = true;
    }
    uVar5 = uVar5 + 1 & 0xfffeffff;
  } while (uVar5 < DAT_80029310);
  if (!bVar2 || !bVar3) {
    return 0;
  }
  return uVar4;
LAB_80029294:
  uVar4 = 0;
  goto LAB_800292ac;
}



void FUN_80029314(void)

{
  byte bVar1;
  uint *ptr;
  char *pcVar2;
  int iVar3;
  undefined2 uVar4;
  int iVar5;
  uint uVar6;
  ushort *puVar7;
  int iVar8;
  uint uVar9;
  uint uVar10;
  bool bVar11;
  bool bVar12;
  bool bVar13;
  
  pcVar2 = DAT_800294ac;
  if ((*DAT_800294ac == '\0') || (DAT_800294ac[0xc] != '\0')) {
    if ((DAT_800294ac[0xc] != '\0') && (*DAT_800294ac == '\0')) {
      DAT_800294ac[0x23] = '\x01';
      display_trigger_settings(0);
      fpga_write_cmd('\x15');
      fpga_write_data(pcVar2[0x23]);
    }
  }
  else {
    DAT_800294ac[0x23] = '\0';
    display_trigger_settings(0);
    fpga_write_cmd('\x15');
    fpga_write_data(pcVar2[0x23]);
  }
  iVar3 = DAT_800294b4;
  iVar8 = DAT_800294b0;
  uVar9 = 0;
  do {
    iVar5 = (uVar9 * 0x14 & 0xffe0ffff) - 1;
    do {
      bVar13 = SCARRY4(iVar5,1);
      bVar11 = iVar5 + 1 < 0;
      bVar12 = iVar5 != -1;
      if (bVar12 && bVar11 == bVar13) {
        iVar5 = iVar5 + -1;
      }
    } while (bVar12 && bVar11 == bVar13);
    uVar4 = FUN_8001b058(1);
    *(undefined2 *)(iVar8 + uVar9 * 2) = uVar4;
    uVar4 = FUN_8001b260(1);
    iVar5 = uVar9 * 2;
    uVar9 = uVar9 + 1 & 0xfffeffff;
    *(undefined2 *)(iVar3 + iVar5) = uVar4;
    uVar10 = DAT_800294b8;
  } while (uVar9 < 1000);
  if (pcVar2[0x23] == '\0') {
    FUN_800060a8();
    FUN_800061a4();
    FUN_80003dc0();
    FUN_80006170();
    uVar9 = 0;
    iVar8 = 1000;
    puVar7 = DAT_800294c0;
    do {
      uVar6 = (uint)*puVar7;
      puVar7 = puVar7 + 1;
      if (uVar9 < uVar6) {
        uVar9 = uVar6;
      }
      if (uVar6 < uVar10) {
        uVar10 = uVar6;
      }
      iVar8 = iVar8 + -1;
    } while (iVar8 != 0);
    *(short *)(pcVar2 + 0x26) = (short)(uVar9 + uVar10 >> 1);
  }
  else {
    FUN_80008e04();
    FUN_80008f00();
    FUN_80006be0();
    FUN_80008ecc();
    uVar9 = 0;
    iVar8 = 1000;
    puVar7 = DAT_800294bc;
    do {
      uVar6 = (uint)*puVar7;
      puVar7 = puVar7 + 1;
      if (uVar9 < uVar6) {
        uVar9 = uVar6;
      }
      if (uVar6 < uVar10) {
        uVar10 = uVar6;
      }
      iVar8 = iVar8 + -1;
    } while (iVar8 != 0);
    *(short *)(pcVar2 + 0x26) = (short)(uVar9 + uVar10 >> 1);
  }
  calculate_trigger_level();
  fpga_write_cmd('\x17');
  ptr = PE_CFG0;
  bVar1 = pcVar2[0x28];
  gpio_config_pin(PE_CFG0,0,1);
  gpio_config_pin(ptr,1,1);
  gpio_config_pin(ptr,2,1);
  gpio_config_pin(ptr,3,1);
  gpio_config_pin(ptr,4,1);
  gpio_config_pin(ptr,5,1);
  gpio_config_pin(ptr,6,1);
  gpio_config_pin(ptr,7,1);
  set_gpio_pin_high(ptr,9);
  set_gpio_pin_low(ptr,10);
  ptr[4] = (uint)bVar1 | ptr[4] & 0xffffff00;
  set_gpio_pin_low(ptr,8);
  ptr[4] = ptr[4] | 0x100;
  return;
}



void FUN_800294c4(void)

{
  int iVar1;
  uint uVar2;
  
  iVar1 = DAT_80029538;
  if (*(byte *)(DAT_80029534 + 10) < 0xb) {
    iVar1 = DAT_8002953c;
  }
  uVar2 = iVar1 - 5U & 0xffff;
  do {
    uVar2 = uVar2 - 1 & 0xffff;
  } while (uVar2 != 0);
  return;
}



void FUN_80029540(int param_1)

{
  if (param_1 == 1) {
    return;
  }
  if (param_1 != 2) {
    if (param_1 == 3) {
      *(undefined2 *)(DAT_8002956c + 0x86) = 0x90;
    }
    return;
  }
  *(short *)(DAT_8002956c + 0x82) = (short)DAT_80029570;
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_80029574(void)

{
  _DAT_01c00004 = _DAT_01c00004 & 0xfffffffc | 1;
  return;
}



void FUN_8002958c(int param_1,int param_2,int param_3,uint param_4)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  byte bVar4;
  
  iVar3 = DAT_80029638;
  if (param_1 == 1) {
    return;
  }
  uVar2 = param_3 + 0x1ffU >> 9;
  uVar1 = uVar2 * 0x20;
  if (param_1 == 2) {
    bVar4 = 0;
    while (uVar2 != 0) {
      uVar1 = uVar1 >> 1;
      bVar4 = bVar4 + 1;
      uVar2 = uVar1;
    }
    *(short *)(DAT_80029638 + 0x92) = (short)(param_4 >> 3);
    *(byte *)(iVar3 + 0x90) = bVar4 & 0xf;
    if (param_2 != 0) {
      *(byte *)(iVar3 + 0x90) = *(byte *)(iVar3 + 0x90) | 0x10;
      return;
    }
    return;
  }
  if (param_1 != 3) {
    return;
  }
  bVar4 = 0;
  while (uVar2 != 0) {
    uVar1 = uVar1 >> 1;
    bVar4 = bVar4 + 1;
    uVar2 = uVar1;
  }
  *(short *)(DAT_80029638 + 0x96) = (short)(param_4 >> 3);
  *(byte *)(iVar3 + 0x94) = bVar4 & 0xf;
  if (param_2 != 0) {
    *(byte *)(iVar3 + 0x94) = *(byte *)(iVar3 + 0x94) | 0x10;
    return;
  }
  return;
}



void FUN_8002963c(int param_1)

{
  byte bVar1;
  
  if (param_1 == 1) {
    bVar1 = *(byte *)(DAT_80029658 + 0x40) | 0x40;
  }
  else {
    bVar1 = *(byte *)(DAT_80029658 + 0x40) & 0xbf;
  }
  *(byte *)(DAT_80029658 + 0x40) = bVar1;
  return;
}



undefined4 FUN_8002965c(int param_1,int param_2,int param_3,int param_4)

{
  undefined2 uVar1;
  int iVar2;
  ushort uVar3;
  
  iVar2 = DAT_8002970c;
  if (param_2 == 1) {
    uVar3 = 0x100;
  }
  else {
    uVar3 = (ushort)((uint)(param_4 << 0x15) >> 0x10);
    if (param_2 != 2) {
      if (param_2 != 3) {
        return 0xffffffff;
      }
      *(undefined2 *)(DAT_8002970c + 0x86) = 0x90;
      if (param_3 != 0) {
        *(undefined2 *)(iVar2 + 0x86) = 0x90;
      }
      *(ushort *)(iVar2 + 0x84) = *(ushort *)(iVar2 + 0x84) | uVar3 >> 5;
      if (param_1 == 2) {
        uVar3 = *(ushort *)(iVar2 + 0x86) | 0x4000;
      }
      else {
        uVar3 = *(ushort *)(iVar2 + 0x86) & 0xbfff;
        if (param_1 != 3) {
          *(ushort *)(iVar2 + 0x86) = uVar3;
          return 0;
        }
      }
      *(ushort *)(iVar2 + 0x86) = uVar3;
      return 0;
    }
    uVar1 = (undefined2)DAT_80029710;
    *(undefined2 *)(DAT_8002970c + 0x82) = uVar1;
    if (param_3 != 0) {
      *(undefined2 *)(iVar2 + 0x82) = uVar1;
    }
    *(ushort *)(iVar2 + 0x80) = *(ushort *)(iVar2 + 0x80) | uVar3 >> 5;
    if (param_1 == 2) {
      uVar3 = *(ushort *)(iVar2 + 0x82) | 0x4000;
    }
    else {
      uVar3 = *(ushort *)(iVar2 + 0x82) & 0xbfff;
    }
  }
  *(ushort *)(iVar2 + 0x82) = uVar3;
  return 0;
}



void FUN_80029714(int param_1,int param_2)

{
  int iVar1;
  byte bVar2;
  
  iVar1 = DAT_80029774;
  if (param_1 == 1) {
    bVar2 = *(byte *)(DAT_80029774 + 0x40) & 0x7f;
  }
  else {
    if (param_1 != 2) {
      *(byte *)(DAT_80029774 + 0x40) = *(byte *)(DAT_80029774 + 0x40) & 0x7f;
      goto LAB_80029740;
    }
    bVar2 = *(byte *)(DAT_80029774 + 0x40) | 0x80;
  }
  *(byte *)(DAT_80029774 + 0x40) = bVar2;
LAB_80029740:
  if ((param_2 == 1 || param_2 == 2) || (param_2 != 3)) {
    bVar2 = *(byte *)(iVar1 + 0x40) & 0xdf;
  }
  else {
    bVar2 = *(byte *)(iVar1 + 0x40) | 0x20;
  }
  *(byte *)(iVar1 + 0x40) = bVar2;
  return;
}



void FUN_80029778(void)

{
  *(ushort *)(DAT_8002978c + 0x82) = *(ushort *)(DAT_8002978c + 0x82) | 0x80;
  return;
}



ushort FUN_80029790(void)

{
  return *(ushort *)(DAT_800297a0 + 0x82) & 0x10;
}



undefined4 FUN_800297a4(int param_1)

{
  int iVar1;
  ushort uVar2;
  
  iVar1 = DAT_80029808;
  if (param_1 == 1) {
    *(ushort *)(DAT_80029808 + 0x82) = *(ushort *)(DAT_80029808 + 0x82) & 0xffdf;
    uVar2 = *(ushort *)(iVar1 + 0x82) & 0xfffb;
  }
  else {
    if (param_1 != 2) {
      if (param_1 == 3) {
        *(ushort *)(DAT_80029808 + 0x86) = *(ushort *)(DAT_80029808 + 0x86) & 0xffdf;
        *(ushort *)(iVar1 + 0x86) = *(ushort *)(iVar1 + 0x86) & 0xffbf;
        return 0;
      }
      return 0xffffffff;
    }
    uVar2 = *(ushort *)(DAT_80029808 + 0x82) & 0xffcf;
  }
  *(ushort *)(iVar1 + 0x82) = uVar2;
  return 0;
}



undefined4 FUN_8002980c(int param_1)

{
  ushort uVar1;
  
  if (param_1 == 1) {
    uVar1 = *(ushort *)(DAT_80029858 + 0x82) | 0x20;
  }
  else {
    if (param_1 != 2) {
      if (param_1 == 3) {
        *(ushort *)(DAT_80029858 + 0x86) = *(ushort *)(DAT_80029858 + 0x86) | 0x20;
        return 0;
      }
      return 0xffffffff;
    }
    uVar1 = *(ushort *)(DAT_80029858 + 0x82) | 0x10;
  }
  *(ushort *)(DAT_80029858 + 0x82) = uVar1;
  return 0;
}



undefined4 FUN_8002985c(int param_1)

{
  if ((param_1 != 1 && param_1 != 2) && (param_1 != 3)) {
    return 0xffffffff;
  }
  return 0;
}



ushort FUN_8002988c(int param_1)

{
  ushort uVar1;
  
  if (param_1 == 1) {
    uVar1 = *(ushort *)(DAT_800298c0 + 0x82);
  }
  else {
    if ((param_1 == 2) || (param_1 != 3)) {
      return 0;
    }
    uVar1 = *(ushort *)(DAT_800298c0 + 0x86);
  }
  return uVar1 & 1;
}



ushort FUN_800298c4(int param_1)

{
  ushort uVar1;
  
  if (param_1 != 1) {
    if (param_1 == 2) {
      uVar1 = *(ushort *)(DAT_800298ec + 0x82) & 1;
    }
    else {
      uVar1 = 0;
    }
    return uVar1;
  }
  return *(ushort *)(DAT_800298ec + 0x82) & 2;
}



undefined4 FUN_800298f0(void)

{
  undefined4 uVar1;
  
  if ((*(byte *)(DAT_80029908 + 0x40) & 0x10) == 0) {
    uVar1 = 2;
  }
  else {
    uVar1 = 3;
  }
  return uVar1;
}



undefined4 FUN_8002990c(int param_1,int param_2)

{
  undefined2 uVar1;
  
  if (param_2 == 0) {
    if (param_1 == 1) {
      uVar1 = 0x40;
      goto LAB_80029968;
    }
  }
  else {
    if (param_1 == 1) {
      uVar1 = 0x48;
LAB_80029968:
      *(undefined2 *)(DAT_80029974 + 0x82) = uVar1;
      return 0;
    }
  }
  if ((param_1 != 2) && (param_1 == 3)) {
    *(ushort *)(DAT_80029974 + 0x86) = *(ushort *)(DAT_80029974 + 0x86) & 0xfff2;
    return 0;
  }
  return 0xffffffff;
}



undefined2 FUN_80029978(void)

{
  return *(undefined2 *)(DAT_80029984 + 0x82);
}



void FUN_80029988(undefined param_1)

{
  *(undefined *)(DAT_80029994 + 0x98) = param_1;
  return;
}



undefined4 FUN_800299ac(int param_1,int param_2)

{
  ushort uVar1;
  
  if (param_2 == 0) {
    if (param_1 == 1) {
      uVar1 = 2;
      goto LAB_800299d0;
    }
  }
  else {
    if (param_1 == 1) {
      uVar1 = 10;
      goto LAB_800299d0;
    }
  }
  if (param_1 != 2) {
    return 0xffffffff;
  }
  uVar1 = *(ushort *)(DAT_80029a08 + 0x82) & 0xfffb | 1;
LAB_800299d0:
  *(ushort *)(DAT_80029a08 + 0x82) = uVar1;
  return 0;
}



void FUN_80029a0c(void)

{
  *DAT_80029a24 = *DAT_80029a24 & 0xffffff8f | 0x10c00;
  return;
}



void FUN_80029a28(void)

{
  *DAT_80029a40 = *DAT_80029a40 & 0xffffff8f | 0x20000;
  return;
}



void FUN_80029a44(int param_1)

{
  if (param_1 == 1) {
    *DAT_80029a94 = *DAT_80029a94 & 0xffff3f8f | 0x8000;
    return;
  }
  if (param_1 != 2) {
    *DAT_80029a94 = *DAT_80029a94 & 0xffff3f8f;
    return;
  }
  *DAT_80029a94 = *DAT_80029a94 & 0xffffff8f | 0xc000;
  return;
}



void FUN_80029a98(int param_1)

{
  if (param_1 == 1) {
    *DAT_80029ae8 = *DAT_80029ae8 & 0xffffcf8f | 0x2000;
    return;
  }
  if (param_1 != 2) {
    *DAT_80029ae8 = *DAT_80029ae8 & 0xffffcf8f;
    return;
  }
  *DAT_80029ae8 = *DAT_80029ae8 & 0xffffff8f | 0x3000;
  return;
}



undefined FUN_80029aec(void)

{
  return *(undefined *)(DAT_80029af8 + 0x42);
}



void FUN_80029afc(int param_1,uint param_2)

{
  undefined2 uVar1;
  
  uVar1 = (undefined2)(1 << (param_2 & 0xff));
  if (param_1 != 1 && param_1 != 2) {
    if (param_1 == 3) {
      *(undefined2 *)(DAT_80029b2c + 0x46) = uVar1;
    }
    return;
  }
  *(undefined2 *)(DAT_80029b2c + 0x44) = uVar1;
  return;
}



void FUN_80029b30(int param_1)

{
  if (param_1 != 1 && param_1 != 2) {
    if (param_1 == 3) {
      *(short *)(DAT_80029b58 + 0x46) = (short)DAT_80029b54;
    }
    return;
  }
  *(short *)(DAT_80029b58 + 0x44) = (short)DAT_80029b54;
  return;
}



void FUN_80029b5c(undefined param_1)

{
  *(undefined *)(DAT_80029b68 + 0x4c) = param_1;
  return;
}



void FUN_80029b6c(void)

{
  *(undefined *)(DAT_80029b7c + 0x4c) = 0xff;
  return;
}



void FUN_80029b80(int param_1)

{
  if (param_1 != 2) {
    if (param_1 == 3) {
      *(undefined2 *)(DAT_80029ba0 + 0x4a) = 0;
    }
    return;
  }
  *(undefined2 *)(DAT_80029ba0 + 0x48) = 0;
  return;
}



void FUN_80029ba4(void)

{
  *(undefined *)(DAT_80029bb4 + 0x50) = 0;
  return;
}



void FUN_80029bb8(int param_1,uint param_2)

{
  ushort uVar1;
  
  uVar1 = (ushort)(1 << (param_2 & 0xff));
  if (param_1 == 2) {
    *(ushort *)(DAT_80029bf4 + 0x48) = *(ushort *)(DAT_80029bf4 + 0x48) | uVar1;
    return;
  }
  if (param_1 != 3) {
    return;
  }
  *(ushort *)(DAT_80029bf4 + 0x4a) = *(ushort *)(DAT_80029bf4 + 0x4a) | uVar1;
  return;
}



void FUN_80029bf8(byte param_1)

{
  *(byte *)(DAT_80029c0c + 0x50) = param_1 | *(byte *)(DAT_80029c0c + 0x50);
  return;
}



undefined2 FUN_80029c10(int param_1)

{
  undefined2 uVar1;
  
  if (param_1 != 1 && param_1 != 2) {
    if (param_1 == 3) {
      uVar1 = *(undefined2 *)(DAT_80029c34 + 0x46);
    }
    else {
      uVar1 = 0;
    }
    return uVar1;
  }
  return *(undefined2 *)(DAT_80029c34 + 0x44);
}



undefined FUN_80029c38(void)

{
  return *(undefined *)(DAT_80029c44 + 0x4c);
}



void FUN_80029c48(void)

{
  undefined4 *puVar1;
  byte bVar2;
  int iVar3;
  uint uVar4;
  
  puVar1 = DAT_80029d78;
  *(byte *)DAT_80029d78 = (byte)*DAT_80029d78;
  *(byte *)puVar1 = (byte)*puVar1;
  *(byte *)puVar1 = (byte)*puVar1 & 0xfe;
  *(byte *)puVar1 = (byte)*puVar1 | 0x80;
  *(byte *)puVar1 = (byte)*puVar1 | 1;
  *(byte *)puVar1 = (byte)*puVar1 & 0xfe;
  uVar4 = 0x14;
  iVar3 = 0;
  do {
    *(byte *)puVar1 = (byte)*puVar1;
    *(byte *)puVar1 = (byte)*puVar1;
    *(byte *)puVar1 = (byte)*puVar1 & 0xfe;
    if ((uVar4 & 1) == 0) {
      bVar2 = (byte)*puVar1 & 0x7f;
    }
    else {
      bVar2 = (byte)*puVar1 | 0x80;
    }
    *(byte *)puVar1 = bVar2;
    iVar3 = iVar3 + 1;
    uVar4 = (int)uVar4 >> 1;
    *(byte *)puVar1 = (byte)*puVar1 | 1;
    *(byte *)puVar1 = (byte)*puVar1 & 0xfe;
  } while (iVar3 < 5);
  uVar4 = 3;
  iVar3 = 0;
  do {
    *(byte *)puVar1 = (byte)*puVar1;
    *(byte *)puVar1 = (byte)*puVar1;
    *(byte *)puVar1 = (byte)*puVar1 & 0xfe;
    if ((uVar4 & 1) == 0) {
      bVar2 = (byte)*puVar1 & 0x7f;
    }
    else {
      bVar2 = (byte)*puVar1 | 0x80;
    }
    *(byte *)puVar1 = bVar2;
    iVar3 = iVar3 + 1;
    uVar4 = (int)uVar4 >> 1;
    *(byte *)puVar1 = (byte)*puVar1 | 1;
    *(byte *)puVar1 = (byte)*puVar1 & 0xfe;
  } while (iVar3 < 2);
  return;
}



undefined2 FUN_80029d7c(int param_1)

{
  if ((param_1 != 1) && ((param_1 == 2 || (param_1 != 3)))) {
    return 0;
  }
  return *(undefined2 *)(DAT_80029da8 + 0x88);
}



uint FUN_80029dac(undefined4 *param_1,uint param_2,undefined4 *param_3)

{
  uint uVar1;
  undefined4 *puVar2;
  uint uVar3;
  
  uVar3 = param_2 >> 2;
  uVar1 = param_2 & 3;
  puVar2 = param_3;
  if (uVar3 != 0) {
    do {
      uVar3 = uVar3 - 1;
      param_3 = puVar2 + 1;
      *puVar2 = *param_1;
      puVar2 = param_3;
    } while (0 < (int)uVar3);
  }
  if (uVar1 != 0) {
    do {
      uVar1 = uVar1 - 1;
      *(undefined *)param_3 = *(undefined *)param_1;
      param_3 = (undefined4 *)((int)param_3 + 1);
    } while (0 < (int)uVar1);
  }
  return param_2;
}



void FUN_80029e00(undefined param_1)

{
  *(undefined *)(DAT_80029e0c + 0x42) = param_1;
  return;
}



void FUN_80029e10(int param_1,int param_2,char param_3)

{
  byte bVar1;
  char cVar2;
  bool bVar3;
  
  if (param_1 == 1) {
    bVar3 = param_2 == 2;
    if (bVar3) {
      param_2 = -4;
    }
    cVar2 = (char)param_2;
    if (!bVar3) {
      cVar2 = -2;
    }
    bVar1 = *(byte *)(DAT_80029e48 + 0x43) | cVar2 + param_3 * '\x04' | 1;
  }
  else {
    bVar1 = 0;
  }
  *(byte *)(DAT_80029e48 + 0x43) = bVar1;
  return;
}



int FUN_80029e4c(int param_1)

{
  return param_1 * 4 + 0x1c13000;
}



uint FUN_80029e5c(undefined4 *param_1,uint param_2,undefined4 *param_3)

{
  uint uVar1;
  undefined4 *puVar2;
  uint uVar3;
  
  uVar3 = param_2 >> 2;
  uVar1 = param_2 & 3;
  puVar2 = param_3;
  if (uVar3 != 0) {
    do {
      param_3 = puVar2 + 1;
      *param_1 = *puVar2;
      uVar3 = uVar3 - 1;
      puVar2 = param_3;
    } while (0 < (int)uVar3);
  }
  if (uVar1 != 0) {
    do {
      *(undefined *)param_1 = *(undefined *)param_3;
      uVar1 = uVar1 - 1;
      param_3 = (undefined4 *)((int)param_3 + 1);
    } while (0 < (int)uVar1);
  }
  return param_2;
}



void copy_screen_to_frame2(void)

{
  int *piVar1;
  int iVar2;
  uint uVar3;
  
  set_screen_to_global_pointer();
  iVar2 = Screen_Frame_Buffer_2;
  piVar1 = Global_Frame_Buffer_Pointer;
  uVar3 = 0;
  do {
    memcpy((void *)(iVar2 + uVar3 * 0x640),(void *)(*piVar1 + uVar3 * 0x640),0x640);
    uVar3 = uVar3 + 1 & 0xfffeffff;
  } while (uVar3 < 0x1e0);
  *Global_Frame_Buffer_Pointer = Screen_Frame_Buffer;
  return;
}



void copy_frame2_to_frame(void)

{
  int iVar1;
  int *piVar2;
  uint uVar3;
  
  piVar2 = Global_Screen_Pointer;
  iVar1 = Screen_Frame_Buffer_2;
  uVar3 = 0;
  do {
    memcpy((void *)(*piVar2 + uVar3 * 0x640),(void *)(iVar1 + uVar3 * 0x640),0x640);
    uVar3 = uVar3 + 1 & 0xfffeffff;
  } while (uVar3 < 0x1e0);
  return;
}



void FUN_80029f48(void)

{
  undefined *puVar1;
  
  tp_i2c_read_status();
  if (0xa0 < *(ushort *)(PTR_DAT_80029fe4 + 2) - 0x59) {
    return;
  }
  if (*(ushort *)(PTR_DAT_80029fe4 + 4) < 0xd3) {
    return;
  }
  if (0x13f < *(ushort *)(PTR_DAT_80029fe4 + 4)) {
    return;
  }
  if (*PTR_DAT_80029fe4 == '\0') {
    return;
  }
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(0x58,0xd2,0xfc,(ushort)DAT_80029fe8);
  set_display_fg_color(DAT_80029fec);
  select_font(PTR_FONT_5_80029ff0);
  set_font_paint_mode(2);
  display_text(s_ON___OFF_80029ff4,0x7d,0xfe);
  copy_frame_to_screen();
  *PTR_DAT_8002a000 = 0;
  tp_i2c_read_status();
  puVar1 = PTR_DAT_8002b120;
  if (*PTR_DAT_8002b120 == '\0') {
    return;
  }
  do {
    tp_i2c_read_status();
  } while (*puVar1 != '\0');
  return;
}



undefined4 FUN_8002a004(void)

{
  FUN_80037f54(1);
  return 0;
}



void FUN_8002a018(void)

{
  undefined4 uVar1;
  uint uVar2;
  uint uVar3;
  uint extraout_r1;
  
  FUN_80035d58(PTR_s_sunxi_udc_disable_8002a080);
  FUN_80029ba4();
  FUN_80029b80(3);
  FUN_80029b80(2);
  FUN_80029b30(2);
  FUN_80029b30(3);
  FUN_80029b6c();
  FUN_80035d58(PTR_s_usbd_stop_work_8002a084);
  FUN_8002963c(0);
  uVar1 = DAT_8002a088;
  uVar3 = FUN_80035f04(DAT_8002a088);
  FUN_800391f0(uVar1,uVar3 & 0xfbffffff);
  uVar3 = get_timer_ticks();
  do {
    uVar2 = get_timer_ticks();
  } while (uVar2 - uVar3 < extraout_r1);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void setup_usb_int(void)

{
  uint uVar1;
  uint uVar2;
  uint extraout_r1;
  
  FUN_80035d58(PTR_s_sunxi_udc_disable_8002a15c);
  FUN_80029ba4();
  FUN_80029b80(3);
  FUN_80029b80(2);
  FUN_80029b30(2);
  FUN_80029b30(3);
  FUN_80029b6c();
  FUN_80035d58(PTR_s_usbd_stop_work_8002a160);
  FUN_8002963c(0);
  setup_interrupt(1,0x1a,(uint)PTR_FUN_8002a164,2);
  change_status_reg_control_bits('\x7f');
  FUN_80035d58(PTR_s_sunxi_udc_enable_called_8002a168);
  *(undefined *)(DAT_8002a16c + 1) = 0;
  FUN_80035d58(PTR_s_CONFIG_USB_GADGET_DUALSPEED__USB_8002a170);
  FUN_80029714(4,3);
  FUN_80029bf8(0);
  FUN_80029bf8(1);
  FUN_80029bf8(2);
  FUN_80029bf8(5);
  FUN_80029bb8(2,0);
  FUN_80035d58(PTR_s_usbd_start_work_8002a174);
  FUN_8002963c(1);
  uVar1 = get_timer_ticks();
  do {
    uVar2 = get_timer_ticks();
  } while (uVar2 - uVar1 < extraout_r1);
  return;
}



void some_usb_stuff(void)

{
  FUN_80021be0();
  FUN_800376f8(s_usb_init____80037ec4);
  if (*DAT_80037ed4 != '\x04') {
    *DAT_80037ed4 = '\x04';
    FUN_80038f04();
    FUN_80029c48();
    FUN_80029574();
    FUN_80029a0c();
    FUN_80029a28();
    FUN_80029a44(2);
    FUN_80029a98(2);
    FUN_80029e10(0,0);
    return;
  }
  FUN_800376f8(s_usb_type_err____80037ed8);
  return;
}



void FUN_8002a190(void)

{
  uint uVar1;
  undefined *puVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  undefined2 *puVar6;
  undefined2 *puVar7;
  uint uVar8;
  uint uVar9;
  undefined auStack576 [560];
  
  puVar2 = PTR_DAT_8002a1b4;
  *PTR_DAT_8002a1b4 = 0;
  FUN_8002a1b8();
  *puVar2 = 1;
  uVar9 = 0;
  FUN_8002c7a4();
  FUN_8000b2ac();
  uVar4 = DAT_8002a2a4;
  iVar3 = DAT_8002a2a0;
  uVar8 = 0;
  do {
    if (*(short *)(iVar3 + uVar8 * 2 + 0x1e) == 0) break;
    iVar5 = FUN_800337c4(auStack576,uVar8 * 0xf + iVar3 + 0x7ee,1);
    if (iVar5 == 4) {
      if (uVar8 < uVar4) {
        iVar5 = iVar3 + (uVar8 - uVar9) * 2;
        puVar7 = (undefined2 *)(iVar5 + 0x1e);
        puVar6 = (undefined2 *)(iVar5 + 0x1c);
        if ((uVar4 - uVar8 & 1) != 0) {
          puVar7 = (undefined2 *)(iVar5 + 0x20);
          puVar6 = (undefined2 *)(iVar5 + 0x1e);
          *puVar6 = *puVar7;
        }
        uVar1 = (uVar4 - uVar8) * 0x8000 >> 0x10;
        while (uVar1 != 0) {
          puVar6[1] = puVar7[1];
          puVar7 = puVar7 + 2;
          uVar1 = uVar1 - 1 & 0xffff;
          puVar6 = puVar6 + 2;
          *puVar6 = *puVar7;
        }
      }
      uVar9 = uVar9 + 1 & 0xfffeffff;
    }
    FUN_8003347c(auStack576);
    uVar8 = uVar8 + 1 & 0xfffeffff;
  } while (uVar8 < uVar4);
  *(undefined2 *)(DAT_8002a2a8 + 0xec) = 0;
  FUN_8002c8f4();
  return;
}



void FUN_8002a1b8(void)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  undefined2 *puVar5;
  undefined2 *puVar6;
  uint uVar7;
  uint uVar8;
  undefined auStack576 [556];
  
  uVar8 = 0;
  FUN_8002c7a4();
  FUN_8000b2ac();
  uVar3 = DAT_8002a2a4;
  iVar2 = DAT_8002a2a0;
  uVar7 = 0;
  do {
    if (*(short *)(iVar2 + uVar7 * 2 + 0x1e) == 0) break;
    iVar4 = FUN_800337c4(auStack576,uVar7 * 0xf + iVar2 + 0x7ee,1);
    if (iVar4 == 4) {
      if (uVar7 < uVar3) {
        iVar4 = iVar2 + (uVar7 - uVar8) * 2;
        puVar6 = (undefined2 *)(iVar4 + 0x1e);
        puVar5 = (undefined2 *)(iVar4 + 0x1c);
        if ((uVar3 - uVar7 & 1) != 0) {
          puVar6 = (undefined2 *)(iVar4 + 0x20);
          puVar5 = (undefined2 *)(iVar4 + 0x1e);
          *puVar5 = *puVar6;
        }
        uVar1 = (uVar3 - uVar7) * 0x8000 >> 0x10;
        while (uVar1 != 0) {
          puVar5[1] = puVar6[1];
          puVar6 = puVar6 + 2;
          uVar1 = uVar1 - 1 & 0xffff;
          puVar5 = puVar5 + 2;
          *puVar5 = *puVar6;
        }
      }
      uVar8 = uVar8 + 1 & 0xfffeffff;
    }
    FUN_8003347c(auStack576);
    uVar7 = uVar7 + 1 & 0xfffeffff;
  } while (uVar7 < uVar3);
  *(undefined2 *)(DAT_8002a2a8 + 0xec) = 0;
  FUN_8002c8f4();
  return;
}



void FUN_8002a2ac(void)

{
  *(undefined *)(*DAT_8002a2c0 + 0x54) = 1;
  return;
}



void FUN_8002a2c4(int param_1)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  uint uVar4;
  undefined4 *local_34;
  int local_30;
  undefined4 local_2c;
  undefined4 uStack40;
  int local_24 [3];
  
  save_context();
  if (param_1 != 0) {
    local_34 = (undefined4 *)FUN_8001857c(param_1);
    local_2c = *local_34;
    uStack40 = local_34[1];
    uVar3 = local_34[8];
    uVar4 = local_34[10];
    FUN_800185cc(&local_34);
    iVar1 = FUN_8002abac(param_1);
    if (iVar1 != 0) {
      uVar2 = FUN_8002a630(param_1);
      if ((uVar4 & 2) != 0) {
        FUN_8002b01c(&local_2c,uVar2,uVar3);
      }
      local_34 = (undefined4 *)FUN_8001857c(param_1);
      local_24[0] = FUN_8001857c(uVar2);
      local_30 = FUN_8001857c(iVar1);
      *(undefined4 *)(local_30 + 0x20) = uVar3;
      local_34[8] = *(undefined4 *)(local_24[0] + 0x1c);
      *(int *)(local_24[0] + 0x1c) = param_1;
      FUN_800185cc(&local_34);
      FUN_800185cc(local_24);
      FUN_800185cc(&local_30);
    }
  }
  restore_context();
  return;
}



int FUN_8002a39c(short param_1,short param_2,short *param_3,short *param_4,int param_5,uint param_6,
                undefined4 param_7,int param_8)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  short *psVar6;
  bool bVar7;
  short *local_30;
  short *local_2c;
  
  psVar6 = param_4;
  local_30 = param_3;
  local_2c = param_4;
  save_context();
  iVar1 = DAT_8002a568;
  param_6 = param_6 | *(uint *)(DAT_8002a568 + 0x18);
  if (param_5 == 0) {
    if (*(short *)(DAT_8002a568 + 2) == 0) goto LAB_8002a448;
    param_5 = *(int *)(DAT_8002a568 + 0x44 + (uint)*(byte *)(*DAT_8002a56c + 0x11) * 4);
  }
  bVar7 = param_5 == -1;
  if (bVar7) {
    param_5 = 0;
  }
  if (!bVar7 && param_5 != 0) {
    local_2c = (short *)FUN_8001857c(param_5);
    if (param_3 == (short *)0x0) {
      psVar6 = (short *)(int)local_2c[2];
    }
    param_1 = param_1 + *local_2c;
    if (param_3 == (short *)0x0) {
      param_3 = (short *)((int)psVar6 + (1 - *local_2c));
    }
    psVar6 = local_2c;
    if (param_4 == (short *)0x0) {
      psVar6 = (short *)(int)local_2c[3];
    }
    param_2 = param_2 + local_2c[1];
    if (param_4 == (short *)0x0) {
      param_4 = (short *)((int)psVar6 + (1 - local_2c[1]));
    }
    FUN_800185cc(&local_2c);
  }
LAB_8002a448:
  iVar3 = FUN_80018388(param_8 + 0x2c);
  if (iVar3 != 0) {
    *(short *)(iVar1 + 2) = *(short *)(iVar1 + 2) + 1;
    local_30 = (short *)FUN_8001857c(iVar3);
    *local_30 = param_1;
    local_30[1] = param_2;
    local_30[2] = param_1 + (short)param_3 + -1;
    local_30[3] = param_2 + (short)param_4 + -1;
    uVar2 = DAT_8002a570;
    *(undefined4 *)(local_30 + 8) = param_7;
    *(uint *)(local_30 + 0x14) = *(uint *)(local_30 + 0x14) | param_6 & ~uVar2;
    FUN_800185cc(&local_30);
    if (*(int *)(iVar1 + 0x10) == 0) {
      *(int *)(iVar1 + 0x10) = iVar3;
    }
    else {
      iVar4 = FUN_8001861c();
      iVar5 = FUN_8001861c(iVar3);
      *(undefined4 *)(iVar5 + 0x14) = *(undefined4 *)(iVar4 + 0x14);
      *(int *)(iVar4 + 0x14) = iVar3;
    }
    FUN_8002ada8(iVar3,param_5);
    if ((param_6 & 0x20) != 0) {
      FUN_8002a900();
    }
    if ((param_6 & 1) != 0) {
      *(int *)(iVar1 + 0x24) = *(int *)(iVar1 + 0x24) + 1;
    }
    if ((param_6 & 0x40) != 0) {
      FUN_8002a2c4(iVar3);
    }
    if ((param_6 & 2) != 0) {
      local_30 = (short *)FUN_8001857c(iVar3);
      *(uint *)(local_30 + 0x14) = *(uint *)(local_30 + 0x14) | 2;
      FUN_800185cc(&local_30);
      FUN_8002a788(iVar3,0);
    }
    FUN_8002b0d8(iVar3,1);
  }
  restore_context();
  return iVar3;
}



undefined4 FUN_8002a5e4(void)

{
  return *(undefined4 *)(DAT_8002a600 + (uint)*(byte *)(*DAT_8002a5fc + 0x11) * 4);
}



int FUN_8002a604(int param_1)

{
  int iVar1;
  
  if (param_1 != 0) {
    save_context();
    iVar1 = FUN_8001861c(param_1);
    param_1 = *(int *)(iVar1 + 0x1c);
    restore_context();
  }
  return param_1;
}



int FUN_8002a630(int param_1)

{
  int iVar1;
  
  if (param_1 != 0) {
    save_context();
    iVar1 = FUN_8001861c(param_1);
    param_1 = *(int *)(iVar1 + 0x18);
    restore_context();
  }
  return param_1;
}



undefined8 FUN_8002a65c(undefined4 param_1,undefined4 param_2)

{
  int iVar1;
  int *piVar2;
  undefined *puVar3;
  int iVar4;
  int iVar5;
  undefined4 *puVar6;
  int iVar7;
  undefined4 uVar8;
  int iVar9;
  
  piVar2 = DAT_8002a768;
  iVar1 = DAT_8002a764;
  if (*(char *)(DAT_8002a764 + 1) == '\0') {
    *(undefined4 *)(DAT_8002a764 + 0x10) = 0;
    *(undefined4 *)(iVar1 + 0x34) = 0;
    puVar3 = PTR_FUN_8002a76c;
    *(undefined4 *)(*piVar2 + 0x44) = 0;
    *(undefined2 *)(iVar1 + 4) = 0;
    iVar9 = 0;
    *(undefined2 *)(iVar1 + 2) = 0;
    do {
      iVar7 = FUN_800189d0(iVar9);
      if (iVar7 != 0) {
        param_2 = 2;
        param_1 = 0xffffffff;
        uVar8 = FUN_8002a39c(0,0,0x3fff,0x3fff,0xffffffff,2,puVar3,0);
        iVar7 = DAT_8002a770;
        ((undefined4 *)(iVar1 + 0x44))[iVar9] = uVar8;
        *(undefined4 *)(iVar7 + iVar9 * 4) = 0xfffffff;
        FUN_8002a788(uVar8,0);
      }
      iVar5 = DAT_8002a77c;
      iVar4 = DAT_8002a778;
      iVar7 = DAT_8002a774;
      iVar9 = iVar9 + 1;
    } while (iVar9 < 2);
    iVar9 = 0;
    do {
      FUN_8002aa0c(iVar7 + iVar9 * 8);
      FUN_8002aa0c(iVar4 + iVar9 * 8);
      FUN_8002aa0c(iVar5 + iVar9 * 8);
      iVar9 = iVar9 + 1;
    } while (iVar9 < 2);
    FUN_8002a900(*(undefined4 *)(iVar1 + 0x44));
    FUN_8002a2ac();
    *(undefined *)(iVar1 + 1) = 1;
    puVar6 = DAT_8002a784;
    *DAT_8002a784 = PTR_LAB_8002a780;
    FUN_8001a19c(puVar6);
  }
  return CONCAT44(param_2,param_1);
}



void FUN_8002a788(int param_1,void *param_2)

{
  int iVar1;
  uint uVar2;
  undefined4 *local_28;
  undefined4 uStack36;
  undefined4 uStack32;
  undefined auStack28 [12];
  
  if (param_1 != 0) {
    save_context();
    local_28 = (undefined4 *)FUN_8001857c(param_1);
    uVar2 = local_28[10];
    if ((uVar2 & 2) != 0) {
      uStack36 = *local_28;
      uStack32 = local_28[1];
      if ((uVar2 & 0x10000) != 0) {
        FUN_8002aec8(param_1);
      }
      if (param_2 != (void *)0x0) {
        memcpy(auStack28,param_2,8);
        FUN_8002aa24(local_28,auStack28);
        FUN_80019f54(&uStack36,auStack28);
      }
      iVar1 = FUN_8002aa38(&uStack36,param_1);
      if (iVar1 != 0) {
        if ((DAT_8002a85c & uVar2) == 1) {
          FUN_8002b01c(&uStack36,local_28[6],local_28[8]);
        }
        else {
          FUN_8002aec0(param_1,&uStack36);
        }
      }
    }
    FUN_800185cc(&local_28);
    restore_context();
  }
  return;
}



void FUN_8002a860(int param_1,int param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  int local_20;
  undefined4 uStack28;
  undefined4 uStack24;
  
  if (param_1 != 0) {
    local_20 = param_2;
    uStack28 = param_3;
    uStack24 = param_4;
    local_20 = FUN_8001857c();
    if (((*(byte *)(local_20 + 0x28) & 2) == 0) ||
       (iVar1 = FUN_80019f98(&uStack28,param_2,local_20), iVar1 == 0)) {
      FUN_800185cc(&local_20);
    }
    else {
      FUN_800185cc(&local_20);
      FUN_8002fc64(param_1,&uStack28,param_3);
      iVar1 = FUN_8002a604(param_1);
      while (iVar1 != 0) {
        FUN_8002a860(iVar1,&uStack28,param_3);
        iVar1 = FUN_8001861c(iVar1);
        iVar1 = *(int *)(iVar1 + 0x20);
      }
    }
  }
  return;
}



undefined4 FUN_8002a900(int param_1)

{
  int *piVar1;
  short *psVar2;
  int extraout_r1;
  int iVar3;
  undefined4 uVar4;
  
  save_context();
  piVar1 = DAT_8002a960;
  iVar3 = extraout_r1;
  if (param_1 == 0) {
    iVar3 = DAT_8002a964;
  }
  if (param_1 == 0) {
    param_1 = *(int *)(iVar3 + 0x10);
  }
  uVar4 = *(undefined4 *)(*DAT_8002a960 + 0x48);
  *(int *)(*DAT_8002a960 + 0x48) = param_1;
  FUN_8002b048(param_1);
  FUN_8001d410();
  psVar2 = (short *)FUN_8001861c(param_1);
  iVar3 = *piVar1;
  *(int *)(iVar3 + 0x4c) = (int)*psVar2;
  *(int *)(iVar3 + 0x50) = (int)psVar2[1];
  restore_context();
  return uVar4;
}



void FUN_8002a9a4(undefined4 param_1,undefined4 *param_2,undefined4 param_3,undefined4 param_4)

{
  undefined4 *puVar1;
  undefined4 *local_10;
  undefined4 uStack12;
  undefined4 uStack8;
  
  puVar1 = DAT_8002aa04;
  local_10 = param_2;
  uStack12 = param_3;
  uStack8 = param_4;
  if (*(char *)(*DAT_8002aa00 + 0x54) == '\0') {
    local_10 = (undefined4 *)FUN_8001857c(*(undefined4 *)(*DAT_8002aa00 + 0x48));
    uStack12 = *local_10;
    uStack8 = local_10[1];
    FUN_800185cc(&local_10);
    if (*(int *)(DAT_8002aa08 + 0x28) != 0) {
      FUN_8002aa38(&uStack12);
    }
    puVar1 = &uStack12;
  }
  FUN_800300c0(puVar1);
  return;
}



void FUN_8002aa0c(undefined4 *param_1)

{
  undefined4 *puVar1;
  
  puVar1 = DAT_8002aa20;
  *param_1 = *DAT_8002aa20;
  *puVar1 = param_1;
  return;
}



void FUN_8002aa24(short *param_1,short *param_2)

{
  short sVar1;
  short sVar2;
  
  sVar1 = param_1[1];
  sVar2 = *param_1;
  if (param_2 == (short *)0x0) {
    return;
  }
  *param_2 = *param_2 + sVar2;
  param_2[2] = sVar2 + param_2[2];
  param_2[1] = param_2[1] + sVar1;
  param_2[3] = param_2[3] + sVar1;
  return;
}



undefined4 FUN_8002aa38(undefined4 param_1,int param_2,undefined4 param_3,int param_4)

{
  int iVar1;
  int local_10;
  
  local_10 = param_4;
  while( true ) {
    local_10 = FUN_8001857c(param_2);
    if ((*(byte *)(local_10 + 0x28) & 2) == 0) {
      FUN_800185cc(&local_10,local_10);
      return 0;
    }
    FUN_80019f54(param_1);
    iVar1 = *(int *)(local_10 + 0x18);
    if (iVar1 == 0) break;
    FUN_800185cc(&local_10);
    param_2 = iVar1;
  }
  FUN_800185cc(&local_10);
  iVar1 = FUN_8002d2c0(param_2);
  if (iVar1 < 0) {
    return 0;
  }
  return 1;
}



void FUN_8002aabc(int param_1,int param_2,undefined4 param_3,undefined4 param_4)

{
  undefined4 local_10;
  
  if (param_1 != 0 && param_2 != 0) {
    local_10 = param_4;
    local_10 = FUN_8001857c();
    FUN_8002aaf0(local_10,param_2);
    FUN_800185cc(&local_10);
  }
  return;
}



void FUN_8002aaf0(short *param_1,undefined2 *param_2)

{
  param_2[1] = 0;
  *param_2 = 0;
  param_2[2] = param_1[2] - *param_1;
  param_2[3] = param_1[3] - param_1[1];
  return;
}



int FUN_8002ab20(void)

{
  int iVar1;
  
  iVar1 = FUN_8002a630();
  if (iVar1 != 0) {
    iVar1 = FUN_8001861c();
    iVar1 = *(int *)(iVar1 + 0x1c);
  }
  return iVar1;
}



char FUN_8002ab40(void)

{
  int iVar1;
  char cVar2;
  int iVar3;
  
  iVar1 = DAT_8002aba8;
  cVar2 = *(char *)(*DAT_8002aba4 + 0x54);
  if (cVar2 != '\0') {
    iVar3 = *(int *)(DAT_8002aba8 + 0x14);
    if (iVar3 < 2) {
      *(int *)(DAT_8002aba8 + 0x10) = *(int *)(DAT_8002aba8 + 0x10) + 1;
      iVar3 = FUN_8002f168();
      if (iVar3 != 0) {
        FUN_8002a9a4();
        return '\x01';
      }
      iVar3 = *(int *)(iVar1 + 0x14);
    }
    *(int *)(iVar1 + 0x14) = iVar3 + -1;
    cVar2 = '\0';
  }
  return cVar2;
}



int FUN_8002abac(int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  iVar1 = FUN_8002ab20();
  while( true ) {
    iVar3 = iVar1;
    if (iVar3 == 0) {
      return 0;
    }
    if (iVar3 == param_1) break;
    iVar2 = FUN_8001861c();
    iVar1 = *(int *)(iVar2 + 0x20);
    if (*(int *)(iVar2 + 0x20) == param_1) {
      return iVar3;
    }
  }
  return 0;
}



void FUN_8002abec(int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  bool bVar5;
  
  do {
    iVar2 = param_1;
    iVar3 = FUN_8001861c();
    param_1 = *(int *)(iVar3 + 0x18);
  } while (*(int *)(iVar3 + 0x18) != 0);
  iVar3 = 0;
  do {
    if (*(int *)(DAT_8002d2ec + iVar3 * 4) == iVar2) {
      return;
    }
    iVar4 = iVar3 + 1;
    bVar5 = SBORROW4(iVar4,2);
    iVar1 = iVar3 + -1;
    if (1 < iVar4) {
      iVar4 = -1;
    }
    iVar3 = iVar4;
  } while (iVar1 < 0 != bVar5);
  return;
}



undefined4 FUN_8002ac10(int param_1)

{
  int *piVar1;
  undefined4 *puVar2;
  char *pcVar3;
  int iVar4;
  undefined4 **ppuVar5;
  undefined4 uVar6;
  int iVar7;
  longlong lVar8;
  undefined4 *local_30;
  undefined4 uStack44;
  undefined4 uStack40;
  undefined4 *local_24;
  undefined auStack32 [12];
  
  puVar2 = DAT_8002ada0;
  piVar1 = DAT_8002ad9c;
  iVar4 = *DAT_8002ad9c;
  ppuVar5 = &local_30;
  if (*(char *)(iVar4 + 0x54) == '\0') {
    FUN_8002a9a4();
    return 1;
  }
  iVar7 = DAT_8002ada0[5];
  DAT_8002ada0[5] = iVar7 + 1;
  if (1 < iVar7 + 1) {
    return 1;
  }
  local_30 = (undefined4 *)FUN_8001857c(*(undefined4 *)(iVar4 + 0x48));
  pcVar3 = DAT_8002ada4;
  puVar2[4] = 0xffffffff;
  if (*pcVar3 == '\0') {
    if ((*(byte *)(local_30 + 10) & 2) == 0) {
      puVar2[5] = puVar2[5] + -1;
      FUN_800185cc(&local_30);
      return 0;
    }
    uStack44 = *local_30;
    uStack40 = local_30[1];
  }
  else {
    memcpy(&uStack44,local_30 + 2,8);
  }
  if (param_1 != 0) {
    FUN_80019f54(&uStack44,param_1);
  }
  if (*(int *)(*piVar1 + 0x44) != 0) {
    local_24 = local_30;
    lVar8 = memcpy(auStack32,*(void **)(*piVar1 + 0x44),8);
    if (*(int *)(pcVar3 + 0x28) != 0) {
      FUN_800185cc(&local_24,(int)((ulonglong)lVar8 >> 0x20));
      local_24 = (undefined4 *)FUN_8001857c(*(undefined4 *)(pcVar3 + 0x28));
    }
    FUN_8002aa24(local_24,auStack32);
    FUN_80019f54(&uStack44,auStack32);
    ppuVar5 = &local_24;
  }
  FUN_800185cc(ppuVar5);
  if (((*(int *)(pcVar3 + 0x28) == 0) || (iVar4 = FUN_8002aa38(&uStack44), iVar4 != 0)) &&
     (iVar4 = FUN_8002aa38(&uStack44,*(undefined4 *)(*piVar1 + 0x48)), iVar4 != 0)) {
    *puVar2 = uStack44;
    puVar2[1] = uStack40;
    uVar6 = FUN_8002ab40();
    return uVar6;
  }
  puVar2[5] = puVar2[5] + -1;
  return 0;
}



void FUN_8002ada8(undefined4 param_1,int param_2,int param_3,int param_4)

{
  byte bVar1;
  int *piVar2;
  int iVar3;
  int iVar4;
  int local_20;
  int local_1c;
  int local_18;
  
  piVar2 = &local_20;
  if (param_2 != 0) {
    local_20 = param_2;
    local_1c = param_3;
    local_18 = param_4;
    local_20 = FUN_8001857c();
    *(int *)(local_20 + 0x18) = param_2;
    *(undefined4 *)(local_20 + 0x20) = 0;
    local_18 = FUN_8001857c(param_2);
    bVar1 = *(byte *)(local_20 + 0x28);
    iVar3 = *(int *)(local_18 + 0x1c);
    if (iVar3 == 0) {
      *(undefined4 *)(local_18 + 0x1c) = param_1;
      FUN_800185cc(piVar2);
      piVar2 = &local_18;
    }
    else {
      local_1c = FUN_8001857c(iVar3);
      if (((bVar1 & 8) == 0) && ((*(byte *)(local_1c + 0x28) & 8) != 0)) {
        *(int *)(local_20 + 0x20) = iVar3;
        *(undefined4 *)(local_18 + 0x1c) = param_1;
        FUN_800185cc(piVar2);
        FUN_800185cc(&local_18);
        piVar2 = &local_1c;
      }
      else {
        FUN_800185cc(&local_18);
        FUN_800185cc(&local_1c);
        iVar3 = FUN_8001861c(iVar3);
        do {
          iVar4 = *(int *)(iVar3 + 0x20);
          local_1c = iVar3;
          if (iVar4 == 0) {
            *(undefined4 *)(iVar3 + 0x20) = param_1;
            goto LAB_8002ae9c;
          }
          iVar3 = FUN_8001861c(iVar4);
        } while (((bVar1 & 8) != 0) || ((*(byte *)(iVar3 + 0x28) & 8) == 0));
        *(undefined4 *)(local_1c + 0x20) = param_1;
        *(int *)(local_20 + 0x20) = iVar4;
      }
    }
LAB_8002ae9c:
    FUN_800185cc(piVar2);
  }
  return;
}



void FUN_8002aec0(undefined4 param_1,int param_2,undefined4 param_3,undefined4 param_4)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  bool bVar4;
  int iStack32;
  undefined4 uStack28;
  undefined4 uStack24;
  
  uStack28 = 0x20;
  iStack32 = param_2;
  uStack24 = param_4;
  iStack32 = FUN_8001861c();
  uVar3 = *(uint *)(iStack32 + 0x28);
  if ((uVar3 & 2) != 0) {
    uVar1 = FUN_8002b024(param_2);
    bVar4 = uVar1 != 0;
    if (bVar4) {
      uVar1 = DAT_8002fd30 & uVar3;
    }
    if (bVar4 && uVar1 != 1) {
      iStack32 = FUN_8001857c(param_1);
      FUN_80019f98(&uStack28,param_2,iStack32);
      iVar2 = FUN_8002b024(&uStack28);
      if (iVar2 != 0) {
        if ((*(uint *)(iStack32 + 0x28) & DAT_8002fd34) == 0) {
          *(undefined4 *)(iStack32 + 8) = uStack28;
          *(undefined4 *)(iStack32 + 0xc) = uStack24;
          *(uint *)(iStack32 + 0x28) = *(uint *)(iStack32 + 0x28) | 0x20;
          *(short *)(DAT_8002fd38 + 4) = *(short *)(DAT_8002fd38 + 4) + 1;
          FUN_800197f8();
        }
        else {
          FUN_8001957c(iStack32 + 8,iStack32 + 8,&uStack28);
        }
      }
      FUN_800185cc(&iStack32);
    }
  }
  return;
}



void FUN_8002aec8(uint param_1,undefined4 param_2,undefined4 param_3,int param_4)

{
  int iVar1;
  uint uVar2;
  bool bVar3;
  int local_10;
  
  if (param_1 != 0) {
    local_10 = param_4;
    local_10 = FUN_8001857c();
    uVar2 = (uint)*(byte *)(local_10 + 0x28);
    if ((*(byte *)(local_10 + 0x28) & 2) != 0) {
      bVar3 = *(int *)(local_10 + 0x24) != 0;
      if (bVar3) {
        uVar2 = *(uint *)(DAT_8002af4c + 0x2c);
      }
      if (bVar3 && uVar2 != param_1) {
        FUN_80019418();
        *(undefined4 *)(local_10 + 0x24) = 0;
      }
      iVar1 = FUN_8002a604(param_1);
      while (iVar1 != 0) {
        FUN_8002aec8(iVar1);
        iVar1 = FUN_8001861c(iVar1);
        iVar1 = *(int *)(iVar1 + 0x20);
      }
    }
    FUN_800185cc(&local_10);
  }
  return;
}



void FUN_8002af50(undefined4 param_1,int param_2,int param_3,undefined4 param_4)

{
  int iVar1;
  uint uVar2;
  int local_28;
  int iStack36;
  undefined4 uStack32;
  
  if (param_2 != 0) {
    local_28 = param_2;
    iStack36 = param_3;
    uStack32 = param_4;
    local_28 = FUN_8001857c(param_2);
    uVar2 = *(uint *)(local_28 + 0x28);
    if (((uVar2 & 2) != 0) && (iVar1 = FUN_80019f98(&iStack36,param_1,local_28), iVar1 != 0)) {
      if ((DAT_8002b018 & uVar2) == 1) {
        FUN_8002af50(&iStack36,*(undefined4 *)(local_28 + 0x18),*(undefined4 *)(local_28 + 0x20),
                     param_4);
      }
      else {
        FUN_8002fc64(param_2,&iStack36,param_4);
      }
      iVar1 = *(int *)(local_28 + 0x1c);
      while (iVar1 != 0 && iVar1 != param_3) {
        FUN_8002a860(iVar1,&iStack36,param_4);
        iVar1 = FUN_8001861c(iVar1);
        iVar1 = *(int *)(iVar1 + 0x20);
      }
    }
    FUN_800185cc(&local_28);
  }
  return;
}



void FUN_8002b01c(undefined4 param_1,int param_2,int param_3)

{
  int iVar1;
  uint uVar2;
  int iStack40;
  int iStack36;
  undefined4 uStack32;
  
  uStack32 = 0x20;
  if (param_2 != 0) {
    iStack40 = param_2;
    iStack36 = param_3;
    iStack40 = FUN_8001857c(param_2);
    uVar2 = *(uint *)(iStack40 + 0x28);
    if (((uVar2 & 2) != 0) && (iVar1 = FUN_80019f98(&iStack36,param_1,iStack40), iVar1 != 0)) {
      if ((DAT_8002b018 & uVar2) == 1) {
        FUN_8002af50(&iStack36,*(undefined4 *)(iStack40 + 0x18),*(undefined4 *)(iStack40 + 0x20),
                     0x20);
      }
      else {
        FUN_8002fc64(param_2,&iStack36,0x20);
      }
      iVar1 = *(int *)(iStack40 + 0x1c);
      while (iVar1 != 0 && iVar1 != param_3) {
        FUN_8002a860(iVar1,&iStack36,0x20);
        iVar1 = FUN_8001861c(iVar1);
        iVar1 = *(int *)(iVar1 + 0x20);
      }
    }
    FUN_800185cc(&iStack40);
  }
  return;
}



short * FUN_8002b024(short *param_1)

{
  short *psVar1;
  int iVar2;
  short *psVar3;
  int iVar4;
  bool bVar5;
  bool bVar6;
  
  iVar2 = (int)*param_1;
  iVar4 = (int)param_1[2];
  bVar6 = SBORROW4(iVar2,iVar4);
  psVar1 = (short *)(iVar2 - iVar4);
  bVar5 = iVar2 == iVar4;
  if (iVar2 <= iVar4) {
    psVar3 = (short *)(int)param_1[1];
    param_1 = (short *)(int)param_1[3];
    bVar6 = SBORROW4((int)psVar3,(int)param_1);
    psVar1 = (short *)((int)psVar3 - (int)param_1);
    bVar5 = psVar3 == param_1;
  }
  if (!bVar5 && (int)psVar1 < 0 == bVar6) {
    param_1 = (short *)0x0;
  }
  if (bVar5 || (int)psVar1 < 0 != bVar6) {
    param_1 = (short *)0x1;
  }
  return param_1;
}



uint FUN_8002b048(void)

{
  byte bVar1;
  int *piVar2;
  int iVar3;
  uint uVar4;
  
  uVar4 = FUN_8002abec();
  piVar2 = DAT_800196e0;
  if (-1 < (int)uVar4) {
    bVar1 = *(byte *)(*DAT_800196e0 + 0x11);
    save_context();
    if ((uVar4 < 2) && (iVar3 = FUN_800189d0(uVar4), iVar3 != 0)) {
      *(char *)(*piVar2 + 0x11) = (char)uVar4;
      FUN_80019670();
      *DAT_800196e4 = uVar4;
    }
    restore_context();
    return (uint)bVar1;
  }
  return uVar4;
}



// WARNING: Removing unreachable block (ram,0x8002a7d4)

void FUN_8002b068(int param_1,int *param_2)

{
  int *piVar1;
  int iVar2;
  code *pcVar3;
  int iVar4;
  uint uVar5;
  undefined4 *puStack40;
  undefined4 uStack36;
  undefined4 uStack32;
  
  piVar1 = DAT_8002b0d4;
  if (*DAT_8002b0d4 < 0x14) {
    iVar2 = FUN_8001861c(param_1);
    pcVar3 = *(code **)(iVar2 + 0x10);
    param_2[1] = param_1;
    if (pcVar3 == (code *)0x0) {
      iVar4 = *param_2;
      iVar2 = param_2[1];
      if (iVar4 != 0x17) {
        if (iVar4 < 0x18) {
          if (iVar4 == 0xe) {
            if (param_2 == (int *)0x0) {
              return;
            }
            save_context();
            iVar4 = FUN_8002a630(iVar2);
            if (iVar4 != 0) {
              param_2[2] = iVar2;
              FUN_8002b068(iVar4,param_2);
            }
            iVar2 = *(int *)(DAT_80019a84 + 0xc) + -1;
            *(int *)(DAT_80019a84 + 0xc) = iVar2;
            if (iVar2 != 0) {
              return;
            }
            return;
          }
          if (iVar4 == 0x14) {
            FUN_8002aabc();
          }
        }
        else {
          if (iVar4 == 0x22) {
            iVar2 = 0xfffffff;
            goto LAB_8002a5c0;
          }
          if (iVar4 == 0x28) {
            if (iVar2 != 0) {
              save_context();
              puStack40 = (undefined4 *)FUN_8001857c(iVar2);
              uVar5 = puStack40[10];
              if ((uVar5 & 2) != 0) {
                uStack36 = *puStack40;
                uStack32 = puStack40[1];
                if ((uVar5 & 0x10000) != 0) {
                  FUN_8002aec8(iVar2);
                }
                iVar4 = FUN_8002aa38(&uStack36,iVar2);
                if (iVar4 != 0) {
                  if ((DAT_8002a85c & uVar5) == 1) {
                    FUN_8002b01c(&uStack36,puStack40[6],puStack40[8]);
                  }
                  else {
                    FUN_8002aec0(iVar2,&uStack36);
                  }
                }
              }
              FUN_800185cc(&puStack40);
              restore_context();
            }
            return;
          }
        }
        iVar2 = 0;
      }
LAB_8002a5c0:
      param_2[3] = iVar2;
      return;
    }
    *piVar1 = *piVar1 + 1;
    (*pcVar3)(param_2);
    *piVar1 = *piVar1 + -1;
  }
  return;
}



undefined8 FUN_8002b0d8(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  undefined4 local_18;
  undefined4 local_14;
  undefined4 uStack16;
  undefined4 uStack12;
  
  local_18 = param_2;
  local_14 = param_1;
  uStack16 = param_3;
  uStack12 = param_4;
  FUN_8002b068(param_1,&local_18);
  return CONCAT44(local_14,local_18);
}



void FUN_8002b0f4(void)

{
  undefined *puVar1;
  
  tp_i2c_read_status();
  puVar1 = PTR_DAT_8002b120;
  if (*PTR_DAT_8002b120 == '\0') {
    return;
  }
  do {
    tp_i2c_read_status();
  } while (*puVar1 != '\0');
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffdc : 0x8002b464
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_trace_data(void)

{
  char cVar1;
  undefined2 uVar2;
  short sVar3;
  int iVar4;
  int iVar5;
  undefined *puVar6;
  char *pcVar7;
  undefined *puVar8;
  undefined2 *puVar9;
  ushort uVar10;
  int iVar11;
  ushort *puVar12;
  int iVar13;
  ushort *puVar14;
  uint uVar15;
  uint uVar16;
  int iVar17;
  ushort uVar18;
  code *UNRECOVERED_JUMPTABLE_00;
  bool bVar19;
  
  pcVar7 = DAT_8002b64c;
  puVar6 = PTR_DAT_8002b648;
  cVar1 = *PTR_DAT_8002b648;
  if ((cVar1 == '\x02') && ((DAT_8002b64c[0x21] != '\x01' || (DAT_8002b64c[0x3a] == '\x01')))) {
    DAT_8002b64c[0x18] = '\x01';
    pcVar7[0x17] = '\x01';
  }
  puVar8 = PTR_DAT_8002b65c;
  iVar5 = DAT_8002b658;
  iVar4 = DAT_8002b654;
  uVar18 = (ushort)DAT_8002b650;
  iVar17 = DAT_8002b654 + 2000;
  if (8 < (byte)pcVar7[10]) {
    if (pcVar7[0x18] != '\0') {
      set_frame_to_global_pointer();
      set_display_fg_color(0);
      display_fill_rect(2,0x2f,uVar18,uVar18 - 0xfb);
      display_draw_grid();
    }
    if (pcVar7[0x17] == '\0') goto LAB_8002b414;
    FUN_8001b424(pcVar7 + 0x1a,pcVar7 + 0x1c);
    if (*pcVar7 != '\0') {
      if ((pcVar7[0x3a] == '\0') && (*puVar6 != '\x02')) {
        *(undefined2 *)(puVar8 + 0x12) = 400;
      }
      FUN_8000410c();
      cVar1 = pcVar7[0x21];
      bVar19 = cVar1 != '\0';
      if (bVar19) {
        cVar1 = pcVar7[0x21];
      }
      if (((!bVar19 || cVar1 == '\x02') && (0x1a < (byte)pcVar7[10])) &&
         ((pcVar7[0x23] == '\x01' || (pcVar7[9] != '\0')))) {
        FUN_8000583c();
      }
      if (*(char *)(iVar5 + 7) == '\0') {
        FUN_80012a64(*(undefined2 *)(pcVar7 + 0x1a),0,*(undefined2 *)(pcVar7 + 0x1c),DAT_8002b654);
      }
    }
    if (pcVar7[0xc] == '\0') {
LAB_8002b2e8:
      if (*(char *)(iVar5 + 7) != '\0') goto LAB_8002b2f4;
    }
    else {
      if ((pcVar7[0x3a] == '\0') && (*puVar6 != '\x02')) {
        *(undefined2 *)(puVar8 + 0x14) = 400;
      }
      FUN_80006f28();
      cVar1 = pcVar7[0x21];
      bVar19 = cVar1 != '\0';
      if (bVar19) {
        cVar1 = pcVar7[0x21];
      }
      if (((!bVar19 || cVar1 == '\x02') && (0x1a < (byte)pcVar7[10])) &&
         ((pcVar7[0x23] == '\0' || (pcVar7[0x15] != '\0')))) {
        FUN_80008594();
      }
      if (*(char *)(iVar5 + 7) == '\0') {
        FUN_80012a64(*(undefined2 *)(pcVar7 + 0x1a),0,*(undefined2 *)(pcVar7 + 0x1c),DAT_8002b668);
        goto LAB_8002b2e8;
      }
LAB_8002b2f4:
      set_frame_to_global_pointer();
      set_display_fg_color(DAT_8002b66c);
      if (*(ushort *)(pcVar7 + 0x1c) < 2) {
        *(undefined2 *)(pcVar7 + 0x1c) = 2;
      }
      uVar16 = 1;
      if (1 < (int)(*(ushort *)(pcVar7 + 0x1c) - 2)) {
        do {
          puVar12 = (ushort *)(iVar4 + uVar16 * 2);
          puVar14 = (ushort *)(iVar17 + uVar16 * 2);
          display_draw_line(*puVar12 + 0x96,(uint)*puVar14,puVar12[1] + 0x96,(uint)puVar14[1]);
          uVar16 = uVar16 + 1 & 0xfffeffff;
        } while ((int)uVar16 < (int)(*(ushort *)(pcVar7 + 0x1c) - 2));
      }
    }
    cVar1 = pcVar7[4];
    bVar19 = cVar1 != '\0';
    if (bVar19) {
      cVar1 = *pcVar7;
    }
    if (bVar19 && cVar1 != '\0') {
      FUN_800043e4();
    }
    cVar1 = pcVar7[0x10];
    bVar19 = cVar1 != '\0';
    if (bVar19) {
      cVar1 = pcVar7[0xc];
    }
    if (bVar19 && cVar1 != '\0') {
      set_display_fg_color(0);
      display_fill_rect(3,0x81,0x2d5,0xd1);
      FUN_800075dc();
      set_display_fg_color(DAT_8002b670);
      puVar9 = DAT_8002b674;
      uVar16 = 0;
      *DAT_8002b674 = DAT_8002b674[1];
      do {
        puVar12 = puVar9 + uVar16;
        if (0x50 < *puVar12) {
          *puVar12 = 0x50;
        }
        display_draw_vert_line((short)uVar16 + 3,0xd1 - *puVar12,0xd1);
        uVar16 = uVar16 + 1 & 0xfffeffff;
      } while (uVar16 < 0x2d3);
    }
LAB_8002b414:
    iVar4 = DAT_8002b678;
    if (pcVar7[0x18] == '\0') {
      return;
    }
    if (*(char *)(DAT_8002b678 + 0x292) != '\0') {
      display_draw_time_cursors();
    }
    if (*(char *)(iVar4 + 0x29a) != '\0') {
      display_draw_volt_cursors();
    }
    cVar1 = *(char *)(iVar4 + 0x292);
    bVar19 = cVar1 == '\0';
    if (bVar19) {
      cVar1 = *(char *)(iVar4 + 0x29a);
    }
    if (!bVar19 || cVar1 != '\0') {
      FUN_8000ebf8();
    }
    display_draw_trace_pointers();
    FUN_80021810();
    uVar16 = DAT_8002b67c;
    iVar5 = Start_Of_Screen_Mem;
    iVar4 = Screen_Frame_Buffer;
    uVar15 = 0x2e;
    iVar17 = DAT_8002b67c + 0xf6;
    if (DAT_8002b67c < 0x2f) {
      return;
    }
    do {
      iVar11 = uVar15 * 800 + 2;
      copy_short((void *)(iVar5 + iVar11 * 2),(void *)(iVar4 + iVar11 * 2),iVar17);
      uVar15 = uVar15 + 1;
    } while (uVar15 < uVar16);
    return;
  }
                    // Display long time base trace data
  uVar10 = (ushort)(byte)pcVar7[0x3a];
  if (uVar10 != 0) {
                    // WARNING: Could not recover jumptable at 0x8002b490. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)();
    return;
  }
  if (cVar1 != '\x02') {
    uVar10 = *(ushort *)PTR_DAT_8002b65c;
  }
  else {
    *(undefined2 *)PTR_DAT_8002b65c = 0;
  }
  if (cVar1 == '\x02' || uVar10 == 0) {
    set_frame_to_global_pointer();
    set_display_fg_color(0);
    uVar10 = (ushort)DAT_8002b67c;
    display_fill_rect(2,0x2f,uVar18,uVar10);
    display_draw_grid();
    display_draw_trace_pointers();
    copy_rect_to_screen(2,0x2e,uVar10 + 0xf7,uVar10);
    set_screen_to_global_pointer();
  }
  iVar11 = DAT_8002b680;
  if (*pcVar7 != '\0') {
    set_screen_to_global_pointer();
    iVar13 = iVar11 - (uint)*DAT_8002b684;
    *(short *)(puVar8 + 0x16) = (short)iVar13;
    iVar13 = iVar13 * 0x10000 >> 0x10;
    if (iVar13 < 0x2f) {
      iVar13 = 0x2f;
    }
    else {
      if (0x1c0 < iVar13) {
        iVar13 = 0x1c0;
      }
    }
    *(short *)(puVar8 + 0x16) = (short)iVar13;
    if (*(char *)(iVar5 + 7) == '\0') {
      display_channel1_long_timebase_trace();
    }
  }
  if (pcVar7[0xc] == '\0') {
LAB_8002b590:
    if (*(char *)(iVar5 + 7) == '\0') goto LAB_8002b624;
  }
  else {
    set_screen_to_global_pointer();
    iVar11 = iVar11 - (uint)*DAT_8002b688;
    *(short *)(puVar8 + 0x18) = (short)iVar11;
    iVar11 = iVar11 * 0x10000 >> 0x10;
    if (iVar11 < 0x2f) {
      iVar11 = 0x2f;
    }
    else {
      if (0x1c0 < iVar11) {
        iVar11 = 0x1c0;
      }
    }
    *(short *)(puVar8 + 0x18) = (short)iVar11;
    if (*(char *)(iVar5 + 7) == '\0') {
      display_channel2_long_timebase_trace();
      goto LAB_8002b590;
    }
  }
  if (*(short *)puVar8 == 0) {
    *(undefined2 *)(puVar8 + 2) = *(undefined2 *)(puVar8 + 0x16);
    *(undefined2 *)(puVar8 + 4) = *(undefined2 *)(puVar8 + 0x18);
  }
  set_display_fg_color(DAT_8002b66c);
  display_draw_line(*(ushort *)(puVar8 + 2) + 0x96,(uint)*(ushort *)(puVar8 + 4),
                    *(ushort *)(puVar8 + 0x16) + 0x96,(uint)*(ushort *)(puVar8 + 0x18));
  display_draw_line(*(ushort *)(puVar8 + 2) + 0x97,*(ushort *)(puVar8 + 4) + 1,
                    *(ushort *)(puVar8 + 0x16) + 0x97,*(ushort *)(puVar8 + 0x18) + 1);
  *(undefined2 *)(puVar8 + 2) = *(undefined2 *)(puVar8 + 0x16);
  uVar2 = *(undefined2 *)(puVar8 + 0x18);
  *(undefined2 *)(puVar8 + 4) = uVar2;
  uVar18 = *(ushort *)puVar8;
  *(undefined2 *)(iVar4 + (uint)uVar18 * 2) = *(undefined2 *)(puVar8 + 0x16);
  *(undefined2 *)(iVar17 + (uint)uVar18 * 2) = uVar2;
LAB_8002b624:
  sVar3 = *(short *)puVar8;
  *(ushort *)puVar8 = sVar3 + 1U;
  if (0x2cf < (ushort)(sVar3 + 1U)) {
    *(undefined2 *)puVar8 = 0;
  }
                    // WARNING: Could not recover jumptable at 0x8002b644. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE_00)();
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffdc : 0x8002b848
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_8002b68c(void)

{
  char cVar1;
  int iVar2;
  char *pcVar3;
  undefined2 *puVar4;
  int iVar5;
  int iVar6;
  ushort *puVar7;
  ushort *puVar8;
  uint uVar9;
  uint uVar10;
  int unaff_r5;
  int count;
  int unaff_r7;
  code *UNRECOVERED_JUMPTABLE;
  bool bVar11;
  
  pcVar3 = DAT_8002b8b8;
  if (DAT_8002b8b8[0x18] != '\0') {
    set_frame_to_global_pointer();
    set_display_fg_color(0);
    display_fill_rect(2,0x2f,(ushort)DAT_8002b8c0,(ushort)DAT_8002b8bc);
    display_draw_grid();
  }
  if (pcVar3[0x17] != '\0') {
    set_frame_to_global_pointer();
    if (*(char *)(DAT_8002b8c4 + 7) == '\0') {
      if (*pcVar3 != '\0') {
        FUN_80012a64(*(undefined2 *)(pcVar3 + 0x1a),0,*(undefined2 *)(pcVar3 + 0x1c),DAT_8002b8cc,
                     DAT_8002b8d8);
      }
      if (pcVar3[0xc] != '\0') {
        FUN_80012a64(*(undefined2 *)(pcVar3 + 0x1a),0,*(undefined2 *)(pcVar3 + 0x1c),DAT_8002b8e0,
                     DAT_8002b8dc);
      }
    }
    else {
      set_frame_to_global_pointer();
      set_display_fg_color(DAT_8002b8c8);
      if (*(ushort *)(pcVar3 + 0x1c) < 2) {
        *(undefined2 *)(pcVar3 + 0x1c) = 2;
      }
      uVar10 = 1;
      iVar6 = *(ushort *)(pcVar3 + 0x1c) - 2;
      bVar11 = (int)(*(ushort *)(pcVar3 + 0x1c) - 3) < 0;
      if (1 < iVar6) {
        unaff_r5 = DAT_8002b8cc;
      }
      if (iVar6 != 1 && bVar11 == SBORROW4(iVar6,1)) {
        unaff_r7 = unaff_r5 + 2000;
      }
      if (iVar6 != 1 && bVar11 == SBORROW4(iVar6,1)) {
        do {
          puVar7 = (ushort *)(unaff_r7 + uVar10 * 2);
          puVar8 = (ushort *)(unaff_r5 + uVar10 * 2);
          display_draw_line(*puVar8 + 0x96,(uint)*puVar7,puVar8[1] + 0x96,(uint)puVar7[1]);
          uVar10 = uVar10 + 1 & 0xfffeffff;
        } while ((int)uVar10 < (int)(*(ushort *)(pcVar3 + 0x1c) - 2));
      }
    }
    cVar1 = pcVar3[4];
    bVar11 = cVar1 != '\0';
    if (bVar11) {
      cVar1 = *pcVar3;
    }
    if ((bVar11 && cVar1 != '\0') && (8 < (byte)pcVar3[10])) {
      FUN_800043e4();
    }
    cVar1 = pcVar3[0x10];
    bVar11 = cVar1 != '\0';
    if (bVar11) {
      cVar1 = pcVar3[0xc];
    }
    if ((bVar11 && cVar1 != '\0') && (8 < (byte)pcVar3[10])) {
      set_display_fg_color(0);
      display_fill_rect(3,0x81,0x2d5,0xd1);
      FUN_800075dc();
      set_display_fg_color(DAT_8002b8d0);
      puVar4 = DAT_8002b8d4;
      uVar10 = 0;
      *DAT_8002b8d4 = DAT_8002b8d4[1];
      do {
        puVar7 = puVar4 + uVar10;
        if (0x50 < *puVar7) {
          *puVar7 = 0x50;
        }
        display_draw_vert_line((short)uVar10 + 3,0xd1 - *puVar7,0xd1);
        uVar10 = uVar10 + 1 & 0xfffeffff;
      } while (uVar10 < 0x2d3);
    }
    FUN_80021810();
    display_draw_trace_pointers();
  }
  uVar10 = DAT_8002b8bc;
  iVar2 = Start_Of_Screen_Mem;
  iVar6 = Screen_Frame_Buffer;
  if (pcVar3[0x18] == '\0') {
                    // WARNING: Could not recover jumptable at 0x8002b840. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)();
    return;
  }
  uVar9 = 0x2e;
  count = DAT_8002b8bc + 0xf6;
  if (DAT_8002b8bc < 0x2f) {
    return;
  }
  do {
    iVar5 = uVar9 * 800 + 2;
    copy_short((void *)(iVar2 + iVar5 * 2),(void *)(iVar6 + iVar5 * 2),count);
    uVar9 = uVar9 + 1;
  } while (uVar9 < uVar10);
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffdc : 0x8002b464
// WARNING: Restarted to delay deadcode elimination for space: stack

void display_trace_data(void)

{
  char cVar1;
  undefined2 uVar2;
  short sVar3;
  int iVar4;
  int iVar5;
  undefined *puVar6;
  char *pcVar7;
  undefined *puVar8;
  undefined2 *puVar9;
  ushort uVar10;
  int iVar11;
  ushort *puVar12;
  int iVar13;
  ushort *puVar14;
  uint uVar15;
  uint uVar16;
  int iVar17;
  ushort uVar18;
  code *UNRECOVERED_JUMPTABLE_00;
  bool bVar19;
  
  pcVar7 = DAT_8002b64c;
  puVar6 = PTR_DAT_8002b648;
  cVar1 = *PTR_DAT_8002b648;
  if ((cVar1 == '\x02') && ((DAT_8002b64c[0x21] != '\x01' || (DAT_8002b64c[0x3a] == '\x01')))) {
    DAT_8002b64c[0x18] = '\x01';
    pcVar7[0x17] = '\x01';
  }
  puVar8 = PTR_DAT_8002b65c;
  iVar5 = DAT_8002b658;
  iVar4 = DAT_8002b654;
  uVar18 = (ushort)DAT_8002b650;
  iVar17 = DAT_8002b654 + 2000;
  if (8 < (byte)pcVar7[10]) {
    if (pcVar7[0x18] != '\0') {
      set_frame_to_global_pointer();
      set_display_fg_color(0);
      display_fill_rect(2,0x2f,uVar18,uVar18 - 0xfb);
      display_draw_grid();
    }
    if (pcVar7[0x17] == '\0') goto LAB_8002b414;
    FUN_8001b424(pcVar7 + 0x1a,pcVar7 + 0x1c);
    if (*pcVar7 != '\0') {
      if ((pcVar7[0x3a] == '\0') && (*puVar6 != '\x02')) {
        *(undefined2 *)(puVar8 + 0x12) = 400;
      }
      FUN_8000410c();
      cVar1 = pcVar7[0x21];
      bVar19 = cVar1 != '\0';
      if (bVar19) {
        cVar1 = pcVar7[0x21];
      }
      if (((!bVar19 || cVar1 == '\x02') && (0x1a < (byte)pcVar7[10])) &&
         ((pcVar7[0x23] == '\x01' || (pcVar7[9] != '\0')))) {
        FUN_8000583c();
      }
      if (*(char *)(iVar5 + 7) == '\0') {
        FUN_80012a64(*(undefined2 *)(pcVar7 + 0x1a),0,*(undefined2 *)(pcVar7 + 0x1c),DAT_8002b654);
      }
    }
    if (pcVar7[0xc] == '\0') {
LAB_8002b2e8:
      if (*(char *)(iVar5 + 7) != '\0') goto LAB_8002b2f4;
    }
    else {
      if ((pcVar7[0x3a] == '\0') && (*puVar6 != '\x02')) {
        *(undefined2 *)(puVar8 + 0x14) = 400;
      }
      FUN_80006f28();
      cVar1 = pcVar7[0x21];
      bVar19 = cVar1 != '\0';
      if (bVar19) {
        cVar1 = pcVar7[0x21];
      }
      if (((!bVar19 || cVar1 == '\x02') && (0x1a < (byte)pcVar7[10])) &&
         ((pcVar7[0x23] == '\0' || (pcVar7[0x15] != '\0')))) {
        FUN_80008594();
      }
      if (*(char *)(iVar5 + 7) == '\0') {
        FUN_80012a64(*(undefined2 *)(pcVar7 + 0x1a),0,*(undefined2 *)(pcVar7 + 0x1c),DAT_8002b668);
        goto LAB_8002b2e8;
      }
LAB_8002b2f4:
      set_frame_to_global_pointer();
      set_display_fg_color(DAT_8002b66c);
      if (*(ushort *)(pcVar7 + 0x1c) < 2) {
        *(undefined2 *)(pcVar7 + 0x1c) = 2;
      }
      uVar16 = 1;
      if (1 < (int)(*(ushort *)(pcVar7 + 0x1c) - 2)) {
        do {
          puVar12 = (ushort *)(iVar4 + uVar16 * 2);
          puVar14 = (ushort *)(iVar17 + uVar16 * 2);
          display_draw_line(*puVar12 + 0x96,(uint)*puVar14,puVar12[1] + 0x96,(uint)puVar14[1]);
          uVar16 = uVar16 + 1 & 0xfffeffff;
        } while ((int)uVar16 < (int)(*(ushort *)(pcVar7 + 0x1c) - 2));
      }
    }
    cVar1 = pcVar7[4];
    bVar19 = cVar1 != '\0';
    if (bVar19) {
      cVar1 = *pcVar7;
    }
    if (bVar19 && cVar1 != '\0') {
      FUN_800043e4();
    }
    cVar1 = pcVar7[0x10];
    bVar19 = cVar1 != '\0';
    if (bVar19) {
      cVar1 = pcVar7[0xc];
    }
    if (bVar19 && cVar1 != '\0') {
      set_display_fg_color(0);
      display_fill_rect(3,0x81,0x2d5,0xd1);
      FUN_800075dc();
      set_display_fg_color(DAT_8002b670);
      puVar9 = DAT_8002b674;
      uVar16 = 0;
      *DAT_8002b674 = DAT_8002b674[1];
      do {
        puVar12 = puVar9 + uVar16;
        if (0x50 < *puVar12) {
          *puVar12 = 0x50;
        }
        display_draw_vert_line((short)uVar16 + 3,0xd1 - *puVar12,0xd1);
        uVar16 = uVar16 + 1 & 0xfffeffff;
      } while (uVar16 < 0x2d3);
    }
LAB_8002b414:
    iVar4 = DAT_8002b678;
    if (pcVar7[0x18] == '\0') {
      return;
    }
    if (*(char *)(DAT_8002b678 + 0x292) != '\0') {
      display_draw_time_cursors();
    }
    if (*(char *)(iVar4 + 0x29a) != '\0') {
      display_draw_volt_cursors();
    }
    cVar1 = *(char *)(iVar4 + 0x292);
    bVar19 = cVar1 == '\0';
    if (bVar19) {
      cVar1 = *(char *)(iVar4 + 0x29a);
    }
    if (!bVar19 || cVar1 != '\0') {
      FUN_8000ebf8();
    }
    display_draw_trace_pointers();
    FUN_80021810();
    uVar16 = DAT_8002b67c;
    iVar5 = Start_Of_Screen_Mem;
    iVar4 = Screen_Frame_Buffer;
    uVar15 = 0x2e;
    iVar17 = DAT_8002b67c + 0xf6;
    if (DAT_8002b67c < 0x2f) {
      return;
    }
    do {
      iVar11 = uVar15 * 800 + 2;
      copy_short((void *)(iVar5 + iVar11 * 2),(void *)(iVar4 + iVar11 * 2),iVar17);
      uVar15 = uVar15 + 1;
    } while (uVar15 < uVar16);
    return;
  }
  uVar10 = (ushort)(byte)pcVar7[0x3a];
  if (uVar10 != 0) {
                    // WARNING: Could not recover jumptable at 0x8002b490. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)();
    return;
  }
  if (cVar1 != '\x02') {
    uVar10 = *(ushort *)PTR_DAT_8002b65c;
  }
  else {
    *(undefined2 *)PTR_DAT_8002b65c = 0;
  }
  if (cVar1 == '\x02' || uVar10 == 0) {
    set_frame_to_global_pointer();
    set_display_fg_color(0);
    uVar10 = (ushort)DAT_8002b67c;
    display_fill_rect(2,0x2f,uVar18,uVar10);
    display_draw_grid();
    display_draw_trace_pointers();
    copy_rect_to_screen(2,0x2e,uVar10 + 0xf7,uVar10);
    set_screen_to_global_pointer();
  }
  iVar11 = DAT_8002b680;
  if (*pcVar7 != '\0') {
    set_screen_to_global_pointer();
    iVar13 = iVar11 - (uint)*DAT_8002b684;
    *(short *)(puVar8 + 0x16) = (short)iVar13;
    iVar13 = iVar13 * 0x10000 >> 0x10;
    if (iVar13 < 0x2f) {
      iVar13 = 0x2f;
    }
    else {
      if (0x1c0 < iVar13) {
        iVar13 = 0x1c0;
      }
    }
    *(short *)(puVar8 + 0x16) = (short)iVar13;
    if (*(char *)(iVar5 + 7) == '\0') {
      display_channel1_long_timebase_trace();
    }
  }
  if (pcVar7[0xc] == '\0') {
LAB_8002b590:
    if (*(char *)(iVar5 + 7) == '\0') goto LAB_8002b624;
  }
  else {
    set_screen_to_global_pointer();
    iVar11 = iVar11 - (uint)*DAT_8002b688;
    *(short *)(puVar8 + 0x18) = (short)iVar11;
    iVar11 = iVar11 * 0x10000 >> 0x10;
    if (iVar11 < 0x2f) {
      iVar11 = 0x2f;
    }
    else {
      if (0x1c0 < iVar11) {
        iVar11 = 0x1c0;
      }
    }
    *(short *)(puVar8 + 0x18) = (short)iVar11;
    if (*(char *)(iVar5 + 7) == '\0') {
      display_channel2_long_timebase_trace();
      goto LAB_8002b590;
    }
  }
  if (*(short *)puVar8 == 0) {
    *(undefined2 *)(puVar8 + 2) = *(undefined2 *)(puVar8 + 0x16);
    *(undefined2 *)(puVar8 + 4) = *(undefined2 *)(puVar8 + 0x18);
  }
  set_display_fg_color(DAT_8002b66c);
  display_draw_line(*(ushort *)(puVar8 + 2) + 0x96,(uint)*(ushort *)(puVar8 + 4),
                    *(ushort *)(puVar8 + 0x16) + 0x96,(uint)*(ushort *)(puVar8 + 0x18));
  display_draw_line(*(ushort *)(puVar8 + 2) + 0x97,*(ushort *)(puVar8 + 4) + 1,
                    *(ushort *)(puVar8 + 0x16) + 0x97,*(ushort *)(puVar8 + 0x18) + 1);
  *(undefined2 *)(puVar8 + 2) = *(undefined2 *)(puVar8 + 0x16);
  uVar2 = *(undefined2 *)(puVar8 + 0x18);
  *(undefined2 *)(puVar8 + 4) = uVar2;
  uVar18 = *(ushort *)puVar8;
  *(undefined2 *)(iVar4 + (uint)uVar18 * 2) = *(undefined2 *)(puVar8 + 0x16);
  *(undefined2 *)(iVar17 + (uint)uVar18 * 2) = uVar2;
LAB_8002b624:
  sVar3 = *(short *)puVar8;
  *(ushort *)puVar8 = sVar3 + 1U;
  if (0x2cf < (ushort)(sVar3 + 1U)) {
    *(undefined2 *)puVar8 = 0;
  }
                    // WARNING: Could not recover jumptable at 0x8002b644. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE_00)();
  return;
}



void FUN_8002b8e8(void)

{
  ushort uVar1;
  undefined *puVar2;
  int *piVar3;
  ushort uVar4;
  ushort uVar5;
  ushort uVar6;
  ushort uVar7;
  ushort *puVar8;
  ushort *puVar9;
  uint uVar10;
  int iVar11;
  
  uVar4 = convert_color(DAT_8002b9a8);
  uVar5 = convert_color(DAT_8002b9ac);
  uVar6 = convert_color(DAT_8002b9b0);
  set_screen_to_global_pointer();
  piVar3 = Global_Frame_Buffer_Pointer;
  puVar2 = PTR_BITMAP_CONFIRM_DELETE_MENU_8002b9b4;
  uVar10 = 0xc0;
  do {
    iVar11 = 0xb4;
    puVar8 = (ushort *)(*piVar3 + uVar10 * 0x640 + 0x226);
    puVar9 = (ushort *)(puVar2 + uVar10 * 0x2d0 + -0x21c00);
    do {
      uVar1 = *puVar9;
      uVar7 = uVar6;
      if (((uVar1 != 0) && (uVar7 = uVar4, uVar1 != 0xf800)) && (uVar7 = uVar1, uVar1 == 0x7e0)) {
        uVar7 = uVar5;
      }
      iVar11 = iVar11 + -1;
      *puVar8 = uVar7;
      puVar8 = puVar8 + 1;
      puVar9 = puVar9 + 2;
    } while (iVar11 != 0);
    uVar10 = uVar10 + 1 & 0xfffeffff;
  } while (uVar10 < 0x121);
  do {
    iVar11 = FUN_80022fd0();
  } while (iVar11 == 2);
  return;
}



void FUN_8002b9bc(void)

{
  uint uVar1;
  ushort uVar2;
  ushort uVar3;
  ushort uVar4;
  ushort uVar5;
  ushort uVar6;
  short sVar7;
  short sVar8;
  short sVar9;
  uint uVar10;
  short *psVar11;
  short *psVar12;
  int iVar13;
  short *psVar14;
  int *piVar15;
  char *pcVar16;
  int iVar17;
  short *psVar18;
  ushort *puVar19;
  short *psVar20;
  undefined2 *puVar21;
  uint uVar22;
  uint uVar23;
  uint uVar24;
  uint uVar25;
  uint uVar26;
  int *in_r12;
  uint local_58;
  
  local_58 = 0;
  uVar2 = *(ushort *)(DAT_8002be10 + 2);
  uVar3 = *(ushort *)(DAT_8002be10 + 4);
  uVar26 = (uint)uVar3;
  uVar4 = *(ushort *)(DAT_8002be10 + 6);
  uVar5 = *(ushort *)(DAT_8002be10 + 8);
  FUN_8002c7a4();
  FUN_8000b2ac();
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  uVar6 = (ushort)DAT_8002be14;
  display_fill_rect(0,0,uVar6 + 0xfa,uVar6);
  set_display_fg_color(DAT_8002be18);
  display_draw_vert_line(uVar6 + 0xfa,0,uVar6);
  psVar14 = DAT_8002be28;
  iVar13 = DAT_8002be24;
  psVar12 = DAT_8002be20;
  psVar11 = DAT_8002be1c;
  uVar23 = 0;
  do {
    uVar24 = 0;
    sVar9 = (short)uVar23;
    do {
      uVar1 = local_58 + (uint)*(byte *)(DAT_8002be10 + 10) * 0x10 + -0x10 & 0xffff;
      if (*(byte *)(DAT_8002be10 + 0xc) <= uVar1) break;
      if (uVar26 != 0) {
        in_r12 = Global_Frame_Buffer_Pointer;
      }
      uVar25 = uVar24 + 4 & 0xfffeffff;
      local_58 = local_58 + 1 & 0xfffeffff;
      uVar22 = 0;
      if (uVar26 != 0) {
        do {
          if (uVar2 != 0) {
            iVar17 = *in_r12 + ((uint)uVar4 + (uVar22 + uVar5 + uVar23) * 800 + uVar24) * 2;
            puVar21 = (undefined2 *)(iVar17 + 0x63e);
            uVar10 = (uint)(uVar2 >> 1);
            if ((uVar2 & 1) != 0) {
              puVar21 = (undefined2 *)(iVar17 + 0x640);
              *puVar21 = 0;
            }
            while (uVar10 != 0) {
              puVar21[1] = 0;
              puVar21 = puVar21 + 2;
              *puVar21 = 0;
              uVar10 = uVar10 - 1;
            }
          }
          uVar22 = uVar22 + 1 & 0xfffeffff;
        } while (uVar22 < uVar26);
      }
      FUN_8000b9c4(*(undefined2 *)(DAT_8002be10 + uVar1 * 2 + 0x1e));
      psVar18 = DAT_8002be38;
      psVar20 = DAT_8002be34;
      if (*(char *)(DAT_8002be30 + 7) == '\0') {
        iVar17 = 0x57;
        *DAT_8002be38 = *DAT_8002be34 + sVar9;
        sVar7 = psVar20[1];
        do {
          iVar17 = iVar17 + -1;
          sVar8 = psVar20[2];
          psVar18[1] = sVar7 + sVar9;
          sVar7 = psVar20[3];
          psVar18 = psVar18 + 2;
          *psVar18 = sVar8 + sVar9;
          psVar20 = psVar20 + 2;
        } while (iVar17 != 0);
        *psVar11 = *psVar12 + sVar9;
      }
      else {
        memcpy(DAT_8002be38,DAT_8002be34,0x160);
      }
      psVar20 = DAT_8002be3c;
      iVar17 = 0x57;
      psVar18 = (short *)(iVar13 + 2);
      *psVar18 = *DAT_8002be3c + sVar9;
      uVar6 = psVar20[1];
      do {
        iVar17 = iVar17 + -1;
        in_r12 = (int *)(uVar6 + uVar23);
        sVar7 = psVar20[2];
        psVar18[1] = (short)in_r12;
        uVar6 = psVar20[3];
        psVar18 = psVar18 + 2;
        *psVar18 = sVar7 + sVar9;
        psVar20 = psVar20 + 2;
      } while (iVar17 != 0);
      psVar11[200] = *psVar14 + sVar9;
      pcVar16 = DAT_8002be44;
      if (*(char *)(DAT_8002be30 + 7) == '\0') {
        if (*(ushort *)(DAT_8002be44 + 0x1c) < 4) {
          *(undefined2 *)(DAT_8002be44 + 0x1c) = 4;
        }
        if (*pcVar16 != '\0') {
          FUN_80012a64(*(ushort *)(pcVar16 + 0x1a) + uVar25 & 0xfffeffff,0,
                       *(short *)(pcVar16 + 0x1c) + -4,DAT_8002be38,DAT_8002be54);
        }
        if (pcVar16[0xc] != '\0') {
          FUN_80012a64(*(ushort *)(pcVar16 + 0x1a) + uVar25 & 0xfffeffff,0,
                       *(short *)(pcVar16 + 0x1c) + -4,DAT_8002be5c,DAT_8002be58);
        }
      }
      else {
        set_display_fg_color(DAT_8002be40);
        pcVar16 = DAT_8002be44;
        if (*(ushort *)(DAT_8002be44 + 0x1c) < 5) {
          *(undefined2 *)(DAT_8002be44 + 0x1c) = 5;
        }
        uVar22 = 0;
        if (0 < (int)(*(ushort *)(pcVar16 + 0x1c) - 5)) {
          do {
            puVar19 = (ushort *)(DAT_8002be38 + uVar22);
            in_r12 = (int *)(*puVar19 + uVar25);
            display_draw_line((int)in_r12 + 0x1b,(uint)puVar19[200],uVar25 + puVar19[1] + 0x1b,
                              (uint)puVar19[0xc9]);
            uVar22 = uVar22 + 1 & 0xfffeffff;
          } while ((int)uVar22 < (int)(*(ushort *)(DAT_8002be44 + 0x1c) - 5));
        }
      }
      set_display_fg_color(DAT_8002be18);
      display_draw_rect((uVar4 + (short)uVar24) - 1,(uVar5 + sVar9) - 1,
                        uVar4 + uVar2 + (short)uVar24,uVar5 + uVar3 + sVar9);
      uVar24 = (uint)uVar2 + (uint)uVar4 + uVar24 & 0xfffcffff;
    } while (uVar24 < 700);
    if ((*(byte *)(DAT_8002be10 + 0xc) <= uVar1) ||
       (uVar23 = uVar26 + uVar5 + uVar23 & 0xfffcffff, DAT_8002be48 <= uVar23)) {
      copy_rect_to_screen(0,0,(ushort)DAT_8002be14 + 0xfa,(ushort)DAT_8002be14);
      iVar17 = DAT_8002be50;
      iVar13 = Screen_Frame_Buffer_2;
      piVar15 = Global_Frame_Buffer_Pointer;
      uVar23 = 0;
      do {
        memcpy((void *)(iVar13 + uVar23 * 0x640),(void *)(*piVar15 + uVar23 * 0x640),iVar17);
        uVar23 = uVar23 + 1 & 0xfffeffff;
      } while (uVar23 < 0x1e0);
      return;
    }
  } while( true );
}



void FUN_8002be60(void)

{
  uint uVar1;
  char cVar2;
  bool bVar3;
  char *pcVar4;
  int *piVar5;
  int count;
  undefined *puVar6;
  undefined *puVar7;
  ushort uVar8;
  ushort uVar9;
  ushort uVar10;
  ushort uVar11;
  ushort uVar12;
  int iVar13;
  uint uVar14;
  uint uVar15;
  int iVar16;
  ushort *puVar17;
  ushort *puVar18;
  undefined auStack592 [556];
  
  iVar16 = DAT_8002c570;
  bVar3 = false;
  *(undefined *)(DAT_8002c570 + 0x3a) = 0;
  *(undefined *)(iVar16 + 0x43) = 0;
  FUN_800019fc(DAT_8002c574);
  pcVar4 = DAT_8002c578;
  *DAT_8002c578 = '\0';
  pcVar4[10] = '\x01';
  *(undefined2 *)(pcVar4 + 2) = 0xb4;
  *(undefined2 *)(pcVar4 + 4) = 0x75;
  *(undefined2 *)(pcVar4 + 6) = 2;
  *(undefined2 *)(pcVar4 + 8) = 2;
  memclear((uint)(pcVar4 + 0xd),0x10);
  display_file_select_menu();
  some_sd_card_stuff_3();
  FUN_8002b9bc();
  piVar5 = Global_Frame_Buffer_Pointer;
LAB_8002bed0:
  do {
    iVar13 = FUN_80022204();
    iVar16 = DAT_8002c570;
  } while (iVar13 == 0);
  if (iVar13 == 1) {
    *(undefined *)(DAT_8002c570 + 0x43) = 0;
    FUN_80001358(DAT_8002c574);
    *(undefined *)(iVar16 + 0x21) = 0;
    set_fpga_channel1_voltperdiv();
    set_fpga_channel2_voltperdiv();
    set_fpga_trigger_timebase();
    set_fpga_trigger_channel();
    set_fpga_channel_trigger_channel();
    set_fpga_trigger_edge();
    set_fpga_trigger_level();
    set_fpga_trigger_mode();
    set_fpga_channel1_offset();
    set_fpga_channel2_offset();
    *(undefined2 *)PTR_DAT_8002c5b4 = 0;
    setup_main_screen();
    *Global_Frame_Buffer_Pointer = Start_Of_Screen_Mem;
    return;
  }
  if (iVar13 == 2) {
    bVar3 = !bVar3;
    FUN_800106a4(0);
    *pcVar4 = '\0';
    if (!bVar3) {
      FUN_800107f4(0);
      iVar13 = DAT_8002c584;
      iVar16 = Screen_Frame_Buffer_2;
      uVar15 = 0;
      do {
        memcpy((void *)(*piVar5 + uVar15 * 0x640),(void *)(iVar16 + uVar15 * 0x640),iVar13);
        uVar15 = uVar15 + 1 & 0xfffeffff;
      } while (uVar15 < 0x1e0);
      memclear((uint)(pcVar4 + 0xd),0x10);
      goto LAB_8002bed0;
    }
    *pcVar4 = '\x01';
    FUN_800107f4();
    FUN_80000868(pcVar4 + 0xd,0x10,1);
    display_selected_sign();
  }
  else {
    if (iVar13 == 3) {
      bVar3 = false;
      if (*pcVar4 == '\0') {
        *pcVar4 = '\x01';
      }
      else {
        *pcVar4 = '\0';
      }
      FUN_800107f4(0);
      if (*pcVar4 == '\0') {
        FUN_800106a4(0);
        count = DAT_8002c584;
        iVar16 = Screen_Frame_Buffer_2;
        uVar15 = 0;
        do {
          memcpy((void *)(*piVar5 + uVar15 * 0x640),(void *)(iVar16 + uVar15 * 0x640),count);
          uVar15 = uVar15 + 1 & 0xfffeffff;
        } while (uVar15 < 0x1e0);
        memclear((uint)(pcVar4 + 0xd),0x10);
      }
      else {
        FUN_800106a4(1);
      }
      goto LAB_8002c1ac;
    }
    if (iVar13 != 4) {
      if (iVar13 == 5) {
        if (1 < (byte)pcVar4[10]) {
          if (*pcVar4 != '\0') {
            *pcVar4 = '\0';
            FUN_800106a4(0);
            FUN_800107f4(0);
            iVar13 = DAT_8002c584;
            iVar16 = Screen_Frame_Buffer_2;
            uVar15 = 0;
            do {
              memcpy((void *)(*piVar5 + uVar15 * 0x640),(void *)(iVar16 + uVar15 * 0x640),iVar13);
              uVar15 = uVar15 + 1 & 0xfffeffff;
            } while (uVar15 < 0x1e0);
            memclear((uint)(pcVar4 + 0xd),0x10);
          }
          pcVar4[10] = pcVar4[10] + -1;
          goto LAB_8002c510;
        }
      }
      else {
        if (iVar13 != 6) goto LAB_8002c1ac;
        if ((byte)pcVar4[10] < (byte)pcVar4[0xb]) {
          if (*pcVar4 != '\0') {
            *pcVar4 = '\0';
            FUN_800106a4(0);
            FUN_800107f4(0);
            iVar13 = DAT_8002c584;
            iVar16 = Screen_Frame_Buffer_2;
            uVar15 = 0;
            do {
              memcpy((void *)(*piVar5 + uVar15 * 0x640),(void *)(iVar16 + uVar15 * 0x640),iVar13);
              uVar15 = uVar15 + 1 & 0xfffeffff;
            } while (uVar15 < 0x1e0);
            memclear((uint)(pcVar4 + 0xd),0x10);
          }
          pcVar4[10] = pcVar4[10] + '\x01';
          FUN_8002b9bc();
        }
      }
      goto LAB_8002bed0;
    }
    if (*pcVar4 != '\0') {
      uVar10 = convert_color(DAT_8002c588);
      uVar11 = convert_color(DAT_8002c58c);
      uVar8 = convert_color(DAT_8002c590);
      set_screen_to_global_pointer();
      puVar6 = PTR_BITMAP_CONFIRM_DELETE_MENU_8002c594;
      uVar15 = 0xc0;
      do {
        iVar16 = 0xb4;
        puVar17 = (ushort *)(*piVar5 + uVar15 * 0x640 + 0x226);
        puVar18 = (ushort *)(puVar6 + uVar15 * 0x2d0 + -0x21c00);
        do {
          uVar12 = *puVar18;
          uVar9 = uVar8;
          if (((uVar12 != 0) && (uVar9 = uVar10, uVar12 != 0xf800)) &&
             (uVar9 = uVar12, uVar12 == 0x7e0)) {
            uVar9 = uVar11;
          }
          iVar16 = iVar16 + -1;
          *puVar17 = uVar9;
          puVar17 = puVar17 + 1;
          puVar18 = puVar18 + 2;
        } while (iVar16 != 0);
        uVar15 = uVar15 + 1 & 0xfffeffff;
      } while (uVar15 < 0x121);
      do {
        iVar16 = FUN_80022fd0();
      } while (iVar16 == 2);
      if (iVar16 == 0) {
        display_selected_sign();
        goto LAB_8002c1ac;
      }
      FUN_800106a4(0);
      FUN_800107f4(0);
      uVar14 = 0;
      FUN_8002c7a4();
      FUN_8000b2ac();
      uVar15 = 0;
      do {
        if (pcVar4[uVar15 + 0xd] != '\0') {
          uVar1 = (uint)(byte)pcVar4[10] * 0x10 + -0x10 + uVar15 & 0xffff;
          iVar16 = uVar1 - uVar14;
          uVar14 = uVar14 + 1 & 0xff;
          if ((byte)pcVar4[0xc] <= uVar1) break;
          FUN_8000bb04(*(undefined2 *)(pcVar4 + iVar16 * 2 + 0x1e));
          FUN_80033ea4(pcVar4 + uVar1 * 0xf + 0x7ee);
        }
        uVar15 = uVar15 + 1 & 0xfffeffff;
      } while (uVar15 < 0x10);
      memclear((uint)(pcVar4 + 0xd),0x10);
      FUN_8002c8f4();
      FUN_800261b4();
      FUN_8002c7a4();
      FUN_8000b2ac();
      FUN_8002b9bc();
      *pcVar4 = '\0';
      goto LAB_8002bed0;
    }
  }
LAB_8002c1ac:
  puVar7 = PTR_DAT_8002c59c;
  puVar6 = PTR_DAT_8002c598;
  if (iVar13 - 7U < 0x10) {
    if (*pcVar4 == '\0') {
      uVar14 = ((uint)(byte)pcVar4[10] * 0x10 + iVar13) - 0x17;
      uVar15 = uVar14 & 0xffff;
      *(short *)(PTR_DAT_8002c598 + 2) = (short)(uVar14 * 0x10000 >> 0x10);
      if (*puVar7 == '\0') {
        iVar16 = 1;
        *puVar6 = 1;
        puVar6[4] = 1;
        puVar6[5] = 0;
        display_return_delete_menu();
        if (iVar16 == 0) {
          uVar10 = convert_color(0);
          uVar11 = convert_color(DAT_8002c590);
          set_screen_to_global_pointer();
          puVar6 = PTR_BITMAP_RETURN_DELETE_MENU_8002c5ac;
          uVar15 = 0x1a4;
          do {
            iVar16 = 800;
            puVar17 = (ushort *)(*piVar5 + uVar15 * 0x640);
            puVar18 = (ushort *)(puVar6 + uVar15 * 0xc80 + -0x148200);
            do {
              uVar8 = *puVar18;
              uVar12 = uVar11;
              if ((uVar8 != 0) && (uVar12 = uVar8, uVar8 == 0xf800)) {
                uVar12 = uVar10;
              }
              iVar16 = iVar16 + -1;
              *puVar17 = uVar12;
              puVar17 = puVar17 + 1;
              puVar18 = puVar18 + 2;
            } while (iVar16 != 0);
            uVar15 = uVar15 + 1 & 0xfffeffff;
          } while (uVar15 < 0x1e0);
          set_frame_to_global_pointer();
          display_confirm_delete_menu();
        }
      }
      else {
        if ((byte)pcVar4[0xc] <= uVar15) {
          if (uVar15 == 0) goto LAB_8002c4f0;
          uVar15 = uVar15 - 1;
          *(short *)(puVar6 + 2) = (short)uVar15;
        }
        iVar16 = FUN_800337c4(auStack592,pcVar4 + (uVar15 & 0xffff) * 0xf + 0x7ee,1);
        if (iVar16 == 4) {
          FUN_8002c7a4();
          FUN_8000b2ac();
          FUN_8000bb04(*(undefined2 *)(pcVar4 + (uint)*(ushort *)(puVar6 + 2) * 2 + 0x1e));
          FUN_80033ea4(pcVar4 + (uint)*(ushort *)(puVar6 + 2) * 0xf + 0x7ee);
          FUN_8002c8f4();
          FUN_800261b4();
          FUN_8002c7a4();
          FUN_8000b2ac();
          FUN_8003347c(auStack592);
        }
        else {
          FUN_800334ac(auStack592,0);
          FUN_80033b18(auStack592,DAT_8002c5a4,DAT_8002c5a0,0);
          FUN_8003347c(auStack592);
          iVar16 = DAT_8002c570;
          *(undefined *)(DAT_8002c570 + 0x43) = 1;
          FUN_80001358(DAT_8002c5a4);
          *(undefined *)(iVar16 + 0x18) = 1;
          *(undefined *)(iVar16 + 0x17) = 1;
          *(undefined *)(iVar16 + 0x43) = 1;
          *(undefined *)(iVar16 + 0x3a) = 1;
          display_run_stop_text(0);
          set_frame_to_global_pointer();
          set_display_fg_color(0);
          display_fill_rect(2,0x2f,(ushort)DAT_8002c5a8 + 0xfb,(ushort)DAT_8002c5a8);
          setup_main_screen();
          display_trace_data();
          cVar2 = *(char *)(iVar16 + 0x43);
          while (cVar2 != '\0') {
            if (*(byte *)(iVar16 + 10) < 9) {
              FUN_8002b68c();
            }
            else {
              display_trace_data();
            }
            touch_handler();
            cVar2 = *(char *)(iVar16 + 0x43);
          }
        }
      }
LAB_8002c4f0:
      set_display_fg_color(DAT_8002c5b0);
      uVar10 = (ushort)DAT_8002c5a8;
      display_fill_rect(uVar10 + 0xfa,0,uVar10 + 0x140,uVar10);
      display_file_select_menu();
LAB_8002c510:
      FUN_8002b9bc();
    }
    else {
      display_selected_sign();
    }
  }
  goto LAB_8002bed0;
}



void display_selected_sign(void)

{
  ushort uVar1;
  ushort uVar2;
  ushort uVar3;
  ushort uVar4;
  ushort uVar5;
  int *piVar6;
  int iVar7;
  uint uVar8;
  ushort uVar9;
  ushort uVar10;
  uint uVar11;
  ushort *puVar12;
  int iVar13;
  uint uVar14;
  uint uVar15;
  uint uVar16;
  ushort uVar17;
  ushort *puVar18;
  uint local_38;
  
  uVar15 = 0;
  local_38 = 0;
  uVar9 = convert_color(0xffffff);
  uVar10 = convert_color(0x88);
  uVar1 = *(ushort *)(DAT_8002c780 + 2);
  uVar2 = *(ushort *)(DAT_8002c780 + 4);
  uVar3 = *(ushort *)(DAT_8002c780 + 6);
  uVar4 = *(ushort *)(DAT_8002c780 + 8);
  set_frame_to_global_pointer();
  piVar6 = Global_Frame_Buffer_Pointer;
  iVar13 = Screen_Frame_Buffer_2;
  uVar16 = 0;
  do {
    memcpy((void *)(*piVar6 + uVar16 * 0x640),(void *)(iVar13 + uVar16 * 0x640),DAT_8002c78c);
    uVar8 = DAT_8002c794;
    iVar7 = DAT_8002c790;
    uVar16 = uVar16 + 1 & 0xfffeffff;
  } while (uVar16 < 0x1e0);
  uVar16 = 0;
  do {
    uVar14 = 0;
    do {
      if (*(char *)(DAT_8002c780 + uVar15 + 0xd) != '\0') {
        local_38 = (uint)*(byte *)(DAT_8002c780 + 10) * 0x10 + -0x10 + uVar15 & 0xffff;
        if (*(byte *)(DAT_8002c780 + 0xc) <= local_38) break;
        uVar11 = 0;
        do {
          iVar13 = 0x1e;
          puVar12 = (ushort *)(PTR_BITMAP_SELECTED_SIGN_8002c798 + uVar11 * 0x78);
          puVar18 = (ushort *)
                    (*Global_Frame_Buffer_Pointer +
                     ((uint)uVar3 + (uVar11 + uVar4 + uVar16) * 800 + uVar14) * 2 + iVar7);
          do {
            uVar5 = *puVar12;
            uVar17 = uVar10;
            if ((uVar5 != 0) && (uVar17 = uVar5, uVar5 == uVar8)) {
              uVar17 = uVar9;
            }
            iVar13 = iVar13 + -1;
            *puVar18 = uVar17;
            puVar12 = puVar12 + 2;
            puVar18 = puVar18 + 1;
          } while (iVar13 != 0);
          uVar11 = uVar11 + 1 & 0xfffeffff;
        } while (uVar11 < 0x1e);
      }
      uVar14 = (uint)uVar1 + (uint)uVar3 + uVar14 & 0xfffcffff;
      uVar15 = uVar15 + 1 & 0xff;
    } while (uVar14 < 700);
    if ((*(byte *)(DAT_8002c780 + 0xc) <= local_38) ||
       (uVar16 = (uint)uVar2 + (uint)uVar4 + uVar16 & 0xfffcffff, DAT_8002c79c <= uVar16)) {
      copy_rect_to_screen(0,0,(ushort)DAT_8002c7a0 + 0xfa,(ushort)DAT_8002c7a0);
      *Global_Frame_Buffer_Pointer = Start_Of_Screen_Mem;
      return;
    }
  } while( true );
}



void FUN_8002c7a4(void)

{
  undefined *puVar1;
  int iVar2;
  int iVar3;
  undefined auStack568 [556];
  
  puVar1 = PTR_DAT_8002c8b8;
  if (*PTR_DAT_8002c8b8 == '\0') {
    iVar3 = FUN_800337c4(auStack568,s__pic_system_sys_8002c8d4,1);
  }
  else {
    iVar3 = FUN_800337c4(auStack568,s__wave_system_sys_8002c8bc,1);
  }
  iVar2 = DAT_8002c8d0;
  if (iVar3 == 4) {
    FUN_8003347c(auStack568);
    if (*puVar1 == '\0') {
      FUN_800337c4(auStack568,s__pic_system_sys_8002c8d4,7);
      some_sd_card_stuff_4();
    }
    else {
      FUN_800337c4(auStack568,s__wave_system_sys_8002c8bc,7);
      some_sd_card_stuff_4();
    }
    some_sd_card_stuff_4();
    memclear(iVar2 + 0x1e,2000);
    FUN_800334ac(auStack568,0);
    FUN_80034074(auStack568,iVar2 + 0x1e,2000,0);
  }
  FUN_800334ac(auStack568,0);
  FUN_80033b18(auStack568,iVar2 + 0x1e,2000,0);
  FUN_8003347c(auStack568);
  return;
}



void FUN_8002c8e4(void)

{
  ushort uVar1;
  longlong lVar2;
  char cVar3;
  int iVar4;
  int iVar5;
  char cVar6;
  uint uVar7;
  int iVar8;
  uint uVar9;
  undefined uVar10;
  uint uVar11;
  int iVar12;
  
  FUN_8002c7a4();
  iVar5 = DAT_8000b4c0;
  iVar4 = DAT_8000b4bc;
  cVar6 = *PTR_DAT_8000b4b8;
  uVar9 = 0;
  do {
    uVar1 = *(ushort *)(iVar5 + uVar9 * 2 + 0x1e);
    uVar7 = (uint)uVar1;
    if (uVar7 == 0) break;
    cVar3 = (char)uVar1;
    if (uVar7 < 10) {
      iVar8 = uVar9 * 0xf + iVar5;
      *(undefined *)(iVar8 + 0x7ee) = 0x2f;
      *(char *)(iVar8 + 0x7ef) = cVar3 + '0';
      *(undefined *)(iVar8 + 0x7f0) = 0x2e;
      if (cVar6 == '\0') {
        *(undefined *)(iVar8 + 0x7f1) = 0x62;
        uVar10 = 0x70;
        *(undefined *)(iVar8 + 0x7f2) = 0x6d;
      }
      else {
        *(undefined *)(iVar8 + 0x7f1) = 0x77;
        uVar10 = 0x76;
        *(undefined *)(iVar8 + 0x7f2) = 0x61;
      }
      *(undefined *)(iVar8 + 0x7f3) = uVar10;
      *(undefined *)(iVar8 + 0x7f4) = 0;
    }
    else {
      if (uVar7 < 100) {
        uVar11 = uVar7 * DAT_8000b4c4;
        iVar8 = uVar9 * 0xf + iVar5;
        *(undefined *)(iVar8 + 0x7ee) = 0x2f;
        *(char *)(iVar8 + 0x7ef) = (char)(uVar11 >> 0x13) + '0';
        *(char *)(iVar8 + 0x7f0) =
             cVar3 + (char)(uint)((ulonglong)uVar7 * (ulonglong)DAT_8000b4c8 >> 0x23) * -10 + '0';
        *(undefined *)(iVar8 + 0x7f1) = 0x2e;
        if (cVar6 == '\0') {
          *(undefined *)(iVar8 + 0x7f2) = 0x62;
          uVar10 = 0x70;
          *(undefined *)(iVar8 + 0x7f3) = 0x6d;
        }
        else {
          *(undefined *)(iVar8 + 0x7f2) = 0x77;
          uVar10 = 0x76;
          *(undefined *)(iVar8 + 0x7f3) = 0x61;
        }
        *(undefined *)(iVar8 + 0x7f4) = uVar10;
        *(undefined *)(iVar8 + 0x7f5) = 0;
      }
      else {
        if (uVar7 < 1000) {
          iVar12 = uVar7 * DAT_8000b4cc;
          iVar8 = uVar9 * 0xf + iVar5;
          *(undefined *)(iVar8 + 0x7ee) = 0x2f;
          *(char *)(iVar8 + 0x7ef) = (char)(iVar12 + 0xa3d7U >> 0x16) + '0';
          lVar2 = (longlong)iVar4 *
                  (longlong)
                  (int)(uVar7 + (uint)((ulonglong)uVar7 * (ulonglong)DAT_8000b4d0 >> 0x25) * -100);
          *(char *)(iVar8 + 0x7f0) = ((char)(int)(lVar2 >> 0x22) - (char)(lVar2 >> 0x3f)) + '0';
          *(char *)(iVar8 + 0x7f1) =
               cVar3 + (char)(uint)((ulonglong)uVar7 * (ulonglong)DAT_8000b4c8 >> 0x23) * -10 + '0';
          *(undefined *)(iVar8 + 0x7f2) = 0x2e;
          if (cVar6 == '\0') {
            *(undefined *)(iVar8 + 0x7f3) = 0x62;
            uVar10 = 0x70;
            *(undefined *)(iVar8 + 0x7f4) = 0x6d;
          }
          else {
            *(undefined *)(iVar8 + 0x7f3) = 0x77;
            uVar10 = 0x76;
            *(undefined *)(iVar8 + 0x7f4) = 0x61;
          }
          *(undefined *)(iVar8 + 0x7f5) = uVar10;
          *(undefined *)(iVar8 + 0x7f6) = 0;
        }
      }
    }
    uVar9 = uVar9 + 1 & 0xfffeffff;
  } while (uVar9 < 1000);
  uVar7 = uVar9 & 0xff;
  *(char *)(iVar5 + 0xc) = (char)uVar7;
  if ((uVar9 & 0xf) == 0) {
    cVar6 = (char)(uVar7 >> 4);
  }
  else {
    cVar6 = (char)(uVar7 >> 4) + '\x01';
  }
  *(char *)(iVar5 + 0xb) = cVar6;
  return;
}



void FUN_8002c8f4(void)

{
  undefined *puVar1;
  int iVar2;
  int iVar3;
  undefined auStack568 [556];
  
  puVar1 = PTR_DAT_8002ca08;
  if (*PTR_DAT_8002ca08 == '\0') {
    iVar3 = FUN_800337c4(auStack568,s__pic_system_sys_8002ca24,3);
  }
  else {
    iVar3 = FUN_800337c4(auStack568,s__wave_system_sys_8002ca0c,3);
  }
  iVar2 = DAT_8002ca20;
  if (iVar3 == 4) {
    FUN_8003347c(auStack568);
    if (*puVar1 == '\0') {
      FUN_800337c4(auStack568,s__pic_system_sys_8002ca24,7);
      some_sd_card_stuff_4();
    }
    else {
      FUN_800337c4(auStack568,s__wave_system_sys_8002ca0c,7);
      some_sd_card_stuff_4();
    }
    some_sd_card_stuff_4();
    memclear(iVar2 + 0x1e,2000);
    FUN_800334ac(auStack568,0);
    FUN_80034074(auStack568,iVar2 + 0x1e,2000,0);
  }
  FUN_800334ac(auStack568,0);
  FUN_80034074(auStack568,iVar2 + 0x1e,2000,0);
  FUN_8003347c(auStack568);
  return;
}



void FUN_8002ca34(void)

{
  ushort uVar1;
  longlong lVar2;
  char cVar3;
  int iVar4;
  int iVar5;
  undefined *puVar6;
  char cVar7;
  uint uVar8;
  int iVar9;
  uint uVar10;
  undefined uVar11;
  uint uVar12;
  int iVar13;
  
  FUN_8002c7a4();
  FUN_8000b2ac();
  iVar4 = DAT_8002ca88;
  puVar6 = PTR_DAT_8002ca84;
  FUN_8000bb04(*(undefined2 *)(DAT_8002ca88 + (uint)*(ushort *)(PTR_DAT_8002ca84 + 2) * 2 + 0x1e));
  FUN_80033ea4((uint)*(ushort *)(puVar6 + 2) * 0xf + iVar4 + 0x7ee);
  FUN_8002c8f4();
  FUN_800261b4();
  FUN_8002c7a4();
  iVar5 = DAT_8000b4c0;
  iVar4 = DAT_8000b4bc;
  cVar7 = *PTR_DAT_8000b4b8;
  uVar10 = 0;
  do {
    uVar1 = *(ushort *)(iVar5 + uVar10 * 2 + 0x1e);
    uVar8 = (uint)uVar1;
    if (uVar8 == 0) break;
    cVar3 = (char)uVar1;
    if (uVar8 < 10) {
      iVar9 = uVar10 * 0xf + iVar5;
      *(undefined *)(iVar9 + 0x7ee) = 0x2f;
      *(char *)(iVar9 + 0x7ef) = cVar3 + '0';
      *(undefined *)(iVar9 + 0x7f0) = 0x2e;
      if (cVar7 == '\0') {
        *(undefined *)(iVar9 + 0x7f1) = 0x62;
        uVar11 = 0x70;
        *(undefined *)(iVar9 + 0x7f2) = 0x6d;
      }
      else {
        *(undefined *)(iVar9 + 0x7f1) = 0x77;
        uVar11 = 0x76;
        *(undefined *)(iVar9 + 0x7f2) = 0x61;
      }
      *(undefined *)(iVar9 + 0x7f3) = uVar11;
      *(undefined *)(iVar9 + 0x7f4) = 0;
    }
    else {
      if (uVar8 < 100) {
        uVar12 = uVar8 * DAT_8000b4c4;
        iVar9 = uVar10 * 0xf + iVar5;
        *(undefined *)(iVar9 + 0x7ee) = 0x2f;
        *(char *)(iVar9 + 0x7ef) = (char)(uVar12 >> 0x13) + '0';
        *(char *)(iVar9 + 0x7f0) =
             cVar3 + (char)(uint)((ulonglong)uVar8 * (ulonglong)DAT_8000b4c8 >> 0x23) * -10 + '0';
        *(undefined *)(iVar9 + 0x7f1) = 0x2e;
        if (cVar7 == '\0') {
          *(undefined *)(iVar9 + 0x7f2) = 0x62;
          uVar11 = 0x70;
          *(undefined *)(iVar9 + 0x7f3) = 0x6d;
        }
        else {
          *(undefined *)(iVar9 + 0x7f2) = 0x77;
          uVar11 = 0x76;
          *(undefined *)(iVar9 + 0x7f3) = 0x61;
        }
        *(undefined *)(iVar9 + 0x7f4) = uVar11;
        *(undefined *)(iVar9 + 0x7f5) = 0;
      }
      else {
        if (uVar8 < 1000) {
          iVar13 = uVar8 * DAT_8000b4cc;
          iVar9 = uVar10 * 0xf + iVar5;
          *(undefined *)(iVar9 + 0x7ee) = 0x2f;
          *(char *)(iVar9 + 0x7ef) = (char)(iVar13 + 0xa3d7U >> 0x16) + '0';
          lVar2 = (longlong)iVar4 *
                  (longlong)
                  (int)(uVar8 + (uint)((ulonglong)uVar8 * (ulonglong)DAT_8000b4d0 >> 0x25) * -100);
          *(char *)(iVar9 + 0x7f0) = ((char)(int)(lVar2 >> 0x22) - (char)(lVar2 >> 0x3f)) + '0';
          *(char *)(iVar9 + 0x7f1) =
               cVar3 + (char)(uint)((ulonglong)uVar8 * (ulonglong)DAT_8000b4c8 >> 0x23) * -10 + '0';
          *(undefined *)(iVar9 + 0x7f2) = 0x2e;
          if (cVar7 == '\0') {
            *(undefined *)(iVar9 + 0x7f3) = 0x62;
            uVar11 = 0x70;
            *(undefined *)(iVar9 + 0x7f4) = 0x6d;
          }
          else {
            *(undefined *)(iVar9 + 0x7f3) = 0x77;
            uVar11 = 0x76;
            *(undefined *)(iVar9 + 0x7f4) = 0x61;
          }
          *(undefined *)(iVar9 + 0x7f5) = uVar11;
          *(undefined *)(iVar9 + 0x7f6) = 0;
        }
      }
    }
    uVar10 = uVar10 + 1 & 0xfffeffff;
  } while (uVar10 < 1000);
  uVar8 = uVar10 & 0xff;
  *(char *)(iVar5 + 0xc) = (char)uVar8;
  if ((uVar10 & 0xf) == 0) {
    cVar7 = (char)(uVar8 >> 4);
  }
  else {
    cVar7 = (char)(uVar8 >> 4) + '\x01';
  }
  *(char *)(iVar5 + 0xb) = cVar7;
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void waveform_select_file(void)

{
  undefined *puVar1;
  int iVar2;
  ushort uVar3;
  int iVar4;
  undefined auStack568 [556];
  
  iVar2 = DAT_8002cbd0;
  puVar1 = PTR_DAT_8002cbcc;
  uVar3 = *(ushort *)(PTR_DAT_8002cbcc + 2);
  if (*(byte *)(DAT_8002cbd0 + 0xc) <= uVar3) {
    if (uVar3 == 0) {
      return;
    }
    uVar3 = uVar3 - 1;
    *(ushort *)(PTR_DAT_8002cbcc + 2) = uVar3;
  }
  iVar4 = FUN_800337c4(auStack568,(uint)uVar3 * 0xf + iVar2 + 0x7ee,1);
  if (iVar4 == 4) {
    FUN_8002c7a4();
    FUN_8000b2ac();
    FUN_8000bb04(*(undefined2 *)(iVar2 + (uint)*(ushort *)(puVar1 + 2) * 2 + 0x1e));
    FUN_80033ea4((uint)*(ushort *)(puVar1 + 2) * 0xf + iVar2 + 0x7ee);
    FUN_8002c8f4();
    FUN_800261b4();
    FUN_8002c7a4();
    FUN_8000b2ac();
    FUN_8003347c(auStack568);
    return;
  }
  FUN_800334ac(auStack568,0);
  FUN_80033b18(auStack568,DAT_8002cbd8,DAT_8002cbd4,0);
  FUN_8003347c(auStack568);
  iVar2 = DAT_8002cbdc;
  *(undefined *)(DAT_8002cbdc + 0x43) = 1;
  FUN_80001358(DAT_8002cbd8);
  *(undefined *)(iVar2 + 0x18) = 1;
  *(undefined *)(iVar2 + 0x17) = 1;
  *(undefined *)(iVar2 + 0x43) = 1;
  *(undefined *)(iVar2 + 0x3a) = 1;
  display_run_stop_text(0);
  set_frame_to_global_pointer();
  set_display_fg_color(0);
  display_fill_rect(2,0x2f,(ushort)DAT_8002cbe0 + 0xfb,(ushort)DAT_8002cbe0);
  setup_main_screen();
  display_trace_data();
  return;
}



void FUN_8002cdd8(int param_1)

{
  short sVar1;
  int iVar2;
  int *piVar3;
  int iVar4;
  int iVar5;
  short *psVar6;
  
  iVar4 = DAT_8002ce30;
  piVar3 = DAT_8002ce2c;
  iVar5 = *DAT_8002ce2c;
  iVar2 = iVar5;
  if (iVar5 < 0xc) {
    while (iVar2 != 0) {
      psVar6 = (short *)(iVar4 + iVar2 * 2);
      sVar1 = psVar6[-1];
      if (sVar1 < param_1) break;
      *psVar6 = sVar1;
      iVar2 = iVar2 + -1;
    }
    *(short *)(iVar4 + iVar2 * 2) = (short)param_1;
    *piVar3 = iVar5 + 1;
  }
  return;
}



int FUN_8002ce34(int param_1,int *param_2)

{
  int *piVar1;
  int *piVar2;
  uint uVar3;
  int **ppiVar4;
  int iVar5;
  int *piVar6;
  bool bVar7;
  
  piVar1 = DAT_8002cf24;
  piVar2 = (int *)((int)param_2 + param_1);
  piVar6 = (int *)((DAT_8002cf24[0xe] + DAT_8002cf24[3]) - 1);
  bVar7 = piVar2 == piVar6;
  if (piVar2 <= piVar6) {
    bVar7 = *piVar2 == 0;
  }
  if (bVar7) {
    param_1 = param_1 + piVar2[1];
    FUN_8002ff50();
  }
  if (((int *)piVar1[0xe] < param_2) && (piVar2 = (int *)((int)param_2 - param_2[-1]), *piVar2 == 0)
     ) {
    param_1 = param_1 + piVar2[1];
    FUN_8002ff50(piVar2);
    param_2 = piVar2;
  }
  uVar3 = FUN_8002f838(param_1);
  if (uVar3 < 0x10) {
    piVar6 = piVar1 + uVar3 * 2;
    FUN_8003072c(param_2,0,param_1,piVar6[0x11]);
    piVar2 = (int *)piVar6[0x11];
    ppiVar4 = (int **)(param_2 + 2);
    if (piVar2 != (int *)0x0) {
      piVar2[1] = (int)ppiVar4;
    }
    *ppiVar4 = piVar2;
    param_2[3] = 0;
    piVar6[0x11] = (int)ppiVar4;
    iVar5 = *piVar1;
    *piVar1 = iVar5 + param_1;
    if ((*(char *)((int)piVar1 + 0x29) == '\0') &&
       (uVar3 = piVar1[3] - (iVar5 + param_1), (uint)piVar1[2] < uVar3)) {
      piVar1[2] = uVar3;
    }
  }
  return param_1;
}



int FUN_8002cf28(uint param_1)

{
  uint *puVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  int unaff_r5;
  
  FUN_8002fb5c();
  puVar1 = DAT_8002d040;
  uVar5 = DAT_8002d040[0x10];
  if (uVar5 <= param_1) {
    uVar5 = param_1 + 3 & 0xfffffffc;
  }
  uVar5 = uVar5 + 0xc;
  if (uVar5 <= *DAT_8002d040) {
    iVar2 = FUN_8002fea8();
    if (iVar2 == 0) {
      return 0;
    }
    do {
      uVar3 = FUN_8002f838(uVar5);
      while (uVar3 < 0x10) {
        uVar6 = puVar1[uVar3 * 2 + 0x11];
        if (uVar6 != 0) {
          unaff_r5 = *(int *)(uVar6 + 8);
        }
        if (uVar6 != 0 && unaff_r5 != 0) {
          uVar6 = *(uint *)(unaff_r5 + 4);
          while( true ) {
            if (uVar5 <= uVar6) {
              if (uVar6 - uVar5 < puVar1[0x10] + 0xc) {
                uVar5 = uVar6;
              }
              FUN_8002ff50(unaff_r5);
              *(int *)(puVar1[0xd] + iVar2 * 8 + 4) = unaff_r5;
              FUN_8003072c(unaff_r5,iVar2,uVar5,0);
              if ((int)uVar6 <= (int)uVar5) {
                return iVar2;
              }
              FUN_8002ce34(uVar6 - uVar5);
              return iVar2;
            }
            iVar4 = *(int *)(unaff_r5 + 8);
            if (iVar4 != 0) {
              unaff_r5 = *(int *)(iVar4 + 8);
            }
            if (iVar4 == 0 || unaff_r5 == 0) break;
            uVar6 = *(uint *)(unaff_r5 + 4);
          }
        }
        uVar3 = uVar3 + 1;
      }
      iVar4 = FUN_8002ffac(uVar5);
    } while (iVar4 == 0);
    FUN_8002ff18(iVar2);
  }
  return 0;
}



uint FUN_8002d044(undefined4 param_1,uint param_2,undefined4 param_3,uint param_4,undefined4 param_5
                 )

{
  undefined4 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  uint uVar8;
  uint uVar9;
  undefined in_ZR;
  bool bVar10;
  bool bVar11;
  
  FUN_8003a254(param_3);
  if ((bool)in_ZR) {
    return param_2;
  }
  uVar1 = FUN_8003a678(param_3,param_2);
  uVar2 = FUN_8003a678(param_5,param_4);
  uVar1 = FUN_8003a0c4(uVar2,uVar1);
  uVar2 = FUN_8003a678(param_1,param_2);
  uVar3 = FUN_8003a44c(uVar2,uVar1);
  if ((int)(uVar3 ^ param_4) < 0) {
    param_4 = param_4 ^ 0x80000000;
    if (uVar3 < param_4) {
      uVar8 = uVar3 - param_4 ^ 0x80000000;
      uVar3 = uVar3 - uVar8;
      param_4 = param_4 + uVar8;
    }
    uVar8 = uVar3 >> 0x17;
    bVar10 = (param_4 & 0x7f800000) == 0;
    if (!bVar10) {
      bVar10 = (uVar8 & 0xff) == 0xff;
    }
    uVar9 = uVar8 - (param_4 >> 0x17);
    if (bVar10) {
      if ((uVar8 & 0xff) != 0xff) {
        if ((uVar3 & 0x7f800000) == 0) {
          uVar3 = 0;
        }
        return uVar3;
      }
                    // WARNING: Subroutine does not return
      FUN_8003a54c();
    }
    uVar5 = uVar3 << 8 | 0x80000000;
    uVar4 = param_4 << 8 | 0x80000000;
    uVar6 = uVar5 - (uVar4 >> (uVar9 & 0xff));
    if ((int)uVar6 < 0) {
      bVar10 = (bool)((byte)(uVar6 >> 7) & 1);
      uVar3 = (uVar6 >> 8) + (uVar8 - 1) * 0x800000 + (uint)bVar10;
      if (!bVar10) {
        return uVar3;
      }
      if ((uVar6 & 0x7f) != 0) {
        return uVar3;
      }
    }
    else {
      bVar11 = (uVar8 & 0xfe) == 0;
      bVar10 = false;
      if (!bVar11) {
        uVar5 = uVar6 * 2;
        bVar10 = (int)uVar5 < 0;
        bVar11 = uVar5 == 0;
      }
      if (!bVar10) {
        if (bVar11) {
          if (uVar6 >> 7 == 0) {
            return uVar6 >> 7;
          }
        }
        else {
          uVar5 = uVar5 >> 2;
          if (uVar5 == 0) {
            return uVar5;
          }
          iVar7 = count_leading_zeroes(uVar5);
          uVar9 = 0x28U - iVar7 & 0x1f;
          if ((uVar8 ^ uVar8 - iVar7) >> 8 == 0) {
            return (uVar5 >> uVar9 | uVar5 << 0x20 - uVar9) + (uVar8 - iVar7) * 0x800000;
          }
        }
        return uVar3 & 0x80000000;
      }
      bVar10 = (bool)((byte)(uVar5 >> 7) & 1);
      uVar3 = ((int)uVar5 >> 8) + (uVar3 & 0xff800000) + (uint)bVar10;
      if (!bVar10) {
        return uVar3;
      }
      if ((uVar6 & 0x3f) != 0) {
        return uVar3;
      }
    }
    if (uVar4 << (0x20 - uVar9 & 0xff) == 0) {
      uVar3 = uVar3 & 0xfffffffe;
    }
    else {
      uVar3 = uVar3 - 1;
    }
    return uVar3;
  }
  iVar7 = uVar3 - param_4;
  if (uVar3 < param_4) {
    uVar3 = uVar3 - iVar7;
    param_4 = param_4 + iVar7;
  }
  uVar8 = uVar3 >> 0x17;
  bVar10 = (param_4 & 0x7f800000) == 0;
  if (!bVar10) {
    bVar10 = (uVar8 & 0xff) == 0xff;
  }
  uVar9 = uVar8 - (param_4 >> 0x17);
  if (bVar10) {
    if ((uVar8 & 0xff) != 0xff) {
      if ((uVar3 & 0x7f800000) == 0) {
        uVar3 = uVar3 & 0x80000000;
      }
      return uVar3;
    }
                    // WARNING: Subroutine does not return
    FUN_8003a54c();
  }
  uVar4 = uVar3 << 8 | 0x80000000;
  uVar6 = param_4 << 8 | 0x80000000;
  uVar5 = uVar6 >> (uVar9 & 0xff);
  bVar10 = CARRY4(uVar4,uVar5);
  uVar4 = uVar4 + uVar5;
  if (bVar10) {
    uVar8 = (uint)bVar10 << 0x1f | uVar4 >> 1;
    bVar10 = (bool)((byte)(uVar8 >> 7) & 1);
    uVar8 = uVar8 >> 8;
    uVar3 = uVar8 + (uVar3 & 0xff800000) + (uint)bVar10;
    if (bVar10) {
      uVar8 = uVar4 & 0xff;
    }
    uVar5 = uVar3 * 2;
    if (uVar8 != 0) {
      if (uVar8 != 0) {
        bVar10 = 0xfeffffff < uVar5;
      }
      if (!bVar10) {
        return uVar3;
      }
      goto LAB_8003a050;
    }
  }
  else {
    bVar10 = (bool)((byte)(uVar4 >> 7) & 1);
    uVar3 = (uVar4 >> 8) + (uVar8 - 1) * 0x800000 + (uint)bVar10;
    if (!bVar10) {
      return uVar3;
    }
    uVar5 = uVar3 * 2;
    if ((uVar4 & 0x7f) != 0) {
      bVar10 = 0xfeffffff < uVar5;
    }
    if (!bVar10) {
      return uVar3;
    }
  }
  if (uVar6 << (0x20 - uVar9 & 0xff) == 0) {
    uVar3 = uVar3 & 0xfffffffe;
  }
  if (uVar5 < 0xff000000) {
    return uVar3;
  }
LAB_8003a050:
  return (uVar3 + 0xa0000000 >> 0x17 | 0xff) << 0x17;
}



undefined4 FUN_8002d0bc(void)

{
  return 1;
}



void FUN_8002d0c4(int *param_1,int param_2,uint param_3)

{
  int iVar1;
  int iVar2;
  
  iVar2 = *param_1;
  if ((uint)(param_2 * param_2) < param_3) {
    do {
      iVar1 = iVar2;
      iVar2 = iVar1 + 1;
    } while ((uint)(iVar2 * iVar2) < param_3 - param_2 * param_2);
  }
  else {
    iVar1 = 0;
  }
  *param_1 = iVar1;
  return;
}



uint convert_color_via_table(uint color)

{
  return (uint)(byte)PTR_DAT_8002d1e8[color & 0xff] +
         (uint)(byte)PTR_DAT_8002d1ec[(color << 0x10) >> 0x18] * 0x20 +
         (uint)(byte)PTR_DAT_8002d1e8[(color << 8) >> 0x18] * 0x800;
}



undefined4
FUN_8002d1f0(undefined2 *param_1,undefined4 *param_2,int param_3,uint param_4,code *param_5,
            code *param_6)

{
  undefined4 *puVar1;
  undefined4 uVar2;
  byte bVar3;
  undefined4 *puVar4;
  int iVar5;
  
  puVar4 = param_2;
  iVar5 = param_3;
  do {
    (*param_5)(*param_1);
    uVar2 = (*param_6)();
    iVar5 = iVar5 + -1;
    *puVar4 = uVar2;
    puVar4 = puVar4 + 1;
    param_1 = param_1 + 1;
  } while (iVar5 != 0);
  if (0x1f < param_4) {
    return uVar2;
  }
  if ((int)param_4 < 9) {
    puVar4 = param_2;
    if (param_4 == 1) {
      do {
        iVar5 = param_3 + -1;
        bVar3 = (byte)(((uint)*(byte *)param_2 << 0x1f) >> 0x18);
        puVar1 = param_2 + 1;
        if (iVar5 != 0) {
          iVar5 = param_3 + -2;
          bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 1) & 1) << 6);
          puVar1 = param_2 + 2;
          if (iVar5 != 0) {
            iVar5 = param_3 + -3;
            bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 2) & 1) << 5);
            puVar1 = param_2 + 3;
            if (iVar5 != 0) {
              iVar5 = param_3 + -4;
              bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 3) & 1) << 4);
              puVar1 = param_2 + 4;
              if (iVar5 != 0) {
                iVar5 = param_3 + -5;
                bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 4) & 1) << 3);
                puVar1 = param_2 + 5;
                if (iVar5 != 0) {
                  iVar5 = param_3 + -6;
                  bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 5) & 1) << 2);
                  puVar1 = param_2 + 6;
                  if (iVar5 != 0) {
                    iVar5 = param_3 + -7;
                    bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 6) & 1) << 1);
                    puVar1 = param_2 + 7;
                    if (iVar5 != 0) {
                      puVar1 = param_2 + 8;
                      bVar3 = bVar3 | *(byte *)(param_2 + 7) & 1;
                    }
                  }
                }
              }
            }
          }
        }
        *(byte *)puVar4 = bVar3;
        param_2 = puVar1;
        param_3 = iVar5;
        puVar4 = (undefined4 *)((int)puVar4 + 1);
      } while (iVar5 != 0);
    }
    else {
      if (param_4 == 2) {
        do {
          iVar5 = param_3 + -1;
          bVar3 = (byte)(((uint)*(byte *)param_2 << 0x1e) >> 0x18);
          puVar1 = param_2 + 1;
          if (iVar5 != 0) {
            iVar5 = param_3 + -2;
            bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 1) & 3) << 4);
            puVar1 = param_2 + 2;
            if (iVar5 != 0) {
              iVar5 = param_3 + -3;
              bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 2) & 3) << 2);
              puVar1 = param_2 + 3;
              if (iVar5 != 0) {
                puVar1 = param_2 + 4;
                iVar5 = param_3 + -4;
                bVar3 = bVar3 | *(byte *)(param_2 + 3) & 3;
              }
            }
          }
          *(byte *)puVar4 = bVar3;
          param_2 = puVar1;
          param_3 = iVar5;
          puVar4 = (undefined4 *)((int)puVar4 + 1);
        } while (iVar5 != 0);
      }
      else {
        if (param_4 == 4) {
          do {
            iVar5 = param_3 + -1;
            bVar3 = (byte)(((uint)*(byte *)param_2 << 0x1c) >> 0x18);
            puVar1 = param_2 + 1;
            if (iVar5 != 0) {
              puVar1 = param_2 + 2;
              iVar5 = param_3 + -2;
              bVar3 = bVar3 | *(byte *)(param_2 + 1) & 0xf;
            }
            *(byte *)puVar4 = bVar3;
            param_2 = puVar1;
            param_3 = iVar5;
            puVar4 = (undefined4 *)((int)puVar4 + 1);
          } while (iVar5 != 0);
        }
        else {
          do {
            param_3 = param_3 + -1;
            *(byte *)puVar4 = *(byte *)param_2;
            param_2 = param_2 + 1;
            puVar4 = (undefined4 *)((int)puVar4 + 1);
          } while (param_3 != 0);
        }
      }
    }
  }
  else {
    puVar4 = param_2;
    if (0x10 < (int)param_4) {
      return 0;
    }
    do {
      param_3 = param_3 + -1;
      *(undefined2 *)puVar4 = *(undefined2 *)param_2;
      param_2 = param_2 + 1;
      puVar4 = (undefined4 *)((int)puVar4 + 2);
    } while (param_3 != 0);
  }
  return 1;
}



undefined4
FUN_8002d258(undefined *param_1,undefined4 *param_2,int param_3,uint param_4,code *param_5,
            code *param_6)

{
  undefined4 *puVar1;
  undefined4 uVar2;
  byte bVar3;
  undefined4 *puVar4;
  int iVar5;
  
  puVar4 = param_2;
  iVar5 = param_3;
  do {
    (*param_5)(*param_1);
    uVar2 = (*param_6)();
    iVar5 = iVar5 + -1;
    *puVar4 = uVar2;
    puVar4 = puVar4 + 1;
    param_1 = param_1 + 1;
  } while (iVar5 != 0);
  if (0x1f < param_4) {
    return uVar2;
  }
  if ((int)param_4 < 9) {
    puVar4 = param_2;
    if (param_4 == 1) {
      do {
        iVar5 = param_3 + -1;
        bVar3 = (byte)(((uint)*(byte *)param_2 << 0x1f) >> 0x18);
        puVar1 = param_2 + 1;
        if (iVar5 != 0) {
          iVar5 = param_3 + -2;
          bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 1) & 1) << 6);
          puVar1 = param_2 + 2;
          if (iVar5 != 0) {
            iVar5 = param_3 + -3;
            bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 2) & 1) << 5);
            puVar1 = param_2 + 3;
            if (iVar5 != 0) {
              iVar5 = param_3 + -4;
              bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 3) & 1) << 4);
              puVar1 = param_2 + 4;
              if (iVar5 != 0) {
                iVar5 = param_3 + -5;
                bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 4) & 1) << 3);
                puVar1 = param_2 + 5;
                if (iVar5 != 0) {
                  iVar5 = param_3 + -6;
                  bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 5) & 1) << 2);
                  puVar1 = param_2 + 6;
                  if (iVar5 != 0) {
                    iVar5 = param_3 + -7;
                    bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 6) & 1) << 1);
                    puVar1 = param_2 + 7;
                    if (iVar5 != 0) {
                      puVar1 = param_2 + 8;
                      bVar3 = bVar3 | *(byte *)(param_2 + 7) & 1;
                    }
                  }
                }
              }
            }
          }
        }
        *(byte *)puVar4 = bVar3;
        param_2 = puVar1;
        param_3 = iVar5;
        puVar4 = (undefined4 *)((int)puVar4 + 1);
      } while (iVar5 != 0);
    }
    else {
      if (param_4 == 2) {
        do {
          iVar5 = param_3 + -1;
          bVar3 = (byte)(((uint)*(byte *)param_2 << 0x1e) >> 0x18);
          puVar1 = param_2 + 1;
          if (iVar5 != 0) {
            iVar5 = param_3 + -2;
            bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 1) & 3) << 4);
            puVar1 = param_2 + 2;
            if (iVar5 != 0) {
              iVar5 = param_3 + -3;
              bVar3 = bVar3 | (byte)((*(byte *)(param_2 + 2) & 3) << 2);
              puVar1 = param_2 + 3;
              if (iVar5 != 0) {
                puVar1 = param_2 + 4;
                iVar5 = param_3 + -4;
                bVar3 = bVar3 | *(byte *)(param_2 + 3) & 3;
              }
            }
          }
          *(byte *)puVar4 = bVar3;
          param_2 = puVar1;
          param_3 = iVar5;
          puVar4 = (undefined4 *)((int)puVar4 + 1);
        } while (iVar5 != 0);
      }
      else {
        if (param_4 == 4) {
          do {
            iVar5 = param_3 + -1;
            bVar3 = (byte)(((uint)*(byte *)param_2 << 0x1c) >> 0x18);
            puVar1 = param_2 + 1;
            if (iVar5 != 0) {
              puVar1 = param_2 + 2;
              iVar5 = param_3 + -2;
              bVar3 = bVar3 | *(byte *)(param_2 + 1) & 0xf;
            }
            *(byte *)puVar4 = bVar3;
            param_2 = puVar1;
            param_3 = iVar5;
            puVar4 = (undefined4 *)((int)puVar4 + 1);
          } while (iVar5 != 0);
        }
        else {
          do {
            param_3 = param_3 + -1;
            *(byte *)puVar4 = *(byte *)param_2;
            param_2 = param_2 + 1;
            puVar4 = (undefined4 *)((int)puVar4 + 1);
          } while (param_3 != 0);
        }
      }
    }
  }
  else {
    puVar4 = param_2;
    if (0x10 < (int)param_4) {
      return 0;
    }
    do {
      param_3 = param_3 + -1;
      *(undefined2 *)puVar4 = *(undefined2 *)param_2;
      param_2 = param_2 + 1;
      puVar4 = (undefined4 *)((int)puVar4 + 2);
    } while (param_3 != 0);
  }
  return 1;
}



void FUN_8002d2c0(int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  bool bVar4;
  
  iVar2 = 0;
  do {
    if (*(int *)(DAT_8002d2ec + iVar2 * 4) == param_1) {
      return;
    }
    iVar3 = iVar2 + 1;
    bVar4 = SBORROW4(iVar3,2);
    iVar1 = iVar2 + -1;
    if (1 < iVar3) {
      iVar3 = -1;
    }
    iVar2 = iVar3;
  } while (iVar1 < 0 != bVar4);
  return;
}



void render_string(void *ptr,uint length,void *bounding_box)

{
  int *piVar1;
  code **ppcVar2;
  int iVar3;
  uint uVar4;
  uint *local_20;
  uint local_1c;
  void *pvStack24;
  
  local_20 = (uint *)ptr;
  local_1c = length;
  pvStack24 = bounding_box;
  local_20 = (uint *)(**DAT_8002d3c4)(ptr,&local_1c);
  piVar1 = DAT_8002d3c8;
  if ((*(int *)(*DAT_8002d3c8 + 0x14) == 0) ||
     (iVar3 = FUN_8001962c(*(int *)(*DAT_8002d3c8 + 0x14),bounding_box), iVar3 != 0)) {
    FUN_8001a004(1);
    ppcVar2 = DAT_8002d3cc;
    iVar3 = *(int *)(*(int *)(*piVar1 + 0x1c) + 0x14);
    if (iVar3 == 0) {
      while (local_1c = local_1c - 1, -1 < (int)local_1c) {
        uVar4 = get_char_from_string(&local_20);
        (***(code ***)(*piVar1 + 0x1c))(uVar4);
        if (*ppcVar2 != (code *)0x0) {
                    // WARNING: Could not recover jumptable at 0x8002d3a0. Too many branches
                    // WARNING: Treating indirect jump as call
          (**ppcVar2)(uVar4);
          return;
        }
      }
    }
    else {
      (**(code **)(iVar3 + 8))(local_20,local_1c);
    }
    FUN_8001a004(0);
  }
  return;
}



void FUN_8002d3d0(int param_1,int param_2,undefined4 param_3,undefined4 param_4,int param_5,
                 int param_6,int param_7,int param_8)

{
  int *piVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  int iVar6;
  undefined4 uVar7;
  int iVar8;
  uint uVar9;
  int iVar10;
  int iVar11;
  uint uVar12;
  undefined uVar13;
  uint local_60;
  undefined4 local_5c;
  undefined4 local_58;
  undefined4 local_54;
  undefined4 local_50;
  int local_4c;
  undefined4 local_48;
  undefined4 local_44;
  undefined4 local_40;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_2c;
  
  piVar1 = DAT_8002d730;
  uVar2 = FUN_8003a3a0(*(undefined *)(*DAT_8002d730 + 0x18));
  uVar2 = FUN_8003a854(uVar2,0xffffffff);
  uVar3 = FUN_8003a370(param_3);
  uVar4 = FUN_8003a678(uVar3,uVar2);
  uVar2 = FUN_80039fd8(uVar3,uVar2);
  local_58 = FUN_8001a1b4(param_5 * 1000);
  local_40 = FUN_8001a1b4(param_6 * 1000);
  uVar3 = FUN_80019ccc(param_5 * 1000);
  local_50 = FUN_80019ccc(param_6 * 1000);
  FUN_8003a44c(uVar4);
  local_44 = FUN_8003a31c();
  FUN_8003a44c(uVar2);
  local_48 = FUN_8003a31c();
  uVar5 = FUN_8003a370(local_58);
  FUN_8003a44c(uVar5,uVar4);
  iVar6 = FUN_8003a2d8();
  local_54 = FUN_8003a370(iVar6 >> 0x10);
  FUN_8003a44c(uVar5,uVar2);
  iVar6 = FUN_8003a2d8();
  local_58 = FUN_8003a370(iVar6 >> 0x10);
  uVar5 = FUN_8003a370(local_40);
  FUN_8003a44c(uVar5,uVar4);
  iVar6 = FUN_8003a2d8();
  uVar7 = FUN_8003a370(iVar6 >> 0x10);
  FUN_8003a44c(uVar5,uVar2);
  iVar6 = FUN_8003a2d8();
  local_40 = FUN_8003a370(iVar6 >> 0x10);
  uVar3 = FUN_8003a370(uVar3);
  FUN_8003a44c(uVar3,uVar4);
  iVar6 = FUN_8003a2d8();
  local_5c = FUN_8003a370(iVar6 >> 0x10);
  FUN_8003a44c(uVar3,uVar2);
  iVar6 = FUN_8003a2d8();
  local_2c = FUN_8003a370(iVar6 >> 0x10);
  uVar3 = FUN_8003a370(local_50);
  FUN_8003a44c(uVar3,uVar4);
  iVar6 = FUN_8003a2d8();
  local_3c = FUN_8003a370(iVar6 >> 0x10);
  FUN_8003a44c(uVar3,uVar2);
  iVar6 = FUN_8003a2d8();
  uVar2 = FUN_8003a370(iVar6 >> 0x10);
  FUN_80039f74(local_54);
  FUN_80031e28();
  iVar8 = FUN_800396bc();
  FUN_80039f74(local_40);
  FUN_80034bac();
  iVar6 = FUN_800396bc();
  iVar10 = *(int *)(*piVar1 + 0x14);
  if (iVar10 != 0) {
    if (param_8 == 1) {
      iVar11 = *(short *)(iVar10 + 6) - param_2;
      if (iVar11 < iVar6) {
        iVar6 = iVar11;
      }
      iVar10 = *(short *)(iVar10 + 2) - param_2;
      if (iVar8 < iVar10) {
        iVar8 = iVar10;
      }
    }
    else {
      if (param_8 == -1) {
        iVar11 = *(short *)(iVar10 + 6) - param_2;
        if (iVar11 < iVar8) {
          iVar8 = iVar11;
        }
        iVar10 = *(short *)(iVar10 + 2) - param_2;
        if (iVar6 < iVar10) {
          iVar6 = iVar10;
        }
      }
    }
  }
  local_60 = 0;
  local_4c = 0;
  while (iVar8 <= iVar6) {
    FUN_8002d0c4(&local_4c,iVar6,local_44);
    FUN_8002d0c4(&local_60,iVar6,local_48);
    uVar12 = local_60 - 1;
    local_60 = uVar12;
    uVar9 = FUN_8003a2d8(local_2c);
    uVar13 = uVar12 <= uVar9;
    if ((int)uVar9 < (int)uVar12) {
      local_60 = uVar9;
    }
    local_38 = FUN_8003a370(iVar6);
    FUN_8003a3c8(local_38,local_58);
    uVar9 = local_60;
    if (!(bool)uVar13) {
      FUN_8002d044(local_38,local_54,local_58,local_5c,local_2c);
      uVar9 = FUN_8003a2d8();
    }
    FUN_8003a5fc(local_38,uVar7);
    iVar10 = local_4c;
    if (!(bool)uVar13) {
      FUN_8002d044(local_38,uVar7,local_40,local_3c,uVar2);
      iVar10 = FUN_8003a2d8();
    }
    if (param_7 < 1) {
      iVar10 = -uVar9;
    }
    (***(code ***)(*piVar1 + 100))(iVar10 + param_1,param_8 * iVar6 + param_2);
    iVar6 = iVar6 + -1;
  }
  return;
}



undefined8
FUN_8002d734(int param_1,int param_2,int param_3,undefined4 param_4,byte *param_5,uint param_6,
            uint param_7,int param_8,undefined4 param_9,ushort *param_10)

{
  ushort uVar1;
  undefined *puVar2;
  undefined *puVar3;
  uint uVar4;
  byte bVar5;
  uint uVar6;
  uint uVar7;
  ushort *puVar8;
  bool bVar9;
  
  puVar3 = PTR_DAT_8002d940;
  uVar6 = 8 - param_6;
  uVar7 = (uint)((byte)PTR_DAT_8002d940[*param_5] >> (param_6 & 0xff));
  bVar5 = *(byte *)(*DAT_8002d944 + 0x10) & 3;
  if ((*(byte *)(*DAT_8002d944 + 0x10) & 3) == 0) {
    while( true ) {
      if (param_7 < uVar6) {
        uVar6 = param_7;
      }
      param_7 = param_7 - uVar6;
      puVar8 = param_10;
      do {
        uVar4 = uVar7 & 1;
        uVar6 = uVar6 - 1;
        uVar7 = uVar7 >> 1;
        param_10 = puVar8 + 1;
        *puVar8 = (ushort)*(undefined4 *)(param_8 + uVar4 * 4);
        puVar8 = param_10;
      } while (uVar6 != 0);
      if (param_7 == 0) break;
      param_5 = param_5 + 1;
      uVar6 = 8;
      uVar7 = (uint)(byte)puVar3[*param_5];
    }
  }
  else {
    if (bVar5 != 1) {
      if (bVar5 == 2) {
        uVar1 = *(ushort *)(param_8 + 4);
        do {
          if (param_7 < uVar6) {
            uVar6 = param_7;
          }
          param_7 = param_7 - uVar6;
          if (param_2 == 0) {
            while (uVar7 != 0) {
              if ((uVar7 & 1) != 0) {
                *param_10 = uVar1;
              }
              uVar6 = uVar6 - 1;
              param_10 = param_10 + 1;
              if (uVar6 == 0) goto LAB_8002d8d0;
              uVar7 = uVar7 >> 1;
            }
            param_10 = param_10 + uVar6;
          }
          else {
            while (uVar7 != 0) {
              if ((uVar7 & 1) != 0) {
                (***(code ***)(param_2 + 8))(param_2,param_3,param_4);
                *param_10 = uVar1;
              }
              uVar6 = uVar6 - 1;
              param_10 = param_10 + 1;
              param_3 = param_3 + 1;
              if (uVar6 == 0) goto LAB_8002d8d0;
              uVar7 = uVar7 >> 1;
            }
            param_10 = param_10 + uVar6;
            param_3 = param_3 + uVar6;
          }
LAB_8002d8d0:
          if (param_7 == 0) goto LAB_8002d938;
          param_5 = param_5 + 1;
          uVar6 = 8;
          uVar7 = (uint)(byte)PTR_DAT_8002d940[*param_5];
        } while( true );
      }
      if (bVar5 != 3) goto LAB_8002d938;
    }
    puVar2 = (undefined *)(**(code **)(*(int *)(param_1 + 0x10) + 8))();
    puVar3 = puVar2;
    while( true ) {
      if (param_7 < uVar6) {
        uVar6 = param_7;
      }
      param_7 = param_7 - uVar6;
      if (param_2 == 0) {
        do {
          bVar9 = (uVar7 & 1) != 0;
          if (bVar9) {
            puVar3 = (undefined *)(uint)*param_10;
          }
          uVar7 = uVar7 >> 1;
          if (bVar9) {
            puVar3 = (undefined *)((uint)puVar3 ^ (uint)puVar2 & 0xffff);
            *param_10 = (ushort)puVar3;
          }
          uVar6 = uVar6 - 1;
          param_10 = param_10 + 1;
        } while (uVar6 != 0);
      }
      else {
        do {
          if ((uVar7 & 1) != 0) {
            (***(code ***)(param_2 + 8))(param_2,param_3,param_4);
            *param_10 = *param_10 ^ (ushort)puVar2;
          }
          uVar6 = uVar6 - 1;
          uVar7 = uVar7 >> 1;
          param_10 = param_10 + 1;
          param_3 = param_3 + 1;
        } while (uVar6 != 0);
      }
      if (param_7 == 0) break;
      param_5 = param_5 + 1;
      uVar6 = 8;
      uVar7 = (uint)(byte)PTR_DAT_8002d940[*param_5];
      puVar3 = PTR_DAT_8002d940;
    }
  }
LAB_8002d938:
  return CONCAT44(param_2,param_1);
}



undefined8
FUN_8002d948(undefined4 param_1,int param_2,int param_3,undefined4 param_4,byte *param_5,
            uint param_6,uint param_7,int param_8,ushort *param_9)

{
  byte bVar1;
  uint uVar2;
  uint uVar3;
  ushort *puVar4;
  
  uVar2 = 4 - param_6 & 0xff;
  bVar1 = *(byte *)(*DAT_8002daa0 + 0x10) & 3;
  uVar3 = (uint)*param_5 << ((param_6 & 0x7f) << 1) & 0xff;
  if ((*(byte *)(*DAT_8002daa0 + 0x10) & 3) == 0) {
    while( true ) {
      if ((int)param_7 < (int)uVar2) {
        uVar2 = param_7 & 0xff;
      }
      param_7 = param_7 - uVar2;
      puVar4 = param_9;
      do {
        param_9 = puVar4 + 1;
        *puVar4 = (ushort)*(undefined4 *)(param_8 + (uVar3 >> 6) * 4);
        uVar3 = (uVar3 << 0x1a) >> 0x18;
        uVar2 = uVar2 - 1 & 0xff;
        puVar4 = param_9;
      } while (uVar2 != 0);
      if (param_7 == 0) break;
      param_5 = param_5 + 1;
      uVar3 = (uint)*param_5;
      uVar2 = 4;
    }
  }
  else {
    if (bVar1 == 1) {
      while( true ) {
        if ((int)param_7 < (int)uVar2) {
          uVar2 = param_7 & 0xff;
        }
        param_7 = param_7 - uVar2;
        do {
          if ((uVar3 & 0xc0) != 0) {
            *param_9 = *param_9 ^ 0xff;
          }
          uVar3 = (uVar3 << 0x1a) >> 0x18;
          uVar2 = uVar2 - 1 & 0xff;
          param_9 = param_9 + 1;
        } while (uVar2 != 0);
        if (param_7 == 0) break;
        param_5 = param_5 + 1;
        uVar3 = (uint)*param_5;
        uVar2 = 4;
      }
    }
    else {
      if (bVar1 == 2) {
        while( true ) {
          if ((int)param_7 < (int)uVar2) {
            uVar2 = param_7 & 0xff;
          }
          param_7 = param_7 - uVar2;
          do {
            if (((uVar3 & 0xc0) != 0) &&
               (*param_9 = (ushort)*(undefined4 *)(param_8 + (uVar3 >> 6) * 4), param_2 != 0)) {
              (***(code ***)(param_2 + 8))(param_2,param_3,param_4);
            }
            uVar3 = (uVar3 << 0x1a) >> 0x18;
            uVar2 = uVar2 - 1 & 0xff;
            param_9 = param_9 + 1;
            param_3 = param_3 + 1;
          } while (uVar2 != 0);
          if (param_7 == 0) break;
          param_5 = param_5 + 1;
          uVar3 = (uint)*param_5;
          uVar2 = 4;
        }
      }
    }
  }
  return CONCAT44(param_2,param_1);
}



void FUN_8002daa4(undefined4 param_1,int param_2,int param_3,undefined4 param_4,byte *param_5,
                 uint param_6,uint param_7,int param_8,ushort *param_9)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  ushort uVar4;
  byte bVar5;
  ushort *puVar6;
  ushort *puVar7;
  uint uVar8;
  bool bVar9;
  
  uVar1 = (uint)*param_5 << ((param_6 & 0x3f) << 2);
  bVar5 = *(byte *)(*DAT_8002dcb8 + 0x10) & 3;
  uVar2 = 2 - param_6 & 0xff;
  uVar8 = uVar1 & 0xff;
  if ((*(byte *)(*DAT_8002dcb8 + 0x10) & 3) == 0) {
    puVar6 = param_9;
    if (param_6 != 0) {
      param_7 = param_7 - 1;
      puVar6 = param_9 + 1;
      *param_9 = (ushort)*(undefined4 *)(param_8 + (uVar8 >> 4) * 4);
      param_5 = param_5 + 1;
      uVar8 = (uint)*param_5;
    }
    if (1 < (int)param_7) {
      iVar3 = (int)param_7 >> 1;
      param_7 = param_7 & 1;
      do {
        iVar3 = iVar3 + -1;
        puVar7 = puVar6 + 1;
        *puVar6 = (ushort)*(undefined4 *)(param_8 + (uVar8 >> 4) * 4);
        puVar6 = puVar6 + 2;
        *puVar7 = (ushort)*(undefined4 *)(param_8 + (uVar8 & 0xf) * 4);
        param_5 = param_5 + 1;
        uVar8 = (uint)*param_5;
      } while (iVar3 != 0);
    }
    if (param_7 != 0) {
      *puVar6 = (ushort)*(undefined4 *)(param_8 + (uVar8 >> 4) * 4);
    }
  }
  else {
    if (bVar5 == 1) {
      while( true ) {
        if ((int)param_7 < (int)uVar2) {
          uVar2 = param_7 & 0xff;
        }
        param_7 = param_7 - uVar2;
        do {
          uVar4 = (ushort)param_6;
          bVar9 = (uVar8 & 0xc0) != 0;
          if (bVar9) {
            uVar4 = *param_9;
          }
          if (bVar9) {
            *param_9 = uVar4 ^ 0xff;
          }
          param_6 = uVar8 << 0x1c;
          uVar2 = uVar2 - 1 & 0xff;
          uVar8 = param_6 >> 0x18;
          param_9 = param_9 + 1;
        } while (uVar2 != 0);
        if (param_7 == 0) break;
        param_5 = param_5 + 1;
        uVar8 = (uint)*param_5;
        uVar2 = 2;
      }
    }
    else {
      if (bVar5 == 2) {
        if (param_6 != 0) {
          if ((uVar1 & 0xf0) != 0) {
            uVar2 = *(uint *)(param_8 + (uVar8 >> 4) * 4);
            *param_9 = (ushort)uVar2;
            if (param_2 != 0) {
              uVar2 = (***(code ***)(param_2 + 8))(param_2,param_3,param_4);
            }
          }
          param_5 = param_5 + 1;
          uVar8 = (uint)*param_5;
          param_9 = param_9 + 1;
          param_7 = param_7 - 1;
          param_3 = param_3 + 1;
        }
        while (1 < (int)param_7) {
          if (((uVar8 & 0xf0) != 0) &&
             (*param_9 = (ushort)*(undefined4 *)(param_8 + (uVar8 >> 4) * 4), param_2 != 0)) {
            (***(code ***)(param_2 + 8))(param_2,param_3,param_4);
          }
          uVar2 = uVar8 & 0xf;
          bVar9 = uVar2 != 0;
          if (bVar9) {
            uVar2 = *(uint *)(param_8 + uVar2 * 4);
            param_9[1] = (ushort)uVar2;
          }
          if (bVar9 && param_2 != 0) {
            uVar2 = (***(code ***)(param_2 + 8))(param_2,param_3 + 1,param_4);
          }
          param_5 = param_5 + 1;
          uVar8 = (uint)*param_5;
          param_9 = param_9 + 2;
          param_7 = param_7 - 2;
          param_3 = param_3 + 2;
        }
        bVar9 = param_7 == 0;
        if (!bVar9) {
          uVar2 = uVar8 >> 4;
          bVar9 = uVar2 == 0;
        }
        if (!bVar9) {
          *param_9 = (ushort)*(undefined4 *)(param_8 + uVar2 * 4);
          bVar9 = param_2 == 0;
        }
        if (!bVar9) {
                    // WARNING: Could not recover jumptable at 0x8002dc6c. Too many branches
                    // WARNING: Treating indirect jump as call
          (***(code ***)(param_2 + 8))(param_2,param_3,param_4);
          return;
        }
      }
    }
  }
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void render_character_data
               (void *fncptr,short xpos,short ypos,byte xpixels,byte ypixels,byte size,
               byte bytesperline,byte *bitmap,byte startpixel,void *color)

{
  int iVar1;
  uint uVar2;
  int *piVar3;
  int *piVar4;
  byte bVar5;
  ushort uVar6;
  undefined2 *puVar7;
  int iVar8;
  undefined2 uVar9;
  uint uVar10;
  byte *pbVar11;
  undefined2 uVar12;
  uint uVar13;
  uint unaff_r4;
  uint uVar14;
  int unaff_r5;
  int iVar15;
  int iVar16;
  undefined2 *unaff_r6;
  int unaff_r7;
  int unaff_r8;
  int iVar17;
  int iVar18;
  int iVar19;
  undefined2 *puVar20;
  uint uVar21;
  int *piVar22;
  int *piVar23;
  int *piVar24;
  undefined4 uVar25;
  bool bVar26;
  undefined3 in_stack_00000001;
  undefined3 in_stack_00000005;
  undefined3 in_stack_00000009;
  undefined3 in_stack_00000011;
  int local_40;
  int local_3c;
  int local_38;
  void *pvStack52;
  int iStack48;
  int iStack44;
  uint uStack40;
  
  piVar4 = DAT_8002e548;
  piVar3 = Global_Frame_Buffer_Pointer;
  uVar14 = (uint)xpixels;
  iStack44 = (int)ypos;
  iStack48 = (int)xpos;
  uStack40 = uVar14;
  pvStack52 = fncptr;
  piVar23 = &local_40;
  piVar24 = &local_40;
  piVar22 = &local_40;
  local_40 = *Global_Frame_Buffer_Pointer;
  if (_size == 8) {
    iVar17 = _ypixels;
    if (_ypixels < 1) {
      piVar23 = (int *)&stack0xfffffff0;
      uVar14 = unaff_r4;
      bitmap = (byte *)unaff_r6;
      iVar17 = unaff_r7;
      _bytesperline = unaff_r8;
    }
    iVar8 = 0;
    if (0 < _ypixels) {
      do {
        iVar15 = piVar23[0x15];
        iVar18 = piVar23[5] + iVar8;
        if ((*(byte *)(*piVar4 + 0x10) & 3) == 0) {
          if (iVar15 == 0) {
            if (0 < (int)uVar14) {
              iVar16 = *piVar23;
              uVar21 = uVar14;
              iVar15 = iStack48;
              puVar20 = (undefined2 *)bitmap;
              do {
                iVar19 = iVar15 * 2;
                uVar21 = uVar21 - 1;
                iVar15 = iVar15 + 1;
                *(ushort *)(iVar16 + iVar18 * 0x640 + iVar19) = (ushort)*(byte *)puVar20;
                puVar20 = (undefined2 *)((int)puVar20 + 1);
              } while (0 < (int)uVar21);
            }
          }
          else {
            if (0 < (int)uVar14) {
              iVar19 = *piVar23;
              uVar21 = uVar14;
              iVar16 = iStack48;
              puVar20 = (undefined2 *)bitmap;
              do {
                iVar1 = iVar16 * 2;
                uVar21 = uVar21 - 1;
                iVar16 = iVar16 + 1;
                *(short *)(iVar19 + iVar18 * 0x640 + iVar1) =
                     (short)*(undefined4 *)(iVar15 + (uint)*(byte *)puVar20 * 4);
                puVar20 = (undefined2 *)((int)puVar20 + 1);
              } while (0 < (int)uVar21);
            }
          }
        }
        else {
          if ((*(byte *)(*piVar4 + 0x10) & 3) == 2) {
            if (iVar15 == 0) {
              if (0 < (int)uVar14) {
                iVar16 = *piVar23;
                uVar21 = uVar14;
                iVar15 = iStack48;
                puVar20 = (undefined2 *)bitmap;
                do {
                  bVar5 = *(byte *)puVar20;
                  uVar21 = uVar21 - 1;
                  puVar20 = (undefined2 *)((int)puVar20 + 1);
                  if (bVar5 != 0) {
                    *(ushort *)(iVar16 + iVar18 * 0x640 + iVar15 * 2) = (ushort)bVar5;
                  }
                  iVar15 = iVar15 + 1;
                } while (0 < (int)uVar21);
              }
            }
            else {
              if (0 < (int)uVar14) {
                iVar19 = *piVar23;
                uVar21 = uVar14;
                iVar16 = iStack48;
                puVar20 = (undefined2 *)bitmap;
                do {
                  if (*(byte *)puVar20 != 0) {
                    *(short *)(iVar19 + iVar18 * 0x640 + iVar16 * 2) =
                         (short)*(undefined4 *)(iVar15 + (uint)*(byte *)puVar20 * 4);
                  }
                  uVar21 = uVar21 - 1;
                  iVar16 = iVar16 + 1;
                  puVar20 = (undefined2 *)((int)puVar20 + 1);
                } while (0 < (int)uVar21);
              }
            }
          }
        }
        iVar8 = iVar8 + 1;
        bitmap = (byte *)((int)bitmap + _bytesperline);
      } while (iVar8 < iVar17);
      return;
    }
    return;
  }
  if (8 < _size) {
    if (_size == 0x10) {
      iVar15 = 0;
      iVar17 = 0;
      iVar8 = _ypixels;
      if (_ypixels < 1) {
        piVar24 = (int *)&stack0xfffffff0;
        uVar14 = unaff_r4;
        iVar17 = unaff_r5;
        bitmap = (byte *)unaff_r6;
        iVar8 = unaff_r7;
        _bytesperline = unaff_r8;
      }
      iVar18 = 0;
      if (0 < _ypixels) {
        iVar16 = *(int *)((int)piVar24 + 0x14);
        do {
          if (0 < (int)uVar14) {
            puVar7 = (undefined2 *)(*piVar3 + (iStack48 + iVar16 * 800 + iVar17) * 2);
            bVar26 = (uVar14 & 1) != 0;
            puVar20 = puVar7 + -1;
            if (bVar26) {
              *puVar7 = *(undefined2 *)((int)bitmap + iVar15);
              puVar20 = puVar7;
            }
            uVar21 = (uint)bVar26;
            uVar14 = (int)uVar14 >> 1;
            while (uVar14 != 0) {
              puVar7 = (undefined2 *)((int)bitmap + uVar21 * 2 + iVar15);
              uVar14 = uVar14 - 1;
              uVar21 = uVar21 + 2;
              puVar20[1] = *puVar7;
              puVar20 = puVar20 + 2;
              *puVar20 = puVar7[1];
            }
          }
          iVar18 = iVar18 + 1;
          iVar15 = iVar15 + _bytesperline;
          iVar17 = iVar17 + 800;
        } while (iVar18 < iVar8);
        return;
      }
      return;
    }
    if (_size != 0x20) {
      return;
    }
    iVar17 = _ypixels;
    if (_ypixels < 1) {
      piVar22 = (int *)&stack0xfffffff0;
      uVar14 = unaff_r4;
      bitmap = (byte *)unaff_r6;
      iVar17 = unaff_r7;
      _bytesperline = unaff_r8;
    }
    iVar8 = 0;
    if (0 < _ypixels) {
      do {
        iVar15 = piVar22[5];
        if (0 < (int)uVar14) {
          iVar16 = *piVar22;
          iVar18 = iStack48;
          uVar21 = uVar14;
          puVar20 = (undefined2 *)bitmap;
          do {
            iVar19 = iVar18 * 2;
            uVar21 = uVar21 - 1;
            iVar18 = iVar18 + 1;
            *(undefined2 *)(iVar16 + (iVar15 + iVar8) * 0x640 + iVar19) = *puVar20;
            puVar20 = puVar20 + 2;
          } while (0 < (int)uVar21);
        }
        iVar8 = iVar8 + 1;
        bitmap = (byte *)((int)bitmap + _bytesperline);
      } while (iVar8 < iVar17);
      return;
    }
    return;
  }
  local_3c = iStack48 + _startpixel;
  if (_size != 1) {
    if (_size == 2) {
      local_38 = 0;
      if (0 < _ypixels) {
        do {
          iVar17 = local_38 + iStack44;
          uVar21 = (uint)*bitmap;
          if ((*(byte *)(*DAT_8002e548 + 0x10) & 3) == 0) {
            if (color == (void *)0x0) {
              iVar8 = local_3c;
              uVar10 = _startpixel;
              pbVar11 = bitmap;
              uVar13 = uVar14;
              do {
                iVar18 = 3 - uVar10;
                iVar15 = iVar8 * 2;
                uVar10 = uVar10 + 1;
                iVar8 = iVar8 + 1;
                *(short *)(local_40 + iVar17 * 0x640 + iVar15) =
                     (short)((0xc0U >> (iVar18 * -2 + 6U & 0xff) & uVar21) >> (iVar18 * 2 & 0xffU));
                if (uVar10 == 4) {
                  pbVar11 = pbVar11 + 1;
                  uVar21 = (uint)*pbVar11;
                  uVar10 = 0;
                }
                uVar13 = uVar13 - 1;
              } while (uVar13 != 0);
            }
            else {
              iVar8 = local_3c;
              uVar10 = _startpixel;
              pbVar11 = bitmap;
              uVar13 = uVar14;
              do {
                iVar18 = 3 - uVar10;
                iVar15 = iVar8 * 2;
                uVar10 = uVar10 + 1;
                iVar8 = iVar8 + 1;
                *(short *)(local_40 + iVar17 * 0x640 + iVar15) =
                     (short)*(undefined4 *)
                             ((int)color +
                             ((0xc0U >> (iVar18 * -2 + 6U & 0xff) & uVar21) >> (iVar18 * 2 & 0xffU))
                             * 4);
                if (uVar10 == 4) {
                  pbVar11 = pbVar11 + 1;
                  uVar21 = (uint)*pbVar11;
                  uVar10 = 0;
                }
                uVar13 = uVar13 - 1;
              } while (uVar13 != 0);
            }
          }
          else {
            if ((*(byte *)(*DAT_8002e548 + 0x10) & 3) == 2) {
              if (color == (void *)0x0) {
                iVar8 = local_3c;
                uVar10 = _startpixel;
                pbVar11 = bitmap;
                uVar13 = uVar14;
                do {
                  puVar20 = (undefined2 *)(0xc0U >> ((3 - uVar10) * -2 + 6 & 0xff) & uVar21);
                  uVar2 = (uint)puVar20 >> ((3 - uVar10) * 2 & 0xff);
                  if (uVar2 != 0) {
                    puVar20 = (undefined2 *)(local_40 + iVar17 * 0x640 + iVar8 * 2);
                  }
                  uVar10 = uVar10 + 1;
                  if (uVar2 != 0) {
                    *puVar20 = (short)uVar2;
                  }
                  iVar8 = iVar8 + 1;
                  if (uVar10 == 4) {
                    pbVar11 = pbVar11 + 1;
                    uVar21 = (uint)*pbVar11;
                    uVar10 = 0;
                  }
                  uVar13 = uVar13 - 1;
                } while (uVar13 != 0);
              }
              else {
                iVar8 = local_3c;
                uVar10 = _startpixel;
                pbVar11 = bitmap;
                uVar13 = uVar14;
                do {
                  uVar2 = (0xc0U >> ((3 - uVar10) * -2 + 6 & 0xff) & uVar21) >>
                          ((3 - uVar10) * 2 & 0xff);
                  if (uVar2 != 0) {
                    *(short *)(local_40 + iVar17 * 0x640 + iVar8 * 2) =
                         (short)*(undefined4 *)((int)color + uVar2 * 4);
                  }
                  uVar10 = uVar10 + 1;
                  iVar8 = iVar8 + 1;
                  if (uVar10 == 4) {
                    pbVar11 = pbVar11 + 1;
                    uVar21 = (uint)*pbVar11;
                    uVar10 = 0;
                  }
                  uVar13 = uVar13 - 1;
                } while (uVar13 != 0);
              }
            }
          }
          bitmap = bitmap + _bytesperline;
          local_38 = local_38 + 1;
        } while (local_38 < _ypixels);
        return;
      }
      return;
    }
    if (_size == 4) {
      local_38 = 0;
      if (0 < _ypixels) {
        do {
          iVar17 = local_38 + iStack44;
          uVar21 = (uint)*bitmap;
          if ((*(byte *)(*DAT_8002e548 + 0x10) & 3) == 0) {
            if (color == (void *)0x0) {
              iVar8 = local_3c;
              uVar10 = _startpixel;
              pbVar11 = bitmap;
              uVar13 = uVar14;
              do {
                iVar18 = 1 - uVar10;
                iVar15 = iVar8 * 2;
                uVar10 = uVar10 + 1;
                iVar8 = iVar8 + 1;
                *(short *)(local_40 + iVar17 * 0x640 + iVar15) =
                     (short)((0xf0U >> (iVar18 * -4 + 4U & 0xff) & uVar21) >> (iVar18 * 4 & 0xffU));
                if (uVar10 == 2) {
                  pbVar11 = pbVar11 + 1;
                  uVar21 = (uint)*pbVar11;
                  uVar10 = 0;
                }
                uVar13 = uVar13 - 1;
              } while (uVar13 != 0);
            }
            else {
              iVar8 = local_3c;
              uVar10 = _startpixel;
              pbVar11 = bitmap;
              uVar13 = uVar14;
              do {
                iVar18 = 1 - uVar10;
                iVar15 = iVar8 * 2;
                uVar10 = uVar10 + 1;
                iVar8 = iVar8 + 1;
                *(short *)(local_40 + iVar17 * 0x640 + iVar15) =
                     (short)*(undefined4 *)
                             ((int)color +
                             ((0xf0U >> (iVar18 * -4 + 4U & 0xff) & uVar21) >> (iVar18 * 4 & 0xffU))
                             * 4);
                if (uVar10 == 2) {
                  pbVar11 = pbVar11 + 1;
                  uVar21 = (uint)*pbVar11;
                  uVar10 = 0;
                }
                uVar13 = uVar13 - 1;
              } while (uVar13 != 0);
            }
          }
          else {
            if ((*(byte *)(*DAT_8002e548 + 0x10) & 3) == 2) {
              if (color == (void *)0x0) {
                iVar8 = local_3c;
                uVar10 = _startpixel;
                pbVar11 = bitmap;
                uVar13 = uVar14;
                do {
                  puVar20 = (undefined2 *)(0xf0U >> ((1 - uVar10) * -4 + 4 & 0xff) & uVar21);
                  uVar2 = (uint)puVar20 >> ((1 - uVar10) * 4 & 0xff);
                  if (uVar2 != 0) {
                    puVar20 = (undefined2 *)(local_40 + iVar17 * 0x640 + iVar8 * 2);
                  }
                  uVar10 = uVar10 + 1;
                  if (uVar2 != 0) {
                    *puVar20 = (short)uVar2;
                  }
                  iVar8 = iVar8 + 1;
                  if (uVar10 == 2) {
                    pbVar11 = pbVar11 + 1;
                    uVar21 = (uint)*pbVar11;
                    uVar10 = 0;
                  }
                  uVar13 = uVar13 - 1;
                } while (uVar13 != 0);
              }
              else {
                iVar8 = local_3c;
                uVar10 = _startpixel;
                pbVar11 = bitmap;
                uVar13 = uVar14;
                do {
                  uVar2 = (0xf0U >> ((1 - uVar10) * -4 + 4 & 0xff) & uVar21) >>
                          ((1 - uVar10) * 4 & 0xff);
                  if (uVar2 != 0) {
                    *(short *)(local_40 + iVar17 * 0x640 + iVar8 * 2) =
                         (short)*(undefined4 *)((int)color + uVar2 * 4);
                  }
                  uVar10 = uVar10 + 1;
                  iVar8 = iVar8 + 1;
                  if (uVar10 == 2) {
                    pbVar11 = pbVar11 + 1;
                    uVar21 = (uint)*pbVar11;
                    uVar10 = 0;
                  }
                  uVar13 = uVar13 - 1;
                } while (uVar13 != 0);
              }
            }
          }
          bitmap = bitmap + _bytesperline;
          local_38 = local_38 + 1;
        } while (local_38 < _ypixels);
        return;
      }
      return;
    }
    return;
  }
  local_40 = 0;
  if (_ypixels < 1) {
    return;
  }
  do {
    iVar17 = local_3c;
    local_38 = local_40 + iStack44;
    uVar12 = (undefined2)*(undefined4 *)((int)color + 4);
                    // WARNING: Load size is inaccurate
    uVar25 = *color;
    bVar5 = *(byte *)(*DAT_8002e548 + 0x10) & 3;
    if ((*(byte *)(*DAT_8002e548 + 0x10) & 3) == 0) {
      iVar8 = *Global_Frame_Buffer_Pointer;
      uVar21 = _startpixel;
      pbVar11 = bitmap;
      uVar10 = uVar14;
      do {
        uVar9 = uVar12;
        if (((uint)*pbVar11 & 0x80U >> (uVar21 & 0xff)) == 0) {
          uVar9 = (short)uVar25;
        }
        uVar21 = uVar21 + 1;
        iVar15 = iVar17 * 2;
        if (uVar21 == 8) {
          uVar21 = 0;
          pbVar11 = pbVar11 + 1;
        }
        uVar10 = uVar10 - 1;
        iVar17 = iVar17 + 1;
        *(undefined2 *)(iVar8 + local_38 * 0x640 + iVar15) = uVar9;
      } while (uVar10 != 0);
    }
    else {
      if (bVar5 == 1) {
LAB_8002df4c:
        uVar6 = (**(code **)(*(int *)((int)pvStack52 + 0x10) + 8))();
        iVar8 = *Global_Frame_Buffer_Pointer;
        uVar21 = _startpixel;
        pbVar11 = bitmap;
        uVar10 = uVar14;
        do {
          if (((uint)*pbVar11 & 0x80U >> (uVar21 & 0xff)) != 0) {
            *(ushort *)(iVar8 + local_38 * 0x640 + iVar17 * 2) =
                 *(ushort *)(iVar8 + (iVar17 + local_38 * 800) * 2) ^ uVar6;
          }
          uVar21 = uVar21 + 1;
          if (uVar21 == 8) {
            uVar21 = 0;
            pbVar11 = pbVar11 + 1;
          }
          uVar10 = uVar10 - 1;
          iVar17 = iVar17 + 1;
        } while (uVar10 != 0);
      }
      else {
        if (bVar5 == 2) {
          puVar7 = (undefined2 *)*Global_Frame_Buffer_Pointer;
          puVar20 = puVar7;
          uVar21 = _startpixel;
          pbVar11 = bitmap;
          uVar10 = uVar14;
          do {
            bVar26 = ((uint)*pbVar11 & 0x80U >> (uVar21 & 0xff)) != 0;
            if (bVar26) {
              puVar20 = puVar7 + local_38 * 800 + iVar17;
            }
            uVar21 = uVar21 + 1;
            if (bVar26) {
              *puVar20 = uVar12;
            }
            if (uVar21 == 8) {
              uVar21 = 0;
              pbVar11 = pbVar11 + 1;
            }
            uVar10 = uVar10 - 1;
            iVar17 = iVar17 + 1;
          } while (uVar10 != 0);
        }
        else {
          if (bVar5 == 3) goto LAB_8002df4c;
        }
      }
    }
    bitmap = bitmap + _bytesperline;
    local_40 = local_40 + 1;
    if (_ypixels <= local_40) {
      return;
    }
  } while( true );
}



void FUN_8002ea58(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  
  if (*(char *)(*DAT_8002ea70 + 0x19) != '\0') {
    return;
  }
  uVar4 = (uint)*(byte *)(*DAT_8001724c + 0x18);
  if (uVar4 != 1) {
    iVar5 = (int)(uVar4 - 1) / 2;
    iVar2 = divide_2(iVar5 * DAT_8001737c,1000);
    iVar3 = iVar5 * iVar5;
    iVar1 = iVar5 / 2;
    (***(code ***)(*DAT_80017380 + 100))(param_1 - iVar5,param_2,param_1 + iVar5);
    iVar6 = 1;
    while (iVar6 <= iVar2 + 1) {
      if (iVar3 + iVar1 < iVar5 * iVar5 + iVar6 * iVar6) {
        if (iVar2 + 1 < iVar5) {
          (***(code ***)(*DAT_80017380 + 100))
                    ((param_1 - iVar6) + 1,param_2 + iVar5,param_1 + iVar6 + -1);
          (***(code ***)(*DAT_80017380 + 100))
                    ((param_1 - iVar6) + 1,param_2 - iVar5,param_1 + iVar6 + -1);
        }
        iVar5 = iVar5 + -1;
      }
      (***(code ***)(*DAT_80017380 + 100))(param_1 - iVar5,param_2 + iVar6,param_1 + iVar5);
      (***(code ***)(*DAT_80017380 + 100))(param_1 - iVar5,param_2 - iVar6,param_1 + iVar5);
      iVar6 = iVar6 + 1;
    }
    return;
  }
                    // WARNING: Could not recover jumptable at 0x80017248. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*(int *)(*DAT_8001724c + 100) + 4))();
  return;
}



void FUN_8002ea74(int param_1,int param_2,int param_3,int param_4,int param_5)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int local_54;
  
  iVar1 = (param_4 - param_2) + 1;
  if ((iVar1 + param_5 * -2 < 0 == SBORROW4(iVar1,param_5 * 2)) &&
     (iVar1 = (param_3 - param_1) + 1, iVar1 + param_5 * -2 < 0 == SBORROW4(iVar1,param_5 * 2))) {
    iVar9 = param_1 + param_5;
    local_54 = -1;
    iVar7 = param_2 + param_5;
    iVar8 = param_3 - param_5;
    iVar1 = param_2;
    iVar6 = param_5;
    while (iVar1 <= iVar7) {
      iVar2 = FUN_8001a320(param_5 * param_5 - iVar6 * iVar6);
      iVar3 = iVar9 - iVar2;
      iVar4 = iVar8 + iVar2;
      iVar5 = param_4 - (iVar1 - param_2);
      local_54 = iVar2 - local_54;
      if (local_54 < 2) {
        FUN_8001cba8(iVar3,iVar1);
        FUN_8001cba8(iVar4,iVar1);
        FUN_8001cba8(iVar3,iVar5);
        FUN_8001cba8(iVar4,iVar5);
      }
      else {
        FUN_8001cb24(iVar3,iVar1,iVar3 + local_54 + -1);
        FUN_8001cb24((iVar4 - local_54) + 1,iVar1,iVar4);
        FUN_8001cb24(iVar3,iVar5,iVar3 + local_54 + -1);
        FUN_8001cb24((iVar4 - local_54) + 1,iVar5,iVar4);
      }
      iVar1 = iVar1 + 1;
      iVar6 = iVar6 + -1;
      local_54 = iVar2;
    }
    FUN_8001cb24(iVar9 + 1,param_2,iVar8 + -1);
    FUN_8001cb24(iVar9 + 1,param_4,iVar8 + -1);
    FUN_8001cc4c(param_1,iVar7 + 1,(param_4 - param_5) + -1);
    FUN_8001cc4c(param_3,iVar7 + 1,(param_4 - param_5) + -1);
  }
  return;
}



undefined4 FUN_8002ee34(undefined *param_1,undefined param_2)

{
  *param_1 = param_2;
  return 1;
}



undefined4 FUN_8002ee40(void)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  
  iVar1 = DAT_8002ef24;
  if (*(int *)(DAT_8002ef24 + 0x2c) == 0) {
    iVar5 = divide(*(int *)(DAT_8002ef28 + 4),*(int *)(DAT_8002ef28 + 8) + 8);
    iVar5 = iVar5 + 2;
  }
  else {
    iVar5 = *(uint *)(DAT_8002ef24 + 0x10) + (*(uint *)(DAT_8002ef24 + 0x10) >> 3) + 4;
  }
  iVar2 = FUN_8002cf28(iVar5 << 3);
  if (iVar2 == 0) {
    uVar3 = 1;
  }
  else {
    iVar6 = *(int *)(iVar1 + 0x2c);
    iVar7 = *(int *)(*(int *)(iVar1 + 0x34) + iVar2 * 8 + 4) + 8;
    FUN_80000804(iVar7,*(int *)(iVar1 + 0x34),*(int *)(iVar1 + 0x10) << 3);
    *(int *)(iVar1 + 0x2c) = iVar2;
    *(int *)(iVar1 + 0x34) = iVar7;
    uVar4 = *(uint *)(iVar1 + 0x10);
    while (uVar4 < iVar5 - 1U) {
      *(uint *)(*(int *)(iVar1 + 0x34) + uVar4 * 8 + 4) = uVar4 + 1;
      uVar4 = uVar4 + 1;
    }
    *(undefined4 *)(*(int *)(iVar1 + 0x34) + uVar4 * 8 + 4) = 0;
    *(int *)(iVar1 + 0x24) = *(int *)(iVar1 + 0x10);
    iVar2 = (iVar5 - *(int *)(iVar1 + 0x10)) + *(int *)(iVar1 + 4);
    *(int *)(iVar1 + 4) = iVar2;
    if (iVar6 != 0) {
      iVar2 = iVar6;
    }
    *(int *)(iVar1 + 0x10) = iVar5;
    if (iVar6 != 0) {
      FUN_800183e8(iVar2);
    }
    uVar3 = 0;
  }
  return uVar3;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_8002ef2c(int param_1,uint param_2,uint param_3,int param_4,int param_5)

{
  uint uVar1;
  ushort uVar2;
  uint uVar3;
  int *piVar4;
  ushort uVar5;
  
  piVar4 = Global_Frame_Buffer_Pointer;
  uVar1 = param_2 & 0xffff;
  if ((*(byte *)(*DAT_8002f038 + 0x10) & 1) == 0) {
    FUN_8001cddc(uVar1,param_3 & 0xffff,(param_4 - param_2) + 1 & 0xffff,
                 (param_5 - param_3) + 1 & 0xffff);
    return;
  }
  uVar3 = uVar1;
  if (param_5 < (int)param_3) {
    return;
  }
  do {
    while ((int)uVar3 <= param_4) {
      uVar2 = *(ushort *)(*piVar4 + (uVar3 + param_3 * 800) * 2);
      uVar5 = (**(code **)(*(int *)(param_1 + 0x10) + 8))();
      *(ushort *)(*piVar4 + param_3 * 0x640 + uVar3 * 2) = uVar5 ^ uVar2;
      uVar3 = uVar3 + 1 & 0xfffeffff;
    }
    param_3 = param_3 + 1;
    uVar3 = uVar1;
  } while ((int)param_3 <= param_5);
  return;
}



void FUN_8002f040(int param_1,int param_2,int param_3,int param_4,int param_5)

{
  int *piVar1;
  ushort uVar2;
  ushort *puVar3;
  ushort *puVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int local_44;
  undefined4 local_40;
  uint local_3c;
  int local_34;
  int iStack48;
  int iStack44;
  int iStack40;
  
  piVar1 = DAT_8002f164;
  local_3c = **(uint **)(*DAT_8002f164 + 0x3c);
  local_34 = param_1;
  iStack48 = param_2;
  iStack44 = param_3;
  iStack40 = param_4;
  local_44 = FUN_8001857c(*(undefined4 *)(*DAT_8002f164 + 0x60));
  puVar3 = (ushort *)FUN_800311e0(param_2,param_3);
  iVar7 = *(int *)(local_44 + 0xc);
  iVar6 = (param_4 - param_2) + 1;
  if (*(int *)(local_44 + 0x14) != 0) {
    local_40 = FUN_8001857c();
    FUN_800199d4(local_40,param_2,param_3,iVar6,(param_5 - param_3) + 1);
    FUN_800185cc(&local_40);
  }
  while (param_3 <= param_5) {
    if ((*(byte *)(*piVar1 + 0x10) & 1) == 0) {
      FUN_8001a2c4(puVar3,local_3c & 0xffff,iVar6);
    }
    else {
      uVar2 = (**(code **)(*(int *)(local_34 + 0x10) + 8))();
      puVar4 = puVar3;
      iVar5 = iVar6;
      do {
        iVar5 = iVar5 + -1;
        *puVar4 = *puVar4 ^ uVar2;
        puVar4 = puVar4 + 1;
      } while (iVar5 != 0);
    }
    puVar3 = (ushort *)((int)puVar3 + iVar7);
    param_3 = param_3 + 1;
  }
  FUN_800185cc(&local_44);
  return;
}



// WARNING: Could not reconcile some variable overlaps

undefined8 FUN_8002f168(void)

{
  short *psVar1;
  int *piVar2;
  short sVar3;
  int iVar4;
  int iVar5;
  undefined4 uVar6;
  int in_r3;
  undefined4 local_20;
  uint local_1c;
  int local_18;
  
  psVar1 = DAT_8002f358;
  local_1c = *(uint *)(DAT_8002f358 + 6);
  local_18 = in_r3;
  if (*(int *)(DAT_8002f358 + 8) == 0) {
    local_20._0_2_ = *DAT_8002f358;
    sVar3 = DAT_8002f358[1];
    goto LAB_8002f1cc;
  }
  iVar4 = ((ushort)DAT_8002f358[6] + 1) * 0x10000;
  local_20 = CONCAT22(DAT_8002f358[5],(short)((uint)iVar4 >> 0x10));
  if (iVar4 >> 0x10 <= (int)DAT_8002f358[2]) goto LAB_8002f1d0;
  do {
    local_20._0_2_ = *psVar1;
    sVar3 = psVar1[7] + 1;
LAB_8002f1cc:
    local_20 = CONCAT22(sVar3,(short)local_20);
LAB_8002f1d0:
    piVar2 = DAT_8002f35c;
    if (psVar1[3] < local_20._2_2_) goto LAB_8002f338;
    local_18 = FUN_8001857c(*(undefined4 *)(*DAT_8002f35c + 0x48));
    if ((short)local_20 == *psVar1) {
      local_1c = *(uint *)(psVar1 + 2);
      iVar4 = *(int *)(*piVar2 + 0x48);
      while (iVar4 != 0) {
        iVar4 = FUN_8001861c();
        FUN_8002f4f8(*(undefined4 *)(iVar4 + 0x20),&local_20,0);
        iVar4 = *(int *)(iVar4 + 0x18);
      }
      FUN_8002f4f8(*(undefined4 *)(local_18 + 0x1c),&local_20,0);
    }
LAB_8002f258:
    do {
      local_1c = local_1c & 0xffff0000 | local_20 & 0xffff;
      iVar4 = *(int *)(*piVar2 + 0x48);
      while (iVar4 != 0) {
        iVar4 = FUN_8001861c();
        iVar5 = FUN_8002f364(*(undefined4 *)(iVar4 + 0x20),&local_20,0);
        if (iVar5 != 0) goto LAB_8002f258;
        iVar4 = *(int *)(iVar4 + 0x18);
      }
      iVar4 = FUN_8002f364(*(undefined4 *)(local_18 + 0x1c),&local_20,0);
    } while (iVar4 != 0);
    local_1c = local_1c & 0xffff0000 | (uint)(ushort)psVar1[2];
    if ((short)local_20 <= psVar1[2]) {
      iVar4 = *(int *)(*piVar2 + 0x48);
      while (iVar4 != 0) {
        iVar4 = FUN_8001861c();
        FUN_8002f438(*(undefined4 *)(iVar4 + 0x20),&local_20,0);
        iVar4 = *(int *)(iVar4 + 0x18);
      }
      FUN_8002f438(*(undefined4 *)(local_18 + 0x1c),&local_20,0);
      FUN_800185cc(&local_18);
      if (DAT_8002f360 < *(int *)(psVar1 + 8)) {
LAB_8002f338:
        uVar6 = 0;
      }
      else {
        *(uint *)(psVar1 + 4) = local_20;
        *(uint *)(psVar1 + 6) = local_1c;
        uVar6 = 1;
      }
      return CONCAT44(local_20,uVar6);
    }
    *(uint *)(psVar1 + 4) = local_20;
    *(uint *)(psVar1 + 6) = local_1c;
    FUN_800185cc(&local_18);
  } while( true );
}



undefined8 FUN_8002f364(int param_1,int *param_2,int param_3,int param_4)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  uint uVar4;
  int *local_20;
  int iStack28;
  int local_18;
  
  uVar3 = 0;
  local_20 = param_2;
  iStack28 = param_3;
  local_18 = param_4;
  while (param_1 != 0) {
    local_20 = (int *)FUN_8001857c(param_1);
    uVar4 = local_20[10];
    if ((uVar4 & 2) != 0) {
      if (param_3 == 0) {
        iStack28 = *local_20;
        local_18 = local_20[1];
      }
      else {
        FUN_80019f98(&iStack28);
      }
      iVar1 = FUN_8001962c(param_2,&iStack28);
      if (iVar1 != 0) {
        if ((uVar4 & 1) == 0) {
          uVar3 = 1;
          *(short *)param_2 = (short)local_18 + 1;
        }
        else {
          iVar1 = local_20[7];
          while (iVar1 != 0) {
            iVar2 = FUN_8002f364(iVar1,param_2,&iStack28);
            if (iVar2 != 0) {
              uVar3 = 1;
            }
            iVar1 = FUN_8001861c(iVar1);
            iVar1 = *(int *)(iVar1 + 0x20);
          }
        }
      }
    }
    param_1 = local_20[8];
    FUN_800185cc(&local_20);
  }
  return CONCAT44(local_20,uVar3);
}



void FUN_8002f438(int param_1,int *param_2,int param_3,int param_4)

{
  int iVar1;
  uint uVar2;
  int *local_20;
  int local_1c;
  int iStack24;
  
  local_20 = param_2;
  local_1c = param_3;
  iStack24 = param_4;
  while (param_1 != 0) {
    local_20 = (int *)FUN_8001857c(param_1);
    uVar2 = local_20[10];
    if ((uVar2 & 2) != 0) {
      if (param_3 == 0) {
        local_1c = *local_20;
        iStack24 = local_20[1];
      }
      else {
        FUN_80019f98(&local_1c);
      }
      iVar1 = FUN_8001962c(param_2,&local_1c);
      if (iVar1 != 0) {
        if ((uVar2 & 1) == 0) {
          *(short *)(param_2 + 1) = (short)local_1c + -1;
        }
        else {
          iVar1 = local_20[7];
          while (iVar1 != 0) {
            FUN_8002f438(iVar1,param_2,&local_1c);
            iVar1 = FUN_8001861c(iVar1);
            iVar1 = *(int *)(iVar1 + 0x20);
          }
        }
      }
    }
    param_1 = local_20[8];
    FUN_800185cc(&local_20);
  }
  return;
}



// WARNING: Could not reconcile some variable overlaps

void FUN_8002f4f8(int param_1,int *param_2,int param_3,int param_4)

{
  short sVar1;
  int iVar2;
  uint uVar3;
  int *local_20;
  undefined4 uStack28;
  undefined4 uStack24;
  
  local_20 = param_2;
  uStack28 = param_3;
  uStack24 = param_4;
  while (param_1 != 0) {
    local_20 = (int *)FUN_8001857c(param_1);
    uVar3 = local_20[10];
    if ((uVar3 & 2) != 0) {
      if (param_3 == 0) {
        uStack28 = *local_20;
        uStack24 = local_20[1];
      }
      else {
        FUN_80019f98(&uStack28);
      }
      iVar2 = FUN_8001962c(param_2,&uStack28);
      if (iVar2 != 0) {
        if ((uVar3 & 1) == 0) {
          if (param_3 == 0) {
            sVar1 = *(short *)((int)local_20 + 2);
          }
          else {
            sVar1 = *(short *)(param_3 + 2);
            if (*(short *)(param_3 + 2) < *(short *)((int)local_20 + 2)) {
              sVar1 = *(short *)((int)local_20 + 2);
            }
          }
          if (*(short *)((int)param_2 + 2) < sVar1) {
          }
          else {
            uStack28._2_2_ = uStack24._2_2_;
          }
          iVar2 = (int)uStack28._2_2_;
          if (*(short *)((int)param_2 + 2) < sVar1) {
            iVar2 = iVar2 + -1;
          }
          if (iVar2 < *(short *)((int)param_2 + 6)) {
            *(short *)((int)param_2 + 6) = (short)iVar2;
          }
        }
        else {
          iVar2 = local_20[7];
          while (iVar2 != 0) {
            FUN_8002f4f8(iVar2,param_2,&uStack28);
            iVar2 = FUN_8001861c(iVar2);
            iVar2 = *(int *)(iVar2 + 0x20);
          }
        }
      }
    }
    param_1 = local_20[8];
    FUN_800185cc(&local_20);
  }
  return;
}



char get_character(char *string)

{
  return *string;
}



int get_sizeof_char(void)

{
  return 1;
}



undefined * FUN_8002f5fc(undefined4 param_1,int param_2)

{
  undefined *puVar1;
  
  puVar1 = PTR_DAT_8002f60c;
  if (param_2 != 1) {
    puVar1 = (undefined *)0x0;
  }
  return puVar1;
}



undefined * FUN_8002f610(undefined4 param_1,int param_2)

{
  undefined *puVar1;
  
  puVar1 = PTR_DAT_8002f620;
  if (param_2 != 1) {
    puVar1 = (undefined *)0x0;
  }
  return puVar1;
}



undefined * FUN_8002f624(undefined4 param_1,undefined4 param_2)

{
  switch(param_2) {
  case 9:
    return PTR_FUN_8002f694;
  case 10:
    return PTR_FUN_8002f698;
  case 0xb:
    return PTR_LAB_8002f69c;
  case 0xc:
    return PTR_FUN_8002f6a0;
  default:
    return (undefined *)0x0;
  case 0xe:
    return PTR_LAB_8002f6a4;
  case 0xf:
    return PTR_LAB_8002f6a8;
  case 0x10:
    return PTR_FUN_8002f6ac;
  }
}



int FUN_8002f7b0(void)

{
  uint uVar1;
  int iVar2;
  
  uVar1 = FUN_8001ce80();
  if (uVar1 == 0x100) {
    iVar2 = 8;
  }
  else {
    if (uVar1 < 0x80) {
      if (uVar1 < 0x40) {
        if (uVar1 < 0x20) {
          if (uVar1 < 0x10) {
            if (uVar1 < 8) {
              if (uVar1 < 4) {
                if (uVar1 < 2) {
                  iVar2 = 0;
                }
                else {
                  iVar2 = 1;
                }
              }
              else {
                iVar2 = 2;
              }
            }
            else {
              iVar2 = 3;
            }
          }
          else {
            iVar2 = 4;
          }
        }
        else {
          iVar2 = 5;
        }
      }
      else {
        iVar2 = 6;
      }
    }
    else {
      iVar2 = 7;
    }
  }
  return (1 << iVar2) + -1;
}



void FUN_8002f838(uint param_1)

{
  int iVar1;
  
  iVar1 = 0xf;
  do {
    if (*(uint *)(DAT_8002f860 + iVar1 * 8 + 0x40) <= param_1) {
      return;
    }
    iVar1 = iVar1 + -1;
  } while (-1 < iVar1);
  return;
}



void FUN_8002f8d0(int param_1,undefined2 *param_2,undefined4 param_3,int param_4)

{
  int local_10;
  
  local_10 = param_4;
  local_10 = FUN_8001857c(*(undefined4 *)(param_1 + 8));
  *param_2 = *(undefined2 *)(local_10 + 4);
  param_2[1] = *(undefined2 *)(local_10 + 6);
  param_2[2] = *(short *)(local_10 + 4) + *(short *)(local_10 + 8) + -1;
  param_2[3] = *(short *)(local_10 + 10) + *(short *)(local_10 + 6) + -1;
  FUN_800185cc(&local_10);
  return;
}



int FUN_8002f92c(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  
  iVar1 = DAT_8002f980;
  iVar5 = 0;
  while( true ) {
    if (*(int *)(iVar1 + 8) <= iVar5) {
      return 0;
    }
    iVar2 = FUN_80019ab8();
    iVar4 = *(int *)(iVar1 + 0x10);
    iVar3 = *(int *)(iVar4 + iVar5 * 0x78);
    if (iVar3 == iVar2) break;
    if (iVar3 == 0) {
      *(int *)(iVar4 + iVar5 * 0x78) = iVar2;
      return iVar5;
    }
    iVar5 = iVar5 + 1;
  }
  return iVar5;
}



undefined4 FUN_8002f984(undefined2 param_1)

{
  *(undefined2 *)(*DAT_8002f998 + 0x22) = param_1;
  return 0;
}



undefined4 FUN_8002f99c(undefined2 param_1)

{
  *(undefined2 *)(*DAT_8002f9b0 + 0x24) = param_1;
  return 0;
}



int FUN_8002fa10(uint param_1)

{
  uint uVar1;
  int iVar2;
  
  uVar1 = FUN_8001ce80();
  iVar2 = FUN_8001ced4();
  if (param_1 < uVar1) {
    if (iVar2 != 0) {
      iVar2 = *(int *)(iVar2 + param_1 * 4);
    }
  }
  else {
    iVar2 = 0;
  }
  return iVar2;
}



uint FUN_8002fa40(int param_1)

{
  int iVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  
  sys_init_display();
  if (*(int *)(param_1 + 8) == 0) {
    iVar1 = FUN_80018464(0x1c);
    *(int *)(param_1 + 8) = iVar1;
    (**(code **)(*(int *)(param_1 + 0x10) + 8))();
    uVar2 = FUN_8001d9e0();
    *(undefined4 *)(iVar1 + 0x18) = uVar2;
    if (*(int *)(param_1 + 8) == 0) {
      uVar4 = 1;
      goto LAB_8002fa90;
    }
  }
  uVar4 = 0;
LAB_8002fa90:
  uVar3 = FUN_8001d714(*(undefined4 *)(param_1 + 0x18),1,0);
  return uVar3 | uVar4;
}



void FUN_8002faa8(int param_1)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  
  iVar1 = DAT_8002fb50;
  iVar2 = *(int *)(DAT_8002fb50 + 0xc);
  *(int *)(iVar2 + 0x38) = iVar2;
  *(int *)(iVar2 + 0x3c) = iVar2 + 4;
  *(int *)(iVar2 + 0x40) = iVar2;
  *(int *)(param_1 + 0x14) = iVar2 + 8;
  iVar2 = *(int *)(iVar1 + 0x24 + (uint)*(byte *)(iVar2 + 0x11) * 4);
  (**(code **)(*(int *)(iVar2 + 0xc) + 0x30))(iVar2,param_1 + 8);
  *(undefined **)(param_1 + 100) = PTR_PTR_FUN_8002fb54;
  *(undefined4 *)(param_1 + 0x1c) = *(undefined4 *)(iVar1 + 8);
  *(int *)(param_1 + 0x14) = *(int *)(iVar1 + 0xc) + 8;
  *(undefined *)(param_1 + 0x18) = 1;
  uVar3 = FUN_8002a5e4();
  *(undefined4 *)(param_1 + 0x48) = uVar3;
  *(undefined *)(param_1 + 0x68) = 3;
  *(undefined4 *)(param_1 + 0x30) = 0xfffffff;
  *(undefined4 *)(param_1 + 0x34) = 0xfffffff;
  set_fg2_color(0);
  set_fg_color(0xffffff);
  *(undefined **)(iVar1 + 0x10) = PTR_FONT_FUNCTIONS_1_8002fb58;
  return;
}



void FUN_8002fb5c(void)

{
  uint uVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  uint uVar5;
  int *piVar6;
  
  iVar2 = DAT_8002fc58;
  if (*(char *)(DAT_8002fc58 + 0x28) == '\0') {
    piVar6 = (int *)(DAT_8002fc58 + 0xc0);
    *(undefined *)(DAT_8002fc58 + 0x28) = 1;
    uVar5 = *(uint *)(iVar2 + 0xc4);
    if (0x2800 < uVar5) {
      uVar5 = 0x2800;
    }
    FUN_80030564(*piVar6,uVar5);
    puVar3 = DAT_8002fc60;
    if (*(int *)(iVar2 + 200) == 0) {
      *(uint *)(iVar2 + 200) = *(uint *)(iVar2 + 0xc4) >> 2;
    }
    *puVar3 = PTR_LAB_8002fc5c;
    FUN_8001a19c(puVar3);
    *(undefined4 *)(iVar2 + 0x20) = 0x5a;
    uVar5 = 0;
    do {
      uVar1 = uVar5 & 0xff;
      iVar4 = uVar5 * 8;
      uVar5 = uVar5 + 1;
      *(int *)(iVar2 + iVar4 + 0x40) = 0x10 << uVar1;
    } while (uVar5 < 0x10);
    iVar4 = *piVar6;
    *(int *)(iVar2 + 0x38) = iVar4;
    *(int *)(iVar2 + 0xc) = *(int *)(iVar2 + 0xc4);
    *(undefined4 *)(iVar2 + 0x10) = 2;
    *(int *)(iVar2 + 0x34) = iVar4 + *(int *)(iVar2 + 0xc4) + -0x14;
    uVar5 = 0;
    while (uVar5 < *(int *)(iVar2 + 0x10) - 1U) {
      *(uint *)(*(int *)(iVar2 + 0x34) + uVar5 * 8 + 4) = uVar5 + 1;
      uVar5 = uVar5 + 1;
    }
    *(undefined4 *)(iVar2 + 0x24) = 1;
    *(int *)(iVar2 + 4) = *(int *)(iVar2 + 0x10) + -1;
    FUN_8002ce34(*(undefined4 *)(iVar2 + 0xc),*(undefined4 *)(iVar2 + 0x38));
    FUN_8002ee40();
    *(undefined4 *)(iVar2 + 0x30) = 1;
  }
  return;
}



void FUN_8002fc64(undefined4 param_1,int param_2,uint param_3,undefined4 param_4)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  bool bVar4;
  int local_20;
  uint uStack28;
  undefined4 uStack24;
  
  local_20 = param_2;
  uStack28 = param_3;
  uStack24 = param_4;
  local_20 = FUN_8001861c();
  uVar3 = *(uint *)(local_20 + 0x28);
  if ((uVar3 & 2) != 0) {
    uVar1 = FUN_8002b024(param_2);
    bVar4 = uVar1 != 0;
    if (bVar4) {
      uVar1 = DAT_8002fd30 & uVar3;
    }
    if (bVar4 && uVar1 != 1) {
      local_20 = FUN_8001857c(param_1);
      FUN_80019f98(&uStack28,param_2,local_20);
      iVar2 = FUN_8002b024(&uStack28);
      if (iVar2 != 0) {
        if ((*(uint *)(local_20 + 0x28) & DAT_8002fd34) == 0) {
          *(uint *)(local_20 + 8) = uStack28;
          *(undefined4 *)(local_20 + 0xc) = uStack24;
          *(uint *)(local_20 + 0x28) = *(uint *)(local_20 + 0x28) | param_3;
          *(short *)(DAT_8002fd38 + 4) = *(short *)(DAT_8002fd38 + 4) + 1;
          FUN_800197f8();
        }
        else {
          FUN_8001957c(local_20 + 8,local_20 + 8,&uStack28);
        }
      }
      FUN_800185cc(&local_20);
    }
  }
  return;
}



int FUN_8002fd3c(int param_1,int param_2,int param_3,int param_4,int param_5)

{
  int iVar1;
  
  iVar1 = divide_2((param_5 - param_4) * (param_1 - param_2),param_3 - param_2);
  return iVar1 + param_4;
}



void empty_func_5(void)

{
  return;
}



void FUN_8002fdd4(void)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  uint uVar3;
  uint uVar4;
  bool bVar5;
  
  *(undefined4 *)(DAT_8002fe08 + 0x18) = 0;
  FUN_8001a258(DAT_8002fe0c,0,0x70);
  uVar3 = 8;
  puVar2 = DAT_8002fe10;
  while( true ) {
    bVar5 = uVar3 == 0;
    if (!bVar5) {
      bVar5 = ((uint)puVar2 & 3) == 0;
    }
    if (bVar5) break;
    uVar3 = uVar3 - 1;
    *(undefined *)puVar2 = 0;
    puVar2 = (undefined4 *)((int)puVar2 + 1);
  }
  uVar4 = uVar3 >> 2;
  if (uVar4 != 0) {
    uVar3 = uVar3 & 3;
    while (3 < (int)uVar4) {
      *puVar2 = 0;
      puVar2[1] = 0;
      puVar1 = puVar2 + 3;
      puVar2[2] = 0;
      uVar4 = uVar4 - 4;
      puVar2 = puVar2 + 4;
      *puVar1 = 0;
    }
    while (uVar4 != 0) {
      uVar4 = uVar4 - 1;
      *puVar2 = 0;
      puVar2 = puVar2 + 1;
    }
  }
  while (uVar3 != 0) {
    uVar3 = uVar3 - 1;
    *(undefined *)puVar2 = 0;
    puVar2 = (undefined4 *)((int)puVar2 + 1);
  }
  return;
}



void FUN_8002fe14(void)

{
  int iVar1;
  
  iVar1 = DAT_8002fe34;
  FUN_8001843c(*(undefined4 *)(DAT_8002fe34 + 0x10));
  *(undefined4 *)(iVar1 + 0x10) = 0;
  return;
}



void FUN_8002fe38(void)

{
  int iVar1;
  
  iVar1 = DAT_8002fe58;
  FUN_8001843c(*(undefined4 *)(DAT_8002fe58 + 4));
  *(undefined4 *)(iVar1 + 4) = 0;
  return;
}



int FUN_8002fea8(void)

{
  int iVar1;
  int iVar2;
  bool bVar3;
  
  iVar1 = DAT_8002ff14;
  if (*(uint *)(DAT_8002ff14 + 4) <= *(uint *)(DAT_8002ff14 + 0x30)) {
    *(uint *)(DAT_8002ff14 + 0x30) = *(uint *)(DAT_8002ff14 + 0x30) - 1;
    iVar2 = FUN_8002ee40();
    bVar3 = iVar2 != 0;
    if (bVar3) {
      iVar2 = 0;
    }
    *(int *)(iVar1 + 0x30) = *(int *)(iVar1 + 0x30) + 1;
    if (bVar3) {
      return iVar2;
    }
  }
  *(int *)(iVar1 + 4) = *(int *)(iVar1 + 4) + -1;
  iVar2 = *(int *)(iVar1 + 0x24);
  *(undefined4 *)(iVar1 + 0x24) = *(undefined4 *)(*(int *)(iVar1 + 0x34) + iVar2 * 8 + 4);
  *(undefined *)(*(int *)(iVar1 + 0x34) + iVar2 * 8) = 1;
  return iVar2;
}



void FUN_8002ff18(int param_1)

{
  int iVar1;
  
  iVar1 = DAT_8002ff4c;
  *(int *)(DAT_8002ff4c + 4) = *(int *)(DAT_8002ff4c + 4) + 1;
  *(undefined4 *)(*(int *)(iVar1 + 0x34) + param_1 * 8 + 4) = *(undefined4 *)(iVar1 + 0x24);
  *(undefined *)(*(int *)(iVar1 + 0x34) + param_1 * 8) = 0;
  *(int *)(iVar1 + 0x24) = param_1;
  return;
}



void FUN_8002ff50(int param_1)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  int *piVar4;
  
  uVar2 = FUN_8002f838(*(undefined4 *)(param_1 + 4));
  piVar1 = DAT_8002ffa8;
  if (uVar2 < 0x10) {
    *DAT_8002ffa8 = *DAT_8002ffa8 - *(int *)(param_1 + 4);
    iVar3 = *(int *)(param_1 + 8);
    piVar4 = *(int **)(param_1 + 0xc);
    if (iVar3 != 0) {
      *(int **)(iVar3 + 4) = piVar4;
    }
    if (piVar4 == (int *)0x0) {
      piVar1[uVar2 * 2 + 0x11] = iVar3;
    }
    else {
      *piVar4 = iVar3;
    }
  }
  return;
}



undefined4 FUN_8002ffac(uint param_1)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  int iVar6;
  int *piVar7;
  int *piVar8;
  int iVar9;
  
  iVar1 = DAT_80030088;
  piVar5 = *(int **)(DAT_80030088 + 0x38);
  piVar8 = (int *)((int)piVar5 + *(int *)(DAT_80030088 + 0xc) + -1);
  do {
    iVar6 = piVar5[1];
    if ((*piVar5 == 0) && (piVar7 = (int *)((int)piVar5 + iVar6), piVar7 < piVar8)) {
      iVar3 = *piVar7;
      iVar9 = piVar7[1];
      if ((iVar3 != 0) && (*(char *)(*(int *)(iVar1 + 0x34) + iVar3 * 8) == '\x01')) {
        iVar4 = *(int *)(iVar1 + 0x2c);
        FUN_8002ff50();
        *(int **)(*(int *)(iVar1 + 0x34) + *piVar7 * 8 + 4) = piVar5;
        FUN_80000730(piVar5,piVar7,iVar9);
        if (iVar3 == iVar4) {
          *(int *)(iVar1 + 0x34) = *(int *)(iVar1 + 0x34) - (int)((int)piVar7 - (int)piVar5);
        }
        uVar2 = FUN_8002ce34(iVar6,(int)piVar5 + iVar9);
        iVar6 = iVar9;
        if ((param_1 != 0) && (param_1 <= uVar2)) {
          return 0;
        }
      }
    }
    piVar5 = (int *)((int)piVar5 + iVar6);
    if (piVar8 <= piVar5) {
      return 1;
    }
  } while( true );
}



void set_background_color(uint color)

{
  uint uVar1;
  int iVar2;
  uint *puVar3;
  
  if (*(uint *)(*DAT_800300bc + 0x34) == color) {
    return;
  }
  *(uint *)(*DAT_800300bc + 0x34) = color;
  uVar1 = convert_color_via_call(color);
  iVar2 = *DAT_8001d37c;
  if ((*(byte *)(iVar2 + 0x10) & 4) == 0) {
    puVar3 = *(uint **)(iVar2 + 0x38);
  }
  else {
    puVar3 = *(uint **)(iVar2 + 0x3c);
  }
  *puVar3 = uVar1;
  return;
}



void FUN_800300c0(undefined4 *param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  void *source;
  int iVar2;
  longlong lVar3;
  undefined4 local_18;
  undefined4 uStack20;
  undefined4 uStack16;
  
  iVar2 = *DAT_80030130;
  source = *(void **)(iVar2 + 0x44);
  local_18 = param_2;
  uStack20 = param_3;
  uStack16 = param_4;
  if (source != (void *)0x0) {
    lVar3 = memcpy(&uStack20,source,8);
    iVar1 = *(int *)(DAT_80030134 + 0x28);
    if (iVar1 == 0) {
      iVar1 = *(int *)(iVar2 + 0x48);
    }
    local_18 = FUN_8001857c(iVar1,(int)((ulonglong)lVar3 >> 0x20));
    FUN_8002aa24(local_18,&uStack20);
    FUN_800185cc(&local_18);
    FUN_80019f54(&uStack20,param_1);
    param_1 = &uStack20;
  }
  FUN_8001d3bc(param_1);
  return;
}



void set_foreground_color(uint color)

{
  uint uVar1;
  int iVar2;
  uint *puVar3;
  
  if (*(uint *)(*DAT_80030168 + 0x30) == color) {
    return;
  }
  *(uint *)(*DAT_80030168 + 0x30) = color;
  uVar1 = convert_color_via_call(color);
  iVar2 = *DAT_8001d470;
  if ((*(byte *)(iVar2 + 0x10) & 4) == 0) {
    puVar3 = *(uint **)(iVar2 + 0x3c);
  }
  else {
    puVar3 = *(uint **)(iVar2 + 0x38);
  }
  *puVar3 = uVar1;
  return;
}



uchar swap_font_paint_mode2(uchar mode)

{
  byte bVar1;
  int *piVar2;
  int iVar3;
  undefined4 uVar4;
  
  piVar2 = DAT_800301bc;
  iVar3 = *DAT_800301bc;
  bVar1 = *(byte *)(iVar3 + 0x10);
  if (((bVar1 ^ mode) & 4) != 0) {
    uVar4 = **(undefined4 **)(iVar3 + 0x38);
    **(undefined4 **)(iVar3 + 0x38) = **(undefined4 **)(iVar3 + 0x3c);
    **(undefined4 **)(*piVar2 + 0x3c) = uVar4;
  }
  *(uchar *)(*piVar2 + 0x10) = mode;
  return (uchar)bVar1;
}



void FUN_800301c0(int param_1,byte param_2,undefined4 param_3)

{
  undefined4 local_10;
  uint local_c;
  
  local_c = (uint)param_2;
  local_10 = param_3;
  FUN_8001d714(*(undefined4 *)(param_1 + 0x18),4,&local_10);
  return;
}



undefined4 FUN_800301f0(int param_1)

{
  char cVar1;
  uint uVar2;
  int extraout_r1;
  int extraout_r1_00;
  
  cVar1 = *(char *)(*DAT_800302b4 + 0x1a);
  if (cVar1 == '\x01') {
    if (0xb < (param_1 + 6) % 0x10) {
      return 0;
    }
  }
  else {
    if (cVar1 == '\x02') {
      if (1 < param_1 % 4) {
        return 0;
      }
    }
    else {
      if (cVar1 == '\x03') {
        divide_2(param_1,0x14);
        if (extraout_r1 < 0xc) {
          return 1;
        }
        uVar2 = extraout_r1 - 0x10;
      }
      else {
        if (cVar1 != '\x04') {
          return 0;
        }
        divide_2(param_1,0x18);
        if (extraout_r1_00 < 0xc) {
          return 1;
        }
        if (extraout_r1_00 - 0x10U < 2) {
          return 1;
        }
        uVar2 = extraout_r1_00 - 0x14;
      }
      if (1 < uVar2) {
        return 0;
      }
    }
  }
  return 1;
}



void FUN_800302b8(void)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar2 = DAT_80030300;
  piVar1 = DAT_800302fc;
  iVar3 = DAT_800302fc[1];
  iVar4 = *DAT_800302fc;
  if (iVar4 < iVar3) {
    *(int *)(DAT_80030300 + 0x24) = iVar3;
    *(int *)(iVar2 + 0x20) = iVar4;
  }
  else {
    *(int *)(DAT_80030300 + 0x20) = iVar3;
    *(int *)(iVar2 + 0x24) = iVar4;
  }
  iVar4 = piVar1[2];
  iVar3 = piVar1[3];
  if (iVar4 < iVar3) {
    *(int *)(iVar2 + 0x28) = iVar4;
    *(int *)(iVar2 + 0x2c) = iVar3;
  }
  else {
    *(int *)(iVar2 + 0x28) = iVar3;
    *(int *)(iVar2 + 0x2c) = iVar4;
  }
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x800304d4
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_80030480(int param_1,undefined4 param_2)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 uVar3;
  code *in_lr;
  undefined4 local_18;
  code *UNRECOVERED_JUMPTABLE;
  
  local_18 = 0;
  puVar1 = *(undefined4 **)(param_1 + 8);
  if (puVar1 == (undefined4 *)0x0) {
    UNRECOVERED_JUMPTABLE = in_lr;
    iVar2 = FUN_80018464(0x1c);
    *(int *)(param_1 + 8) = iVar2;
    (**(code **)(*(int *)(param_1 + 0x10) + 8))();
    uVar3 = FUN_8001d9e0();
    *(undefined4 *)(iVar2 + 0x18) = uVar3;
    puVar1 = *(undefined4 **)(param_1 + 8);
    if (puVar1 == (undefined4 *)0x0) {
                    // WARNING: Could not recover jumptable at 0x800304d4. Too many branches
                    // WARNING: Treating indirect jump as call
      (*UNRECOVERED_JUMPTABLE)();
      return;
    }
  }
  *puVar1 = param_2;
  local_18 = param_2;
  FUN_8001d714(*(undefined4 *)(param_1 + 0x18),2,&local_18);
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x80030548
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_800304f8(int param_1,undefined4 param_2,undefined4 param_3)

{
  int iVar1;
  undefined4 uVar2;
  code *UNRECOVERED_JUMPTABLE;
  
  if (*(int *)(param_1 + 8) == 0) {
    iVar1 = FUN_80018464(0x1c);
    *(int *)(param_1 + 8) = iVar1;
    (**(code **)(*(int *)(param_1 + 0x10) + 8))();
    uVar2 = FUN_8001d9e0();
    *(undefined4 *)(iVar1 + 0x18) = uVar2;
    if (*(int *)(param_1 + 8) == 0) {
                    // WARNING: Could not recover jumptable at 0x80030548. Too many branches
                    // WARNING: Treating indirect jump as call
      (*UNRECOVERED_JUMPTABLE)();
      return;
    }
  }
  iVar1 = *(int *)(param_1 + 8);
  *(undefined4 *)(iVar1 + 0xc) = param_2;
  *(undefined4 *)(iVar1 + 0x10) = param_3;
  *(undefined4 *)(iVar1 + 0x14) = param_2;
  return;
}



void FUN_80030564(int *param_1,uint param_2)

{
  byte bVar1;
  ushort uVar2;
  byte extraout_r1;
  ushort extraout_r1_00;
  int extraout_r1_01;
  int extraout_r1_02;
  uint extraout_r1_03;
  uint extraout_r1_04;
  uint uVar3;
  uint uVar4;
  int *piVar5;
  int iVar6;
  
  uVar3 = 0;
  do {
    uVar4 = 0;
    piVar5 = param_1;
    while (uVar4 < param_2 >> 2) {
      divide(uVar4 + uVar3,0xff);
      uVar4 = uVar4 + 1;
      *piVar5 = extraout_r1_01;
      piVar5 = piVar5 + 1;
    }
    uVar4 = 0;
    piVar5 = param_1;
    while (uVar4 < param_2 >> 2) {
      iVar6 = *piVar5;
      divide(uVar4 + uVar3,0xff);
      if (extraout_r1_02 != iVar6) {
        return;
      }
      uVar4 = uVar4 + 1;
      piVar5 = piVar5 + 1;
    }
    uVar3 = uVar3 + 1;
  } while (uVar3 < 2);
  uVar3 = 0;
  do {
    uVar4 = 0;
    piVar5 = param_1;
    while (uVar4 < param_2 >> 1) {
      divide(uVar4 + uVar3,0xff);
      uVar4 = uVar4 + 1;
      *(ushort *)piVar5 = extraout_r1_00;
      piVar5 = (int *)((int)piVar5 + 2);
    }
    uVar4 = 0;
    piVar5 = param_1;
    while (uVar4 < param_2 >> 1) {
      uVar2 = *(ushort *)piVar5;
      divide(uVar4 + uVar3,0xff);
      if (extraout_r1_03 != uVar2) {
        return;
      }
      uVar4 = uVar4 + 1;
      piVar5 = (int *)((int)piVar5 + 2);
    }
    uVar3 = uVar3 + 1;
  } while (uVar3 < 2);
  uVar3 = 0;
  do {
    uVar4 = 0;
    piVar5 = param_1;
    while (uVar4 < param_2) {
      divide(uVar4 + uVar3,0xff);
      uVar4 = uVar4 + 1;
      *(byte *)piVar5 = extraout_r1;
      piVar5 = (int *)((int)piVar5 + 1);
    }
    uVar4 = 0;
    piVar5 = param_1;
    while (uVar4 < param_2) {
      bVar1 = *(byte *)piVar5;
      divide(uVar4 + uVar3,0xff);
      if (extraout_r1_04 != bVar1) {
        return;
      }
      uVar4 = uVar4 + 1;
      piVar5 = (int *)((int)piVar5 + 1);
    }
    uVar3 = uVar3 + 1;
  } while (uVar3 < 2);
  uVar3 = 0;
  while (uVar3 < param_2) {
    uVar3 = uVar3 + 1;
    *(byte *)param_1 = 0;
    param_1 = (int *)((int)param_1 + 1);
  }
  return;
}



void FUN_800306e0(int *param_1)

{
  if (*(int **)(DAT_80030728 + param_1[6] * 4) == param_1) {
    *(int *)(DAT_80030728 + param_1[6] * 4) = *param_1;
  }
  if ((int *)param_1[1] != (int *)0x0) {
    *(int *)param_1[1] = *param_1;
  }
  if (*param_1 != 0) {
    *(int *)(*param_1 + 4) = param_1[1];
  }
  *param_1 = 0;
  param_1[1] = 0;
  return;
}



void FUN_8003072c(undefined4 *param_1,undefined4 param_2,int param_3,undefined4 param_4)

{
  param_1[4] = param_1;
  *param_1 = param_2;
  param_1[1] = param_3;
  param_1[2] = param_4;
  *(int *)((int)param_1 + param_3 + -4) = param_3;
  return;
}



void FUN_80030740(undefined4 param_1,int param_2,int param_3)

{
  short sVar1;
  short sVar2;
  int *piVar3;
  undefined4 uVar4;
  int iVar5;
  byte *pbVar6;
  int iVar7;
  int iVar8;
  short ypos;
  int iVar9;
  byte pixels;
  uint uVar10;
  int iVar11;
  int iVar12;
  undefined4 *color;
  int iVar13;
  byte flag;
  byte bytesperline;
  uint local_58;
  int local_54;
  int *local_50;
  byte *local_4c [2];
  undefined4 local_44;
  int local_40;
  undefined4 local_3c;
  undefined4 uStack56;
  int local_34;
  undefined4 local_30;
  int local_2c;
  int iStack40;
  
  local_3c = *(undefined4 *)PTR_DAT_80030cc0;
  uStack56 = *(undefined4 *)(PTR_DAT_80030cc0 + 4);
  local_30 = param_1;
  local_2c = param_2;
  iStack40 = param_3;
  local_50 = (int *)FUN_8001857c(param_1);
  piVar3 = DAT_80030cc4;
  sVar1 = *(short *)(local_50 + 2);
  iVar9 = (int)sVar1;
  uVar10 = local_50[4];
  iVar12 = local_50[5];
  iVar11 = local_50[3];
  sVar2 = *(short *)((int)local_50 + 10);
  local_54 = *(int *)(*(int *)(*local_50 + 0x10) + 4);
  uVar4 = FUN_80019120(*(undefined *)(*DAT_80030cc4 + 0x11));
  iVar5 = FUN_800192cc(*(undefined *)(*piVar3 + 0x11));
  FUN_800185cc(&local_50);
  if (uVar10 < 9) {
    iVar13 = 1;
  }
  else {
    if (uVar10 < 0x11) {
      iVar13 = 2;
    }
    else {
      iVar13 = 4;
    }
  }
  if (uVar10 == 1) {
    color = &local_3c;
  }
  else {
    color = (undefined4 *)0x0;
  }
  ypos = (short)param_3;
  pixels = (byte)sVar1;
  flag = (byte)uVar10;
  bytesperline = (byte)iVar11;
  if (local_54 == iVar5) {
    pbVar6 = (byte *)FUN_800194d4(local_30);
    if (iVar12 == 0) {
      render_character((short)local_2c,ypos,pixels,(byte)sVar2,1,1,flag,bytesperline,pbVar6,
                       (ushort *)color);
    }
    else {
      local_40 = FUN_8001857c(iVar12);
      iVar5 = 0;
      while (iVar5 < sVar2) {
        local_58 = 0;
        iVar7 = (**(code **)(*(int *)(local_40 + 8) + 0x14))(local_40,&local_58,iVar5);
        iVar12 = iVar5;
        if (iVar7 == iVar9) {
          while (iVar8 = (**(code **)(*(int *)(local_40 + 8) + 0x14))(local_40,&local_58,iVar5 + 1),
                iVar8 == iVar7) {
            iVar5 = iVar5 + 1;
          }
          render_character((short)local_2c,ypos + (short)iVar12,pixels,(char)(iVar5 - iVar12) + 1,1,
                           1,flag,bytesperline,pbVar6,(ushort *)color);
          iVar12 = ((iVar5 - iVar12) + 1) * iVar11;
        }
        else {
          iVar12 = iVar11;
          if (uVar10 == 1) {
            while (iVar7 != 0) {
              FUN_8001d71c(local_58 + local_2c,param_3 + iVar5,iVar7,1,1,1,1,iVar11,
                           pbVar6 + ((int)(local_58 + ((uint)((int)local_58 >> 0x1f) >> 0x1d)) >> 3)
                           ,color,local_58 & 7);
              local_58 = local_58 + iVar7;
              iVar7 = (**(code **)(*(int *)(local_40 + 8) + 0x14))(local_40,&local_58,iVar5);
            }
          }
          else {
            while (iVar7 != 0) {
              render_character((short)local_2c + (short)local_58,ypos + (short)iVar5,(byte)iVar7,1,1
                               ,1,flag,bytesperline,pbVar6 + local_58 * iVar13,(ushort *)color);
              local_58 = local_58 + iVar7;
              iVar7 = (**(code **)(*(int *)(local_40 + 8) + 0x14))(local_40,&local_58,iVar5);
            }
          }
        }
        pbVar6 = pbVar6 + iVar12;
        iVar5 = iVar5 + 1;
      }
      FUN_800185cc(&local_40);
    }
  }
  else {
    local_44 = FUN_800192b4(*(undefined *)(*piVar3 + 0x11));
    local_34 = FUN_8001835c(iVar9 << 2);
    if (local_34 != 0) {
      pbVar6 = (byte *)FUN_800194d4(local_30);
      if (iVar12 == 0) {
        render_character((short)local_2c,ypos,pixels,(byte)sVar2,1,1,flag,bytesperline,pbVar6,
                         (ushort *)color);
      }
      else {
        local_40 = FUN_8001857c(iVar12);
        iVar5 = 0;
        while (iVar5 < sVar2) {
          local_58 = 0;
          iVar12 = (**(code **)(*(int *)(local_40 + 8) + 0x14))(local_40,&local_58,iVar5);
          if (iVar12 == iVar9) {
            local_4c[0] = (byte *)FUN_8001857c(local_34);
            if (uVar10 < 9) {
              FUN_8002d258(pbVar6,local_4c[0],iVar12,uVar4,local_54,local_44);
            }
            else {
              FUN_8002d1f0(pbVar6,local_4c[0],iVar12,uVar4,local_54,local_44);
            }
            render_character((short)local_2c,ypos + (short)iVar5,pixels,1,1,1,(byte)uVar4,0,
                             local_4c[0],(ushort *)color);
            FUN_800185cc(local_4c);
          }
          else {
            if (uVar10 == 1) {
              while (iVar12 != 0) {
                FUN_8001d71c(local_58 + local_2c,param_3 + iVar5,iVar12,1,1,1,1,iVar11,
                             pbVar6 + ((int)(local_58 + ((uint)((int)local_58 >> 0x1f) >> 0x1d)) >>
                                      3),color,local_58 & 7);
                local_58 = local_58 + iVar12;
                iVar12 = (**(code **)(*(int *)(local_40 + 8) + 0x14))(local_40,&local_58,iVar5);
              }
            }
            else {
              while (iVar12 != 0) {
                local_4c[0] = (byte *)FUN_8001857c(local_34);
                if (uVar10 < 9) {
                  FUN_8002d258(pbVar6 + iVar13 * local_58,local_4c[0],iVar12,uVar4,local_54,local_44
                              );
                }
                else {
                  FUN_8002d1f0();
                }
                render_character((short)local_2c + (short)local_58,ypos + (short)iVar5,(byte)iVar12,
                                 1,1,1,(byte)uVar4,0,local_4c[0],(ushort *)color);
                FUN_800185cc(local_4c);
                local_58 = local_58 + iVar12;
                iVar12 = (**(code **)(*(int *)(local_40 + 8) + 0x14))(local_40,&local_58,iVar5);
              }
            }
          }
          pbVar6 = pbVar6 + iVar11;
          iVar5 = iVar5 + 1;
        }
        FUN_800185cc(&local_40);
      }
      FUN_800183e8(local_34);
    }
  }
  return;
}



void FUN_80030cc8(undefined4 param_1,undefined4 param_2,int param_3,int param_4)

{
  short sVar1;
  short sVar2;
  undefined uVar3;
  undefined2 uVar4;
  uint uVar5;
  code *pcVar6;
  undefined4 *puVar7;
  byte pixels;
  undefined4 uVar8;
  int iVar9;
  int *piVar10;
  int *piVar11;
  int iVar12;
  code **ppcVar13;
  int iVar14;
  int iVar15;
  code *pcVar16;
  code **ppcVar17;
  bool bVar18;
  byte bytesperline;
  code *local_54 [3];
  int *local_48;
  undefined4 *local_44;
  code *local_40;
  int local_3c;
  undefined4 local_34;
  undefined4 local_30;
  int iStack44;
  int iStack40;
  
  local_34 = param_1;
  local_30 = param_2;
  iStack44 = param_3;
  iStack40 = param_4;
  local_48 = (int *)FUN_8001857c(param_1);
  bytesperline = (byte)local_48[3];
  sVar1 = *(short *)(local_48 + 2);
  iVar9 = (int)sVar1;
  sVar2 = *(short *)((int)local_48 + 10);
  iVar15 = (int)sVar2;
  piVar11 = local_48 + 6;
  ppcVar17 = *(code ***)(*local_48 + 0x10);
  FUN_800185cc(&local_48);
  local_40 = ppcVar17[1];
  ppcVar13 = *(code ***)(*(int *)(DAT_800311dc + (uint)*(byte *)(*DAT_800311d8 + 0x11) * 4) + 0x10);
  pcVar16 = *ppcVar13;
  uVar5 = FUN_80019120();
  if (uVar5 < 9) {
    iVar12 = 1;
  }
  else {
    if (uVar5 < 0x11) {
      iVar12 = 2;
    }
    else {
      iVar12 = 4;
    }
  }
  pixels = (byte)sVar1;
  if (ppcVar17 == ppcVar13) {
    render_character((short)local_30,(short)param_3,pixels,(byte)sVar2,1,1,(byte)param_4,
                     bytesperline,(byte *)piVar11,(ushort *)0x0);
  }
  else {
    if (param_4 == 0x20) {
      local_3c = FUN_8001835c(iVar12 * iVar9);
      if (local_3c == 0) {
        return;
      }
      local_44 = (undefined4 *)FUN_8001857c();
      local_48 = (int *)FUN_8001857c(local_34);
      piVar11 = local_48 + 6;
      if (ppcVar13[4] == (code *)0x0) {
        do {
          piVar10 = piVar11;
          iVar14 = iVar9;
          puVar7 = local_44;
          if (iVar12 == 1) {
            do {
              piVar11 = piVar10 + 1;
              uVar3 = (*pcVar16)(*piVar10);
              iVar14 = iVar14 + -1;
              *(undefined *)puVar7 = uVar3;
              piVar10 = piVar11;
              puVar7 = (undefined4 *)((int)puVar7 + 1);
            } while (iVar14 != 0);
          }
          else {
            if (iVar12 == 2) {
              do {
                piVar11 = piVar10 + 1;
                uVar4 = (*pcVar16)(*piVar10);
                iVar14 = iVar14 + -1;
                *(undefined2 *)puVar7 = uVar4;
                piVar10 = piVar11;
                puVar7 = (undefined4 *)((int)puVar7 + 2);
              } while (iVar14 != 0);
            }
            else {
              if (iVar12 == 4) {
                do {
                  piVar11 = piVar10 + 1;
                  uVar8 = (*pcVar16)(*piVar10);
                  iVar14 = iVar14 + -1;
                  *puVar7 = uVar8;
                  piVar10 = piVar11;
                  puVar7 = puVar7 + 1;
                } while (iVar14 != 0);
              }
            }
          }
          render_character((short)local_30,(short)param_3,pixels,1,1,1,(byte)(iVar12 << 3),0,
                           (byte *)local_44,(ushort *)0x0);
          iVar15 = iVar15 + -1;
          param_3 = param_3 + 1;
        } while (iVar15 != 0);
      }
      else {
        do {
          if (iVar12 == 1) {
            pcVar16 = ppcVar13[4];
LAB_80030eb0:
            (*pcVar16)(piVar11);
            piVar11 = piVar11 + iVar9;
          }
          else {
            if (iVar12 == 2) {
              pcVar16 = ppcVar13[4];
              goto LAB_80030eb0;
            }
            if (iVar12 == 4) {
              pcVar16 = ppcVar13[4];
              goto LAB_80030eb0;
            }
          }
          render_character((short)local_30,(short)param_3,pixels,1,1,1,(byte)(iVar12 << 3),0,
                           (byte *)local_44,(ushort *)0x0);
          iVar15 = iVar15 + -1;
          param_3 = param_3 + 1;
        } while (iVar15 != 0);
      }
    }
    else {
      if (param_4 != 0x10) {
        return;
      }
      local_3c = FUN_8001835c(iVar12 * iVar9);
      if (local_3c == 0) {
        return;
      }
      local_44 = (undefined4 *)FUN_8001857c();
      local_48 = (int *)FUN_8001857c(local_34);
      pcVar6 = ppcVar13[4];
      piVar11 = local_48 + 6;
      bVar18 = pcVar6 == (code *)0x0;
      if (!bVar18) {
        pcVar6 = ppcVar17[5];
      }
      if (bVar18 || pcVar6 == (code *)0x0) {
        do {
          piVar10 = piVar11;
          iVar14 = iVar9;
          puVar7 = local_44;
          if (iVar12 == 1) {
            do {
              piVar11 = (int *)((int)piVar10 + 2);
              (*local_40)(*(undefined2 *)piVar10);
              uVar3 = (*pcVar16)();
              iVar14 = iVar14 + -1;
              *(undefined *)puVar7 = uVar3;
              piVar10 = piVar11;
              puVar7 = (undefined4 *)((int)puVar7 + 1);
            } while (iVar14 != 0);
          }
          else {
            if (iVar12 == 2) {
              do {
                piVar11 = (int *)((int)piVar10 + 2);
                (*local_40)(*(undefined2 *)piVar10);
                uVar4 = (*pcVar16)();
                iVar14 = iVar14 + -1;
                *(undefined2 *)puVar7 = uVar4;
                piVar10 = piVar11;
                puVar7 = (undefined4 *)((int)puVar7 + 2);
              } while (iVar14 != 0);
            }
            else {
              if (iVar12 == 4) {
                do {
                  piVar11 = (int *)((int)piVar10 + 2);
                  (*local_40)(*(undefined2 *)piVar10);
                  uVar8 = (*pcVar16)();
                  iVar14 = iVar14 + -1;
                  *puVar7 = uVar8;
                  piVar10 = piVar11;
                  puVar7 = puVar7 + 1;
                } while (iVar14 != 0);
              }
            }
          }
          render_character((short)local_30,(short)param_3,pixels,1,1,1,(byte)(iVar12 << 3),0,
                           (byte *)local_44,(ushort *)0x0);
          iVar15 = iVar15 + -1;
          param_3 = param_3 + 1;
        } while (iVar15 != 0);
      }
      else {
        local_54[0] = (code *)FUN_8001835c((int)*(short *)(local_48 + 2) << 2);
        local_40 = local_54[0];
        if ((local_54[0] != (code *)0x0) &&
           (local_54[0] = (code *)FUN_8001857c(), local_54[0] != (code *)0x0)) {
          do {
            puVar7 = local_44;
            if (iVar12 == 1) {
              (*ppcVar17[5])(piVar11,local_54[0],iVar9,2);
              pcVar16 = ppcVar13[4];
              uVar8 = 1;
LAB_8003104c:
              (*pcVar16)(local_54[0],puVar7,iVar9,uVar8);
              piVar11 = (int *)((int)piVar11 + iVar9 * 2);
            }
            else {
              if (iVar12 == 2) {
                (*ppcVar17[5])(piVar11,local_54[0],iVar9,2);
                pcVar16 = ppcVar13[4];
                uVar8 = 2;
                goto LAB_8003104c;
              }
              if (iVar12 == 4) {
                (*ppcVar17[5])(piVar11,local_54[0],iVar9,2);
                pcVar16 = ppcVar13[4];
                uVar8 = 4;
                goto LAB_8003104c;
              }
            }
            render_character((short)local_30,(short)param_3,pixels,1,1,1,(byte)(iVar12 << 3),0,
                             (byte *)local_44,(ushort *)0x0);
            iVar15 = iVar15 + -1;
            param_3 = param_3 + 1;
          } while (iVar15 != 0);
          FUN_800185cc(local_54);
          FUN_800183e8(local_40);
        }
      }
    }
    FUN_800185cc(&local_48);
    FUN_800185cc(&local_44);
    FUN_800183e8(local_3c);
  }
  return;
}



int FUN_800311e0(int param_1,int param_2,undefined4 param_3,int param_4)

{
  short sVar1;
  short sVar2;
  int iVar3;
  int iVar4;
  int local_10;
  
  local_10 = param_4;
  local_10 = FUN_8001857c(*(undefined4 *)(*DAT_80031234 + 0x60));
  sVar1 = *(short *)(local_10 + 6);
  iVar4 = *(int *)(local_10 + 0xc);
  iVar3 = local_10 + 0x18;
  sVar2 = *(short *)(local_10 + 4);
  FUN_800185cc(&local_10);
  return (param_2 - sVar1) * iVar4 + iVar3 + param_1 * 2 + sVar2 * -2;
}



void FUN_80031238(int param_1,int param_2,int param_3)

{
  ushort uVar1;
  int *piVar2;
  ushort uVar3;
  
  piVar2 = Global_Frame_Buffer_Pointer;
  uVar1 = *(ushort *)(*Global_Frame_Buffer_Pointer + (param_2 + param_3 * 800) * 2);
  uVar3 = (**(code **)(*(int *)(param_1 + 0x10) + 8))();
  *(ushort *)(*piVar2 + param_3 * 0x640 + param_2 * 2) = uVar3 ^ uVar1;
  return;
}



uint FUN_80031328(uint param_1,int param_2)

{
  param_1 = param_1 | param_2 << 0xc;
  if (param_1 != 0) {
    param_1 = 4;
  }
  if ((uint)(param_2 << 1) >> 0x15 != 0) {
    param_1 = param_1 | 1;
  }
  if (DAT_80031354 == (uint)(param_2 << 1) >> 0x15) {
    param_1 = param_1 | 2;
  }
  if (param_1 == 1) {
    param_1 = 5;
  }
  return param_1;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

uint FUN_80031358(uint param_1,uint param_2,uint *param_3)

{
  longlong lVar1;
  uint uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  int iVar5;
  uint uVar6;
  undefined4 uVar7;
  undefined4 extraout_r1;
  int iVar8;
  undefined4 uVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  int iVar13;
  uint uVar14;
  uint uVar15;
  bool bVar16;
  undefined8 uVar17;
  undefined8 uVar18;
  undefined8 uVar19;
  undefined8 uVar20;
  uint local_80 [6];
  undefined4 local_68;
  undefined4 local_64;
  undefined4 local_60;
  undefined4 *local_5c;
  undefined4 local_58;
  uint local_54;
  uint local_50;
  undefined4 local_4c;
  undefined4 local_44;
  uint local_3c;
  uint local_38;
  uint uStack48;
  uint local_2c;
  uint *puStack40;
  
  param_3[2] = 0;
  param_3[3] = 0;
  uVar9 = DAT_80031834;
  uVar4 = DAT_80031830;
  uVar7 = DAT_8003182c;
  uVar2 = DAT_80031828;
  uVar12 = param_2 & 0x7fffffff;
  if (uVar12 + DAT_80031820 == 0 || (int)(uVar12 + DAT_80031820) < 0 != SCARRY4(uVar12,DAT_80031820)
     ) {
    *param_3 = param_1;
    param_3[1] = param_2;
    return 0;
  }
  local_54 = param_2;
  uStack48 = param_1;
  local_2c = param_2;
  puStack40 = param_3;
  if ((int)uVar12 < DAT_80031824) {
    if ((int)param_2 < 1) {
      uVar17 = FUN_8003926c(param_1,param_2,DAT_80031838,DAT_80031828);
      uVar3 = (undefined4)((ulonglong)uVar17 >> 0x20);
      if (uVar12 == uVar2) {
        uVar17 = FUN_8003926c((int)uVar17,uVar3,uVar7,DAT_80031840);
        uVar17 = FUN_8003926c((int)uVar17,(int)((ulonglong)uVar17 >> 0x20),uVar4,uVar9);
        *param_3 = (uint)uVar17;
        param_3[1] = (uint)((ulonglong)uVar17 >> 0x20);
      }
      else {
        uVar17 = FUN_8003926c((int)uVar17,uVar3,DAT_8003183c,DAT_80031840);
        *param_3 = (uint)uVar17;
        param_3[1] = (uint)((ulonglong)uVar17 >> 0x20);
      }
      return 0xffffffff;
    }
    uVar17 = FUN_80039d74();
    uVar3 = (undefined4)((ulonglong)uVar17 >> 0x20);
    if (uVar12 == uVar2) {
      uVar17 = FUN_80039d74((int)uVar17,uVar3,uVar7,DAT_80031840);
      uVar17 = FUN_80039d74((int)uVar17,(int)((ulonglong)uVar17 >> 0x20),uVar4,uVar9);
      *param_3 = (uint)uVar17;
      param_3[1] = (uint)((ulonglong)uVar17 >> 0x20);
    }
    else {
      uVar17 = FUN_80039d74((int)uVar17,uVar3,DAT_8003183c,DAT_80031840);
      *param_3 = (uint)uVar17;
      param_3[1] = (uint)((ulonglong)uVar17 >> 0x20);
    }
    return 1;
  }
  if (DAT_80031844 < (int)uVar12) {
    uVar2 = (param_2 >> 0x14 & 0xfffff7ff) - 0x3f5;
    uVar12 = uVar2 & 0x1f;
    local_38 = 0x20 - uVar12;
    local_68 = 0;
    local_64 = 0;
    iVar13 = 5;
    do {
      iVar8 = ((int)uVar2 >> 5) + iVar13;
      iVar5 = DAT_80031858 + -0x7ffce9a4;
      if (uVar12 == 0) {
        uVar14 = *(uint *)(iVar5 + iVar8 * 4);
      }
      else {
        uVar14 = *(int *)(iVar5 + iVar8 * 4) << uVar12 |
                 *(uint *)(iVar5 + iVar8 * 4 + 4) >> (local_38 & 0xff);
      }
      uVar6 = (uint)((ulonglong)param_1 * (ulonglong)uVar14);
      uVar10 = (uint)((ulonglong)param_1 * (ulonglong)uVar14 >> 0x20);
      lVar1 = (ulonglong)(param_2 & 0xfffff | 0x100000) * (ulonglong)uVar14;
      uVar14 = (uint)lVar1;
      uVar11 = uVar10 + uVar14;
      uVar15 = local_80[iVar13 + 1];
      bVar16 = CARRY4(uVar6,local_80[iVar13 + 2]);
      local_80[iVar13 + 1] = uVar11 + uVar15 + (uint)bVar16;
      local_80[iVar13 + 2] = uVar6 + local_80[iVar13 + 2];
      local_80[iVar13] =
           (int)((ulonglong)lVar1 >> 0x20) + (uint)CARRY4(uVar10,uVar14) +
           (uint)(bVar16 == false && CARRY4(uVar11,uVar15) ||
                 bVar16 == true && uVar11 + uVar15 + 1 <= uVar11);
      bVar16 = 0 < iVar13;
      iVar13 = iVar13 + -1;
    } while (bVar16);
    local_3c = local_80[2] + 0x20000000 >> 0x1e;
    uVar17 = FUN_8003979c(local_80[2] << 2);
    local_44 = (undefined4)((ulonglong)uVar17 >> 0x20);
    uVar18 = FUN_800397d0(local_80[3]);
    uVar18 = FUN_8003a7ec((int)uVar18,(int)((ulonglong)uVar18 >> 0x20),0xffffffe2);
    uVar7 = (undefined4)((ulonglong)uVar18 >> 0x20);
    local_60 = (undefined4)uVar18;
    uVar18 = FUN_800397d0(local_80[4]);
    uVar18 = FUN_8003a7ec((int)uVar18,(int)((ulonglong)uVar18 >> 0x20),0xffffffc2);
    local_4c = (undefined4)((ulonglong)uVar18 >> 0x20);
    uVar19 = FUN_800397d0(local_80[5]);
    uVar19 = FUN_8003a7ec((int)uVar19,(int)((ulonglong)uVar19 >> 0x20),0xffffffa2);
    local_54 = (uint)((ulonglong)uVar19 >> 0x20);
    uVar20 = FUN_8003926c((int)uVar18,local_4c,(int)uVar19,local_54);
    uVar20 = FUN_8003926c((int)uVar20,(int)((ulonglong)uVar20 >> 0x20),local_60,uVar7);
    FUN_8003926c((int)uVar20,(int)((ulonglong)uVar20 >> 0x20),(int)uVar17,local_44);
    uVar17 = FUN_80039d74(0,extraout_r1,(int)uVar17,local_44);
    uVar17 = FUN_80039d74((int)uVar17,(int)((ulonglong)uVar17 >> 0x20),local_60,uVar7);
    uVar17 = FUN_80039d74((int)uVar17,(int)((ulonglong)uVar17 >> 0x20),(int)uVar18,local_4c);
    uVar17 = FUN_80039b5c((int)uVar17,(int)((ulonglong)uVar17 >> 0x20),(int)uVar19,local_54);
    uVar7 = DAT_80031860;
    uVar17 = FUN_80039890((int)uVar17,(int)((ulonglong)uVar17 >> 0x20),DAT_8003185c,DAT_80031860);
    uVar18 = FUN_80039890(0,extraout_r1,DAT_80031864,DAT_80031868);
    uVar17 = FUN_8003926c((int)uVar18,(int)((ulonglong)uVar18 >> 0x20),(int)uVar17,
                          (int)((ulonglong)uVar17 >> 0x20));
    uVar18 = FUN_80039890(0,extraout_r1,0x54000000,uVar7);
    uVar17 = FUN_8003926c((int)uVar18,(int)((ulonglong)uVar18 >> 0x20),(int)uVar17,
                          (int)((ulonglong)uVar17 >> 0x20));
    uVar2 = (uint)((ulonglong)uVar17 >> 0x20);
    if ((local_2c & 0x80000000) != 0) {
      uVar2 = uVar2 ^ 0x80000000;
      local_3c = -local_3c;
    }
    *param_3 = (uint)uVar17;
    param_3[1] = uVar2;
    return local_3c;
  }
  uVar17 = FUN_80039890(param_1,param_2 & 0x7fffffff,DAT_80031848,DAT_8003184c);
  FUN_8003926c((int)uVar17,(int)((ulonglong)uVar17 >> 0x20),0,DAT_80031850);
  local_50 = FUN_800396bc();
  uVar17 = FUN_8003979c();
  uVar4 = (undefined4)((ulonglong)uVar17 >> 0x20);
  uVar7 = (undefined4)uVar17;
  uVar17 = FUN_80039890(uVar7,uVar4,DAT_80031838,uVar2);
  uVar17 = FUN_80039b5c((int)uVar17,(int)((ulonglong)uVar17 >> 0x20),param_1,param_2 & 0x7fffffff);
  uVar18 = FUN_80039890(uVar7,uVar4,DAT_8003183c,DAT_80031840);
  uVar19 = CONCAT44(local_60,local_58);
  local_80[3] = uVar12 >> 0x14;
  iVar13 = 1;
  while( true ) {
    uVar12 = (uint)((ulonglong)uVar17 >> 0x20);
    uVar9 = (undefined4)uVar17;
    uVar17 = FUN_80039d74(uVar9,uVar12,(int)uVar18,(int)((ulonglong)uVar18 >> 0x20));
    local_60 = (undefined4)((ulonglong)uVar19 >> 0x20);
    local_58 = (undefined4)uVar19;
    uVar2 = (uint)((ulonglong)uVar17 >> 0x20);
    *param_3 = (uint)uVar17;
    param_3[1] = uVar2;
    if ((iVar13 == 3) ||
       ((int)(local_80[3] - (uVar2 >> 0x14 & 0xfffff7ff)) <= iVar13 * 0x21 + -0x11)) break;
    local_5c = (undefined4 *)(DAT_80031854 + -0x7ffceac4 + iVar13 * 0x10);
    local_80[0] = uVar12;
    uVar17 = uVar19;
    uVar19 = FUN_80039890(uVar7,uVar4,*local_5c,local_5c[1]);
    local_60 = (undefined4)((ulonglong)uVar17 >> 0x20);
    local_58 = (undefined4)uVar17;
    uVar17 = FUN_80039d74(uVar9,local_80[0],(int)uVar19,(int)((ulonglong)uVar19 >> 0x20));
    local_60 = (undefined4)((ulonglong)uVar19 >> 0x20);
    local_58 = (undefined4)uVar19;
    uVar18 = FUN_80039d74(uVar9,local_80[0],(int)uVar17,(int)((ulonglong)uVar17 >> 0x20));
    local_60 = (undefined4)((ulonglong)uVar19 >> 0x20);
    local_58 = (undefined4)uVar19;
    uVar18 = FUN_80039d74((int)uVar18,(int)((ulonglong)uVar18 >> 0x20),local_58,local_60);
    local_60 = (undefined4)((ulonglong)uVar19 >> 0x20);
    local_58 = (undefined4)uVar19;
    local_80[2] = (uint)((ulonglong)uVar18 >> 0x20);
    uVar20 = FUN_80039890(uVar7,uVar4,local_5c[2],local_5c[3]);
    local_60 = (undefined4)((ulonglong)uVar19 >> 0x20);
    local_58 = (undefined4)uVar19;
    uVar18 = FUN_80039d74((int)uVar20,(int)((ulonglong)uVar20 >> 0x20),(int)uVar18,local_80[2]);
    local_60 = (undefined4)((ulonglong)uVar19 >> 0x20);
    local_58 = (undefined4)uVar19;
    iVar13 = iVar13 + 1;
  }
  if ((int)local_54 < 0) {
    param_3[1] = param_3[1] ^ 0x80000000;
    return -local_50;
  }
  return local_50;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

uint FUN_8003186c(undefined4 param_1,uint param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  bool bVar15;
  bool bVar16;
  bool bVar17;
  undefined8 uVar18;
  undefined8 uVar19;
  longlong lVar20;
  
  uVar13 = param_2 & 0x7fffffff;
  if ((uVar13 < 0x3e400000) && (iVar1 = FUN_800396bc(), iVar1 == 0)) {
    return 0;
  }
  uVar18 = FUN_80039890(param_1,param_2);
  uVar5 = (undefined4)((ulonglong)uVar18 >> 0x20);
  uVar2 = (undefined4)uVar18;
  uVar18 = FUN_800319e4(DAT_800319d4 + -0x7ffce730,6,uVar2,uVar5);
  uVar18 = FUN_80039890((int)uVar18,(int)((ulonglong)uVar18 >> 0x20),uVar2,uVar5);
  uVar19 = FUN_80039890(param_1,param_2,param_3,param_4);
  uVar18 = FUN_80039890(uVar2,uVar5,(int)uVar18,(int)((ulonglong)uVar18 >> 0x20));
  uVar18 = FUN_80039d74((int)uVar18,(int)((ulonglong)uVar18 >> 0x20),(int)uVar19,
                        (int)((ulonglong)uVar19 >> 0x20));
  uVar6 = (undefined4)((ulonglong)uVar18 >> 0x20);
  uVar19 = FUN_8003a7ec(uVar2,uVar5,0xffffffff);
  uVar2 = (undefined4)((ulonglong)uVar19 >> 0x20);
  if ((int)(uVar13 + DAT_800319d8) < 0 == SCARRY4(uVar13,DAT_800319d8)) {
    iVar1 = DAT_800319e0;
    if ((int)uVar13 <= DAT_800319dc) {
      iVar1 = uVar13 - 0x200000;
    }
    uVar19 = FUN_80039d74((int)uVar19,uVar2,0,iVar1);
    lVar20 = FUN_80039d74(0,DAT_800319d0,0,iVar1);
    uVar18 = FUN_80039d74((int)uVar19,(int)((ulonglong)uVar19 >> 0x20),(int)uVar18,uVar6);
  }
  else {
    uVar18 = FUN_80039d74((int)uVar19,uVar2,(int)uVar18,uVar6);
    lVar20 = (ulonglong)DAT_800319d0 << 0x20;
  }
  uVar11 = (uint)((ulonglong)lVar20 >> 0x20);
  uVar13 = (uint)lVar20;
  uVar12 = (uint)((ulonglong)uVar18 >> 0x20);
  uVar4 = (uint)uVar18;
  uVar7 = uVar12 ^ 0x80000000;
  if (-1 < (int)(uVar12 ^ uVar11)) {
    uVar11 = uVar11 ^ 0x80000000;
    bVar15 = uVar4 < uVar13;
    uVar12 = uVar4 - uVar13;
    if ((!bVar15 || !CARRY4(uVar7,~uVar11)) && (bVar15 || uVar7 < uVar7 + ~uVar11 + 1)) {
      bVar16 = CARRY4(uVar13,uVar12);
      uVar13 = uVar13 + uVar12;
      uVar14 = uVar7 - (uVar11 + bVar15) ^ 0x80000000;
      uVar11 = uVar11 + uVar14 + (uint)bVar16;
      bVar15 = uVar4 < uVar12;
      uVar4 = uVar4 - uVar12;
      uVar7 = uVar7 - (uVar14 + bVar15);
    }
    uVar12 = uVar7 >> 0x14;
    uVar14 = uVar12 - (uVar11 >> 0x14);
    bVar15 = (DAT_80039f70 & uVar11 << 1) == 0;
    if (!bVar15) {
      bVar15 = DAT_80039f70 == uVar12 << 0x15;
    }
    if (bVar15) {
      if (DAT_80039f70 == uVar12 << 0x15) {
                    // WARNING: Subroutine does not return
        FUN_80039a08();
      }
      if ((uVar7 & DAT_80039f70 >> 1) == 0) {
        uVar4 = 0;
      }
      return uVar4;
    }
    uVar9 = -uVar13;
    iVar1 = ((int)DAT_80039f70 >> 1) - ((uVar11 & ~((int)DAT_80039f70 >> 1)) + (uint)(uVar13 != 0));
    uVar11 = 0x20 - uVar14;
    uVar8 = uVar7 & ~(uVar7 & 0xfff00000);
    if (uVar14 < 0x21) {
      uVar3 = uVar9 >> (uVar14 & 0xff);
      uVar13 = uVar4 + uVar3;
      uVar14 = uVar8 + (iVar1 >> (uVar14 & 0xff)) + (uint)CARRY4(uVar4,uVar3);
      uVar4 = iVar1 << (uVar11 & 0xff);
      bVar16 = CARRY4(uVar13,uVar4);
      uVar13 = uVar13 + uVar4;
      bVar15 = bVar16 == true && uVar14 + 1 <= uVar14;
      iVar1 = uVar14 + bVar16;
    }
    else {
      uVar13 = uVar13 * -2;
      if (uVar13 != 0) {
        uVar13 = 1;
      }
      uVar14 = uVar14 - 0x20;
      uVar9 = uVar13 | (iVar1 * 2 + (uint)CARRY4(uVar9,uVar9)) * 2;
      uVar11 = 0x1e - uVar14;
      if (0x1e < uVar14 || uVar11 == 0) {
        return uVar4;
      }
      uVar13 = iVar1 >> (uVar14 & 0xff);
      bVar16 = CARRY4(uVar4,uVar13);
      uVar13 = uVar4 + uVar13;
      bVar15 = bVar16 == false && uVar8 != 0 || bVar16 == true;
      iVar1 = uVar8 - !bVar16;
    }
    if (-1 < iVar1) {
      iVar1 = uVar9 << (uVar11 & 0xff);
      if (-1 < iVar1) {
        return uVar13;
      }
      uVar13 = uVar13 + 1;
      if (uVar13 == 0 || iVar1 == -0x80000000) {
        if (uVar13 != 0) {
          uVar13 = uVar13 & 0xfffffffe;
        }
        return uVar13;
      }
      return uVar13;
    }
    uVar11 = uVar11 + 1 & 0xff;
    bVar16 = (bool)((byte)(uVar9 >> 0x20 - uVar11) & 1);
    bVar17 = uVar11 == 0 && bVar15 || uVar11 != 0 && bVar16;
    uVar4 = uVar13 * 2 + (uint)bVar17;
    iVar1 = iVar1 * 2 +
            (uint)(((uVar11 != 0 || !bVar15) && (uVar11 == 0 || !bVar16)) && CARRY4(uVar13,uVar13)
                  || bVar17 && uVar13 * 2 + 1 <= uVar13);
    uVar13 = iVar1 + uVar12 * 0x200000;
    bVar15 = (bool)((byte)(uVar13 >> 0x14) & 1);
    if (bVar15 && uVar13 >> 0x15 != 0) {
      uVar13 = -((int)(uVar9 << uVar11) >> 0x1f);
      uVar7 = uVar4 + uVar13;
      bVar15 = uVar7 == 0;
      if (!CARRY4(uVar4,uVar13)) {
        bVar15 = uVar9 << uVar11 == -0x80000000;
      }
      if (bVar15) {
        if (uVar7 != 0) {
          uVar7 = uVar7 & 0xfffffffe;
        }
        return uVar7;
      }
      return uVar7;
    }
    if (bVar15) {
      uVar4 = (uint)((byte)iVar1 & 1) << 0x1f | uVar4 >> 1;
      uVar13 = ((iVar1 >> 1) + (uVar7 & 0xfff00000)) * 2;
      if (uVar13 == 0 && uVar4 == 0) {
        return uVar4;
      }
      if (uVar13 < 0x200000) {
        return 0;
      }
      return uVar4;
    }
    if (iVar1 + 0x200000 == 0) {
      uVar13 = count_leading_zeroes(uVar4);
      iVar1 = uVar4 << (uVar13 & 0xff);
      if (iVar1 == 0) {
        return uVar4;
      }
      uVar4 = iVar1 << 0x15;
      iVar1 = ((uVar12 & 0xfffff7ff) - uVar13) + -0x17;
    }
    else {
      iVar10 = count_leading_zeroes(iVar1 + 0x200000);
      iVar1 = ((uVar12 & 0xfffff7ff) - (iVar10 - 0xbU)) + -2;
      uVar4 = uVar4 << (iVar10 - 0xbU & 0xff);
    }
    if (iVar1 < 0) {
      return 0;
    }
    return uVar4;
  }
  bVar15 = uVar4 < uVar13;
  uVar13 = uVar4 - uVar13;
  iVar1 = uVar7 - (uVar11 + bVar15);
  if ((!bVar15 || !CARRY4(uVar7,~uVar11)) && (bVar15 || uVar7 < uVar7 + ~uVar11 + 1)) {
    lVar20 = lVar20 + CONCAT44(iVar1,uVar13);
    bVar15 = uVar4 < uVar13;
    uVar4 = uVar4 - uVar13;
    uVar7 = uVar7 - (iVar1 + (uint)bVar15);
  }
  uVar11 = (uint)((ulonglong)lVar20 >> 0x20);
  uVar12 = (uint)lVar20;
  uVar13 = uVar7 >> 0x14;
  uVar14 = uVar13 - (uVar11 >> 0x14);
  bVar15 = (DAT_800393bc & uVar11 << 1) == 0;
  if (!bVar15) {
    bVar15 = DAT_800393bc == uVar13 << 0x15;
  }
  if (bVar15) {
    if (DAT_800393bc == uVar13 << 0x15) {
                    // WARNING: Subroutine does not return
      FUN_80039a08();
    }
    if ((uVar7 & DAT_800393bc >> 1) == 0) {
      uVar4 = 0;
    }
    return uVar4;
  }
  uVar9 = 0x20 - uVar14;
  uVar8 = uVar7 & ~(uVar7 & 0xfff00000);
  uVar11 = uVar11 & ~DAT_800393bc | 0x100000;
  if (uVar14 < 0x21) {
    uVar3 = uVar12 >> (uVar14 & 0xff);
    bVar15 = CARRY4(uVar4,uVar3);
    uVar3 = uVar4 + uVar3;
    uVar13 = uVar11 << (uVar9 & 0xff);
    uVar4 = uVar3 + uVar13;
    uVar11 = uVar8 + (uVar11 >> (uVar14 & 0xff)) + (uint)bVar15 + (uint)CARRY4(uVar3,uVar13);
    if (uVar11 < 0x100000) {
      uVar11 = uVar11 + (uVar7 & 0xfff00000);
LAB_800392e0:
      uVar12 = uVar12 << (uVar9 & 0xff);
      if (-1 < (int)uVar12) {
        return uVar4;
      }
      uVar13 = uVar4 + 1;
      uVar7 = uVar13;
      if (uVar4 != 0xffffffff) {
        uVar7 = uVar12 & 0x7fffffff;
      }
      if (uVar7 != 0) {
        return uVar13;
      }
      goto LAB_800392f8;
    }
  }
  else {
    uVar12 = uVar11 * 2 + (uint)(uVar12 != 0);
    uVar14 = uVar14 - 0x20;
    bVar15 = uVar14 < 0x20;
    uVar9 = 0x1f - uVar14;
    if (bVar15) {
      uVar11 = uVar11 >> (uVar14 & 0xff);
      bVar15 = CARRY4(uVar4,uVar11);
      uVar4 = uVar4 + uVar11;
    }
    else {
      uVar9 = 0;
    }
    uVar11 = uVar8 + (uVar7 & 0xfff00000) + (uint)bVar15;
    if (uVar13 == uVar11 >> 0x14) goto LAB_800392e0;
    uVar11 = uVar11 + uVar13 * -0x100000;
  }
  bVar15 = (bool)((byte)uVar4 & 1);
  uVar13 = (uint)((byte)(uVar11 + 0x100000) & 1) << 0x1f | uVar4 >> 1;
  uVar11 = (uVar11 + 0x100000 >> 1) + (uVar7 & 0xfff00000);
  if (bVar15) {
    bVar16 = uVar13 < uVar13 + 1;
    uVar13 = uVar13 + bVar15;
    uVar4 = uVar13;
    if (bVar15 != true || bVar16) {
      uVar4 = uVar12 << (uVar9 & 0xff);
    }
    if (uVar4 == 0) {
LAB_800392f8:
      if (uVar13 == 0) {
        uVar11 = uVar11 + 1;
      }
      else {
        uVar13 = uVar13 & 0xfffffffe;
      }
      if (0xffdfffff < uVar11 << 1) {
        return 0;
      }
      return uVar13;
    }
  }
  if (0xffdfffff < uVar11 * 2) {
    return 0;
  }
  return uVar13;
}



uint FUN_800319e4(uint *param_1,int param_2,undefined4 param_3,undefined4 param_4)

{
  undefined4 uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  uint uVar12;
  bool bVar13;
  bool bVar14;
  bool bVar15;
  undefined8 uVar16;
  
  uVar9 = param_2 - 1;
  uVar16 = *(undefined8 *)(param_1 + uVar9 * 2);
  while( true ) {
    uVar1 = (undefined4)((ulonglong)uVar16 >> 0x20);
    uVar4 = (uint)uVar16;
    if ((uVar9 & 0xfffffff9) == 0) break;
    uVar16 = FUN_80039890(uVar4,uVar1,param_3,param_4);
    uVar9 = uVar9 - 1;
    uVar16 = FUN_8003926c((int)uVar16,(int)((ulonglong)uVar16 >> 0x20),param_1[uVar9 * 2],
                          (param_1 + uVar9 * 2)[1]);
  }
  if (uVar9 != 2) {
    if (uVar9 != 4) {
      if (uVar9 != 6) {
        return uVar4;
      }
      uVar16 = FUN_80039890(uVar4,uVar1,param_3,param_4);
      uVar16 = FUN_8003926c((int)uVar16,(int)((ulonglong)uVar16 >> 0x20),param_1[10],param_1[0xb]);
      uVar16 = FUN_80039890((int)uVar16,(int)((ulonglong)uVar16 >> 0x20),param_3,param_4);
      uVar16 = FUN_8003926c((int)uVar16,(int)((ulonglong)uVar16 >> 0x20),param_1[8],param_1[9]);
    }
    uVar16 = FUN_80039890((int)uVar16,(int)((ulonglong)uVar16 >> 0x20),param_3,param_4);
    uVar16 = FUN_8003926c((int)uVar16,(int)((ulonglong)uVar16 >> 0x20),param_1[6],param_1[7]);
    uVar16 = FUN_80039890((int)uVar16,(int)((ulonglong)uVar16 >> 0x20),param_3,param_4);
    uVar16 = FUN_8003926c((int)uVar16,(int)((ulonglong)uVar16 >> 0x20),param_1[4],param_1[5]);
  }
  uVar16 = FUN_80039890((int)uVar16,(int)((ulonglong)uVar16 >> 0x20),param_3,param_4);
  uVar16 = FUN_8003926c((int)uVar16,(int)((ulonglong)uVar16 >> 0x20),param_1[2],param_1[3]);
  uVar16 = FUN_80039890((int)uVar16,(int)((ulonglong)uVar16 >> 0x20),param_3,param_4);
  uVar3 = (uint)((ulonglong)uVar16 >> 0x20);
  uVar4 = (uint)uVar16;
  uVar9 = *param_1;
  uVar7 = param_1[1];
  if ((int)(uVar3 ^ uVar7) < 0) {
    uVar7 = uVar7 ^ 0x80000000;
    bVar13 = uVar4 < uVar9;
    uVar8 = uVar4 - uVar9;
    if ((!bVar13 || !CARRY4(uVar3,~uVar7)) && (bVar13 || uVar3 < uVar3 + ~uVar7 + 1)) {
      bVar14 = CARRY4(uVar9,uVar8);
      uVar9 = uVar9 + uVar8;
      uVar11 = uVar3 - (uVar7 + bVar13) ^ 0x80000000;
      uVar7 = uVar7 + uVar11 + (uint)bVar14;
      uVar16 = CONCAT44(uVar3 - (uVar11 + (uVar4 < uVar8)),uVar4 - uVar8);
    }
    uVar8 = (uint)((ulonglong)uVar16 >> 0x20);
    uVar3 = (uint)uVar16;
    uVar4 = uVar8 >> 0x14;
    uVar11 = uVar4 - (uVar7 >> 0x14);
    bVar13 = (DAT_80039f70 & uVar7 << 1) == 0;
    if (!bVar13) {
      bVar13 = DAT_80039f70 == uVar4 << 0x15;
    }
    if (bVar13) {
      if (DAT_80039f70 == uVar4 << 0x15) {
                    // WARNING: Subroutine does not return
        FUN_80039a08();
      }
      if ((uVar8 & DAT_80039f70 >> 1) == 0) {
        uVar3 = 0;
      }
      return uVar3;
    }
    uVar12 = -uVar9;
    iVar10 = ((int)DAT_80039f70 >> 1) - ((uVar7 & ~((int)DAT_80039f70 >> 1)) + (uint)(uVar9 != 0));
    uVar7 = 0x20 - uVar11;
    uVar5 = uVar8 & ~(uVar8 & 0xfff00000);
    if (uVar11 < 0x21) {
      uVar2 = uVar12 >> (uVar11 & 0xff);
      uVar9 = uVar3 + uVar2;
      uVar11 = uVar5 + (iVar10 >> (uVar11 & 0xff)) + (uint)CARRY4(uVar3,uVar2);
      uVar3 = iVar10 << (uVar7 & 0xff);
      bVar14 = CARRY4(uVar9,uVar3);
      uVar9 = uVar9 + uVar3;
      bVar13 = bVar14 == true && uVar11 + 1 <= uVar11;
      iVar10 = uVar11 + bVar14;
    }
    else {
      uVar9 = uVar9 * -2;
      if (uVar9 != 0) {
        uVar9 = 1;
      }
      uVar11 = uVar11 - 0x20;
      uVar12 = uVar9 | (iVar10 * 2 + (uint)CARRY4(uVar12,uVar12)) * 2;
      uVar7 = 0x1e - uVar11;
      if (0x1e < uVar11 || uVar7 == 0) {
        return uVar3;
      }
      uVar9 = iVar10 >> (uVar11 & 0xff);
      bVar14 = CARRY4(uVar3,uVar9);
      uVar9 = uVar3 + uVar9;
      bVar13 = bVar14 == false && uVar5 != 0 || bVar14 == true;
      iVar10 = uVar5 - !bVar14;
    }
    if (-1 < iVar10) {
      iVar10 = uVar12 << (uVar7 & 0xff);
      if (-1 < iVar10) {
        return uVar9;
      }
      uVar9 = uVar9 + 1;
      if (uVar9 == 0 || iVar10 == -0x80000000) {
        if (uVar9 != 0) {
          uVar9 = uVar9 & 0xfffffffe;
        }
        return uVar9;
      }
      return uVar9;
    }
    uVar7 = uVar7 + 1 & 0xff;
    bVar14 = (bool)((byte)(uVar12 >> 0x20 - uVar7) & 1);
    bVar15 = uVar7 == 0 && bVar13 || uVar7 != 0 && bVar14;
    uVar3 = uVar9 * 2 + (uint)bVar15;
    iVar10 = iVar10 * 2 +
             (uint)(((uVar7 != 0 || !bVar13) && (uVar7 == 0 || !bVar14)) && CARRY4(uVar9,uVar9) ||
                   bVar15 && uVar9 * 2 + 1 <= uVar9);
    uVar9 = iVar10 + uVar4 * 0x200000;
    bVar13 = (bool)((byte)(uVar9 >> 0x14) & 1);
    if (bVar13 && uVar9 >> 0x15 != 0) {
      uVar9 = -((int)(uVar12 << uVar7) >> 0x1f);
      uVar4 = uVar3 + uVar9;
      bVar13 = uVar4 == 0;
      if (!CARRY4(uVar3,uVar9)) {
        bVar13 = uVar12 << uVar7 == -0x80000000;
      }
      if (bVar13) {
        if (uVar4 != 0) {
          uVar4 = uVar4 & 0xfffffffe;
        }
        return uVar4;
      }
      return uVar4;
    }
    if (bVar13) {
      uVar4 = (uint)((byte)iVar10 & 1) << 0x1f | uVar3 >> 1;
      uVar9 = ((iVar10 >> 1) + (uVar8 & 0xfff00000)) * 2;
      if (uVar9 == 0 && uVar4 == 0) {
        return uVar4;
      }
      if (uVar9 < 0x200000) {
        return 0;
      }
      return uVar4;
    }
    if (iVar10 + 0x200000 == 0) {
      uVar9 = count_leading_zeroes(uVar3);
      iVar10 = uVar3 << (uVar9 & 0xff);
      if (iVar10 == 0) {
        return uVar3;
      }
      uVar3 = iVar10 << 0x15;
      iVar10 = ((uVar4 & 0xfffff7ff) - uVar9) + -0x17;
    }
    else {
      iVar6 = count_leading_zeroes(iVar10 + 0x200000);
      iVar10 = ((uVar4 & 0xfffff7ff) - (iVar6 - 0xbU)) + -2;
      uVar3 = uVar3 << (iVar6 - 0xbU & 0xff);
    }
    if (iVar10 < 0) {
      return 0;
    }
    return uVar3;
  }
  bVar13 = uVar4 < uVar9;
  uVar8 = uVar4 - uVar9;
  iVar10 = uVar3 - (uVar7 + bVar13);
  if ((!bVar13 || !CARRY4(uVar3,~uVar7)) && (bVar13 || uVar3 < uVar3 + ~uVar7 + 1)) {
    bVar13 = CARRY4(uVar9,uVar8);
    uVar9 = uVar9 + uVar8;
    uVar7 = uVar7 + iVar10 + (uint)bVar13;
    uVar16 = CONCAT44(uVar3 - (iVar10 + (uint)(uVar4 < uVar8)),uVar4 - uVar8);
  }
  uVar8 = (uint)((ulonglong)uVar16 >> 0x20);
  uVar3 = (uint)uVar16;
  uVar4 = uVar8 >> 0x14;
  uVar11 = uVar4 - (uVar7 >> 0x14);
  bVar13 = (DAT_800393bc & uVar7 << 1) == 0;
  if (!bVar13) {
    bVar13 = DAT_800393bc == uVar4 << 0x15;
  }
  if (bVar13) {
    if (DAT_800393bc == uVar4 << 0x15) {
                    // WARNING: Subroutine does not return
      FUN_80039a08();
    }
    if ((uVar8 & DAT_800393bc >> 1) == 0) {
      uVar3 = 0;
    }
    return uVar3;
  }
  uVar12 = 0x20 - uVar11;
  uVar5 = uVar8 & ~(uVar8 & 0xfff00000);
  uVar7 = uVar7 & ~DAT_800393bc | 0x100000;
  if (uVar11 < 0x21) {
    uVar2 = uVar9 >> (uVar11 & 0xff);
    bVar13 = CARRY4(uVar3,uVar2);
    uVar2 = uVar3 + uVar2;
    uVar4 = uVar7 << (uVar12 & 0xff);
    uVar3 = uVar2 + uVar4;
    uVar7 = uVar5 + (uVar7 >> (uVar11 & 0xff)) + (uint)bVar13 + (uint)CARRY4(uVar2,uVar4);
    if (uVar7 < 0x100000) {
      uVar7 = uVar7 + (uVar8 & 0xfff00000);
LAB_800392e0:
      uVar9 = uVar9 << (uVar12 & 0xff);
      if (-1 < (int)uVar9) {
        return uVar3;
      }
      uVar4 = uVar3 + 1;
      uVar8 = uVar4;
      if (uVar3 != 0xffffffff) {
        uVar8 = uVar9 & 0x7fffffff;
      }
      if (uVar8 != 0) {
        return uVar4;
      }
      goto LAB_800392f8;
    }
  }
  else {
    uVar9 = uVar7 * 2 + (uint)(uVar9 != 0);
    uVar11 = uVar11 - 0x20;
    bVar13 = uVar11 < 0x20;
    uVar12 = 0x1f - uVar11;
    if (bVar13) {
      uVar7 = uVar7 >> (uVar11 & 0xff);
      bVar13 = CARRY4(uVar3,uVar7);
      uVar3 = uVar3 + uVar7;
    }
    else {
      uVar12 = 0;
    }
    uVar7 = uVar5 + (uVar8 & 0xfff00000) + (uint)bVar13;
    if (uVar4 == uVar7 >> 0x14) goto LAB_800392e0;
    uVar7 = uVar7 + uVar4 * -0x100000;
  }
  bVar13 = (bool)((byte)uVar3 & 1);
  uVar4 = (uint)((byte)(uVar7 + 0x100000) & 1) << 0x1f | uVar3 >> 1;
  uVar7 = (uVar7 + 0x100000 >> 1) + (uVar8 & 0xfff00000);
  if (bVar13) {
    bVar14 = uVar4 < uVar4 + 1;
    uVar4 = uVar4 + bVar13;
    uVar3 = uVar4;
    if (bVar13 != true || bVar14) {
      uVar3 = uVar9 << (uVar12 & 0xff);
    }
    if (uVar3 == 0) {
LAB_800392f8:
      if (uVar4 == 0) {
        uVar7 = uVar7 + 1;
      }
      else {
        uVar4 = uVar4 & 0xfffffffe;
      }
      if (0xffdfffff < uVar7 << 1) {
        return 0;
      }
      return uVar4;
    }
  }
  if (0xffdfffff < uVar7 * 2) {
    return 0;
  }
  return uVar4;
}



ulonglong FUN_80031ad4(uint param_1,uint param_2,undefined4 param_3,undefined4 param_4,int param_5)

{
  uint uVar1;
  ulonglong uVar2;
  int iVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  uint uVar6;
  uint uVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  uint uVar11;
  uint uVar12;
  int iVar13;
  int iVar14;
  uint uVar15;
  uint uVar16;
  uint uVar17;
  uint uVar18;
  bool bVar19;
  bool bVar20;
  bool bVar21;
  undefined8 uVar22;
  undefined8 uVar23;
  undefined8 uVar24;
  ulonglong uVar25;
  ulonglong uVar26;
  
  if ((param_2 & 0x7fffffff) < 0x3e400000) {
    iVar3 = FUN_80031328(param_1);
    if (iVar3 == 4) {
      FUN_80031c54();
    }
    return CONCAT44(param_2,param_1);
  }
  uVar22 = FUN_80039890(param_1,param_2,param_1,param_2);
  uVar8 = (undefined4)((ulonglong)uVar22 >> 0x20);
  uVar4 = (undefined4)uVar22;
  uVar22 = FUN_80039890(uVar4,uVar8,param_1,param_2);
  uVar9 = (undefined4)((ulonglong)uVar22 >> 0x20);
  uVar5 = (undefined4)uVar22;
  uVar22 = FUN_800319e4(DAT_80031c2c + -0x7ffce4ac,5,uVar4,uVar8);
  uVar10 = (undefined4)((ulonglong)uVar22 >> 0x20);
  if (param_5 == 0) {
    uVar22 = FUN_80039890(uVar4,uVar8,(int)uVar22,uVar10);
    uVar22 = FUN_8003926c((int)uVar22,(int)((ulonglong)uVar22 >> 0x20),DAT_80031c30,DAT_80031c34);
    uVar26 = FUN_80039890((int)uVar22,(int)((ulonglong)uVar22 >> 0x20),uVar5,uVar9);
    uVar2 = uVar26;
    if ((int)((uint)(uVar26 >> 0x20) ^ param_2) < 0) goto LAB_80039d84;
  }
  else {
    uVar23 = FUN_80039890(uVar5,uVar9,DAT_80031c30,DAT_80031c34);
    uVar22 = FUN_80039890(uVar5,uVar9,(int)uVar22,uVar10);
    uVar24 = FUN_8003a7ec(param_3,param_4,0xffffffff);
    uVar22 = FUN_80039d74((int)uVar24,(int)((ulonglong)uVar24 >> 0x20),(int)uVar22,
                          (int)((ulonglong)uVar22 >> 0x20));
    uVar22 = FUN_80039890((int)uVar22,(int)((ulonglong)uVar22 >> 0x20),uVar4,uVar8);
    uVar22 = FUN_80039d74((int)uVar22,(int)((ulonglong)uVar22 >> 0x20),param_3,param_4);
    uVar25 = FUN_80039d74((int)uVar22,(int)((ulonglong)uVar22 >> 0x20),(int)uVar23,
                          (int)((ulonglong)uVar23 >> 0x20));
    uVar2 = uVar25 ^ 0x8000000000000000;
    uVar26 = uVar25 ^ 0x8000000000000000;
    if (-1 < (int)((uint)(uVar25 >> 0x20) ^ param_2)) {
LAB_80039d84:
      uVar12 = (uint)(uVar2 >> 0x20);
      uVar6 = (uint)uVar2;
      param_2 = param_2 ^ 0x80000000;
      bVar19 = uVar6 < param_1;
      uVar16 = uVar6 - param_1;
      if ((!bVar19 || !CARRY4(uVar12,~param_2)) && (bVar19 || uVar12 < uVar12 + ~param_2 + 1)) {
        bVar20 = CARRY4(param_1,uVar16);
        param_1 = param_1 + uVar16;
        uVar17 = uVar12 - (param_2 + bVar19) ^ 0x80000000;
        param_2 = param_2 + uVar17 + (uint)bVar20;
        uVar2 = CONCAT44(uVar12 - (uVar17 + (uVar6 < uVar16)),uVar6 - uVar16);
      }
      uVar16 = (uint)(uVar2 >> 0x20);
      uVar12 = (uint)uVar2;
      uVar6 = uVar16 >> 0x14;
      uVar17 = uVar6 - (param_2 >> 0x14);
      bVar19 = (DAT_80039f70 & param_2 << 1) == 0;
      if (!bVar19) {
        bVar19 = DAT_80039f70 == uVar6 << 0x15;
      }
      if (bVar19) {
        if (DAT_80039f70 != uVar6 << 0x15) {
          if ((uVar16 & DAT_80039f70 >> 1) == 0) {
            uVar2 = 0;
          }
          return uVar2;
        }
                    // WARNING: Subroutine does not return
        FUN_80039a08();
      }
      uVar15 = -param_1;
      iVar3 = ((int)DAT_80039f70 >> 1) -
              ((param_2 & ~((int)DAT_80039f70 >> 1)) + (uint)(param_1 != 0));
      uVar18 = 0x20 - uVar17;
      uVar11 = uVar16 & ~(uVar16 & 0xfff00000);
      if (uVar17 < 0x21) {
        uVar1 = uVar15 >> (uVar17 & 0xff);
        uVar7 = uVar12 + uVar1;
        uVar17 = uVar11 + (iVar3 >> (uVar17 & 0xff)) + (uint)CARRY4(uVar12,uVar1);
        uVar12 = iVar3 << (uVar18 & 0xff);
        bVar20 = CARRY4(uVar7,uVar12);
        uVar7 = uVar7 + uVar12;
        bVar19 = bVar20 == true && uVar17 + 1 <= uVar17;
        iVar3 = uVar17 + bVar20;
      }
      else {
        param_1 = param_1 * -2;
        if (param_1 != 0) {
          param_1 = 1;
        }
        uVar17 = uVar17 - 0x20;
        uVar15 = param_1 | (iVar3 * 2 + (uint)CARRY4(uVar15,uVar15)) * 2;
        uVar18 = 0x1e - uVar17;
        if (0x1e < uVar17 || uVar18 == 0) {
          return uVar2 & 0xffffffff | (ulonglong)(uVar11 + (uVar16 & 0xfff00000)) << 0x20;
        }
        uVar7 = iVar3 >> (uVar17 & 0xff);
        bVar20 = CARRY4(uVar12,uVar7);
        uVar7 = uVar12 + uVar7;
        bVar19 = bVar20 == false && uVar11 != 0 || bVar20 == true;
        iVar3 = uVar11 - !bVar20;
      }
      if (-1 < iVar3) {
        iVar14 = uVar15 << (uVar18 & 0xff);
        iVar3 = iVar3 + (uVar16 & 0xfff00000);
        if (-1 < iVar14) {
          return CONCAT44(iVar3,uVar7);
        }
        uVar7 = uVar7 + 1;
        if (uVar7 != 0 && iVar14 != -0x80000000) {
          return CONCAT44(iVar3,uVar7);
        }
        if (uVar7 == 0) {
          iVar3 = iVar3 + 1;
        }
        else {
          uVar7 = uVar7 & 0xfffffffe;
        }
        return CONCAT44(iVar3,uVar7);
      }
      uVar12 = uVar18 + 1 & 0xff;
      bVar20 = (bool)((byte)(uVar15 >> 0x20 - uVar12) & 1);
      bVar21 = uVar12 == 0 && bVar19 || uVar12 != 0 && bVar20;
      uVar17 = uVar7 * 2 + (uint)bVar21;
      iVar3 = iVar3 * 2 +
              (uint)(((uVar12 != 0 || !bVar19) && (uVar12 == 0 || !bVar20)) && CARRY4(uVar7,uVar7)
                    || bVar21 && uVar7 * 2 + 1 <= uVar7);
      uVar18 = iVar3 + uVar6 * 0x200000;
      bVar19 = (bool)((byte)(uVar18 >> 0x14) & 1);
      if (bVar19 && uVar18 >> 0x15 != 0) {
        uVar6 = -((int)(uVar15 << uVar12) >> 0x1f);
        uVar18 = uVar17 + uVar6;
        bVar19 = uVar18 == 0;
        if (!CARRY4(uVar17,uVar6)) {
          bVar19 = uVar15 << uVar12 == -0x80000000;
        }
        iVar3 = iVar3 + (uVar16 & 0xfff00000);
        if (!bVar19) {
          return CONCAT44(iVar3,uVar18);
        }
        if (uVar18 == 0) {
          iVar3 = iVar3 + 1;
        }
        else {
          uVar18 = uVar18 & 0xfffffffe;
        }
        return CONCAT44(iVar3,uVar18);
      }
      if (!bVar19) {
        iVar3 = iVar3 + 0x200000;
        if (iVar3 == 0) {
          uVar15 = count_leading_zeroes(uVar17);
          uVar12 = uVar17 << (uVar15 & 0xff);
          if (uVar12 == 0) {
            return (ulonglong)uVar17;
          }
          iVar3 = uVar12 << 0x15;
          iVar14 = ((uVar6 & 0xfffff7ff) - uVar15) + -0x17;
          uVar12 = uVar12 >> 0xb;
        }
        else {
          iVar14 = count_leading_zeroes(iVar3);
          uVar15 = iVar14 - 0xb;
          iVar14 = ((uVar6 & 0xfffff7ff) - uVar15) + -2;
          uVar12 = iVar3 << (uVar15 & 0xff) | uVar17 >> (0x20 - uVar15 & 0xff);
          iVar3 = uVar17 << (uVar15 & 0xff);
        }
        iVar13 = uVar12 + (uVar16 & 0x80000000) + iVar14 * 0x100000;
        if (-1 < iVar14) {
          return CONCAT44(iVar13,iVar3);
        }
        return (ulonglong)(iVar13 + 0x60000000U & 0x80000000) << 0x20;
      }
      uVar12 = (iVar3 >> 1) + (uVar16 & 0xfff00000);
      uVar6 = (uint)((byte)iVar3 & 1) << 0x1f | uVar17 >> 1;
      if (uVar12 * 2 == 0 && uVar6 == 0) {
        return (ulonglong)uVar6;
      }
      if (0x1fffff < uVar12 * 2) {
        return CONCAT44(uVar12,uVar6);
      }
      return (ulonglong)(uVar12 & 0x80000000) << 0x20;
    }
  }
  uVar12 = (uint)(uVar26 >> 0x20);
  uVar6 = (uint)uVar26;
  bVar19 = uVar6 < param_1;
  uVar16 = uVar6 - param_1;
  iVar3 = uVar12 - (param_2 + bVar19);
  if ((!bVar19 || !CARRY4(uVar12,~param_2)) && (bVar19 || uVar12 < uVar12 + ~param_2 + 1)) {
    bVar19 = CARRY4(param_1,uVar16);
    param_1 = param_1 + uVar16;
    param_2 = param_2 + iVar3 + (uint)bVar19;
    uVar26 = CONCAT44(uVar12 - (iVar3 + (uint)(uVar6 < uVar16)),uVar6 - uVar16);
  }
  uVar16 = (uint)(uVar26 >> 0x20);
  uVar12 = (uint)uVar26;
  uVar6 = uVar16 >> 0x14;
  uVar17 = uVar6 - (param_2 >> 0x14);
  bVar19 = (DAT_800393bc & param_2 << 1) == 0;
  if (!bVar19) {
    bVar19 = DAT_800393bc == uVar6 << 0x15;
  }
  if (bVar19) {
    if (DAT_800393bc != uVar6 << 0x15) {
      if ((uVar16 & DAT_800393bc >> 1) == 0) {
        uVar26 = (ulonglong)(uVar16 & 0x80000000) << 0x20;
      }
      return uVar26;
    }
                    // WARNING: Subroutine does not return
    FUN_80039a08();
  }
  uVar18 = 0x20 - uVar17;
  uVar11 = uVar16 & ~(uVar16 & 0xfff00000);
  uVar15 = param_2 & ~DAT_800393bc | 0x100000;
  if (uVar17 < 0x21) {
    uVar7 = param_1 >> (uVar17 & 0xff);
    bVar19 = CARRY4(uVar12,uVar7);
    uVar7 = uVar12 + uVar7;
    uVar6 = uVar15 << (uVar18 & 0xff);
    uVar12 = uVar7 + uVar6;
    uVar17 = uVar11 + (uVar15 >> (uVar17 & 0xff)) + (uint)bVar19 + (uint)CARRY4(uVar7,uVar6);
    if (uVar17 < 0x100000) {
      uVar17 = uVar17 + (uVar16 & 0xfff00000);
      goto LAB_800392e0;
    }
LAB_80039340:
    bVar19 = (bool)((byte)uVar12 & 1);
    uVar6 = (uint)((byte)(uVar17 + 0x100000) & 1) << 0x1f | uVar12 >> 1;
    uVar17 = (uVar17 + 0x100000 >> 1) + (uVar16 & 0xfff00000);
    if (!bVar19) {
LAB_80039378:
      if (uVar17 * 2 < 0xffe00000) {
        return CONCAT44(uVar17,uVar6);
      }
      goto LAB_80039ac0;
    }
    bVar20 = uVar6 < uVar6 + 1;
    uVar6 = uVar6 + bVar19;
    uVar12 = uVar6;
    if (bVar19 != true || bVar20) {
      uVar12 = param_1 << (uVar18 & 0xff);
    }
    if (uVar12 != 0) goto LAB_80039378;
  }
  else {
    param_1 = uVar15 * 2 + (uint)(param_1 != 0);
    uVar17 = uVar17 - 0x20;
    bVar19 = uVar17 < 0x20;
    uVar18 = 0x1f - uVar17;
    if (bVar19) {
      uVar15 = uVar15 >> (uVar17 & 0xff);
      bVar19 = CARRY4(uVar12,uVar15);
      uVar12 = uVar12 + uVar15;
    }
    else {
      uVar18 = 0;
    }
    uVar17 = uVar11 + (uVar16 & 0xfff00000) + (uint)bVar19;
    if (uVar6 != uVar17 >> 0x14) {
      uVar17 = uVar17 + uVar6 * -0x100000;
      goto LAB_80039340;
    }
LAB_800392e0:
    param_1 = param_1 << (uVar18 & 0xff);
    if (-1 < (int)param_1) {
      return CONCAT44(uVar17,uVar12);
    }
    uVar6 = uVar12 + 1;
    uVar16 = uVar6;
    if (uVar12 != 0xffffffff) {
      uVar16 = param_1 & 0x7fffffff;
    }
    if (uVar16 != 0) {
      return CONCAT44(uVar17,uVar6);
    }
  }
  if (uVar6 == 0) {
    uVar17 = uVar17 + 1;
  }
  else {
    uVar6 = uVar6 & 0xfffffffe;
  }
  if (uVar17 << 1 < 0xffe00000) {
    return CONCAT44(uVar17,uVar6);
  }
LAB_80039ac0:
  return (ulonglong)(uVar17 + 0xa0000000 & 0x80000000 | 0x7ff00000) << 0x20;
}



// WARNING: Removing unreachable block (ram,0x8003a8b8)
// WARNING: Removing unreachable block (ram,0x8003a8cc)
// WARNING: Removing unreachable block (ram,0x8003a7b0)
// WARNING: Removing unreachable block (ram,0x8003a7ac)
// WARNING: Removing unreachable block (ram,0x8003a7b4)
// WARNING: Removing unreachable block (ram,0x8003a780)
// WARNING: Removing unreachable block (ram,0x8003a798)
// WARNING: Removing unreachable block (ram,0x8003a79c)
// WARNING: Removing unreachable block (ram,0x8003a7a0)
// WARNING: Removing unreachable block (ram,0x8003a7b8)
// WARNING: Removing unreachable block (ram,0x8003a7c0)
// WARNING: Removing unreachable block (ram,0x8003a7d4)
// WARNING: Removing unreachable block (ram,0x8003a8b0)
// WARNING: Removing unreachable block (ram,0x8003a8e4)
// WARNING: Removing unreachable block (ram,0x8003a8c0)

longlong FUN_80031c38(uint param_1,uint param_2)

{
  uint uVar1;
  uint uVar2;
  char in_OV;
  bool bVar3;
  bool bVar4;
  
  uVar2 = 0x7ff;
  uVar1 = param_2 >> 0x14 & 0x7ff;
  bVar4 = uVar1 == 0;
  if (!bVar4) {
    uVar2 = uVar1 ^ 0x7ff;
    bVar4 = uVar2 == 0;
  }
  bVar3 = false;
  if (!bVar4) {
    in_OV = SBORROW4(uVar2,1);
    bVar3 = (int)(uVar2 - 1) < 0;
    bVar4 = uVar2 == 1;
  }
  if (!bVar4 && bVar3 == (bool)in_OV) {
    in_OV = SCARRY4(uVar1,1);
    bVar4 = uVar1 == 0xffffffff;
    bVar3 = false;
  }
  if (!bVar4 && bVar3 == (bool)in_OV) {
    param_2 = param_2 + 0x100000;
  }
  if (!bVar4 && bVar3 == (bool)in_OV) {
    return CONCAT44(param_2,param_1);
  }
  if (uVar1 == 0) {
    return (ulonglong)(param_2 & 0x80000000) << 0x20;
  }
  if (uVar2 != 0) {
    return (ulonglong)(param_2 & 0x80000000 | 0x7ff00000) << 0x20;
  }
  if ((param_1 | param_2 << 0xc) != 0) {
    return (ulonglong)DAT_800393cc << 0x20;
  }
  return CONCAT44(param_2,param_1);
}



// WARNING: Removing unreachable block (ram,0x80039418)
// WARNING: Removing unreachable block (ram,0x80039440)
// WARNING: Removing unreachable block (ram,0x80039444)
// WARNING: Removing unreachable block (ram,0x8003958c)
// WARNING: Removing unreachable block (ram,0x800395cc)
// WARNING: Removing unreachable block (ram,0x80039410)
// WARNING: Removing unreachable block (ram,0x800395c0)
// WARNING: Removing unreachable block (ram,0x8003944c)
// WARNING: Removing unreachable block (ram,0x800394bc)
// WARNING: Removing unreachable block (ram,0x800394c0)
// WARNING: Removing unreachable block (ram,0x800394c4)
// WARNING: Removing unreachable block (ram,0x800394c8)
// WARNING: Removing unreachable block (ram,0x80039534)
// WARNING: Removing unreachable block (ram,0x80039564)
// WARNING: Removing unreachable block (ram,0x80039568)
// WARNING: Removing unreachable block (ram,0x80039578)
// WARNING: Removing unreachable block (ram,0x800394ec)
// WARNING: Removing unreachable block (ram,0x800394fc)
// WARNING: Removing unreachable block (ram,0x80039500)
// WARNING: Removing unreachable block (ram,0x80039504)
// WARNING: Removing unreachable block (ram,0x80039508)
// WARNING: Removing unreachable block (ram,0x8003950c)
// WARNING: Removing unreachable block (ram,0x80039510)
// WARNING: Removing unreachable block (ram,0x80039514)
// WARNING: Removing unreachable block (ram,0x80039518)
// WARNING: Removing unreachable block (ram,0x8003951c)
// WARNING: Removing unreachable block (ram,0x800395a0)
// WARNING: Removing unreachable block (ram,0x80039524)
// WARNING: Removing unreachable block (ram,0x80039ac0)

longlong FUN_80031c40(void)

{
  if (DAT_800396b4 == 0) {
                    // WARNING: Subroutine does not return
    FUN_80039a08();
  }
  return (ulonglong)DAT_800396b8 << 0x20;
}



// WARNING: Removing unreachable block (ram,0x8003a7ac)
// WARNING: Removing unreachable block (ram,0x8003a780)
// WARNING: Removing unreachable block (ram,0x800393c0)
// WARNING: Removing unreachable block (ram,0x8003a784)
// WARNING: Removing unreachable block (ram,0x8003a788)
// WARNING: Removing unreachable block (ram,0x8003a790)
// WARNING: Removing unreachable block (ram,0x8003a794)
// WARNING: Removing unreachable block (ram,0x8003a798)
// WARNING: Removing unreachable block (ram,0x8003a79c)
// WARNING: Removing unreachable block (ram,0x8003a7a0)
// WARNING: Removing unreachable block (ram,0x8003a7b8)
// WARNING: Removing unreachable block (ram,0x8003a7c0)
// WARNING: Removing unreachable block (ram,0x8003a7d4)
// WARNING: Removing unreachable block (ram,0x8003a7b0)
// WARNING: Removing unreachable block (ram,0x8003a7b4)
// WARNING: Removing unreachable block (ram,0x8003a8c0)
// WARNING: Removing unreachable block (ram,0x8003a8b8)
// WARNING: Removing unreachable block (ram,0x8003a8cc)
// WARNING: Removing unreachable block (ram,0x8003a8b0)
// WARNING: Removing unreachable block (ram,0x8003a8e4)
// WARNING: Removing unreachable block (ram,0x8003a848)
// WARNING: Removing unreachable block (ram,0x8003a834)
// WARNING: Removing unreachable block (ram,0x8003a840)

longlong FUN_80031c54(void)

{
  int iVar1;
  uint uVar2;
  bool bVar3;
  bool bVar4;
  
  uVar2 = 0x10000000;
  bVar4 = SBORROW4(0x6ff,DAT_80031c64);
  iVar1 = 0x6ff - DAT_80031c64;
  bVar3 = DAT_80031c64 == 0x6ff;
  if (DAT_80031c64 < 0x6ff) {
    bVar4 = SCARRY4(DAT_80031c64,0x100);
    iVar1 = DAT_80031c64 + 0x100;
    bVar3 = DAT_80031c64 == -0x100;
  }
  if (!bVar3 && iVar1 < 0 == bVar4) {
    uVar2 = DAT_80031c64 * 0x100000 + 0x10000000;
  }
  if (!bVar3 && iVar1 < 0 == bVar4) {
    return (ulonglong)uVar2 << 0x20;
  }
  uVar2 = uVar2 & 0x80000000;
  if (-1 < DAT_80031c64) {
    uVar2 = uVar2 | 0x7ff00000;
  }
  return (ulonglong)uVar2 << 0x20;
}



uint get_some_data(void)

{
  return DAT_80031c78;
}



int FUN_80031c7c(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  bool bVar4;
  bool bVar5;
  
  bVar4 = param_1 < 0;
  if (bVar4) {
    param_1 = -param_1;
  }
  bVar5 = param_2 < 0;
  if (bVar5) {
    param_2 = -param_2;
  }
  iVar1 = param_1;
  iVar2 = param_2;
  if (param_1 < param_2) {
    iVar1 = param_2;
    iVar2 = param_1;
  }
  iVar1 = divide_2(iVar2 * 0x400 + iVar1 / 2,iVar1);
  iVar2 = 0x10 - (iVar1 >> 2 & 0xfU);
  iVar3 = iVar2 * *(short *)(PTR_DAT_80031d2c + (iVar1 >> 6) * 2);
  if (iVar2 != 0x10) {
    iVar3 = (int)*(short *)((int)(PTR_DAT_80031d2c + (iVar1 >> 6) * 2) + 2) * (0x10 - iVar2) + iVar3
    ;
  }
  iVar1 = (int)(iVar3 + 8 + ((uint)(iVar3 + 8 >> 0x1f) >> 0x1c)) >> 4;
  if (param_1 < param_2) {
    iVar1 = 0x400 - iVar1;
  }
  if (bVar4) {
    iVar1 = 0x800 - iVar1;
  }
  if (bVar5) {
    iVar1 = 0x1000 - iVar1;
  }
  return iVar1;
}



// WARNING: Removing unreachable block (ram,0x8002a7d4)

void FUN_80031d30(int *param_1)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  undefined4 *puStack40;
  undefined4 uStack36;
  undefined4 uStack32;
  
  if (*param_1 == 0xe) {
    if (((undefined4 *)param_1[3])[1] != 1) {
      return;
    }
    if (*(int *)(DAT_80019824 + 8) == 0) {
      *(undefined4 *)(DAT_80019824 + 8) = *(undefined4 *)param_1[3];
    }
    if (*DAT_8001980c == (code *)0x0) {
      return;
    }
                    // WARNING: Could not recover jumptable at 0x80019808. Too many branches
                    // WARNING: Treating indirect jump as call
    (**DAT_8001980c)();
    return;
  }
  if (*param_1 == 0xf) {
    iVar1 = FUN_8002d2c0(param_1[1]);
    uVar3 = *(uint *)(DAT_80031da0 + iVar1 * 4);
    if (uVar3 != 0xfffffff) {
      set_display_fg2_color(uVar3);
      FUN_800186b0();
    }
  }
  iVar2 = *param_1;
  iVar1 = param_1[1];
  if (iVar2 != 0x17) {
    if (iVar2 < 0x18) {
      if (iVar2 == 0xe) {
        if (param_1 == (int *)0x0) {
          return;
        }
        save_context();
        iVar2 = FUN_8002a630(iVar1);
        if (iVar2 != 0) {
          param_1[2] = iVar1;
          FUN_8002b068(iVar2,param_1);
        }
        iVar1 = *(int *)(DAT_80019a84 + 0xc) + -1;
        *(int *)(DAT_80019a84 + 0xc) = iVar1;
        if (iVar1 != 0) {
          return;
        }
        return;
      }
      if (iVar2 == 0x14) {
        FUN_8002aabc();
      }
    }
    else {
      if (iVar2 == 0x22) {
        iVar1 = 0xfffffff;
        goto LAB_8002a5c0;
      }
      if (iVar2 == 0x28) {
        if (iVar1 != 0) {
          save_context();
          puStack40 = (undefined4 *)FUN_8001857c(iVar1);
          uVar3 = puStack40[10];
          if ((uVar3 & 2) != 0) {
            uStack36 = *puStack40;
            uStack32 = puStack40[1];
            if ((uVar3 & 0x10000) != 0) {
              FUN_8002aec8(iVar1);
            }
            iVar2 = FUN_8002aa38(&uStack36,iVar1);
            if (iVar2 != 0) {
              if ((DAT_8002a85c & uVar3) == 1) {
                FUN_8002b01c(&uStack36,puStack40[6],puStack40[8]);
              }
              else {
                FUN_8002aec0(iVar1,&uStack36);
              }
            }
          }
          FUN_800185cc(&puStack40);
          restore_context();
        }
        return;
      }
    }
    iVar1 = 0;
  }
LAB_8002a5c0:
  param_1[3] = iVar1;
  return;
}



void endless_loop(void)

{
  do {
                    // WARNING: Do nothing block with infinite loop
  } while( true );
}



void just_return(void)

{
  return;
}



void mmu_data_cache_enable(void)

{
  uint uVar1;
  
  uVar1 = mmu_read_control_reg();
  mmu_write_control_reg(uVar1 | 4);
  return;
}



void mmu_set_domain_access(uint domain_access)

{
  coproc_moveto_Domain_Access_Control(domain_access);
  return;
}



void mmu_instr_cache_enable(void)

{
  uint uVar1;
  
  uVar1 = mmu_read_control_reg();
  mmu_write_control_reg(uVar1 | 0x1000);
  return;
}



void mmu_enable(void)

{
  uint uVar1;
  
  uVar1 = mmu_read_control_reg();
  mmu_write_control_reg(uVar1 | 1);
  return;
}



uint mmu_read_control_reg(void)

{
  uint uVar1;
  
  uVar1 = coproc_movefrom_Control();
  return uVar1;
}



void mmu_clear_wb_tlb(void)

{
  undefined4 in_cr5;
  undefined4 in_cr6;
  undefined4 in_cr8;
  
  coproc_moveto_Data_Synchronization(0);
  coprocessor_moveto(0xf,0,0,0,in_cr8,in_cr6);
  coprocessor_moveto(0xf,0,0,0,in_cr8,in_cr5);
  return;
}



void mmu_set_base_address(uint base_address)

{
  coproc_moveto_Translation_table_base_0(base_address);
  return;
}



void mmu_write_control_reg(uint control_data)

{
  coproc_moveto_Control(control_data);
  return;
}



undefined8 FUN_80031e28(uint param_1,uint param_2)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  undefined uVar4;
  undefined8 uVar5;
  
  uVar3 = DAT_80031f40 + ((param_2 << 1) >> 0x15);
  if (0x13 < (int)uVar3) {
    uVar4 = 0x32 < uVar3;
    if (0x33 < (int)uVar3) {
      return CONCAT44(param_2,param_1);
    }
    uVar1 = 0xffffffff >> (uVar3 - 0x14 & 0xff);
    if ((param_1 & uVar1) == 0) {
      return CONCAT44(param_2,param_1);
    }
    uVar5 = FUN_80039b5c(param_1,param_2,DAT_80031f44,DAT_80031f48);
    FUN_80039ad0((int)uVar5,(int)((ulonglong)uVar5 >> 0x20),0,0);
    if (!(bool)uVar4) {
      uVar2 = param_1;
      if (0 < (int)param_2) {
        if (uVar3 == 0x14) {
          param_2 = param_2 + 1;
        }
        else {
          uVar2 = param_1 + (1 << (0x34 - uVar3 & 0xff));
          if (uVar2 < param_1) {
            param_2 = param_2 + 1;
          }
        }
      }
      param_1 = uVar2 & ~uVar1;
    }
    goto LAB_80031f34;
  }
  uVar4 = 1;
  if ((int)uVar3 < 0) {
    uVar5 = FUN_8003926c();
    FUN_80039ad0((int)uVar5,(int)((ulonglong)uVar5 >> 0x20),0,0);
    if ((bool)uVar4) goto LAB_80031f34;
    if ((int)param_2 < 0) {
      param_1 = 0;
      param_2 = 0x80000000;
      goto LAB_80031f34;
    }
    uVar3 = DAT_80031f4c;
    if ((param_2 | param_1) == 0) goto LAB_80031f34;
  }
  else {
    uVar1 = DAT_80031f50 >> (uVar3 & 0xff);
    uVar4 = 1;
    if ((param_2 & uVar1 | param_1) == 0) {
      return CONCAT44(param_2,param_1);
    }
    uVar5 = FUN_8003926c();
    FUN_80039ad0((int)uVar5,(int)((ulonglong)uVar5 >> 0x20),0,0);
    if ((bool)uVar4) goto LAB_80031f34;
    if (0 < (int)param_2) {
      param_2 = param_2 + (0x100000U >> (uVar3 & 0xff));
    }
    uVar3 = param_2 & ~uVar1;
  }
  param_1 = 0;
  param_2 = uVar3;
LAB_80031f34:
  return CONCAT44(param_2,param_1);
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4 FUN_800321e0(void)

{
  uint *puVar1;
  
  FUN_800376f8(s_U_clock_set_pll6___d_hz_80032232 + 2,_DAT_80032230);
  puVar1 = DAT_8003224c;
  *DAT_8003224c = *DAT_8003224c & 0x7fffffff;
  *puVar1 = *puVar1 & 0xfffff000;
  *puVar1 = *puVar1 | 0x1700;
  *puVar1 = *puVar1 | 0x80000000;
  return 0;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_80032250(int param_1,uint param_2)

{
  int iVar1;
  uint uVar2;
  bool bVar3;
  int local_18;
  undefined4 uStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  
  uVar2 = param_2 & 0x7fffffff;
  bVar3 = SCARRY4(uVar2,DAT_80032324);
  iVar1 = uVar2 + DAT_80032324;
  if (iVar1 == 0 || iVar1 < 0 != bVar3) {
    uVar2 = 0;
  }
  if (iVar1 == 0 || iVar1 < 0 != bVar3) {
LAB_800322ec:
    FUN_8003186c(param_1);
    return;
  }
  if (uVar2 == DAT_80032328) {
    if (param_1 == 0) {
      FUN_80000bee(1);
      FUN_80031c40();
      return;
    }
  }
  else {
    if ((int)uVar2 < (int)DAT_80032328) {
      uVar2 = FUN_80031358(param_1,param_2,&local_18);
      uVar2 = uVar2 & 3;
      param_1 = local_18;
      if (uVar2 != 0) {
        if (uVar2 == 1) {
          FUN_80031ad4(local_18,uStack20,uStack16,uStack12,1);
        }
        else {
          if (uVar2 != 2) {
            FUN_80031ad4(local_18,uStack20,uStack16,uStack12,1);
            return;
          }
          FUN_8003186c(local_18,uStack20,uStack16,uStack12);
        }
        return;
      }
      goto LAB_800322ec;
    }
  }
  FUN_80031c38();
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffe8 : 0x800323b4
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_8003232c(int *param_1,int *param_2)

{
  uint uVar1;
  int *piVar2;
  int iVar3;
  uint uVar4;
  int *piVar5;
  uint uVar6;
  int *piVar7;
  int *piVar8;
  int iVar9;
  code *in_lr;
  bool bVar10;
  undefined8 uVar11;
  code *UNRECOVERED_JUMPTABLE_00;
  
  iVar9 = *param_1;
  UNRECOVERED_JUMPTABLE_00 = in_lr;
  if (param_2 == (int *)0x0) {
    piVar7 = *(int **)(iVar9 + 0x10);
    bVar10 = piVar7 != (int *)0x0;
    piVar2 = param_1;
    if (bVar10) {
      piVar2 = *(int **)(iVar9 + 0x18);
    }
    if (bVar10 && piVar2 < piVar7 || (!bVar10 || piVar2 == piVar7)) {
      piVar7 = (int *)0x1;
    }
  }
  else {
    uVar1 = FUN_800351e0();
    if (uVar1 < 2) {
                    // WARNING: Could not recover jumptable at 0x80032354. Too many branches
                    // WARNING: Treating indirect jump as call
      (*UNRECOVERED_JUMPTABLE_00)();
      return;
    }
    if (uVar1 == 0xffffffff) {
                    // WARNING: Could not recover jumptable at 0x80032360. Too many branches
                    // WARNING: Treating indirect jump as call
      (*UNRECOVERED_JUMPTABLE_00)();
      return;
    }
    piVar7 = param_2;
    if (uVar1 < *(uint *)(iVar9 + 0x18)) {
                    // WARNING: Could not recover jumptable at 0x80032374. Too many branches
                    // WARNING: Treating indirect jump as call
      (*UNRECOVERED_JUMPTABLE_00)();
      return;
    }
  }
  if (*(int *)(iVar9 + 0x14) == 0) {
                    // WARNING: Could not recover jumptable at 0x80032384. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)();
    return;
  }
  piVar2 = piVar7;
  if (piVar7 == param_2) {
    piVar8 = (int *)((int)piVar7 + 1);
    if (*(int **)(iVar9 + 0x18) <= piVar8) {
      piVar8 = (int *)0x2;
    }
    uVar11 = FUN_800351e0(param_1,piVar8);
    piVar5 = (int *)((ulonglong)uVar11 >> 0x20);
    iVar3 = (int)uVar11;
    if (iVar3 == 1 || iVar3 == -1) {
                    // WARNING: Could not recover jumptable at 0x800323b8. Too many branches
                    // WARNING: Treating indirect jump as call
      (*UNRECOVERED_JUMPTABLE_00)();
      return;
    }
    if (iVar3 == 0) {
      if (piVar8 != (int *)0x0) {
LAB_80032454:
        iVar3 = FUN_80035d5c(iVar9,piVar8,0xffffffff);
        if ((iVar3 == 0) &&
           ((param_2 == (int *)0x0 || (iVar3 = FUN_80035d5c(iVar9,param_2,piVar8), iVar3 == 0)))) {
          uVar4 = *(uint *)(iVar9 + 0x14);
          uVar6 = *(int *)(iVar9 + 0x18) - 2;
          uVar1 = uVar4;
          if (uVar4 <= uVar6) {
            uVar1 = uVar4 - 1;
          }
          *(int **)(iVar9 + 0x10) = piVar8;
          if (uVar4 <= uVar6) {
            *(uint *)(iVar9 + 0x14) = uVar1;
          }
          *(byte *)(iVar9 + 4) = *(byte *)(iVar9 + 4) | 1;
        }
        else {
          if (iVar3 == 1) {
            piVar8 = (int *)0xffffffff;
          }
          else {
            piVar8 = (int *)0x1;
          }
        }
                    // WARNING: Could not recover jumptable at 0x800324a0. Too many branches
                    // WARNING: Treating indirect jump as call
        (**(code **)(&stack0xffffffe8 + 0x14))(piVar8);
        return;
      }
    }
    else {
      piVar8 = *(int **)(iVar9 + 0x10);
      bVar10 = piVar8 == (int *)0x2;
      if ((int *)0x1 < piVar8) {
        piVar5 = *(int **)(iVar9 + 0x18);
        bVar10 = piVar5 == piVar8;
      }
      if (((int *)0x1 < piVar8 && piVar8 <= piVar5) && !bVar10) {
        piVar7 = piVar8;
        piVar2 = piVar8;
      }
    }
  }
  do {
    piVar8 = (int *)((int)piVar2 + 1);
    if ((*(int **)(iVar9 + 0x18) <= piVar8) && (piVar8 = (int *)0x2, piVar7 < (int *)0x2)) break;
    iVar3 = FUN_800351e0(param_1,piVar8);
    if (iVar3 == 0) goto LAB_80032454;
    if (iVar3 == 1 || iVar3 == -1) {
                    // WARNING: Could not recover jumptable at 0x8003243c. Too many branches
                    // WARNING: Treating indirect jump as call
      (**(code **)(&stack0xffffffe8 + 0x14))();
      return;
    }
    piVar2 = piVar8;
  } while (piVar8 != piVar7);
                    // WARNING: Could not recover jumptable at 0x80032450. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(&stack0xffffffe8 + 0x14))(0);
  return;
}



void FUN_800324d0(int param_1)

{
  uint local_c;
  uint local_8;
  
  local_8 = 0;
  while (local_8 < (uint)(param_1 * DAT_80032530)) {
    local_c = 0;
    while (local_c < 0x14) {
      local_c = local_c + 1;
    }
    local_8 = local_8 + 1;
  }
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

int FUN_80032534(int *param_1)

{
  byte *pbVar1;
  byte bVar2;
  undefined *puVar3;
  byte bVar4;
  byte bVar5;
  short sVar6;
  short sVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  int *piVar12;
  byte bVar13;
  byte *pbVar14;
  byte *pbVar15;
  uint uVar16;
  uint uVar17;
  bool bVar18;
  uint uStack44;
  
  iVar8 = *param_1;
  iVar9 = FUN_80033064(param_1,0);
  puVar3 = PTR_DAT_800327c4;
  if (iVar9 != 0) {
    return iVar9;
  }
  uStack44 = 0xff;
  param_1[0xb] = -1;
  bVar5 = 0xff;
  do {
    iVar9 = FUN_80035ca8(iVar8,param_1[6]);
    if (iVar9 != 0) {
      return iVar9;
    }
    pbVar15 = (byte *)param_1[7];
    bVar13 = *pbVar15;
    if (bVar13 == 0) {
      return 4;
    }
    bVar2 = pbVar15[0xb];
    bVar4 = bVar2 & 0x3f;
    *(byte *)((int)param_1 + 6) = bVar4;
    if (bVar13 == 0xe5) {
LAB_80032790:
      bVar5 = 0xff;
      param_1[0xb] = -1;
    }
    else {
      if ((bVar2 & 8) == 0) {
        if (bVar4 != 0xf) {
          if (bVar5 == 0) {
            uVar16 = (uint)*pbVar15;
            iVar9 = 5;
            pbVar14 = pbVar15;
            do {
              pbVar1 = pbVar14 + 1;
              pbVar14 = pbVar14 + 2;
              uVar16 = (uVar16 >> 1) + uVar16 * 0x80 + (uint)*pbVar1 & 0xff;
              iVar9 = iVar9 + -1;
              uVar16 = (uVar16 >> 1) + uVar16 * 0x80 + (uint)*pbVar14 & 0xff;
            } while (iVar9 != 0);
            if (uVar16 == uStack44) {
              return 0;
            }
          }
          if ((*(byte *)((int)param_1 + 0x2b) & 1) == 0) {
            iVar9 = 0xb;
            piVar12 = param_1 + 8;
            do {
              bVar5 = *pbVar15;
              bVar13 = *(byte *)piVar12;
              iVar9 = iVar9 + -1;
              if (iVar9 == 0) {
                if (bVar5 == bVar13) {
                  return 0;
                }
                break;
              }
              piVar12 = (int *)((int)piVar12 + 1);
              pbVar15 = pbVar15 + 1;
            } while (bVar5 == bVar13);
          }
          goto LAB_80032790;
        }
      }
      else {
        if (bVar4 != 0xf) goto LAB_80032790;
      }
      if ((*(byte *)((int)param_1 + 0x2b) & 0x40) == 0) {
        if ((bVar13 & 0x40) != 0) {
          uStack44 = (uint)pbVar15[0xd];
          bVar13 = bVar13 & 0xbf;
          param_1[0xb] = param_1[4];
          bVar5 = bVar13;
        }
        if (((bVar13 == bVar5) && (pbVar15[0xd] == uStack44)) &&
           (iVar9 = *(int *)(iVar8 + 0xc), *(short *)(pbVar15 + 0x1a) == 0)) {
          uVar17 = 0;
          uVar16 = ((*pbVar15 & 0x3f) - 1) * 0xd;
          sVar6 = 1;
          do {
            sVar7 = *(short *)(pbVar15 + (byte)puVar3[uVar17]);
            if (sVar6 == 0) {
              bVar18 = sVar7 != -1;
              sVar7 = sVar6;
              if (bVar18) goto LAB_800326f0;
            }
            else {
              if (0xfe < uVar16) goto LAB_800326f0;
              iVar10 = FUN_80034454(sVar7);
              iVar11 = uVar16 * 2;
              uVar16 = uVar16 + 1;
              iVar11 = FUN_80034454(*(undefined2 *)(iVar9 + iVar11));
              if (iVar10 != iVar11) goto LAB_800326f0;
            }
            uVar17 = uVar17 + 1;
            sVar6 = sVar7;
          } while (uVar17 < 0xd);
          if (((*pbVar15 & 0x40) == 0 || sVar7 == 0) || (*(short *)(iVar9 + uVar16 * 2) == 0)) {
            bVar5 = bVar5 - 1;
            goto LAB_800327a0;
          }
        }
LAB_800326f0:
        bVar5 = 0xff;
      }
    }
LAB_800327a0:
    iVar9 = FUN_800327c8(param_1,0);
    if (iVar9 != 0) {
      return iVar9;
    }
  } while( true );
}



void FUN_800327c8(int *param_1,int param_2)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  code *pcStack4;
  
  uVar5 = param_1[4] + 0x20;
  iVar4 = *param_1;
  if (param_1[6] == 0 || 0x1fffff < uVar5) {
                    // WARNING: Could not recover jumptable at 0x800327fc. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(&stack0xffffffec + 0x10))();
    return;
  }
  if ((uVar5 & 0x1ff) == 0) {
    param_1[6] = param_1[6] + 1;
    if (param_1[5] == 0) {
      if ((uint)*(ushort *)(iVar4 + 8) <= uVar5 >> 5) {
LAB_800328d0:
        param_1[6] = 0;
                    // WARNING: Could not recover jumptable at 0x800328e0. Too many branches
                    // WARNING: Treating indirect jump as call
        (**(code **)(&stack0xffffffd8 + 0x24))(4);
        return;
      }
    }
    else {
      if ((*(ushort *)(iVar4 + 10) - 1 & uVar5 >> 9) == 0) {
        uVar1 = FUN_800351e0(param_1);
        if (uVar1 < 2) {
LAB_800328e4:
                    // WARNING: Could not recover jumptable at 0x800328f0. Too many branches
                    // WARNING: Treating indirect jump as call
          (**(code **)(&stack0xffffffd8 + 0x24))(2);
          return;
        }
        if (uVar1 == 0xffffffff) goto LAB_800329ac;
        if (*(uint *)(iVar4 + 0x18) <= uVar1) {
          if (param_2 == 0) goto LAB_800328d0;
          uVar1 = FUN_8003232c(param_1,param_1[5]);
          if (uVar1 == 0) {
                    // WARNING: Could not recover jumptable at 0x80032890. Too many branches
                    // WARNING: Treating indirect jump as call
            (**(code **)(&stack0xffffffd8 + 0x24))(7);
            return;
          }
          if (uVar1 == 1) goto LAB_800328e4;
          if (uVar1 == 0xffffffff) {
LAB_800329ac:
                    // WARNING: Could not recover jumptable at 0x800329b8. Too many branches
                    // WARNING: Treating indirect jump as call
            (**(code **)(&stack0xffffffd8 + 0x24))(1);
            return;
          }
          if (*(char *)(iVar4 + 3) != '\0') {
            iVar2 = FUN_80033320(*(undefined *)(iVar4 + 1),iVar4 + 0x34,
                                 *(undefined4 *)(iVar4 + 0x30),1);
            if (iVar2 != 0) goto LAB_800329ac;
            *(undefined *)(iVar4 + 3) = 0;
            if (((uint)(*(int *)(iVar4 + 0x30) - *(int *)(iVar4 + 0x24)) < *(uint *)(iVar4 + 0x1c))
               && (*(char *)(iVar4 + 2) == '\x02')) {
              FUN_80033320(*(undefined *)(iVar4 + 1),iVar4 + 0x34,
                           *(uint *)(iVar4 + 0x1c) + *(int *)(iVar4 + 0x30),1);
            }
          }
          if (uVar1 - 2 < *(int *)(iVar4 + 0x18) - 2U) {
            iVar2 = (uint)*(ushort *)(iVar4 + 10) * (uVar1 - 2) + *(int *)(iVar4 + 0x2c);
          }
          else {
            iVar2 = 0;
          }
          *(int *)(iVar4 + 0x30) = iVar2;
          FUN_8003558c(iVar4 + 0x34,0,0x200);
          uVar6 = 0;
          while ((uVar6 < *(ushort *)(iVar4 + 10) &&
                 (iVar3 = FUN_80033320(*(undefined *)(iVar4 + 1),iVar4 + 0x34,iVar2 + uVar6,1),
                 iVar3 == 0))) {
            uVar6 = uVar6 + 1;
          }
          if (*(ushort *)(iVar4 + 10) != uVar6) goto LAB_800329ac;
        }
        param_1[5] = uVar1;
        if (uVar1 - 2 < *(int *)(iVar4 + 0x18) - 2U) {
          iVar2 = (uint)*(ushort *)(iVar4 + 10) * (uVar1 - 2) + *(int *)(iVar4 + 0x2c);
        }
        else {
          iVar2 = 0;
        }
        param_1[6] = iVar2;
      }
    }
  }
  param_1[4] = uVar5;
  param_1[7] = (uVar5 & 0x1ff) + iVar4 + 0x34;
                    // WARNING: Could not recover jumptable at 0x80032a0c. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(&stack0xffffffd8 + 0x24))(0);
  return;
}



uint FUN_80032a10(int *param_1,uint param_2)

{
  int iVar1;
  byte *pbVar2;
  byte bVar3;
  byte bVar4;
  short sVar5;
  byte *pbVar6;
  short sVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  undefined *unaff_r5;
  uint uVar11;
  uint uVar12;
  int iVar13;
  int iVar14;
  int *piVar15;
  
  iVar13 = *param_1;
  if (param_1[6] != 0) {
    unaff_r5 = PTR_DAT_80032c20;
  }
  uVar11 = 0xff;
  uVar8 = 4;
  uVar12 = 0xff;
  piVar15 = param_1;
  if (param_1[6] != 0) {
    while (uVar8 = FUN_80035ca8(iVar13,param_1[6]), uVar8 == 0) {
      pbVar6 = (byte *)param_1[7];
      bVar3 = *pbVar6;
      uVar9 = (uint)bVar3;
      if (uVar9 == 0) {
        uVar8 = 4;
        break;
      }
      bVar4 = pbVar6[0xb];
      uVar10 = bVar4 & 0x3f;
      *(char *)((int)param_1 + 6) = (char)uVar10;
      if ((uVar9 == 0xe5 || uVar9 == 0x2e) || (((bVar4 & 0x1f) == 8) != param_2)) {
        uVar11 = 0xff;
      }
      else {
        if (uVar10 != 0xf) {
          if (uVar11 == 0) {
            uVar8 = (uint)*pbVar6;
            iVar13 = 5;
            do {
              pbVar2 = pbVar6 + 1;
              pbVar6 = pbVar6 + 2;
              uVar8 = (uVar8 >> 1) + uVar8 * 0x80 + (uint)*pbVar2 & 0xff;
              iVar13 = iVar13 + -1;
              uVar8 = (uVar8 >> 1) + uVar8 * 0x80 + (uint)*pbVar6 & 0xff;
            } while (iVar13 != 0);
            if (uVar8 == uVar12) {
              return 0;
            }
          }
          param_1[0xb] = -1;
          return 0;
        }
        if ((bVar3 & 0x40) != 0) {
          uVar8 = param_1[4];
          uVar12 = (uint)pbVar6[0xd];
          uVar9 = uVar9 & 0xbf;
          param_1[0xb] = uVar8;
          uVar11 = uVar9;
        }
        if (uVar9 == uVar11) {
          uVar8 = (uint)pbVar6[0xd];
        }
        if (uVar9 != uVar11 || uVar8 != uVar12) {
LAB_80032b98:
          uVar11 = 0xff;
        }
        else {
          uVar9 = (uint)pbVar6[0x1a];
          iVar14 = *(int *)(iVar13 + 0xc);
          if (*(short *)(pbVar6 + 0x1a) != 0) goto LAB_80032b98;
          sVar7 = 1;
          uVar10 = 0;
          uVar9 = ((*pbVar6 & 0xffffffbf) - 1) * 0xd;
          do {
            sVar5 = *(short *)(pbVar6 + (byte)unaff_r5[uVar10]);
            if (sVar7 == 0) {
              if (sVar5 != -1) goto LAB_80032b98;
            }
            else {
              if (0xfe < uVar9) goto LAB_80032b98;
              iVar1 = uVar9 * 2;
              uVar9 = uVar9 + 1;
              *(short *)(iVar14 + iVar1) = sVar5;
              sVar7 = sVar5;
            }
            uVar10 = uVar10 + 1;
          } while (uVar10 < 0xd);
          if ((*pbVar6 & 0x40) != 0) {
            if (0xfe < uVar9) goto LAB_80032b98;
            *(undefined2 *)(iVar14 + uVar9 * 2) = 0;
          }
          uVar11 = uVar11 - 1;
        }
        uVar11 = uVar11 & 0xff;
      }
      uVar8 = FUN_800327c8(param_1,0,uVar9,uVar10,piVar15);
      if (uVar8 != 0) break;
      if (param_1[6] == 0) {
        return 0;
      }
    }
  }
  param_1[6] = 0;
  return uVar8;
}



int FUN_80032c24(int *param_1)

{
  byte *pbVar1;
  byte bVar2;
  ushort uVar3;
  undefined *puVar4;
  int *piVar5;
  char cVar6;
  int iVar7;
  uint uVar8;
  char *pcVar9;
  uint uVar10;
  uint uVar11;
  undefined uVar12;
  undefined *puVar13;
  int iVar14;
  uint uVar15;
  int iVar16;
  ushort *puVar17;
  uint uVar18;
  int iVar19;
  int iVar20;
  uint uVar21;
  undefined auStack64 [11];
  byte bStack53;
  undefined4 uStack52;
  char acStack48 [12];
  
  iVar14 = *param_1;
  if ((*(byte *)((int)param_1 + 0x2b) & 0xa0) != 0) {
    return 6;
  }
  iVar20 = 0;
  while (*(short *)(*(int *)(iVar14 + 0xc) + iVar20 * 2) != 0) {
    iVar20 = iVar20 + 1;
  }
  FUN_80035518(auStack64,param_1 + 8,0xc);
  if ((bStack53 & 1) != 0) {
    uVar18 = 1;
    *(undefined *)((int)param_1 + 0x2b) = 0x40;
LAB_80032c98:
    piVar5 = param_1 + 8;
    puVar17 = *(ushort **)(iVar14 + 0xc);
    FUN_80035518(piVar5,auStack64);
    uVar15 = uVar18;
    if (5 < uVar18) {
      uVar3 = *puVar17;
      while (uVar8 = (uint)uVar3, uVar8 != 0) {
        iVar7 = 0x10;
        puVar17 = puVar17 + 1;
        do {
          uVar15 = (uVar8 & 1) + uVar15 * 2;
          if ((uVar15 & 0x10000) != 0) {
            uVar15 = uVar15 ^ 0x11021;
          }
          iVar7 = iVar7 + -1;
          uVar8 = uVar8 >> 1;
        } while (iVar7 != 0);
        uVar3 = *puVar17;
      }
    }
    uVar8 = 7;
    do {
      uVar21 = uVar8;
      uVar8 = (uVar15 & 0xf) + 0x30;
      cVar6 = (char)uVar8;
      if (0x39 < uVar8) {
        cVar6 = (char)(uVar15 & 0xf) + '7';
      }
      acStack48[uVar21] = cVar6;
      uVar15 = uVar15 >> 4;
      uVar8 = uVar21 - 1;
    } while (uVar15 != 0);
    uVar15 = 0;
    acStack48[uVar8] = '~';
    do {
      if ((uVar8 <= uVar15) || (bVar2 = *(byte *)((int)piVar5 + uVar15), bVar2 == 0x20))
      goto LAB_80032d70;
      if ((0x80 < bVar2) && (bVar2 != 0xff)) {
        if (uVar15 == uVar21 - 2) goto LAB_80032d70;
        uVar15 = uVar15 + 1;
      }
      uVar15 = uVar15 + 1;
    } while( true );
  }
LAB_80032df0:
  if ((bStack53 & 2) == 0) {
    iVar20 = 1;
  }
  else {
    iVar20 = (uint)((ulonglong)(iVar20 + 0xc) * (ulonglong)DAT_80033058 >> 0x22) + 1;
  }
  iVar19 = *param_1;
  iVar7 = FUN_80033064(param_1,0);
  if (iVar7 == 0) {
    iVar16 = 0;
    do {
      iVar7 = FUN_80035ca8(iVar19,param_1[6]);
      if (iVar7 != 0) break;
      if (*(char *)param_1[7] == -0x1b || *(char *)param_1[7] == '\0') {
        iVar16 = iVar16 + 1;
        if (iVar16 == iVar20) {
          uVar18 = iVar20 - 1;
          if (uVar18 == 0) {
LAB_80032ffc:
            iVar20 = FUN_80035ca8(iVar14,param_1[6]);
            if (iVar20 != 0) {
              return iVar20;
            }
            FUN_8003558c(param_1[7],0,0x20);
            FUN_80035518(param_1[7],param_1 + 8,0xb);
            *(byte *)(param_1[7] + 0xc) = *(byte *)((int)param_1 + 0x2b) & 0x18;
            *(undefined *)(iVar14 + 3) = 1;
            return 0;
          }
          iVar20 = FUN_80033064(param_1,param_1[4] + uVar18 * -0x20);
          uVar15 = DAT_8003305c;
          if (iVar20 != 0) {
            return iVar20;
          }
          uStack52 = (uint)*(byte *)(param_1 + 8);
          piVar5 = param_1 + 8;
          iVar20 = 5;
          do {
            pbVar1 = (byte *)((int)piVar5 + 1);
            piVar5 = (int *)((int)piVar5 + 2);
            uVar8 = (uStack52 >> 1) + uStack52 * 0x80 + (uint)*pbVar1 & 0xff;
            iVar20 = iVar20 + -1;
            uStack52 = (uVar8 >> 1) + uVar8 * 0x80 + (uint)*(byte *)piVar5 & 0xff;
          } while (iVar20 != 0);
LAB_80032f28:
          iVar20 = FUN_80035ca8(iVar14,param_1[6]);
          if (iVar20 != 0) {
            return iVar20;
          }
          puVar13 = (undefined *)param_1[7];
          iVar7 = *(int *)(iVar14 + 0xc);
          puVar13[0xd] = (char)uStack52;
          puVar13[0xb] = 0xf;
          puVar13[0xc] = 0;
          puVar13[0x1a] = 0;
          uVar21 = uVar18 & 0xff;
          puVar13[0x1b] = 0;
          puVar4 = PTR_DAT_80033060;
          iVar20 = (uVar21 - 1) * 0xd;
          uVar8 = 0;
          do {
            iVar19 = iVar20 * 2;
            iVar20 = iVar20 + 1;
            uVar10 = (uint)*(ushort *)(iVar7 + iVar19);
            do {
              bVar2 = puVar4[uVar8];
              puVar13[bVar2] = (char)uVar10;
              uVar11 = uVar10;
              if (uVar10 == 0) {
                uVar11 = uVar15;
              }
              uVar8 = uVar8 + 1;
              (puVar13 + bVar2)[1] = (char)(uVar10 >> 8);
              if (0xc < uVar8) {
                if ((uVar11 == uVar15) || (*(short *)(iVar7 + iVar20 * 2) == 0)) {
                  uVar21 = uVar21 | 0x40;
                }
                *puVar13 = (char)uVar21;
                *(undefined *)(iVar14 + 3) = 1;
                iVar20 = FUN_800327c8(param_1,0);
                if (iVar20 != 0) {
                  return iVar20;
                }
                uVar18 = uVar18 - 1;
                if (uVar18 != 0) goto LAB_80032f28;
                goto LAB_80032ffc;
              }
              uVar10 = uVar11;
            } while (uVar11 == uVar15);
          } while( true );
        }
      }
      else {
        iVar16 = 0;
      }
      iVar7 = FUN_800327c8(param_1,1);
    } while (iVar7 == 0);
  }
  if (iVar7 == 4) {
    iVar7 = 7;
  }
  return iVar7;
LAB_80032d70:
  if (uVar8 < 8) {
    uVar12 = 0x7e;
  }
  else {
    uVar12 = 0x20;
  }
  *(undefined *)((int)piVar5 + uVar15) = uVar12;
  if (uVar8 < 8) {
    uVar8 = uVar21;
  }
  uVar15 = uVar15 + 1;
  if ((uVar15 < 8) && (0 < (int)(8 - uVar15))) {
    iVar7 = 8 - uVar15;
    pcVar9 = (char *)((int)piVar5 + uVar15);
    do {
      if (uVar8 < 8) {
        cVar6 = acStack48[uVar8];
        uVar8 = uVar8 + 1;
      }
      else {
        cVar6 = ' ';
      }
      iVar7 = iVar7 + -1;
      *pcVar9 = cVar6;
      pcVar9 = pcVar9 + 1;
    } while (iVar7 != 0);
  }
  iVar7 = FUN_80032534(param_1);
  if (iVar7 != 0) {
    if (uVar18 == 100) {
      return 7;
    }
    if (iVar7 != 4) {
      return iVar7;
    }
    *(byte *)((int)param_1 + 0x2b) = bStack53;
    goto LAB_80032df0;
  }
  uVar18 = uVar18 + 1;
  if (99 < uVar18) {
    if (uVar18 == 100) {
      return 7;
    }
    return 0;
  }
  goto LAB_80032c98;
}



undefined4 FUN_80033064(byte **param_1,byte *param_2)

{
  ushort uVar1;
  byte *pbVar2;
  byte *pbVar3;
  byte *pbVar4;
  byte *pbVar5;
  bool bVar6;
  
  pbVar5 = *param_1;
  if ((param_2 < (byte *)0x200000) && (((uint)param_2 & 0x1f) == 0)) {
    pbVar4 = param_1[2];
    param_1[4] = param_2;
    if ((pbVar4 == (byte *)0x0) &&
       ((*pbVar5 < 3 || (pbVar4 = *(byte **)(pbVar5 + 0x28), pbVar4 == (byte *)0x0)))) {
      if ((uint)*(ushort *)(pbVar5 + 8) <= (uint)param_2 >> 5) {
        return 2;
      }
      pbVar3 = *(byte **)(pbVar5 + 0x28);
      param_1[6] = pbVar3;
    }
    else {
      uVar1 = *(ushort *)(pbVar5 + 10);
      pbVar3 = (byte *)((uint)uVar1 * 0x200);
      if (pbVar3 <= param_2) {
        do {
          pbVar4 = (byte *)FUN_800351e0(param_1);
          if (pbVar4 == (byte *)0xffffffff) {
            return 1;
          }
          bVar6 = pbVar4 == (byte *)0x2;
          pbVar2 = pbVar4;
          if (pbVar4 >= (byte *)0x2) {
            pbVar2 = *(byte **)(pbVar5 + 0x18);
            bVar6 = pbVar2 == pbVar4;
          }
          if ((pbVar4 < (byte *)0x2 || pbVar2 < pbVar4) || bVar6) {
            return 2;
          }
          param_2 = param_2 + (uint)uVar1 * -0x200;
        } while (pbVar3 <= param_2);
      }
      if (pbVar4 + -2 < (byte *)(*(int *)(pbVar5 + 0x18) + -2)) {
        pbVar3 = (byte *)((uint)*(ushort *)(pbVar5 + 10) * (int)(pbVar4 + -2) +
                         *(int *)(pbVar5 + 0x2c));
      }
      else {
        pbVar3 = (byte *)0x0;
      }
      param_1[6] = pbVar3;
    }
    param_1[5] = pbVar4;
    if (pbVar3 != (byte *)0x0) {
      param_1[6] = pbVar3 + ((uint)param_2 >> 9);
      param_1[7] = pbVar5 + ((uint)param_2 & 0x1ff) + 0x34;
      return 0;
    }
  }
  return 2;
}



uint sys_init_sd_card(void)

{
  int in_r0;
  uint uVar1;
  
  if (in_r0 != 0) {
    return 1;
  }
  uVar1 = sys_sd_card_init();
  if (uVar1 != 0) {
    uVar1 = 2;
  }
  return uVar1;
}



undefined4 FUN_8003319c(undefined4 param_1,int param_2,undefined4 *param_3)

{
  switch(param_1) {
  case 0:
    if (param_2 == 0) {
      return 0;
    }
    if (param_2 == 1) {
      *param_3 = *(undefined4 *)(DAT_80033270 + 4);
      return 0;
    }
    break;
  case 1:
    if (param_2 == 0) {
      return 0;
    }
    if (param_2 == 1) {
      *param_3 = 0x40000;
      return 0;
    }
    break;
  case 2:
    if (param_2 == 0) {
      return 0;
    }
    if (param_2 == 1) {
      return 1;
    }
    break;
  default:
    goto switchD_800331a4_caseD_3;
  }
  if (param_2 == 2) {
    *(undefined2 *)param_3 = 0x200;
    return 0;
  }
  if (param_2 == 3) {
    *param_3 = 0x200;
    return 0;
  }
switchD_800331a4_caseD_3:
  return 4;
}



uint FUN_80033274(int param_1,void *param_2,undefined4 param_3,uint param_4)

{
  void *source;
  int iVar1;
  longlong lVar2;
  
  if (param_1 == 0) {
    if (((uint)param_2 & 3) == 0) {
      iVar1 = FUN_80024558(0,param_3,param_4,param_2);
      if (iVar1 == 0) {
        return 0;
      }
    }
    else {
      source = (void *)FUN_800001cc();
      if (source != (void *)0x0) {
        iVar1 = FUN_80024558(0,param_3,param_4,source);
        lVar2 = memcpy(param_2,source,param_4 << 9);
        FUN_8000022e(source,(int)((ulonglong)lVar2 >> 0x20));
        return (uint)(iVar1 != 0);
      }
    }
    param_4 = 1;
  }
  return param_4;
}



undefined4 FUN_80033318(void)

{
  return 0;
}



uint FUN_80033320(undefined4 param_1,void *param_2,undefined4 param_3,int param_4)

{
  void *dest;
  int iVar1;
  uint unaff_r4;
  
  switch(param_1) {
  case 0:
    if (((uint)param_2 & 3) == 0) {
      iVar1 = FUN_80024730(0,param_3,param_4,param_2);
      if (iVar1 == 0) {
        return 0;
      }
    }
    else {
      dest = (void *)FUN_800001cc();
      if (dest != (void *)0x0) {
        memcpy(dest,param_2,param_4 << 9);
        iVar1 = FUN_80024730(0,param_3,param_4,dest);
        FUN_8000022e(dest);
        return (uint)(iVar1 != 0);
      }
    }
    unaff_r4 = 1;
    break;
  case 1:
  case 2:
  case 3:
  case 4:
    break;
  default:
    unaff_r4 = 4;
  }
  return unaff_r4;
}



// WARNING: Could not reconcile some variable overlaps
// WARNING: Restarted to delay deadcode elimination for space: stack
// WARNING: Unknown calling convention yet parameter storage is locked

int some_sd_card_stuff_4(void)

{
  uchar *in_r0;
  int iVar1;
  byte in_r1;
  byte in_r2;
  undefined4 uStack80;
  char *apcStack72 [7];
  int iStack44;
  byte bStack29;
  uchar *local_18 [3];
  
  local_18[0] = in_r0;
  iVar1 = some_sd_card_stuff_5(local_18,(char **)&uStack80,2);
  if (iVar1 != 0) {
    return iVar1;
  }
  apcStack72[0] = uStack80;
  iVar1 = FUN_80034d68(apcStack72,local_18[0]);
  if (iVar1 == 0) {
    if ((bStack29 & 0xa0) == 0) {
      *(byte *)(iStack44 + 0xb) = *(byte *)(iStack44 + 0xb) & ~(in_r2 & 0x27) | in_r1 & in_r2 & 0x27
      ;
      uStack80[3] = '\x01';
      iVar1 = FUN_800372c0();
      return iVar1;
    }
    return 6;
  }
  return iVar1;
}



void FUN_8003347c(undefined4 *param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  undefined4 uStack16;
  
  uStack16 = param_4;
  iVar1 = FUN_80033d84();
  if (iVar1 == 0) {
    iVar1 = FUN_800390e8(param_1,&uStack16);
    if (iVar1 == 0) {
      *param_1 = 0;
    }
    return;
  }
  return;
}



uint FUN_800334ac(int param_1,uint param_2,uint param_3,int param_4)

{
  ushort uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  bool bVar8;
  int local_28;
  
  local_28 = param_4;
  uVar2 = FUN_800390e8(param_1,&local_28);
  bVar8 = uVar2 != 0;
  if (!bVar8) {
    uVar2 = (uint)*(byte *)(param_1 + 0x11);
  }
  if (bVar8 || uVar2 != 0) {
    return uVar2;
  }
  if ((*(uint *)(param_1 + 0xc) < param_2) && ((*(byte *)(param_1 + 0x10) & 2) == 0)) {
    param_2 = *(uint *)(param_1 + 0xc);
  }
  iVar7 = *(int *)(param_1 + 0x14);
  uVar6 = 0;
  *(undefined4 *)(param_1 + 0x14) = 0;
  if (param_2 != 0) {
    uVar1 = *(ushort *)(local_28 + 10);
    uVar5 = (uint)uVar1 * 0x200;
    if (iVar7 == 0) {
LAB_80033558:
      uVar3 = *(uint *)(param_1 + 8);
      if (uVar3 == 0) {
        uVar3 = FUN_8003232c(param_1,0);
        if (uVar3 == 1) goto LAB_800336ac;
        if (uVar3 == 0xffffffff) goto LAB_800336f0;
        *(uint *)(param_1 + 8) = uVar3;
      }
      *(uint *)(param_1 + 0x18) = uVar3;
    }
    else {
      uVar3 = divide(param_2 - 1,uVar5);
      uVar4 = divide(iVar7 + -1,uVar5);
      if (uVar3 < uVar4) goto LAB_80033558;
      param_3 = uVar5 - 1;
      uVar4 = iVar7 - 1U & ~param_3;
      uVar3 = *(uint *)(param_1 + 0x18);
      param_2 = param_2 - uVar4;
      *(uint *)(param_1 + 0x14) = uVar4;
    }
    if (uVar3 != 0) {
      while (uVar5 < param_2) {
        *(uint *)(param_1 + 0x14) = *(int *)(param_1 + 0x14) + uVar5;
        param_2 = param_2 + (uint)uVar1 * -0x200;
        if ((*(byte *)(param_1 + 0x10) & 2) == 0) {
          uVar3 = FUN_800351e0(param_1);
        }
        else {
          uVar3 = FUN_8003232c();
          if (uVar3 == 0) {
            param_2 = 0;
            break;
          }
        }
        if (uVar3 == 0xffffffff) goto LAB_800336f0;
        if ((uVar3 < 2) || (*(uint *)(local_28 + 0x18) <= uVar3)) goto LAB_800336ac;
        *(uint *)(param_1 + 0x18) = uVar3;
      }
      param_3 = param_2 << 0x17;
      *(uint *)(param_1 + 0x14) = *(int *)(param_1 + 0x14) + param_2;
      if (param_3 != 0) {
        if (*(int *)(local_28 + 0x18) - 2U <= uVar3 - 2) {
LAB_800336ac:
          *(undefined *)(param_1 + 0x11) = 2;
          return 2;
        }
        param_3 = *(uint *)(local_28 + 0x2c);
        iVar7 = (uVar3 - 2) * (uint)*(ushort *)(local_28 + 10) + param_3;
        if (iVar7 == 0) goto LAB_800336ac;
        uVar6 = iVar7 + (param_2 >> 9);
      }
    }
  }
  uVar5 = *(uint *)(param_1 + 0x14);
  if (*(uint *)(param_1 + 0xc) < uVar5) {
    *(uint *)(param_1 + 0xc) = uVar5;
    *(byte *)(param_1 + 0x10) = *(byte *)(param_1 + 0x10) | 0x40;
  }
  bVar8 = (uVar5 & 0x1ff) != 0;
  if (bVar8) {
    param_3 = *(uint *)(param_1 + 0x1c);
  }
  if (bVar8 && param_3 != uVar6) {
    if ((*(byte *)(param_1 + 0x10) & 0x80) != 0) {
      iVar7 = FUN_80033320(*(undefined *)(local_28 + 1),param_1 + 0x28);
      if (iVar7 != 0) goto LAB_800336f0;
      *(byte *)(param_1 + 0x10) = *(byte *)(param_1 + 0x10) & 0x7f;
    }
    iVar7 = FUN_80033274(*(undefined *)(local_28 + 1),param_1 + 0x28,uVar6,1);
    if (iVar7 != 0) {
LAB_800336f0:
      *(undefined *)(param_1 + 0x11) = 1;
      return 1;
    }
    *(uint *)(param_1 + 0x1c) = uVar6;
  }
  return uVar2;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x800337a4
// WARNING: Restarted to delay deadcode elimination for space: stack

int check_sd_card(uint p1,uint p2,uint p3)

{
  byte bVar1;
  byte *pbVar2;
  int iVar4;
  undefined *puVar5;
  uint uVar6;
  code *UNRECOVERED_JUMPTABLE_00;
  bool bVar7;
  char *local_10;
  uchar *local_c;
  uint uStack8;
  code *UNRECOVERED_JUMPTABLE;
  byte *pbVar3;
  
  iVar4 = DAT_800337c0;
  pbVar3 = (byte *)p2;
  if (p2 != 0) {
    do {
      pbVar2 = pbVar3 + 1;
      bVar1 = *pbVar3;
      if (bVar1 < 0x20) {
        uVar6 = 0;
        goto LAB_80033774;
      }
      pbVar3 = pbVar2;
    } while (bVar1 != 0x3a);
    uVar6 = *(byte *)p2 - 0x30;
    bVar7 = uVar6 == 9;
    if (uVar6 < 10) {
      bVar7 = (byte *)(p2 + 2) == pbVar2;
    }
    if (((bVar7) && ((int)uVar6 < 1)) && (-1 < (int)uVar6)) {
LAB_80033774:
      puVar5 = *(undefined **)(DAT_800337c0 + uVar6 * 4);
      if (puVar5 != (undefined *)0x0) {
        *puVar5 = 0;
      }
      if (p1 != 0) {
        *(undefined *)p1 = 0;
      }
      *(uint *)(iVar4 + uVar6 * 4) = p1;
      local_10 = (char *)p1;
      local_c = (uchar *)p2;
      uStack8 = p3;
      if (p3 != 0) {
        UNRECOVERED_JUMPTABLE = UNRECOVERED_JUMPTABLE_00;
        some_sd_card_stuff_5(&local_c,&local_10,0);
                    // WARNING: Could not recover jumptable at 0x800337bc. Too many branches
                    // WARNING: Treating indirect jump as call
        iVar4 = (*UNRECOVERED_JUMPTABLE)();
        return iVar4;
      }
                    // WARNING: Could not recover jumptable at 0x800337a4. Too many branches
                    // WARNING: Treating indirect jump as call
      iVar4 = (*UNRECOVERED_JUMPTABLE_00)(0);
      return iVar4;
    }
  }
  return 0xb;
}



int FUN_800337c4(char **param_1,uchar *param_2,uint param_3)

{
  ushort uVar1;
  int iVar2;
  undefined4 uVar3;
  char *pcVar4;
  int iVar5;
  char *pcVar6;
  uint uVar7;
  bool bVar8;
  char *local_60 [2];
  char *local_58;
  byte local_52;
  char *local_3c;
  byte local_2d;
  char **ppcStack40;
  uchar *local_24;
  uint uStack32;
  
  if (param_1 == (char **)0x0) {
    return 9;
  }
  pcVar6 = (char *)(param_3 & 0x3f);
  ppcStack40 = param_1;
  local_24 = param_2;
  uStack32 = param_3;
  iVar2 = some_sd_card_stuff_5(&local_24,local_60,(uint)pcVar6);
  if (iVar2 != 0) goto LAB_80033afc;
  local_58 = local_60[0];
  iVar2 = FUN_80034d68(&local_58,local_24);
  if ((iVar2 == 0) && ((local_2d & 0x80) != 0)) {
    iVar2 = 6;
  }
  if ((param_3 & 0x1c) == 0) {
    if (iVar2 != 0) goto LAB_80033afc;
    if ((local_52 & 0x10) != 0) {
      iVar2 = 4;
      goto LAB_80033afc;
    }
    bVar8 = (param_3 & 2) == 0;
    if (!bVar8) {
      bVar8 = (local_52 & 1) == 0;
    }
    if (!bVar8) goto LAB_80033868;
LAB_80033990:
    if (((uint)pcVar6 & 8) != 0) {
LAB_80033998:
      pcVar6 = (char *)((uint)pcVar6 | 0x40);
    }
  }
  else {
    if (iVar2 == 0) {
      if ((local_52 & 0x11) != 0) {
LAB_80033868:
        iVar2 = 7;
        goto LAB_80033afc;
      }
      if ((param_3 & 4) != 0) {
        iVar2 = 8;
        goto LAB_80033afc;
      }
    }
    else {
      if (iVar2 == 4) {
        iVar2 = FUN_80032c24(&local_58);
      }
      pcVar6 = (char *)((uint)pcVar6 | 8);
      if (iVar2 != 0) goto LAB_80033afc;
    }
    pcVar4 = local_3c;
    if (((uint)pcVar6 & 8) != 0) {
      uVar7 = (uint)*(ushort *)(local_3c + 0x1a);
      if (*local_60[0] == '\x03') {
        uVar7 = CONCAT22(*(undefined2 *)(local_3c + 0x14),*(ushort *)(local_3c + 0x1a));
      }
      uVar3 = FUN_80035314();
      pcVar4[0xe] = (char)uVar3;
      pcVar4[0xf] = (char)((uint)uVar3 >> 8);
      pcVar4[0x10] = (char)((uint)uVar3 >> 0x10);
      pcVar4[0x11] = (char)((uint)uVar3 >> 0x18);
      local_3c[0xb] = ' ';
      local_3c[0x1a] = '\0';
      local_3c[0x1b] = '\0';
      if (*local_60[0] == '\x03') {
        local_3c[0x14] = '\0';
        local_3c[0x15] = '\0';
      }
      local_3c[0x1c] = '\0';
      local_3c[0x1d] = '\0';
      local_3c[0x1e] = '\0';
      local_3c[0x1f] = '\0';
      local_60[0][3] = '\x01';
      if (uVar7 != 0) {
        uVar3 = *(undefined4 *)(local_60[0] + 0x30);
        iVar2 = FUN_80035f1c(&local_58,uVar7,0);
        if (iVar2 != 0) goto LAB_80033afc;
        iVar2 = FUN_80035ca8(local_60[0],uVar3);
        *(uint *)(local_60[0] + 0x10) = uVar7 - 1;
        if (iVar2 != 0) goto LAB_80033afc;
        goto LAB_80033990;
      }
      goto LAB_80033998;
    }
  }
  param_1[8] = *(char **)(local_60[0] + 0x30);
  param_1[9] = local_3c;
  pcVar4 = (char *)(uint)*(ushort *)(local_3c + 0x1a);
  if (*local_60[0] == '\x03') {
    pcVar4 = (char *)CONCAT22(*(undefined2 *)(local_3c + 0x14),*(ushort *)(local_3c + 0x1a));
  }
  param_1[2] = pcVar4;
  param_1[3] = *(char **)(local_3c + 0x1c);
  *param_1 = local_60[0];
  *(undefined2 *)(param_1 + 1) = *(undefined2 *)(local_60[0] + 6);
  *(char *)(param_1 + 4) = (char)pcVar6;
  *(undefined *)((int)param_1 + 0x11) = 0;
  param_1[7] = (char *)0x0;
  param_1[5] = (char *)0x0;
  FUN_8003558c(param_1 + 10,0,0x200);
  bVar8 = ((uint)pcVar6 & 0x20) == 0;
  if (!bVar8) {
    pcVar6 = param_1[3];
  }
  if (bVar8 || pcVar6 == (char *)0x0) {
    return iVar2;
  }
  param_1[5] = pcVar6;
  pcVar4 = param_1[2];
  uVar1 = *(ushort *)(local_60[0] + 10);
  do {
    if (pcVar6 <= (char *)((uint)uVar1 * 0x200)) {
      param_1[6] = pcVar4;
      if (((uint)pcVar6 & 0x1ff) == 0) {
        return iVar2;
      }
      if ((pcVar4 + -2 < (char *)(*(int *)(local_60[0] + 0x18) + -2)) &&
         (iVar5 = (uint)*(ushort *)(local_60[0] + 10) * (int)(pcVar4 + -2) +
                  *(int *)(local_60[0] + 0x2c), iVar5 != 0)) {
        pcVar6 = (char *)(iVar5 + ((uint)pcVar6 >> 9));
        param_1[7] = pcVar6;
        iVar5 = FUN_80033274(local_60[0][1],param_1 + 10,pcVar6,1);
        if (iVar5 == 0) {
          return iVar2;
        }
        iVar2 = 1;
      }
      else {
        iVar2 = 2;
      }
      goto LAB_80033afc;
    }
    pcVar4 = (char *)FUN_800351e0(param_1);
    if (pcVar4 < (char *)0x2) {
      iVar2 = 2;
    }
    if (pcVar4 == (char *)0xffffffff) {
      iVar2 = 1;
      param_1[6] = (char *)0xffffffff;
      goto LAB_80033afc;
    }
    pcVar6 = pcVar6 + (uint)uVar1 * -0x200;
  } while (iVar2 == 0);
  param_1[6] = pcVar4;
LAB_80033afc:
  *param_1 = (char *)0x0;
  return iVar2;
}



uint FUN_80033b18(int param_1,int param_2,uint param_3,int *param_4)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  bool bVar7;
  int aiStack44 [2];
  
  *param_4 = 0;
  uVar1 = FUN_800390e8(param_1,aiStack44);
  bVar7 = uVar1 == 0;
  if (bVar7) {
    uVar1 = (uint)*(byte *)(param_1 + 0x11);
  }
  if (!bVar7 || uVar1 != 0) {
    return uVar1;
  }
  if ((*(byte *)(param_1 + 0x10) & 1) == 0) {
    return 7;
  }
  uVar1 = *(uint *)(param_1 + 0x14);
  uVar2 = *(int *)(param_1 + 0xc) - uVar1;
  if (uVar2 < param_3) {
    param_3 = uVar2;
  }
  do {
    if (param_3 == 0) {
      return 0;
    }
    if ((uVar1 & 0x1ff) == 0) {
      uVar2 = *(ushort *)(aiStack44[0] + 10) - 1 & uVar1 >> 9;
      if (uVar2 == 0) {
        if (uVar1 == 0) {
          uVar1 = *(uint *)(param_1 + 8);
        }
        else {
          uVar1 = FUN_800351e0(param_1,*(undefined4 *)(param_1 + 0x18));
        }
        if (uVar1 < 2) goto LAB_80033c58;
        if (uVar1 == 0xffffffff) goto LAB_80033d00;
        *(uint *)(param_1 + 0x18) = uVar1;
      }
      uVar1 = *(int *)(param_1 + 0x18) - 2;
      if (*(int *)(aiStack44[0] + 0x18) - 2U <= uVar1) {
LAB_80033c58:
        *(undefined *)(param_1 + 0x11) = 2;
        return 2;
      }
      uVar5 = (uint)*(ushort *)(aiStack44[0] + 10);
      iVar4 = uVar5 * uVar1 + *(int *)(aiStack44[0] + 0x2c);
      if (iVar4 == 0) goto LAB_80033c58;
      iVar4 = iVar4 + uVar2;
      uVar6 = param_3 >> 9;
      if (uVar6 == 0) {
        if (*(int *)(param_1 + 0x1c) != iVar4) {
          if ((*(byte *)(param_1 + 0x10) & 0x80) != 0) {
            iVar3 = FUN_80033320(*(undefined *)(aiStack44[0] + 1),param_1 + 0x28,
                                 *(int *)(param_1 + 0x1c),1);
            if (iVar3 != 0) goto LAB_80033d00;
            *(byte *)(param_1 + 0x10) = *(byte *)(param_1 + 0x10) & 0x7f;
          }
          iVar3 = FUN_80033274(*(undefined *)(aiStack44[0] + 1),param_1 + 0x28,iVar4,1);
          if (iVar3 != 0) goto LAB_80033d00;
        }
        *(int *)(param_1 + 0x1c) = iVar4;
        goto LAB_80033d1c;
      }
      if (uVar5 < uVar2 + uVar6) {
        uVar6 = uVar5 - uVar2;
      }
      iVar3 = FUN_80033274(*(undefined *)(aiStack44[0] + 1),param_2,iVar4,uVar6);
      if (iVar3 != 0) {
LAB_80033d00:
        *(undefined *)(param_1 + 0x11) = 1;
        return 1;
      }
      if (((*(byte *)(param_1 + 0x10) & 0x80) != 0) &&
         (uVar1 = *(int *)(param_1 + 0x1c) - iVar4, uVar1 < uVar6)) {
        FUN_80035518(param_2 + uVar1 * 0x200,param_1 + 0x28,0x200);
      }
      uVar6 = uVar6 << 9;
    }
    else {
LAB_80033d1c:
      uVar1 = *(ushort *)(param_1 + 0x14) & 0x1ff;
      uVar6 = 0x200 - uVar1;
      if (param_3 < uVar6) {
        uVar6 = param_3;
      }
      FUN_80035518(param_2,uVar1 + param_1 + 0x28,uVar6);
    }
    *param_4 = *param_4 + uVar6;
    param_2 = param_2 + uVar6;
    uVar1 = *(int *)(param_1 + 0x14) + uVar6;
    *(uint *)(param_1 + 0x14) = uVar1;
    param_3 = param_3 - uVar6;
  } while( true );
}



int FUN_80033d84(char **param_1,undefined4 param_2,undefined4 param_3,int param_4)

{
  int iVar1;
  undefined4 uVar2;
  char *pcVar3;
  char *pcVar4;
  char *pcVar5;
  int local_10;
  
  local_10 = param_4;
  iVar1 = FUN_800390e8(param_1,&local_10);
  if (iVar1 != 0) {
    return iVar1;
  }
  if ((*(byte *)(param_1 + 4) & 0x40) == 0) {
    return 0;
  }
  if ((*(byte *)(param_1 + 4) & 0x80) != 0) {
    iVar1 = FUN_80033320(*(undefined *)(local_10 + 1),param_1 + 10,param_1[7],1);
    if (iVar1 != 0) {
      return 1;
    }
    *(byte *)(param_1 + 4) = *(byte *)(param_1 + 4) & 0x7f;
  }
  uVar2 = FUN_80035314();
  iVar1 = FUN_80035ca8(local_10,param_1[8]);
  if (iVar1 == 0) {
    pcVar3 = param_1[9];
    pcVar3[0xb] = pcVar3[0xb] | 0x20;
    pcVar4 = param_1[2];
    pcVar5 = *param_1;
    pcVar3[0x1a] = (char)pcVar4;
    pcVar3[0x1b] = (char)((uint)pcVar4 >> 8);
    if (*pcVar5 == '\x03') {
      pcVar3[0x14] = (char)((uint)pcVar4 >> 0x10);
      pcVar3[0x15] = (char)((uint)pcVar4 >> 0x18);
    }
    pcVar4 = param_1[3];
    pcVar3[0x1c] = (char)pcVar4;
    pcVar3[0x1d] = (char)((uint)pcVar4 >> 8);
    pcVar3[0x1e] = (char)((uint)pcVar4 >> 0x10);
    pcVar3[0x1f] = (char)((uint)pcVar4 >> 0x18);
    pcVar3[0x16] = (char)uVar2;
    pcVar3[0x17] = (char)((uint)uVar2 >> 8);
    pcVar3[0x18] = (char)((uint)uVar2 >> 0x10);
    pcVar3[0x19] = (char)((uint)uVar2 >> 0x18);
    pcVar3[0x12] = '\0';
    pcVar3[0x13] = '\0';
    *(undefined *)(local_10 + 3) = 1;
    iVar1 = FUN_800372c0();
    *(byte *)(param_1 + 4) = *(byte *)(param_1 + 4) & 0xbf;
    return iVar1;
  }
  return iVar1;
}



// WARNING: Could not reconcile some variable overlaps
// WARNING: Restarted to delay deadcode elimination for space: stack

int FUN_80033ea4(uchar *param_1)

{
  char *pcVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  undefined4 uStack136;
  char *apcStack128 [2];
  uint uStack120;
  char *pcStack80;
  byte bStack74;
  uint uStack64;
  undefined4 uStack56;
  undefined *puStack52;
  byte bStack37;
  int iStack36;
  uchar *puStack32;
  
  puStack32 = param_1;
  iVar3 = some_sd_card_stuff_5(&puStack32,(char **)&uStack136,2);
  if (iVar3 != 0) {
    return iVar3;
  }
  pcStack80 = uStack136;
  iVar3 = FUN_80034d68(&pcStack80,puStack32);
  if (iVar3 != 0) {
    return iVar3;
  }
  if ((bStack37 & 0x80) != 0) {
    return 6;
  }
  if ((bStack74 & 1) != 0) {
    return 7;
  }
  uVar4 = (uint)*(ushort *)(puStack52 + 0x1a);
  if (*uStack136 == '\x03') {
    uVar4 = CONCAT22(*(undefined2 *)(puStack52 + 0x14),*(ushort *)(puStack52 + 0x1a));
  }
  if ((bStack74 & 0x10) != 0) {
    apcStack128[0] = uStack136;
    uStack120 = uVar4;
    iVar3 = FUN_80033064(apcStack128,0);
    if (iVar3 != 0) {
      return iVar3;
    }
    iVar3 = FUN_80032a10(apcStack128,0);
    if (iVar3 == 0) {
      return 7;
    }
    if (iVar3 != 4) {
      return iVar3;
    }
  }
  uVar2 = uStack64;
  pcVar1 = pcStack80;
  if ((iStack36 != -1) && (iVar3 = FUN_80033064(&pcStack80,iStack36), iVar3 != 0)) {
    return iVar3;
  }
  do {
    iVar3 = FUN_80035ca8(pcVar1,uStack56);
    if (iVar3 != 0) break;
    *puStack52 = 0xe5;
    pcVar1[3] = '\x01';
    if (uVar2 <= uStack64) {
      if ((uVar4 != 0) && (iVar3 = FUN_80035f1c(&pcStack80,uVar4,0), iVar3 != 0)) {
        return iVar3;
      }
      iVar3 = FUN_800372c0(uStack136);
      return iVar3;
    }
    iVar3 = FUN_800327c8(&pcStack80,0);
  } while (iVar3 == 0);
  if (iVar3 == 4) {
    iVar3 = 2;
  }
  return iVar3;
}



uint FUN_80034074(int param_1,int param_2,uint param_3,int *param_4)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  bool bVar6;
  int aiStack44 [2];
  
  *param_4 = 0;
  uVar1 = FUN_800390e8(param_1,aiStack44);
  bVar6 = uVar1 == 0;
  if (bVar6) {
    uVar1 = (uint)*(byte *)(param_1 + 0x11);
  }
  if (!bVar6 || uVar1 != 0) {
    return uVar1;
  }
  if ((*(byte *)(param_1 + 0x10) & 2) == 0) {
    return 7;
  }
  uVar1 = *(uint *)(param_1 + 0x14);
  if (uVar1 + param_3 < uVar1) {
    param_3 = ~uVar1;
  }
  while (param_3 != 0) {
    uVar1 = *(uint *)(param_1 + 0x14);
    if ((uVar1 & 0x1ff) == 0) {
      uVar5 = *(ushort *)(aiStack44[0] + 10) - 1 & uVar1 >> 9;
      if (uVar5 == 0) {
        if (uVar1 == 0) {
          iVar2 = *(int *)(param_1 + 8);
          if (iVar2 == 0) {
            iVar2 = FUN_8003232c(param_1,0);
            goto LAB_80034128;
          }
        }
        else {
          iVar2 = FUN_8003232c(param_1,*(undefined4 *)(param_1 + 0x18));
LAB_80034128:
          if (iVar2 == 0) break;
        }
        if (iVar2 == 1) goto LAB_80034214;
        if (iVar2 == -1) goto LAB_80034298;
        *(int *)(param_1 + 0x18) = iVar2;
        if (*(int *)(param_1 + 8) == 0) {
          *(int *)(param_1 + 8) = iVar2;
        }
      }
      if ((*(byte *)(param_1 + 0x10) & 0x80) != 0) {
        iVar2 = FUN_80033320(*(undefined *)(aiStack44[0] + 1),param_1 + 0x28,
                             *(undefined4 *)(param_1 + 0x1c),1);
        if (iVar2 != 0) goto LAB_80034298;
        *(byte *)(param_1 + 0x10) = *(byte *)(param_1 + 0x10) & 0x7f;
      }
      uVar1 = *(int *)(param_1 + 0x18) - 2;
      if (*(int *)(aiStack44[0] + 0x18) - 2U <= uVar1) {
LAB_80034214:
        *(undefined *)(param_1 + 0x11) = 2;
        return 2;
      }
      uVar4 = (uint)*(ushort *)(aiStack44[0] + 10);
      iVar2 = uVar4 * uVar1 + *(int *)(aiStack44[0] + 0x2c);
      if (iVar2 == 0) goto LAB_80034214;
      iVar2 = iVar2 + uVar5;
      uVar1 = param_3 >> 9;
      if (uVar1 == 0) {
        if (((*(int *)(param_1 + 0x1c) != iVar2) &&
            (*(uint *)(param_1 + 0x14) < *(uint *)(param_1 + 0xc))) &&
           (iVar3 = FUN_80033274(*(undefined *)(aiStack44[0] + 1),param_1 + 0x28,iVar2,1),
           iVar3 != 0)) goto LAB_80034298;
        *(int *)(param_1 + 0x1c) = iVar2;
        goto LAB_800342b4;
      }
      if (uVar4 < uVar5 + uVar1) {
        uVar1 = uVar4 - uVar5;
      }
      iVar3 = FUN_80033320(*(undefined *)(aiStack44[0] + 1),param_2,iVar2,uVar1);
      if (iVar3 != 0) {
LAB_80034298:
        *(undefined *)(param_1 + 0x11) = 1;
        return 1;
      }
      uVar5 = *(int *)(param_1 + 0x1c) - iVar2;
      if (uVar5 < uVar1) {
        FUN_80035518(param_1 + 0x28,param_2 + uVar5 * 0x200,0x200);
        *(byte *)(param_1 + 0x10) = *(byte *)(param_1 + 0x10) & 0x7f;
      }
      uVar1 = uVar1 << 9;
    }
    else {
LAB_800342b4:
      uVar5 = *(ushort *)(param_1 + 0x14) & 0x1ff;
      uVar1 = 0x200 - uVar5;
      if (param_3 < uVar1) {
        uVar1 = param_3;
      }
      FUN_80035518(uVar5 + param_1 + 0x28,param_2,uVar1);
      *(byte *)(param_1 + 0x10) = *(byte *)(param_1 + 0x10) | 0x80;
    }
    param_3 = param_3 - uVar1;
    *param_4 = *param_4 + uVar1;
    param_2 = param_2 + uVar1;
    uVar1 = *(int *)(param_1 + 0x14) + uVar1;
    *(uint *)(param_1 + 0x14) = uVar1;
    if (uVar1 <= *(uint *)(param_1 + 0xc)) {
      uVar1 = *(uint *)(param_1 + 0xc);
    }
    *(uint *)(param_1 + 0xc) = uVar1;
  }
  *(byte *)(param_1 + 0x10) = *(byte *)(param_1 + 0x10) | 0x40;
  return 0;
}



uint FUN_80034348(uint param_1,int param_2)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  bool bVar7;
  
  bVar7 = param_1 == 0x80;
  uVar1 = param_1;
  if (0x7f < param_1) {
    bVar7 = param_2 == 0x3a8;
    uVar1 = 0;
  }
  if (bVar7) {
    iVar3 = 0;
    iVar4 = 0x10;
    iVar6 = DAT_800343b8;
    do {
      iVar2 = iVar3 + ((uint)(iVar6 - iVar3) >> 1);
      uVar5 = (uint)*(ushort *)(PTR_DAT_800343b4 + iVar2 * 4);
      if (uVar5 < param_1) {
        iVar3 = iVar2;
      }
      if (param_1 < uVar5) {
        iVar6 = iVar2;
      }
      if (uVar5 == param_1) {
        if (iVar4 == 0) {
          return uVar1;
        }
        return (uint)*(ushort *)(PTR_DAT_800343b4 + iVar2 * 4 + 2);
      }
      iVar4 = iVar4 + -1;
    } while (iVar4 != 0);
  }
  return uVar1;
}



uint FUN_800343bc(uint param_1,int param_2)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  int iVar7;
  
  uVar1 = param_1 & 0xffff;
  uVar2 = 0;
  if (param_1 < 0x80) {
    return uVar1;
  }
  if (param_1 < 0x10000) {
    if (param_2 != 0x3a8) {
      return 0;
    }
    iVar4 = 0;
    iVar7 = 0x10;
    iVar5 = DAT_80034450;
    while( true ) {
      iVar3 = iVar4 + ((uint)(iVar5 - iVar4) >> 1);
      uVar6 = (uint)*(ushort *)(PTR_DAT_8003444c + iVar3 * 4);
      if (uVar6 < uVar1) {
        iVar4 = iVar3;
      }
      if (uVar1 < uVar6) {
        iVar5 = iVar3;
      }
      if (uVar6 == uVar1) break;
      iVar7 = iVar7 + -1;
      if (iVar7 == 0) {
        return 0;
      }
    }
    if (iVar7 != 0) {
      uVar2 = (uint)*(ushort *)(PTR_DAT_8003444c + iVar3 * 4 + 2);
    }
    return uVar2;
  }
  return 0;
}



uint FUN_80034454(uint param_1)

{
  ushort uVar1;
  ushort *puVar2;
  uint uVar4;
  uint uVar5;
  ushort *puVar3;
  
  if (0xffff < param_1) {
    return param_1;
  }
  param_1 = param_1 & 0xffff;
  puVar2 = (ushort *)PTR_DAT_80034564;
  if (param_1 < 0x1000) {
    puVar2 = (ushort *)PTR_DAT_80034568;
  }
  while( true ) {
    puVar3 = puVar2 + 1;
    uVar4 = (uint)*puVar2;
    if (uVar4 == 0) {
      return param_1;
    }
    if (param_1 < uVar4) break;
    puVar2 = puVar2 + 2;
    uVar1 = *puVar3 >> 8;
    uVar5 = *puVar3 & 0xff;
    if (param_1 < uVar4 + uVar5) {
      switch(uVar1) {
      case 0:
        return (uint)puVar2[param_1 - uVar4];
      case 1:
        return param_1 - (param_1 - uVar4 & 1) & 0xffff;
      case 2:
        param_1 = param_1 - 0x10;
        break;
      case 3:
        param_1 = param_1 - 0x20;
        break;
      case 4:
        param_1 = param_1 - 0x30;
        break;
      case 5:
        param_1 = param_1 - 0x1a;
        break;
      case 6:
        return param_1 + 8 & 0xfffeffff;
      case 7:
        param_1 = param_1 - 0x50;
        break;
      case 8:
        param_1 = param_1 - 0x1c60;
        break;
      default:
        return param_1;
      }
      return param_1 & 0xffff;
    }
    if (uVar1 == 0) {
      puVar2 = puVar2 + uVar5;
    }
  }
  return param_1;
}



int some_sd_card_stuff_5(uchar **p1,char **p2,uint p3)

{
  byte bVar1;
  char cVar2;
  ushort uVar3;
  short *psVar4;
  undefined4 uVar5;
  uint uVar6;
  int iVar7;
  char *pcVar8;
  short sVar9;
  char *pcVar10;
  byte *pbVar11;
  byte *pbVar12;
  char *pcVar14;
  uint uVar15;
  int iVar16;
  uint uVar17;
  uint uVar18;
  char cVar19;
  bool bVar20;
  int aiStack56 [4];
  uint uStack40;
  byte *pbVar13;
  
  *p2 = (char *)0x0;
  pbVar11 = *p1;
  pbVar13 = pbVar11;
  if (pbVar11 != (byte *)0x0) {
    do {
      pbVar12 = pbVar13 + 1;
      bVar1 = *pbVar13;
      if (bVar1 < 0x20) {
        uVar15 = 0;
        goto LAB_800345e0;
      }
      pbVar13 = pbVar12;
    } while (bVar1 != 0x3a);
    uVar15 = *pbVar11 - 0x30;
    bVar20 = uVar15 == 9;
    if (uVar15 < 10) {
      bVar20 = pbVar11 + 2 == pbVar12;
    }
    if (((bVar20) && ((int)uVar15 < 1)) && (*p1 = pbVar12, -1 < (int)uVar15)) {
LAB_800345e0:
      pcVar14 = *(char **)(DAT_80034a24 + uVar15 * 4);
      if (pcVar14 == (char *)0x0) {
        return 0xc;
      }
      *p2 = pcVar14;
      if ((*pcVar14 == '\0') || (uVar6 = FUN_80033318(pcVar14[1]), (uVar6 & 1) != 0)) {
        *pcVar14 = '\0';
        pcVar14[1] = (char)uVar15;
        uVar15 = sys_init_sd_card();
        if ((uVar15 & 1) != 0) {
          return 3;
        }
        bVar20 = (p3 & 0xfe) == 0;
        if (!bVar20) {
          bVar20 = (uVar15 & 4) == 0;
        }
        if (bVar20) {
          iVar16 = 0;
          *(undefined4 *)(pcVar14 + 0x30) = 0xffffffff;
          pcVar14[3] = '\0';
          iVar7 = FUN_80035ca8(pcVar14,0);
          if (iVar7 != 0) {
            return 1;
          }
          if (*(short *)(pcVar14 + 0x232) == -0x55ab) {
            cVar19 = pcVar14[0x34];
            if ((cVar19 == -0x17 || cVar19 == -0x15) || cVar19 == -0x18) {
              iVar7 = 3;
              pcVar8 = &DAT_80034a28;
              pcVar10 = pcVar14 + 0x6a;
              do {
                cVar19 = *pcVar10;
                cVar2 = *pcVar8;
                iVar7 = iVar7 + -1;
                if (iVar7 == 0) {
                  if (cVar19 == cVar2) goto LAB_80034800;
                  break;
                }
                pcVar8 = pcVar8 + 1;
                pcVar10 = pcVar10 + 1;
              } while (cVar19 == cVar2);
              iVar7 = 5;
              pcVar8 = &DAT_80034a2c;
              pcVar10 = pcVar14 + 0x86;
              do {
                cVar19 = *pcVar10;
                cVar2 = *pcVar8;
                iVar7 = iVar7 + -1;
                if (iVar7 == 0) {
                  if (cVar19 == cVar2) goto LAB_80034800;
                  break;
                }
                pcVar8 = pcVar8 + 1;
                pcVar10 = pcVar10 + 1;
              } while (cVar19 == cVar2);
            }
            uVar15 = 0;
            do {
              if ((pcVar14 + uVar15 * 0x10)[0x1f6] == '\0') {
                iVar7 = 0;
              }
              else {
                iVar7 = *(int *)(pcVar14 + uVar15 * 0x10 + 0x1fa);
              }
              aiStack56[uVar15] = iVar7;
              uVar15 = uVar15 + 1;
            } while (uVar15 < 4);
            uVar15 = 0;
            do {
              iVar16 = aiStack56[uVar15];
              if (iVar16 == 0) {
LAB_800347e0:
                uVar6 = 3;
              }
              else {
                pcVar14[3] = '\0';
                *(undefined4 *)(pcVar14 + 0x30) = 0xffffffff;
                iVar7 = FUN_80035ca8(pcVar14,iVar16);
                if (iVar7 == 0) {
                  if (*(short *)(pcVar14 + 0x232) != -0x55ab) goto LAB_800347e0;
                  cVar19 = pcVar14[0x34];
                  if ((cVar19 == -0x17 || cVar19 == -0x15) || cVar19 == -0x18) {
                    iVar7 = 3;
                    pcVar8 = &DAT_80034a28;
                    pcVar10 = pcVar14 + 0x6a;
                    do {
                      cVar19 = *pcVar10;
                      cVar2 = *pcVar8;
                      iVar7 = iVar7 + -1;
                      if (iVar7 == 0) {
                        if (cVar19 == cVar2) goto LAB_80034800;
                        break;
                      }
                      pcVar8 = pcVar8 + 1;
                      pcVar10 = pcVar10 + 1;
                    } while (cVar19 == cVar2);
                    iVar7 = 5;
                    pcVar8 = &DAT_80034a2c;
                    pcVar10 = pcVar14 + 0x86;
                    do {
                      cVar19 = *pcVar10;
                      cVar2 = *pcVar8;
                      iVar7 = iVar7 + -1;
                      if (iVar7 == 0) {
                        if (cVar19 == cVar2) goto LAB_80034800;
                        break;
                      }
                      pcVar8 = pcVar8 + 1;
                      pcVar10 = pcVar10 + 1;
                    } while (cVar19 == cVar2);
                  }
                  uVar6 = 2;
                }
                else {
                  uVar6 = 4;
                }
              }
              uVar15 = uVar15 + 1;
            } while (uVar15 < 4);
            if (uVar6 == 4) {
              return 1;
            }
            if (uVar6 < 2) {
LAB_80034800:
              if (*(short *)(pcVar14 + 0x3f) == 0x200) {
                uStack40 = (uint)*(ushort *)(pcVar14 + 0x4a);
                if (uStack40 == 0) {
                  uStack40 = *(uint *)(pcVar14 + 0x58);
                }
                uVar15 = (uint)(byte)pcVar14[0x44];
                *(uint *)(pcVar14 + 0x1c) = uStack40;
                pcVar14[2] = pcVar14[0x44];
                if (uVar15 == 1 || uVar15 == 2) {
                  uVar6 = (uint)(byte)pcVar14[0x41];
                  iVar7 = uVar15 * uStack40;
                  *(ushort *)(pcVar14 + 10) = (ushort)(byte)pcVar14[0x41];
                  if ((uVar6 != 0) && ((uVar6 & uVar6 - 1) == 0)) {
                    uVar3 = *(ushort *)(pcVar14 + 0x45);
                    *(ushort *)(pcVar14 + 8) = uVar3;
                    if ((uVar3 & 0xf) == 0) {
                      uVar15 = (uint)*(ushort *)(pcVar14 + 0x47);
                      if (uVar15 == 0) {
                        uVar15 = *(uint *)(pcVar14 + 0x54);
                      }
                      uVar17 = (uint)*(ushort *)(pcVar14 + 0x42);
                      if (((uVar17 != 0) &&
                          (uVar18 = uVar17 + iVar7 + (uint)(uVar3 >> 4), uVar18 <= uVar15)) &&
                         (uVar15 = divide(uVar15 - uVar18,uVar6), uVar15 != 0)) {
                        cVar19 = '\0';
                        if (uVar15 < 0xffffff6) {
                          cVar19 = '\x03';
                        }
                        if (uVar15 <= DAT_80034a34) {
                          cVar19 = '\x02';
                        }
                        if (DAT_80034a38 < uVar15) {
                          if (cVar19 == '\0') {
                            return 0xd;
                          }
                        }
                        else {
                          cVar19 = '\x01';
                        }
                        uVar15 = uVar15 + 2;
                        *(uint *)(pcVar14 + 0x18) = uVar15;
                        *(uint *)(pcVar14 + 0x24) = iVar16 + uVar17;
                        *(uint *)(pcVar14 + 0x2c) = iVar16 + uVar18;
                        *(int *)(pcVar14 + 0x20) = iVar16;
                        if (cVar19 == '\x03') {
                          if (*(short *)(pcVar14 + 0x5e) != 0 || uVar3 != 0) {
                            return 0xd;
                          }
                          iVar7 = uVar15 * 4;
                          *(undefined4 *)(pcVar14 + 0x28) = *(undefined4 *)(pcVar14 + 0x60);
                        }
                        else {
                          if (uVar3 == 0) {
                            return 0xd;
                          }
                          *(uint *)(pcVar14 + 0x28) = iVar16 + uVar17 + iVar7;
                          if (cVar19 == '\x02') {
                            iVar7 = uVar15 * 2;
                          }
                          else {
                            iVar7 = (uVar15 & 1) + (uVar15 * 3 >> 1);
                          }
                        }
                        if (iVar7 + 0x1ffU >> 9 <= uStack40) {
                          *(undefined4 *)(pcVar14 + 0x14) = 0xffffffff;
                          *(undefined4 *)(pcVar14 + 0x10) = 0xffffffff;
                          pcVar14[4] = -0x80;
                          if ((((cVar19 == '\x03') && (*(short *)(pcVar14 + 100) == 1)) &&
                              ((iVar7 = FUN_80035ca8(pcVar14,iVar16 + 1), iVar7 == 0 &&
                               ((pcVar14[4] = '\0', *(short *)(pcVar14 + 0x232) == -0x55ab &&
                                (*(int *)(pcVar14 + 0x34) == DAT_80034b9c)))))) &&
                             (*(int *)(pcVar14 + 0x218) == DAT_80034ba0)) {
                            *(undefined4 *)(pcVar14 + 0x14) = *(undefined4 *)(pcVar14 + 0x21c);
                            *(undefined4 *)(pcVar14 + 0x10) = *(undefined4 *)(pcVar14 + 0x220);
                          }
                          psVar4 = DAT_80034ba4;
                          *pcVar14 = cVar19;
                          sVar9 = *psVar4 + 1;
                          *psVar4 = sVar9;
                          uVar5 = DAT_80034ba8;
                          *(short *)(pcVar14 + 6) = sVar9;
                          *(undefined4 *)(pcVar14 + 0xc) = uVar5;
                          return 0;
                        }
                      }
                    }
                  }
                }
              }
            }
          }
          return 0xd;
        }
      }
      else {
        bVar20 = (p3 & 0xfe) == 0;
        if (!bVar20) {
          bVar20 = (uVar6 & 4) == 0;
        }
        if (bVar20) {
          return 0;
        }
      }
      return 10;
    }
  }
  return 0xb;
}



undefined8 FUN_80034bac(uint param_1,uint param_2)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  undefined uVar4;
  undefined8 uVar5;
  
  uVar3 = DAT_80034cc8 + ((param_2 << 1) >> 0x15);
  if (0x13 < (int)uVar3) {
    uVar4 = 0x32 < uVar3;
    if (0x33 < (int)uVar3) {
      return CONCAT44(param_2,param_1);
    }
    uVar1 = 0xffffffff >> (uVar3 - 0x14 & 0xff);
    if ((param_1 & uVar1) == 0) {
      return CONCAT44(param_2,param_1);
    }
    uVar5 = FUN_80039b5c(param_1,param_2,DAT_80034ccc,DAT_80034cd0);
    FUN_80039ad0((int)uVar5,(int)((ulonglong)uVar5 >> 0x20),0,0);
    if (!(bool)uVar4) {
      uVar2 = param_1;
      if ((int)param_2 < 0) {
        if (uVar3 == 0x14) {
          param_2 = param_2 + 1;
        }
        else {
          uVar2 = param_1 + (1 << (0x34 - uVar3 & 0xff));
          if (uVar2 < param_1) {
            param_2 = param_2 + 1;
          }
        }
      }
      param_1 = uVar2 & ~uVar1;
    }
    goto LAB_80034cbc;
  }
  uVar4 = 1;
  if ((int)uVar3 < 0) {
    uVar5 = FUN_8003926c();
    FUN_80039ad0((int)uVar5,(int)((ulonglong)uVar5 >> 0x20),0,0);
    if ((bool)uVar4) goto LAB_80034cbc;
    if (-1 < (int)param_2) {
      param_1 = 0;
      param_2 = param_1;
      goto LAB_80034cbc;
    }
    uVar3 = DAT_80034cd4;
    if ((param_2 & 0x7fffffff | param_1) == 0) goto LAB_80034cbc;
  }
  else {
    uVar1 = DAT_80034cd8 >> (uVar3 & 0xff);
    uVar4 = 1;
    if ((param_2 & uVar1 | param_1) == 0) {
      return CONCAT44(param_2,param_1);
    }
    uVar5 = FUN_8003926c();
    FUN_80039ad0((int)uVar5,(int)((ulonglong)uVar5 >> 0x20),0,0);
    if ((bool)uVar4) goto LAB_80034cbc;
    if ((int)param_2 < 0) {
      param_2 = param_2 + (0x100000U >> (uVar3 & 0xff));
    }
    uVar3 = param_2 & ~uVar1;
  }
  param_2 = uVar3;
  param_1 = 0;
LAB_80034cbc:
  return CONCAT44(param_2,param_1);
}



// WARNING: Restarted to delay deadcode elimination for space: stack

int FUN_80034d68(byte **param_1,byte *param_2)

{
  short sVar1;
  ushort uVar2;
  byte *pbVar3;
  byte *pbVar4;
  uint uVar5;
  undefined4 uVar6;
  int iVar7;
  uint uVar8;
  short *psVar9;
  uint uVar10;
  uint uVar11;
  byte *pbVar12;
  uint uVar13;
  short *psVar14;
  byte bVar15;
  bool bVar16;
  uint local_30;
  
  pbVar4 = *param_1;
  while (*param_2 == 0x2f || *param_2 == 0x5c) {
    param_2 = param_2 + 1;
  }
  param_1[2] = (byte *)0x0;
  if (0x1f < *param_2) {
LAB_80034dcc:
    psVar14 = *(short **)(*param_1 + 0xc);
    uVar13 = 0;
    pbVar12 = param_2;
    while( true ) {
      pbVar3 = pbVar12 + 1;
      uVar5 = (uint)*pbVar12;
      param_2 = pbVar3;
      if ((0x80 < uVar5) && (uVar5 < 0xff)) {
        param_2 = pbVar12 + 2;
        uVar8 = (uint)*pbVar3;
        if (uVar8 < 0x40) {
          return 6;
        }
        uVar10 = uVar8;
        if (0x7e < uVar8) {
          uVar10 = uVar8 - 0x80;
        }
        if (0x7e < uVar10) {
          return 6;
        }
        uVar5 = uVar8 + uVar5 * 0x100 & 0xfffeffff;
      }
      if ((uVar5 != 0) && (uVar5 = FUN_80034348(uVar5,0x3a8), uVar5 == 0)) {
        return 6;
      }
      if (uVar5 == 0xffffffff) {
        return 6;
      }
      if (0xffff < uVar5) {
        psVar9 = psVar14 + uVar13;
        uVar13 = uVar13 + 1;
        *psVar9 = (short)(uVar5 >> 0x10);
      }
      if ((uVar5 < 0x20) || (uVar5 == 0x2f || uVar5 == 0x5c)) break;
      if (uVar5 < 0x80) {
        pbVar12 = (byte *)0x80035148;
        while (*pbVar12 != 0) {
          if (*pbVar12 == uVar5) {
            return 6;
          }
          pbVar12 = pbVar12 + 1;
        }
      }
      if (0xfe < uVar13) {
        return 6;
      }
      psVar9 = psVar14 + uVar13;
      uVar13 = uVar13 + 1;
      *psVar9 = (short)uVar5;
      pbVar12 = param_2;
    }
    while (*param_2 == 0x2f || *param_2 == 0x5c) {
      param_2 = param_2 + 1;
    }
    if (uVar5 < 0x20) {
      bVar15 = 4;
    }
    else {
      bVar15 = 0;
    }
    while ((uVar13 != 0 && (psVar14[uVar13 - 1] == 0x20 || psVar14[uVar13 - 1] == 0x2e))) {
      uVar13 = uVar13 - 1;
    }
    psVar14[uVar13] = 0;
    uVar5 = 0;
    if (uVar13 == 0) {
      return 6;
    }
    while (psVar14[uVar5] == 0x20) {
      uVar5 = uVar5 + 1;
    }
    if ((uVar5 != 0) || (*psVar14 == 0x2e)) {
      bVar15 = bVar15 | 3;
    }
    while ((uVar13 != 0 && (psVar14[uVar13 - 1] != 0x2e))) {
      uVar13 = uVar13 - 1;
    }
    FUN_8003558c(param_1 + 8,0x20,0xb);
    uVar10 = 8;
    local_30 = 0;
    uVar8 = 0;
LAB_80034f6c:
    do {
      uVar11 = (uint)(ushort)psVar14[uVar5];
      uVar5 = uVar5 + 1;
      if (uVar11 == 0) goto LAB_80034fe8;
      if ((uVar11 != 0x20) && ((uVar11 != 0x2e || (uVar5 == uVar13)))) {
        if ((uVar10 <= uVar8) || (uVar5 == uVar13)) {
          if (uVar10 == 0xb) {
            bVar15 = bVar15 | 3;
            goto LAB_80034fe8;
          }
          if (uVar5 != uVar13) {
            bVar15 = bVar15 | 3;
          }
          if (uVar13 < uVar5) goto LAB_80034fe8;
          local_30 = (local_30 << 0x1a) >> 0x18;
          uVar10 = 0xb;
          uVar5 = uVar13;
          uVar8 = 8;
          goto LAB_80034f6c;
        }
        if (0x7f < uVar11) {
          bVar15 = bVar15 | 2;
          uVar6 = FUN_80034454(uVar11);
          uVar11 = FUN_800343bc(uVar6,0x3a8);
        }
        if (uVar11 < 0x100) {
          if (uVar11 == 0) {
LAB_80035078:
            bVar15 = bVar15 | 3;
            uVar11 = 0x5f;
          }
          else {
            pbVar12 = (byte *)0x80035154;
            while (*pbVar12 != 0) {
              if (*pbVar12 == uVar11) goto LAB_80035078;
              pbVar12 = pbVar12 + 1;
            }
            if (uVar11 - 0x41 < 0x1a) {
              local_30 = local_30 | 2;
            }
            if (uVar11 - 0x61 < 0x1a) {
              local_30 = local_30 | 1;
              uVar11 = uVar11 - 0x20 & 0xffff;
            }
          }
        }
        else {
          if (uVar10 - 1 <= uVar8) {
            bVar15 = bVar15 | 3;
            uVar8 = uVar10;
            goto LAB_80034f6c;
          }
          *(char *)((int)param_1 + uVar8 + 0x20) = (char)(uVar11 >> 8);
          uVar8 = uVar8 + 1;
        }
        *(char *)((int)param_1 + uVar8 + 0x20) = (char)uVar11;
        uVar8 = uVar8 + 1;
        goto LAB_80034f6c;
      }
      bVar15 = bVar15 | 3;
    } while( true );
  }
  *(undefined *)((int)param_1 + 0x2b) = 0x80;
  pbVar12 = *param_1;
  pbVar4 = param_1[2];
  param_1[4] = (byte *)0x0;
  if ((pbVar4 == (byte *)0x0) &&
     ((*pbVar12 < 3 || (pbVar4 = *(byte **)(pbVar12 + 0x28), pbVar4 == (byte *)0x0)))) {
    if (*(short *)(pbVar12 + 8) != 0) {
      pbVar3 = *(byte **)(pbVar12 + 0x28);
      param_1[6] = pbVar3;
LAB_80033118:
      param_1[5] = pbVar4;
      if (pbVar3 != (byte *)0x0) {
        param_1[6] = pbVar3;
        param_1[7] = pbVar12 + 0x34;
        return 0;
      }
    }
  }
  else {
    sVar1 = *(short *)(pbVar12 + 10);
    do {
      if (sVar1 != 0) {
        if (pbVar4 + -2 < (byte *)(*(int *)(pbVar12 + 0x18) + -2)) {
          pbVar3 = (byte *)((uint)*(ushort *)(pbVar12 + 10) * (int)(pbVar4 + -2) +
                           *(int *)(pbVar12 + 0x2c));
        }
        else {
          pbVar3 = (byte *)0x0;
        }
        param_1[6] = pbVar3;
        goto LAB_80033118;
      }
      pbVar4 = (byte *)FUN_800351e0(param_1);
      if (pbVar4 == (byte *)0xffffffff) {
        return 1;
      }
      bVar16 = pbVar4 == (byte *)0x2;
      pbVar3 = pbVar4;
      if ((byte *)0x1 < pbVar4) {
        pbVar3 = *(byte **)(pbVar12 + 0x18);
        bVar16 = pbVar3 == pbVar4;
      }
    } while (((byte *)0x1 < pbVar4 && pbVar4 <= pbVar3) && !bVar16);
  }
  return 2;
LAB_80034fe8:
  if (*(char *)(param_1 + 8) == -0x1b) {
    *(undefined *)(param_1 + 8) = 5;
  }
  if (uVar10 == 8) {
    local_30 = (local_30 << 0x1a) >> 0x18;
  }
  if (((~local_30 & 0xc) == 0) || ((~local_30 & 3) == 0)) {
    bVar15 = bVar15 | 2;
  }
  if ((bVar15 & 2) == 0) {
    if ((local_30 & 1) != 0) {
      bVar15 = bVar15 | 0x10;
    }
    if ((local_30 & 4) != 0) {
      bVar15 = bVar15 | 8;
    }
  }
  *(byte *)((int)param_1 + 0x2b) = bVar15;
  iVar7 = FUN_80032534(param_1);
  if (iVar7 != 0) {
    bVar16 = iVar7 == 4;
    if (bVar16) {
      bVar16 = (*(byte *)((int)param_1 + 0x2b) & 4) == 0;
    }
    if (bVar16) {
      return 5;
    }
    return iVar7;
  }
  if ((*(byte *)((int)param_1 + 0x2b) & 4) != 0) {
    return 0;
  }
  if ((*(byte *)((int)param_1 + 6) & 0x10) == 0) {
    return 5;
  }
  pbVar12 = pbVar4 + (*(ushort *)(param_1 + 4) & 0x1ff);
  uVar2 = *(ushort *)(pbVar12 + 0x4e);
  pbVar3 = (byte *)(uint)uVar2;
  if (*pbVar4 == 3) {
    pbVar3 = (byte *)CONCAT22(*(undefined2 *)(pbVar12 + 0x48),uVar2);
  }
  param_1[2] = pbVar3;
  goto LAB_80034dcc;
}



uint FUN_800351e0(char **param_1,char **param_2)

{
  char cVar1;
  int iVar2;
  char *pcVar3;
  uint uVar4;
  bool bVar5;
  
  pcVar3 = *param_1;
  bVar5 = param_2 == (char **)0x2;
  if ((char **)0x1 < param_2) {
    param_1 = *(char ***)(pcVar3 + 0x18);
    bVar5 = param_1 == param_2;
  }
  if (((char **)0x1 < param_2 && param_2 <= param_1) && !bVar5) {
    cVar1 = *pcVar3;
    if (cVar1 == '\x01') {
      uVar4 = (int)param_2 + ((uint)param_2 >> 1);
      iVar2 = FUN_80035ca8(pcVar3,*(int *)(pcVar3 + 0x24) + (uVar4 >> 9));
      if (iVar2 != 0) {
        return 0xffffffff;
      }
      cVar1 = pcVar3[(uVar4 & 0x1ff) + 0x34];
      iVar2 = FUN_80035ca8(pcVar3,*(int *)(pcVar3 + 0x24) + (uVar4 + 1 >> 9));
      if (iVar2 != 0) {
        return 0xffffffff;
      }
      if (((uint)param_2 & 1) == 0) {
        return CONCAT11(pcVar3[(uVar4 + 1 & 0x1ff) + 0x34],cVar1) & 0xffff0fff;
      }
      return (uint)(ushort)(CONCAT11(pcVar3[(uVar4 + 1 & 0x1ff) + 0x34],cVar1) >> 4);
    }
    if (cVar1 == '\x02') {
      iVar2 = FUN_80035ca8(pcVar3,*(int *)(pcVar3 + 0x24) + ((uint)param_2 >> 8));
      if (iVar2 != 0) {
        return 0xffffffff;
      }
      return (uint)*(ushort *)(pcVar3 + ((uint)param_2 & 0xff) * 2 + 0x34);
    }
    if (cVar1 == '\x03') {
      iVar2 = FUN_80035ca8(pcVar3,*(int *)(pcVar3 + 0x24) + ((uint)param_2 >> 7));
      if (iVar2 != 0) {
        return 0xffffffff;
      }
      return *(uint *)(pcVar3 + ((uint)param_2 & 0x7f) * 4 + 0x34) & 0xfffffff;
    }
  }
  return 1;
}



undefined4 FUN_80035314(void)

{
  return DAT_8003531c;
}



void main(void)

{
  int iVar1;
  undefined auStack568 [568];
  
  sys_clock_init();
  setup_mmu();
  sys_init_uart0(BAUD_115200);
  setup_timer_int();
  sys_spi0_init();
  fpga_init();
  turn_off_brightness();
  sys_init_display();
  setup_display_lib();
  tp_i2c_setup();
  iVar1 = check_sd_card((uint)auStack568,(uint)&DAT_8003545c,1);
  if (iVar1 != 0) {
    *(undefined *)(DAT_80035460 + 2) = 100;
    fpga_write_cmd('8');
    fpga_write_data(-0x16);
    fpga_write_data((uchar)DEFAULT_BRIGHTNESS);
    set_display_fg_color(0);
    display_fill_rect(0,0,800,0x1e0);
    set_display_fg_color(0xff0000);
    select_font(PTR_FONT_3_80035468);
    set_font_paint_mode(0);
    display_text(s_SD_ERROR_8003546c,0x1e,0x32);
    do {
                    // WARNING: Do nothing block with infinite loop
    } while( true );
  }
  check_hardware();
  some_usb_stuff();
  setup_power_mon_int();
  load_config_data();
  check_config_ok_refresh_it_on_fail();
  set_fpga_channel1_enable();
  set_fpga_channel2_enable();
  set_trigger_level_dividers();
  set_fpga_channel1_voltperdiv();
  set_fpga_channel2_voltperdiv();
  set_fpga_channel1_coupling();
  set_fpga_channel2_coupling();
  fpga_enable_system();
  init_parameter_conversion();
  set_fpga_trigger_timebase();
  set_fpga_trigger_channel();
  set_fpga_channel_trigger_channel();
  set_fpga_trigger_edge();
  set_fpga_trigger_level();
  set_fpga_trigger_mode();
  set_fpga_channel1_offset();
  set_fpga_channel2_offset();
  set_fpga_battery_level();
  another_functionality_test();
  FUN_8000a024();
  setup_main_screen();
  set_translated_brightness();
  do {
    monitor_battery();
    process_trace_data();
    display_trace_data();
    touch_handler();
  } while( true );
}



void setup_mmu_trans_table
               (uint baseaddress,uint param_2,uint param_3,uint param_4,uint memaddress,uint param_6
               ,uint param_7,uint param_8,uint cacheable)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  bool bVar5;
  
  uVar2 = param_3 >> 0x14 | param_4 << 0xc;
  uVar3 = memaddress >> 0x14;
  uVar4 = param_7 >> 0x14 | param_8 << 0xc;
  uVar1 = param_8 >> 0x14;
  while ((uVar1 | uVar4) != 0) {
    *(uint *)(baseaddress + uVar2 * 4) = uVar3 << 0x14 | 0xc10 | (cacheable & 3) << 2 | 2;
    bVar5 = uVar4 == 0;
    uVar4 = uVar4 - 1;
    uVar1 = uVar1 - bVar5;
    uVar2 = uVar2 + 1;
    uVar3 = uVar3 + 1;
  }
  return;
}



void FUN_80035518(undefined *param_1,undefined *param_2,uint param_3)

{
  undefined *puVar1;
  undefined *puVar2;
  int iVar3;
  
  if (param_3 == 0) {
    return;
  }
  if (0x7fffffff < param_3) {
    do {
      param_3 = param_3 - 1;
      *param_1 = *param_2;
      param_1 = param_1 + 1;
      param_2 = param_2 + 1;
    } while (param_3 != 0);
    return;
  }
  if ((int)param_3 < 2) {
    param_3 = 1;
  }
  else {
    if ((int)param_3 < 1) {
      return;
    }
  }
  puVar1 = param_1 + -1;
  puVar2 = param_2 + -1;
  if ((param_3 & 1) != 0) {
    *param_1 = *param_2;
    puVar1 = param_1;
    puVar2 = param_2;
  }
  iVar3 = (int)param_3 >> 1;
  if (iVar3 != 0) {
    do {
      iVar3 = iVar3 + -1;
      puVar1[1] = puVar2[1];
      puVar2 = puVar2 + 2;
      puVar1 = puVar1 + 2;
      *puVar1 = *puVar2;
    } while (iVar3 != 0);
    return;
  }
  return;
}



void FUN_8003558c(undefined *param_1,undefined param_2,uint param_3)

{
  undefined *puVar1;
  int iVar2;
  
  if (0x7fffffff < param_3) {
    do {
      param_3 = param_3 - 1;
      *param_1 = param_2;
      param_1 = param_1 + 1;
    } while (param_3 != 0);
    return;
  }
  if ((int)param_3 < 2) {
    param_3 = 1;
  }
  puVar1 = param_1 + -1;
  if ((param_3 & 1) != 0) {
    *param_1 = param_2;
    puVar1 = param_1;
  }
  iVar2 = (int)param_3 >> 1;
  if (iVar2 == 0) {
    return;
  }
  do {
    puVar1[1] = param_2;
    iVar2 = iVar2 + -1;
    puVar1 = puVar1 + 2;
    *puVar1 = param_2;
  } while (iVar2 != 0);
  return;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x80035680
// WARNING: Restarted to delay deadcode elimination for space: stack

undefined4 FUN_800355d8(int param_1,uint param_2)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  code *UNRECOVERED_JUMPTABLE;
  
  iVar2 = SD_MMC_0_BASE;
  iVar5 = SD_MMC_0_BASE + 0x1000;
  iVar4 = SD_MMC_0_BASE;
  if ((param_1 != 0) && (iVar4 = iVar5, param_1 != 1)) {
    iVar4 = 0;
  }
  iVar1 = SD_MMC_0_BASE;
  if ((param_1 != 0) && (iVar1 = iVar5, param_1 != 1)) {
    iVar1 = 0;
  }
  *(uint *)(iVar1 + 4) = *(uint *)(iVar1 + 4) & 0xfffeffff;
  iVar1 = FUN_80035c1c();
  if ((iVar1 == 0) && (iVar1 = param_1, sd_card_clk_init(param_1,param_2), iVar1 == 0)) {
    *(uint *)(iVar4 + 4) = *(uint *)(iVar4 + 4) & 0xffffff00;
    if ((param_1 != 0) && (iVar2 = iVar5, param_1 != 1)) {
      iVar2 = 0;
    }
    *(uint *)(iVar2 + 4) = *(uint *)(iVar2 + 4) | 0x10000;
    iVar2 = FUN_80035c1c();
    if (iVar2 == 0) {
                    // WARNING: Could not recover jumptable at 0x80035680. Too many branches
                    // WARNING: Treating indirect jump as call
      uVar3 = (*UNRECOVERED_JUMPTABLE)();
      return uVar3;
    }
  }
  return 0xffffffff;
}



void sd_card_clk_init(int param_1,uint param_2)

{
  uint *puVar1;
  uint uVar2;
  uint divisor;
  uint uVar3;
  int extraout_r1;
  int iVar4;
  int iVar5;
  uint uVar6;
  
  if (DAT_800358e0 < param_2) {
    uVar6 = 0x1000000;
    FUN_800376f8(DAT_800358e8,DAT_800358e4);
    puVar1 = PLL_PERIPH_CTRL_REG;
    *PLL_PERIPH_CTRL_REG = *PLL_PERIPH_CTRL_REG & 0x7fffffff;
    *puVar1 = *puVar1 & 0xfffff000;
    *puVar1 = *puVar1 | 0x1700;
    *puVar1 = *puVar1 | 0x80000000;
    uVar2 = *puVar1;
    uVar2 = divide_2((int)(short)((ushort)((uVar2 << 0x13) >> 0x1b) + 1) *
                     (int)(short)((ushort)((uVar2 << 0x1a) >> 0x1e) + 1) * DAT_800358e0,
                     (uVar2 & 3) + 1);
    FUN_800376f8(s_pll_hz___d_hz_800358f0,uVar2);
  }
  else {
    uVar6 = 0;
    uVar2 = DAT_800358e0;
  }
  divisor = divide(uVar2,param_2);
  if (extraout_r1 != 0) {
    divisor = divisor + 1;
  }
  uVar3 = 0;
  if (0x10 < divisor) {
    do {
      divisor = divisor + 1 >> 1;
      uVar3 = uVar3 + 1;
    } while (0x10 < divisor);
    if (3 < uVar3) {
      FUN_800376f8(s_mmc__u_error_cannot_set_clock_to_80035900,param_1,param_2);
      return;
    }
  }
  if (DAT_80035928 < param_2) {
    if (DAT_8003592c < param_2) {
      if (DAT_80035930 < param_2) {
        iVar5 = 1;
      }
      else {
        iVar5 = 3;
      }
      iVar4 = 4;
    }
    else {
      iVar5 = 0;
      iVar4 = 5;
    }
  }
  else {
    iVar4 = 0;
    iVar5 = iVar4;
  }
  *(uint *)(SDMMC0_CLK_REG + param_1 * 4) =
       uVar6 | iVar4 << 0x14 | uVar3 << 0x10 | iVar5 << 8 | divisor - 1 | 0x80000000;
  iVar5 = 1 << (uVar3 & 0xff);
  iVar4 = divide(uVar2,iVar5);
  iVar4 = divide(iVar4,divisor);
  FUN_800376f8(PTR_s_mmc__u_set__mod_clk_req__u___par_80035938,param_1,param_2,uVar2,iVar5,divisor,
               iVar4);
  return;
}



undefined4 FUN_8003593c(int param_1,int *param_2)

{
  byte bVar1;
  uint *puVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  bool bVar8;
  
  bVar1 = *(byte *)(param_2 + 1);
  iVar6 = *param_2;
  uVar5 = param_2[3] * param_2[2];
  if ((bVar1 & 1) == 0) {
    uVar7 = 8;
  }
  else {
    uVar7 = 4;
  }
  uVar4 = (uVar5 >> 8) * 1000;
  puVar2 = SD_MMC_0_BASE;
  if ((param_1 != 0) && (puVar2 = DAT_80035a34, param_1 != 1)) {
    puVar2 = (uint *)0x0;
  }
  if (uVar4 < DAT_80035a38) {
    uVar4 = DAT_80035a38;
  }
  *puVar2 = *puVar2 | 0x80000000;
  uVar3 = 0;
  if (uVar5 >> 2 != 0) {
    do {
      while ((puVar2[0xf] & uVar7) != 0) {
        bVar8 = uVar4 == 0;
        uVar4 = uVar4 - 1;
        if (bVar8) {
          FUN_800376f8(s_Data__d__timeout_BIT_0x_08x____80035a3c,uVar3,puVar2[0xf]);
          return 0xffffffff;
        }
        delay(5);
      }
      if ((bVar1 & 1) == 0) {
        puVar2[0x80] = *(uint *)(iVar6 + uVar3 * 4);
      }
      else {
        *(uint *)(iVar6 + uVar3 * 4) = puVar2[0x80];
      }
      uVar3 = uVar3 + 1;
    } while (uVar3 < uVar5 >> 2);
  }
  return 0;
}



undefined4 FUN_80035a60(int param_1,uint *param_2,uint param_3)

{
  uint uVar1;
  uint *puVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  undefined2 uVar7;
  uint *puVar8;
  
  uVar3 = (int)(uint *)param_2[2] * param_2[3];
  puVar8 = (uint *)param_2[2];
  if (param_1 == 0) {
    puVar8 = SD_MMC_0_BASE;
  }
  iVar5 = 0;
  if ((param_1 != 0) && (puVar8 = DAT_80035c14, param_1 != 1)) {
    puVar8 = (uint *)0x0;
  }
  uVar7 = (undefined2)(uVar3 & 0xfff);
  uVar4 = uVar3 >> 0xc;
  if ((uVar3 & 0xfff) == 0) {
    uVar7 = 0x1000;
  }
  else {
    uVar4 = uVar4 + 1;
  }
  uVar6 = *param_2;
  if (uVar4 < 0x101) {
    uVar1 = uVar6 & 0xffffffe0;
    while (uVar1 <= (uVar3 + uVar6 & 0xffffffe0)) {
      coproc_moveto_Invalidate_Data_Cache_by_MVA(uVar1);
      coproc_moveto_Invalidate_Instruction_Cache_by_MVA(uVar1);
      uVar1 = uVar1 + 0x20;
    }
    uVar3 = 0;
    if (uVar4 != 0) {
      do {
        puVar2 = (uint *)(param_3 + iVar5 * 0x10);
        puVar2[1] = 0;
        puVar2[2] = 0;
        puVar2[3] = 0;
        *puVar2 = (uint)&LAB_80000010_2;
        if ((uVar4 < 2) || (uVar3 == uVar4 - 1)) {
          *(undefined2 *)(puVar2 + 1) = uVar7;
        }
        else {
          *(undefined2 *)(puVar2 + 1) = 0x1000;
        }
        puVar2[2] = uVar6 + uVar3 * 0x1000;
        if (uVar3 == 0) {
          *puVar2 = (uint)&LAB_80000018_2;
        }
        if (uVar3 == uVar4 - 1) {
          *puVar2 = *puVar2 & 0xfffffffd | 0x24;
        }
        else {
          puVar2[3] = (uint)(puVar2 + 4);
        }
        uVar3 = uVar3 + 1;
        iVar5 = iVar5 + 1;
      } while (uVar3 < uVar4);
    }
    uVar3 = param_3 & 0xffffffe0;
    while (uVar3 <= (param_3 + iVar5 * 0x10 + 0x10 & 0xffffffe0)) {
      coproc_moveto_Invalidate_Data_Cache_by_MVA(uVar3);
      coproc_moveto_Invalidate_Instruction_Cache_by_MVA(uVar3);
      uVar3 = uVar3 + 0x20;
    }
    *puVar8 = *puVar8 & 0x7fffffff;
    *puVar8 = *puVar8 | 0x24;
    puVar8[0x20] = 1;
    do {
    } while ((puVar8[0x20] & 1) != 0);
    puVar8[0x20] = 0x82;
    if ((*(byte *)(param_2 + 1) & 2) == 0) {
      uVar3 = puVar8[0x23] & 0xfffffffc | 2;
    }
    else {
      uVar3 = puVar8[0x23] & 0xfffffffc | 1;
    }
    puVar8[0x23] = uVar3;
    puVar8[0x21] = param_3;
    puVar8[0x10] = DAT_80035c18;
    return 0;
  }
  return 0xffffffff;
}



undefined4 FUN_80035c1c(int param_1)

{
  int iVar1;
  uint *puVar2;
  bool bVar3;
  
  iVar1 = SD_MMC_0_BASE;
  if ((param_1 != 0) && (iVar1 = DAT_80035c8c, param_1 != 1)) {
    iVar1 = 0;
  }
  puVar2 = (uint *)(iVar1 + 0x18);
  *puVar2 = DAT_80035c90;
  iVar1 = DAT_80035c94;
  if ((*puVar2 & 0x80000000) != 0) {
    while (delay(5), (*puVar2 & 0x80000000) != 0) {
      bVar3 = iVar1 == 0;
      iVar1 = iVar1 + -1;
      if (bVar3) {
        FUN_800376f8(s_timeout____80035c98);
        return 0xffffffff;
      }
    }
  }
  return 0;
}



bool FUN_80035ca8(int param_1,int param_2)

{
  int iVar1;
  bool bVar2;
  
  bVar2 = false;
  if (*(int *)(param_1 + 0x30) != param_2) {
    if (*(char *)(param_1 + 3) != '\0') {
      iVar1 = FUN_80033320(*(undefined *)(param_1 + 1),param_1 + 0x34,*(int *)(param_1 + 0x30),1);
      bVar2 = iVar1 != 0;
      if (bVar2) {
        return bVar2;
      }
      *(undefined *)(param_1 + 3) = 0;
      if (((uint)(*(int *)(param_1 + 0x30) - *(int *)(param_1 + 0x24)) < *(uint *)(param_1 + 0x1c))
         && (*(char *)(param_1 + 2) == '\x02')) {
        FUN_80033320(*(undefined *)(param_1 + 1),param_1 + 0x34,
                     *(int *)(param_1 + 0x30) + *(uint *)(param_1 + 0x1c),1);
      }
    }
    iVar1 = FUN_80033274(*(undefined *)(param_1 + 1),param_1 + 0x34,param_2,1);
    if (iVar1 != 0) {
      param_2 = -1;
      bVar2 = true;
    }
    *(int *)(param_1 + 0x30) = param_2;
  }
  return bVar2;
}



void FUN_80035d58(void)

{
  return;
}



void FUN_80035d5c(char *param_1,uint param_2,uint param_3)

{
  char cVar1;
  int iVar2;
  byte extraout_r1;
  byte bVar3;
  byte bVar4;
  uint uVar5;
  char *pcVar6;
  byte bVar7;
  uint uVar8;
  char *unaff_r4;
  uint unaff_r5;
  uint uVar9;
  uint unaff_r6;
  code **ppcVar10;
  bool bVar11;
  bool bVar12;
  undefined auStack4 [4];
  
  ppcVar10 = (code **)&stack0xffffffe8;
  bVar12 = 1 < param_2;
  bVar11 = param_2 == 2;
  uVar5 = param_2;
  if (bVar12) {
    uVar5 = *(uint *)(param_1 + 0x18);
    bVar11 = uVar5 == param_2;
  }
  uVar9 = param_2;
  uVar8 = param_3;
  if ((!bVar12 || uVar5 < param_2) || bVar11) {
    ppcVar10 = (code **)auStack4;
    param_1 = unaff_r4;
    uVar9 = unaff_r5;
    uVar8 = unaff_r6;
  }
                    // WARNING: Could not recover jumptable at 0x80035d84. Too many branches
                    // WARNING: Treating indirect jump as call
  if ((!bVar12 || uVar5 < param_2) || bVar11) {
    (**ppcVar10)();
    return;
  }
  cVar1 = *param_1;
  bVar4 = (byte)uVar8;
  if (cVar1 == '\x01') {
    uVar5 = uVar9 + (uVar9 >> 1);
    iVar2 = FUN_80035ca8(param_1,*(int *)(param_1 + 0x24) + (uVar5 >> 9));
    bVar7 = (byte)param_3;
    if (iVar2 != 0) {
                    // WARNING: Could not recover jumptable at 0x80035e40. Too many branches
                    // WARNING: Treating indirect jump as call
      (*ppcVar10[5])();
      return;
    }
    bVar11 = (uVar9 & 1) != 0;
    bVar3 = extraout_r1;
    if (bVar11) {
      bVar3 = param_1[(uVar5 & 0x1ff) + 0x34];
    }
    if (bVar11) {
      bVar4 = bVar3 & 0xf | (byte)(uVar8 << 4);
    }
    param_1[(uVar5 & 0x1ff) + 0x34] = bVar4;
    param_1[3] = '\x01';
    iVar2 = FUN_80035ca8(param_1,*(int *)(param_1 + 0x24) + (uVar5 + 1 >> 9));
    if (iVar2 != 0) {
                    // WARNING: Could not recover jumptable at 0x80035e8c. Too many branches
                    // WARNING: Treating indirect jump as call
      (*ppcVar10[5])();
      return;
    }
    bVar11 = (uVar9 & 1) != 0;
    if (bVar11) {
      bVar7 = (byte)(uVar8 >> 4);
    }
    if (!bVar11) {
      bVar7 = param_1[(uVar5 + 1 & 0x1ff) + 0x34] & 0xf0U | (byte)((uVar8 << 0x14) >> 0x1c);
    }
    param_1[(uVar5 + 1 & 0x1ff) + 0x34] = bVar7;
  }
  else {
    if (cVar1 != '\x02') {
      if (cVar1 != '\x03') {
                    // WARNING: Could not recover jumptable at 0x80035da8. Too many branches
                    // WARNING: Treating indirect jump as call
        (*ppcVar10[5])(2);
        return;
      }
      iVar2 = FUN_80035ca8(param_1,*(int *)(param_1 + 0x24) + (uVar9 >> 7));
      if (iVar2 != 0) {
                    // WARNING: Could not recover jumptable at 0x80035dc4. Too many branches
                    // WARNING: Treating indirect jump as call
        (*ppcVar10[5])();
        return;
      }
      pcVar6 = param_1 + (uVar9 & 0x7f) * 4;
      uVar8 = uVar8 & 0xfffffff;
      pcVar6[0x34] = (char)uVar8;
      pcVar6[0x35] = (char)(uVar8 >> 8);
      pcVar6[0x36] = (char)(uVar8 >> 0x10);
      pcVar6[0x37] = pcVar6[0x37] & 0xf0U | (byte)(uVar8 >> 0x18);
      param_1[3] = '\x01';
                    // WARNING: Could not recover jumptable at 0x80035e20. Too many branches
                    // WARNING: Treating indirect jump as call
      (*ppcVar10[5])();
      return;
    }
    iVar2 = FUN_80035ca8(param_1,*(int *)(param_1 + 0x24) + (uVar9 >> 8));
    if (iVar2 != 0) {
                    // WARNING: Could not recover jumptable at 0x80035ee0. Too many branches
                    // WARNING: Treating indirect jump as call
      (*ppcVar10[5])();
      return;
    }
    (param_1 + (uVar9 & 0xff) * 2)[0x34] = bVar4;
    (param_1 + (uVar9 & 0xff) * 2)[0x35] = (char)(uVar8 >> 8);
  }
  param_1[3] = '\x01';
                    // WARNING: Could not recover jumptable at 0x80035f00. Too many branches
                    // WARNING: Treating indirect jump as call
  (*ppcVar10[5])();
  return;
}



undefined4 FUN_80035f04(undefined4 *param_1)

{
  return *param_1;
}



uint read32(uint *ptr)

{
  return *ptr;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x80035f64
// WARNING: Restarted to delay deadcode elimination for space: stack

undefined4 FUN_80035f1c(int *param_1,int *param_2,int param_3)

{
  int *piVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  code *UNRECOVERED_JUMPTABLE_00;
  bool bVar5;
  
  iVar4 = *param_1;
  bVar5 = param_2 == (int *)0x2;
  piVar1 = param_1;
  if (param_2 >= (int *)0x2) {
    piVar1 = *(int **)(iVar4 + 0x18);
    bVar5 = piVar1 == param_2;
  }
  if ((param_2 < (int *)0x2 || piVar1 < param_2) || bVar5) {
    return 2;
  }
  if ((param_3 != 0) && (iVar2 = FUN_80035d5c(iVar4,param_3,0xffffffff), iVar2 != 0)) {
                    // WARNING: Could not recover jumptable at 0x80035f64. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar3 = (*UNRECOVERED_JUMPTABLE_00)();
    return uVar3;
  }
  do {
    piVar1 = (int *)FUN_800351e0(param_1,param_2);
    if (piVar1 == (int *)0x0) break;
    if (piVar1 == (int *)0x1) {
      return 2;
    }
    if (piVar1 == (int *)0xffffffff) {
                    // WARNING: Could not recover jumptable at 0x80035ffc. Too many branches
                    // WARNING: Treating indirect jump as call
      uVar3 = (*UNRECOVERED_JUMPTABLE_00)(1);
      return uVar3;
    }
    iVar2 = FUN_80035d5c(iVar4,param_2,0);
    if (iVar2 != 0) {
                    // WARNING: Could not recover jumptable at 0x80035fa4. Too many branches
                    // WARNING: Treating indirect jump as call
      uVar3 = (*UNRECOVERED_JUMPTABLE_00)();
      return uVar3;
    }
    if (*(uint *)(iVar4 + 0x14) < (int)*(int **)(iVar4 + 0x18) - 2U) {
      *(uint *)(iVar4 + 0x14) = *(uint *)(iVar4 + 0x14) + 1;
      *(byte *)(iVar4 + 4) = *(byte *)(iVar4 + 4) | 1;
    }
    param_2 = piVar1;
  } while (piVar1 < *(int **)(iVar4 + 0x18));
                    // WARNING: Could not recover jumptable at 0x80035fe4. Too many branches
                    // WARNING: Treating indirect jump as call
  uVar3 = (*UNRECOVERED_JUMPTABLE_00)(0);
  return uVar3;
}



void FUN_80036000(int param_1,uint param_2)

{
  uint uVar1;
  undefined4 uVar2;
  int local_18;
  uint uStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  
  uVar1 = param_2 & 0x7fffffff;
  if (uVar1 + DAT_800360dc == 0 || (int)(uVar1 + DAT_800360dc) < 0 != SCARRY4(uVar1,DAT_800360dc)) {
    uStack16 = 0;
    uStack12 = 0;
    uVar2 = 0;
LAB_800360a8:
    FUN_80031ad4(param_1,param_2,uStack16,uStack12,uVar2);
    return;
  }
  if (uVar1 == DAT_800360e0) {
    if (param_1 == 0) {
      FUN_80000bee(1);
      FUN_80031c40();
      return;
    }
  }
  else {
    if ((int)uVar1 < (int)DAT_800360e0) {
      uVar1 = FUN_80031358(param_1,param_2,&local_18);
      uVar1 = uVar1 & 3;
      if (uVar1 != 0) {
        if (uVar1 != 1) {
          if (uVar1 == 2) {
            FUN_80031ad4(local_18,uStack20,uStack16,uStack12,1);
          }
          else {
            FUN_8003186c(local_18,uStack20,uStack16,uStack12);
          }
          return;
        }
        FUN_8003186c(local_18,uStack20,uStack16,uStack12);
        return;
      }
      uVar2 = 1;
      param_1 = local_18;
      param_2 = uStack20;
      goto LAB_800360a8;
    }
  }
  FUN_80031c38();
  return;
}



void setup_spi(uint spi)

{
  undefined4 *port;
  undefined4 *port_00;
  uint uVar1;
  int iVar2;
  uint *puVar3;
  uint uVar4;
  
  port_00 = PORT_E_CFG0;
  port = PORT_C_CFG0;
  if (spi == 0) {
    gpio_config_pin(PORT_C_CFG0,0,2);
    gpio_config_pin(port,1,2);
    gpio_config_pin(port,2,2);
    gpio_config_pin(port,3,2);
  }
  else {
    if (spi == 1) {
      gpio_config_pin(PORT_E_CFG0,7,4);
      gpio_config_pin(port_00,8,4);
      gpio_config_pin(port_00,9,4);
      gpio_config_pin(port_00,10,4);
    }
  }
  puVar3 = BUS_SOFT_RST_REG0;
  uVar4 = *BUS_SOFT_RST_REG0;
  uVar1 = FUN_8000056c(1,0,spi + 0x14);
  *puVar3 = uVar4 | uVar1;
  puVar3 = puVar3 + -0x98;
  *puVar3 = uVar1 | *puVar3;
  iVar2 = SPI0_BASE + spi * 0x1000;
  *(undefined4 *)(iVar2 + 0x24) = DAT_80036248;
  puVar3 = (uint *)(iVar2 + 4);
  *puVar3 = *puVar3 | 0x80000083;
  do {
  } while ((*puVar3 & 0x80000000) != 0);
  *(uint *)(iVar2 + 8) = *(uint *)(iVar2 + 8) & 0xfffffffc | 0x44;
  *(uint *)(iVar2 + 0x18) = *(uint *)(iVar2 + 0x18) | 0x80008000;
  return;
}



undefined8 FUN_80036618(uint param_1,uint param_2)

{
  uint uVar1;
  undefined8 uVar2;
  
  uVar2 = FUN_80039b74();
  uVar1 = (uint)uVar2;
  if (uVar1 != 0) {
    uVar1 = 1;
  }
  if ((int)(DAT_80036678 - ((uVar1 | (uint)((ulonglong)uVar2 >> 0x20)) & 0x7fffffff)) < 0) {
    if (param_1 != 0) {
      param_1 = 1;
    }
    if (-1 < (int)(DAT_80036678 - ((param_1 | param_2) & 0x7fffffff))) {
      thunk_FUN_80000bee(1);
    }
  }
  return uVar2;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xfffffffc : 0x80036d88
// WARNING: Restarted to delay deadcode elimination for space: stack

void FUN_80036d3c(int param_1,ushort *param_2,uint *param_3)

{
  uint uVar1;
  char *pcVar2;
  uint *puVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  uint *puVar7;
  uint uVar8;
  undefined4 uVar9;
  uint *puVar10;
  uint *puVar11;
  code *UNRECOVERED_JUMPTABLE_00;
  bool bVar12;
  bool bVar13;
  
  puVar10 = SD_MMC_0_BASE;
  bVar12 = false;
  puVar11 = SD_MMC_0_BASE + 0x400;
  puVar7 = SD_MMC_0_BASE;
  if ((param_1 != 0) && (puVar7 = puVar11, param_1 != 1)) {
    puVar7 = (uint *)0x0;
  }
  if (*param_2 == 0xc) {
                    // WARNING: Could not recover jumptable at 0x80036d88. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE_00)();
    return;
  }
  uVar1 = *(uint *)(param_2 + 2);
  uVar8 = 0x80000000;
  if (*param_2 == 0) {
    uVar8 = DAT_800370e0;
  }
  if ((uVar1 & 1) != 0) {
    uVar8 = uVar8 | 0x40;
  }
  if ((uVar1 & 2) != 0) {
    uVar8 = uVar8 | 0x80;
  }
  if ((uVar1 & 4) != 0) {
    uVar8 = uVar8 | 0x100;
  }
  if (param_3 == (uint *)0x0) {
LAB_80036e08:
    puVar7[7] = *(uint *)(param_2 + 4);
    if (param_3 == (uint *)0x0) {
      puVar7[6] = *param_2 | uVar8;
    }
    else {
      if (param_3[2] * param_3[3] < 0x41) {
        puVar7[6] = *param_2 | uVar8;
        iVar6 = FUN_8003593c(param_1,param_3);
        if (iVar6 != 0) {
          FUN_800376f8(s_error__08x_80037104,DAT_80037100 & puVar7[0xe]);
LAB_80037038:
          uVar9 = 0xffffff68;
          goto LAB_8003703c;
        }
      }
      else {
        bVar12 = true;
        FUN_80035a60(param_1,param_3,DAT_800370fc);
        puVar7[6] = *param_2 | uVar8;
      }
    }
    iVar6 = DAT_80037114;
    uVar8 = DAT_80037100;
    puVar3 = puVar10;
    if ((param_1 != 0) && (puVar3 = puVar11, param_1 != 1)) {
      puVar3 = (uint *)0x0;
    }
    iVar5 = DAT_80037114;
    do {
      uVar1 = puVar3[0xe];
      bVar13 = iVar5 == 0;
      iVar5 = iVar5 + -1;
      if ((bVar13) || ((uVar1 & DAT_80037100) != 0)) {
        FUN_800376f8(PTR_s_ERR__mmc_d_tmier___d__timeout__x_80037118,param_1,iVar5,
                     uVar1 & DAT_80037100);
        pcVar2 = s_ERR1_8003711c;
        goto LAB_80037000;
      }
    } while ((uVar1 & 4) == 0);
    uVar9 = 0;
    if (bVar12) {
      puVar3 = puVar10;
      if ((param_1 != 0) && (puVar3 = puVar11, param_1 != 1)) {
        puVar3 = (uint *)0x0;
      }
      puVar3 = puVar3 + 0x22;
      uVar1 = (uint)((*puVar3 & 1) != 0);
      if ((*puVar3 & 2) != 0) {
        uVar1 = uVar1 | 2;
      }
      bVar13 = uVar1 == 0;
      if (bVar13) {
        do {
          if (!bVar13) goto LAB_80036fa0;
          puVar3 = puVar10;
          if ((param_1 != 0) && (puVar3 = puVar11, param_1 != 1)) {
            puVar3 = (uint *)0x0;
          }
          uVar1 = (uint)((puVar3[0x22] & 1) != 0);
          if ((puVar3[0x22] & 2) != 0) {
            uVar1 = uVar1 | 2;
          }
          bVar13 = uVar1 == 0;
        } while (bVar13);
        puVar3[0x22] = uVar1 | puVar3[0x22];
      }
      else {
        *puVar3 = uVar1 | *puVar3;
      }
    }
LAB_80036fa0:
    if (param_3 != (uint *)0x0) {
      if (param_3[2] < 2) {
        uVar1 = 8;
      }
      else {
        uVar1 = 0x4000;
      }
      if ((param_1 != 0) && (puVar10 = puVar11, param_1 != 1)) {
        puVar10 = (uint *)0x0;
      }
LAB_80036fd4:
      uVar4 = puVar10[0xe];
      bVar13 = iVar6 != 0;
      iVar6 = iVar6 + -1;
      if ((bVar13) && ((uVar4 & uVar8) == 0)) goto LAB_80037008;
      FUN_800376f8(PTR_s_ERR__mmc_d_tmier___d__timeout__x_80037118,param_1,iVar6,uVar4 & uVar8);
      pcVar2 = s_ERR2_80037124;
LAB_80037000:
      uVar9 = 0xffffff68;
      FUN_800376f8(pcVar2);
      goto LAB_8003703c;
    }
LAB_80037010:
    if ((*(uint *)(param_2 + 2) & 8) != 0) {
      iVar6 = DAT_8003712c;
      do {
        bVar13 = iVar6 == 0;
        iVar6 = iVar6 + -1;
        if (bVar13) {
          FUN_800376f8(s_busy_timeout_80037130);
          goto LAB_80037038;
        }
      } while ((puVar7[0xf] & 0x200) != 0);
    }
    *(uint *)(param_2 + 6) = puVar7[8];
    *(uint *)(param_2 + 8) = puVar7[9];
    if ((*(uint *)(param_2 + 2) & 2) != 0) {
      *(uint *)(param_2 + 10) = puVar7[10];
      *(uint *)(param_2 + 0xc) = puVar7[0xb];
    }
  }
  else {
    if ((*(byte *)param_3 & 3) == 0) {
      uVar1 = uVar8 | 0x2200;
      if ((*(byte *)(param_3 + 1) & 2) != 0) {
        uVar1 = uVar8 | 0x2600;
      }
      uVar8 = uVar1;
      if (1 < param_3[2]) {
        uVar8 = uVar8 | 0x1000;
      }
      puVar7[4] = param_3[3];
      puVar7[5] = param_3[3] * param_3[2];
      goto LAB_80036e08;
    }
    uVar9 = 0xffffffff;
    FUN_800376f8(s_Addr_Align_Err_____800370e4);
LAB_8003703c:
    FUN_800376f8(s_err_reset____80037140);
    *puVar7 = 7;
    FUN_80035c1c(param_1);
  }
  if (param_3 != (uint *)0x0 && bVar12) {
    puVar7[0x22] = puVar7[0x22];
    puVar7[0x23] = 0;
    puVar7[0x20] = 0;
  }
  puVar7[0xe] = puVar7[0xe];
  *puVar7 = *puVar7 | 6;
  bVar12 = param_3 == (uint *)0x0;
  if (!bVar12) {
    bVar12 = (*(byte *)(param_3 + 1) & 1) == 0;
  }
  if (!bVar12) {
    uVar8 = *param_3 & 0xffffffe0;
    while (uVar8 <= (param_3[2] * param_3[3] + *param_3 & 0xffffffe0)) {
      coproc_moveto_Invalidate_Data_Cache_by_MVA(uVar8);
      coproc_moveto_Invalidate_Instruction_Cache_by_MVA(uVar8);
      uVar8 = uVar8 + 0x20;
    }
  }
                    // WARNING: Could not recover jumptable at 0x800370d8. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE_00)(uVar9);
  return;
LAB_80037008:
  if ((uVar4 & uVar1) != 0) goto LAB_80037010;
  goto LAB_80036fd4;
}



// WARNING: Removing unreachable block (ram,0x8002964c)

void FUN_800371f0(void)

{
  FUN_80035d58(s_sunxi_udc_enable_called_8003725c);
  *(undefined *)(DAT_80037278 + 1) = 0;
  FUN_80035d58(s_CONFIG_USB_GADGET_DUALSPEED__USB_8003727c);
  FUN_80029714(4,3);
  FUN_80029bf8(0);
  FUN_80029bf8(1);
  FUN_80029bf8(2);
  FUN_80029bf8(5);
  FUN_80029bb8(2,0);
  FUN_80035d58(s_usbd_start_work_800372ac);
  *(byte *)(DAT_80029658 + 0x40) = *(byte *)(DAT_80029658 + 0x40) | 0x40;
  return;
}



undefined4 FUN_800372c0(char *param_1)

{
  char cVar1;
  int iVar2;
  undefined4 uVar3;
  bool bVar4;
  
  if (param_1[3] != '\0') {
    iVar2 = FUN_80033320(param_1[1],param_1 + 0x34,*(undefined4 *)(param_1 + 0x30),1);
    if (iVar2 != 0) {
      return 1;
    }
    param_1[3] = '\0';
    if (((uint)(*(int *)(param_1 + 0x30) - *(int *)(param_1 + 0x24)) < *(uint *)(param_1 + 0x1c)) &&
       (param_1[2] == '\x02')) {
      FUN_80033320(param_1[1],param_1 + 0x34,*(int *)(param_1 + 0x30) + *(uint *)(param_1 + 0x1c),1)
      ;
    }
  }
  cVar1 = *param_1;
  bVar4 = cVar1 == '\x03';
  if (bVar4) {
    cVar1 = param_1[4];
  }
  if (bVar4 && cVar1 == '\x01') {
    FUN_8003558c(param_1 + 0x34,0,0x200);
    param_1[0x232] = 'U';
    param_1[0x233] = -0x56;
    param_1[0x34] = 'R';
    param_1[0x35] = 'R';
    param_1[0x36] = 'a';
    param_1[0x37] = 'A';
    param_1[0x218] = 'r';
    param_1[0x219] = 'r';
    param_1[0x21a] = 'A';
    param_1[0x21b] = 'a';
    uVar3 = *(undefined4 *)(param_1 + 0x14);
    param_1[0x21c] = (char)uVar3;
    param_1[0x21d] = (char)((uint)uVar3 >> 8);
    param_1[0x21e] = (char)((uint)uVar3 >> 0x10);
    param_1[0x21f] = (char)((uint)uVar3 >> 0x18);
    uVar3 = *(undefined4 *)(param_1 + 0x10);
    param_1[0x220] = (char)uVar3;
    param_1[0x221] = (char)((uint)uVar3 >> 8);
    param_1[0x222] = (char)((uint)uVar3 >> 0x10);
    param_1[0x223] = (char)((uint)uVar3 >> 0x18);
    *(int *)(param_1 + 0x30) = *(int *)(param_1 + 0x20) + 1;
    FUN_80033320(param_1[1],param_1 + 0x34,*(int *)(param_1 + 0x20) + 1,1);
    param_1[4] = '\0';
  }
  iVar2 = FUN_8003319c(param_1[1],0);
  if (iVar2 != 0) {
    return 1;
  }
  return 0;
}



//                     FUNCTION
// 
// Basically used to enable global interrupt flag
// Called with 0x7F clears the I bit
// Several options available based on the input, but
// lead to two options 
// "and" cpsr_c with the input
// "or" cpsr_c with the input

void change_status_reg_control_bits(uchar control)

{
  return;
}



void setup_mmu(void)

{
  uint baseaddress;
  
  baseaddress = Translation_Table_Base_Address;
  setup_mmu_trans_table(Translation_Table_Base_Address,0x80000000,0,0,0,0,0x80000000,0,0);
  setup_mmu_trans_table(baseaddress,0,0x80000000,0,0x80000000,0,0x80000000,0,0);
  setup_mmu_trans_table(baseaddress,0x80000000,0x80000000,0,0x80000000,0,0x2000000,0,3);
  mmu_set_base_address(baseaddress);
  mmu_clear_wb_tlb();
  mmu_set_domain_access(1);
  mmu_enable();
  mmu_instr_cache_enable();
  mmu_data_cache_enable();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

uint spi0_start_transfer(void)

{
  int in_r0;
  uint uVar1;
  undefined *in_r1;
  undefined *in_r2;
  undefined *puVar2;
  uint in_r3;
  int iVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  
  iVar5 = SPI0_BASE + in_r0 * 0x1000;
  if (0 < (int)in_r3) {
    uVar4 = in_r3;
    do {
      uVar1 = uVar4;
      if (0x40 < (int)uVar4) {
        uVar1 = 0x40;
      }
      *(uint *)(iVar5 + 0x30) = uVar1;
      uVar6 = uVar1;
      if (in_r1 == (undefined *)0x0) {
        uVar6 = 0;
      }
      *(uint *)(iVar5 + 0x34) = uVar6 & 0xffffff;
      *(uint *)(iVar5 + 0x38) = uVar6 & 0xffffff;
      iVar3 = 0;
      if (0 < (int)uVar6) {
        puVar2 = in_r1;
        do {
          *(undefined *)(iVar5 + 0x200) = *puVar2;
          iVar3 = iVar3 + 1;
          puVar2 = puVar2 + 1;
        } while (iVar3 < (int)uVar6);
      }
      *(uint *)(iVar5 + 8) = *(uint *)(iVar5 + 8) | 0x80000000;
      do {
      } while ((*(uint *)(iVar5 + 0x1c) & 0xff) < uVar1);
      iVar3 = 0;
      puVar2 = in_r2;
      if (0 < (int)uVar1) {
        do {
          iVar3 = iVar3 + 1;
          in_r2 = puVar2;
          if (puVar2 != (undefined *)0x0) {
            in_r2 = puVar2 + 1;
            *puVar2 = *(undefined *)(iVar5 + 0x300);
          }
          puVar2 = in_r2;
        } while (iVar3 < (int)uVar1);
      }
      if (in_r1 != (undefined *)0x0) {
        in_r1 = in_r1 + uVar1;
      }
      uVar4 = uVar4 - uVar1;
    } while (0 < (int)uVar4);
  }
  return in_r3;
}



void FUN_800376f8(byte *param_1,byte *param_2,undefined4 param_3,undefined4 param_4)

{
  byte bVar1;
  byte bVar2;
  byte **ppbVar3;
  uint *puVar4;
  uint *puVar5;
  uint uVar6;
  int iVar7;
  uint extraout_r1;
  char cVar8;
  int iVar9;
  byte *dividend;
  int iVar10;
  byte *pbVar11;
  byte *pbVar12;
  uint uVar13;
  uint uVar14;
  byte **ppbVar15;
  bool bVar16;
  bool bVar17;
  byte abStack105 [41];
  uint local_40;
  int local_3c;
  byte *local_10;
  byte *apbStack12 [3];
  
  apbStack12[2] = (byte *)param_4;
  apbStack12[1] = (byte *)param_3;
  apbStack12[0] = param_2;
  local_10 = param_1;
  bVar1 = *param_1;
  ppbVar3 = apbStack12;
  puVar4 = DAT_80037bb8;
joined_r0x80037718:
  if (bVar1 == 0) {
    DAT_80037bb8 = puVar4;
    return;
  }
  bVar1 = *local_10;
  DAT_80037bb8 = puVar4;
  if (bVar1 == 0x25) {
    uVar6 = (uint)local_10[1];
    uVar14 = 0;
    uVar13 = 0x20;
    ppbVar15 = ppbVar3 + 1;
    dividend = *ppbVar3;
    if (uVar6 == 0x30) {
      uVar13 = 0x30;
    }
    bVar16 = false;
    iVar7 = 0;
    pbVar11 = local_10 + 2;
    if (uVar6 != 0) {
      do {
        if (9 < uVar6 - 0x30) {
          if (uVar6 == 100) {
LAB_80037a94:
            iVar7 = -10;
            break;
          }
          if (uVar6 < 0x65) {
            if (uVar6 == 0x2d) {
              bVar16 = true;
              goto LAB_800377b8;
            }
            if (uVar6 < 0x2e) {
              if (uVar6 == 0) {
                pbVar11 = pbVar11 + -1;
                goto LAB_80037bb0;
              }
              if (uVar6 == 0x25) {
                uVar14 = 0x25;
                do {
                } while ((puVar4[0x1f] & 2) == 0);
LAB_800379c4:
                *DAT_80037bb8 = uVar14;
                goto LAB_80037bb0;
              }
            }
            else {
              if (uVar6 == 0x58) {
LAB_80037a9c:
                iVar7 = 0x10;
                break;
              }
              if (uVar6 == 99) {
                if (bVar16) {
                  do {
                  } while ((puVar4[0x1f] & 2) == 0);
                  *puVar4 = (uint)dividend & 0x7f;
                }
                puVar4 = DAT_80037bb8;
                if ((0 < (int)uVar14) && (iVar7 = uVar14 - 2, iVar7 != -1)) {
                  do {
                    do {
                    } while ((puVar4[0x1f] & 2) == 0);
                    *puVar4 = uVar13;
                    bVar17 = iVar7 != 0;
                    iVar7 = iVar7 + -1;
                  } while (bVar17);
                }
                if (bVar16) goto LAB_80037bb0;
                uVar14 = (uint)dividend & 0x7f;
                do {
                } while ((DAT_80037bb8[0x1f] & 2) == 0);
                goto LAB_800379c4;
              }
            }
          }
          else {
            if (uVar6 == 0x73) {
              if (bVar16) {
                bVar1 = *dividend;
                pbVar12 = dividend;
                while (bVar1 != 0) {
                  do {
                  } while ((puVar4[0x1f] & 2) == 0);
                  *puVar4 = (uint)bVar1;
                  pbVar12 = pbVar12 + 1;
                  bVar1 = *pbVar12;
                }
              }
              uVar6 = FUN_800005bc(dividend);
              if (uVar6 < uVar14) {
                iVar7 = FUN_800005bc(dividend);
                puVar4 = DAT_80037bb8;
                iVar7 = uVar14 - iVar7;
                while (iVar7 != 0) {
                  iVar7 = iVar7 + -1;
                  do {
                  } while ((puVar4[0x1f] & 2) == 0);
                  *puVar4 = uVar13;
                }
              }
              puVar4 = DAT_80037bb8;
              if (!bVar16) {
                bVar1 = *dividend;
                while (bVar1 != 0) {
                  do {
                  } while ((puVar4[0x1f] & 2) == 0);
                  *puVar4 = (uint)bVar1;
                  dividend = dividend + 1;
                  bVar1 = *dividend;
                }
              }
              goto LAB_80037bb0;
            }
            if (uVar6 < 0x74) {
              if (uVar6 == 0x69) goto LAB_80037a94;
              if (uVar6 != 0x6f) goto LAB_80037928;
              iVar7 = 8;
              break;
            }
            if (uVar6 == 0x75) {
              iVar7 = 10;
              break;
            }
            if (uVar6 == 0x78) goto LAB_80037a9c;
          }
LAB_80037928:
          iVar7 = 3;
          break;
        }
        uVar14 = (uVar6 + uVar14 * 10) - 0x30;
LAB_800377b8:
        pbVar12 = pbVar11 + 1;
        uVar6 = (uint)*pbVar11;
        pbVar11 = pbVar12;
      } while (uVar6 != 0);
      if (bVar16) {
        uVar14 = -uVar14;
      }
    }
    if (uVar13 == 0) {
      uVar13 = 0x20;
    }
    bVar16 = (int)uVar14 < 0;
    local_40 = 0;
    local_3c = 0;
    if (bVar16) {
      uVar14 = -uVar14;
      local_40 = 1;
    }
    local_40 = (uint)bVar16;
    if (0x50 < uVar14) {
      uVar14 = 0;
    }
    bVar16 = iVar7 < 0;
    if (bVar16) {
      iVar7 = -iVar7;
    }
    iVar10 = 0;
    if (bVar16 && (int)dividend < 0) {
      dividend = (byte *)-(int)dividend;
      local_3c = 1;
    }
LAB_80037820:
    do {
      iVar9 = iVar10;
      if (iVar7 == 0x10) {
        uVar6 = (uint)dividend & 0xf;
        dividend = (byte *)((uint)dividend >> 4);
      }
      else {
        dividend = (byte *)divide((int)dividend,iVar7);
        uVar6 = extraout_r1 & 0xffff;
      }
      puVar4 = DAT_80037bb8;
      if (uVar6 < 10) {
        cVar8 = '0';
      }
      else {
        cVar8 = '7';
      }
      abStack105[iVar9 + 1] = (char)uVar6 + cVar8;
      iVar10 = iVar9 + 1;
      if (dividend == (byte *)0x0) goto LAB_80037aa4;
      if (iVar7 == 10) {
        if (iVar10 != 3 && iVar10 != 7) {
          if (iVar10 == 0xb) {
            bVar1 = 1;
LAB_80037890:
            bVar2 = 0;
          }
          else {
            bVar1 = 0;
            if (iVar10 != 0xf) goto LAB_80037890;
            bVar2 = 1;
          }
          if (!(bool)(bVar1 | bVar2)) goto LAB_80037820;
        }
        abStack105[iVar9 + 2] = 0x2c;
        iVar10 = iVar9 + 2;
      }
    } while( true );
  }
  local_10 = local_10 + 1;
  do {
  } while ((puVar4[0x1f] & 2) == 0);
  *puVar4 = (uint)bVar1;
  ppbVar15 = ppbVar3;
  goto LAB_80037754;
LAB_80037aa4:
  if (local_3c != 0) {
    abStack105[iVar9 + 2] = 0x2d;
    iVar10 = iVar9 + 2;
  }
  if (iVar10 < (int)uVar14) {
    iVar9 = uVar14 - iVar10;
    iVar7 = iVar9;
    puVar5 = DAT_80037bb8;
    if (local_40 == 0) {
      while (puVar5 = DAT_80037bb8, iVar7 != 0) {
        do {
        } while ((puVar4[0x1f] & 2) == 0);
        *puVar4 = uVar13;
        iVar7 = iVar7 + -1;
      }
    }
    while (puVar4 = DAT_80037bb8, 0 < iVar10) {
      do {
      } while ((DAT_80037bb8[0x1f] & 2) == 0);
      *DAT_80037bb8 = (uint)abStack105[iVar10];
      DAT_80037bb8 = puVar5;
      iVar10 = iVar10 + -1;
      puVar5 = DAT_80037bb8;
      DAT_80037bb8 = puVar4;
    }
    DAT_80037bb8 = puVar5;
    if (local_40 != 0) {
      while (iVar9 != 0) {
        iVar9 = iVar9 + -1;
        do {
        } while ((puVar5[0x1f] & 2) == 0);
        *puVar5 = uVar13;
      }
    }
  }
  else {
    while (0 < iVar10) {
      do {
      } while ((puVar4[0x1f] & 2) == 0);
      *puVar4 = (uint)abStack105[iVar10];
      iVar10 = iVar10 + -1;
    }
  }
LAB_80037bb0:
  local_10 = pbVar11;
LAB_80037754:
  bVar1 = *local_10;
  ppbVar3 = ppbVar15;
  puVar4 = DAT_80037bb8;
  goto joined_r0x80037718;
}



int FUN_80037c44(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  bool bVar7;
  int iStack40;
  
  FUN_800376f8(s_com_Len__d_80037c88);
  iVar2 = FUN_80037f54(1,param_1,param_2);
  iVar1 = DAT_8003805c;
  bVar7 = iVar2 == 0;
  if (bVar7) {
    iVar2 = param_2 << 0x17;
    bVar7 = iVar2 == 0;
  }
  if (!bVar7) {
    return iVar2;
  }
  iStack40 = DAT_8003805c;
  iVar6 = *(int *)(DAT_80038060 + 4);
  iVar2 = 0;
  iVar5 = 0;
  FUN_80035d58(&DAT_80038064,param_1);
  if (*(int *)(DAT_80038068 + 4) == 0) {
    FUN_80035d58(s_usb_device_write_data_faild__usb_800380ac);
    return -1;
  }
  FUN_80035d58(s_usb_device_write_data_len__d_8003806c,0);
  uVar3 = FUN_80029e4c(1);
  FUN_80029e00(1);
LAB_80037fb4:
  do {
    iVar4 = FUN_800298c4(2);
    if (iVar4 != 0) {
      iStack40 = iStack40 + -1;
      if (iStack40 != 0) goto LAB_80037fb4;
    }
    iVar4 = iVar6;
    if (iVar2 <= iVar6) {
      iVar4 = iVar2;
    }
    FUN_80029e5c(uVar3,iVar4,param_1 + iVar5);
    FUN_800299ac(2,1);
    iVar5 = iVar5 + iVar4;
    iVar2 = iVar2 - iVar4;
    if (iStack40 == 0) {
      FUN_80035d58(s_usb_device_write_data_Time_out__8003808c);
      return -1;
    }
    iStack40 = iVar1;
    if (iVar2 < 1) {
      return 0;
    }
  } while( true );
}



void FUN_80037c94(uint param_1,int param_2,undefined4 param_3)

{
  int iVar1;
  undefined uVar2;
  
  if (param_1 == 0) {
    return;
  }
  FUN_80035d58(s_config_int_ep__d__d____d_80037d34,param_1,param_2,param_3);
  uVar2 = FUN_80029aec();
  FUN_80029e00(param_1 & 0xff);
  FUN_8002965c(param_3,2,1,param_2);
  iVar1 = DAT_80037d50;
  FUN_8002958c(2,1,param_2 * 2,*(undefined4 *)(DAT_80037d50 + 0x18));
  *(int *)(iVar1 + 0x18) = *(int *)(iVar1 + 0x18) + param_2 * 2;
  FUN_80029bb8(2,param_1 & 0xff);
  FUN_80029e00(uVar2);
  *(int *)(iVar1 + 0x20 + param_1 * 4) = param_2;
  return;
}



void FUN_80037d54(uint param_1,int param_2,undefined4 param_3)

{
  int iVar1;
  undefined uVar2;
  
  if (param_1 == 0) {
    return;
  }
  FUN_80035d58(s_config_out_ep__d__d____d_80037df4,param_1,param_2,param_3);
  uVar2 = FUN_80029aec();
  FUN_80029e00(param_1 & 0xff);
  FUN_8002965c(param_3,3,1,param_2);
  iVar1 = DAT_80037e10;
  FUN_8002958c(3,1,param_2 * 2,*(undefined4 *)(DAT_80037e10 + 0x18));
  *(int *)(iVar1 + 0x18) = *(int *)(iVar1 + 0x18) + param_2 * 2;
  FUN_80029bb8(3,param_1 & 0xff);
  FUN_80029e00(uVar2);
  *(int *)(iVar1 + 0x20 + param_1 * 4) = param_2;
  return;
}



void FUN_80037e14(uint param_1)

{
  undefined uVar1;
  undefined4 uVar2;
  
  uVar1 = FUN_80029aec();
  FUN_80029e00(param_1 & 0x7f);
  if ((param_1 & 0x80) == 0) {
    uVar2 = 3;
  }
  else {
    uVar2 = 2;
  }
  FUN_80029540(uVar2);
  *(undefined *)(DAT_80029e0c + 0x42) = uVar1;
  return;
}



void thunk_FUN_80029778(void)

{
  *(ushort *)(DAT_8002978c + 0x82) = *(ushort *)(DAT_8002978c + 0x82) | 0x80;
  return;
}



void some_usb_stuff_2(int param)

{
  FUN_800376f8(s_usb_init____80037ec4);
  if ((uint)*DAT_80037ed4 != param) {
    *DAT_80037ed4 = (byte)param;
    FUN_80038f04();
    FUN_80029c48();
    FUN_80029574();
    FUN_80029a0c();
    FUN_80029a28();
    FUN_80029a44(2);
    FUN_80029a98(2);
    FUN_80029e10(0,0);
    return;
  }
  FUN_800376f8(s_usb_type_err____80037ed8);
  return;
}



undefined4 FUN_80037eec(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  undefined4 uVar1;
  
  uVar1 = FUN_80029e4c();
  FUN_80029dac(uVar1,param_3,param_2);
  return 0;
}



// WARNING: Removing unreachable block (ram,0x80029924)
// WARNING: Removing unreachable block (ram,0x8002992c)
// WARNING: Removing unreachable block (ram,0x80029950)
// WARNING: Removing unreachable block (ram,0x80029958)
// WARNING: Removing unreachable block (ram,0x80029960)
// WARNING: Removing unreachable block (ram,0x80029934)

undefined4 FUN_80037f10(int param_1)

{
  undefined2 uVar1;
  
  if (param_1 == 0) {
    uVar1 = 0x40;
  }
  else {
    uVar1 = 0x48;
  }
  *(undefined2 *)(DAT_80029974 + 0x82) = uVar1;
  return 0;
}



// WARNING: Removing unreachable block (ram,0x800299dc)
// WARNING: Removing unreachable block (ram,0x800299e0)
// WARNING: Removing unreachable block (ram,0x800299e4)
// WARNING: Removing unreachable block (ram,0x800299c4)
// WARNING: Removing unreachable block (ram,0x800299cc)
// WARNING: Removing unreachable block (ram,0x800299e8)
// WARNING: Removing unreachable block (ram,0x800299f0)
// WARNING: Removing unreachable block (ram,0x800299f8)

undefined4 FUN_80037f1c(void)

{
  *(undefined2 *)(DAT_80029a08 + 0x82) = 10;
  return 0;
}



void FUN_80037f28(undefined param_1)

{
  FUN_80029988();
  *(undefined *)(DAT_80037f40 + 2) = param_1;
  return;
}



void FUN_80037f44(undefined4 param_1)

{
  *(undefined4 *)(DAT_80037f50 + 8) = param_1;
  return;
}



undefined4 FUN_80037f54(uint param_1,int param_2,int param_3)

{
  int iVar1;
  undefined4 uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int local_28;
  
  iVar1 = DAT_8003805c;
  local_28 = DAT_8003805c;
  iVar5 = *(int *)(DAT_80038060 + param_1 * 4);
  iVar4 = 0;
  FUN_80035d58(&DAT_80038064);
  if (*(int *)(DAT_80038068 + 4) == 0) {
    FUN_80035d58(s_usb_device_write_data_faild__usb_800380ac);
    return 0xffffffff;
  }
  FUN_80035d58(s_usb_device_write_data_len__d_8003806c,param_3);
  uVar2 = FUN_80029e4c(param_1);
  FUN_80029e00(param_1 & 0xff);
LAB_80037fb4:
  do {
    iVar3 = FUN_800298c4(2);
    if (iVar3 != 0) {
      local_28 = local_28 + -1;
      if (local_28 != 0) goto LAB_80037fb4;
    }
    iVar3 = iVar5;
    if (param_3 <= iVar5) {
      iVar3 = param_3;
    }
    FUN_80029e5c(uVar2,iVar3,param_2 + iVar4);
    FUN_800299ac(2,1);
    iVar4 = iVar4 + iVar3;
    param_3 = param_3 - iVar3;
    if (local_28 == 0) {
      FUN_80035d58(s_usb_device_write_data_Time_out__8003808c);
      return 0xffffffff;
    }
    local_28 = iVar1;
    if (param_3 < 1) {
      return 0;
    }
  } while( true );
}



undefined4 FUN_800380dc(int param_1,void *param_2,int param_3)

{
  int iVar1;
  undefined4 uVar2;
  
  memcpy(DAT_80038188,param_2,param_3);
  iVar1 = DAT_8003818c;
  *(int *)(DAT_8003818c + 0xc) = param_3;
  *(void **)(iVar1 + 0x1c) = param_2;
  FUN_80035d58(s_CTRL_IN_LEN____d_80038190,param_3);
  if (*(int *)(iVar1 + 0x20 + param_1 * 4) < param_3) {
    uVar2 = FUN_80029e4c(param_1);
    FUN_80029e5c(uVar2,*(undefined4 *)(iVar1 + 0x20 + param_1 * 4),param_2);
    if (param_1 == 0) {
      uVar2 = 1;
    }
    else {
      uVar2 = 2;
    }
    FUN_800299ac(uVar2,0);
    uVar2 = 0x40;
  }
  else {
    uVar2 = FUN_80029e4c(param_1);
    FUN_80029e5c(uVar2,param_3,param_2);
    if (param_1 == 0) {
      uVar2 = 1;
    }
    else {
      uVar2 = 2;
    }
    FUN_800299ac(uVar2,1);
    uVar2 = 0;
  }
  *(undefined4 *)(iVar1 + 0x10) = uVar2;
  return 0;
}



void FUN_800381b8(void)

{
  char cVar1;
  int iVar2;
  undefined4 uVar3;
  char *pcVar4;
  undefined4 uVar5;
  int iVar6;
  bool bVar7;
  byte local_20;
  undefined local_1f;
  undefined local_1e;
  undefined local_1d;
  undefined local_1c;
  undefined local_1b;
  undefined local_1a;
  undefined local_19;
  
  FUN_80029e00(0);
  iVar2 = FUN_8002985c(1);
  pcVar4 = DAT_80038408;
  if (iVar2 == 0) {
    iVar2 = FUN_80029790();
    if (iVar2 != 0) {
      FUN_80035d58(s_handle_ep0__ep0_setup_end_8003841c);
      FUN_80029778();
      *(undefined4 *)(pcVar4 + 8) = 0;
    }
    FUN_80035d58(s_usb_ep0_state__d_80038438,*(undefined4 *)(pcVar4 + 8));
    uVar3 = FUN_80029978();
    FUN_80035d58(s_ep0csr_0x_02x_8003844c,uVar3);
    iVar2 = FUN_8002988c(1);
    if (iVar2 != 0) {
      *(undefined4 *)(pcVar4 + 8) = 0;
    }
    iVar2 = *(int *)(pcVar4 + 8);
    if (iVar2 == 0) {
      iVar2 = FUN_8002988c(1);
      if (iVar2 != 0) {
        iVar2 = FUN_80029d7c(1);
        FUN_80035d58(s_ep0_len___d__80038484,iVar2);
        if (iVar2 != 8) {
          iVar6 = 0xf;
          do {
            iVar2 = FUN_80029d7c(1);
            bVar7 = iVar6 == 0;
            iVar6 = iVar6 + -1;
            if (bVar7) {
              FUN_80035d58(s_ep0_len_wait___d__80038494,iVar2);
              if (iVar2 != 8) {
                FUN_80035d58(s_ERR__data_len____d__not_setup_da_800384cc,iVar2);
                FUN_8002990c(1,0);
                FUN_8002980c(1);
                return;
              }
              goto LAB_800382c4;
            }
          } while (iVar2 != 8);
          FUN_80035d58(s_ep0_len_wait___d__80038494,8);
        }
LAB_800382c4:
        uVar3 = FUN_80029e4c(0);
        FUN_80029dac(uVar3,iVar2,&local_20);
        FUN_8002990c(1,0);
        if ((local_20 & 0x80) == 0) {
          uVar3 = 2;
        }
        else {
          uVar3 = 1;
        }
        *(undefined4 *)(pcVar4 + 8) = uVar3;
        cVar1 = *pcVar4;
        if ((cVar1 != '\x01' && cVar1 != '\x02') && (cVar1 != '\x03' && cVar1 != '\x04')) {
          FUN_80035d58(s_ERR__usb_class__d_not_suppost____800384a8);
          return;
        }
        FUN_80038f60(&local_20,iVar2);
        return;
      }
      pcVar4 = s_ERR__data_is_ready__can_not_read_8003845c;
LAB_80038628:
      FUN_80035d58(pcVar4);
      return;
    }
    if (iVar2 == 1) {
      if (*(int *)(pcVar4 + 0x10) == 0) {
        FUN_80035d58(s_in_data_has_sended__80038638);
      }
      else {
        FUN_80035d58(s_in_data_is_not_write_ok__800384f4);
        FUN_80035d58(s_usb_tx_pos____d_80038510,*(undefined4 *)(pcVar4 + 0x10));
        FUN_80035d58(s_usb_tx_buf_len____d_80038524,*(undefined4 *)(pcVar4 + 0xc));
        if (0x40 < *(int *)(pcVar4 + 0xc) - *(int *)(pcVar4 + 0x10)) {
          uVar3 = FUN_80029e4c(0);
          FUN_80029e5c(uVar3,*DAT_8003853c,*(int *)(pcVar4 + 0x1c) + *(int *)(pcVar4 + 0x10));
          FUN_800299ac(1,0);
          *(int *)(pcVar4 + 0x10) = *(int *)(pcVar4 + 0x10) + 0x40;
          return;
        }
        FUN_80035d58(s_write_end_80038650);
        uVar3 = FUN_80029e4c(0);
        FUN_80029e5c(uVar3,*(int *)(pcVar4 + 0xc) - *(int *)(pcVar4 + 0x10),
                     *(int *)(pcVar4 + 0x1c) + *(int *)(pcVar4 + 0x10));
        FUN_800299ac(1);
        *(undefined4 *)(pcVar4 + 0x10) = 0;
      }
    }
    else {
      if (iVar2 == 2) {
        iVar2 = FUN_8002988c(1);
        if (iVar2 != 0) {
          uVar3 = FUN_80029d7c(1);
          FUN_80035d58(s_ep0_out_intr_len___d__80038690,uVar3);
          uVar5 = FUN_80029e4c(0);
          FUN_80029dac(uVar5,uVar3,&local_20);
          FUN_8002990c(1,0);
          *(undefined4 *)(pcVar4 + 8) = 0;
          FUN_80035d58(PTR_s_d_0___0x_02x_data_1___0x_02x_dat_800386a8,local_20,local_1f,local_1e,
                       local_1d,local_1c,local_1b,local_1a,local_19);
          return;
        }
        pcVar4 = s_ep0_out_intr__data_is_ready__can_8003865c;
        goto LAB_80038628;
      }
      if (iVar2 == 3) {
        pcVar4[3] = '\0';
      }
    }
  }
  else {
    FUN_80035d58(s_ERR__ep0_stall_8003840c);
    FUN_800297a4(1);
  }
  *(undefined4 *)(pcVar4 + 8) = 0;
  return;
}



void FUN_80038788(uint param_1)

{
  char cVar1;
  undefined4 uVar2;
  char *pcVar3;
  undefined uVar4;
  int iVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  
  FUN_80035d58(s_USB_out_ep_d_irq_8003888c,param_1);
  uVar4 = FUN_80029aec();
  FUN_80029e00(param_1 & 0xff);
  iVar5 = FUN_8002985c(3);
  if (iVar5 != 0) {
    FUN_80035d58(s_ERR__rx_ep__d__is_stall_800388a0,param_1);
    FUN_800297a4(3);
  }
  iVar5 = FUN_8002988c(3);
  if (iVar5 != 0) {
    uVar6 = FUN_80029d7c(3);
    FUN_80035d58(s_rx_ep__d__data_ready_Len__d__800388bc,param_1,uVar6);
    uVar2 = DAT_800388dc;
    uVar7 = FUN_80029e4c(param_1);
    FUN_80029dac(uVar7,uVar6,uVar2);
    pcVar3 = DAT_800388e0;
    *(undefined4 *)(DAT_800388e0 + 0x14) = uVar6;
    cVar1 = *pcVar3;
    if (cVar1 == '\x01') {
      FUN_80038974(DAT_800388dc,uVar6);
    }
    else {
      if (cVar1 == '\x02') {
        FUN_80037c44(DAT_800388dc);
      }
      else {
        if (cVar1 == '\x03') {
          FUN_800390e4(DAT_800388dc);
        }
        else {
          if (cVar1 == '\x04') {
            thunk_FUN_800203c4(uVar2);
          }
        }
      }
    }
    FUN_8002990c(3,1);
  }
  *(undefined *)(DAT_80029e0c + 0x42) = uVar4;
  return;
}



undefined4 FUN_8003896c(void)

{
  return 0;
}



undefined4 FUN_80038974(int param_1,int param_2)

{
  int iVar1;
  undefined4 uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iStack40;
  
  FUN_800376f8(s_hid_Len__d_8003899c);
  iVar1 = DAT_8003805c;
  iStack40 = DAT_8003805c;
  iVar5 = *(int *)(DAT_80038060 + 4);
  iVar4 = 0;
  FUN_80035d58(&DAT_80038064,param_1);
  if (*(int *)(DAT_80038068 + 4) == 0) {
    FUN_80035d58(s_usb_device_write_data_faild__usb_800380ac);
    return 0xffffffff;
  }
  FUN_80035d58(s_usb_device_write_data_len__d_8003806c,param_2);
  uVar2 = FUN_80029e4c(1);
  FUN_80029e00(1);
LAB_80037fb4:
  do {
    iVar3 = FUN_800298c4(2);
    if (iVar3 != 0) {
      iStack40 = iStack40 + -1;
      if (iStack40 != 0) goto LAB_80037fb4;
    }
    iVar3 = iVar5;
    if (param_2 <= iVar5) {
      iVar3 = param_2;
    }
    FUN_80029e5c(uVar2,iVar3,param_1 + iVar4);
    FUN_800299ac(2,1);
    iVar4 = iVar4 + iVar3;
    param_2 = param_2 - iVar3;
    if (iStack40 == 0) {
      FUN_80035d58(s_usb_device_write_data_Time_out__8003808c);
      return 0xffffffff;
    }
    iStack40 = iVar1;
    if (param_2 < 1) {
      return 0;
    }
  } while( true );
}



void FUN_800389a8(void)

{
  char cVar1;
  char *pcVar2;
  undefined4 uVar3;
  undefined uVar4;
  undefined uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  int iVar9;
  int iVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  
  uVar4 = FUN_80029aec();
  uVar6 = FUN_80029c38();
  uVar7 = FUN_80029c10(2);
  uVar8 = FUN_80029c10(3);
  FUN_80029b5c(0x80);
  FUN_80029b5c(0x40);
  FUN_80029b5c(0x10);
  FUN_80029b5c(8);
  FUN_80035d58(s_________________________________80038c0c);
  FUN_80035d58(s__irq__usb_irq__02x__tx_irq__02x__80038c30,uVar6 & 0xffffff27,uVar7,uVar8,0);
  pcVar2 = DAT_80038c6c;
  if ((uVar6 & 4) != 0) {
    FUN_80035d58(s_IRQ__reset_80038c70);
    FUN_80029b5c(4);
    FUN_80029b30(2);
    FUN_80029b30(3);
    FUN_80029b6c();
    *(undefined4 *)(pcVar2 + 4) = 1;
    *(undefined4 *)(pcVar2 + 8) = 0;
    FUN_80029e00(0);
    *(undefined *)(DAT_800299a8 + 0x98) = 0;
    return;
  }
  if ((uVar6 & 2) != 0) {
    FUN_80035d58(s_IRQ__resume_80038c7c);
    FUN_80029b5c(2);
    *(undefined4 *)(pcVar2 + 4) = 1;
  }
  if ((uVar6 & 1) != 0) {
    FUN_80035d58(s_IRQ__suspend_80038c8c);
    FUN_80029b5c(1);
    *(undefined4 *)(pcVar2 + 4) = 0;
    *(undefined4 *)(pcVar2 + 8) = 0;
  }
  if ((uVar6 & 0x20) != 0) {
    FUN_80035d58(s_IRQ__disconnect_80038c9c);
    FUN_80029b5c(0x20);
    *(undefined4 *)(pcVar2 + 8) = 0;
    *(undefined4 *)(pcVar2 + 4) = 0;
  }
  if ((uVar7 & 1) != 0) {
    FUN_80035d58(s_USB_ep0_irq_80038cb0);
    FUN_80029afc(2,0);
    if (pcVar2[1] == '\0') {
      iVar9 = FUN_800298f0();
      iVar10 = DAT_80038cc0;
      if (iVar9 == 3) {
        pcVar2[1] = '\x03';
        *(undefined4 *)(iVar10 + 4) = 0x200;
        *(undefined4 *)(iVar10 + 8) = 0x200;
        FUN_80035d58(s__________________________________80038cc4);
        FUN_80035d58(s__usb_enter_high_speed__80038e40);
        FUN_80035d58(s__________________________________80038cc4);
      }
      else {
        pcVar2[1] = '\x02';
        *(undefined4 *)(iVar10 + 4) = 0x40;
        *(undefined4 *)(iVar10 + 8) = 0x40;
        FUN_80035d58(s__________________________________80038cc4);
        FUN_80035d58(s__usb_enter_full_speed__80038cec);
        FUN_80035d58(s__________________________________80038cc4);
      }
    }
    FUN_800381b8();
  }
  uVar6 = 1;
  do {
    if ((uVar8 & 1 << (uVar6 & 0xff)) != 0) {
      FUN_80029afc(3,uVar6 & 0xff);
      FUN_80035d58(PTR_s_USB_out_ep_d_irq_80038d04,uVar6);
      uVar5 = FUN_80029aec();
      FUN_80029e00(uVar6 & 0xff);
      iVar10 = FUN_8002985c(3);
      if (iVar10 != 0) {
        FUN_80035d58(PTR_s_ERR__rx_ep__d__is_stall_80038d08,uVar6);
        FUN_800297a4(3);
      }
      iVar10 = FUN_8002988c(3);
      if (iVar10 != 0) {
        uVar11 = FUN_80029d7c(3);
        FUN_80035d58(PTR_s_rx_ep__d__data_ready_Len__d__80038d0c,uVar6,uVar11);
        uVar3 = DAT_80038d10;
        uVar12 = FUN_80029e4c(uVar6);
        FUN_80029dac(uVar12,uVar11,uVar3);
        *(undefined4 *)(pcVar2 + 0x14) = uVar11;
        cVar1 = *pcVar2;
        if (cVar1 == '\x01') {
          FUN_80038974(DAT_80038d10,uVar11);
        }
        else {
          if (cVar1 == '\x02') {
            FUN_80037c44(DAT_80038d10);
          }
          else {
            if (cVar1 == '\x03') {
              FUN_800390e4(DAT_80038d10);
            }
            else {
              if (cVar1 == '\x04') {
                thunk_FUN_800203c4(uVar3);
              }
            }
          }
        }
        FUN_8002990c(3,1);
      }
      FUN_80029e00(uVar5);
    }
    uVar6 = uVar6 + 1;
  } while ((int)uVar6 < 4);
  uVar6 = 1;
  do {
    if ((uVar7 & 1 << (uVar6 & 0xff)) != 0) {
      FUN_80029afc(2,uVar6 & 0xff);
      FUN_80035d58(PTR_s_USB_in_ep_d_irq_80038e58,uVar6);
      uVar5 = FUN_80029aec();
      FUN_80029e00(uVar6 & 0xff);
      iVar10 = FUN_8002985c(2);
      if (iVar10 != 0) {
        FUN_80035d58(PTR_s_ERR__tx_ep__d__is_stall_80038e5c,uVar6);
        FUN_800297a4(2);
      }
      iVar10 = FUN_800298c4(2);
      if (iVar10 == 0) {
        FUN_80035d58(PTR_s_tx_ep__d__data_ready__80038e60,uVar6);
        if (*pcVar2 == '\x01') {
          FUN_8003896c();
        }
        else {
          if (*pcVar2 == '\x04') {
            FUN_80038ef0();
          }
        }
      }
      FUN_80029e00(uVar5);
    }
    uVar6 = uVar6 + 1;
  } while ((int)uVar6 < 4);
  *(undefined *)(DAT_80029e0c + 0x42) = uVar4;
  return;
}



undefined4 FUN_80038ef0(void)

{
  FUN_80020310();
  return 0;
}



// WARNING (jumptable): Heritage AFTER dead removal. Example location: s0xffffffe8 : 0x80023b28
// WARNING: Removing unreachable block (ram,0x80002c14)
// WARNING: Removing unreachable block (ram,0x80002c1c)
// WARNING: Removing unreachable block (ram,0x80002c20)
// WARNING: Removing unreachable block (ram,0x80002c24)
// WARNING: Removing unreachable block (ram,0x80002c30)
// WARNING: Restarted to delay deadcode elimination for space: stack

char * thunk_FUN_800203c4(undefined4 param_1,undefined2 param_2)

{
  byte bVar1;
  ushort uVar2;
  int *piVar3;
  byte *pbVar4;
  char *pcVar5;
  int iVar6;
  int iVar7;
  undefined *puVar8;
  int iVar9;
  int iVar10;
  undefined4 *puVar11;
  ushort *puVar12;
  undefined uVar13;
  char cVar14;
  uint uVar15;
  uint uVar16;
  char *pcVar17;
  undefined *puVar18;
  undefined4 uVar19;
  char *pcVar20;
  char *pcVar21;
  uint uVar22;
  int iVar23;
  int iVar24;
  int iVar25;
  int iVar26;
  bool bVar27;
  
  iVar23 = DAT_80020470;
  pcVar21 = DAT_8002046c;
  pbVar4 = DAT_80020468;
  bVar1 = *DAT_80020468;
  *DAT_80020468 = bVar1 | 0x10;
  cVar14 = *(char *)(iVar23 + 0xf);
  *(undefined2 *)(pcVar21 + 2) = param_2;
  *(undefined4 *)(pcVar21 + 4) = param_1;
  piVar3 = DAT_80002fa8;
  iVar24 = DAT_80002fa4;
  if (*pcVar21 != '\0') {
    if (*pcVar21 == '\x01') {
      if (cVar14 == '*') {
        *pbVar4 = bVar1 | 0x11;
        bVar1 = *(byte *)(iVar23 + 0xd);
        iVar23 = *(int *)(pcVar21 + 8);
        iVar24 = *(int *)(pcVar21 + 0xc);
LAB_80023e4c:
        pcVar5 = DAT_8002cdc0;
        iVar25 = DAT_8002ccb4;
        pcVar20 = DAT_8002ccb0;
        iVar26 = DAT_80023ed8;
        pcVar21 = DAT_80023ed4;
        pcVar17 = (char *)(uint)bVar1;
        if (*DAT_80023ed4 != '\0') {
          if (*DAT_80023ed4 != '\x01') {
            return pcVar17;
          }
          if (*(int *)(DAT_8002ccec + 0x30) == 1) {
            if (*DAT_8002cdc0 == '\0') {
              *(int *)(DAT_8002cdc0 + 0x18) = iVar23;
              *(int *)(pcVar5 + 0x1c) = iVar24;
              *(undefined4 *)(pcVar5 + 0x20) = 0;
              *pcVar5 = '\x01';
            }
            else {
              if (*DAT_8002cdc0 != '\x01') goto LAB_8002cd64;
            }
            memcpy((void *)(DAT_8002cdc4 + *(int *)(pcVar5 + 0x20) * 0x200),*DAT_8002cdc8,0x200);
            puVar12 = DAT_8002cdd0;
            iVar24 = DAT_8002cdcc;
            *(int *)(pcVar5 + 0x20) = *(int *)(pcVar5 + 0x20) + 1;
            *(uint *)(iVar24 + 8) = *(int *)(iVar24 + 8) - (uint)*puVar12;
LAB_8002cd64:
            if ((*(uint *)(pcVar5 + 0x20) < *(uint *)(pcVar5 + 0x1c)) &&
               ((char *)(uint)*DAT_8002cdd4 != (char *)0x4)) {
              return (char *)(uint)*DAT_8002cdd4;
            }
            cVar14 = FUN_80024730(0,*(undefined4 *)(pcVar5 + 0x18),*(uint *)(pcVar5 + 0x1c),
                                  DAT_8002cdc4);
            if (cVar14 != '\0') {
              pcVar5[1] = pcVar5[1] | 4;
            }
            *(undefined4 *)(pcVar5 + 0x20) = 0;
            pcVar21 = (char *)FUN_80026858(0,1);
            *pcVar5 = '\0';
            return pcVar21;
          }
          if (*(int *)(DAT_8002ccec + 0x30) != 0) {
            return pcVar17;
          }
          if (*DAT_8002ccb0 == '\0') {
            iVar26 = *(int *)(DAT_8002ccb4 + (int)pcVar17 * 4);
            *(int *)(DAT_8002ccb0 + 0x24) = iVar26 * iVar23;
            *(int *)(pcVar20 + 0x28) = iVar26 * iVar24;
            *pcVar20 = '\x01';
          }
          else {
            if (*DAT_8002ccb0 != '\x01') goto LAB_8002cc78;
          }
          puVar12 = DAT_8002ccb8;
          uVar2 = *DAT_8002ccb8;
          iVar24 = *(int *)(pcVar20 + 0x24) + (uint)uVar2;
          *(int *)(pcVar20 + 0x24) = iVar24;
          *(uint *)(pcVar20 + 0x28) = *(int *)(pcVar20 + 0x28) - (uint)uVar2;
          iVar23 = *(int *)(iVar25 + (int)pcVar17 * 4);
          memcpy((void *)((iVar24 - iVar23) + DAT_8002ccbc),*DAT_8002ccc0,iVar23);
          *(uint *)(DAT_8002ccc4 + 8) = *(int *)(DAT_8002ccc4 + 8) - (uint)*puVar12;
LAB_8002cc78:
          if ((*(int *)(pcVar20 + 0x28) != 0) && ((char *)(uint)*DAT_8002ccc8 != (char *)0x4)) {
            return (char *)(uint)*DAT_8002ccc8;
          }
          *(undefined4 *)(pcVar20 + 8) = 0;
          pcVar21 = (char *)FUN_80026858(0,1);
          *pcVar20 = '\0';
          return pcVar21;
        }
        iVar24 = FUN_80023908(*(undefined *)(DAT_80023ed8 + 0xd),0x2a,iVar23);
        if (iVar24 == 0) {
          return (char *)0x0;
        }
        if ((*(byte *)(iVar26 + 0xc) & 0x80) == 0) {
          *pcVar21 = '\x01';
          return (char *)0x1;
        }
        FUN_80002c08(0);
        iVar24 = DAT_80023edc;
        *(undefined *)(DAT_80023edc + 2) = 5;
        *(undefined *)(iVar24 + 0xc) = 0x24;
        bVar27 = false;
        uVar13 = 1;
        goto code_r0x80026858;
      }
    }
    else {
      FUN_800266c0(1,2);
    }
    FUN_800266bc(2);
    FUN_800268b4(*(undefined *)(iVar23 + 0xd),5,0x24);
    bVar27 = false;
    uVar13 = 2;
    goto code_r0x80026858;
  }
  uVar22 = (uint)*(ushort *)(DAT_80002fa4 + 2);
  if (uVar22 != 0) {
    if ((*(ushort *)(DAT_80002fa4 + 2) & 1) != 0) {
      *(undefined *)DAT_80002fa8 = **(undefined **)(DAT_80002fa4 + 4);
    }
    if ((uVar22 & 1) < uVar22) {
      iVar23 = *(int *)(iVar24 + 4);
      uVar15 = uVar22 & 1;
      do {
        *(undefined *)((int)piVar3 + uVar15) = *(undefined *)(iVar23 + uVar15);
        uVar16 = uVar15 + 2;
        *(undefined *)((int)piVar3 + uVar15 + 1) = *(undefined *)(iVar23 + uVar15 + 1);
        uVar15 = uVar16;
      } while (uVar16 < uVar22);
    }
  }
  iVar23 = DAT_80002fac;
  *(int *)(DAT_80002fac + 4) = piVar3[1];
  *(int *)(iVar23 + 8) = piVar3[2];
  if (uVar22 != 0x1f) {
    FUN_80035d58(s_Valid_CBW_1_80002fb0);
    FUN_800266c0(1,2);
    FUN_800266bc(2);
    *piVar3 = 0;
    FUN_800268b4(*(undefined *)((int)piVar3 + 0xd),5,0x1a);
    bVar27 = false;
    uVar13 = 1;
    goto code_r0x80026858;
  }
  if (*(char *)((int)piVar3 + 0xf) == '(' || *(char *)((int)piVar3 + 0xf) == '*') {
    *(uint *)(iVar24 + 8) =
         (uint)*(byte *)(piVar3 + 5) | (uint)*(byte *)((int)piVar3 + 0x11) << 0x18 |
         (uint)*(byte *)((int)piVar3 + 0x12) << 0x10 | (uint)*(byte *)((int)piVar3 + 0x13) << 8;
    *(uint *)(iVar24 + 0xc) =
         (uint)CONCAT11(*(undefined *)((int)piVar3 + 0x16),*(undefined *)((int)piVar3 + 0x17));
  }
  if (*piVar3 != DAT_80002fc0) {
    FUN_80035d58(s_Valid_CBW_4_80003050);
    FUN_800266c0(1,2);
    FUN_800266bc(2);
    FUN_800268b4(*(undefined *)((int)piVar3 + 0xd),5,0x20);
    bVar27 = false;
    uVar13 = 1;
    goto code_r0x80026858;
  }
  if (((*DAT_80002fc4 < (uint)*(byte *)((int)piVar3 + 0xd)) || (*(byte *)((int)piVar3 + 0xe) == 0))
     || (0x10 < *(byte *)((int)piVar3 + 0xe))) {
    FUN_80035d58(s_Valid_CBW_2_80002fc8);
    FUN_800266c0(1,2);
    FUN_800266bc(2);
    FUN_800268b4(*(undefined *)((int)piVar3 + 0xd),5,0x24);
    bVar27 = false;
    uVar13 = 1;
    goto code_r0x80026858;
  }
  FUN_80035d58(s_CTRL___02X_80002fd8);
  iVar10 = DAT_80023de8;
  iVar9 = DAT_80023d6c;
  puVar8 = DAT_80023d68;
  iVar7 = DAT_80023d60;
  iVar6 = DAT_80023ccc;
  puVar18 = DAT_80023cc8;
  iVar25 = DAT_80023cc0;
  iVar26 = DAT_80023be0;
  pbVar4 = DAT_80023bd0;
  iVar23 = DAT_800239fc;
  bVar1 = *(byte *)((int)piVar3 + 0xf);
  if (bVar1 == 0x25) {
    uVar22 = (uint)*(byte *)((int)piVar3 + 0xd);
    if (1 < uVar22) {
      *(undefined *)(DAT_80023cc0 + 2) = 2;
      *(undefined *)(iVar25 + 0xc) = 0x3a;
      FUN_80026858(1);
      return (char *)0x1;
    }
    iVar24 = *(int *)(DAT_80023cc4 + uVar22 * 4) + -1;
    *DAT_80023cc8 = (char)((uint)iVar24 >> 0x18);
    puVar18[1] = (char)((uint)iVar24 >> 0x10);
    puVar18[2] = (char)((uint)iVar24 >> 8);
    puVar18[3] = (char)iVar24;
    uVar19 = *(undefined4 *)(iVar6 + uVar22 * 4);
    puVar18[4] = (char)((uint)uVar19 >> 0x18);
    puVar18[5] = (char)((uint)uVar19 >> 0x10);
    puVar18[6] = (char)((uint)uVar19 >> 8);
    puVar18[7] = (char)uVar19;
    uVar22 = 8;
    puVar18 = DAT_80023cc8;
    goto FUN_80029198;
  }
  if (bVar1 < 0x26) {
    if (bVar1 != 0x15) {
      if (0x15 < bVar1) {
        switch(bVar1) {
        case 0x1a:
          uVar22 = 4;
          puVar18 = DAT_80023ae0;
          break;
        case 0x1b:
        case 0x1e:
          bVar27 = true;
          uVar13 = 0;
          goto code_r0x80026858;
        default:
          goto switchD_80002e34_caseD_1c;
        case 0x1d:
          goto LAB_80023a48;
        case 0x23:
          uVar22 = (uint)*(byte *)((int)piVar3 + 0xd);
          if (1 < uVar22) {
            *(undefined *)(DAT_80023d60 + 2) = 2;
            *(undefined *)(iVar7 + 0xc) = 0x3a;
            FUN_80026858(1);
            return (char *)0x1;
          }
          uVar19 = *(undefined4 *)(DAT_80023d64 + uVar22 * 4);
          DAT_80023d68[4] = (char)((uint)uVar19 >> 0x18);
          puVar8[5] = (char)((uint)uVar19 >> 0x10);
          puVar8[6] = (char)((uint)uVar19 >> 8);
          puVar8[7] = (char)uVar19;
          uVar19 = *(undefined4 *)(iVar9 + uVar22 * 4);
          puVar8[9] = (char)((uint)uVar19 >> 0x10);
          puVar8[10] = (char)((uint)uVar19 >> 8);
          puVar8[0xb] = (char)uVar19;
          uVar22 = 0xc;
          puVar18 = DAT_80023d68;
        }
FUN_80029198:
        FUN_80037f54(1,puVar18,uVar22);
        pcVar21 = DAT_800291d8;
        *DAT_800291dc = 3;
        *(uint *)(pcVar21 + 8) = *(int *)(pcVar21 + 8) - uVar22;
        pcVar21[0xc] = '\0';
        return pcVar21;
      }
      if (bVar1 != 8) {
        if (bVar1 < 9) {
          if (bVar1 == 0) {
            if (1 < *(byte *)((int)piVar3 + 0xd)) {
              *(undefined *)(DAT_80023de8 + 2) = 2;
              *(undefined *)(iVar10 + 0xc) = 0x3a;
              FUN_80026858(1);
              return (char *)0x1;
            }
            bVar27 = true;
            uVar13 = 0;
            goto code_r0x80026858;
          }
          if (bVar1 == 3) {
            uVar22 = (uint)*(byte *)(DAT_80023d88 + 0x13);
            puVar18 = DAT_80023d8c;
            if (0x12 < uVar22) {
              uVar22 = 0x12;
            }
            goto FUN_80029198;
          }
          if (bVar1 == 4) {
            if ((char *)0x1 < (char *)(uint)*(byte *)((int)piVar3 + 0xd)) {
              *(undefined *)(DAT_800239fc + 2) = 2;
              *(undefined *)(iVar23 + 0xc) = 0x3a;
              FUN_80026858(1);
              return (char *)0x1;
            }
            return (char *)(uint)*(byte *)((int)piVar3 + 0xd);
          }
        }
        else {
          if (bVar1 == 10) goto LAB_80023a48;
          if (bVar1 == 0x12) {
            if ((*(byte *)(DAT_80023a38 + 0x10) & 1) == 0) {
              uVar22 = (uint)*(byte *)(DAT_80023a38 + 0x13);
              puVar18 = DAT_80023a40;
              if (*(char *)((int)piVar3 + 0xd) != '\0') {
                puVar18 = DAT_80023a44;
              }
              if (0x24 < uVar22) {
                uVar22 = 0x24;
              }
            }
            else {
              uVar22 = 5;
              puVar18 = DAT_80023a3c;
            }
            goto FUN_80029198;
          }
        }
switchD_80002e34_caseD_1c:
        FUN_80035d58(s_Valid_CBW_3_80002fe8);
        FUN_800266c0(1,2);
        FUN_800266bc(2);
        FUN_800268b4(*(undefined *)((int)piVar3 + 0xd),5,0x20);
        bVar27 = false;
        uVar13 = 1;
        goto code_r0x80026858;
      }
    }
  }
  else {
    if (bVar1 != 0x8a) {
      if (bVar1 < 0x8b) {
        if (bVar1 != 0x55) {
          if (bVar1 < 0x56) {
            if (bVar1 == 0x28) {
              pcVar21 = (char *)(uint)*(byte *)((int)piVar3 + 0xd);
              iVar23 = *(int *)(iVar24 + 8);
              iVar24 = *(int *)(iVar24 + 0xc);
              pcVar20 = (char *)(uint)*DAT_80023bd0;
              if (pcVar20 == (char *)0x0) {
                iVar25 = FUN_80023908(*(undefined *)(DAT_80023be0 + 0xd),0x28,iVar23,iVar24);
                if (iVar25 == 0) {
                  return s_ERR_read10_address_out_of_range__80023be4;
                }
                if ((*(byte *)(iVar26 + 0xc) & 0x80) == 0) {
                  FUN_80035d58(s_ERR_read10_FAILED__80023c08);
                  FUN_80002c08(2);
                  iVar24 = DAT_80023c20;
                  *(undefined *)(DAT_80023c20 + 2) = 5;
                  *(undefined *)(iVar24 + 0xc) = 0x24;
                  bVar27 = true;
                  uVar13 = 1;
                  goto code_r0x80026858;
                }
                FUN_80035d58(s_read10__80023bd4);
                *pbVar4 = 2;
              }
              else {
                if (pcVar20 != (char *)0x2) {
                  return pcVar20;
                }
                FUN_80035d58(s_read10__80023bd4);
              }
              pcVar5 = DAT_80023554;
              iVar26 = DAT_80023418;
              pcVar20 = DAT_80023414;
              if (*(int *)(DAT_8002344c + 0x30) == 1) {
                if (*DAT_80023554 == '\0') {
                  *(int *)(DAT_80023554 + 0xc) = iVar24;
                  *(undefined4 *)(pcVar5 + 4) = 0;
                  *pcVar5 = '\x01';
                }
                else {
                  if (*DAT_80023554 != '\x01') goto LAB_800234dc;
                }
                if (*(int *)(pcVar5 + 4) == 0) {
                  cVar14 = FUN_80024558(0,iVar23,iVar24,DAT_80023558);
                  if (cVar14 != '\0') {
                    pcVar5[1] = pcVar5[1] | 8;
                  }
                  FUN_8002a004(2,DAT_80023558,0x200);
                  iVar24 = 0x200;
                  *(int *)(pcVar5 + 0xc) = *(int *)(pcVar5 + 0xc) + -1;
                  *(int *)(pcVar5 + 4) = *(int *)(pcVar5 + 4) + 1;
                }
                else {
                  FUN_8002a004(2,*(int *)(pcVar5 + 0x2c) + DAT_80023558,0x200);
                  *(int *)(pcVar5 + 0xc) = *(int *)(pcVar5 + 0xc) + -1;
                  *(int *)(pcVar5 + 4) = *(int *)(pcVar5 + 4) + 1;
                  iVar24 = *(int *)(pcVar5 + 0x2c) + 0x200;
                }
                *(int *)(pcVar5 + 0x2c) = iVar24;
                *(int *)(DAT_8002355c + 8) = *(int *)(DAT_8002355c + 8) + -0x200;
LAB_800234dc:
                if (*(char **)(pcVar5 + 0xc) != (char *)0x0) {
                  return *(char **)(pcVar5 + 0xc);
                }
                *(undefined4 *)(pcVar5 + 4) = 0;
                *(undefined4 *)(pcVar5 + 0x2c) = 0;
                *DAT_80023560 = 3;
                *pcVar5 = '\0';
                return (char *)0x3;
              }
              if (*(int *)(DAT_8002344c + 0x30) != 0) {
                return pcVar21;
              }
              if (*DAT_80023414 == '\0') {
                iVar25 = *(int *)(DAT_80023418 + (int)pcVar21 * 4);
                *(int *)(DAT_80023414 + 0x10) = iVar25 * iVar23;
                *(int *)(pcVar20 + 0x14) = iVar25 * iVar24;
                *pcVar20 = '\x01';
              }
              else {
                if (*DAT_80023414 != '\x01') goto LAB_800233e4;
              }
              memcpy((void *)(DAT_8002341c + -0x800),
                     (void *)(*(int *)(pcVar20 + 0x10) + DAT_8002341c),
                     *(int *)(iVar26 + (int)pcVar21 * 4));
              FUN_8002a004(2,DAT_80023420,0x200);
              iVar24 = DAT_80023424;
              *(int *)(pcVar20 + 0x10) = *(int *)(pcVar20 + 0x10) + 0x200;
              *(int *)(pcVar20 + 0x14) = *(int *)(pcVar20 + 0x14) + -0x200;
              *(int *)(iVar24 + 8) = *(int *)(iVar24 + 8) + -0x200;
LAB_800233e4:
              if (*(char **)(pcVar20 + 0x14) != (char *)0x0) {
                return *(char **)(pcVar20 + 0x14);
              }
              *(undefined4 *)(pcVar20 + 4) = 0;
              *(undefined4 *)(pcVar20 + 0x2c) = 0;
              puVar18 = DAT_80023428;
              *(undefined4 *)(pcVar20 + 0x10) = 0;
              *puVar18 = 3;
              *pcVar20 = '\0';
              return (char *)0x0;
            }
            if (bVar1 == 0x2a) {
              bVar1 = *(byte *)((int)piVar3 + 0xd);
              iVar23 = *(int *)(iVar24 + 8);
              iVar24 = *(int *)(iVar24 + 0xc);
              goto LAB_80023e4c;
            }
            if (bVar1 == 0x2f) {
              bVar27 = *(int *)(DAT_80023e44 + 8) == 0;
              if (bVar27) {
                bVar27 = (*(byte *)(DAT_80023e44 + 0x10) & 4) == 0;
              }
              if (bVar27) {
                bVar27 = true;
                uVar13 = 0;
              }
              else {
                FUN_80002c08(2);
                iVar24 = DAT_80023e48;
                *(undefined *)(DAT_80023e48 + 2) = 5;
                *(undefined *)(iVar24 + 0xc) = 0x24;
                bVar27 = false;
                uVar13 = 1;
              }
              goto code_r0x80026858;
            }
          }
          else {
            if (bVar1 == 0x5a) {
              uVar22 = 8;
              puVar18 = DAT_80023ad0;
              goto FUN_80029198;
            }
            if (bVar1 == 0x88) goto LAB_80023a48;
          }
          goto switchD_80002e34_caseD_1c;
        }
      }
      else {
        if (bVar1 != 0xa8) {
          if (bVar1 < 0xa9) {
            if (bVar1 != 0x8f && bVar1 != 0x9e) goto switchD_80002e34_caseD_1c;
          }
          else {
            if (bVar1 != 0xaa && bVar1 != 0xaf) goto switchD_80002e34_caseD_1c;
          }
        }
      }
    }
  }
LAB_80023a48:
  if (*(int *)(DAT_80023aa8 + 8) == 0) {
    FUN_80002c08(0);
  }
  else {
    if ((*(byte *)(DAT_80023aa8 + 0xc) & 0x80) == 0) {
      uVar19 = 2;
    }
    else {
      uVar19 = 0;
    }
    FUN_80002c08(uVar19);
  }
  FUN_80035d58(s_SCSI_Invalid_Cmd_80023aac);
  iVar24 = DAT_80023ac0;
  *(undefined *)(DAT_80023ac0 + 2) = 5;
  *(undefined *)(iVar24 + 0xc) = 0x20;
  bVar27 = false;
  uVar13 = 1;
code_r0x80026858:
  puVar11 = DAT_800268ac;
  *DAT_800268ac = DAT_800268a8;
  *(undefined *)(puVar11 + 3) = uVar13;
  FUN_8002a004(2,puVar11,0xd);
  pcVar21 = DAT_800268b0;
  *DAT_800268b0 = '\x05';
  if (bVar27) {
    *pcVar21 = '\x04';
    return (char *)0x1;
  }
  return pcVar21;
}



undefined4 FUN_80038f04(void)

{
  int iVar1;
  
  FUN_80035d58(s_open_usb_clock_80038f4c);
  iVar1 = DAT_80038f5c;
  *(uint *)(DAT_80038f5c + 0xcc) = *(uint *)(DAT_80038f5c + 0xcc) | 2;
  *(uint *)(iVar1 + 0xcc) = *(uint *)(iVar1 + 0xcc) | 1;
  *(uint *)(iVar1 + 0x60) = *(uint *)(iVar1 + 0x60) | 0x1000000;
  *(uint *)(iVar1 + 0x2c0) = *(uint *)(iVar1 + 0x2c0) | 0x1000000;
  return 0;
}



// WARNING: Removing unreachable block (ram,0x80029924)
// WARNING: Removing unreachable block (ram,0x8002992c)
// WARNING: Removing unreachable block (ram,0x80029944)
// WARNING: Removing unreachable block (ram,0x80029948)
// WARNING: Removing unreachable block (ram,0x8002994c)
// WARNING: Removing unreachable block (ram,0x80029950)
// WARNING: Removing unreachable block (ram,0x80029958)
// WARNING: Removing unreachable block (ram,0x80029960)
// WARNING: Removing unreachable block (ram,0x80029934)
// WARNING: Removing unreachable block (ram,0x8003813c)
// WARNING: Removing unreachable block (ram,0x80038164)
// WARNING: Could not reconcile some variable overlaps
// WARNING: Restarted to delay deadcode elimination for space: stack

char * FUN_80038f60(void *param_1,int param_2)

{
  char cVar1;
  ushort uVar2;
  undefined2 uVar3;
  int iVar4;
  undefined4 *puVar5;
  byte *pbVar6;
  char *pcVar7;
  int iVar8;
  undefined *puVar9;
  undefined4 uVar10;
  byte *pbVar11;
  ushort *puVar12;
  uint count;
  byte bVar13;
  ushort *puVar14;
  ushort uVar15;
  undefined4 uStack32;
  undefined uStack28;
  undefined uStack27;
  undefined uStack26;
  undefined4 local_18 [2];
  undefined4 local_10;
  
  local_10 = DAT_80039018;
  if (param_2 != 8) {
    return s_not_setup_data__8003901c;
  }
  memcpy(DAT_80039030,param_1,8);
  pbVar11 = DAT_80039030;
  FUN_80035d58(s_bRequestType_0x_02x_80039034,*DAT_80039030);
  FUN_80035d58(s_bRequest_0x_02x_8003904c,pbVar11[1]);
  FUN_80035d58(s_wValue_0x_04x_80039060,*(undefined2 *)(pbVar11 + 2));
  FUN_80035d58(s_wIndex_0x_04x_80039070,*(undefined2 *)(pbVar11 + 4));
  FUN_80035d58(s_wLength_0x_04x_80039080,*(undefined2 *)(pbVar11 + 6));
  pbVar6 = DAT_80039030;
  pcVar7 = DAT_800369b8;
  if ((*pbVar11 & 0x60) != 0) {
    pbVar11 = (byte *)(*pbVar11 & 0x60);
    if (pbVar11 != (byte *)0x20) {
      return (char *)pbVar11;
    }
    local_18[0] = 0;
    bVar13 = DAT_80039030[1];
    if (bVar13 == 9) {
      pcVar7 = s_HID_REQ_SET_REPORT__host_set_dev_80032084;
    }
    else {
      if (bVar13 != 10) {
        if (bVar13 == 0x20) {
          FUN_80035d58(s_set_line_coding_80032130);
          iVar4 = DAT_80032144;
          *(undefined4 *)(DAT_80032144 + 4) = 1;
          iVar8 = FUN_80029d7c();
          pbVar11 = (byte *)FUN_80035d58(s_set_line_coding_readlen__d_80032148,iVar8);
          if (iVar8 == 7) {
            FUN_80037eec(0,&uStack32,7);
            *(undefined4 *)(iVar4 + 4) = 0;
            puVar5 = DAT_80032164;
            *DAT_80032164 = uStack32;
            *(undefined *)(puVar5 + 1) = uStack28;
            *(undefined *)((int)puVar5 + 5) = uStack27;
            *(undefined *)((int)puVar5 + 6) = uStack26;
            FUN_80037f10(1);
            pbVar11 = (byte *)FUN_80037f44(0);
            *(undefined4 *)(iVar4 + 4) = 0;
            return (char *)pbVar11;
          }
          return (char *)pbVar11;
        }
        if (bVar13 == 0x21) {
          FUN_800380dc(0,DAT_80032164,7);
          pbVar11 = (byte *)FUN_80035d58(s_get_line_coding_80032168);
          return (char *)pbVar11;
        }
        if (bVar13 == 0x22) {
          FUN_80035d58(s_set_control_line_state_8003217c);
          thunk_FUN_80029778();
          pbVar11 = (byte *)FUN_80037f44(0);
          return (char *)pbVar11;
        }
        if (bVar13 == 0xfe) {
          puVar9 = (undefined *)FUN_8001bf10();
          FUN_80035d58(s_MASS_GET_MAX_LUN___d_800321c8,*puVar9);
          pbVar11 = (byte *)FUN_800380dc(0,local_18,*(undefined2 *)(pbVar6 + 6));
          return (char *)pbVar11;
        }
        pbVar11 = (byte *)FUN_80035d58(s_Warnning____received_unsupport_c_800320f4);
        return (char *)pbVar11;
      }
      pcVar7 = s_HID_REQ_SET_IDLE__host_set_devic_800320bc;
    }
    pbVar11 = (byte *)FUN_80035d58(pcVar7);
    return (char *)pbVar11;
  }
  puVar14 = (ushort *)(uint)DAT_80039030[1];
  if (puVar14 != (ushort *)0x6) {
    if (puVar14 == (ushort *)0x9) {
      FUN_80035d58(s_set_configuration_80036a9c);
      if (*pcVar7 == '\x04') {
        FUN_80037d54(1,0x200,4);
        FUN_80037c94(1,0x200,4);
      }
      else {
        FUN_80037d54(1,0x200,3);
        FUN_80037c94(1,0x200,3);
      }
      FUN_80037f10(1);
      thunk_FUN_80029778();
      FUN_80037f1c();
code_r0x80037f44:
      *(undefined4 *)(DAT_80037f50 + 8) = 0;
      return (char *)(byte *)0x0;
    }
    if (puVar14 == (ushort *)&SupervisorCall) {
      FUN_80035d58(s_get_configuration_80036b84);
      FUN_80035d58(s_Error___unsupprot_USB_REQ_GET_CO_80036b98);
    }
    else {
      if (puVar14 == (ushort *)0xb) {
        FUN_80035d58(s_set_interface_80036bcc);
        FUN_80035d58(s_Error___unsupprot_USB_REQ_SET_IN_80036bdc);
      }
      else {
        if (puVar14 == (ushort *)0xa) {
          FUN_80035d58(s_Error___unsupprot_USB_REQ_GET_IN_80036c0c);
        }
        else {
          if (puVar14 == (ushort *)0x5) {
            FUN_80035d58(s_set_addr_80036c3c);
            bVar13 = pbVar6[2] & 0x7f;
            FUN_800324d0(1,pbVar6[2]);
            FUN_80037f28(bVar13);
            FUN_80037f10(1);
            FUN_80035d58(s_set_dev_address___x_80036c48,bVar13);
            goto code_r0x80037f44;
          }
          if (puVar14 == (ushort *)0x7) {
            FUN_80035d58(s_set_Descriptor_80036c60);
            FUN_80035d58(s_Error___unsupprot_USB_REQ_SET_DE_80036c70);
          }
          else {
            if (puVar14 == (ushort *)&PrefetchAbort) {
              FUN_80035d58(s_sync_frame_80036cf0);
              FUN_80035d58(s_Error___unsupprot_USB_REQ_SYNCH__80036cfc);
            }
            else {
              if (puVar14 == (ushort *)0x1) {
                uVar3 = *(undefined2 *)(DAT_80039030 + 4);
                FUN_80035d58(s_clear_feature_80036d2c,DAT_80039030[4]);
                FUN_80037e14(uVar3);
              }
              else {
                FUN_80035d58(s_other_req_800369bc);
                FUN_80035d58(s_Error___received_controller_comm_800369cc,puVar14);
              }
            }
          }
        }
      }
    }
FUN_8002990c:
    *(undefined2 *)(DAT_80029974 + 0x82) = 0x48;
    return (char *)(byte *)0x0;
  }
  FUN_80035d58(s_getDescriptor_800369f8);
  uVar2 = *(ushort *)(pbVar6 + 2);
  uVar15 = uVar2 >> 8;
  if (uVar15 == 1) {
    cVar1 = *pcVar7;
    if (cVar1 == '\x03') {
      puVar14 = DAT_80036a34;
    }
    count = (uint)*(ushort *)(pbVar6 + 6);
    puVar12 = puVar14;
    if ((((cVar1 != '\x03') && (puVar12 = DAT_80036a38, cVar1 != '\x01')) &&
        (puVar12 = DAT_80036a3c, cVar1 != '\x02')) && (puVar12 = puVar14, cVar1 == '\x04')) {
      puVar12 = DAT_80036a40;
    }
    FUN_80035d58(s_usb_get_device_descriptor_80036a44);
    if (0x11 < count) {
      count = 0x12;
    }
    goto code_r0x800380dc;
  }
  if (uVar15 == 2) {
    cVar1 = *pcVar7;
    if (cVar1 == '\x01') {
      FUN_80035d58(s_usb_hid_get_cfg_descriptor_8003894c);
      puVar12 = DAT_80038968;
      if (*(short *)(pbVar6 + 6) == 8) {
        count = 8;
      }
      else {
        if (*(short *)(pbVar6 + 6) == 9) {
          count = 9;
        }
        else {
          count = 0x29;
        }
      }
    }
    else {
      if (cVar1 == '\x02') {
        FUN_80035d58(s_usb_hid_get_cfg_descriptor_80037c24);
        puVar12 = DAT_80037c40;
        if (*(short *)(pbVar6 + 6) == 8) {
          count = 8;
        }
        else {
          if (*(short *)(pbVar6 + 6) == 9) {
            count = 9;
          }
          else {
            count = 0x4b;
          }
        }
      }
      else {
        if (cVar1 == '\x03') {
          FUN_80035d58(s_usb_uvc_get_cfg_descriptor_800390c4);
          count = (uint)*(ushort *)(pbVar6 + 6);
          puVar12 = DAT_800390e0;
        }
        else {
          if (cVar1 != '\x04') {
            return (char *)pbVar6;
          }
          FUN_80035d58(s_usb_mass_get_cfg_descriptor_80038ecc);
          puVar12 = DAT_80038eec;
          if (*(short *)(pbVar6 + 6) == 8) {
            count = 8;
          }
          else {
            if (*(short *)(pbVar6 + 6) == 9) {
              count = 9;
            }
            else {
              count = 0x20;
            }
          }
        }
      }
    }
    goto code_r0x800380dc;
  }
  if (uVar15 != 3) {
    if (uVar15 != 0x22) {
      FUN_80035d58(s_usb_get_descriptor___0x_04x_not_s_80036a08);
      goto FUN_8002990c;
    }
    count = 0x23;
    puVar12 = (ushort *)PTR_DAT_800381b4;
    goto code_r0x800380dc;
  }
  uVar15 = uVar2 & 0xff;
  count = (uint)*(ushort *)(pbVar6 + 6);
  FUN_80035d58(s_udp_get_dev_descriptor_string__d_80036a60,uVar15);
  puVar12 = DAT_80036a88;
  if (uVar15 == 4) {
    puVar12 = DAT_80036a90;
    if (0x1d < count) {
      count = 0x1e;
    }
    goto code_r0x800380dc;
  }
  if (uVar15 < 5) {
    if ((uVar2 & 0xff) == 0) {
      puVar12 = DAT_80036a84;
      if (4 < count) {
        count = 4;
      }
      goto code_r0x800380dc;
    }
    if (uVar15 != 1) {
      if (uVar15 == 2) {
        if (0x26 < count) {
          count = 0x26;
        }
        *DAT_80036a88 = (ushort)count | 0x300;
        goto code_r0x800380dc;
      }
      if (uVar15 != 3) goto LAB_80036860;
    }
    puVar12 = DAT_80036a8c;
    if (0x3d < count) {
      count = 0x3e;
    }
  }
  else {
    if (uVar15 == 5) {
      puVar12 = DAT_80036a94;
      if (0x41 < count) {
        count = 0x42;
      }
      goto code_r0x800380dc;
    }
    if (uVar15 == 6) {
      puVar12 = DAT_80036a98;
      if (0x19 < count) {
        count = 0x1a;
      }
      goto code_r0x800380dc;
    }
    if (uVar15 == 0xee) {
      if (0x3d < count) {
        count = 0x3e;
      }
      *DAT_80036a8c = (ushort)count | 0x300;
      puVar12 = DAT_80036a8c;
      goto code_r0x800380dc;
    }
LAB_80036860:
    count = 0;
    puVar12 = (ushort *)0x0;
  }
code_r0x800380dc:
  memcpy(DAT_80038188,puVar12,count);
  iVar4 = DAT_8003818c;
  *(uint *)(DAT_8003818c + 0xc) = count;
  *(ushort **)(iVar4 + 0x1c) = puVar12;
  FUN_80035d58(s_CTRL_IN_LEN____d_80038190,count);
  if (*(int *)(iVar4 + 0x20) < (int)count) {
    uVar10 = FUN_80029e4c(0);
    FUN_80029e5c(uVar10,*(int *)(iVar4 + 0x20),puVar12);
    FUN_800299ac(1,0);
    uVar10 = 0x40;
  }
  else {
    uVar10 = FUN_80029e4c(0);
    FUN_80029e5c(uVar10,count,puVar12);
    FUN_800299ac(1,1);
    uVar10 = 0;
  }
  *(undefined4 *)(iVar4 + 0x10) = uVar10;
  return (char *)(byte *)0x0;
}



// WARNING: Removing unreachable block (ram,0x8003813c)
// WARNING: Removing unreachable block (ram,0x80038164)

undefined4 FUN_80039090(int param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  void *pvVar2;
  undefined4 uVar3;
  uint count;
  undefined4 unaff_r4;
  
  FUN_80035d58(s_usb_uvc_get_cfg_descriptor_800390c4);
  pvVar2 = DAT_800390e0;
  count = (uint)*(ushort *)(param_1 + 6);
  memcpy(DAT_80038188,DAT_800390e0,count);
  iVar1 = DAT_8003818c;
  *(uint *)(DAT_8003818c + 0xc) = count;
  *(void **)(iVar1 + 0x1c) = pvVar2;
  FUN_80035d58(s_CTRL_IN_LEN____d_80038190,count);
  if (*(int *)(iVar1 + 0x20) < (int)count) {
    uVar3 = FUN_80029e4c(0);
    FUN_80029e5c(uVar3,*(int *)(iVar1 + 0x20),pvVar2,param_4,unaff_r4);
    FUN_800299ac(1,0);
    uVar3 = 0x40;
  }
  else {
    uVar3 = FUN_80029e4c(0);
    FUN_80029e5c(uVar3,count,pvVar2,param_4,unaff_r4);
    FUN_800299ac(1,1);
    uVar3 = 0;
  }
  *(undefined4 *)(iVar1 + 0x10) = uVar3;
  return 0;
}



void FUN_800390e4(void)

{
  return;
}



undefined4 FUN_800390e8(byte **param_1,byte **param_2)

{
  byte **ppbVar1;
  uint uVar2;
  byte *pbVar3;
  byte **ppbVar4;
  undefined4 uVar5;
  bool bVar6;
  
  bVar6 = param_1 != (byte **)0x0;
  ppbVar1 = param_1;
  if (bVar6) {
    ppbVar1 = (byte **)*param_1;
  }
  ppbVar4 = param_2;
  if (bVar6 && ppbVar1 != (byte **)0x0) {
    ppbVar4 = (byte **)(uint)*(byte *)ppbVar1;
  }
  uVar5 = 9;
  if ((((bVar6 && ppbVar1 != (byte **)0x0) && ppbVar4 != (byte **)0x0) &&
      (*(short *)(param_1 + 1) == *(short *)((int)ppbVar1 + 6))) &&
     (uVar2 = FUN_80033318(*(byte *)((int)ppbVar1 + 1)), (uVar2 & 1) == 0)) {
    pbVar3 = *param_1;
    uVar5 = 0;
  }
  else {
    pbVar3 = (byte *)0x0;
  }
  *param_2 = pbVar3;
  return uVar5;
}



void tp_i2c_send_byte(uchar data)

{
  bool bVar1;
  uint *ptr;
  undefined4 uVar2;
  uint uVar3;
  byte bVar4;
  uint uStack24;
  
  ptr = DAT_800391ec;
  uVar3 = (uint)data;
  gpio_config_pin(DAT_800391ec,2,1);
  gpio_config_pin(ptr,3,1);
  bVar4 = 0;
  do {
    if ((uVar3 & 0x80) == 0) {
      set_gpio_pin_low(ptr,2);
    }
    else {
      set_gpio_pin_high(ptr,2);
    }
    delay(10);
    set_gpio_pin_high(ptr,3);
    delay(10);
    set_gpio_pin_low(ptr,3);
    delay(10);
    bVar4 = bVar4 + 1;
    uVar3 = (uVar3 << 0x19) >> 0x18;
  } while (bVar4 < 8);
  uVar2 = FUN_8003a370(10);
  FUN_8003a44c(uVar2,DAT_8000bcb4);
  uVar3 = FUN_8003a31c();
  uStack24 = 0;
  while (uStack24 < uVar3) {
    bVar1 = false;
    while (!bVar1) {
      bVar1 = true;
    }
    uStack24 = uStack24 + 1;
  }
  return;
}



void FUN_800391f0(undefined4 *param_1,undefined4 param_2)

{
  *param_1 = param_2;
  return;
}



void write32(uint *ptr,uint data)

{
  *ptr = data;
  return;
}



uint FUN_80039200(uint param_1,uint param_2)

{
  uint uVar1;
  bool bVar2;
  
  uVar1 = (param_2 & 0x7fffffff) + 0xc8000000;
  bVar2 = uVar1 == 0x100000;
  if (0xfffff < uVar1) {
    bVar2 = uVar1 == 0xff00000;
  }
  if ((0xfffff < uVar1 && uVar1 < 0xff00001) && !bVar2) {
    bVar2 = (bool)((byte)(param_1 >> 0x1c) & 1);
    uVar1 = (param_2 & 0x80000000 | uVar1 * 8) + (param_1 >> 0x1d) + (uint)bVar2;
    if ((param_1 & 0xfffffff) != 0) {
      return uVar1;
    }
    if (bVar2) {
      uVar1 = uVar1 & 0xfffffffe;
    }
    return uVar1;
  }
  if ((int)uVar1 < 0x100000) {
    param_1 = param_2 & 0x80000000;
  }
  if ((int)((param_2 & 0x7fffffff) + 0xc7f00000) < 0 != SBORROW4(uVar1,0x100000)) {
    return param_1;
  }
  if (param_2 << 1 < 0xffe00000) {
    return (param_2 >> 0x17 | 0xff) << 0x17;
  }
                    // WARNING: Subroutine does not return
  FUN_80039a08();
}



ulonglong FUN_8003926c(uint param_1,uint param_2,uint param_3,uint param_4)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  uint uVar9;
  uint uVar10;
  bool bVar11;
  bool bVar12;
  bool bVar13;
  
  if ((int)(param_2 ^ param_4) < 0) {
    param_4 = param_4 ^ 0x80000000;
    bVar11 = param_1 < param_3;
    uVar7 = param_1 - param_3;
    if ((!bVar11 || !CARRY4(param_2,~param_4)) && (bVar11 || param_2 < param_2 + ~param_4 + 1)) {
      bVar12 = CARRY4(param_3,uVar7);
      param_3 = param_3 + uVar7;
      uVar9 = param_2 - (param_4 + bVar11) ^ 0x80000000;
      param_4 = param_4 + uVar9 + (uint)bVar12;
      bVar11 = param_1 < uVar7;
      param_1 = param_1 - uVar7;
      param_2 = param_2 - (uVar9 + bVar11);
    }
    uVar7 = param_2 >> 0x14;
    uVar9 = uVar7 - (param_4 >> 0x14);
    bVar11 = (DAT_80039f70 & param_4 << 1) == 0;
    if (!bVar11) {
      bVar11 = DAT_80039f70 == uVar7 << 0x15;
    }
    if (bVar11) {
      if (DAT_80039f70 != uVar7 << 0x15) {
        if ((param_2 & DAT_80039f70 >> 1) == 0) {
          param_2 = 0;
          param_1 = 0;
        }
        return CONCAT44(param_2,param_1);
      }
                    // WARNING: Subroutine does not return
      FUN_80039a08();
    }
    uVar6 = -param_3;
    iVar8 = ((int)DAT_80039f70 >> 1) -
            ((param_4 & ~((int)DAT_80039f70 >> 1)) + (uint)(param_3 != 0));
    uVar10 = 0x20 - uVar9;
    uVar3 = param_2 & ~(param_2 & 0xfff00000);
    if (uVar9 < 0x21) {
      uVar1 = uVar6 >> (uVar9 & 0xff);
      uVar2 = param_1 + uVar1;
      uVar3 = uVar3 + (iVar8 >> (uVar9 & 0xff)) + (uint)CARRY4(param_1,uVar1);
      uVar9 = iVar8 << (uVar10 & 0xff);
      bVar12 = CARRY4(uVar2,uVar9);
      uVar2 = uVar2 + uVar9;
      bVar11 = bVar12 == true && uVar3 + 1 <= uVar3;
      iVar8 = uVar3 + bVar12;
    }
    else {
      param_3 = param_3 * -2;
      if (param_3 != 0) {
        param_3 = 1;
      }
      uVar9 = uVar9 - 0x20;
      uVar6 = param_3 | (iVar8 * 2 + (uint)CARRY4(uVar6,uVar6)) * 2;
      uVar10 = 0x1e - uVar9;
      if (0x1e < uVar9 || uVar10 == 0) {
        return CONCAT44(uVar3 + (param_2 & 0xfff00000),param_1);
      }
      uVar2 = iVar8 >> (uVar9 & 0xff);
      bVar12 = CARRY4(param_1,uVar2);
      uVar2 = param_1 + uVar2;
      bVar11 = bVar12 == false && uVar3 != 0 || bVar12 == true;
      iVar8 = uVar3 - !bVar12;
    }
    if (-1 < iVar8) {
      iVar5 = uVar6 << (uVar10 & 0xff);
      iVar8 = iVar8 + (param_2 & 0xfff00000);
      if (-1 < iVar5) {
        return CONCAT44(iVar8,uVar2);
      }
      uVar2 = uVar2 + 1;
      if (uVar2 != 0 && iVar5 != -0x80000000) {
        return CONCAT44(iVar8,uVar2);
      }
      if (uVar2 == 0) {
        iVar8 = iVar8 + 1;
      }
      else {
        uVar2 = uVar2 & 0xfffffffe;
      }
      return CONCAT44(iVar8,uVar2);
    }
    uVar9 = uVar10 + 1 & 0xff;
    bVar12 = (bool)((byte)(uVar6 >> 0x20 - uVar9) & 1);
    bVar13 = uVar9 == 0 && bVar11 || uVar9 != 0 && bVar12;
    uVar10 = uVar2 * 2 + (uint)bVar13;
    iVar8 = iVar8 * 2 +
            (uint)(((uVar9 != 0 || !bVar11) && (uVar9 == 0 || !bVar12)) && CARRY4(uVar2,uVar2) ||
                  bVar13 && uVar2 * 2 + 1 <= uVar2);
    uVar3 = iVar8 + uVar7 * 0x200000;
    bVar11 = (bool)((byte)(uVar3 >> 0x14) & 1);
    if (bVar11 && uVar3 >> 0x15 != 0) {
      uVar7 = -((int)(uVar6 << uVar9) >> 0x1f);
      uVar3 = uVar10 + uVar7;
      bVar11 = uVar3 == 0;
      if (!CARRY4(uVar10,uVar7)) {
        bVar11 = uVar6 << uVar9 == -0x80000000;
      }
      iVar8 = iVar8 + (param_2 & 0xfff00000);
      if (!bVar11) {
        return CONCAT44(iVar8,uVar3);
      }
      if (uVar3 == 0) {
        iVar8 = iVar8 + 1;
      }
      else {
        uVar3 = uVar3 & 0xfffffffe;
      }
      return CONCAT44(iVar8,uVar3);
    }
    if (!bVar11) {
      iVar8 = iVar8 + 0x200000;
      if (iVar8 == 0) {
        uVar6 = count_leading_zeroes(uVar10);
        uVar9 = uVar10 << (uVar6 & 0xff);
        if (uVar9 == 0) {
          return (ulonglong)uVar10;
        }
        iVar8 = uVar9 << 0x15;
        iVar5 = ((uVar7 & 0xfffff7ff) - uVar6) + -0x17;
        uVar9 = uVar9 >> 0xb;
      }
      else {
        iVar5 = count_leading_zeroes(iVar8);
        uVar6 = iVar5 - 0xb;
        iVar5 = ((uVar7 & 0xfffff7ff) - uVar6) + -2;
        uVar9 = iVar8 << (uVar6 & 0xff) | uVar10 >> (0x20 - uVar6 & 0xff);
        iVar8 = uVar10 << (uVar6 & 0xff);
      }
      iVar4 = uVar9 + (param_2 & 0x80000000) + iVar5 * 0x100000;
      if (-1 < iVar5) {
        return CONCAT44(iVar4,iVar8);
      }
      return (ulonglong)(iVar4 + 0x60000000U & 0x80000000) << 0x20;
    }
    uVar9 = (iVar8 >> 1) + (param_2 & 0xfff00000);
    uVar7 = (uint)((byte)iVar8 & 1) << 0x1f | uVar10 >> 1;
    if (uVar9 * 2 == 0 && uVar7 == 0) {
      return (ulonglong)uVar7;
    }
    if (0x1fffff < uVar9 * 2) {
      return CONCAT44(uVar9,uVar7);
    }
    return (ulonglong)(uVar9 & 0x80000000) << 0x20;
  }
  bVar11 = param_1 < param_3;
  uVar7 = param_1 - param_3;
  iVar8 = param_2 - (param_4 + bVar11);
  if ((!bVar11 || !CARRY4(param_2,~param_4)) && (bVar11 || param_2 < param_2 + ~param_4 + 1)) {
    bVar11 = CARRY4(param_3,uVar7);
    param_3 = param_3 + uVar7;
    param_4 = param_4 + iVar8 + (uint)bVar11;
    bVar11 = param_1 < uVar7;
    param_1 = param_1 - uVar7;
    param_2 = param_2 - (iVar8 + (uint)bVar11);
  }
  uVar7 = param_2 >> 0x14;
  uVar9 = uVar7 - (param_4 >> 0x14);
  bVar11 = (DAT_800393bc & param_4 << 1) == 0;
  if (!bVar11) {
    bVar11 = DAT_800393bc == uVar7 << 0x15;
  }
  if (bVar11) {
    if (DAT_800393bc != uVar7 << 0x15) {
      if ((param_2 & DAT_800393bc >> 1) == 0) {
        param_1 = 0;
        param_2 = param_2 & 0x80000000;
      }
      return CONCAT44(param_2,param_1);
    }
                    // WARNING: Subroutine does not return
    FUN_80039a08();
  }
  uVar10 = 0x20 - uVar9;
  uVar3 = param_2 & ~(param_2 & 0xfff00000);
  uVar6 = param_4 & ~DAT_800393bc | 0x100000;
  if (uVar9 < 0x21) {
    uVar2 = param_3 >> (uVar9 & 0xff);
    bVar11 = CARRY4(param_1,uVar2);
    uVar2 = param_1 + uVar2;
    uVar7 = uVar6 << (uVar10 & 0xff);
    param_1 = uVar2 + uVar7;
    uVar9 = uVar3 + (uVar6 >> (uVar9 & 0xff)) + (uint)bVar11 + (uint)CARRY4(uVar2,uVar7);
    if (uVar9 < 0x100000) {
      uVar9 = uVar9 + (param_2 & 0xfff00000);
      goto LAB_800392e0;
    }
LAB_80039340:
    bVar11 = (bool)((byte)param_1 & 1);
    uVar7 = (uint)((byte)(uVar9 + 0x100000) & 1) << 0x1f | param_1 >> 1;
    uVar9 = (uVar9 + 0x100000 >> 1) + (param_2 & 0xfff00000);
    if (!bVar11) {
LAB_80039378:
      if (uVar9 * 2 < 0xffe00000) {
        return CONCAT44(uVar9,uVar7);
      }
      goto LAB_80039ac0;
    }
    bVar12 = uVar7 < uVar7 + 1;
    uVar7 = uVar7 + bVar11;
    uVar6 = uVar7;
    if (bVar11 != true || bVar12) {
      uVar6 = param_3 << (uVar10 & 0xff);
    }
    if (uVar6 != 0) goto LAB_80039378;
  }
  else {
    param_3 = uVar6 * 2 + (uint)(param_3 != 0);
    uVar9 = uVar9 - 0x20;
    bVar11 = uVar9 < 0x20;
    uVar10 = 0x1f - uVar9;
    if (bVar11) {
      uVar6 = uVar6 >> (uVar9 & 0xff);
      bVar11 = CARRY4(param_1,uVar6);
      param_1 = param_1 + uVar6;
    }
    else {
      uVar10 = 0;
    }
    uVar9 = uVar3 + (param_2 & 0xfff00000) + (uint)bVar11;
    if (uVar7 != uVar9 >> 0x14) {
      uVar9 = uVar9 + uVar7 * -0x100000;
      goto LAB_80039340;
    }
LAB_800392e0:
    param_3 = param_3 << (uVar10 & 0xff);
    if (-1 < (int)param_3) {
      return CONCAT44(uVar9,param_1);
    }
    uVar7 = param_1 + 1;
    uVar6 = uVar7;
    if (param_1 != 0xffffffff) {
      uVar6 = param_3 & 0x7fffffff;
    }
    if (uVar6 != 0) {
      return CONCAT44(uVar9,uVar7);
    }
  }
  if (uVar7 == 0) {
    uVar9 = uVar9 + 1;
  }
  else {
    uVar7 = uVar7 & 0xfffffffe;
  }
  if (uVar9 << 1 < 0xffe00000) {
    return CONCAT44(uVar9,uVar7);
  }
LAB_80039ac0:
  return (ulonglong)(uVar9 + 0xa0000000 & 0x80000000 | 0x7ff00000) << 0x20;
}



longlong FUN_800393ec(uint param_1,uint param_2,uint param_3,uint param_4)

{
  longlong lVar1;
  ulonglong uVar2;
  byte bVar3;
  uint uVar4;
  uint unaff_r4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  int iVar12;
  bool bVar13;
  
  bVar13 = (DAT_800396b4 & ~(param_2 >> 4)) == 0;
  if (!bVar13) {
    bVar13 = (DAT_800396b4 & ~(param_4 >> 4)) == 0;
  }
  if (bVar13) {
                    // WARNING: Subroutine does not return
    FUN_80039a08();
  }
  uVar8 = param_2 ^ param_4;
  uVar5 = DAT_800396b4 & param_2 >> 4;
  bVar13 = uVar5 == 0;
  uVar7 = uVar8 >> 0x1f;
  if (!bVar13) {
    uVar8 = DAT_800396b4 & param_4 >> 4;
    bVar13 = uVar8 == 0;
  }
  if (bVar13) {
    if ((param_2 & DAT_800396b4 << 4) == 0) {
      if ((param_4 & DAT_800396b4 << 4) == 0) {
        return (ulonglong)DAT_800396b8 << 0x20;
      }
      return (ulonglong)((param_2 ^ param_4) & 0x80000000) << 0x20;
    }
    bVar3 = (byte)(param_2 >> 0x18) ^ (byte)(param_4 >> 0x18);
  }
  else {
    iVar6 = (uVar5 | uVar7) - uVar8;
    uVar8 = param_4 << 0xb | 0x80000000;
    uVar5 = param_2 << 0xb | 0x80000000 | param_1 >> 0x15;
    uVar4 = uVar8 | param_3 >> 0x15;
    uVar7 = iVar6 + 0x3fe0000;
    if (uVar5 == uVar4 && param_1 * 0x800 == param_3 * 0x800) {
      uVar5 = 0x100000;
      uVar4 = 0;
    }
    else {
      uVar9 = (uint)*(byte *)((uVar8 >> 0x18) + 0x800395b4);
      uVar9 = uVar9 * (0x1000000 - uVar9 * (uVar8 >> 0x10)) >> 0xf;
      iVar10 = (int)((ulonglong)uVar4 * (ulonglong)uVar9);
      uVar9 = uVar9 * (0x10000 -
                      ((int)((ulonglong)uVar4 * (ulonglong)uVar9 >> 0x20) + (uint)(iVar10 != 0))) +
              (int)((ulonglong)(uint)-iVar10 * (ulonglong)uVar9 >> 0x20);
      lVar1 = (ulonglong)uVar4 * (ulonglong)uVar9 +
              ((ulonglong)(param_3 * 0x800) * (ulonglong)uVar9 >> 0x20);
      iVar10 = (int)lVar1;
      uVar2 = (ulonglong)(0x80000000 - ((int)((ulonglong)lVar1 >> 0x20) + (uint)(iVar10 != 0))) *
              (ulonglong)uVar9 + ((ulonglong)(uint)-iVar10 * (ulonglong)uVar9 >> 0x20);
      uVar9 = (uint)(uVar2 >> 0x20);
      uVar4 = (uint)((uVar2 & 0xffffffff) * (ulonglong)uVar5 >> 0x20);
      uVar11 = (uint)((ulonglong)uVar9 * (ulonglong)(param_1 * 0x800) >> 0x20);
      lVar1 = (ulonglong)uVar9 * (ulonglong)uVar5 +
              (ulonglong)CONCAT14(CARRY4(uVar4,uVar11),uVar4 + uVar11);
      uVar9 = (uint)lVar1;
      iVar10 = (int)((ulonglong)lVar1 >> 0x20);
      iVar12 = iVar10 + 0x70000000;
      if (!SCARRY4(iVar10,0x70000000)) {
        uVar9 = uVar9 << 1;
        uVar7 = iVar6 + 0x3fd0000;
        iVar10 = iVar10 * 2 + (uint)(byte)((byte)((ulonglong)lVar1 >> 0x18) >> 7);
      }
      uVar5 = iVar10 + (uint)(0xffffff7f < uVar9);
      uVar4 = uVar9 + 0x80 >> 8 | uVar5 * 0x1000000;
      uVar5 = uVar5 >> 8;
      if (uVar9 * 0x1000000 + 0x91000000 < 0x10000001) {
        iVar6 = uVar5 * param_3 +
                uVar4 * (uVar8 >> 0xb) + (int)((ulonglong)param_3 * (ulonglong)uVar4 >> 0x20);
        if (-1 < iVar12) {
          iVar6 = iVar6 + (param_1 & 0x1fffff) * -0x100000;
        }
        if ((int)(iVar6 + (param_1 & 0x1fffff) * -0x100000 + (uVar8 >> 0xc) +
                 (uint)CARRY4((uint)((ulonglong)param_3 * (ulonglong)uVar4),
                              param_3 >> 1 | (uVar8 >> 0xb) << 0x1f)) < 0) {
          bVar13 = 0xfffffffe < uVar4;
          uVar4 = uVar4 + 1;
          uVar5 = uVar5 + bVar13;
        }
      }
    }
    uVar9 = uVar7 & 0xfffffffe;
    uVar8 = uVar7;
    if (uVar9 < 0x7f00001) {
      uVar8 = unaff_r4;
    }
    iVar6 = uVar5 + uVar7 * -0x80000000 + uVar9 * 0x10;
    if (uVar9 < 0x7f00001) {
      return CONCAT44(iVar6,uVar4);
    }
    bVar13 = (int)uVar8 < 0;
    if (!bVar13) {
      bVar13 = (int)(iVar6 + 0x100000U ^ uVar8 << 0x1f) < 0;
    }
    if (!bVar13) {
      return CONCAT44(iVar6,uVar4);
    }
    if ((int)uVar8 < 0) {
      return (ulonglong)(iVar6 + 0x60000000U & 0x80000000) << 0x20;
    }
    bVar3 = (byte)((uint)(iVar6 + -0x60000000) >> 0x18);
  }
  return (ulonglong)((uint)(bVar3 >> 7) << 0x1f | 0x7ff00000) << 0x20;
}



uint FUN_800396bc(uint param_1,int param_2)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  bool bVar5;
  bool bVar6;
  
  iVar2 = ((uint)(param_2 << 1) >> 0x15) - 0x400;
  bVar6 = SBORROW4(0x1e,iVar2);
  iVar1 = -iVar2;
  uVar3 = iVar1 + 0x1e;
  bVar5 = uVar3 == 0;
  uVar4 = uVar3;
  if (!bVar5 && iVar2 < 0x1f) {
    bVar6 = SBORROW4(0x21,uVar3);
    uVar4 = -uVar3 + 0x21;
    bVar5 = -uVar3 == -0x21;
  }
  if (!bVar5 && (int)uVar4 < 0 == bVar6) {
    return ((param_2 << 0xb | 0x80000000U | param_1 >> 0x15) >> (uVar3 & 0xff) ^ param_2 >> 0x1f) -
           (param_2 >> 0x1f);
  }
  if (0x10 < (int)uVar3) {
    param_1 = 0;
  }
  if (uVar3 != 0x10 && iVar1 + 0xe < 0 == SBORROW4(uVar3,0x10)) {
    return param_1;
  }
  if (iVar1 != -0x3ff) {
    return param_2 >> 0x20 ^ 0x7fffffff;
  }
                    // WARNING: Subroutine does not return
  FUN_80039a08();
}



uint FUN_8003972c(uint param_1,uint param_2)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  bool bVar5;
  
  iVar2 = (param_2 >> 0x14) - 0x400;
  bVar5 = SBORROW4(0x1e,iVar2);
  iVar1 = -iVar2;
  uVar3 = iVar1 + 0x1e;
  uVar4 = uVar3;
  if (iVar2 < 0x1f) {
    bVar5 = SBORROW4(0x20,uVar3);
    uVar4 = 0x20 - uVar3;
  }
  if ((int)uVar4 < 0 == bVar5) {
    return (param_2 << 0xb | 0x80000000 | param_1 >> 0x15) >> (uVar3 & 0xff);
  }
  if ((int)param_2 < 0) {
    return 0;
  }
  if (0x10 < (int)uVar3) {
    param_1 = 0;
  }
  if (uVar3 != 0x10 && iVar1 + 0xe < 0 == SBORROW4(uVar3,0x10)) {
    return param_1;
  }
  if (iVar1 != -0x3ff) {
    return 0xffffffff;
  }
                    // WARNING: Subroutine does not return
  FUN_80039a08();
}



undefined8 FUN_8003979c(uint param_1)

{
  uint uVar1;
  uint uVar2;
  
  uVar1 = param_1 & 0x80000000;
  if ((int)uVar1 < 0) {
    param_1 = -param_1;
  }
  uVar2 = count_leading_zeroes(param_1);
  param_1 = param_1 << (uVar2 & 0xff);
  if (param_1 != 0) {
    return CONCAT44(uVar1 + (0x41d - uVar2) * 0x100000 + (param_1 >> 0xb),param_1 << 0x15);
  }
  return 0;
}



undefined8 FUN_800397d0(int param_1)

{
  uint uVar1;
  uint uVar2;
  
  uVar2 = count_leading_zeroes(param_1);
  uVar1 = param_1 << (uVar2 & 0xff);
  if (uVar1 != 0) {
    return CONCAT44((0x41d - uVar2) * 0x100000 + (uVar1 >> 0xb),uVar1 << 0x15);
  }
  return 0;
}



longlong FUN_80039890(uint param_1,uint param_2,uint param_3,uint param_4)

{
  longlong lVar1;
  byte bVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  uint unaff_r5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  int iVar11;
  int iVar12;
  bool bVar13;
  bool bVar14;
  
  uVar10 = DAT_800399fc & param_2 >> 4;
  bVar13 = uVar10 == 0;
  if (!bVar13) {
    unaff_r5 = DAT_800399fc & param_4 >> 4;
    bVar13 = unaff_r5 == 0;
  }
  if (!bVar13) {
    bVar13 = uVar10 == DAT_800399fc;
  }
  if (!bVar13) {
    bVar13 = unaff_r5 == DAT_800399fc;
  }
  if (bVar13) {
    if (uVar10 == DAT_800399fc || (DAT_800399fc & param_4 >> 4) == DAT_800399fc) {
                    // WARNING: Subroutine does not return
      FUN_80039a08();
    }
    return (ulonglong)((param_2 ^ param_4) & 0x80000000) << 0x20;
  }
  uVar3 = param_2 & ~(DAT_800399fc << 5) | 0x100000;
  uVar5 = param_4 & ~(DAT_800399fc << 5) | 0x100000;
  iVar11 = (uVar10 | (param_2 ^ param_4) >> 0x1f) + unaff_r5;
  lVar1 = (ulonglong)param_3 * (ulonglong)uVar3;
  uVar10 = (uint)lVar1;
  uVar9 = (uint)((ulonglong)lVar1 >> 0x20);
  lVar1 = (ulonglong)uVar5 * (ulonglong)param_1;
  uVar8 = (uint)lVar1;
  uVar6 = (uint)((ulonglong)lVar1 >> 0x20);
  iVar12 = iVar11 + -0x3fc0000;
  bVar13 = CARRY4(uVar8,uVar10);
  uVar8 = uVar8 + uVar10;
  uVar7 = uVar6 + uVar9 + (uint)bVar13;
  lVar1 = (ulonglong)uVar5 * (ulonglong)uVar3;
  uVar10 = (uint)lVar1;
  uVar3 = (uint)((ulonglong)param_3 * (ulonglong)param_1 >> 0x20);
  bVar14 = CARRY4(uVar8,uVar3);
  uVar8 = uVar8 + uVar3;
  uVar3 = uVar7 + uVar10 + (uint)bVar14;
  uVar10 = (int)((ulonglong)lVar1 >> 0x20) +
           (uint)(bVar13 == false && CARRY4(uVar6,uVar9) ||
                 bVar13 == true && uVar6 + uVar9 + 1 <= uVar6) +
           (uint)(bVar14 == false && CARRY4(uVar7,uVar10) ||
                 bVar14 == true && uVar7 + uVar10 + 1 <= uVar7);
  if ((int)((ulonglong)param_3 * (ulonglong)param_1) != 0) {
    uVar8 = uVar8 | 1;
  }
  if ((uVar10 & 0x200) == 0) {
    uVar5 = uVar8 << 0xc;
    uVar6 = uVar10 * 0x1000 | uVar3 >> 0x14;
    uVar10 = uVar3 * 0x1000 | uVar8 >> 0x14;
    iVar4 = -4;
  }
  else {
    uVar5 = uVar8 << 0xb;
    uVar6 = uVar10 * 0x800 | uVar3 >> 0x15;
    uVar10 = uVar3 * 0x800 | uVar8 >> 0x15;
    iVar4 = -3;
  }
  uVar7 = iVar4 + (iVar12 >> 0x10);
  uVar3 = uVar6 + uVar7 * 0x100000 ^ iVar11 * -0x80000000;
  if (uVar5 != 0) {
    bVar2 = -(char)((int)uVar5 >> 0x1f);
    if ((uVar5 & 0x7fffffff) != 0) {
      uVar5 = 0;
    }
    uVar3 = uVar3 + (bVar2 == 1 && uVar10 + 1 <= uVar10);
    uVar10 = uVar10 + bVar2 & ~(uVar5 >> 0x1f);
  }
  if (DAT_80039a00 <= uVar7) {
    if (0x3ffffff < iVar12) {
      uVar3 = uVar3 + 0xa0000000;
    }
    if (iVar11 + -0x7fc0000 < 0 == SBORROW4(iVar12,0x4000000)) {
      return (ulonglong)(uVar3 & 0x80000000 | 0x7ff00000) << 0x20;
    }
    return (ulonglong)(uVar3 + 0x60000000 & 0x80000000) << 0x20;
  }
  return CONCAT44(uVar3,uVar10);
}



undefined8 FUN_80039a08(int param_1,uint param_2,int param_3,uint param_4)

{
  uint unaff_r5;
  uint uVar1;
  uint *in_lr;
  bool bVar2;
  bool bVar3;
  undefined8 uVar4;
  
  if ((((int)*in_lr < 0) || (unaff_r5 = param_4 * 2 + (uint)(param_3 != 0), unaff_r5 < 0xffe00001))
     && (uVar1 = param_2 * 2 + (uint)(param_1 != 0), uVar1 < 0xffe00001)) {
    if (uVar1 == 0xffe00000) {
      uVar1 = ((int)param_2 >> 0x1f) * -3 + 2;
      if (unaff_r5 == 0xffe00000) {
        uVar1 = (uVar1 - ((int)param_4 >> 0x1f)) + (uint)(0xffdfffff < unaff_r5);
      }
    }
    else {
      uVar1 = param_4 >> 0x1f;
    }
  }
  else {
    uVar1 = 8;
  }
  uVar1 = *in_lr >> uVar1 * 3 & 7;
  switch(uVar1) {
  case 4:
    break;
  case 5:
    param_3 = param_1;
    param_4 = param_2;
    break;
  case 6:
  case 7:
    return 0x7ff8000000000000;
  default:
                    // WARNING: Could not recover jumptable at 0x80039a78. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar4 = (*(code *)(in_lr + uVar1 + 1))();
    return uVar4;
  }
  bVar2 = param_3 != 0;
  bVar3 = !bVar2 && CARRY4(param_4,param_4) || bVar2 && param_4 * 2 + 1 <= param_4;
  uVar1 = param_4 * 2 + (uint)bVar2;
  bVar2 = uVar1 != 0;
  if (bVar2) {
    bVar3 = uVar1 < 0x200001;
  }
  if (bVar3 && (bVar2 && uVar1 != 0x200000)) {
    param_3 = 0;
  }
  if (bVar3 && (bVar2 && uVar1 != 0x200000)) {
    param_4 = param_4 & 0x80000000;
  }
  return CONCAT44(param_4,param_3);
}



void FUN_80039ad0(undefined4 param_1,uint param_2,undefined4 param_3,uint param_4)

{
  uint uVar1;
  bool bVar2;
  bool bVar3;
  
  uVar1 = param_4 | param_2;
  if ((int)uVar1 < 0) {
    if ((int)(uVar1 + 0x100000) < 0) {
      if (-1 < (int)(uVar1 - 0x100000)) {
        return;
      }
      if (param_2 == param_4) {
        return;
      }
      return;
    }
    bVar2 = 0xffdfffff < param_4 << 1;
    if (!bVar2) {
      bVar2 = 0xffdfffff < param_2 << 1;
    }
    if (!bVar2) {
      return;
    }
  }
  else {
    bVar3 = SCARRY4(uVar1,0x100000);
    bVar2 = (int)(uVar1 + 0x100000) < 0;
    if (!bVar2) {
      bVar3 = SBORROW4(uVar1,0x100000);
      bVar2 = (int)(uVar1 - 0x100000) < 0;
    }
    if (!bVar2) {
      if (param_4 == param_2) {
        return;
      }
      return;
    }
    if (!bVar3) {
      return;
    }
    bVar2 = (int)(param_4 + 0x100000) < 0;
    if (!bVar2) {
      bVar2 = (int)(param_2 + 0x100000) < 0;
    }
    if (!bVar2) {
      return;
    }
  }
                    // WARNING: Subroutine does not return
  FUN_80039a08(param_3,param_4,param_1,param_2);
}



ulonglong FUN_80039b5c(uint param_1,uint param_2,uint param_3,uint param_4)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  int iVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  bool bVar12;
  bool bVar13;
  bool bVar14;
  
  uVar3 = param_2 ^ 0x80000000;
  if (-1 < (int)(param_2 ^ param_4)) {
    param_4 = param_4 ^ 0x80000000;
    bVar12 = param_1 < param_3;
    uVar9 = param_1 - param_3;
    if ((!bVar12 || !CARRY4(uVar3,~param_4)) && (bVar12 || uVar3 < uVar3 + ~param_4 + 1)) {
      bVar13 = CARRY4(param_3,uVar9);
      param_3 = param_3 + uVar9;
      uVar10 = uVar3 - (param_4 + bVar12) ^ 0x80000000;
      param_4 = param_4 + uVar10 + (uint)bVar13;
      bVar12 = param_1 < uVar9;
      param_1 = param_1 - uVar9;
      uVar3 = uVar3 - (uVar10 + bVar12);
    }
    uVar9 = uVar3 >> 0x14;
    uVar10 = uVar9 - (param_4 >> 0x14);
    bVar12 = (DAT_80039f70 & param_4 << 1) == 0;
    if (!bVar12) {
      bVar12 = DAT_80039f70 == uVar9 << 0x15;
    }
    if (bVar12) {
      if (DAT_80039f70 != uVar9 << 0x15) {
        if ((uVar3 & DAT_80039f70 >> 1) == 0) {
          uVar3 = 0;
          param_1 = 0;
        }
        return CONCAT44(uVar3,param_1);
      }
                    // WARNING: Subroutine does not return
      FUN_80039a08();
    }
    uVar7 = -param_3;
    iVar8 = ((int)DAT_80039f70 >> 1) -
            ((param_4 & ~((int)DAT_80039f70 >> 1)) + (uint)(param_3 != 0));
    uVar11 = 0x20 - uVar10;
    uVar4 = uVar3 & ~(uVar3 & 0xfff00000);
    if (uVar10 < 0x21) {
      uVar1 = uVar7 >> (uVar10 & 0xff);
      uVar2 = param_1 + uVar1;
      uVar4 = uVar4 + (iVar8 >> (uVar10 & 0xff)) + (uint)CARRY4(param_1,uVar1);
      uVar10 = iVar8 << (uVar11 & 0xff);
      bVar13 = CARRY4(uVar2,uVar10);
      uVar2 = uVar2 + uVar10;
      bVar12 = bVar13 == true && uVar4 + 1 <= uVar4;
      iVar8 = uVar4 + bVar13;
    }
    else {
      param_3 = param_3 * -2;
      if (param_3 != 0) {
        param_3 = 1;
      }
      uVar10 = uVar10 - 0x20;
      uVar7 = param_3 | (iVar8 * 2 + (uint)CARRY4(uVar7,uVar7)) * 2;
      uVar11 = 0x1e - uVar10;
      if (0x1e < uVar10 || uVar11 == 0) {
        return CONCAT44(uVar4 + (uVar3 & 0xfff00000),param_1);
      }
      uVar2 = iVar8 >> (uVar10 & 0xff);
      bVar13 = CARRY4(param_1,uVar2);
      uVar2 = param_1 + uVar2;
      bVar12 = bVar13 == false && uVar4 != 0 || bVar13 == true;
      iVar8 = uVar4 - !bVar13;
    }
    if (-1 < iVar8) {
      iVar6 = uVar7 << (uVar11 & 0xff);
      iVar8 = iVar8 + (uVar3 & 0xfff00000);
      if (-1 < iVar6) {
        return CONCAT44(iVar8,uVar2);
      }
      uVar2 = uVar2 + 1;
      if (uVar2 != 0 && iVar6 != -0x80000000) {
        return CONCAT44(iVar8,uVar2);
      }
      if (uVar2 == 0) {
        iVar8 = iVar8 + 1;
      }
      else {
        uVar2 = uVar2 & 0xfffffffe;
      }
      return CONCAT44(iVar8,uVar2);
    }
    uVar10 = uVar11 + 1 & 0xff;
    bVar13 = (bool)((byte)(uVar7 >> 0x20 - uVar10) & 1);
    bVar14 = uVar10 == 0 && bVar12 || uVar10 != 0 && bVar13;
    uVar11 = uVar2 * 2 + (uint)bVar14;
    iVar8 = iVar8 * 2 +
            (uint)(((uVar10 != 0 || !bVar12) && (uVar10 == 0 || !bVar13)) && CARRY4(uVar2,uVar2) ||
                  bVar14 && uVar2 * 2 + 1 <= uVar2);
    uVar4 = iVar8 + uVar9 * 0x200000;
    bVar12 = (bool)((byte)(uVar4 >> 0x14) & 1);
    if (bVar12 && uVar4 >> 0x15 != 0) {
      uVar9 = -((int)(uVar7 << uVar10) >> 0x1f);
      uVar4 = uVar11 + uVar9;
      bVar12 = uVar4 == 0;
      if (!CARRY4(uVar11,uVar9)) {
        bVar12 = uVar7 << uVar10 == -0x80000000;
      }
      iVar8 = iVar8 + (uVar3 & 0xfff00000);
      if (!bVar12) {
        return CONCAT44(iVar8,uVar4);
      }
      if (uVar4 == 0) {
        iVar8 = iVar8 + 1;
      }
      else {
        uVar4 = uVar4 & 0xfffffffe;
      }
      return CONCAT44(iVar8,uVar4);
    }
    if (!bVar12) {
      iVar8 = iVar8 + 0x200000;
      if (iVar8 == 0) {
        uVar7 = count_leading_zeroes(uVar11);
        uVar10 = uVar11 << (uVar7 & 0xff);
        if (uVar10 == 0) {
          return (ulonglong)uVar11;
        }
        iVar8 = uVar10 << 0x15;
        iVar6 = ((uVar9 & 0xfffff7ff) - uVar7) + -0x17;
        uVar10 = uVar10 >> 0xb;
      }
      else {
        iVar6 = count_leading_zeroes(iVar8);
        uVar7 = iVar6 - 0xb;
        iVar6 = ((uVar9 & 0xfffff7ff) - uVar7) + -2;
        uVar10 = iVar8 << (uVar7 & 0xff) | uVar11 >> (0x20 - uVar7 & 0xff);
        iVar8 = uVar11 << (uVar7 & 0xff);
      }
      iVar5 = uVar10 + (uVar3 & 0x80000000) + iVar6 * 0x100000;
      if (-1 < iVar6) {
        return CONCAT44(iVar5,iVar8);
      }
      return (ulonglong)(iVar5 + 0x60000000U & 0x80000000) << 0x20;
    }
    uVar9 = (iVar8 >> 1) + (uVar3 & 0xfff00000);
    uVar3 = (uint)((byte)iVar8 & 1) << 0x1f | uVar11 >> 1;
    if (uVar9 * 2 == 0 && uVar3 == 0) {
      return (ulonglong)uVar3;
    }
    if (0x1fffff < uVar9 * 2) {
      return CONCAT44(uVar9,uVar3);
    }
    return (ulonglong)(uVar9 & 0x80000000) << 0x20;
  }
  bVar12 = param_1 < param_3;
  uVar9 = param_1 - param_3;
  iVar8 = uVar3 - (param_4 + bVar12);
  if ((!bVar12 || !CARRY4(uVar3,~param_4)) && (bVar12 || uVar3 < uVar3 + ~param_4 + 1)) {
    bVar12 = CARRY4(param_3,uVar9);
    param_3 = param_3 + uVar9;
    param_4 = param_4 + iVar8 + (uint)bVar12;
    bVar12 = param_1 < uVar9;
    param_1 = param_1 - uVar9;
    uVar3 = uVar3 - (iVar8 + (uint)bVar12);
  }
  uVar9 = uVar3 >> 0x14;
  uVar10 = uVar9 - (param_4 >> 0x14);
  bVar12 = (DAT_800393bc & param_4 << 1) == 0;
  if (!bVar12) {
    bVar12 = DAT_800393bc == uVar9 << 0x15;
  }
  if (bVar12) {
    if (DAT_800393bc != uVar9 << 0x15) {
      if ((uVar3 & DAT_800393bc >> 1) == 0) {
        param_1 = 0;
        uVar3 = uVar3 & 0x80000000;
      }
      return CONCAT44(uVar3,param_1);
    }
                    // WARNING: Subroutine does not return
    FUN_80039a08();
  }
  uVar11 = 0x20 - uVar10;
  uVar4 = uVar3 & ~(uVar3 & 0xfff00000);
  uVar7 = param_4 & ~DAT_800393bc | 0x100000;
  if (uVar10 < 0x21) {
    uVar2 = param_3 >> (uVar10 & 0xff);
    bVar12 = CARRY4(param_1,uVar2);
    uVar2 = param_1 + uVar2;
    uVar9 = uVar7 << (uVar11 & 0xff);
    param_1 = uVar2 + uVar9;
    uVar10 = uVar4 + (uVar7 >> (uVar10 & 0xff)) + (uint)bVar12 + (uint)CARRY4(uVar2,uVar9);
    if (uVar10 < 0x100000) {
      uVar10 = uVar10 + (uVar3 & 0xfff00000);
      goto LAB_800392e0;
    }
LAB_80039340:
    bVar12 = (bool)((byte)param_1 & 1);
    uVar9 = (uint)((byte)(uVar10 + 0x100000) & 1) << 0x1f | param_1 >> 1;
    uVar10 = (uVar10 + 0x100000 >> 1) + (uVar3 & 0xfff00000);
    if (!bVar12) {
LAB_80039378:
      if (uVar10 * 2 < 0xffe00000) {
        return CONCAT44(uVar10,uVar9);
      }
      goto LAB_80039ac0;
    }
    bVar13 = uVar9 < uVar9 + 1;
    uVar9 = uVar9 + bVar12;
    uVar3 = uVar9;
    if (bVar12 != true || bVar13) {
      uVar3 = param_3 << (uVar11 & 0xff);
    }
    if (uVar3 != 0) goto LAB_80039378;
  }
  else {
    param_3 = uVar7 * 2 + (uint)(param_3 != 0);
    uVar10 = uVar10 - 0x20;
    bVar12 = uVar10 < 0x20;
    uVar11 = 0x1f - uVar10;
    if (bVar12) {
      uVar7 = uVar7 >> (uVar10 & 0xff);
      bVar12 = CARRY4(param_1,uVar7);
      param_1 = param_1 + uVar7;
    }
    else {
      uVar11 = 0;
    }
    uVar10 = uVar4 + (uVar3 & 0xfff00000) + (uint)bVar12;
    if (uVar9 != uVar10 >> 0x14) {
      uVar10 = uVar10 + uVar9 * -0x100000;
      goto LAB_80039340;
    }
LAB_800392e0:
    param_3 = param_3 << (uVar11 & 0xff);
    if (-1 < (int)param_3) {
      return CONCAT44(uVar10,param_1);
    }
    uVar9 = param_1 + 1;
    uVar3 = uVar9;
    if (param_1 != 0xffffffff) {
      uVar3 = param_3 & 0x7fffffff;
    }
    if (uVar3 != 0) {
      return CONCAT44(uVar10,uVar9);
    }
  }
  if (uVar9 == 0) {
    uVar10 = uVar10 + 1;
  }
  else {
    uVar9 = uVar9 & 0xfffffffe;
  }
  if (uVar10 << 1 < 0xffe00000) {
    return CONCAT44(uVar10,uVar9);
  }
LAB_80039ac0:
  return (ulonglong)(uVar10 + 0xa0000000 & 0x80000000 | 0x7ff00000) << 0x20;
}



longlong FUN_80039b74(uint param_1,uint param_2)

{
  ulonglong uVar1;
  ulonglong uVar2;
  longlong lVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  bool bVar12;
  
  if (0x1fffff < (int)(param_2 + 0x100000)) {
    uVar11 = (param_2 >> 0x14) + 0xfd;
    uVar4 = param_2 & ~(param_2 & 0xfff00000) | 0x100000;
    if ((bool)((byte)uVar11 & 1)) {
      iVar6 = (int)param_1 >> 0x1f;
      param_1 = param_1 << 1;
      uVar4 = uVar4 * 2 - iVar6;
    }
    uVar4 = uVar4 << 10;
    uVar5 = uVar4 | param_1 >> 0x16;
    uVar10 = param_1 * 0x400;
    uVar7 = (uint)*(byte *)((uVar4 >> 0x1a) + 0x80039cb0);
    lVar3 = (ulonglong)(0xc0000000 - (uVar4 >> 0x10) * uVar7 * uVar7) * (ulonglong)uVar7;
    uVar4 = (uint)lVar3 >> 0x17 | (int)((ulonglong)lVar3 >> 0x20) << 9;
    lVar3 = (ulonglong)uVar5 * (ulonglong)(uVar4 * uVar4);
    iVar6 = (int)lVar3;
    lVar3 = (ulonglong)(0xc0000000 - ((int)((ulonglong)lVar3 >> 0x20) + (uint)(iVar6 != 0))) *
            (ulonglong)uVar4 + ((ulonglong)(uint)-iVar6 * (ulonglong)uVar4 >> 0x20);
    uVar9 = (uint)lVar3 >> 0xf | (int)((ulonglong)lVar3 >> 0x20) << 0x11;
    uVar7 = (uint)((ulonglong)uVar9 * (ulonglong)uVar9 >> 0x20);
    uVar4 = (uint)(((ulonglong)uVar9 * (ulonglong)uVar9 & 0xffffffff) * (ulonglong)uVar5 >> 0x20);
    uVar8 = (uint)((ulonglong)uVar10 * (ulonglong)uVar7 >> 0x20);
    lVar3 = (ulonglong)uVar5 * (ulonglong)uVar7 +
            (ulonglong)CONCAT14(CARRY4(uVar8,uVar4),uVar8 + uVar4);
    iVar6 = (int)lVar3;
    uVar1 = (ulonglong)(0xc0000000 - ((int)((ulonglong)lVar3 >> 0x20) + (uint)(iVar6 != 0))) *
            (ulonglong)uVar9 + ((ulonglong)(uint)-iVar6 * (ulonglong)uVar9 >> 0x20);
    uVar4 = (uint)(uVar1 >> 0x20);
    uVar7 = (uint)((uVar1 & 0xffffffff) * (ulonglong)uVar4 >> 0x20);
    uVar2 = (ulonglong)uVar4 * (ulonglong)uVar4 + (ulonglong)CONCAT14(CARRY4(uVar7,uVar7),uVar7 * 2)
    ;
    uVar7 = (uint)(uVar2 >> 0x20);
    uVar8 = (uint)((uVar2 & 0xffffffff) * (ulonglong)uVar5 >> 0x20);
    uVar9 = (uint)((ulonglong)uVar10 * (ulonglong)uVar7 >> 0x20);
    lVar3 = (ulonglong)uVar5 * (ulonglong)uVar7 +
            (ulonglong)CONCAT14(CARRY4(uVar8,uVar9),uVar8 + uVar9);
    iVar6 = (int)lVar3;
    uVar9 = 0x30000000 - ((int)((ulonglong)lVar3 >> 0x20) + (uint)(iVar6 != 0));
    uVar7 = (uint)((ulonglong)(uint)-iVar6 * (ulonglong)uVar4 >> 0x20);
    uVar8 = (uint)((ulonglong)uVar9 * (uVar1 & 0xffffffff) >> 0x20);
    uVar1 = (ulonglong)uVar9 * (ulonglong)uVar4 +
            (ulonglong)CONCAT14(CARRY4(uVar8,uVar7),uVar8 + uVar7);
    uVar4 = (uint)(uVar1 >> 0x20);
    uVar7 = (uint)((uVar1 & 0xffffffff) * (ulonglong)uVar5 >> 0x20);
    uVar10 = (uint)((ulonglong)uVar4 * (ulonglong)uVar10 >> 0x20);
    lVar3 = (ulonglong)uVar4 * (ulonglong)uVar5 +
            (ulonglong)CONCAT14(CARRY4(uVar10,uVar7),uVar10 + uVar7);
    uVar5 = (uint)lVar3;
    uVar10 = (int)((ulonglong)lVar3 >> 0x20) + (uint)(0xffffffdf < uVar5);
    uVar4 = uVar10 >> 6;
    uVar10 = uVar5 + 0x20 >> 6 | uVar10 * 0x4000000;
    if ((uVar5 - 0x1b & 0x3f) < 0xb) {
      uVar5 = (uint)((ulonglong)uVar10 * (ulonglong)uVar10);
      iVar6 = (int)((ulonglong)uVar10 * (ulonglong)uVar10 >> 0x20) + uVar10 * uVar4 * 2 +
              param_1 * -0x100000;
      if (iVar6 < 0) {
        if ((int)(iVar6 + uVar4 + (uint)CARRY4(uVar5,uVar10)) < 0) {
          bVar12 = 0xfffffffe < uVar10;
          uVar10 = uVar10 + 1;
          uVar4 = uVar4 + bVar12;
        }
      }
      else {
        if (-1 < (int)(iVar6 - (uVar4 + (uVar5 < uVar10)))) {
          bVar12 = uVar10 == 0;
          uVar10 = uVar10 - 1;
          uVar4 = uVar4 - bVar12;
        }
      }
    }
    return CONCAT44(uVar4 + ((uVar11 >> 1) + 0x180) * 0x100000,uVar10);
  }
  uVar4 = (param_2 + 0x100000) * 2;
  if (uVar4 >> 0x16 == 0) {
    if ((bool)((byte)(uVar4 >> 0x15) & 1)) {
      return (ulonglong)(param_2 & 0x80000000) << 0x20;
    }
                    // WARNING: Subroutine does not return
    FUN_80039a08();
  }
  return (ulonglong)DAT_80039d70 << 0x20;
}



ulonglong FUN_80039d74(uint param_1,uint param_2,uint param_3,uint param_4)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  int iVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  bool bVar11;
  bool bVar12;
  bool bVar13;
  
  if (-1 < (int)(param_2 ^ param_4)) {
    bVar11 = param_1 < param_3;
    uVar8 = param_1 - param_3;
    if ((!bVar11 || !CARRY4(param_2,~param_4)) && (bVar11 || param_2 < param_2 + ~param_4 + 1)) {
      bVar12 = CARRY4(param_3,uVar8);
      param_3 = param_3 + uVar8;
      uVar9 = param_2 - (param_4 + bVar11) ^ 0x80000000;
      param_4 = param_4 + uVar9 + (uint)bVar12;
      bVar11 = param_1 < uVar8;
      param_1 = param_1 - uVar8;
      param_2 = param_2 - (uVar9 + bVar11);
    }
    uVar8 = param_2 >> 0x14;
    uVar9 = uVar8 - (param_4 >> 0x14);
    bVar11 = (DAT_80039f70 & param_4 << 1) == 0;
    if (!bVar11) {
      bVar11 = DAT_80039f70 == uVar8 << 0x15;
    }
    if (bVar11) {
      if (DAT_80039f70 != uVar8 << 0x15) {
        if ((param_2 & DAT_80039f70 >> 1) == 0) {
          param_2 = 0;
          param_1 = 0;
        }
        return CONCAT44(param_2,param_1);
      }
                    // WARNING: Subroutine does not return
      FUN_80039a08();
    }
    uVar6 = -param_3;
    iVar7 = ((int)DAT_80039f70 >> 1) -
            ((param_4 & ~((int)DAT_80039f70 >> 1)) + (uint)(param_3 != 0));
    uVar10 = 0x20 - uVar9;
    uVar3 = param_2 & ~(param_2 & 0xfff00000);
    if (uVar9 < 0x21) {
      uVar1 = uVar6 >> (uVar9 & 0xff);
      uVar2 = param_1 + uVar1;
      uVar3 = uVar3 + (iVar7 >> (uVar9 & 0xff)) + (uint)CARRY4(param_1,uVar1);
      uVar9 = iVar7 << (uVar10 & 0xff);
      bVar12 = CARRY4(uVar2,uVar9);
      uVar2 = uVar2 + uVar9;
      bVar11 = bVar12 == true && uVar3 + 1 <= uVar3;
      iVar7 = uVar3 + bVar12;
    }
    else {
      param_3 = param_3 * -2;
      if (param_3 != 0) {
        param_3 = 1;
      }
      uVar9 = uVar9 - 0x20;
      uVar6 = param_3 | (iVar7 * 2 + (uint)CARRY4(uVar6,uVar6)) * 2;
      uVar10 = 0x1e - uVar9;
      if (0x1e < uVar9 || uVar10 == 0) {
        return CONCAT44(uVar3 + (param_2 & 0xfff00000),param_1);
      }
      uVar2 = iVar7 >> (uVar9 & 0xff);
      bVar12 = CARRY4(param_1,uVar2);
      uVar2 = param_1 + uVar2;
      bVar11 = bVar12 == false && uVar3 != 0 || bVar12 == true;
      iVar7 = uVar3 - !bVar12;
    }
    if (-1 < iVar7) {
      iVar5 = uVar6 << (uVar10 & 0xff);
      iVar7 = iVar7 + (param_2 & 0xfff00000);
      if (-1 < iVar5) {
        return CONCAT44(iVar7,uVar2);
      }
      uVar2 = uVar2 + 1;
      if (uVar2 != 0 && iVar5 != -0x80000000) {
        return CONCAT44(iVar7,uVar2);
      }
      if (uVar2 == 0) {
        iVar7 = iVar7 + 1;
      }
      else {
        uVar2 = uVar2 & 0xfffffffe;
      }
      return CONCAT44(iVar7,uVar2);
    }
    uVar9 = uVar10 + 1 & 0xff;
    bVar12 = (bool)((byte)(uVar6 >> 0x20 - uVar9) & 1);
    bVar13 = uVar9 == 0 && bVar11 || uVar9 != 0 && bVar12;
    uVar10 = uVar2 * 2 + (uint)bVar13;
    iVar7 = iVar7 * 2 +
            (uint)(((uVar9 != 0 || !bVar11) && (uVar9 == 0 || !bVar12)) && CARRY4(uVar2,uVar2) ||
                  bVar13 && uVar2 * 2 + 1 <= uVar2);
    uVar3 = iVar7 + uVar8 * 0x200000;
    bVar11 = (bool)((byte)(uVar3 >> 0x14) & 1);
    if (bVar11 && uVar3 >> 0x15 != 0) {
      uVar8 = -((int)(uVar6 << uVar9) >> 0x1f);
      uVar3 = uVar10 + uVar8;
      bVar11 = uVar3 == 0;
      if (!CARRY4(uVar10,uVar8)) {
        bVar11 = uVar6 << uVar9 == -0x80000000;
      }
      iVar7 = iVar7 + (param_2 & 0xfff00000);
      if (!bVar11) {
        return CONCAT44(iVar7,uVar3);
      }
      if (uVar3 == 0) {
        iVar7 = iVar7 + 1;
      }
      else {
        uVar3 = uVar3 & 0xfffffffe;
      }
      return CONCAT44(iVar7,uVar3);
    }
    if (!bVar11) {
      iVar7 = iVar7 + 0x200000;
      if (iVar7 == 0) {
        uVar6 = count_leading_zeroes(uVar10);
        uVar9 = uVar10 << (uVar6 & 0xff);
        if (uVar9 == 0) {
          return (ulonglong)uVar10;
        }
        iVar7 = uVar9 << 0x15;
        iVar5 = ((uVar8 & 0xfffff7ff) - uVar6) + -0x17;
        uVar9 = uVar9 >> 0xb;
      }
      else {
        iVar5 = count_leading_zeroes(iVar7);
        uVar6 = iVar5 - 0xb;
        iVar5 = ((uVar8 & 0xfffff7ff) - uVar6) + -2;
        uVar9 = iVar7 << (uVar6 & 0xff) | uVar10 >> (0x20 - uVar6 & 0xff);
        iVar7 = uVar10 << (uVar6 & 0xff);
      }
      iVar4 = uVar9 + (param_2 & 0x80000000) + iVar5 * 0x100000;
      if (-1 < iVar5) {
        return CONCAT44(iVar4,iVar7);
      }
      return (ulonglong)(iVar4 + 0x60000000U & 0x80000000) << 0x20;
    }
    uVar9 = (iVar7 >> 1) + (param_2 & 0xfff00000);
    uVar8 = (uint)((byte)iVar7 & 1) << 0x1f | uVar10 >> 1;
    if (uVar9 * 2 == 0 && uVar8 == 0) {
      return (ulonglong)uVar8;
    }
    if (0x1fffff < uVar9 * 2) {
      return CONCAT44(uVar9,uVar8);
    }
    return (ulonglong)(uVar9 & 0x80000000) << 0x20;
  }
  param_4 = param_4 ^ 0x80000000;
  bVar11 = param_1 < param_3;
  uVar8 = param_1 - param_3;
  iVar7 = param_2 - (param_4 + bVar11);
  if ((!bVar11 || !CARRY4(param_2,~param_4)) && (bVar11 || param_2 < param_2 + ~param_4 + 1)) {
    bVar11 = CARRY4(param_3,uVar8);
    param_3 = param_3 + uVar8;
    param_4 = param_4 + iVar7 + (uint)bVar11;
    bVar11 = param_1 < uVar8;
    param_1 = param_1 - uVar8;
    param_2 = param_2 - (iVar7 + (uint)bVar11);
  }
  uVar8 = param_2 >> 0x14;
  uVar9 = uVar8 - (param_4 >> 0x14);
  bVar11 = (DAT_800393bc & param_4 << 1) == 0;
  if (!bVar11) {
    bVar11 = DAT_800393bc == uVar8 << 0x15;
  }
  if (bVar11) {
    if (DAT_800393bc != uVar8 << 0x15) {
      if ((param_2 & DAT_800393bc >> 1) == 0) {
        param_1 = 0;
        param_2 = param_2 & 0x80000000;
      }
      return CONCAT44(param_2,param_1);
    }
                    // WARNING: Subroutine does not return
    FUN_80039a08();
  }
  uVar10 = 0x20 - uVar9;
  uVar3 = param_2 & ~(param_2 & 0xfff00000);
  uVar6 = param_4 & ~DAT_800393bc | 0x100000;
  if (uVar9 < 0x21) {
    uVar2 = param_3 >> (uVar9 & 0xff);
    bVar11 = CARRY4(param_1,uVar2);
    uVar2 = param_1 + uVar2;
    uVar8 = uVar6 << (uVar10 & 0xff);
    param_1 = uVar2 + uVar8;
    uVar9 = uVar3 + (uVar6 >> (uVar9 & 0xff)) + (uint)bVar11 + (uint)CARRY4(uVar2,uVar8);
    if (uVar9 < 0x100000) {
      uVar9 = uVar9 + (param_2 & 0xfff00000);
      goto LAB_800392e0;
    }
LAB_80039340:
    bVar11 = (bool)((byte)param_1 & 1);
    uVar8 = (uint)((byte)(uVar9 + 0x100000) & 1) << 0x1f | param_1 >> 1;
    uVar9 = (uVar9 + 0x100000 >> 1) + (param_2 & 0xfff00000);
    if (!bVar11) {
LAB_80039378:
      if (uVar9 * 2 < 0xffe00000) {
        return CONCAT44(uVar9,uVar8);
      }
      goto LAB_80039ac0;
    }
    bVar12 = uVar8 < uVar8 + 1;
    uVar8 = uVar8 + bVar11;
    uVar6 = uVar8;
    if (bVar11 != true || bVar12) {
      uVar6 = param_3 << (uVar10 & 0xff);
    }
    if (uVar6 != 0) goto LAB_80039378;
  }
  else {
    param_3 = uVar6 * 2 + (uint)(param_3 != 0);
    uVar9 = uVar9 - 0x20;
    bVar11 = uVar9 < 0x20;
    uVar10 = 0x1f - uVar9;
    if (bVar11) {
      uVar6 = uVar6 >> (uVar9 & 0xff);
      bVar11 = CARRY4(param_1,uVar6);
      param_1 = param_1 + uVar6;
    }
    else {
      uVar10 = 0;
    }
    uVar9 = uVar3 + (param_2 & 0xfff00000) + (uint)bVar11;
    if (uVar8 != uVar9 >> 0x14) {
      uVar9 = uVar9 + uVar8 * -0x100000;
      goto LAB_80039340;
    }
LAB_800392e0:
    param_3 = param_3 << (uVar10 & 0xff);
    if (-1 < (int)param_3) {
      return CONCAT44(uVar9,param_1);
    }
    uVar8 = param_1 + 1;
    uVar6 = uVar8;
    if (param_1 != 0xffffffff) {
      uVar6 = param_3 & 0x7fffffff;
    }
    if (uVar6 != 0) {
      return CONCAT44(uVar9,uVar8);
    }
  }
  if (uVar8 == 0) {
    uVar9 = uVar9 + 1;
  }
  else {
    uVar8 = uVar8 & 0xfffffffe;
  }
  if (uVar9 << 1 < 0xffe00000) {
    return CONCAT44(uVar9,uVar8);
  }
LAB_80039ac0:
  return (ulonglong)(uVar9 + 0xa0000000 & 0x80000000 | 0x7ff00000) << 0x20;
}



longlong FUN_80039f74(uint param_1,int param_2)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  bool bVar4;
  
  uVar1 = param_1 & 0x80000000;
  uVar2 = (param_1 << 1) >> 4;
  uVar3 = param_1 << 1 ^ param_1;
  bVar4 = uVar3 == 0;
  if (!bVar4) {
    param_1 = param_1 << 0x1d;
    param_2 = (uVar1 | uVar2) + 0x38000000;
    bVar4 = (uVar3 & 0x7f000000) == 0;
  }
  if (bVar4) {
    if ((uVar2 & 0x8000000) != 0) {
                    // WARNING: Subroutine does not return
      FUN_8003a54c(uVar1 | param_1 >> 0x1d | uVar2 << 3);
    }
    return (ulonglong)uVar1 << 0x20;
  }
  return CONCAT44(param_2,param_1);
}



uint FUN_80039fd8(uint param_1,uint param_2)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  bool bVar8;
  bool bVar9;
  
  if ((int)(param_1 ^ param_2) < 0) {
    param_2 = param_2 ^ 0x80000000;
    if (param_1 < param_2) {
      uVar5 = param_1 - param_2 ^ 0x80000000;
      param_1 = param_1 - uVar5;
      param_2 = param_2 + uVar5;
    }
    uVar5 = param_1 >> 0x17;
    bVar8 = (param_2 & 0x7f800000) == 0;
    if (!bVar8) {
      bVar8 = (uVar5 & 0xff) == 0xff;
    }
    uVar6 = uVar5 - (param_2 >> 0x17);
    if (bVar8) {
      if ((uVar5 & 0xff) != 0xff) {
        if ((param_1 & 0x7f800000) == 0) {
          param_1 = 0;
        }
        return param_1;
      }
                    // WARNING: Subroutine does not return
      FUN_8003a54c();
    }
    uVar2 = param_1 << 8 | 0x80000000;
    uVar1 = param_2 << 8 | 0x80000000;
    uVar3 = uVar2 - (uVar1 >> (uVar6 & 0xff));
    if ((int)uVar3 < 0) {
      bVar8 = (bool)((byte)(uVar3 >> 7) & 1);
      uVar5 = (uVar3 >> 8) + (uVar5 - 1) * 0x800000 + (uint)bVar8;
      if (!bVar8) {
        return uVar5;
      }
      if ((uVar3 & 0x7f) != 0) {
        return uVar5;
      }
    }
    else {
      bVar9 = (uVar5 & 0xfe) == 0;
      bVar8 = false;
      if (!bVar9) {
        uVar2 = uVar3 * 2;
        bVar8 = (int)uVar2 < 0;
        bVar9 = uVar2 == 0;
      }
      if (!bVar8) {
        if (bVar9) {
          if (uVar3 >> 7 == 0) {
            return uVar3 >> 7;
          }
        }
        else {
          uVar2 = uVar2 >> 2;
          if (uVar2 == 0) {
            return uVar2;
          }
          iVar4 = count_leading_zeroes(uVar2);
          uVar6 = 0x28U - iVar4 & 0x1f;
          if ((uVar5 ^ uVar5 - iVar4) >> 8 == 0) {
            return (uVar2 >> uVar6 | uVar2 << 0x20 - uVar6) + (uVar5 - iVar4) * 0x800000;
          }
        }
        return param_1 & 0x80000000;
      }
      bVar8 = (bool)((byte)(uVar2 >> 7) & 1);
      uVar5 = ((int)uVar2 >> 8) + (param_1 & 0xff800000) + (uint)bVar8;
      if (!bVar8) {
        return uVar5;
      }
      if ((uVar3 & 0x3f) != 0) {
        return uVar5;
      }
    }
    if (uVar1 << (0x20 - uVar6 & 0xff) == 0) {
      uVar5 = uVar5 & 0xfffffffe;
    }
    else {
      uVar5 = uVar5 - 1;
    }
    return uVar5;
  }
  iVar4 = param_1 - param_2;
  if (param_1 < param_2) {
    param_1 = param_1 - iVar4;
    param_2 = param_2 + iVar4;
  }
  uVar5 = param_1 >> 0x17;
  bVar8 = (param_2 & 0x7f800000) == 0;
  if (!bVar8) {
    bVar8 = (uVar5 & 0xff) == 0xff;
  }
  uVar6 = uVar5 - (param_2 >> 0x17);
  if (bVar8) {
    if ((uVar5 & 0xff) != 0xff) {
      if ((param_1 & 0x7f800000) == 0) {
        param_1 = param_1 & 0x80000000;
      }
      return param_1;
    }
                    // WARNING: Subroutine does not return
    FUN_8003a54c();
  }
  uVar1 = param_1 << 8 | 0x80000000;
  uVar3 = param_2 << 8 | 0x80000000;
  uVar2 = uVar3 >> (uVar6 & 0xff);
  bVar8 = CARRY4(uVar1,uVar2);
  uVar1 = uVar1 + uVar2;
  if (bVar8) {
    uVar5 = (uint)bVar8 << 0x1f | uVar1 >> 1;
    bVar8 = (bool)((byte)(uVar5 >> 7) & 1);
    uVar5 = uVar5 >> 8;
    uVar2 = uVar5 + (param_1 & 0xff800000) + (uint)bVar8;
    if (bVar8) {
      uVar5 = uVar1 & 0xff;
    }
    uVar7 = uVar2 * 2;
    if (uVar5 != 0) {
      if (uVar5 != 0) {
        bVar8 = 0xfeffffff < uVar7;
      }
      if (!bVar8) {
        return uVar2;
      }
      goto LAB_8003a050;
    }
  }
  else {
    bVar8 = (bool)((byte)(uVar1 >> 7) & 1);
    uVar2 = (uVar1 >> 8) + (uVar5 - 1) * 0x800000 + (uint)bVar8;
    if (!bVar8) {
      return uVar2;
    }
    uVar7 = uVar2 * 2;
    if ((uVar1 & 0x7f) != 0) {
      bVar8 = 0xfeffffff < uVar7;
    }
    if (!bVar8) {
      return uVar2;
    }
  }
  if (uVar3 << (0x20 - uVar6 & 0xff) == 0) {
    uVar2 = uVar2 & 0xfffffffe;
  }
  if (uVar7 < 0xff000000) {
    return uVar2;
  }
LAB_8003a050:
  return (uVar2 + 0xa0000000 >> 0x17 | 0xff) << 0x17;
}



ulonglong FUN_8003a0c4(uint param_1,uint param_2,undefined4 param_3,uint param_4)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  bool bVar8;
  
  uVar3 = param_1 >> 7 & 0xff0000;
  bVar8 = uVar3 == 0;
  if (!bVar8) {
    param_4 = param_2 >> 7 & 0xff0000;
    bVar8 = param_4 == 0;
  }
  if (!bVar8) {
    bVar8 = uVar3 == 0xff0000;
  }
  if (!bVar8) {
    bVar8 = param_4 == 0xff0000;
  }
  if (bVar8) {
    if ((int)(param_1 ^ param_2) < 0) {
      uVar3 = uVar3 | 0x100;
    }
    uVar2 = param_2 >> 7 & 0xff0000;
    if (0xfeffff < uVar3 || 0xfeffff < uVar2) {
                    // WARNING: Subroutine does not return
      FUN_8003a54c();
    }
    if (uVar2 != 0) {
      return CONCAT44(param_2,param_1 ^ param_2) & 0xffffffff80000000;
    }
    if ((uVar3 & 0xff0000) == 0) {
      return CONCAT44(param_2,DAT_8003a250);
    }
    param_1 = param_1 ^ param_2;
  }
  else {
    uVar2 = param_1 & 0xffffff | 0x800000;
    uVar1 = param_2 & 0xffffff | 0x800000;
    uVar6 = (uint)*(byte *)(-0x7ffc5df4 - (uVar1 >> 0x11));
    if ((int)(param_1 ^ param_2) < 0) {
      uVar3 = uVar3 | 0x100;
    }
    bVar8 = uVar1 <= uVar2;
    uVar1 = -uVar1;
    iVar7 = uVar6 * 2;
    if (!bVar8) {
      uVar2 = uVar2 << 1;
    }
    iVar4 = (uVar3 - param_4) + 0x7d0000;
    uVar5 = iVar4 + (iVar4 >> 0x10) + (uint)bVar8;
    iVar7 = uVar6 * 0x100 + (((int)(uVar1 * iVar7) >> 4) * iVar7 >> 0x15);
    uVar3 = iVar7 * (uVar2 >> 8) >> 0x14;
    uVar6 = uVar1 * uVar3 + uVar2 * 0x800;
    uVar2 = iVar7 * (uVar6 >> 8) >> 0x13;
    uVar6 = uVar1 * uVar2 + uVar6 * 0x1000;
    bVar8 = CARRY4(uVar6,uVar1);
    if (bVar8) {
      uVar6 = uVar6 + uVar1;
    }
    iVar7 = uVar1 + uVar6 * 2;
    param_1 = uVar2 + uVar3 * 0x1000 + (uint)bVar8 + uVar5 * 0x800000 +
              (uint)CARRY4(uVar1,uVar6 * 2);
    if (uVar5 < 0xfc0000) {
      return CONCAT44(iVar7,param_1);
    }
    if ((int)(uVar5 - 0xfc0000) < 0) {
      if ((uVar5 & 0xf0) != 0) {
        param_1 = param_1 + 0x60000000 & 0x80000000;
      }
      return CONCAT44(iVar7,param_1);
    }
    if (0xfdffffff < param_1 * 2 + 0x1000000) {
      return CONCAT44(iVar7,param_1);
    }
    param_1 = param_1 + 0xa0000000;
  }
  return CONCAT44(0xff,(param_1 >> 0x17 | 0xff) << 0x17);
}



void FUN_8003a254(uint param_1,uint param_2)

{
  uint uVar1;
  bool bVar2;
  bool bVar3;
  
  uVar1 = param_1 | param_2;
  if ((int)uVar1 < 0) {
    if ((int)(uVar1 + 0x800000) < 0) {
      if (-1 < (int)(uVar1 - 0x800000)) {
        return;
      }
      return;
    }
    bVar2 = 0xfeffffff < param_1 << 1;
    if (!bVar2) {
      bVar2 = 0xfeffffff < param_2 << 1;
    }
    if (!bVar2) {
      return;
    }
  }
  else {
    bVar3 = SCARRY4(uVar1,0x800000);
    bVar2 = (int)(uVar1 + 0x800000) < 0;
    if (!bVar2) {
      bVar3 = SBORROW4(uVar1,0x800000);
      bVar2 = (int)(uVar1 - 0x800000) < 0;
    }
    if (!bVar2) {
      return;
    }
    if (!bVar3) {
      return;
    }
    bVar2 = (int)(param_1 + 0x800000) < 0;
    if (!bVar2) {
      bVar2 = (int)(param_2 + 0x800000) < 0;
    }
    if (!bVar2) {
      return;
    }
  }
                    // WARNING: Subroutine does not return
  FUN_8003a54c();
}



uint FUN_8003a2d8(uint param_1)

{
  uint uVar1;
  uint uVar2;
  
  uVar1 = (param_1 << 1) >> 0x18;
  uVar2 = 0x9e - uVar1;
  if (uVar1 < 0x9f && uVar2 != 0) {
    uVar1 = ((param_1 | 0x800000) << 8) >> (uVar2 & 0xff);
    if ((int)(param_1 | 0x800000) < 0) {
      uVar1 = -uVar1;
    }
    return uVar1;
  }
                    // WARNING: Subroutine does not return
  FUN_8003a54c();
}



uint FUN_8003a31c(uint param_1)

{
  if (param_1 >> 0x17 < 0x9f) {
    return (param_1 << 8 | 0x80000000) >> (0x9e - (param_1 >> 0x17) & 0xff);
  }
  if (((int)param_1 < 0) && (param_1 << 1 < 0x7f000000)) {
    return 0;
  }
                    // WARNING: Subroutine does not return
  FUN_8003a54c();
}



uint FUN_8003a370(uint param_1)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  bool bVar4;
  
  uVar2 = param_1 & 0x80000000;
  if ((int)uVar2 < 0) {
    param_1 = -param_1;
  }
  uVar3 = count_leading_zeroes(param_1);
  uVar1 = param_1 << (uVar3 & 0xff);
  if (uVar1 == 0) {
    return param_1;
  }
  bVar4 = (bool)((byte)(uVar1 >> 7) & 1);
  uVar2 = (uVar2 | (0x9d - uVar3) * 0x800000) + (uVar1 >> 8) + (uint)bVar4;
  if (!bVar4) {
    return uVar2;
  }
  if ((uVar1 & 0x7f) == 0) {
    uVar2 = uVar2 & 0xfffffffe;
  }
  return uVar2;
}



uint FUN_8003a3a0(uint param_1)

{
  uint uVar1;
  uint uVar2;
  bool bVar3;
  
  uVar2 = count_leading_zeroes(param_1);
  uVar1 = param_1 << (uVar2 & 0xff);
  if (uVar1 == 0) {
    return param_1;
  }
  bVar3 = (bool)((byte)(uVar1 >> 7) & 1);
  uVar2 = (0x9d - uVar2) * 0x800000 + (uVar1 >> 8) + (uint)bVar3;
  if (!bVar3) {
    return uVar2;
  }
  if ((uVar1 & 0x7f) == 0) {
    uVar2 = uVar2 & 0xfffffffe;
  }
  return uVar2;
}



void FUN_8003a3c8(uint param_1,uint param_2)

{
  uint uVar1;
  bool bVar2;
  bool bVar3;
  
  uVar1 = param_1 | param_2;
  if ((int)uVar1 < 0) {
    if ((int)(uVar1 + 0x800000) < 0) {
      if (-1 < (int)(uVar1 - 0x800000)) {
        return;
      }
      return;
    }
    bVar2 = 0xfeffffff < param_1 << 1;
    if (!bVar2) {
      bVar2 = 0xfeffffff < param_2 << 1;
    }
    if (!bVar2) {
      return;
    }
  }
  else {
    bVar3 = SCARRY4(uVar1,0x800000);
    bVar2 = (int)(uVar1 + 0x800000) < 0;
    if (!bVar2) {
      bVar3 = SBORROW4(uVar1,0x800000);
      bVar2 = (int)(uVar1 - 0x800000) < 0;
    }
    if (!bVar2) {
      return;
    }
    if (!bVar3) {
      return;
    }
    bVar2 = (int)(param_1 + 0x800000) < 0;
    if (!bVar2) {
      bVar2 = (int)(param_2 + 0x800000) < 0;
    }
    if (!bVar2) {
      return;
    }
  }
                    // WARNING: Subroutine does not return
  FUN_8003a54c();
}



uint FUN_8003a44c(uint param_1,uint param_2,undefined4 param_3,uint param_4)

{
  longlong lVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  bool bVar6;
  
  uVar2 = param_1 >> 7 & 0xff0000;
  bVar6 = uVar2 == 0;
  if (!bVar6) {
    param_4 = param_2 >> 7 & 0xff0000;
    bVar6 = param_4 == 0;
  }
  if (!bVar6) {
    bVar6 = uVar2 == 0xff0000;
  }
  if (!bVar6) {
    bVar6 = param_4 == 0xff0000;
  }
  if (bVar6) {
    if ((int)(param_1 ^ param_2) < 0) {
      uVar2 = uVar2 | 0x100;
    }
    if (uVar2 < 0xff0000 && (param_2 >> 7 & 0xff0000) < 0xff0000) {
      return (param_1 ^ param_2) & 0x80000000;
    }
                    // WARNING: Subroutine does not return
    FUN_8003a54c();
  }
  if ((int)(param_1 ^ param_2) < 0) {
    uVar2 = uVar2 | 0x100;
  }
  lVar1 = (ulonglong)(param_2 << 8 | 0x80000000) * (ulonglong)(param_1 << 8 | 0x80000000);
  uVar5 = (uint)((ulonglong)lVar1 >> 0x20);
  iVar3 = uVar2 + param_4 + -0x800000;
  if ((int)lVar1 != 0) {
    uVar5 = uVar5 | 1;
  }
  bVar6 = SUB41(uVar5 >> 0x1f,0);
  uVar2 = uVar5 << 1;
  uVar4 = iVar3 + (iVar3 >> 0x10) + (uint)bVar6;
  if (bVar6) {
    uVar2 = (uint)bVar6 << 0x1f | uVar5 & 0x7fffffff;
  }
  bVar6 = (bool)((byte)(uVar2 >> 7) & 1);
  uVar5 = uVar2 >> 8;
  if (bVar6) {
    uVar5 = uVar2 & 0x7f;
  }
  uVar2 = (uVar2 >> 8) + uVar4 * 0x800000 + (uint)bVar6;
  if (uVar5 != 0) {
    bVar6 = 0xfbffff < uVar4;
  }
  if (!bVar6) {
    return uVar2;
  }
  if (uVar5 == 0 || uVar4 == 0xfc0000) {
    uVar2 = uVar2 & 0xfffffffe;
  }
  if (uVar4 < 0xfc0000) {
    return uVar2;
  }
  if (-1 < (int)(uVar4 - 0xfc0000)) {
    if ((int)((uVar2 + 0x800000) * 2) < 0) {
      return uVar2;
    }
    return (uVar2 + 0xa0000000 >> 0x17 | 0xff) << 0x17;
  }
  uVar4 = uVar4 ^ 0xff;
  bVar6 = (int)(uVar4 + 0x10000) < 0;
  if (uVar4 != 0xffff0000 && bVar6 == SCARRY4(uVar4,0x10000)) {
    return uVar2;
  }
  uVar2 = uVar2 + 0x60000000;
  if (uVar4 == 0xffff0000 || bVar6 != SCARRY4(uVar4,0x10000)) {
    uVar2 = uVar2 & 0x80000000;
  }
  return uVar2;
}



uint FUN_8003a54c(uint param_1,uint param_2,uint param_3)

{
  uint uVar1;
  uint *in_lr;
  bool bVar2;
  
  if ((((int)*in_lr < 0) || (param_3 = param_2 * 2, param_3 < 0xff000001)) &&
     (param_1 * 2 < 0xff000001)) {
    if (param_1 * 2 == 0xff000000) {
      uVar1 = ((int)param_1 >> 0x1f) * -3 + 2;
      if (param_3 == 0xff000000) {
        uVar1 = (uVar1 - ((int)param_2 >> 0x1f)) + (uint)(0xfeffffff < param_3);
      }
    }
    else {
      uVar1 = param_2 >> 0x1f;
    }
  }
  else {
    uVar1 = 8;
  }
  uVar1 = *in_lr >> uVar1 * 3 & 7;
  switch(uVar1) {
  case 4:
    break;
  case 5:
    param_2 = param_1;
    break;
  case 6:
  case 7:
    return 0x7fc00000;
  default:
                    // WARNING: Could not recover jumptable at 0x8003a5b4. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar1 = (*(code *)(in_lr + uVar1 + 1))();
    return uVar1;
  }
  bVar2 = SUB41(param_2 >> 0x1f,0);
  uVar1 = param_2 * 2;
  if (uVar1 != 0) {
    bVar2 = uVar1 < 0x1000001;
  }
  if (bVar2 && (uVar1 != 0 && uVar1 != 0x1000000)) {
    param_2 = param_2 & 0x80000000;
  }
  return param_2;
}



void FUN_8003a5fc(uint param_1,uint param_2)

{
  uint uVar1;
  bool bVar2;
  bool bVar3;
  
  uVar1 = param_2 | param_1;
  if ((int)uVar1 < 0) {
    if ((int)(uVar1 + 0x800000) < 0) {
      if (-1 < (int)(uVar1 - 0x800000)) {
        return;
      }
      return;
    }
    bVar2 = 0xfeffffff < param_2 << 1;
    if (!bVar2) {
      bVar2 = 0xfeffffff < param_1 << 1;
    }
    if (!bVar2) {
      return;
    }
  }
  else {
    bVar3 = SCARRY4(uVar1,0x800000);
    bVar2 = (int)(uVar1 + 0x800000) < 0;
    if (!bVar2) {
      bVar3 = SBORROW4(uVar1,0x800000);
      bVar2 = (int)(uVar1 - 0x800000) < 0;
    }
    if (!bVar2) {
      return;
    }
    if (!bVar3) {
      return;
    }
    bVar2 = (int)(param_2 + 0x800000) < 0;
    if (!bVar2) {
      bVar2 = (int)(param_1 + 0x800000) < 0;
    }
    if (!bVar2) {
      return;
    }
  }
                    // WARNING: Subroutine does not return
  FUN_8003a54c(param_2);
}



uint FUN_8003a678(uint param_1,uint param_2)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  bool bVar8;
  bool bVar9;
  
  if (-1 < (int)(param_1 ^ param_2)) {
    if (param_1 < param_2) {
      uVar3 = param_1 - param_2 ^ 0x80000000;
      param_1 = param_1 - uVar3;
      param_2 = param_2 + uVar3;
    }
    uVar3 = param_1 >> 0x17;
    bVar8 = (param_2 & 0x7f800000) == 0;
    if (!bVar8) {
      bVar8 = (uVar3 & 0xff) == 0xff;
    }
    uVar4 = uVar3 - (param_2 >> 0x17);
    if (bVar8) {
      if ((uVar3 & 0xff) != 0xff) {
        if ((param_1 & 0x7f800000) == 0) {
          param_1 = 0;
        }
        return param_1;
      }
                    // WARNING: Subroutine does not return
      FUN_8003a54c();
    }
    uVar1 = param_1 << 8 | 0x80000000;
    uVar2 = param_2 << 8 | 0x80000000;
    uVar6 = uVar1 - (uVar2 >> (uVar4 & 0xff));
    if ((int)uVar6 < 0) {
      bVar8 = (bool)((byte)(uVar6 >> 7) & 1);
      uVar3 = (uVar6 >> 8) + (uVar3 - 1) * 0x800000 + (uint)bVar8;
      if (!bVar8) {
        return uVar3;
      }
      if ((uVar6 & 0x7f) != 0) {
        return uVar3;
      }
    }
    else {
      bVar9 = (uVar3 & 0xfe) == 0;
      bVar8 = false;
      if (!bVar9) {
        uVar1 = uVar6 * 2;
        bVar8 = (int)uVar1 < 0;
        bVar9 = uVar1 == 0;
      }
      if (!bVar8) {
        if (bVar9) {
          if (uVar6 >> 7 == 0) {
            return uVar6 >> 7;
          }
        }
        else {
          uVar1 = uVar1 >> 2;
          if (uVar1 == 0) {
            return uVar1;
          }
          iVar7 = count_leading_zeroes(uVar1);
          uVar4 = 0x28U - iVar7 & 0x1f;
          if ((uVar3 ^ uVar3 - iVar7) >> 8 == 0) {
            return (uVar1 >> uVar4 | uVar1 << 0x20 - uVar4) + (uVar3 - iVar7) * 0x800000;
          }
        }
        return param_1 & 0x80000000;
      }
      bVar8 = (bool)((byte)(uVar1 >> 7) & 1);
      uVar3 = ((int)uVar1 >> 8) + (param_1 & 0xff800000) + (uint)bVar8;
      if (!bVar8) {
        return uVar3;
      }
      if ((uVar6 & 0x3f) != 0) {
        return uVar3;
      }
    }
    if (uVar2 << (0x20 - uVar4 & 0xff) == 0) {
      uVar3 = uVar3 & 0xfffffffe;
    }
    else {
      uVar3 = uVar3 - 1;
    }
    return uVar3;
  }
  param_2 = param_2 ^ 0x80000000;
  iVar7 = param_1 - param_2;
  if (param_1 < param_2) {
    param_1 = param_1 - iVar7;
    param_2 = param_2 + iVar7;
  }
  uVar3 = param_1 >> 0x17;
  bVar8 = (param_2 & 0x7f800000) == 0;
  if (!bVar8) {
    bVar8 = (uVar3 & 0xff) == 0xff;
  }
  uVar4 = uVar3 - (param_2 >> 0x17);
  if (bVar8) {
    if ((uVar3 & 0xff) != 0xff) {
      if ((param_1 & 0x7f800000) == 0) {
        param_1 = param_1 & 0x80000000;
      }
      return param_1;
    }
                    // WARNING: Subroutine does not return
    FUN_8003a54c();
  }
  uVar2 = param_1 << 8 | 0x80000000;
  uVar6 = param_2 << 8 | 0x80000000;
  uVar1 = uVar6 >> (uVar4 & 0xff);
  bVar8 = CARRY4(uVar2,uVar1);
  uVar2 = uVar2 + uVar1;
  if (bVar8) {
    uVar3 = (uint)bVar8 << 0x1f | uVar2 >> 1;
    bVar8 = (bool)((byte)(uVar3 >> 7) & 1);
    uVar3 = uVar3 >> 8;
    uVar1 = uVar3 + (param_1 & 0xff800000) + (uint)bVar8;
    if (bVar8) {
      uVar3 = uVar2 & 0xff;
    }
    uVar5 = uVar1 * 2;
    if (uVar3 != 0) {
      if (uVar3 != 0) {
        bVar8 = 0xfeffffff < uVar5;
      }
      if (!bVar8) {
        return uVar1;
      }
      goto LAB_8003a050;
    }
  }
  else {
    bVar8 = (bool)((byte)(uVar2 >> 7) & 1);
    uVar1 = (uVar2 >> 8) + (uVar3 - 1) * 0x800000 + (uint)bVar8;
    if (!bVar8) {
      return uVar1;
    }
    uVar5 = uVar1 * 2;
    if ((uVar2 & 0x7f) != 0) {
      bVar8 = 0xfeffffff < uVar5;
    }
    if (!bVar8) {
      return uVar1;
    }
  }
  if (uVar6 << (0x20 - uVar4 & 0xff) == 0) {
    uVar1 = uVar1 & 0xfffffffe;
  }
  if (uVar5 < 0xff000000) {
    return uVar1;
  }
LAB_8003a050:
  return (uVar1 + 0xa0000000 >> 0x17 | 0xff) << 0x17;
}



// WARNING: Removing unreachable block (ram,0x8003a8b8)
// WARNING: Removing unreachable block (ram,0x8003a8cc)
// WARNING: Removing unreachable block (ram,0x8003a7b0)
// WARNING: Removing unreachable block (ram,0x8003a7ac)
// WARNING: Removing unreachable block (ram,0x8003a7b4)
// WARNING: Removing unreachable block (ram,0x8003a780)
// WARNING: Removing unreachable block (ram,0x8003a798)
// WARNING: Removing unreachable block (ram,0x8003a79c)
// WARNING: Removing unreachable block (ram,0x8003a7a0)
// WARNING: Removing unreachable block (ram,0x8003a7b8)
// WARNING: Removing unreachable block (ram,0x8003a7c0)
// WARNING: Removing unreachable block (ram,0x8003a7d4)
// WARNING: Removing unreachable block (ram,0x8003a8b0)
// WARNING: Removing unreachable block (ram,0x8003a8e4)
// WARNING: Removing unreachable block (ram,0x8003a8c0)

longlong FUN_8003a7ec(uint param_1,uint param_2,uint param_3)

{
  uint uVar1;
  uint uVar2;
  char in_OV;
  bool bVar3;
  bool bVar4;
  
  uVar2 = 0x7ff;
  uVar1 = param_2 >> 0x14 & 0x7ff;
  bVar4 = uVar1 == 0;
  if (!bVar4) {
    uVar2 = uVar1 ^ 0x7ff;
    bVar4 = uVar2 == 0;
  }
  bVar3 = false;
  if (!bVar4) {
    in_OV = SBORROW4(uVar2,param_3);
    bVar3 = (int)(uVar2 - param_3) < 0;
    bVar4 = uVar2 == param_3;
  }
  if (!bVar4 && bVar3 == (bool)in_OV) {
    in_OV = SCARRY4(param_3,uVar1);
    bVar3 = (int)(param_3 + uVar1) < 0;
    bVar4 = param_3 + uVar1 == 0;
  }
  if (!bVar4 && bVar3 == (bool)in_OV) {
    param_2 = param_2 + param_3 * 0x100000;
  }
  if (!bVar4 && bVar3 == (bool)in_OV) {
    return CONCAT44(param_2,param_1);
  }
  if (uVar1 == 0) {
    return (ulonglong)(param_2 & 0x80000000) << 0x20;
  }
  if (uVar2 == 0) {
    if ((param_1 | param_2 << 0xc) == 0) {
      return CONCAT44(param_2,param_1);
    }
    return (ulonglong)DAT_800393cc << 0x20;
  }
  param_2 = param_2 & 0x80000000;
  if (-1 < (int)param_3) {
    param_2 = param_2 | 0x7ff00000;
  }
  return (ulonglong)param_2 << 0x20;
}



// WARNING: Removing unreachable block (ram,0x8003a8b8)
// WARNING: Removing unreachable block (ram,0x8003a8cc)
// WARNING: Removing unreachable block (ram,0x8003a7b0)
// WARNING: Removing unreachable block (ram,0x8003a7ac)
// WARNING: Removing unreachable block (ram,0x8003a7b4)
// WARNING: Removing unreachable block (ram,0x8003a780)
// WARNING: Removing unreachable block (ram,0x8003a798)
// WARNING: Removing unreachable block (ram,0x8003a79c)
// WARNING: Removing unreachable block (ram,0x8003a7a0)
// WARNING: Removing unreachable block (ram,0x8003a7b8)
// WARNING: Removing unreachable block (ram,0x8003a7c0)
// WARNING: Removing unreachable block (ram,0x8003a7d4)
// WARNING: Removing unreachable block (ram,0x8003a8b0)
// WARNING: Removing unreachable block (ram,0x8003a8e4)
// WARNING: Removing unreachable block (ram,0x8003a8c0)

ulonglong FUN_8003a854(uint param_1,uint param_2,undefined4 param_3,uint param_4)

{
  uint uVar1;
  char in_OV;
  bool bVar2;
  bool bVar3;
  
  uVar1 = param_1 >> 0x17 & 0xff;
  bVar3 = uVar1 == 0;
  if (!bVar3) {
    param_4 = uVar1 ^ 0xff;
    bVar3 = param_4 == 0;
  }
  bVar2 = false;
  if (!bVar3) {
    in_OV = SBORROW4(param_4,param_2);
    bVar2 = (int)(param_4 - param_2) < 0;
    bVar3 = param_4 == param_2;
  }
  if (!bVar3 && bVar2 == (bool)in_OV) {
    in_OV = SCARRY4(param_2,uVar1);
    bVar2 = (int)(param_2 + uVar1) < 0;
    bVar3 = param_2 + uVar1 == 0;
  }
  if (!bVar3 && bVar2 == (bool)in_OV) {
    param_1 = param_1 + param_2 * 0x800000;
  }
  if (!bVar3 && bVar2 == (bool)in_OV) {
    return CONCAT44(param_2,param_1);
  }
  if (uVar1 == 0) {
    return CONCAT44(param_2,param_1) & 0xffffffff80000000;
  }
  if (param_4 == 0) {
    if ((param_1 & 0x7fffff) == 0) {
      return CONCAT44(param_2,param_1);
    }
    return CONCAT44(param_2,DAT_8003a0a4);
  }
  param_1 = param_1 & 0x80000000;
  if (-1 < (int)param_2) {
    param_1 = param_1 | 0x7f800000;
  }
  return CONCAT44(param_2,param_1);
}


